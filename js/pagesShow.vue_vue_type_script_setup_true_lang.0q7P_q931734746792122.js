import{a0 as t,_ as n,cl as e,cm as o,cn as r,co as i,C as s,m as u,c0 as c,ak as a,am as l}from"./three.1FILWcBb1734746792122.js";import{f,e as p,U as d}from"./@tresjs.vA_UT8oy1734746792122.js";import{z as h}from"./three-custom-shader-material.uwcZNtd-1734746792122.js";import{b as g,a as m}from"./buildingsCustomShaderMaterial.hq-IAd4G1734746792122.js";import{d as y,b as w,a3 as b,w as I,o as v,D as _,u as C,r as x,a6 as A,e as R,f as S,g as T,J as j,j as O,aj as k,ak as E,F,I as B,G as M,m as L}from"./@vue.-THQH3GC1734746792122.js";function Z(t,n){const e=H();return(Z=function(t,n){return e[t-=194]})(t,n)}!function(t,n){const e=Z,o=H();for(;;)try{if(663186===parseInt(e(214))/1*(-parseInt(e(230))/2)+-parseInt(e(201))/3*(parseInt(e(194))/4)+parseInt(e(202))/5*(parseInt(e(205))/6)+parseInt(e(218))/7*(-parseInt(e(207))/8)+parseInt(e(210))/9+-parseInt(e(235))/10+parseInt(e(229))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(212)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){D(this,(function(){const t=Z,n=new RegExp(t(221)),e=new RegExp(t(213),"i"),o=W(t(234));n[t(228)](o+t(209))&&e[t(228)](o+t(225))?W():o("0")}))()}();const z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(212)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();z(void 0,(function(){const t=Z;let n;try{n=Function(t(197)+t(232)+");")()}catch(r){n=window}const e=n[t(233)]=n.console||{},o=["log",t(226),t(227),t(216),t(223),t(208),"trace"];for(let i=0;i<o[t(199)];i++){const n=z.constructor[t(224)][t(204)](z),r=o[i],s=e[r]||n;n[t(215)]=z.bind(z),n[t(211)]=s[t(211)][t(204)](s),e[r]=n}}))();const G=async()=>{const t=await f("./plugins/digitalCity/model/shanghai.FBX");let n=null,e=null,o=null;return t.traverse((t=>{const r=Z;t[r(222)]===r(206)&&(n=t),t[r(222)]===r(196)&&(e=t),t[r(222)]===r(200)&&(o=t)})),{model:t,city:n,land:e,roads:o}};function H(){const t=["12AiwNEs","125kVYdUL","call","bind","169674TVTKtF","CITY_UNTRIANGULATED","16xFwifQ","table","chain","9088668gcffKn","toString","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1UgsrFe","__proto__","error","string","3939243jWhhqH","action","constructor","function *\\( *\\)","name","exception","prototype","input","warn","info","test","25529779CLrMjT","1325426ldCkIC","debu",'{}.constructor("return this")( )',"console","init","8869510tgxKAf","699368QAeFhi","gger","LANDMASS","return (function() ","while (true) {}","length","ROADS"];return(H=function(){return t})()}function W(t){function n(t){const e=Z;if(typeof t===e(217))return function(t){}.constructor(e(198))[e(212)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(220)]("debugger")[e(203)](e(219)):function(){return!1}.constructor(e(231)+e(195))[e(212)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const $=N;function U(){const t=["2035182nfsVdc","#ffff00","topColor","isArray","Color","#ffffff","console","action","computeBoundingBox","string","info","uGradient","constructor","2DBSDrl","prototype","__proto__","computeBoundingSphere","exception","356560biIRwI","bulidingsColor","uOpacity","gger","gradient","uniforms","clone","length","warn","84009QvvONw","DoubleSide","opacity","376983dfqhHg","1276137tiszyF","boundingBox","landColor","#112233","counter","object","land","1287120kpwsTa","error","stateObject","input","toString","__csm","trace","#e523ff","while (true) {}","bind",'{}.constructor("return this")( )',"debu","1370135gCSPPG","renderOrder","dispose","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","model","test","setStyle","uColor","call","city","table","material","value","35HIMJgE","chain","apply"];return(U=function(){return t})()}!function(t,n){const e=N,o=U();for(;;)try{if(252039===-parseInt(e(359))/1+-parseInt(e(345))/2*(-parseInt(e(362))/3)+-parseInt(e(370))/4+parseInt(e(382))/5+parseInt(e(332))/6+parseInt(e(395))/7*(-parseInt(e(350))/8)+parseInt(e(363))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){V(this,(function(){const t=N,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(385),"i"),o=q("init");n[t(387)](o+t(396))&&e[t(387)](o+t(373))?q():o("0")}))()}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[N(397)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function N(t,n){const e=U();return(N=function(t,n){return e[t-=332]})(t,n)}K(void 0,(function(){const t=N,n=function(){const t=N;let n;try{n=Function("return (function() "+t(380)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(338)]||{},o=["log",t(358),t(342),t(371),t(349),t(392),t(376)];for(let r=0;r<o[t(357)];r++){const n=K.constructor[t(346)][t(379)](K),i=o[r],s=e[i]||n;n[t(347)]=K.bind(K),n[t(374)]=s[t(374)][t(379)](s),e[i]=n}}))();const Q=[$(368)],P=y({__name:"buildingsModelCustomShader",props:{model:{},bulidingsColor:{default:$(377)},landColor:{default:$(366)},topColor:{default:$(333)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=$,r=e,i=w(0),s=r.model[o(391)];s[o(383)]=1001;const u=r.model[o(369)];(()=>{const t=o,{geometry:e}=s;e[t(340)](),e[t(348)]();const{max:u,min:c}=e[t(364)];if(s[t(393)][t(375)])return;const a=new h({baseMaterial:s.material,vertexShader:g,fragmentShader:m,silent:!0,uniforms:{uMax:{value:u},uMin:{value:c},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[t(336)])(r.bulidingsColor)},uOpacity:{value:r[t(361)]},uLightColor:{value:new(n[t(336)])(t(337))},uTopColor:{value:new(n[t(336)])(r[t(334)])},uTime:i,uGradient:{value:r[t(354)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:n[t(360)]});s[t(393)][t(384)](),s[t(393)]=a})();const{onLoop:c}=p();c((({delta:t})=>{i[o(394)]+=t})),b((()=>{const n=o;r[n(351)]&&s.material[n(355)][n(389)].value[n(388)](r[n(351)]),r[n(365)]&&((n,e)=>{const i=o;let s;"cu"===n||n===i(369)&&(s=Array[i(335)](u.material)?u.material:[u[i(393)]],s.forEach((n=>{const o=i;n[e][o(388)](r[o(365)]),n.side=t})))})(n(369),"color"),r[n(361)]&&(s.material.uniforms[n(352)][n(394)]=r[n(361)])})),I(r,((t,n)=>{const e=o;s[e(393)].uniforms[e(343)][e(394)]=t[e(354)]}));const a=r[o(386)].model[o(356)]();return(t,n)=>(v(),_("primitive",{object:C(a)},null,8,Q))}});function q(t){function n(t){const e=N;if(typeof t===e(341))return function(t){}[e(344)](e(378))[e(397)](e(367));1!==(""+t/t)[e(357)]||t%20==0?function(){return!0}[e(344)](e(381)+"gger")[e(390)](e(339)):function(){return!1}[e(344)](e(381)+e(353))[e(397)](e(372)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Y=et;function J(){const t=["builds","opacity","25553550tUDZoU","width","action","uColor","call","gger","applyMatrix4","set","function *\\( *\\)","trace","Shader","Wireframe","constructor","stateObject","primitive","matrix","table","info","apply","323697ildfcJ","37405eDgHzr","style","log","6vEdtZW","color","console","debu","geometry","renderOrder","string","prototype","counter","clone","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","init","object","__proto__","3nvZfpR","toString",'{}.constructor("return this")( )',"uOpacity","5336368VgsYZO","96tmatuB"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","uniforms","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","156159FmANfP","error","test","chain","length","496436EbnpnG","3877958OIDVff","420kycvWv","innerHeight","buildingsLines","material","linewidth"];return(J=function(){return t})()}!function(t,n){const e=et,o=J();for(;;)try{if(615856===parseInt(e(237))/1*(-parseInt(e(241))/2)+-parseInt(e(257))/3*(parseInt(e(271))/4)+-parseInt(e(238))/5*(parseInt(e(262))/6)+-parseInt(e(272))/7+-parseInt(e(261))/8+parseInt(e(266))/9*(parseInt(e(273))/10)+parseInt(e(280))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[et(236)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){X(this,(function(){const t=et,n=new RegExp(t(226)),e=new RegExp(t(252),"i"),o=rt(t(254));n[t(268)](o+t(269))&&e[t(268)](o+"input")?rt():o("0")}))()}();const tt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();tt(void 0,(function(){const t=et;let n;try{n=Function("return (function() "+t(259)+");")()}catch(r){n=window}const e=n[t(243)]=n.console||{},o=[t(240),"warn",t(235),t(267),"exception",t(234),t(227)];for(let i=0;i<o[t(270)];i++){const n=tt[t(230)][t(248)].bind(tt),r=o[i],s=e[r]||n;n[t(256)]=tt[t(251)](tt),n[t(258)]=s[t(258)][t(251)](s),e[r]=n}}))();const nt=[Y(255)];function et(t,n){const e=J();return(et=function(t,n){return e[t-=219]})(t,n)}const ot=y({__name:Y(275),props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:Y(229)}},setup(t){const n=Y,c=t;let a=null,l=null;if(c[n(239)]===n(229)){const t=new e(c.builds[n(245)]);let s=(new o).fromEdgesGeometry(t),u=new r({color:c[n(242)],linewidth:c[n(219)],opacity:c[n(279)],transparent:!0,depthWrite:!0,depthTest:!0});u.resolution[n(225)](window.innerWidth,window[n(274)]),a=new i(s,u),a[n(224)](c.builds[n(233)][n(250)]())}else{l={transparent:!0,uniforms:{uColor:{value:new s(c[n(242)])},uOpacity:{value:c[n(279)]}},vertexShader:n(265),fragmentShader:n(263)};const t=new e(c[n(278)][n(245)]),o=new u(l);a=new LineSegments(t,o),a.applyMatrix4(c[n(278)][n(233)][n(250)]()),a.material[n(277)]=c.width,a[n(246)]=1e3}return b((()=>{const t=n;c[t(239)]===t(228)&&(c[t(242)]&&(l[t(264)][t(221)][t(253)]=new s(c[t(242)])),c.opacity&&(l[t(264)][t(260)][t(253)]=c.opacity)),c[t(239)]===t(229)&&(c.color&&(a[t(276)][t(242)]=new s(c.color)),c[t(279)]&&(a[t(276)].opacity=c.opacity)),c.width&&(a[t(276)].linewidth=c.width)})),(t,e)=>{const o=n;return v(),_(o(232),{object:C(a)},null,8,nt)}}});function rt(t){function n(t){const e=et;if(typeof t===e(247))return function(t){}[e(230)]("while (true) {}")[e(236)](e(249));1!==(""+t/t).length||t%20==0?function(){return!0}[e(230)](e(244)+"gger")[e(222)](e(220)):function(){return!1}[e(230)](e(244)+e(223))[e(236)](e(231)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const it=st;function st(t,n){const e=at();return(st=function(t,n){return e[t-=499]})(t,n)}!function(t,n){const e=st,o=at();for(;;)try{if(589352===-parseInt(e(518))/1*(-parseInt(e(534))/2)+parseInt(e(502))/3*(parseInt(e(511))/4)+-parseInt(e(503))/5*(-parseInt(e(508))/6)+parseInt(e(500))/7*(-parseInt(e(523))/8)+-parseInt(e(530))/9+-parseInt(e(531))/10+-parseInt(e(509))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(524)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){ut(this,(function(){const t=st,n=new RegExp(t(543)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=dt(t(540));n[t(499)](o+t(526))&&e[t(499)](o+"input")?dt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(524)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function at(){const t=["debu","8ncQaCk","apply","constructor","chain","autoRotate","showBuildings","tcRef","936945skdpKu","4519370oGERWx","info","TresAmbientLight","2Ytqchu","string","TresGridHelper","pagesShow","toString","call","init","bind","action","function *\\( *\\)","return (function() ","__proto__","$slots","TresAxesHelper","test","119147dOXwLE","model","3219486KuunTf","155uKCZTM","stateObject","#000","builds","#ffffff","94422OFQWjh","10328505tClRqr","showAxesHelper","4lpusVm","warn","disableRender","console","length","gger","showGridHelper","540361vQnMsl","while (true) {}","log","prototype"];return(at=function(){return t})()}ct(void 0,(function(){const t=st,n=function(){const t=st;let n;try{n=Function(t(544)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(514)]=n[t(514)]||{},o=[t(520),t(512),t(532),"error","exception","table","trace"];for(let r=0;r<o[t(515)];r++){const n=ct[t(525)][t(521)][t(541)](ct),i=o[r],s=e[i]||n;n[t(545)]=ct[t(541)](ct),n[t(538)]=s[t(538)].bind(s),e[i]=n}}))();const lt={key:1,args:[1e3],position:[0,19,0]},ft={key:2,args:[6e3,100],position:[0,19,0]},pt=y({__name:it(537),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let e,o;const r=t,i=x({clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r[n(513)]}),s=x({autoRotate:r[n(527)],enableDamping:!0});let u=null;r[n(528)]&&([e,o]=A((()=>G())),e=await e,o(),u=e);const f=w(),p=w();return(t,e)=>{const o=n,c=R("TresCanvas");return v(),S(c,L({ref_key:o(529),ref:p},i,{"window-size":""}),{default:T((()=>[j("TresPerspectiveCamera",{ref_key:"perspectiveCameraRef",ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),O(C(d),k(E(s)),null,16),e[0]||(e[0]=j(o(533),{color:o(507)},null,-1)),e[1]||(e[1]=j("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:o(507)},null,-1)),r[o(528)]&&C(u)?(v(),_(F,{key:0},[O(P,{model:C(u)},null,8,[o(501)]),O(ot,{builds:C(u).city,color:o(505)},null,8,[o(506)])],64)):B("",!0),M(t[o(546)],"ability"),r[o(510)]?(v(),_(o(547),lt)):B("",!0),r[o(517)]?(v(),_(o(536),ft)):B("",!0)])),_:3},16)}}});function dt(t){function n(t){const e=st;if(typeof t===e(535))return function(t){}[e(525)](e(519))[e(524)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(522)+e(516))[e(539)](e(542)):function(){return!1}[e(525)]("debu"+e(516)).apply(e(504)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{P as _,ot as a,pt as b,G as l};

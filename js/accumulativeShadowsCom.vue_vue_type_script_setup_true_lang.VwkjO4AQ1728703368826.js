import{_ as t,h as n}from"./three.VoknrmS61728703368826.js";import{p as e}from"./@tresjs.JhHPALEY1728703368826.js";import{d as o,P as a}from"./@pmndrs.Q7GR9FLZ1728703368826.js";import{d as r,b as s,w as i,a3 as c,o as u,E as l,L as f,aj as p,ak as h}from"./@vue.JNsx1iN61728703368826.js";const d=m;function m(t,n){const e=g();return(m=function(t,n){return e[t-=196]})(t,n)}function g(){const t=["1263640iwzzZo","accumulativeShadowsCom","gPlane","position","near","bind","call","string","3475988RPLdoM","exception","texture","progressiveLightMap2","gger","right","remove","shadow","log","ambient","40KQIgCb","62611mvTGjq","6335lSZqzh","camera","prepare","value","bias","702MdrERD","1282923gtaGVO","opacity","length","MathUtils","info","TresPlaneGeometry","counter","prototype","children","trace","left","constructor","toString","material","Group","6EBTxSh","mapSize","action","#000000","radius","console","shadows plm update","warn","randFloatSpread","apply","debu","intensity","error","344000hJtZoZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","blendWindow","width","blend","amount","Vector3","table","set","init","test","__proto__","bottom","configure",'{}.constructor("return this")( )',"shadows render start","top","acos","sin","size","TresMesh","alphaTest","add","color","941894SODiCd","clear","finish","rotate-x","frames","castShadow","random","DirectionalLight","lightPosition"];return(g=function(){return t})()}!function(t,n){const e=m,o=g();for(;;)try{if(538523===-parseInt(e(242))/1+parseInt(e(214))/2*(-parseInt(e(264))/3)+parseInt(e(231))/4+parseInt(e(223))/5+parseInt(e(248))/6*(-parseInt(e(243))/7)+-parseInt(e(277))/8+parseInt(e(249))/9*(parseInt(e(241))/10))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[m(273)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){w(this,(function(){const t=m,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(278),"i"),o=S(t(199));n.test(o+"chain")&&e[t(200)](o+"input")?S():o("0")}))()}();const M=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[m(273)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();M(void 0,(function(){const t=m,n=function(){const t=m;let n;try{n=Function("return (function() "+t(204)+");")()}catch(e){n=window}return n}(),e=n[t(269)]=n[t(269)]||{},o=["log",t(271),t(253),t(276),t(232),t(197),t(258)];for(let a=0;a<o[t(251)];a++){const n=M[t(260)][t(256)][t(228)](M),r=o[a],s=e[r]||n;n[t(201)]=M[t(228)](M),n[t(261)]=s.toString[t(228)](s),e[r]=n}}))();const b=[d(217)],y=f(d(254),{args:[1,1]},null,-1),z=r({__name:d(224),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:d(267)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(r){const m=d,g=r;let w=s();const{extend:M,scene:z,renderer:S,camera:I}=e();M({SoftShadowMaterial:o});const x={position:(new(t[m(196)]))[m(198)](g[m(222)].x,g[m(222)].y,g.lightPosition.z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},v=new a(S[m(246)],z[m(246)],x.mapSize),P={map:v[m(234)][m(233)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:g[m(281)],alphaTest:g.alphaTest,opacity:g.opacity,color:g[m(213)]},_=new(t[m(263)]);for(let n=0;n<x[m(282)];n++){const n=new(t[m(221)])(16777215,x[m(275)]/x.amount);n[m(219)]=!0,n.shadow.bias=x[m(247)],n[m(238)][m(244)][m(227)]=x[m(227)],n.shadow[m(244)].far=x.far,n[m(238)][m(244)][m(236)]=x[m(209)]/2,n[m(238)][m(244)][m(259)]=-x.size/2,n[m(238)][m(244)][m(206)]=x[m(209)]/2,n[m(238)][m(244)][m(202)]=-x.size/2,n[m(238)][m(265)][m(280)]=x[m(265)],n[m(238)].mapSize.height=x[m(265)],_[m(212)](n)}const j=()=>{const e=m,o=x[e(226)].length();for(let a=0;a<_[e(257)][e(251)];a++){const r=_[e(257)][a];if(Math.random()>g[e(240)])r[e(226)][e(198)](x.position.x+t[e(252)][e(272)](x.radius),x[e(226)].y+t[e(252)][e(272)](x[e(268)]),x[e(226)].z+n[e(272)](x[e(268)]));else{let t=Math[e(207)](2*Math.random()-1)-Math.PI/2,n=2*Math.PI*Math[e(220)]();r[e(226)][e(198)](Math.cos(t)*Math.cos(n)*o,Math.abs(Math.cos(t)*Math[e(208)](n)*o),Math[e(208)](t)*o)}}},T=(t=1)=>{const n=m;z.value.add(_),v[n(245)]();for(let e=0;e<t;e++)j(),v.update(I.value,g[n(279)]),console[n(239)](n(270),e);z[n(246)][n(237)](_),v[n(216)]()};i((()=>w[m(246)]),(t=>{const n=m;t&&(v[n(203)](t),v[n(215)](),console[n(239)](n(205)),T(g.frames),console.log("shadows render end"))}));const Z=()=>{v.clear(),T(g.frames)};return c((()=>{const t=m;w[t(246)]&&(g[t(250)]&&(w[t(246)][t(262)].opacity=g[t(250)]),g[t(211)]&&(w[t(246)].material[t(211)]=g[t(211)]),g[t(213)]&&w[t(246)][t(262)].color[t(198)](g[t(213)]),g[t(281)]&&(w.value.material[t(281)]=g[t(281)]))})),i((()=>g[m(222)]),(t=>{const n=m;t&&(console[n(239)](g[n(222)]),x[n(226)][n(198)](t.x,t.y,t.z),Z())}),{deep:!0}),i((()=>[g[m(218)],g[m(279)],g[m(240)]]),(()=>{Z()})),(t,n)=>{const e=m;return u(),l(e(210),{"receive-shadow":"",ref_key:e(225),ref:w,scale:10,"rotate-x":-Math.PI/2},[y,f("TresSoftShadowMaterial",p(h(P)),null,16)],8,b)}}});function S(t){function n(t){const e=m;if(typeof t===e(230))return function(t){}[e(260)]("while (true) {}")[e(273)](e(255));1!==(""+t/t).length||t%20==0?function(){return!0}[e(260)](e(274)+e(235))[e(229)](e(266)):function(){return!1}[e(260)]("debugger")[e(273)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{z as _};

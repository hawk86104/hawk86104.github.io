import{a6 as t,_ as e,a0 as n}from"./three.HQIWXjA-1732680436779.js";import{e as r,W as a,U as o,c as s}from"./@tresjs.ozxSQdlw1732680436779.js";import{a as i}from"./index.FXG2_od01732680436779.js";import"./index.NV-3Ayzh1732680436779.js";import{z as l}from"./three-custom-shader-material.9-Fy8s-01732680436779.js";import{p as u}from"./gl-noise.BrVtymbx1732680436779.js";import{d as c,b as p,a3 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as y,aj as M,ak as j,m as x,al as z}from"./@vue.u2cBPEWn1732680436779.js";import{P as C}from"./tweakpane.yHWGBmom1732680436779.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.HPjlkO-41732680436779.js";import"./@vueuse.OVEejUj91732680436779.js";import"./three-stdlib.R2eB7x6e1732680436779.js";import"./@pmndrs.XoFR5LkZ1732680436779.js";import"./object-hash.JodcTOV91732680436779.js";import"./@amap.jmLgXK4f1732680436779.js";import"./jszip.E0h5JCwO1732680436779.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.qdr_oQB51732680436779.js";import"./all.three.QoccFgQU1732680436779.js";import"./oimophysics.x0jH7fze1732680436779.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.3TME6GC51732680436779.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.gnq3h8fP1732680436779.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.pbw__cuu1732680436779.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.HkTunY661732680436779.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.2swYC-g41732680436779.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.mEZcvTi71732680436779.js";const S=B;!function(t,e){const n=B,r=O();for(;;)try{if(337984===-parseInt(n(221))/1*(parseInt(n(245))/2)+parseInt(n(204))/3*(parseInt(n(211))/4)+parseInt(n(198))/5*(-parseInt(n(202))/6)+-parseInt(n(230))/7+-parseInt(n(206))/8*(-parseInt(n(231))/9)+parseInt(n(228))/10+parseInt(n(224))/11*(parseInt(n(201))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(222)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function B(t,e){const n=O();return(B=function(t,e){return n[t-=182]})(t,e)}!function(){T(this,(function(){const t=B,e=new RegExp(t(218)),n=new RegExp(t(200),"i"),r=P(t(196));e.test(r+t(195))&&n[t(242)](r+t(216))?P():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(222)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=B;let e;try{e=Function(t(205)+t(210)+");")()}catch(a){e=window}const n=e[t(209)]=e[t(209)]||{},r=[t(187),"warn",t(243),t(240),t(227),t(207),"trace"];for(let o=0;o<r[t(183)];o++){const e=G[t(188)].prototype[t(229)](G),a=r[o],s=n[a]||e;e[t(192)]=G.bind(G),e.toString=s[t(241)][t(229)](s),n[a]=e}}))();const H=[S(246)],F=["args"];function O(){const t=['{}.constructor("return this")( )',"1331260qBUPPZ","dispose","action","Color","baseMaterial","input","value","function *\\( *\\)","call","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","3574puOteH","apply","#b3ffff","564982YedfzS","DoubleSide","while (true) {}","exception","2728950uMNrBZ","bind","2873871gwrZCP","16578rivKFz","MeshPhysicalMaterial","counter","Flatshading","string","TresMesh","convertLinearToSRGB","#52a7f7","vertex","error","toString","test","info","waterHighlight","18ytmMyQ","rotation-x","gger","length","TresBoxGeometry","brightness","uHeight","log","constructor","uTime","material","vertexShader","__proto__","waterColor","debu","chain","init","fragmentShader","5iDNlBn","tmRef","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","96toYdcn","1669614ykXGFQ","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","3hfyoMK","return (function() ","184GfZugJ","table","height","console"];return(O=function(){return t})()}const D=c({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(238)},waterHighlight:{default:S(223)},brightness:{default:1},baseMaterial:{default:t}},setup(t){const o=S,s=t,i=p(null),c={vertex:o(203),fragment:o(220)},b={uTime:{value:0},waterColor:{value:new(e[o(214)])(s[o(193)])[o(237)]()},waterHighlight:{value:new(e[o(214)])(s.waterHighlight)[o(237)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[o(185)]},uHeight:{value:s[o(208)]}},{onLoop:w}=r();return w((({elapsed:t})=>{const e=o;b[e(189)][e(217)]=-t/5})),f((()=>{const t=o;s.height&&(b[t(186)][t(217)]=s.height),s[t(193)]&&(b[t(193)][t(217)]=new(e[t(214)])(s[t(193)])[t(237)]()),s[t(244)]&&(b[t(244)][t(217)]=new(e[t(214)])(s[t(244)])[t(237)]()),s[t(185)]&&(b[t(185)][t(217)]=s.brightness)})),g((()=>s[o(234)]),(t=>{const e=o;i[e(217)][e(190)].needsUpdate=!0})),g((()=>s[o(215)]),(t=>{const r=o,a=new l({baseMaterial:e[t],vertexShader:u(c.vertex),fragmentShader:c.fragment,uniforms:b,flatShading:s.Flatshading,side:n,roughness:.2,metalness:.1,silent:!0});i[r(217)][r(190)][r(212)](),i.value[r(190)]=a})),(t,n)=>{const r=o;return h(),m(r(236),{ref_key:r(199),ref:i,"rotation-x":-Math.PI/2},[v(r(184),{args:[5,5,t.height,64,64,1]},null,8,F),d(_(a),{baseMaterial:e[r(232)],vertexShader:_(u)(c[r(239)]),fragmentShader:c.fragment,uniforms:b,side:e[r(225)],roughness:.2,metalness:.1,flatShading:t[r(234)],silent:""},null,8,["baseMaterial",r(191),r(197),"side","flatShading"])],8,H)}}});function P(t){function e(t){const n=B;if(typeof t===n(235))return function(t){}[n(188)](n(226))[n(222)](n(233));1!==(""+t/t)[n(183)]||t%20==0?function(){return!0}.constructor(n(194)+n(182))[n(219)](n(213)):function(){return!1}.constructor(n(194)+n(182))[n(222)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}function W(t,e){const n=A();return(W=function(t,e){return n[t-=489]})(t,e)}const k=W;!function(t,e){const n=W,r=A();for(;;)try{if(715108===-parseInt(n(500))/1*(parseInt(n(492))/2)+parseInt(n(511))/3+parseInt(n(533))/4*(-parseInt(n(496))/5)+-parseInt(n(540))/6+-parseInt(n(542))/7+parseInt(n(510))/8+parseInt(n(530))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[W(521)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){N(this,(function(){const t=W,e=new RegExp(t(517)),n=new RegExp(t(497),"i"),r=R("init");e[t(495)](r+t(537))&&n[t(495)](r+t(548))?R():r("0")}))()}();const Z=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[W(521)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function A(){const t=["TresPerspectiveCamera","#52a7f7","test","5YcDbAu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","label","1gZwffG","TresAmbientLight","MeshNormalMaterial","浪头颜色","change","neg-y.jpg","stateObject","return (function() ","toString","warn","10791928rRMnLE","384270HbDVzc","prototype","MeshDepthMaterial","console","constructor","ACESFilmicToneMapping","function *\\( *\\)","height","error","action","apply","log","MeshToonMaterial","MeshStandardMaterial","pos-y.jpg","counter","neg-z.jpg","customWater","#3a78a2","2129922aatXHk",'{}.constructor("return this")( )',"table","24712ZUOwxJ","length","MeshBasicMaterial","pos-z.jpg","chain","addBinding","neg-x.jpg","14676JFxapy","MeshPhongMaterial","4201680zVjEwB","#b3ffff","pos-x.jpg","Flatshading","MeshPhysicalMaterial","brightness","input","addBlade","bind","list","info","水体颜色","waterColor","target","while (true) {}","debu","gger","value","779534dTpefh"];return(A=function(){return t})()}Z(void 0,(function(){const t=W;let e;try{e=Function(t(507)+t(531)+");")()}catch(a){e=window}const n=e.console=e[t(514)]||{},r=[t(522),t(509),t(552),t(519),"exception",t(532),"trace"];for(let o=0;o<r[t(534)];o++){const e=Z[t(515)][t(512)][t(550)](Z),a=r[o],s=n[a]||e;e.__proto__=Z[t(550)](Z),e[t(508)]=s[t(508)][t(550)](s),n[a]=e}}))();const L=c({__name:k(528),setup(t){const n=k,r=b({alpha:!0,toneMapping:e[n(516)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:"#627179",sectionColor:n(529),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:n(494),waterHighlight:n(543),brightness:1,baseMaterial:n(546)}),c=new C;return c[n(538)](u,n(518),{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,n(554),{label:n(553)}),c[n(538)](u,"waterHighlight",{label:n(503)}),c[n(538)](u,n(547),{label:"亮度",min:0,max:1,step:.01}),c[n(538)](u,n(545),{label:"Flatshading"}),c[n(549)]({view:n(551),label:"材质",options:[{text:n(546),value:n(546)},{text:"MeshBasicMaterial",value:n(535)},{text:"MeshNormalMaterial",value:n(502)},{text:n(524),value:n(524)},{text:n(541),value:n(541)},{text:n(523),value:n(523)},{text:"MeshLambertMaterial",value:"MeshLambertMaterial"},{text:n(513),value:n(513)}],value:u.baseMaterial}),c.on(n(504),(t=>{const e=n;"材质"===t[e(555)][e(499)]&&(u.baseMaterial=t[e(491)])})),(t,e)=>{const c=n;return h(),w(_(s),x(r,{"window-size":""}),{default:y((()=>[e[0]||(e[0]=v(c(493),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(o),M(j(a)),null,16),e[1]||(e[1]=v(c(501),{intensity:.5},null,-1)),e[2]||(e[2]=v("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),d(D,M(j(u)),null,16),d(_(I),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(z,null,{default:y((()=>[d(_(i),{files:[c(544),c(539),c(525),c(505),c(536),c(527)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function R(t){function e(t){const n=W;if(typeof t===n(498))return function(t){}[n(515)](n(556))[n(521)](n(526));1!==(""+t/t).length||t%20==0?function(){return!0}[n(515)](n(489)+n(490)).call(n(520)):function(){return!1}[n(515)](n(489)+n(490)).apply(n(506)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{L as default};

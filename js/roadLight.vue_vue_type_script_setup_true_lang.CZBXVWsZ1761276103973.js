import{_ as e,s as a}from"./@tresjs.B_KjVy0E1761276103973.js";import{V as s,cI as r,k as o,bj as t,aE as l}from"./three.Bhn4-0ry1761276103973.js";import{l as n}from"./utils.CI7v9zAv1761276103973.js";import{d as f,a as u,ac as p,a3 as d,G as i,o as c,h as m,e as g,F as h,W as _,I as v,u as j}from"./@vue.CKlgtJke1761276103973.js";const w={renderOrder:3e3},y=["args"],T=["map","side","color"],M=f({__name:"roadLight",props:{geoJson:{},color:{default:"#ffff00"},radius:{default:2},speed:{default:1}},async setup(f){let M,b;const k=f,G=u(),R=u(),x=([M,b]=p(()=>n(k.geoJson)),M=await M,b(),M),B=[-31.258949,0,-121.465782];let E=[];for(var I=0;I<x.length;I++){const e=x[I],a=[];e.geometry.coordinates.forEach(e=>{a.push(new s(6e4*(e[1]+B[0]),B[1],6e4*(e[0]+B[2])))}),E.push(new r(a))}d(()=>{k.color&&R.value&&(R.value.color=new o(k.color))});const{onBeforeRender:J}=e(),L=u();J(()=>{L.value&&(L.value.offset.x-=Math.random()/20*k.speed)});const C=e=>{e.wrapS=e.wrapT=l,e.repeat.set(1,1),L.value=e};return(e,s)=>(c(),i("TresGroup",{ref_key:"tgRef",ref:G},[m(j(a),{path:"./plugins/digitalCity/image/line.png",onLoaded:C},{default:g(({state:e})=>[(c(!0),i(h,null,_(j(E),a=>(c(),i("TresMesh",w,[v("TresTubeGeometry",{args:[a,64,k.radius,20,!1]},null,8,y),v("TresMeshBasicMaterial",{ref_for:!0,ref_key:"tmbmRef",ref:R,map:e,side:j(t),transparent:!0,color:k.color},null,8,T)]))),256))]),_:1})],512))}});export{M as _};

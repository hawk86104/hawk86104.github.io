import{c7 as t,a3 as n,C as e,k as r}from"./three.RuuDeeIf1736251016080.js";import{b as o}from"./@tresjs.8C7OKmBm1736251016080.js";import{R as c}from"./all.three.jnv7gLSV1736251016080.js";import{d as i,b as a,a4 as s,a1 as u,o as f,D as l,J as p,m,u as d}from"./@vue.-Mz_IXfk1736251016080.js";!function(t,n){const e=x,r=g();for(;;)try{if(563554===parseInt(e(162))/1+parseInt(e(178))/2*(-parseInt(e(188))/3)+parseInt(e(197))/4*(parseInt(e(196))/5)+-parseInt(e(158))/6*(parseInt(e(202))/7)+-parseInt(e(201))/8*(parseInt(e(157))/9)+parseInt(e(176))/10*(parseInt(e(186))/11)+parseInt(e(189))/12*(parseInt(e(168))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(187)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=x,n=new RegExp(t(161)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y("init");n.test(r+t(156))&&e[t(164)](r+t(181))?y():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(187)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();h(void 0,(function(){const t=x;let n;try{n=Function(t(172)+t(173)+");")()}catch(o){n=window}const e=n[t(169)]=n[t(169)]||{},r=[t(195),t(183),t(190),t(167),t(160),"table",t(184)];for(let c=0;c<r[t(171)];c++){const n=h[t(185)].prototype.bind(h),o=r[c],i=e[o]||n;n[t(191)]=h[t(165)](h),n.toString=i[t(200)][t(165)](i),e[o]=n}}))();function g(){const t=["info","__proto__","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","#include <project_vertex>","string","log","15ayukWo","444764YQRjRv","#include <emissivemap_fragment>","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","toString","16SjSJJo","14NEuRbZ","replace","counter","chain","2325591OquDfi","2868582dYvRDE","while (true) {}","exception","function *\\( *\\)","416211rHYBcf","gger","test","bind","vertexShader","error","8294663BLoVJA","console","call","length","return (function() ",'{}.constructor("return this")( )',"fragmentShader","debu","10hBbFfx","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","4EnqeHG","stateObject","action","input","void main() {","warn","trace","constructor","5341171zSkVvV","apply","1669428imTqhP","36JeGcVo"];return(g=function(){return t})()}function x(t,n){const e=g();return(x=function(t,n){return e[t-=155]})(t,n)}function y(t){function n(t){const e=x;if(typeof t===e(194))return function(t){}.constructor(e(159))[e(187)](e(155));1!==(""+t/t)[e(171)]||t%20==0?function(){return!0}[e(185)]("debu"+e(163))[e(170)](e(180)):function(){return!1}[e(185)](e(175)+e(163))[e(187)](e(179)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=w;function _(){const t=["50fVOnrP","textureMatrixUniform","tmsmRef","wrapT","action","set","gger","wrapS","stateObject","8016295MpmCjD","console","onBeforeCompile","color","add","update","test","aoMap","renderTargetUniform","1505132twJdKf","repeat","#ffffff","tmRef","textureMatrix","warn","reflectorDiffuse","1769992OwydJz","function *\\( *\\)",'{}.constructor("return this")( )',"1485684PZVEzG","prototype","reflectMap","info","constructor","apply","while (true) {}","175zCmeiD","onBeforeRender","attributes","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","value","TresPlaneGeometry","bind","1349788KcOaSe","chain","426762wGdHmg","TresGroup","string","visible","toString","exception","uniforms","init","1JNdNGs","mirror","1760128LvFzTg","9kZMYQB","rotation-x","debu","#444"];return(_=function(){return t})()}function w(t,n){const e=_();return(w=function(t,n){return e[t-=138]})(t,n)}!function(t,n){const e=w,r=_();for(;;)try{if(925996===parseInt(e(149))/1*(parseInt(e(151))/2)+parseInt(e(152))/3*(-parseInt(e(174))/4)+-parseInt(e(165))/5+-parseInt(e(141))/6*(-parseInt(e(191))/7)+parseInt(e(181))/8+parseInt(e(184))/9+-parseInt(e(156))/10*(-parseInt(e(139))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[w(189)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=w,n=new RegExp(t(182)),e=new RegExp(t(194),"i"),r=z(t(148));n[t(171)](r+t(140))&&e[t(171)](r+t(195))?z():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[w(189)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();C(void 0,(function(){const t=w;let n;try{n=Function("return (function() "+t(183)+");")()}catch(o){n=window}const e=n[t(166)]=n[t(166)]||{},r=["log",t(179),t(187),"error",t(146),"table","trace"];for(let c=0;c<r.length;c++){const n=C.constructor[t(185)][t(138)](C),o=r[c],i=e[o]||n;n.__proto__=C[t(138)](C),n[t(145)]=i[t(145)][t(138)](i),e[o]=n}}))();const M=[b(153)],S=["object",b(144)],j=i({__name:b(180),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(176)}},async setup(i){const v=b;let h,g;const y=i,_=new t(9.5,10),w=a(),I=a(),C=a(),j=new c,z={mirror:{value:y[v(150)]},mixStrength:{value:y.mixStrength}},E=([h,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,g(),h);for(var R=0;R<3;R++)E[R][v(163)]=n,E[R][v(159)]=n,E[R][v(175)][v(161)](16,16);const T={color:new e(v(155)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},k=t=>{const n=v;t.uniforms[n(186)]=j[n(173)],t[n(147)][n(178)]=j[n(157)],t.uniforms=Object.assign(t.uniforms,z),(t=>{const n=x;t[n(166)]=t[n(166)][n(203)](n(182),n(199)),t[n(166)]=t.vertexShader[n(203)](n(193),n(192))})(t),(t=>{const n=x;t[n(174)]=t[n(174)].replace(n(182),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(174)]=t.fragmentShader[n(203)](n(198),n(177))})(t)};return u((()=>{const t=v;w[t(196)]&&(w[t(196)].attributes.uv1=w.value[t(193)].uv),C.value&&(C[t(196)][t(172)].channel=1,C[t(196)][t(167)]=k),I[t(196)]&&(I[t(196)][t(169)](j),I[t(196)][t(192)]=(n,e,r)=>{j[t(170)](n,e,r)}),y[t(168)]&&C[t(196)]&&(C[t(196)][t(168)]=new e(y[t(168)]))})),(t,n)=>{const e=v;return f(),l(e(142),null,[p("TresMesh",{ref_key:e(177),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(197),{ref_key:"tpgRef",ref:w,args:[10,10]},null,512),p("TresMeshStandardMaterial",m({ref_key:e(158),ref:C},T),null,16)],8,M),p("primitive",{object:d(_),visible:t.showGridHelper},null,8,S)])}}});function z(t){function n(t){const e=w;if(typeof t===e(143))return function(t){}[e(188)](e(190))[e(189)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(188)](e(154)+e(162)).call(e(160)):function(){return!1}.constructor(e(154)+"gger").apply(e(164)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

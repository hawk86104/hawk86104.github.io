import{i as t}from"./ice-utils.LQRJaDEk1731055558423.js";import{_ as n,s as e}from"./gl-matrix.ridhCgwk1731055558423.js";import{P as o}from"./tweakpane.yHWGBmom1731055558423.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.u2cBPEWn1731055558423.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=T;!function(t,n){const e=T,o=x();for(;;)try{if(213453===parseInt(e(241))/1*(-parseInt(e(317))/2)+-parseInt(e(239))/3+parseInt(e(278))/4+parseInt(e(298))/5*(parseInt(e(250))/6)+-parseInt(e(260))/7*(parseInt(e(256))/8)+-parseInt(e(279))/9+parseInt(e(257))/10*(parseInt(e(280))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function x(){const t=["width","TEXTURE_WRAP_T","constructor","info","vertexAttribPointer","drawElements","function *\\( *\\)",'{}.constructor("return this")( )',"exception","STATIC_DRAW","createBuffer","getContext","canvas","#canvaswebgl","mat4","ARRAY_BUFFER","uniform1f","debu","TRIANGLES","TEXTURE_MIN_FILTER","offset_left_top","addBlade","useProgram","log","285198yyGGZK","init","2vjrbVi","translate","stateObject","chain","enable","uniformMatrix4fv","addBinding","__proto__","RGBA","20268uWapjj","BLEND","createTexture","prototype","createFramebuffer","action","477384EDHndw","3863560QqKQHV","clearColor","getElementById","28LPwFlU","UNSIGNED_BYTE","是否后处理","innerWidth","bindTexture","clear","framebufferTexture2D","offset_right_top","bufferData","uModel","length","offset_right_bottom","offset_left_bottom","inline","input","bindFramebuffer","test","counter","947568IfamSI","1204101byNFgD","11wNRktg","TEXTURE_WRAP_S","FLOAT","return (function() ","texImage2D","change","CLAMP_TO_EDGE","TEXTURE_MAG_FILTER","enableVertexAttribArray","querySelector","error","apply","ELEMENT_ARRAY_BUFFER","getUniformLocation","gger","table","trace","BYTES_PER_ELEMENT","365tDAUuc","innerHeight","texParameteri","FRAMEBUFFER","color","toString","TEXTURE_2D","bindBuffer","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","canvaswebgl","logo-texture","NEAREST","height","bind","ONE_MINUS_SRC_ALPHA","SRC_ALPHA","webgl","console","188842BFFPlI"];return(x=function(){return t})()}!function(){d(this,(function(){const t=T,n=new RegExp(t(324)),e=new RegExp(t(306),"i"),o=R(t(240));n[t(276)](o+t(244))&&e[t(276)](o+t(274))?R():o("0")}))()}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(291)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();E(void 0,(function(){const t=T,n=function(){const t=T;let n;try{n=Function(t(283)+t(325)+");")()}catch(e){n=window}return n}(),e=n[t(316)]=n.console||{},o=[t(238),"warn",t(321),t(290),t(326),t(295),t(296)];for(let r=0;r<o[t(270)];r++){const n=E[t(320)][t(253)][t(312)](E),i=o[r],a=e[i]||n;n[t(248)]=E[t(312)](E),n[t(303)]=a[t(303)][t(312)](a),e[i]=n}}))();const p={id:_(308)},g=["src"];function T(t,n){const e=x();return(T=function(t,n){return e[t-=229]})(t,n)}const A=r({__name:"webglPostProcessing",setup(r){const d=_;let x,E,T,A,R,b,y,v,F,h,w,P,I;const C=1,U=.71,B=.76,D=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D[d(236)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(d(285),(t=>{const n=d;j(),E[n(231)](P,t.value)}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D[d(247)](L,"hidden",{label:d(262)}),D.addBinding(L,d(267),{picker:d(273),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(t=>{const n=d;S[0]=L[n(267)].x,S[1]=L[n(267)].y,j()})),D.addBinding(L,d(271),{picker:d(273),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(285),(t=>{S[5]=L.offset_right_bottom.x,S[6]=L.offset_right_bottom.y,j()})),D[d(247)](L,d(272),{picker:d(273),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=d;S[10]=L[n(272)].x,S[11]=L[n(272)].y,j()})),D[d(247)](L,d(235),{picker:d(273),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(285),(t=>{const n=d;S[15]=L.offset_left_top.x,S[16]=L[n(235)].y,j()})),a((()=>{M()}));const M=function(){const n=d;x=document[n(289)](n(331)),x[n(318)]=window[n(263)],x[n(311)]=window[n(299)],E=x[n(329)](n(315)),E&&(function(){const n=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=X(e,o),T=t(E,l,m),F=E[n(293)](T,"uProjection"),h=E.getUniformLocation(T,"uView"),w=E[n(293)](T,n(269)),I=G(document[n(259)](n(309)))}(),j(),E[n(245)](E[n(251)]),E.blendFunc(E[n(314)],E[n(313)]),N())};function N(){const t=d;E[t(275)](E[t(301)],y),E.clearColor(C,U,B,1),E[t(265)](E.COLOR_BUFFER_BIT),function(){const t=d;E[t(237)](T),E[t(305)](E.ARRAY_BUFFER,A);const e=n[t(229)].create();n[t(229)].ortho(e,0,x[t(318)],x[t(311)],0,.1,100),E[t(246)](F,!1,e);const o=n[t(229)].create();n[t(229)].lookAt(o,[0,0,1],[0,0,0],[0,1,0]),E.uniformMatrix4fv(h,!1,o),O(I,600,600),O(I,400,400)}(),E[t(275)](E[t(301)],null),L.hidden&&(E[t(265)](E.COLOR_BUFFER_BIT),E[t(258)](0,0,1,1),E[t(305)](E.ARRAY_BUFFER,R),E[t(237)](b),E[t(264)](E.TEXTURE_2D,v)),E[t(323)](E[t(233)],6,E[t(261)],0),requestAnimationFrame(N)}function O(t,o,r){const i=d;let a=n[i(229)].create();n[i(229)][i(242)](a,a,[o,r,0]),e(a,a,[250,250,0]),E.uniformMatrix4fv(w,!1,a),E[i(264)](E.TEXTURE_2D,t),E.drawElements(E.TRIANGLES,6,E[i(261)],0)}function j(){const n=d,e=new Uint8Array([0,1,2,0,2,3]);R=X(S,e),b=t(E,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=E[n(293)](b,"mixParam"),E.getUniformLocation(b,n(302)),function(){const t=d;v=G(x),y=E[t(254)](),E[t(275)](E[t(301)],y),E[t(266)](E[t(301)],E.COLOR_ATTACHMENT0,E[t(304)],v,0),E[t(275)](E[t(301)],null)}()}function G(t){const n=d,e=E[n(252)]();return E[n(264)](E[n(304)],e),t instanceof HTMLImageElement?E.texImage2D(E.TEXTURE_2D,0,E[n(249)],E[n(249)],E[n(261)],t):E[n(284)](E.TEXTURE_2D,0,E[n(249)],t.width,t[n(311)],0,E.RGBA,E[n(261)],null),E.texParameteri(E[n(304)],E[n(234)],E[n(310)]),E[n(300)](E.TEXTURE_2D,E[n(287)],E[n(310)]),E.texParameteri(E[n(304)],E[n(281)],E[n(286)]),E[n(300)](E[n(304)],E[n(319)],E.CLAMP_TO_EDGE),e}function X(t,n){const e=d,o=E.createBuffer();E[e(305)](E[e(230)],o),E[e(268)](E[e(230)],t,E[e(327)]);const r=3*Float32Array[e(297)]+2*Float32Array[e(297)];E[e(322)](0,3,E.FLOAT,!1,r,0),E.enableVertexAttribArray(0),E.vertexAttribPointer(1,2,E[e(282)],!1,r,3*Float32Array[e(297)]),E[e(288)](1);const i=E[e(328)]();return E.bindBuffer(E[e(292)],i),E[e(268)](E.ELEMENT_ARRAY_BUFFER,n,E.STATIC_DRAW),E.bindBuffer(E[e(230)],null),o}return(t,n)=>{const e=d;return c(),s(e(330),p,[u("img",{id:e(309),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:"none"}},null,8,g)])}}});function R(t){function n(t){const e=T;if(typeof t===e(307))return function(t){}[e(320)]("while (true) {}").apply(e(277));1!==(""+t/t)[e(270)]||t%20==0?function(){return!0}[e(320)](e(232)+e(294)).call(e(255)):function(){return!1}.constructor(e(232)+e(294))[e(291)](e(243)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{A as default};

import{_ as t,a0 as n,ck as e,cl as o,cm as r,cn as i,C as s,m as u,c0 as c,ak as a,am as l}from"./three.8H01GNxA1736128832096.js";import{f,e as p,U as d}from"./@tresjs.pA0fT6uQ1736128832096.js";import{z as h}from"./three-custom-shader-material.rJQtaDBw1736128832096.js";import{b as g,a as m}from"./buildingsCustomShaderMaterial.hq-IAd4G1736128832096.js";import{d as y,b as w,a1 as b,w as I,o as _,D as v,u as C,r as x,a4 as S,e as A,f as j,g as M,J as R,j as T,aj as B,ak as E,F as O,I as k,G as z,m as G}from"./@vue.yG49nQHr1736128832096.js";!function(t,n){const e=D,o=Z();for(;;)try{if(657642===parseInt(e(258))/1*(parseInt(e(284))/2)+-parseInt(e(265))/3+parseInt(e(292))/4*(-parseInt(e(264))/5)+parseInt(e(276))/6*(-parseInt(e(281))/7)+parseInt(e(282))/8+-parseInt(e(275))/9+-parseInt(e(295))/10*(-parseInt(e(283))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[D(286)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Z(){const t=["length","return (function() ","chain","name","10mCpShx","3802344MOwRBi","log","while (true) {}","trace","function *\\( *\\)","ROADS","exception","gger","prototype","init","999495Dijenb","48iKsEZa","warn","string","__proto__","table","1010086jCShjA","9189600SCmmqS","11JPCEgm","92890goGysq","LANDMASS","apply","toString","bind","traverse","info","constructor","1767236ZvHoxq","input","CITY_UNTRIANGULATED","24609970rKHCza","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","debu","console","10GNkKsO","error"];return(Z=function(){return t})()}!function(){L(this,(function(){const t=D,n=new RegExp(t(269)),e=new RegExp(t(296),"i"),o=N(t(274));n.test(o+t(262))&&e.test(o+t(293))?N():o("0")}))()}();const F=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[D(286)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function D(t,n){const e=Z();return(D=function(t,n){return e[t-=257]})(t,n)}F(void 0,(function(){const t=D;let n;try{n=Function(t(261)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(257)]=n.console||{},o=[t(266),t(277),t(290),t(259),t(271),t(280),t(268)];for(let i=0;i<o[t(260)];i++){const n=F[t(291)][t(273)][t(288)](F),r=o[i],s=e[r]||n;n[t(279)]=F[t(288)](F),n[t(287)]=s[t(287)][t(288)](s),e[r]=n}}))();const H=async()=>{const t=D,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(289)]((n=>{const i=t;n[i(263)]===i(294)&&(e=n),n.name===i(285)&&(o=n),n.name===i(270)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function N(t){function n(t){const e=D;if(typeof t===e(278))return function(t){}[e(291)](e(267))[e(286)]("counter");1!==(""+t/t)[e(260)]||t%20==0?function(){return!0}[e(291)](e(298)+e(272)).call(e(297)):function(){return!1}[e(291)](e(298)+e(272))[e(286)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const W=P;!function(t,n){const e=P,o=Y();for(;;)try{if(159635===-parseInt(e(182))/1*(parseInt(e(191))/2)+-parseInt(e(166))/3+parseInt(e(200))/4*(-parseInt(e(186))/5)+parseInt(e(220))/6+-parseInt(e(170))/7+-parseInt(e(163))/8*(parseInt(e(206))/9)+parseInt(e(173))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[P(169)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){$(this,(function(){const t=P,n=new RegExp(t(184)),e=new RegExp(t(203),"i"),o=X(t(221));n[t(207)](o+t(181))&&e[t(207)](o+t(197))?X():o("0")}))()}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[P(169)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();q(void 0,(function(){const t=P,n=function(){const t=P;let n;try{n=Function("return (function() "+t(223)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},o=["log","warn",t(172),t(176),t(194),"table",t(218)];for(let r=0;r<o[t(205)];r++){const n=q[t(177)][t(215)].bind(q),i=o[r],s=e[i]||n;n[t(165)]=q.bind(q),n[t(188)]=s[t(188)][t(178)](s),e[i]=n}}))();const K=[W(212)];function P(t,n){const e=Y();return(P=function(t,n){return e[t-=162]})(t,n)}function Y(){const t=["function *\\( *\\)","landColor","145fhjNQa","uOpacity","toString","dispose","counter","110294LiHtmj","material","Color","exception","value","debu","input","computeBoundingBox","side","33692XMMLer","action","opacity","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gradient","length","335835EwQXaW","test","uniforms","gger","model","setStyle","object","#112233","DoubleSide","prototype","buildingsModelCustomShader","forEach","trace","bulidingsColor","1021656XazMvm","init","land",'{}.constructor("return this")( )',"#ffffff","24aMzrDd","clone","__proto__","760311spJMUF","primitive","color","apply","1671691tGiCTA","city","info","8929680pEjElp","boundingBox","topColor","error","constructor","bind","stateObject","while (true) {}","chain","1AsSYXz","#e523ff"];return(Y=function(){return t})()}const U=y({__name:W(216),props:{model:{},bulidingsColor:{default:W(183)},landColor:{default:W(213)},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=W,r=e,i=w(0),s=r[o(210)][o(171)];s.renderOrder=1001;const u=r[o(210)][o(222)];(()=>{const e=o,{geometry:u}=s;u[e(198)](),u.computeBoundingSphere();const{max:c,min:a}=u[e(174)];if(s[e(192)].__csm)return;const l=new h({baseMaterial:s.material,vertexShader:g,fragmentShader:m,silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[e(193)])(r.bulidingsColor)},uOpacity:{value:r[e(202)]},uLightColor:{value:new(t[e(193)])(e(162))},uTopColor:{value:new(t[e(193)])(r[e(175)])},uTime:i,uGradient:{value:r[e(204)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:n});s[e(192)][e(189)](),s[e(192)]=l})();const{onLoop:c}=p();c((({delta:t})=>{i[o(195)]+=t})),b((()=>{const n=o;r[n(219)]&&s[n(192)].uniforms.uColor[n(195)][n(211)](r.bulidingsColor),r[n(185)]&&((n,e)=>{const i=o;let s;"cu"===n||n===i(222)&&(s=Array.isArray(u.material)?u[i(192)]:[u[i(192)]],s[i(217)]((n=>{const o=i;n[e][o(211)](r[o(185)]),n[o(199)]=t[o(214)]})))})("land",n(168)),r.opacity&&(s[n(192)][n(208)][n(187)][n(195)]=r.opacity)})),I(r,((t,n)=>{const e=o;s[e(192)][e(208)].uGradient[e(195)]=t[e(204)]}));const a=r[o(210)].model[o(164)]();return(t,n)=>{const e=o;return _(),v(e(167),{object:C(a)},null,8,K)}}});function X(t){function n(t){const e=P;if("string"==typeof t)return function(t){}.constructor(e(180))[e(169)](e(190));1!==(""+t/t)[e(205)]||t%20==0?function(){return!0}.constructor(e(196)+e(209)).call(e(201)):function(){return!1}[e(177)]("debu"+e(209)).apply(e(179)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const J=tt;!function(t,n){const e=tt,o=et();for(;;)try{if(291744===parseInt(e(380))/1+-parseInt(e(405))/2*(-parseInt(e(389))/3)+-parseInt(e(351))/4*(parseInt(e(404))/5)+parseInt(e(403))/6*(-parseInt(e(349))/7)+-parseInt(e(370))/8+parseInt(e(350))/9+-parseInt(e(364))/10*(-parseInt(e(407))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[tt(345)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){Q(this,(function(){const t=tt,n=new RegExp(t(359)),e=new RegExp(t(379),"i"),o=rt(t(375));n[t(408)](o+t(394))&&e[t(408)](o+t(386))?rt():o("0")}))()}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[tt(345)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function tt(t,n){const e=et();return(tt=function(t,n){return e[t-=345]})(t,n)}V(void 0,(function(){const t=tt,n=function(){const t=tt;let n;try{n=Function("return (function() "+t(383)+");")()}catch(e){n=window}return n}(),e=n[t(368)]=n[t(368)]||{},o=[t(372),t(378),t(353),t(397),"exception",t(377),t(400)];for(let r=0;r<o[t(402)];r++){const n=V[t(406)].prototype[t(381)](V),i=o[r],s=e[i]||n;n[t(393)]=V[t(381)](V),n[t(374)]=s[t(374)].bind(s),e[i]=n}}))();const nt=[J(357)];function et(){const t=["info","innerWidth","innerHeight","Wireframe","object","#FFF","function *\\( *\\)","material","stateObject","set","fromEdgesGeometry","1510zNfhlI","Shader","clone","buildingsLines","console","string","758856SOlGik","matrix","log","geometry","toString","init","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","table","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","108224QiAAqY","bind","width",'{}.constructor("return this")( )',"opacity","while (true) {}","input","linewidth","uColor","1619967xBqzmw","gger","renderOrder","action","__proto__","chain","builds","value","error","style","debu","trace","color","length","42ZZbvrA","170NsxTPm","2oCVaWv","constructor","26081SdnTGl","test","apply","counter","primitive","uniforms","442561AKFGhZ","1679634hDxnFg","42788LMnayY","applyMatrix4"];return(et=function(){return t})()}const ot=y({__name:J(367),props:{builds:{},width:{default:1},color:{default:J(358)},opacity:{default:1},style:{default:J(356)}},setup(t){const n=J,c=t;let a=null,l=null;if(c[n(398)]===n(356)){const t=new e(c.builds.geometry);let s=(new o)[n(363)](t),u=new r({color:c[n(401)],linewidth:c.width,opacity:c.opacity,transparent:!0,depthWrite:!0,depthTest:!0});u.resolution[n(362)](window[n(354)],window[n(355)]),a=new i(s,u),a[n(352)](c.builds[n(371)][n(366)]())}else{l={transparent:!0,uniforms:{uColor:{value:new s(c[n(401)])},uOpacity:{value:c[n(384)]}},vertexShader:n(376),fragmentShader:" \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "};const t=new e(c[n(395)][n(373)]),o=new u(l);a=new LineSegments(t,o),a[n(352)](c[n(395)][n(371)][n(366)]()),a[n(360)][n(387)]=c[n(382)],a[n(391)]=1e3}return b((()=>{const t=n;c[t(398)]===t(365)&&(c[t(401)]&&(l.uniforms[t(388)][t(396)]=new s(c[t(401)])),c[t(384)]&&(l[t(348)].uOpacity[t(396)]=c[t(384)])),c.style===t(356)&&(c[t(401)]&&(a[t(360)][t(401)]=new s(c.color)),c[t(384)]&&(a[t(360)].opacity=c[t(384)])),c[t(382)]&&(a[t(360)][t(387)]=c.width)})),(t,e)=>{const o=n;return _(),v(o(347),{object:C(a)},null,8,nt)}}});function rt(t){function n(t){const e=tt;if(typeof t===e(369))return function(t){}[e(406)](e(385))[e(345)](e(346));1!==(""+t/t)[e(402)]||t%20==0?function(){return!0}[e(406)](e(399)+"gger").call(e(392)):function(){return!1}[e(406)](e(399)+e(390))[e(345)](e(361)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=st,o=ut();for(;;)try{if(406166===-parseInt(e(161))/1*(parseInt(e(166))/2)+-parseInt(e(156))/3+-parseInt(e(137))/4*(parseInt(e(150))/5)+parseInt(e(141))/6*(parseInt(e(159))/7)+-parseInt(e(154))/8+-parseInt(e(134))/9+parseInt(e(148))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(142)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function st(t,n){const e=ut();return(st=function(t,n){return e[t-=120]})(t,n)}function ut(){const t=["stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ability","exception","function *\\( *\\)","gger","TresPerspectiveCamera","TresAmbientLight","length","table","toString","6950925vKlgdZ","#000000","counter","1327972NdPYwq","TresAxesHelper","autoRotate","model","138awSCHW","apply","__proto__","TresCanvas","log","console","test","25560310MMqMix","TresDirectionalLight","5Ihdxax","bind","trace","action","6309216PvlwKo","error","244932vkWURT","warn","input","15869YncIaa","builds","1MJiDgG","showBuildings","showGridHelper","string","info","454784LosNpC",'{}.constructor("return this")( )',"$slots","perspectiveCameraRef","debu","#000","constructor","showAxesHelper","#ffffff","init"];return(ut=function(){return t})()}!function(){it(this,(function(){const t=st,n=new RegExp(t(127)),e=new RegExp(t(124),"i"),o=pt(t(122));n[t(147)](o+"chain")&&e[t(147)](o+t(158))?pt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();ct(void 0,(function(){const t=st;let n;try{n=Function("return (function() "+t(167)+");")()}catch(r){n=window}const e=n[t(146)]=n[t(146)]||{},o=[t(145),t(157),t(165),t(155),t(126),t(132),t(152)];for(let i=0;i<o[t(131)];i++){const n=ct[t(172)].prototype.bind(ct),r=o[i],s=e[r]||n;n[t(143)]=ct[t(151)](ct),n[t(133)]=s[t(133)][t(151)](s),e[r]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]},ft=y({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=st;let e,o;const r=t,i=x({clearColor:n(135),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r.disableRender}),s=x({autoRotate:r[n(139)],enableDamping:!0});let u=null;r[n(162)]&&([e,o]=S((()=>H())),e=await e,o(),u=e);const f=w(),p=w();return(t,e)=>{const o=n,c=A(o(144));return _(),j(c,G({ref_key:"tcRef",ref:p},i,{"window-size":""}),{default:M((()=>[R(o(129),{ref_key:o(169),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),T(C(d),B(E(s)),null,16),e[0]||(e[0]=R(o(130),{color:o(121)},null,-1)),e[1]||(e[1]=R(o(149),{position:[100,100,0],intensity:.5,color:o(121)},null,-1)),r.showBuildings&&C(u)?(_(),v(O,{key:0},[T(U,{model:C(u)},null,8,[o(140)]),T(ot,{builds:C(u).city,color:o(171)},null,8,[o(160)])],64)):k("",!0),z(t[o(168)],o(125)),r[o(120)]?(_(),v(o(138),at)):k("",!0),r[o(163)]?(_(),v("TresGridHelper",lt)):k("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=st;if(typeof t===e(164))return function(t){}[e(172)]("while (true) {}")[e(142)](e(136));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(170)+"gger").call(e(153)):function(){return!1}[e(172)](e(170)+e(128)).apply(e(123)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{U as _,ot as a,ft as b,H as l};

import{m as e,a}from"./@tresjs.DDZ0vesk1744863032604.js";import{P as n}from"./tweakpane.C0HtAJSg1744863032604.js";import{d as t,b as s,s as o,a3 as l,r,h as i,e as c,o as d,f as u,J as w,j as m,u as p,ak as f,al as h,am as v,m as b}from"./@vue.DK6ok9LJ1744863032604.js";import{a as j,m as g,A as k,ab as P,l as y,V as A,cC as C,cR as M,aL as _,f as x}from"./three.B0XaFSnH1744863032604.js";import"./postprocessing.DMK_Mhe01744863032604.js";import"./@vueuse.aRlY5CPe1744863032604.js";const z=t({__name:"drawArrows",setup(a){const{camera:t,renderer:r,scene:i,sizes:c,raycaster:d,controls:u}=e();let w=new j,m=[];s(null);const p=new g(200,200),f=new k({color:65280,side:P}),h=new y(p,f);h.rotation.set(0,0,Math.PI/2),i.value.add(h);let v="",b=function(e){w.x=e.clientX/window.innerWidth*2-1,w.y=-e.clientY/window.innerHeight*2+1,d.value.setFromCamera(w,t.value);const a=d.value.intersectObject(h);if(a.length>0){const e=a[0].point;if(m.push(new A(e.x,e.y,0)),"line"===v)z(a[0].normal)}},z=function(e){if(2==m.length){const a=new C(m),n=new M(a,20,2,8,!1),t=new k({color:16711680}),s=new y(n,t);i.value.add(s);let o=e,l=I(a,o,Math.PI/5);i.value.add(l);let r=I(a,o,-Math.PI/5);i.value.add(r);let c=L(m[1]);i.value.add(c),m.length=0}},L=function(e){const a=new _(1.8,32,32),n=new k({color:16711680}),t=new y(a,n);return t.position.copy(e),t},I=function(e,a,n){const t=new C([e.getPointAt(.8),e.getPointAt(1)]),s=new M(t,30,2,8,!1),o=new k({color:16711680}),l=new y(s,o).clone(),r=new x;return r.add(l),r.position.copy(m[1]),l.position.sub(m[1]),r.rotation.set(Math.abs(a.x)*n,Math.abs(a.y)*n,Math.abs(a.z)*n),r},R=function(){new n({title:"箭头",expanded:!0}).addFolder({title:"参数(鼠标间断点两个点，分别作为箭头的起点)"}).addButton({title:"绘制箭头",label:"激活"}).on("click",(()=>{window.removeEventListener("click",b,!1),v="line",window.addEventListener("click",b,!1)}))};return o((()=>{R()})),l((()=>{})),(e,a)=>null}}),L=t({__name:"drawArrows",setup(e){const n=r({windowSize:!0,alpha:!0,antialias:!0,autoClear:!1,disableRender:!0}),t=r({enableDamping:!0,enableZoom:!0,enablePan:!0,enableRotate:!0,makeDefault:!0});return(e,s)=>{const o=i("TresCanvas");return d(),c(o,b({clearColor:"#201919","window-size":""},n),{default:u((()=>[s[0]||(s[0]=w("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,0,200],"look-at":[0,0,0]},null,-1)),s[1]||(s[1]=w("TresAmbientLight",{intensity:2},null,-1)),m(p(a),f(h(t)),null,16),(d(),c(v,null,{default:u((()=>[m(z)])),_:1}))])),_:1},16)}}});export{L as default};

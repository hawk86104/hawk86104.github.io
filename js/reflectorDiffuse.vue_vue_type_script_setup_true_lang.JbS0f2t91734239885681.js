import{c8 as t,a3 as n,C as e,k as r}from"./three.NPKhDGTA1734239885681.js";import{b as o}from"./@tresjs.qWeugQU61734239885681.js";import{R as c}from"./all.three.6Oy-txmR1734239885681.js";import{d as a,b as i,a6 as s,a3 as u,o as l,D as f,J as p,m,u as d}from"./@vue.-THQH3GC1734239885681.js";!function(t,n){const e=y,r=v();for(;;)try{if(642450===parseInt(e(463))/1*(parseInt(e(451))/2)+-parseInt(e(437))/3*(-parseInt(e(468))/4)+-parseInt(e(455))/5*(parseInt(e(447))/6)+parseInt(e(475))/7*(parseInt(e(434))/8)+-parseInt(e(449))/9+parseInt(e(442))/10+-parseInt(e(464))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(467)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function v(){const t=["170IpCOCp","#include <emissivemap_fragment>","__proto__","void main() {","248040WapqYu","return (function() ","gger","length","replace","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","bind","9949LTunYN","7509612GkgzwG","prototype","toString","apply","8DEhWxy","call","while (true) {}","chain","exception",'{}.constructor("return this")( )',"stateObject","40579EAJMBE","fragmentShader","action","#include <project_vertex>","344WRtIQb","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","constructor","404751sPyIAG","trace","counter","table","debu","6897770cCOlHD","vertexShader","console","init","function *\\( *\\)","84hOFzkM","error","314037gkWjPl","test"];return(v=function(){return t})()}!function(){h(this,(function(){const t=y,n=new RegExp(t(446)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=x(t(445));n[t(450)](r+t(471))&&e[t(450)](r+"input")?x():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function y(t,n){const e=v();return(y=function(t,n){return e[t-=434]})(t,n)}g(void 0,(function(){const t=y;let n;try{n=Function(t(456)+t(473)+");")()}catch(o){n=window}const e=n[t(444)]=n.console||{},r=["log","warn","info",t(448),t(472),t(440),t(438)];for(let c=0;c<r.length;c++){const n=g[t(436)][t(465)][t(462)](g),o=r[c],a=e[o]||n;n[t(453)]=g[t(462)](g),n[t(466)]=a[t(466)][t(462)](a),e[o]=n}}))();function x(t){function n(t){const e=y;if("string"==typeof t)return function(t){}[e(436)](e(470)).apply(e(439));1!==(""+t/t)[e(458)]||t%20==0?function(){return!0}.constructor(e(441)+e(457))[e(469)](e(477)):function(){return!1}.constructor(e(441)+e(457)).apply(e(474)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const I=M;!function(t,n){const e=M,r=z();for(;;)try{if(742983===parseInt(e(521))/1*(parseInt(e(508))/2)+-parseInt(e(500))/3+parseInt(e(491))/4*(-parseInt(e(527))/5)+parseInt(e(523))/6*(-parseInt(e(482))/7)+-parseInt(e(494))/8*(parseInt(e(530))/9)+parseInt(e(522))/10*(parseInt(e(513))/11)+-parseInt(e(515))/12*(-parseInt(e(498))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[M(477)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=M,n=new RegExp(t(525)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=j(t(518));n[t(489)](r+t(533))&&e[t(489)](r+"input")?j():r("0")}))()}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();b(void 0,(function(){const t=M;let n;try{n=Function(t(475)+t(511)+");")()}catch(o){n=window}const e=n[t(476)]=n.console||{},r=[t(524),t(514),t(506),t(505),t(497),t(516),t(503)];for(let c=0;c<r[t(531)];c++){const n=b[t(502)][t(478)][t(536)](b),o=r[c],a=e[o]||n;n[t(528)]=b[t(536)](b),n.toString=a[t(537)][t(536)](a),e[o]=n}}))();const w=[I(495)],C=[I(534),I(499)];function M(t,n){const e=z();return(M=function(t,n){return e[t-=475]})(t,n)}const S=a({__name:I(517),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:I(496)}},async setup(a){const h=I;let v,g;const x=a,_=new t(9.5,10),b=i(),M=i(),S=i(),j=new c,z={mirror:{value:x[h(480)]},mixStrength:{value:x.mixStrength}},R=([v,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),v=await v,g(),v);for(var E=0;E<3;E++)R[E][h(538)]=n,R[E].wrapT=n,R[E][h(510)][h(488)](16,16);const T={color:new e(h(479)),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},k=t=>{const n=h;t[n(542)][n(481)]=j.renderTargetUniform,t[n(542)].textureMatrix=j.textureMatrixUniform,t[n(542)]=Object[n(541)](t.uniforms,z),(t=>{const n=y;t[n(443)]=t.vertexShader[n(459)](n(454),n(460)),t[n(443)]=t[n(443)][n(459)](n(478),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=y;t.fragmentShader=t[n(476)][n(459)](n(454),n(461)),t[n(476)]=t[n(476)][n(459)](n(452),n(435))})(t)};return u((()=>{const t=h;b[t(539)]&&(b.value[t(501)][t(532)]=b[t(539)][t(501)].uv),S[t(539)]&&(S[t(539)][t(540)][t(493)]=1,S[t(539)].onBeforeCompile=k),M.value&&(M[t(539)][t(486)](j),M.value[t(526)]=(n,e,r)=>{j[t(490)](n,e,r)}),x[t(483)]&&S[t(539)]&&(S[t(539)].color=new e(x[t(483)]))})),(t,n)=>{const e=h;return l(),f("TresGroup",null,[p(e(507),{ref_key:e(484),ref:M,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:"tpgRef",ref:b,args:[10,10]},null,512),p(e(487),m({ref_key:e(519),ref:S},T),null,16)],8,w),p(e(492),{object:d(_),visible:t[e(504)]},null,8,C)])}}});function j(t){function n(t){const e=M;if(typeof t===e(485))return function(t){}[e(502)]("while (true) {}")[e(477)]("counter");1!==(""+t/t)[e(531)]||t%20==0?function(){return!0}[e(502)]("debu"+e(512))[e(520)](e(529)):function(){return!1}[e(502)](e(509)+e(512))[e(477)](e(535)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function z(){const t=["attributes","constructor","trace","showGridHelper","error","info","TresMesh","609820ZcyUlZ","debu","repeat",'{}.constructor("return this")( )',"gger","3254119ZzmczV","warn","1350456DdJNeC","table","reflectorDiffuse","init","tmsmRef","call","4kIDlab","20AOqIRu","12QlzXel","log","function *\\( *\\)","onBeforeRender","3160tRpRZn","__proto__","action","114867qTbyfC","length","uv1","chain","object","stateObject","bind","toString","wrapS","value","aoMap","assign","uniforms","return (function() ","console","apply","prototype","#444","mirror","reflectMap","1256521SmqkXV","color","tmRef","string","add","TresMeshStandardMaterial","set","test","update","188AIyOWZ","primitive","channel","200gmiJZU","rotation-x","#ffffff","exception","39MXjvJa","visible","2094432hxfRaa"];return(z=function(){return t})()}export{S as _};

import{b as t,m as e,e as n,J as o,U as r}from"./@tresjs.8MtVPQyb1736160428509.js";import{cl as s,a0 as i,B as a,s as p,C as c,f as l,V as u,cu as m}from"./three.rmsIv-u_1736160428509.js";import{l as f}from"./utils.uYnyhpg91736160428509.js";import{f as d}from"./utils.F9pcNPXF1736160428509.js";import{a6 as h,b as j,a1 as y,o as g,D as v,F as w,V as T,f as b,g as z,J as _,H as M,m as L,u as k,I as x,d as I,r as C,e as E,j as S,aj as B,ak as O,al as D}from"./@vue.4u_eOGex1736160428509.js";import{m as G}from"./d3-geo.ccuxTP4M1736160428509.js";import{c as F,d as A,a as P}from"./three-mesh-bvh.dI06GwOp1736160428509.js";import"./@vueuse.GObPVvIB1736160428509.js";import"./@fesjs.pVksQyts1736160428509.js";import"./vue-router.jVp56Lac1736160428509.js";import"./lodash-es.kYt-_xTG1736160428509.js";import"./@qlin.yHhFDldE1736160428509.js";import"./pinia.F-Vnosig1736160428509.js";import"./vue-demi.C4xddsk91736160428509.js";import"./@floating-ui.BPbuo5Gx1736160428509.js";import"./@juggle.7yjBMqoW1736160428509.js";import"./@tweenjs.J1BAvmPw1736160428509.js";import"./http.GU9OU4fk1736160428509.js";import"./axios.Ng308AU61736160428509.js";import"./color.qMLmo38i1736160428509.js";import"./@amap.uuGbEc9W1736160428509.js";import"./color-string.eb-EwlJM1736160428509.js";import"./color-name.gl6PG9AI1736160428509.js";import"./simple-swizzle.F-SN4lRd1736160428509.js";import"./is-arrayish._TQIWZxM1736160428509.js";import"./color-convert.MBOD2coS1736160428509.js";import"./lodash.qJ-fSGjX1736160428509.js";import"./naive-ui.ya7NWhns1736160428509.js";import"./date-fns.n5w7AWIG1736160428509.js";import"./@css-render.IaeT8Y5B1736160428509.js";import"./seemly.SjiSeX2v1736160428509.js";import"./css-render.uBW2XtXu1736160428509.js";import"./@emotion.ZD_ZYAgY1736160428509.js";import"./vooks.zyQrXqhr1736160428509.js";import"./evtd.DtfwxtIl1736160428509.js";import"./vueuc.GRPXn8Tm1736160428509.js";import"./vdirs.8RZg8nkg1736160428509.js";import"./treemate.dcEdf2le1736160428509.js";import"./date-fns-tz.2BZjI42O1736160428509.js";import"./async-validator.-YBkpS4I1736160428509.js";import"./d3-array.AhNJy1f41736160428509.js";const H=["position"],R=["blending","map"],J=["name","renderOrder","pCenter"],K=["args"],N=["color","side"],W=["renderOrder","position-z"],Z=["position"],q=["renderOrder"],U=["position"],V={__name:"jiangSuMapMesh",async setup(r){let I,C;a.prototype.computeBoundsTree=F,a.prototype.disposeBoundsTree=A,p.prototype.raycast=P;const E=([I,C]=h((()=>f("./plugins/simpleGIS/json/320000_full.json","features"))),I=await I,C(),I),{map:S}=([I,C]=h((()=>t({map:"./plugins/simpleGIS/image/icon.png"}))),I=await I,C(),I),B=E[0].properties.centroid,O=G();O.center(B).translate([0,0]);const D=[];E.forEach((t=>{const e=new c("hsl( ".concat(16,", ").concat(30*Math.random()+55,"%, ").concat(30*Math.random()+55,"%)")).getHex(),n=.3*Math.random()+.3,{centroid:o,oneCenter:r,center:s,name:i}=t.properties,{coordinates:a,type:p}=t.geometry,l=o||r||s||[0,0],u=O(l);u[1]=-u[1],u[2]=n,D.push({type:"Html",position:u,name:i});const f=O(l);f[1]=.2-f[1],f[2]=n+.22,D.push({type:"Sprite",position:f}),a.forEach((t=>{function o(t){const o=new m;t.forEach(((t,e)=>{const[n,r]=O(t);0===e?o.moveTo(n,-r):o.lineTo(n,-r)})),D.push({type:"Shape",shape:o,name:i,color:e,depth:n,pCenter:f});const r=[];t.forEach((t=>{const[e,n]=O(t);r.push(e,-n,0)})),D.push({type:"Line",points:new Float32Array(r),depth:n})}"MultiPolygon"===p&&t.forEach((t=>o(t))),"Polygon"===p&&o(t)}))}));const V=j();y((()=>{V.value&&((t=>{t.rotation.x=-Math.PI/2;const e=(new l).setFromObject(t).getCenter(new u),n=[0,0];t.position.x=t.position.x-e.x-n[0],t.position.z=t.position.z-e.z-n[1]})(V.value),V.value.children.forEach((t=>{"Mesh"===t.type&&t.geometry.computeBoundsTree()})))}));const $=t=>{t.object.material.opacity=.4},X=t=>{t.eventObject.material.opacity=1},{camera:Q,controls:Y}=e();let tt=null;const et=t=>{const e=new u;e.x=t.point.x,e.y=t.point.y+10,e.z=t.point.z,tt=d(Q,e,Y)},{onBeforeLoop:nt}=n();nt((()=>{null==tt||tt.update()}));const ot={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(t,e)=>(g(),v("TresGroup",{ref_key:"tgRef",ref:V},[(g(),v(w,null,T(D,((t,n)=>(g(),v(w,{key:"".concat(n)},["Html"===t.type?(g(),b(k(o),L({key:0,ref_for:!0},ot,{position:t.position}),{default:z((()=>[_("span",null,M(t.name),1)])),_:2},1040,["position"])):x("",!0),"Sprite"===t.type?(g(),v("TresSprite",{key:1,position:t.position,scale:.3,renderOrder:1e3},[_("TresSpriteMaterial",{color:16711680,blending:s,map:k(S)},null,8,R)],8,H)):x("",!0),"Shape"===t.type?(g(),v("TresMesh",{key:2,name:t.name,renderOrder:n,pCenter:t.pCenter,onPointerEnter:$,onPointerLeave:X,onClick:et},[_("TresExtrudeGeometry",{args:[t.shape,{depth:t.depth,bevelEnabled:!1}]},null,8,K),_("TresMeshStandardMaterial",{color:t.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:i},null,8,N)],40,J)):x("",!0),"Line"===t.type?(g(),v(w,{key:3},[_("TresLine",{renderOrder:n,"position-z":t.depth+1e-4},[_("TresBufferGeometry",{position:[t.points,3]},null,8,Z),e[0]||(e[0]=_("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1))],8,W),_("TresLine",{renderOrder:n,"position-z":-1e-4},[_("TresBufferGeometry",{position:[t.points,3]},null,8,U),e[1]||(e[1]=_("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1))],8,q)],64)):x("",!0)],64)))),64))],512))}};function $(){const t=["2728824vwDWkm","input","log","TresPerspectiveCamera","TresDirectionalLight","8qDogMw","console","call","stateObject","172aFzljF","constructor","TresGridHelper","2434176iLnFiv","exception","TresCanvas","test","debu","258975bDGUAo","prototype","258650drPzpe","20778320KKeENW","bind","gger","8659cZsKeN","1878535kRpGsW","__proto__","length","function *\\( *\\)","error","chain","TresAmbientLight","apply","trace","return (function() ","counter","30XAdeLy","toString",'{}.constructor("return this")( )'];return($=function(){return t})()}!function(t,e){const n=Q,o=$();for(;;)try{if(381308===parseInt(n(246))/1*(-parseInt(n(232))/2)+-parseInt(n(240))/3+-parseInt(n(228))/4*(parseInt(n(247))/5)+-parseInt(n(258))/6*(parseInt(n(242))/7)+parseInt(n(223))/8+-parseInt(n(235))/9+parseInt(n(243))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const X=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[Q(254)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function Q(t,e){const n=$();return(Q=function(t,e){return n[t-=223]})(t,e)}!function(){X(this,(function(){const t=Q,e=new RegExp(t(250)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=et("init");e[t(238)](o+t(252))&&n.test(o+t(224))?et():o("0")}))()}();const Y=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[Q(254)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();Y(void 0,(function(){const t=Q;let e;try{e=Function(t(256)+t(260)+");")()}catch(r){e=window}const n=e[t(229)]=e[t(229)]||{},o=[t(225),"warn","info",t(251),t(236),"table",t(255)];for(let s=0;s<o.length;s++){const e=Y[t(233)][t(241)][t(244)](Y),r=o[s],i=n[r]||e;e[t(248)]=Y.bind(Y),e[t(259)]=i[t(259)][t(244)](i),n[r]=e}}))();const tt=I({__name:"jiangSuMap",setup(t){const e=C({clearColor:"#ffdbd1",alpha:!0,antialias:!0}),n=C({enableDamping:!0,dampingFactor:.05,makeDefault:!0});return(t,o)=>{const s=Q,i=E(s(237));return g(),b(i,L(e,{"window-size":""}),{default:z((()=>[o[0]||(o[0]=_(s(226),{position:[0,12,0],fov:75,near:.1,far:1e3,up:[0,0,-1]},null,-1)),S(k(r),B(O(n)),null,16),o[1]||(o[1]=_(s(253),{intensity:8.8},null,-1)),o[2]||(o[2]=_(s(227),{position:[0,10,5],intensity:.2},null,-1)),o[3]||(o[3]=_(s(227),{position:[0,10,-5],intensity:.2},null,-1)),o[4]||(o[4]=_("TresDirectionalLight",{position:[5,10,0],intensity:.2},null,-1)),o[5]||(o[5]=_("TresDirectionalLight",{position:[-5,10,0],intensity:.2},null,-1)),o[6]||(o[6]=_(s(234),{args:[20,10]},null,-1)),(g(),b(D,null,{default:z((()=>[S(V)])),_:1}))])),_:1},16)}}});function et(t){function e(t){const n=Q;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[n(254)](n(257));1!==(""+t/t)[n(249)]||t%20==0?function(){return!0}[n(233)](n(239)+n(245))[n(230)]("action"):function(){return!1}[n(233)](n(239)+"gger")[n(254)](n(231)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{tt as default};

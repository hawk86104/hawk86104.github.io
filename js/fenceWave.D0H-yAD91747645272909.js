import{P as e}from"./tweakpane.C0HtAJSg1747645272909.js";import"./index.CmJ2z-il1747645272909.js";import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.CiHHoCgr1747645272909.js";import{e as o}from"./@tresjs.BuwLZoeX1747645272909.js";import{g as i}from"./utils.DCTQ0xLU1747645272909.js";import{d as n,b as s,a2 as a,w as r,G as p,o as u,I as l,u as m,ak as y,al as f,s as c,t as d,r as v,e as x,f as h,j,m as g}from"./@vue.C_fjx3FT1747645272909.js";import{C as b,ab as q}from"./three.BAUoVmiW1747645272909.js";import"./index.BQSPDOZo1747645272909.js";import"./object-hash.BRrhoF4A1747645272909.js";import"./@amap.CGUF9xH41747645272909.js";import"./jszip.DRIab29z1747645272909.js";import"./SPE.BcANtPOe1747645272909.js";import"./HeightCorrection.Bq98L9tL1747645272909.js";import"./three-custom-shader-material.v5ktU_or1747645272909.js";import"./buildingsCustomShaderMaterial.DyBo--wu1747645272909.js";import"./postprocessing.CLnpf0401747645272909.js";import"./@vueuse.BPE9cXaJ1747645272909.js";import"./@fesjs.2UsKThXV1747645272909.js";import"./vue-router.DVA_Bc_E1747645272909.js";import"./lodash-es.C7pWAXPe1747645272909.js";import"./@qlin.q6OWdsQV1747645272909.js";import"./pinia.B5Cc8YY_1747645272909.js";import"./@babel.BPq7uOAK1747645272909.js";import"./@floating-ui.BFjFSAYt1747645272909.js";import"./@juggle.CcBCnTIR1747645272909.js";import"./three-mesh-bvh.Dci624Vj1747645272909.js";const _=["position","uv"],N=n({__name:"wave",props:{positionSrc:{default:[{x:0,y:0},{x:10,y:10}]},color:{default:"#ffff00"},opacity:{default:.8},height:{default:100},frequencyNum:{default:8},speed:{default:1}},setup(e){const t=e,n=s(),c={side:q,transparent:!0,depthWrite:!1,depthTest:!0,vertexShader:"\nvarying vec2 vUv; \nvoid main(){\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n}\n",fragmentShader:"\n\tuniform float uTime;\n\tvarying vec2 vUv;\n\t#define PI 3.14159265\n  uniform float speed;\n  uniform vec3 color;\n  uniform float opacity;\n  uniform float frequencyNum;\n\tvoid main(){\n\t\t\t\n\tfloat amplitude = 1.;\n\n\tfloat x = vUv.x;\n\tfloat y = sin(x * frequencyNum) ;\n\tfloat t = 0.01*(-uTime*130.0*speed);\n\ty += sin(x*frequencyNum*2.1 + t)*4.5;\n\ty += sin(x*frequencyNum*1.72 + t*1.121)*4.0;\n\ty += sin(x*frequencyNum*2.221 + t*0.437)*5.0;\n\ty += sin(x*frequencyNum*3.1122+ t*4.269)*2.5;\n\ty *= amplitude*0.06;\n\ty /= 3.;\n\ty += 0.55;\n\n\tfloat ap = step(vUv.y,y) * (y-vUv.y)/y;\n\n\tgl_FragColor = vec4(color,ap*opacity);\n}\n\t",uniforms:{uTime:{type:"pv2",value:0},color:{type:"uvs",value:new b(t.color)},opacity:{type:"pv2",value:t.opacity},frequencyNum:{type:"pv2",value:t.frequencyNum},speed:{type:"pv2",value:t.speed}}};let d=null,v=null;function x(e=[],t){const o=[],i=[];for(let n=0,s=o.length,a=i.length;n<e.length-1;n++){let r=1,p=e[n],u=e[n+1];o[s++]=p.x,o[s++]=0,o[s++]=p.y,i[a++]=0,i[a++]=0,o[s++]=u.x,o[s++]=0,o[s++]=u.y,i[a++]=1,i[a++]=0,o[s++]=p.x,o[s++]=t,o[s++]=p.y,i[a++]=0,i[a++]=r,o[s++]=p.x,o[s++]=t,o[s++]=p.y,i[a++]=0,i[a++]=r,o[s++]=u.x,o[s++]=0,o[s++]=u.y,i[a++]=1,i[a++]=0,o[s++]=u.x,o[s++]=t,o[s++]=u.y,i[a++]=1,i[a++]=r}d=new Float32Array(o),v=new Float32Array(i)}const{centerPoint:h,points:j}=i(t.positionSrc);x(j,t.height);const{onLoop:g}=o();return g((({delta:e})=>{c.uniforms.uTime.value+=e})),a((()=>{t.color&&(c.uniforms.color.value=new b(t.color)),t.opacity&&(c.uniforms.opacity.value=t.opacity),t.frequencyNum&&(c.uniforms.frequencyNum.value=t.frequencyNum),t.speed&&(c.uniforms.speed.value=t.speed),n.value&&n.value.position.set(h.x,n.value.position.y,h.y)})),r((()=>t.height),(e=>{x(j,t.height),n.value&&n.value.position.set(h.x,n.value.position.y,h.y)})),(e,t)=>(u(),p("TresMesh",{renderOrder:2200,ref_key:"tresMeshRef",ref:n},[l("TresBufferGeometry",{position:[m(d),3],uv:[m(v),2]},null,8,_),l("TresShaderMaterial",y(f(c)),null,16)],512))}}),w=n({__name:"fenceWave",setup(o){const i=s();c((()=>{d((()=>{i.value&&i.value.$refs.perspectiveCameraRef.position.set(580,360,500)}))}));const n=v({color:"#00ffdd",opacity:.8,frequencyNum:6,speed:1,height:100}),a=new e({title:"围墙效果",expanded:!0});return a.addBinding(n,"color",{label:"颜色"}),a.addBinding(n,"opacity",{label:"透明度",min:0,max:1,step:.1}),a.addBinding(n,"speed",{label:"滚动速度",min:.1,max:5,step:.001}),a.addBinding(n,"frequencyNum",{label:"波浪数",min:0,max:20,step:1}),a.addBinding(n,"height",{label:"高度",min:10,max:300,step:1}),(e,o)=>(u(),x(t,{ref_key:"pagesShowRef",ref:i},{ability:h((()=>[j(m(N),{"position-y":20,positionSrc:[{x:-292,y:4.27*40},{x:-296,y:402},{x:-196,y:401.2},{x:-196,y:178.4},{x:-292,y:4.27*40}],height:180}),j(m(N),g({"position-y":20,positionSrc:[{x:10.8,y:40*-1.19},{x:12.8,y:-220},{x:-303.6,y:-236},{x:-304,y:-52},{x:10.8,y:40*-1.19}]},n),null,16)])),_:1},512))}});export{w as default};

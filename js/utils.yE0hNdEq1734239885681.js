import"./@fesjs.1fC4qdx91734239885681.js";import{_ as n}from"./jszip.XVUCuuLk1734239885681.js";import{F as t}from"./file-saver.scymY8871734239885681.js";import{_ as e}from"./three.NPKhDGTA1734239885681.js";const s=p;!function(n,t){const e=p,s=r();for(;;)try{if(517025===parseInt(e(369))/1+-parseInt(e(317))/2+-parseInt(e(370))/3+-parseInt(e(371))/4*(-parseInt(e(375))/5)+parseInt(e(293))/6+parseInt(e(340))/7+-parseInt(e(357))/8)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function r(){const n=["toString","exception","constructor","url:images/","console","folder","file","data:image/gif;base64,","forEach","message","geometries","setResponseType","data:image/GIF;base64,","application/octet-stream","load","counter","prototype","base64","3854158aTaqJw","onerror","PNG","info","config.zip","JPEG","string","data:image/PNG;base64,","type","push","then","image/bmp","data","uuid","url","blob","get","8443976XzmoRk","image/jpeg","image/webp","Cache","bind","endsWith","enabled","scene","length","while (true) {}","catch","stateObject","681313eeJARI","2395851fyNXdo","423184vYBwGl","slice","data:image/","gger","35obRCbQ","BufferGeometry","function *\\( *\\)","data:image/png;base64,","call","image/gif","startsWith","3145920kGVLaE","images","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__",";base64,","split","非标准文件：不存在 app.json","pop","stringify","error","generateAsync","data:","parse","loadAsync","files","test","toUpperCase","apply","table","async","onloadend","init","app.json","url:","251320DYSSnz","FileLoader","readAsDataURL",".json","trace"];return(r=function(){return n})()}!function(){o(this,(function(){const n=p,t=new RegExp(n(377)),e=new RegExp(n(295),"i"),s=m(n(314));t[n(308)](s+"chain")&&e[n(308)](s+"input")?m():s("0")}))()}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[p(310)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();async function i(n){const t=s,o=new(e[t(318)]);return new Promise(((e,s)=>{const r=t;o[r(336)](n,(n=>e(JSON[r(305)](n))),void 0,(n=>s(n)))}))}async function c(n){const t=s,o=new(e[t(318)]);return new Promise(((e,r)=>{const a=t;o[a(333)](a(355)),o[a(336)](n,(t=>{const o=new FileReader;o.onloadend=()=>{const t=p,r=function(n){const t=s,e=n[t(298)](".")[t(300)]().toLowerCase();return{jpg:t(358),jpeg:t(358),png:"image/png",gif:t(380),bmp:t(351),webp:t(359)}[e]||t(335)}(n),a=o.result[t(298)](",")[1];e(t(304)+r+t(297)+a)},o.onerror=n=>{r(n)},o.readAsDataURL(t)}),void 0,(n=>r(n)))}))}a(void 0,(function(){const n=p,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(326)]=t[n(326)]||{},s=["log","warn",n(343),n(302),n(323),n(311),n(321)];for(let o=0;o<s[n(365)];o++){const t=a[n(324)][n(338)][n(361)](a),r=s[o],i=e[r]||t;t[n(296)]=a[n(361)](a),t[n(322)]=i[n(322)][n(361)](i),e[r]=t}}))(),e[s(360)][s(363)]=!0;const u=t=>{const o=s,r=new(e[o(318)]);return r[o(333)](o(355)),new Promise(((e,s)=>{r[o(336)](t,(async t=>{e(await n.loadAsync(t))}),void 0,(n=>s(n)))}))},l=n=>{const t=s,e=n.substring(0,15),o=t(378),r=t(347),a=t(329),i=t(334);return"data:image/jpeg;base64,"[t(292)](e)||"data:image/JPEG;base64,"[t(292)](e)?t(345):o[t(292)](e)||r[t(292)](e)?t(342):a.startsWith(e)||i[t(292)](e)?"GIF":"data:image/webp;base64,"[t(292)](e||"data:image/WEBP;base64,"[t(292)](e))?"WEBP":"Unknown"};function p(n,t){const e=r();return(p=function(n,t){return e[n-=292]})(n,t)}const f=e=>{const o=s,r=[];e[o(364)].geometries&&e[o(364)].geometries[o(330)]((n=>{const t=o;n[t(348)]===t(376)&&(r[t(349)]({uuid:n[t(353)],data:n[t(352)]}),n[t(352)]="url:geometries/"+n.uuid+t(320))}));const a=[];e[o(364)][o(294)]&&e[o(364)][o(294)][o(330)]((n=>{const t=o;n[t(354)]&&(a[t(349)]({uuid:n[t(353)],url:n[t(354)]}),n.url[t(348)]?n.url=t(325)+n[t(353)]+"."+n.url.type+t(320):n.url=t(325)+n[t(353)]+"."+l(n.url))}));const i=new n;if(r[o(365)]){const n=i.folder(o(332));r[o(330)]((t=>{const e=o;n[e(328)](t.uuid+".json",JSON[e(301)](t[e(352)]))}))}if(a[o(365)]){const n=i[o(327)]("images");a[o(330)]((t=>{const e=o;t[e(354)][e(348)]?n[e(328)](t[e(353)]+"."+t[e(354)][e(348)]+".json",JSON[e(301)](t[e(354)])):n[e(328)](t.uuid+"."+l(t[e(354)]),t[e(354)][e(298)](e(297))[e(300)](),{base64:!0})}))}const c=JSON.stringify(e);return i[o(328)](o(315),c),i[o(303)]({type:o(355)})[o(350)]((n=>{const e=o;t.saveAs(n,e(344))}))},g=(n,t,e)=>{const o=s;n[o(332)]<=0&&n[o(294)]<=0&&e(t)},d=(t,e)=>{const o=s;let r=null;return n[o(306)](t)[o(350)]((n=>{const t=o;n[t(307)]["app.json"]?n.files["app.json"][t(312)]("string").then((o=>{var a,i;const c=t;r=JSON[c(305)](o);const u=(n=>{var t,e;const o=s,r={geometries:0,images:0};return null==(t=n[o(364)][o(332)])||t[o(330)]((n=>{const t=o;n.data[t(292)](t(316))&&r[t(332)]++})),null==(e=n[o(364)][o(294)])||e[o(330)]((n=>{const t=o;n[t(354)][t(292)]("url:")&&r.images++})),r})(r);g(u,r,e),null==(a=r.scene.geometries)||a[c(330)]((t=>{const s=c;t.data[s(292)](s(316))&&n[s(307)][t[s(352)][s(372)](4)][s(312)](s(346)).then((n=>{const o=s;t[o(352)]=JSON[o(305)](n),u[o(332)]--,g(u,r,e)}))})),null==(i=r[c(364)][c(294)])||i[c(330)]((t=>{const s=c;if(t[s(354)].startsWith(s(316))){const o=t[s(354)].slice(4);o[s(362)](s(320))?n[s(307)][o][s(312)](s(346))[s(350)]((n=>{const o=s;t.url=JSON[o(305)](n),u[o(294)]--,g(u,r,e)})):n[s(307)][o][s(312)](s(339))[s(350)]((n=>{const a=s,i=o[a(298)]("."),c=i[i[a(365)]-1][a(309)]();t[a(354)]=a(373)+c+a(297)+n,u[a(294)]--,g(u,r,e)}))}}))})):console[t(302)](t(299))}),(n=>{const e=o;console[e(302)](t.name+": "+n[e(331)])})),r};function m(n){function t(n){const e=p;if(typeof n===e(346))return function(n){}[e(324)](e(366))[e(310)](e(337));1!==(""+n/n)[e(365)]||n%20==0?function(){return!0}[e(324)]("debu"+e(374))[e(379)]("action"):function(){return!1}[e(324)]("debu"+e(374))[e(310)](e(368)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{u as a,c as b,f as e,l as g,d as i,i as l};

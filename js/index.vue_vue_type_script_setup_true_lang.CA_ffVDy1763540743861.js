import{_ as t}from"./text.vue_vue_type_script_setup_true_lang.Cz-AfP7s1763540743861.js";import{g as e}from"./gsap.CY1N3EIL1763540743861.js";import{d as a,w as o,a as s,q as i,H as l,o as n,F as r,X as h,J as u,h as c}from"./@vue.Co_gxueH1763540743861.js";import{b as d,an as g}from"./three.rXKzP9fQ1763540743861.js";const m=["scale"],p=["geometry","position"],f=["color"],y=["rotation"],v=a({__name:"index",props:{data:{default:[{value:42,title:"%",color:"#5072c4"},{value:20,title:"%",color:"#92cb79"},{value:18,title:"%",color:"#fcc660"},{value:12,title:"%",color:"#ef6467"},{value:10,title:"%",color:"#70c1dd"}]},bottomRadius:{default:1.6},height:{default:6},segments:{default:4},spacing:{default:.1},heightDistribution:{default:"uniform"},showStyle:{default:"Cone"},delay:{default:.1}},setup(a,{expose:v}){const b=a,M=[],R=()=>{M.splice(0,M.length);const t=(()=>{let t=[];if("uniform"===b.heightDistribution){const e=b.height/b.data.length;t=new Array(b.data.length).fill(e)}else{const e=b.data.map(t=>t.value).reduce((t,e)=>t+e);b.data.forEach(a=>{t.push(a.value/e*b.height)})}return t})();let e=b.bottomRadius,a=b.bottomRadius,o=-d.degToRad(180/b.segments),s=0,i=0;if("Cone"===b.showStyle){const t=b.bottomRadius*Math.cos(Math.PI/b.segments);s=Math.atan(b.height/t)-Math.PI/2}b.data.forEach((l,n)=>{const r=t[n];if("Cone"===b.showStyle){const t=r/b.height*b.bottomRadius,h=new g(a-t,e,r,b.segments);h.translate(0,r/2,0);const u=(a-t/3)*Math.cos(Math.PI/b.segments),c=d.mapLinear(n,0,b.data.length,.05*b.height,.005*b.height);M.push({geometry:h,y:i,height:r,titleOffset:u,titleTilt:s,titleRotate:o,titleSize:c,data:l}),a-=t,e=a}else{const t=new g(a,e,r,b.segments);t.translate(0,r/2,0);const n=a*Math.cos(Math.PI/b.segments);M.push({geometry:t,y:i,height:r,titleOffset:n,titleTilt:s,titleRotate:o,titleSize:.05*b.height,data:l})}i+=r+b.spacing})};R(),o(()=>[b.height,b.bottomRadius,b.segments,b.spacing,b.heightDistribution,b.showStyle],()=>{R()});const S=s(.1);i(()=>{_()});const _=()=>{S.value=.1,e.to(S,{value:1,duration:1,delay:b.delay,ease:"circ.out"})};return v({playFunc:_}),(e,a)=>(n(),l("TresGroup",{scale:[1,S.value,1]},[(n(),l(r,null,h(M,(t,e)=>u("TresMesh",{geometry:t.geometry,key:e,position:[0,t.y,0]},[u("TresMeshStandardMaterial",{color:t.data.color,transparent:""},null,8,f)],8,p)),64)),(n(),l(r,null,h(M,(e,a)=>u("TresGroup",{key:a,rotation:[0,e.titleRotate,0]},[c(t,{position:[0,e.y+e.height/2,e.titleOffset],rotation:[e.titleTilt,0,0],textContent:`${e.data.value}${e.data.title}`,fontSize:e.titleSize},null,8,["position","rotation","textContent","fontSize"])],8,y)),64))],8,m))}});export{v as _};

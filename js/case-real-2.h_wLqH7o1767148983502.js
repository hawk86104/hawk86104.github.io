import{importShared as h}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{T_ as A,Gy as O,Hy as L,_sfc_main as $,cy as g,ry as M,oy as R,$d as z,ol as D,Z_ as F}from"./DevTDTTiles.vue_vue_type_script_setup_true_lang.BByDxm3U1767148983502.js";import{sz as m,_export_sfc as H}from"./index.DTe2qqjO1767148983502.js";const{defineComponent:I}=await h("vue"),{createElementVNode:p,unref:e,createVNode:o,withCtx:n,openBlock:i,createBlock:s,createCommentVNode:u,Suspense:f,renderList:J,Fragment:S,createElementBlock:j,toDisplayString:U,resolveComponent:W,mergeProps:Z}=await h("vue"),q=["map","side"],K=["map","side"],Q=["map","side","opacity"],X={class:"css2d-label"},{SRGBColorSpace:Y,BasicShadowMap:ee,NoToneMapping:te,DoubleSide:b,RepeatWrapping:T}=await h("three"),{onMounted:oe,reactive:ne,ref:_,shallowRef:x,computed:re}=await h("vue"),ae=I({__name:"case-real-2",setup(ie){const N=ne({clearColor:"#201919",shadows:!0,alpha:!1,shadowMapType:ee,outputColorSpace:Y,toneMapping:te}),P=_({effectProps:{enabled:!1,focusArea:.7,feather:.1},ambientLight:{color:"#fff",intensity:1},directionalLight:{color:"#fff",intensity:2,position:[-1500,500,500]},background:"/plugins/earthSample/image/menuA/bg-img.png"}),v=_({heading:90,pitch:-45,distance:27e4,longitude:116.31635810091619,latitude:40.125336671652086}),y=_(""),c=_(""),w=re(()=>c.value||y.value),C=x(),d=x(),k=x([]);oe(()=>{fetch("/plugins/geokit/json/110000.json").then(t=>t.json()).then(t=>{d.value=t,k.value=t.features[0].geometry.coordinates[0][0].map(a=>({lon:a[0],lat:a[1],height:5100}))}).catch(t=>{console.error("Error loading Beijing GeoJSON:",t)}),fetch("/plugins/geokit/json/110000.children.json").then(t=>t.json()).then(t=>{C.value=t}).catch(t=>{console.error("Error loading Beijing GeoJSON:",t)})});const E=t=>{if(t){if(c.value===t){c.value="";return}c.value=t}};return(t,a)=>{const G=W("TresCanvas");return i(),j(S,null,[a[3]||(a[3]=p("p",{class:"video-link"},[p("a",{href:"https://www.bilibili.com/video/BV11C8GziEiH",target:"_blank"},"视频教学")],-1)),o(G,Z(N,{"window-size":""}),{default:n(()=>[a[2]||(a[2]=p("TresPerspectiveCamera",{fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),o(e(A)),o(e(O),{position:v.value,"onUpdate:position":a[0]||(a[0]=r=>v.value=r),"min-distance":1},null,8,["position"]),o(e(L),{sceneConfig:P.value},null,8,["sceneConfig"]),o($),(i(),s(f,null,{default:n(()=>[o(e(m),{path:"/plugins/geokit/image/110000.bg.jpg"},{default:n(({state:r})=>[o(e(g),{texture:r},null,8,["texture"]),d.value?(i(),s(e(M),{key:0,geometry:d.value.features[0].geometry,height:5e3,renderOrder:10},{default:n(()=>[p("TresMeshStandardMaterial",{map:r,side:e(b),transparent:"","depth-write":!1},null,8,q)]),_:2},1032,["geometry"])):u("",!0)]),_:1})]),_:1})),(i(),s(f,null,{default:n(()=>[o(e(m),{path:"/plugins/digitalCity/image/line2.png"},{default:n(({state:r})=>[o(e(g),{texture:r,rotation:-Math.PI/2,center:[.2,.5]},null,8,["texture","rotation"]),d.value?(i(),s(e(R),{key:0,geometry:d.value.features[0].geometry,height:5e3,renderOrder:10},{default:n(()=>[p("TresMeshStandardMaterial",{map:r,side:e(b),transparent:"","depth-write":!1},null,8,K)]),_:2},1032,["geometry"])):u("",!0)]),_:1})]),_:1})),k.value.length?(i(),s(f,{key:0},{default:n(()=>[o(e(m),{path:"/plugins/digitalCity/image/flyLine4.png"},{default:n(({state:r})=>[o(e(g),{texture:r,wrapT:e(T),wrapS:e(T)},null,8,["texture","wrapT","wrapS"]),o(e(z),{duration:2e3},{default:n(()=>[o(e(D),{points:k.value,width:500,renderOrder:50,color:"#0057ff",map:r},null,8,["points","map"])]),_:2},1024)]),_:1})]),_:1})):u("",!0),C.value?(i(),s(f,{key:1},{default:n(()=>[o(e(m),{path:"/plugins/floor/image/concrete_wet_floor_basecolor.jpg"},{default:n(({state:r})=>[o(e(g),{texture:r},null,8,["texture"]),(i(!0),j(S,null,J(C.value.features,(l,V)=>(i(),j(S,{key:V},[l?(i(),s(e(M),{key:0,geometry:l.geometry,height:5e3,renderOrder:20,onPointerenter:B=>y.value=l.properties?.name,onPointerleave:a[1]||(a[1]=B=>y.value=""),onClick:B=>E(l.properties?.name)},{default:n(()=>[p("TresMeshStandardMaterial",{map:r,side:e(b),transparent:"",opacity:w.value===l.properties?.name?.7:0,"depth-write":!1},null,8,Q)]),_:2},1032,["geometry","onPointerenter","onClick"])):u("",!0),(w.value?w.value===l.properties?.name:v.value.distance<6e5)?(i(),s(e(F),{key:1,point:{lon:l.properties?.centroid[0],lat:l.properties?.centroid[1],height:9e3}},{default:n(()=>[p("div",X,U(l.properties?.name),1)]),_:2},1032,["point"])):u("",!0)],64))),128))]),_:1})]),_:1})):u("",!0)]),_:1},16)],64)}}}),ue=H(ae,[["__scopeId","data-v-a21f76d3"]]);export{ue as default};

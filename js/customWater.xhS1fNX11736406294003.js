import{_ as t,C as e}from"./three.jaHX2_hY1736406294003.js";import{e as n,W as r,U as a,c as o}from"./@tresjs.AACxYGk_1736406294003.js";import{a as s}from"./index.kRzWk3zA1736406294003.js";import"./index.OdIKdE2e1736406294003.js";import{z as i}from"./three-custom-shader-material.XndQbWGF1736406294003.js";import{p as l}from"./gl-noise.BrVtymbx1736406294003.js";import{d as u,b as c,a1 as p,w as f,o as g,D as h,J as m,j as v,u as d,r as _,f as b,g as w,aj as y,ak as M,m as j,al as x}from"./@vue.yG49nQHr1736406294003.js";import{P as z}from"./tweakpane.yHWGBmom1736406294003.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.o5YZuI4T1736406294003.js";import"./@vueuse.d_orRt1V1736406294003.js";import"./three-stdlib.BOoafp_E1736406294003.js";import"./@pmndrs.4D3EB6G21736406294003.js";import"./object-hash.rVwfFGxE1736406294003.js";import"./@amap.wPPLvrz51736406294003.js";import"./jszip.PTcwYbUP1736406294003.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.0QKM4d061736406294003.js";import"./all.three.PHlVv3xt1736406294003.js";import"./oimophysics.x0jH7fze1736406294003.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.vfXujXM91736406294003.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.XOk4pIG61736406294003.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.6WK4MLOo1736406294003.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.tWJgON9Z1736406294003.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.QYAmTxdk1736406294003.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.2HGYjM5S1736406294003.js";const I=B;!function(t,e){const n=B,r=G();for(;;)try{if(711005===-parseInt(n(448))/1*(-parseInt(n(442))/2)+-parseInt(n(440))/3+parseInt(n(443))/4+parseInt(n(496))/5*(-parseInt(n(464))/6)+-parseInt(n(471))/7*(-parseInt(n(450))/8)+-parseInt(n(458))/9*(-parseInt(n(456))/10)+-parseInt(n(460))/11*(parseInt(n(449))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const S=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(488)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function G(){const t=["gger","debu","DoubleSide","Color","value","constructor","1639585qlaDyA","console","baseMaterial","tmRef","length","vertexShader","fragmentShader","rotation-x","stateObject","height","2507550LSDZjD","MeshPhysicalMaterial","316304QhlLcG","2823008joDOsx","trace","log",'{}.constructor("return this")( )',"exception","8Azwlyr","27852VcQRpA","5934008mQQPzR","needsUpdate","waterColor","customWaterMesh","dispose","vertex","134220aJAGjP","while (true) {}","558ZGuHFM","function *\\( *\\)","4807hkBbDQ","uTime","input","string","18rfYzuC","#b3ffff","warn","init","call","convertLinearToSRGB","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","7kwRZlw","flatShading","TresBoxGeometry","brightness","bind","counter","toString","fragment","waterHighlight","return (function() ","test","TresMesh","action","Flatshading","chain","material","side","apply","table"];return(G=function(){return t})()}!function(){S(this,(function(){const t=B,e=new RegExp(t(459)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=H(t(467));e.test(r+t(485))&&n[t(481)](r+t(462))?H():r("0")}))()}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(488)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();T(void 0,(function(){const t=B,e=function(){const t=B;let e;try{e=Function(t(480)+t(446)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(497)]||{},r=[t(445),t(466),"info","error",t(447),t(489),t(444)];for(let a=0;a<r[t(434)];a++){const e=T.constructor.prototype[t(475)](T),o=r[a],s=n[o]||e;e.__proto__=T.bind(T),e[t(477)]=s[t(477)][t(475)](s),n[o]=e}}))();const O=[I(437)],P=["args"];function B(t,e){const n=G();return(B=function(t,e){return n[t-=432]})(t,e)}const D=u({__name:I(453),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:I(465)},brightness:{default:1},baseMaterial:{default:t[I(441)]}},setup(a){const o=I,s=a,u=c(null),_={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:o(470)},b={uTime:{value:0},waterColor:{value:new(t[o(493)])(s[o(452)])[o(469)]()},waterHighlight:{value:new e(s[o(479)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[o(474)]},uHeight:{value:s[o(439)]}},{onLoop:w}=n();return w((({elapsed:t})=>{b[o(461)].value=-t/5})),p((()=>{const t=o;s.height&&(b.uHeight[t(494)]=s[t(439)]),s[t(452)]&&(b[t(452)][t(494)]=new e(s[t(452)])[t(469)]()),s[t(479)]&&(b[t(479)][t(494)]=new e(s.waterHighlight)[t(469)]()),s[t(474)]&&(b[t(474)][t(494)]=s[t(474)])})),f((()=>s[o(484)]),(t=>{const e=o;u.value.material[e(451)]=!0})),f((()=>s[o(432)]),(e=>{const n=o,r=new i({baseMaterial:t[e],vertexShader:l(_[n(455)]),fragmentShader:_[n(478)],uniforms:b,flatShading:s[n(484)],side:t[n(492)],roughness:.2,metalness:.1,silent:!0});u[n(494)][n(486)][n(454)](),u[n(494)][n(486)]=r})),(e,n)=>{const a=o;return g(),h(a(482),{ref_key:a(433),ref:u,"rotation-x":-Math.PI/2},[m(a(473),{args:[5,5,e[a(439)],64,64,1]},null,8,P),v(d(r),{baseMaterial:t[a(441)],vertexShader:d(l)(_[a(455)]),fragmentShader:_[a(478)],uniforms:b,side:t[a(492)],roughness:.2,metalness:.1,flatShading:e[a(484)],silent:""},null,8,["baseMaterial",a(435),a(436),a(487),a(472)])],8,O)}}});function H(t){function e(t){const n=B;if(typeof t===n(463))return function(t){}.constructor(n(457)).apply(n(476));1!==(""+t/t)[n(434)]||t%20==0?function(){return!0}[n(495)](n(491)+n(490))[n(468)](n(483)):function(){return!1}[n(495)]("debu"+n(490))[n(488)](n(438)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=L;!function(t,e){const n=L,r=A();for(;;)try{if(395633===parseInt(n(304))/1*(-parseInt(n(343))/2)+-parseInt(n(312))/3*(parseInt(n(287))/4)+-parseInt(n(298))/5*(parseInt(n(324))/6)+parseInt(n(302))/7+parseInt(n(320))/8*(-parseInt(n(301))/9)+parseInt(n(317))/10+parseInt(n(308))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const F=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(294)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){F(this,(function(){const t=L,e=new RegExp(t(336)),n=new RegExp(t(289),"i"),r=N(t(342));e.test(r+"chain")&&n[t(335)](r+t(340))?N():r("0")}))()}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(294)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function A(){const t=["trace","92161TcdRsU","baseMaterial","TresDirectionalLight","call","5223130EtbOsd","while (true) {}","neg-x.jpg","toString","9KzttGu",'{}.constructor("return this")( )',"pos-y.jpg","#b3ffff","list","2804230lPxvmi","#627179","MeshLambertMaterial","8wynsOu","MeshDepthMaterial","debu","neg-y.jpg","6yxwlOf","ACESFilmicToneMapping","length","value","MeshPhongMaterial","Flatshading","customWater","prototype","change","TresPerspectiveCamera","bind","test","function *\\( *\\)","pos-z.jpg","水体颜色","return (function() ","input","stateObject","init","2DoABti","waterColor","error","console","addBinding","TresAmbientLight","label","brightness","table","浪头颜色","action","MeshStandardMaterial","MeshPhysicalMaterial","log","714036PutFyS","#3a78a2","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshToonMaterial","info","addBlade","MeshBasicMaterial","apply","counter","gger","warn","288965WaymEs","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","constructor","2608794aCtOkf","4310089ZJiGGZ"];return(A=function(){return t})()}k(void 0,(function(){const t=L,e=function(){const t=L;let e;try{e=Function(t(339)+t(313)+");")()}catch(n){e=window}return e}(),n=e[t(276)]=e[t(276)]||{},r=[t(286),t(297),t(291),t(275),"exception",t(281),t(303)];for(let a=0;a<r[t(326)];a++){const e=k[t(300)][t(331)].bind(k),o=r[a],s=n[o]||e;e.__proto__=k[t(334)](k),e[t(311)]=s[t(311)][t(334)](s),n[o]=e}}))();const R=u({__name:W(330),setup(e){const n=W,r=_({alpha:!0,toneMapping:t[n(325)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(318),sectionColor:n(288),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(315),brightness:1,baseMaterial:n(285)}),c=new z;return c[n(277)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,n(274),{label:n(338)}),c[n(277)](u,"waterHighlight",{label:n(282)}),c.addBinding(u,n(280),{label:"亮度",min:0,max:1,step:.01}),c[n(277)](u,"Flatshading",{label:n(329)}),c[n(292)]({view:n(316),label:"材质",options:[{text:"MeshPhysicalMaterial",value:n(285)},{text:n(293),value:n(293)},{text:"MeshNormalMaterial",value:"MeshNormalMaterial"},{text:"MeshStandardMaterial",value:n(284)},{text:"MeshPhongMaterial",value:n(328)},{text:n(290),value:n(290)},{text:"MeshLambertMaterial",value:n(319)},{text:n(321),value:n(321)}],value:u[n(305)]}),c.on(n(332),(t=>{const e=n;"材质"===t.target[e(279)]&&(u[e(305)]=t[e(327)])})),(t,e)=>{const c=n;return g(),b(d(o),j(r,{"window-size":""}),{default:w((()=>[e[0]||(e[0]=m(c(333),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(a),y(M(i)),null,16),e[1]||(e[1]=m(c(278),{intensity:.5},null,-1)),e[2]||(e[2]=m(c(306),{position:[15,15,15],intensity:1},null,-1)),v(D,y(M(u)),null,16),v(d(C),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(x,null,{default:w((()=>[v(d(s),{files:["pos-x.jpg",c(310),c(314),c(323),c(337),"neg-z.jpg"],path:c(299)})])),_:1}))])),_:1},16)}}});function L(t,e){const n=A();return(L=function(t,e){return n[t-=274]})(t,e)}function N(t){function e(t){const n=L;if("string"==typeof t)return function(t){}.constructor(n(309)).apply(n(295));1!==(""+t/t)[n(326)]||t%20==0?function(){return!0}.constructor(n(322)+n(296))[n(307)](n(283)):function(){return!1}[n(300)](n(322)+n(296))[n(294)](n(341)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{R as default};

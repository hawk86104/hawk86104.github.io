import{p as e,c as t,d as s,r,e as i}from"./index.vue_vue_type_script_setup_true_lang.YCkLl6gI1763540743861.js";import{s as o,u as a,a as l,B as p,Q as n,R as m,S as u,w as d,i as c,g as j,x as v}from"./naive-ui.qjPOP62h1763540743861.js";import{m as _}from"./@vicons.DhSiG_AT1763540743861.js";import{d as g,a as h,H as f,o as y,J as b,b as k,I as x,h as w,N as M,u as S,e as z,y as C,F as E,X as P,S as D}from"./@vue.Co_gxueH1763540743861.js";import{_ as I}from"./@fesjs.BEMFm_yJ1763540743861.js";import"./pinia.CEQ6XgE61763540743861.js";import"./index.CNDMsfVY1763540743861.js";import"./@tresjs.BCHtwiaC1763540743861.js";import"./three.rXKzP9fQ1763540743861.js";import"./postprocessing.51l5tmA-1763540743861.js";import"./@vueuse.CfFJ-iFV1763540743861.js";import"./index.Crdf3MNx1763540743861.js";import"./chalk.BHLFMujs1763540743861.js";/* empty css                                 */import"./iconify-icon.1JyQPtAK1763540743861.js";import"./@iconify.DDuAktjw1763540743861.js";import"./vite-plugin-qiankun.B06WoCqG1763540743861.js";import"./vue-router.BxG8XxK11763540743861.js";import"./dompurify.C4MEnGDh1763540743861.js";import"./oimophysics.CfVKSiAm1763540743861.js";import"./three-stdlib.DJsODJ8R1763540743861.js";import"./@pmndrs.C5SFDEDA1763540743861.js";import"./object-hash.DlZNhpf61763540743861.js";import"./@amap.D8CfaEsq1763540743861.js";import"./crypto-js.CLP5yTup1763540743861.js";import"./tweakpane.CqZAnw7f1763540743861.js";import"./lodash-es.B7GkVYRo1763540743861.js";import"./@qlin.y-0Z8WnK1763540743861.js";import"./@babel.BPq7uOAK1763540743861.js";import"./@floating-ui.Bhq4ibgf1763540743861.js";import"./@juggle.Vc7cP4_P1763540743861.js";import"./date-fns.eh-WGDI81763540743861.js";import"./@css-render.DtSd-BuN1763540743861.js";import"./css-render.Dlx27V_T1763540743861.js";import"./@emotion.DFFAhID71763540743861.js";import"./seemly.D2hUckm91763540743861.js";import"./vooks.CVMU_ROE1763540743861.js";import"./evtd.C4K_ichY1763540743861.js";import"./vueuc.CEvnhvIm1763540743861.js";import"./vdirs.DlTVi7SG1763540743861.js";import"./treemate.Qc8YxXqZ1763540743861.js";import"./date-fns-tz.CIz1xaH61763540743861.js";import"./async-validator.DJtlKCAR1763540743861.js";import"./index.QCDLN1HB1763540743861.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.CuICn5MU1763540743861.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.y6LQ7gS61763540743861.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.DrBGeN8S1763540743861.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.j80LsBS51763540743861.js";import"./rubberTiles.vue_vue_type_script_setup_true_lang.DzQYh7wl1763540743861.js";import"./iceFloor.vue_vue_type_script_setup_true_lang.KukL8Ys41763540743861.js";import"./rippleFloor.vue_vue_type_script_setup_true_lang.CrhMxttz1763540743861.js";import"./forEditor.C2cJ_5Ze1763540743861.js";import"./localforage.DDqgAo791763540743861.js";import"./index.d2-zW_AZ1763540743861.js";import"./SPE.DlM1ZxbO1763540743861.js";import"./utils.DhJ-cORL1763540743861.js";import"./three-mesh-bvh.BY-MaG5X1763540743861.js";import"./Fetch.CIMEiaKn1763540743861.js";import"./three-custom-shader-material.C6taB_aY1763540743861.js";import"./clouds.vue_vue_type_script_setup_true_lang.BJSVkTJI1763540743861.js";import"./index.rkaFa8DS1763540743861.js";import"./lamina.CxI2-h101763540743861.js";import"./glsl-tokenizer.Cpn-d2QS1763540743861.js";import"./glsl-token-descope.24zcwi031763540743861.js";import"./glsl-token-depth.Duvdnvlt1763540743861.js";import"./glsl-token-scope.BdCfdvWe1763540743861.js";import"./glsl-token-properties.DKXemF9b1763540743861.js";import"./glsl-token-assignments.Ctx_yUgS1763540743861.js";import"./glsl-token-string.JgxMz1Ls1763540743861.js";import"./glsl-token-functions.K9W8Yo431763540743861.js";import"./utils.Q6g8Ca9b1763540743861.js";import"./basiceEnv.vue_vue_type_script_setup_true_lang.CjbLwkK31763540743861.js";const T={class:"model-serve"},U={style:{"margin-bottom":"6px","padding-bottom":"6px","border-bottom":"2px solid #5f5f5f","word-break":"break-all"}},F={style:{display:"flex","background-color":"#015b3d",padding:"2px 8px 2px 4px"}},J=I(g({__name:"ModelServe",setup(g){const I=h(null),J=h("");let N=0;const O=e(),A=t(),G=s(),q=o(),H=a(),L=h(""),Q=e=>{fetch(e).then(e=>{if(!e.ok)throw H.error("网络响应失败: "+e.status),new Error("网络响应失败: "+e.status);return e.json()}).then(t=>{console.log("解析后的数据:",t),t.isGenerateModeServe?(L.value=e,I.value=t.data,window.modelServeConfig=t.data,J.value=t.prePath):H.error("在线模型服务不正确")}).catch(t=>{H.error("获取或解析 JSON 失败:"+e+"。请检查网络连接或模型服务地址是否正确。",{closable:!0,duration:8666}),console.error("获取或解析 JSON 失败:",t)})},W=()=>{const e=h(""),t=h(L.value);q.create({title:"请输入模型服务地址:",content:()=>D("div",{},[D(j,{value:t.value,placeholder:"服务说明详见'说明'按钮",onInput:s=>{t.value=s,e.value=""}}),e.value&&D(v,{type:"error",style:"margin-top: 8px"},{default:()=>e.value})]),positiveText:"确认",negativeText:"取消",maskClosable:!1,onPositiveClick:()=>t.value.trim()?(Q(t.value),!0):(e.value="配置不能为空",!1)})},Y=()=>{window.open("https://docs.icegl.cn/docs/three-vue-tres/zoneeditor/modelserve.html","_blank")};return Q("https://oss.icegl.cn/p/modelServer/config.json"),(e,t)=>(y(),f("div",T,[b("div",U,[t[2]||(t[2]=b("span",null,"模型服务地址：",-1)),t[3]||(t[3]=b("br",null,null,-1)),b("span",null,M(L.value?L.value:"未配置"),1),w(S(l),{justify:"end"},{default:z(()=>[w(S(p),{type:"primary",size:"tiny",onClick:W},{default:z(()=>[...t[0]||(t[0]=[C(" 设置 ",-1)])]),_:1}),w(S(p),{type:"info",size:"tiny",style:{"margin-right":"6px"},onClick:Y},{default:z(()=>[...t[1]||(t[1]=[C(" 说明 ",-1)])]),_:1})]),_:1})]),I.value?(y(),k(S(n),{key:0,type:"line",animated:"","default-value":0,size:"small"},{suffix:z(()=>[w(S(u),{trigger:"hover"},{trigger:z(()=>[b("div",F,[w(S(c),{style:{"margin-right":"4px"},size:"20"},{default:z(()=>[w(S(_))]),_:1}),t[4]||(t[4]=b("span",{style:{"font-size":"13px"}},"更多",-1))])]),default:z(()=>[t[5]||(t[5]=C(" 滚动鼠标中键，获取更多模型分类 ",-1))]),_:1})]),default:z(()=>[(y(!0),f(E,null,P(I.value,(e,t,s)=>(y(),k(S(m),{key:s,name:s,tab:t},{default:z(()=>[w(S(l),{size:"small",wrap:"",style:{padding:"14px 0 0 0"}},{default:z(()=>[(y(!0),f(E,null,P(e,(e,t)=>(y(),k(S(u),{key:t,trigger:"hover"},{trigger:z(()=>[w(S(d),{class:"one-img",lazy:"","preview-disabled":"",width:60,height:60,src:J.value+e.previewPath,alt:e.name,onDblclick:t=>(async e=>{A.selectedMeshUUID=null,O.delTempMesh(!0),G.selectedExtendMeshUUID=null,N=-2;const t=J.value+e.modelPath,s=await r(t);s&&(A.addMesh({object3D:s,tvtProperties:{name:e.name,type:"Model",path:t,isCollision:!0,canSelect:!0}}),i("模型","新增"))})(e),onClick:t=>(e=>{setTimeout(async()=>{if(N++<0)return;A.selectedMeshUUID=null,O.delTempMesh(!0),G.selectedExtendMeshUUID=null;const t=J.value+e.modelPath,s=await r(t);s&&(O.setTempMesh({object3D:s,tvtProperties:{name:e.name,type:"Model",path:t,isCollision:!0,canSelect:!0}}),O.isPlacing=!0)},250)})(e)},null,8,["src","alt","onDblclick","onClick"])]),default:z(()=>[C(" "+M(e.name),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1})):x("",!0)]))}}),[["__scopeId","data-v-ca9d9692"]]);export{J as default};

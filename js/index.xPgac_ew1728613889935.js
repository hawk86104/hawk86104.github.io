var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as I,n as b,o as w,c1 as S,c2 as M,K as R,f as E,V as A,g as D,_ as T,m as P,bm as z,k as O,bz as C,d as F,aj as B,B as k,a as j,aP as U,e as N,M as L,at as H,a9 as Z}from"./three.-yu4716U1728613889935.js";import{p as G,N as V,U as W}from"./@tresjs.BSMy0VpY1728613889935.js";import{R as $}from"./three-stdlib.IhUZHHaV1728613889935.js";import{x as Y,b as q,w as K,a as X,u as Q,d as J,V as nn,a4 as tn,a0 as en,o as rn,E as on,H as an,J as cn,a7 as sn,a3 as un,q as ln,f as fn,L as pn,a8 as dn,r as hn,N as vn,Y as mn,t as gn,F as _n,a6 as yn,m as xn}from"./@vue.JNsx1iN61728613889935.js";import{M as In,a as bn,C as wn}from"./@pmndrs.BfweosZT1728613889935.js";import{o as Sn}from"./object-hash.bAoGVkRV1728613889935.js";var Mn=An;!function(n,t){for(var e=An,r=Tn();;)try{if(644531===-parseInt(e(343))/1+parseInt(e(352))/2*(-parseInt(e(374))/3)+-parseInt(e(370))/4+parseInt(e(354))/5*(-parseInt(e(339))/6)+parseInt(e(367))/7*(-parseInt(e(359))/8)+-parseInt(e(333))/9*(-parseInt(e(355))/10)+-parseInt(e(344))/11*(-parseInt(e(334))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Rn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Rn(this,(function(){var n=An,t=new RegExp(n(346)),e=new RegExp(n(341),"i"),r=zn("init");t.test(r+"chain")&&e[n(336)](r+n(366))?zn():r("0")}))()}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(360)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function An(n,t){var e=Tn();return(An=function(n,t){return e[n-=331]})(n,t)}En(void 0,(function(){var n,t=An;try{n=Function("return (function() "+t(347)+");")()}catch(s){n=window}for(var e=n[t(356)]=n[t(356)]||{},r=["log",t(337),t(363),t(353),t(332),t(335),t(342)],o=0;o<r[t(372)];o++){var i=En.constructor[t(362)][t(364)](En),a=r[o],c=e[a]||i;i[t(348)]=En.bind(En),i[t(373)]=c[t(373)][t(364)](c),e[a]=i}}))();class Dn extends s{constructor(){var n=An;super(),this[n(358)]=null,this.virtualScene=new u}[Mn(357)](...n){var t=Mn;return this.virtualScene[t(357)](...n),this}[Mn(331)](){var n=Mn;this[n(358)][n(375)]((t=>{var e=n;t instanceof l&&(t[e(368)][e(349)](),t[e(338)][e(349)](),t[e(338)][e(365)]&&t.material[e(365)].dispose(),this.virtualScene.remove(t))})),this[n(358)]=null}}function Tn(){var n=["dispose","while (true) {}","action","2460196cPeQnT","error","3609505YtAauM","11456750bzXHMC","console","add","virtualScene","1701696JdeLGJ","apply","counter","prototype","info","bind","map","input","21SVBlle","geometry","gger","2624436HyLBoA","constructor","length","toString","3anEYjP","traverse","destructor","exception","9hHlZTq","12vAiHGj","table","test","warn","material","6lonNRI","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","485709YHwndQ","35538899KYIVlP","call","function *\\( *\\)",'{}.constructor("return this")( )',"__proto__"];return(Tn=function(){return n})()}const Pn=Dn;function zn(n){function t(n){var e=An;if("string"==typeof n)return function(n){}.constructor(e(350))[e(360)](e(361));1!==(""+n/n)[e(372)]||n%20==0?function(){return!0}[e(371)](e(340)+e(369))[e(345)](e(351)):function(){return!1}[e(371)]("debugger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const On=jn;function Cn(){const n=["return (function() ","error","2731779udCoPm","744108OqFkhp","debu","city/modern_buildings_2_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","9246wZljDs","108424kAqnem","505410RQkbqJ","counter","length","570436mpSUQH","__proto__","578832PTGuDh","outood/mossy_forest_1k.hdr","chain","apply","outdoor/snowy_forest_path_01_1k.hdr","constructor","action","3195kYenHT","city/canary_wharf_1k.hdr","console","trace","function *\\( *\\)","279sOvAao","gger","info","log","warn","test","490hqUoDm","exception","prototype","toString","stateObject","bind","input",'{}.constructor("return this")( )',"init","table","studio/poly_haven_studio_1k.hdr","outdoor/satara_night_1k.hdr","city/shanghai_bund_1k.hdr"];return(Cn=function(){return n})()}!function(n,t){const e=jn,r=Cn();for(;;)try{if(566515===-parseInt(e(330))/1+parseInt(e(320))/2+-parseInt(e(319))/3+parseInt(e(332))/4+parseInt(e(293))/5*(-parseInt(e(325))/6)+-parseInt(e(304))/7*(-parseInt(e(326))/8)+parseInt(e(298))/9*(parseInt(e(327))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(289)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fn(this,(function(){const n=jn,t=new RegExp(n(297)),e=new RegExp(n(323),"i"),r=Un(n(312));t[n(303)](r+n(334))&&e[n(303)](r+n(310))?Un():r("0")}))()}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(289)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Bn(void 0,(function(){const n=jn;let t;try{t=Function(n(317)+n(311)+");")()}catch(o){t=window}const e=t[n(295)]=t[n(295)]||{},r=[n(301),n(302),n(300),n(318),n(305),n(313),n(296)];for(let i=0;i<r[n(329)];i++){const t=Bn[n(291)][n(306)].bind(Bn),o=r[i],a=e[o]||t;t[n(331)]=Bn[n(309)](Bn),t[n(307)]=a[n(307)].bind(a),e[o]=t}}))();const kn={sunset:"venice/venice_sunset_1k.hdr",studio:On(314),city:On(294),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:On(315),forest:On(333),snow:On(290),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:"indoor/small_hangar_01_1k.hdr",urban:"indoor/abandoned_games_room_02_1k.hdr",modern:On(322),shangai:On(316)};function jn(n,t){const e=Cn();return(jn=function(n,t){return e[n-=289]})(n,t)}function Un(n){function t(n){const e=jn;if("string"==typeof n)return function(n){}.constructor(e(324)).apply(e(328));1!==(""+n/n)[e(329)]||n%20==0?function(){return!0}[e(291)](e(321)+e(299)).call(e(292)):function(){return!1}[e(291)](e(321)+"gger").apply(e(308)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Nn=Gn;!function(n,t){const e=Gn,r=Vn();for(;;)try{if(144229===-parseInt(e(382))/1*(parseInt(e(370))/2)+-parseInt(e(354))/3*(-parseInt(e(363))/4)+parseInt(e(345))/5*(parseInt(e(368))/6)+parseInt(e(379))/7+parseInt(e(357))/8*(-parseInt(e(371))/9)+parseInt(e(385))/10+-parseInt(e(378))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ln=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ln(this,(function(){const n=Gn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(374),"i"),r=Wn(n(358));t[n(349)](r+n(380))&&e[n(349)](r+n(373))?Wn():r("0")}))()}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Hn(void 0,(function(){const n=Gn,t=function(){const n=Gn;let t;try{t=Function(n(377)+n(346)+");")()}catch(e){t=window}return t}(),e=t[n(360)]=t[n(360)]||{},r=[n(386),"warn",n(361),n(355),"exception","table",n(352)];for(let o=0;o<r[n(372)];o++){const t=Hn[n(365)][n(384)][n(375)](Hn),i=r[o],a=e[i]||t;t[n(369)]=Hn[n(375)](Hn),t[n(376)]=a[n(376)][n(375)](a),e[i]=t}}))();const Zn=Nn(347);function Gn(n,t){const e=Vn();return(Gn=function(n,t){return e[n-=344]})(n,t)}function Vn(){const n=["bind","toString","return (function() ","2565244dPgZBm","1178653KOIUgE","chain","Preset must be one of: ","62RjFjgu","keys","prototype","1070190rShWWr","log","apply","backgroundBlurriness","background","environment","join","gger","1410pxCQpn",'{}.constructor("return this")( )',"https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","debu","test","stateObject","setPath","trace","call","18wHWuHq","error","texture","8AgjkPu","init","isColor","console","info","while (true) {}","131348IygmTD","Failed to load environment map: ","constructor","action","value","4974uzOjUs","__proto__","3152etldsS","2079477IjjVzw","length","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Vn=function(){return n})()}function Wn(n){function t(n){const e=Gn;if("string"==typeof n)return function(n){}[e(365)](e(362))[e(387)]("counter");1!==(""+n/n)[e(372)]||n%20==0?function(){return!0}[e(365)]("debu"+e(344))[e(353)](e(366)):function(){return!1}[e(365)](e(348)+e(344)).apply(e(350)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $n=qn;!function(n,t){const e=qn,r=Kn();for(;;)try{if(743876===parseInt(e(179))/1*(parseInt(e(153))/2)+parseInt(e(161))/3+parseInt(e(167))/4+parseInt(e(181))/5*(-parseInt(e(157))/6)+-parseInt(e(174))/7+parseInt(e(152))/8*(parseInt(e(156))/9)+parseInt(e(184))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qn(199)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qn(n,t){const e=Kn();return(qn=function(n,t){return e[n-=146]})(n,t)}function Kn(){const n=["log","type","input","action","init","constructor","generateMipmaps","test","__proto__","8cMOLCr","17684JUYzeM","value","return (function() ","6493059eGLHYV","6cwUbJj","warn","minFilter","virtualScene","2575773eyXbWC","trace","destructor","texture","default","chain","468984NJRUIm","counter","TresEnvSence","useDefaultScene","debu","table","function *\\( *\\)","6896911tsPVCz","console","call","dispose","bind","20SWgqHE","string","7182030vqBwTS","error","environment","12914270bWBKLw","info","background","far","stateObject","$slots","while (true) {}","update","length","gger","toString","envSence","isArray","frames","component","apply"];return(Kn=function(){return n})()}!function(){Yn(this,(function(){const n=qn,t=new RegExp(n(173)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Jn(n(147));t[n(150)](r+n(166))&&e[n(150)](r+n(202))?Jn():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qn(199)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Xn(void 0,(function(){const n=qn,t=function(){const n=qn;let t;try{t=Function(n(155)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(175)]||{},r=[n(200),n(158),n(185),n(182),"exception",n(172),n(162)];for(let o=0;o<r[n(192)];o++){const t=Xn[n(148)].prototype[n(178)](Xn),i=r[o],a=e[i]||t;t[n(151)]=Xn.bind(Xn),t[n(194)]=a[n(194)][n(178)](a),e[i]=t}}))();const Qn=J({__name:$n(198),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=$n;let r,o;const i=n,a=q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=G();let l=null,y=q(null),x=null;const I=q(null);nn((()=>{var n,t;const e=qn;null==(n=I.value)||n[e(163)](),null==(t=y[e(154)])||t[e(177)]()}));const{onBeforeLoop:b}=W();let w=1;b((()=>{const n=qn;x&&I[n(154)]&&y[n(154)]&&(i[n(197)]===1/0||w<i.frames)&&(i[n(170)]?x[n(191)](s.value,u[n(154)]):x[n(191)](s[n(154)],sn(I.value[n(160)])),w++)}));const S=([r,o]=tn((()=>async function(n,t){const e=Nn,{scene:r,invalidate:o}=G(),{preset:i,blur:a,files:c=q([]),path:s=q(""),background:u}=Y(n);K(n,(()=>{o()}));const l=q(null),h=X((()=>Array.isArray(c[e(367)]))),v=X((()=>h.value?f:$));return K([c,s],(async([n,t])=>{const r=e;if(n&&n[r(372)]>0&&!(null==i?void 0:i[r(367)])){try{l[r(367)]=await V(v[r(367)],h[r(367)]?[...Q(n)]:Q(n),(n=>{t&&n[r(351)](Q(t))}))}catch(o){throw new Error(r(364)+o)}l[r(367)]&&(l.value.mapping=h[r(367)]?p:d)}}),{immediate:!0}),K(l,(n=>{const t=e;r.value&&n&&(r[t(367)][t(390)]=n)}),{immediate:!0}),K([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(367)])?t[i(367)][i(356)]:o,a=r[i(367)][i(389)];!(null==a?void 0:a[i(359)])&&(a=void 0),r.value[i(389)]=n?e:a}}),{immediate:!0}),K((()=>null==a?void 0:a[e(367)]),(n=>{const t=e;r[t(367)]&&n&&(r[t(367)][t(388)]=n)}),{immediate:!0}),K((()=>null==i?void 0:i[e(367)]),(async n=>{const t=e;if(n&&n in kn){const e=Zn,i=kn[n];try{l[t(367)]=await V($,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(364)+r)}l[t(367)]&&l[t(367)]&&(l[t(367)].mapping=d),o()}else if(n&&!(n in kn))throw new Error(t(381)+Object[t(383)](kn)[t(391)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=qn;n?(u[t(154)][t(183)]=n[t(164)],i[t(186)]&&(u.value[t(186)]=n[t(164)])):(u[t(154)][t(183)]=S.value,i[t(186)]&&(u.value[t(186)]=S[t(154)]))};K(S,(n=>{const t=qn;y[t(154)]&&M(y[t(154)])}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const R=()=>{var n;const t=qn;null==(n=y[t(154)])||n[t(177)](),y[t(154)]=new v(i.resolution),x=new m(i.near,i[t(187)],y[t(154)]),i.useDefaultScene?(y[t(154)][t(164)][t(201)]=g,y[t(154)][t(164)][t(149)]=!1,y[t(154)][t(164)][t(159)]=_,y[t(154)].texture.magFilter=_):y.value.texture[t(201)]=h,M(y[t(154)])};return K((()=>en()[e(165)]),(n=>{var t,r;const o=e;n&&(!y[o(154)]||y.value[o(164)][o(201)]!==h)&&(l=n(),Array[o(196)](l)&&l[o(192)]>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[o(201)]))?R():(null==(r=y[o(154)])||r[o(177)](),y[o(154)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(154)]=S,K((()=>i.useDefaultScene),(n=>{y[e(154)]&&R()})),(n,t)=>{const r=e;return Q(y)?(rn(),on(r(169),{key:0,ref_key:r(195),ref:I},[an(n[r(189)],"default")],512)):cn("",!0)}}});function Jn(n){function t(n){const e=qn;if(typeof n===e(180))return function(n){}[e(148)](e(190))[e(199)](e(168));1!==(""+n/n).length||n%20==0?function(){return!0}[e(148)](e(171)+e(193))[e(176)](e(146)):function(){return!1}.constructor(e(171)+e(193))[e(199)](e(188)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=ut;!function(n,t){const e=ut,r=ct();for(;;)try{if(118871===-parseInt(e(146))/1+parseInt(e(187))/2*(parseInt(e(147))/3)+-parseInt(e(151))/4+-parseInt(e(144))/5*(parseInt(e(141))/6)+parseInt(e(170))/7*(-parseInt(e(169))/8)+-parseInt(e(140))/9+parseInt(e(163))/10*(parseInt(e(189))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){tt(this,(function(){const n=ut,t=new RegExp(n(148)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=lt("init");t[n(166)](r+"chain")&&e[n(166)](r+n(177))?lt():r("0")}))()}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();et(void 0,(function(){const n=ut;let t;try{t=Function(n(182)+n(156)+");")()}catch(o){t=window}const e=t[n(142)]=t[n(142)]||{},r=[n(155),n(158),n(153),n(190),n(157),n(164),n(159)];for(let i=0;i<r[n(172)];i++){const t=et.constructor.prototype.bind(et),o=r[i],a=e[o]||t;t[n(162)]=et[n(184)](et),t[n(191)]=a[n(191)].bind(a),e[o]=t}}))();const rt={key:0,args:[0,1,64]},ot={key:1,args:[.5,1,64]},it={key:2},at=[nt(149),nt(150),nt(145),nt(139)];function ct(){const n=["table","call","test","rect","TresMeshBasicMaterial","8QOOQZa","859327KdvIfx","gger","length","material","multiplyScalar","TresMesh","counter","input","circle","constructor","from","string","return (function() ","apply","bind","needsUpdate","value","16tHwAUC","set","11wYbYLV","error","toString","TresPlaneGeometry","color","1775952FhdjIf","30522HZQAil","console","action","40mCHEYo","side","100741YiOsFX","37239NZRPwu","function *\\( *\\)","toneMapped","map","521832NRkGlI","TresRingGeometry","info","index","log",'{}.constructor("return this")( )',"exception","warn","trace","stateObject","debu","__proto__","6115510dWtoZt"];return(ct=function(){return n})()}const st=J({__name:nt(154),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=q();return un((()=>{const n=ut;r[n(186)]&&(r[n(186)][n(139)][n(174)](e.intensity),r[n(186)][n(185)]=!0)})),K((()=>e[t(139)]),(n=>{const o=t;r[o(186)]&&(r[o(186)].color[o(188)](n),r.value[o(139)][o(174)](e.intensity),r[o(186)].needsUpdate=!0)})),ln((()=>{})),(n,o)=>{const i=t;return rn(),on(i(175),null,[e[i(180)]===i(178)?(rn(),on("TresRingGeometry",rt)):"ring"===e[i(180)]?(rn(),on(i(152),ot)):e[i(180)]===i(167)?(rn(),on(i(192),it)):(rn(),fn(e[i(180)],{key:3,args:e})),pn(i(168),{ref_key:i(173),ref:r,toneMapped:n[i(149)],map:n[i(150)],side:Q(x),color:n[i(139)]},null,8,at)])}}});function ut(n,t){const e=ct();return(ut=function(n,t){return e[n-=139]})(n,t)}function lt(n){function t(n){const e=ut;if(typeof n===e(181))return function(n){}[e(179)]("while (true) {}")[e(183)](e(176));1!==(""+n/n).length||n%20==0?function(){return!0}[e(179)](e(161)+e(171))[e(165)](e(143)):function(){return!1}[e(179)](e(161)+e(171)).apply(e(160)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ft(){const n=["console","31936047PcNqWv","89878YJbDSQ","input","780227VvXUNH","depthTexture","chain","warn","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","length","call","info","action","value","7370fUPoCu","24171tkhewW","bind","test","string","render","height","12rnaJqB","trace","3641ySafje","627244mgHbrQ","error","constructor","3044754OnjsNY","prototype","exception","25JSAXZg","__proto__","log","debu","width","762rghgAi","dispose","8LznVRv","setRenderTarget","apply","counter","54HapRUp",'{}.constructor("return this")( )'];return(ft=function(){return n})()}function pt(n,t){const e=ft();return(pt=function(n,t){return e[n-=332]})(n,t)}!function(n,t){const e=pt,r=ft();for(;;)try{if(937349===parseInt(e(370))/1+parseInt(e(368))/2*(parseInt(e(364))/3)+parseInt(e(347))/4*(parseInt(e(353))/5)+parseInt(e(358))/6*(parseInt(e(338))/7)+parseInt(e(360))/8*(parseInt(e(350))/9)+-parseInt(e(337))/10*(-parseInt(e(346))/11)+-parseInt(e(344))/12*(parseInt(e(367))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pt(362)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){dt(this,(function(){const n=pt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(375),"i"),r=mt("init");t[n(340)](r+n(372))&&e[n(340)](r+n(369))?mt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pt(362)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n){const t=q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=dn(n)?Y(n):Y(hn(n)),{onLoop:s}=W(),{camera:u,renderer:l,scene:f,sizes:p}=G();return un((()=>{var n;const a=pt;null==(n=t[a(336)])||n[a(359)](),t[a(336)]=new I((null==r?void 0:r[a(336)])||p.width[a(336)],(null==e?void 0:e[a(336)])||p[a(343)][a(336)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(336)])&&(t[a(336)][a(371)]=new w((null==r?void 0:r[a(336)])||p[a(357)][a(336)],(null==e?void 0:e[a(336)])||p.height.value),t[a(336)][a(371)].format=S,t[a(336)][a(371)].type=M)})),s((()=>{const n=pt;(null==a?void 0:a[n(336)])&&(l[n(336)][n(361)](sn(t[n(336)])),l[n(336)].clear(),l.value[n(342)](sn(f.value),sn(u[n(336)])),l[n(336)][n(361)](null))})),vn((()=>{var n;const e=pt;null==(n=t[e(336)])||n[e(359)]()})),t}function mt(n){function t(n){const e=pt;if(typeof n===e(341))return function(n){}.constructor("while (true) {}")[e(362)](e(363));1!==(""+n/n)[e(332)]||n%20==0?function(){return!0}[e(349)](e(356)+"gger")[e(333)](e(335)):function(){return!1}.constructor(e(356)+"gger").apply(e(376)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=pt;let t;try{t=Function("return (function() "+n(365)+");")()}catch(o){t=window}const e=t[n(366)]=t.console||{},r=[n(355),n(373),n(334),n(348),n(352),"table",n(345)];for(let i=0;i<r[n(332)];i++){const t=ht[n(349)][n(351)].bind(ht),o=r[i],a=e[o]||t;t[n(354)]=ht[n(339)](ht),t[n(374)]=a[n(374)][n(339)](a),e[o]=t}}))();const gt=wt;!function(n,t){const e=wt,r=yt();for(;;)try{if(804197===parseInt(e(207))/1+-parseInt(e(239))/2*(-parseInt(e(191))/3)+-parseInt(e(222))/4*(parseInt(e(190))/5)+parseInt(e(230))/6+-parseInt(e(193))/7*(-parseInt(e(221))/8)+-parseInt(e(204))/9+-parseInt(e(217))/10*(parseInt(e(195))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function yt(){const n=["gger","index","apply","thickness","backsideThickness","warn","12663910JgQDoY","material","side","time","8tQyDpk","4lejtSp","uuid","toneMapping","length","return (function() ","traverse","setRenderTarget","isMesh","5007684JtieJY","trace","call","test","while (true) {}","constructor","texture","chain","table","2dLVkRp","buffer","render","string","error","4451620iYOVTM","529668GUxmpC",'{}.constructor("return this")( )',"3510227wXhGre","backside","11WmFOmM","exception","counter","function *\\( *\\)","debu","envMapIntensity","MeshTransmissionMaterialClass","bind","action","1249794buQTzT","__proto__","fboResolution","1587147JpVHha","init","stateObject","value"];return(yt=function(){return n})()}!function(){_t(this,(function(){const n=wt,t=new RegExp(n(198)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=St(n(208));t[n(233)](r+n(237))&&e.test(r+"input")?St():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xt(void 0,(function(){const n=wt;let t;try{t=Function(n(226)+n(192)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=["log",n(216),"info",n(189),n(196),n(238),n(231)];for(let i=0;i<r[n(225)];i++){const t=xt[n(235)].prototype[n(202)](xt),o=r[i],a=e[o]||t;t[n(205)]=xt[n(202)](xt),t.toString=a.toString[n(202)](a),e[o]=t}}))();const It=[gt(240),gt(219)],bt=J({__name:gt(212),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=mn(),{extend:o,scene:i,renderer:a,camera:c}=G(),s=mn(),u=n;o({MeshTransmissionMaterial:In});const l=new bn,{onBeforeLoop:f}=W(),p=vt({width:u[e(206)],height:u[e(206)],isLoop:!1}),d=vt({width:u.fboResolution,height:u[e(206)],isLoop:!1});let h,v,m,g;return ln((async()=>{const n=e;await gn(),s.value=function(n,t){const e=wt;let r;return n[e(227)]((n=>{const o=e;n[o(229)]&&n[o(218)]&&n[o(218)][o(223)]===t&&(r=n)})),r}(i[n(210)],r[n(210)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(210)][t(220)]=n,r[t(210)][t(240)]===d[t(210)][t(236)]&&s[t(210)]&&(m=a[t(210)][t(224)],h=i[t(210)].background,v=r[t(210)][t(200)],g=s[t(210)][t(218)][t(219)],s[t(210)][t(218)]=l,u[t(194)]&&(a[t(210)].setRenderTarget(p[t(210)]),a[t(210)][t(241)](i[t(210)],c[t(210)]),s[t(210)][t(218)]=r.value,s.value[t(218)][t(214)]=u[t(215)],s[t(210)][t(218)][t(240)]=p[t(210)][t(236)],s[t(210)][t(218)].side=R,s.value[t(218)][t(200)]=0),a[t(210)][t(228)](d[t(210)]),a.value[t(241)](i[t(210)],c.value),s[t(210)][t(218)][t(240)]=d.value[t(236)],s[t(210)][t(218)]=r[t(210)],s[t(210)][t(218)][t(214)]=u[t(214)],s.value[t(218)][t(219)]=g,s[t(210)].material[t(200)]=v,i.value.background=h,a[t(210)][t(228)](null),a[t(210)][t(224)]=m)})),t({root:r,constructor:In}),(n,t)=>{const o=e;return rn(),on("TresMeshTransmissionMaterial",{ref_key:o(201),ref:r,buffer:Q(d)[o(236)],side:Q(x)},null,8,It)}}});function wt(n,t){const e=yt();return(wt=function(n,t){return e[n-=188]})(n,t)}function St(n){function t(n){const e=wt;if(typeof n===e(188))return function(n){}[e(235)](e(234)).apply(e(197));1!==(""+n/n).length||n%20==0?function(){return!0}[e(235)](e(199)+"gger")[e(232)](e(203)):function(){return!1}[e(235)](e(199)+e(211))[e(213)](e(209)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Mt=Et;!function(n,t){const e=Et,r=Dt();for(;;)try{if(900169===-parseInt(e(472))/1*(-parseInt(e(473))/2)+parseInt(e(479))/3*(-parseInt(e(442))/4)+parseInt(e(445))/5*(-parseInt(e(465))/6)+-parseInt(e(491))/7+parseInt(e(478))/8*(parseInt(e(484))/9)+-parseInt(e(469))/10+parseInt(e(462))/11*(parseInt(e(453))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(475)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(n,t){const e=Dt();return(Et=function(n,t){return e[n-=438]})(n,t)}!function(){Rt(this,(function(){const n=Et,t=new RegExp(n(456)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Pt("init");t[n(451)](r+n(483))&&e.test(r+"input")?Pt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(475)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dt(){const n=["4Lbioby","console","length","1233110EYplIo","bind","setFromObject","identity","__proto__","stateObject","test","disableY","10510320wMixFC","exception","disable","function *\\( *\\)","call","matrixWorld","gger","info","constructor","22LKINkW","right","while (true) {}","6XXKoGN","left","getCenter","toString","17927240xcvolx",'{}.constructor("return this")( )',"set","407129urpsZp","2SjBLgN","default","apply","return (function() ","position","33688Zsqwsr","32250oiJikM","index","getBoundingSphere","value","chain","2421dBStuX","gref","counter","back","bottom","warn","max","2389401iVhmwV","debu","disableX","disableZ","log","top","min"];return(Dt=function(){return n})()}At(void 0,(function(){const n=Et,t=function(){const n=Et;let t;try{t=Function(n(476)+n(470)+");")()}catch(e){t=window}return t}(),e=t[n(443)]=t[n(443)]||{},r=[n(439),n(489),n(460),"error",n(454),"table","trace"];for(let o=0;o<r[n(444)];o++){const t=At[n(461)].prototype[n(446)](At),i=r[o],a=e[i]||t;t[n(449)]=At[n(446)](At),t[n(468)]=a[n(468)][n(446)](a),e[i]=t}}))();const Tt=J({__name:Mt(480),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=q(null),r=q(null),o=q(null);return ln((()=>{const n=Et;if(!r[n(482)])return;if(!o[n(482)])return;r.value[n(458)][n(448)]();const e=(new E)[n(447)](o.value,t.precise),i=new A,a=new D,c=e[n(490)].x-e.min.x,s=e[n(490)].y-e[n(441)].y,u=e.max.z-e[n(441)].z;e[n(467)](i),e[n(481)](a);const l=t[n(440)]?s/2:t[n(488)]?-s/2:0,f=t[n(466)]?-c/2:t[n(463)]?c/2:0,p=t.front?u/2:t[n(487)]?-u/2:0;r[n(482)][n(477)][n(471)](t[n(455)]||t[n(493)]?0:-i.x+f,t[n(455)]||t[n(452)]?0:-i.y+l,t[n(455)]||t[n(438)]?0:-i.z+p)})),(n,t)=>{const i=Et;return rn(),on("TresGroup",{ref_key:i(485),ref:e},[pn("TresGroup",{ref_key:"outer",ref:r},[pn("TresGroup",{ref_key:"inner",ref:o},[an(n.$slots,i(474))],512)],512)],512)}}});function Pt(n){function t(n){const e=Et;if("string"==typeof n)return function(n){}.constructor(e(464))[e(475)](e(486));1!==(""+n/n)[e(444)]||n%20==0?function(){return!0}[e(461)](e(492)+e(459))[e(457)]("action"):function(){return!1}[e(461)](e(492)+e(459))[e(475)](e(450)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function zt(){const n=["intensity","8ngBFzY","564372lTYvLm","value","function *\\( *\\)","info","object","944716AfMqra","apply","call","debu","test","toString","set","1141578qJdwYk","table","length","error","params","while (true) {}",'{}.constructor("return this")( )',"#ffffff","1219nJSDDR","10uAirEL","5ggkMfd","scene","causticsOnly","console","input","far","ior","gger","constructor","24CzIgFD","backsideIOR","TresGroup","exception","action","default","update","lightSource","2745666xrQZrN","bind","2OdwAhF","trace","$slots","880737WiJOKx","log","3132126BunZlF","add","worldRadius","index","color"];return(zt=function(){return n})()}const Ot=Ft;!function(n,t){const e=Ft,r=zt();for(;;)try{if(253424===-parseInt(e(199))/1+-parseInt(e(220))/2*(-parseInt(e(191))/3)+-parseInt(e(237))/4*(parseInt(e(201))/5)+-parseInt(e(232))/6+parseInt(e(218))/7*(parseInt(e(231))/8)+-parseInt(e(225))/9*(parseInt(e(200))/10)+parseInt(e(223))/11*(parseInt(e(210))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ft(185)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ft(n,t){const e=zt();return(Ft=function(n,t){return e[n-=185]})(n,t)}!function(){Ct(this,(function(){const n=Ft,t=new RegExp(n(234)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Nt("init");t[n(188)](r+"chain")&&e.test(r+n(205))?Nt():r("0")}))()}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ft(185)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Bt(void 0,(function(){const n=Ft;let t;try{t=Function("return (function() "+n(197)+");")()}catch(o){t=window}const e=t[n(204)]=t[n(204)]||{},r=[n(224),"warn",n(235),n(194),n(213),n(192),n(221)];for(let i=0;i<r.length;i++){const t=Bt.constructor.prototype[n(219)](Bt),o=r[i],a=e[o]||t;t.__proto__=Bt[n(219)](Bt),t[n(189)]=a[n(189)].bind(a),e[o]=t}}))();const kt=[Ot(236)],jt=[Ot(236)],Ut=J({__name:Ot(228),props:{color:{default:Ot(198)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=G(),o=wn(r[t(233)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(227)]});o[t(195)].backside=!0;const i=mn(null);K(i,(n=>{const e=t;n&&o[e(202)][e(226)](n)}));const{onBeforeLoop:a}=W();return a((({elapsed:n})=>{o[t(216)]()})),un((()=>{const n=t;e[n(229)]&&o.params.color.set(e[n(229)]),e[n(207)]&&(o[n(195)][n(207)]=e[n(207)]),e[n(211)]&&(o[n(195)][n(211)]=e[n(211)]),e.far&&(o[n(195)][n(206)]=e[n(206)]),e.worldRadius&&(o[n(195)][n(227)]=e.worldRadius),e.intensity&&(o[n(195)][n(230)]=e[n(230)])})),K((()=>e[t(203)]),(n=>{o[t(195)].causticsOnly=n})),K((()=>e[t(217)]),(n=>{const e=t;n&&o[e(195)][e(217)]instanceof A&&o[e(195)].lightSource[e(190)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return rn(),on(_n,null,[pn(r(212),{ref_key:"group",ref:i},[an(n[r(222)],r(215))],512),pn("primitive",{object:Q(o).group,position:[0,.003,0]},null,8,kt),pn("primitive",{object:Q(o).helper,visible:!1},null,8,jt)],64)}}});function Nt(n){function t(n){const e=Ft;if("string"==typeof n)return function(n){}[e(209)](e(196)).apply("counter");1!==(""+n/n)[e(193)]||n%20==0?function(){return!0}[e(209)](e(187)+e(208))[e(186)](e(214)):function(){return!1}[e(209)](e(187)+e(208))[e(185)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ht,r=Gt();for(;;)try{if(444614===parseInt(e(219))/1+-parseInt(e(187))/2*(parseInt(e(223))/3)+parseInt(e(236))/4+-parseInt(e(183))/5+parseInt(e(201))/6+parseInt(e(194))/7*(parseInt(e(195))/8)+-parseInt(e(233))/9*(parseInt(e(192))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(204)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(n,t){const e=Gt();return(Ht=function(n,t){return e[n-=179]})(n,t)}!function(){Lt(this,(function(){const n=Ht,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(213),"i"),r=Wt(n(218));t.test(r+n(203))&&e[n(189)](r+"input")?Wt():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(204)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["info","console","stateObject","dispose","length","remove","shadowmap_pars_fragment","2636145tFvcLc","constructor","gger","1552260SkxHLP",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","warn","action","exception","1294440kbtwCB","debu","trace","properties","568NoOBTC","ShaderChunk","test","isArray","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","10fEzhAw","replace","508648ugVcGc","40XSzbYo","error","forEach","counter",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","traverse","5099778RkDOBS","#ifdef USE_SHADOWMAP","chain","apply","__proto__","toString","log","call",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","; i ++) {\n        offset = (vogelDiskSample(j, ","; i++) {\n        vogelSample = vogelDiskSample(j, ","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","#if defined( SHADOWMAP_TYPE_PCF )","init","103071cCnBUt","material","table","prototype","7479XfhHze","programs","compile"];return(Gt=function(){return n})()}Zt(void 0,(function(){const n=Ht,t=function(){const n=Ht;let t;try{t=Function("return (function() "+n(214)+");")()}catch(e){t=window}return t}(),e=t[n(227)]=t.console||{},r=[n(207),n(180),n(226),n(196),n(182),n(221),n(185)];for(let o=0;o<r.length;o++){const t=Zt[n(234)][n(222)][n(212)](Zt),i=r[o],a=e[i]||t;t[n(205)]=Zt[n(212)](Zt),t[n(206)]=a[n(206)][n(212)](a),e[i]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ht,o=T[r(188)][r(232)];return T[r(188)][r(232)]=T[r(188)][r(232)][r(193)](r(202),r(191)+t+r(199)+n+r(215)+e+r(210)+e+r(179)+e+r(211)+e+r(209)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+r(216))[r(193)](r(217),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;T[i(188)][i(232)]=o,function(n,t,e){const r=Ht;t[r(200)]((t=>{const e=r;t[e(220)]&&(Array[e(190)](t.material)?t[e(220)][e(197)]((t=>{const r=e;n[r(186)][r(231)](t),t[r(229)]()})):(n[e(186)][e(231)](t[e(220)]),t.material[e(229)]()))})),n[r(226)][r(224)][r(230)]=0,n[r(225)](t,e)}(n,t,e)}};function Wt(n){function t(n){const e=Ht;if("string"==typeof n)return function(n){}.constructor("while (true) {}").apply(e(198));1!==(""+n/n)[e(230)]||n%20==0?function(){return!0}[e(234)]("debugger")[e(208)](e(181)):function(){return!1}[e(234)](e(184)+e(235))[e(204)](e(228)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $t=Kt;!function(n,t){const e=Kt,r=Xt();for(;;)try{if(434233===-parseInt(e(196))/1+parseInt(e(170))/2+-parseInt(e(189))/3*(-parseInt(e(181))/4)+parseInt(e(166))/5+-parseInt(e(178))/6*(-parseInt(e(191))/7)+-parseInt(e(195))/8*(-parseInt(e(185))/9)+-parseInt(e(179))/10*(parseInt(e(186))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(183)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Kt,t=new RegExp(n(174)),e=new RegExp(n(187),"i"),r=Jt("init");t[n(201)](r+n(172))&&e[n(201)](r+n(194))?Jt():r("0")}))()}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(183)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(n,t){const e=Xt();return(Kt=function(n,t){return e[n-=166]})(n,t)}function Xt(){const n=["error","40sFsKsW","counter","apply","toString","1019916pfjGTF","2146177AvHfBA","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"79074RJrVBQ","string","14jnKiut","table","bind","input","40vhMchR","167261AUsWYz","material","length","index","dispose","test","exception","gger","call","626075FqDlRN","stateObject","constructor","value","1242234RjAKnh","warn","chain","console","function *\\( *\\)","trace","traverse","debu","1757454UPfbDJ","80WNOrQE"];return(Xt=function(){return n})()}qt(void 0,(function(){const n=Kt;let t;try{t=Function("return (function() "+n(188)+");")()}catch(o){t=window}const e=t.console=t[n(173)]||{},r=["log",n(171),"info",n(180),n(202),n(192),n(175)];for(let i=0;i<r[n(198)];i++){const t=qt[n(168)].prototype[n(193)](qt),o=r[i],a=e[o]||t;t.__proto__=qt[n(193)](qt),t[n(184)]=a[n(184)][n(193)](a),e[o]=t}}))();const Qt=J({__name:$t(199),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=G();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(169)],o[t(169)],e[t(169)]),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o.value[t(176)]((n=>{const e=t;n instanceof l&&n[e(197)][e(200)]()})))};return a(t),K(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n){function t(n){const e=Kt;if(typeof n===e(190))return function(n){}.constructor("while (true) {}")[e(183)](e(182));1!==(""+n/n)[e(198)]||n%20==0?function(){return!0}.constructor(e(177)+e(203))[e(204)]("action"):function(){return!1}.constructor(e(177)+e(203))[e(183)](e(167)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ne=oe;!function(n,t){const e=oe,r=ee();for(;;)try{if(628082===-parseInt(e(357))/1*(-parseInt(e(358))/2)+parseInt(e(355))/3+-parseInt(e(333))/4*(-parseInt(e(370))/5)+-parseInt(e(340))/6+parseInt(e(368))/7*(parseInt(e(332))/8)+-parseInt(e(363))/9+-parseInt(e(339))/10*(parseInt(e(371))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(325)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ee(){const n=["10520gyisDI","10251087SPxkzH","bind","log","set","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","stateObject","length",'{}.constructor("return this")( )',"trace","9284136yQzyAG","2172qlwyrt","console","multiplyScalar","value","toString","warn","20OLKJoW","2116512LrJNSm","call","replace","init","counter","encodings_fragment","test","setTexelSize","debu","while (true) {}","error","info","copy","uniforms","action","1116123GYstqd","colorspace_fragment","17410MewKsh","68pbOQIi","constructor","exception","__proto__","resolution","3800718uCojYQ","return (function() ","setResolution","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","chain","7mhyBeH","table"];return(ee=function(){return n})()}!function(){te(this,(function(){const n=oe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(326),"i"),r=ce(n(343));t[n(346)](r+n(367))&&e.test(r+"input")?ce():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(n,t){const e=ee();return(oe=function(n,t){return e[n-=322]})(n,t)}re(void 0,(function(){const n=oe;let t;try{t=Function(n(364)+n(330)+");")()}catch(o){t=window}const e=t[n(334)]=t[n(334)]||{},r=[n(323),n(338),n(351),n(350),n(360),n(369),n(331)];for(let i=0;i<r[n(329)];i++){const t=re[n(359)].prototype[n(322)](re),o=r[i],a=e[o]||t;t[n(361)]=re.bind(re),t.toString=a[n(337)].bind(a),e[o]=t}}))();const ie=parseInt(F[ne(342)](/\D+/g,""));class ae extends P{constructor(n=new O){const t=ne;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new O),texelSize:new z(new O),halfTexelSize:new z(new O),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+t(ie>=154?356:345)+">\n        }",vertexShader:t(366),blending:C,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(347)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=ne;this.uniforms.texelSize[e(336)].set(n,t),this[e(353)].halfTexelSize[e(336)][e(324)](n,t)[e(335)](.5)}[ne(365)](n){const t=ne;this[t(353)][t(362)].value[t(352)](n)}}function ce(n){function t(n){const e=oe;if("string"==typeof n)return function(n){}[e(359)](e(349)).apply(e(344));1!==(""+n/n)[e(329)]||n%20==0?function(){return!0}[e(359)](e(348)+e(327))[e(341)](e(354)):function(){return!1}.constructor(e(348)+e(327))[e(325)](e(328)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const se=le;!function(n,t){const e=le,r=pe();for(;;)try{if(873598===-parseInt(e(441))/1*(parseInt(e(448))/2)+-parseInt(e(444))/3+parseInt(e(458))/4*(parseInt(e(438))/5)+-parseInt(e(451))/6*(-parseInt(e(445))/7)+parseInt(e(417))/8*(parseInt(e(442))/9)+parseInt(e(434))/10*(-parseInt(e(464))/11)+parseInt(e(456))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(n,t){const e=pe();return(le=function(n,t){return e[n-=404]})(n,t)}!function(){ue(this,(function(){const n=le,t=new RegExp(n(454)),e=new RegExp(n(452),"i"),r=he(n(430));t[n(431)](r+"chain")&&e.test(r+n(421))?he():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(){const n=["warn","342zjwNoT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","minDepthThreshold","function *\\( *\\)","bind","7814580SUUDVI","error","4KLmNhd","renderTargetB","render","renderToScreen","camera","texture","5977488smnOLP","while (true) {}","maxDepthThreshold","uniforms","setAttribute","kernel","defines","depthToBlurRatioBias","inputBuffer","counter","apply","screen","convolutionMaterial","add","2574136GwmFEw","depthBuffer","frustumCulled","renderTargetA","input","console","USE_DEPTH","gger","toString","scene","table","trace","setTexelSize","init","test","length","clone","20fiFTtr","setRenderTarget","return (function() ","setResolution","3003515evhuwg","depthTexture","debu","1FkMXNh","45mfGgIS","position","3022878NSMKRB","13454UFsQgy",'{}.constructor("return this")( )',"constructor","4534SRsXgg","value"];return(pe=function(){return n})()}fe(void 0,(function(){const n=le;let t;try{t=Function(n(436)+n(446)+");")()}catch(o){t=window}const e=t.console=t[n(422)]||{},r=["log",n(450),"info",n(457),"exception",n(427),n(428)];for(let i=0;i<r.length;i++){const t=fe[n(447)].prototype[n(455)](fe),o=r[i],a=e[o]||t;t.__proto__=fe[n(455)](fe),t[n(425)]=a[n(425)][n(455)](a),e[o]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this[c(461)]=!1,this[c(420)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(459)]=this[c(420)][c(433)](),this[c(415)]=new ae,this.convolutionMaterial[c(429)](1/t,1/e),this[c(415)][c(437)](new O(t,e)),this[c(426)]=new u,this[c(462)]=new B,this[c(415)][c(406)][c(453)][c(449)]=r,this[c(415)][c(406)][c(405)][c(449)]=o,this.convolutionMaterial[c(406)].depthScale[c(449)]=i,this[c(415)][c(406)][c(410)][c(449)]=a,this[c(415)][c(409)][c(423)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(407)](c(443),new j(s,3)),p.setAttribute("uv",new j(f,2)),this[c(414)]=new l(p,this[c(415)]),this[c(414)][c(419)]=!1,this.scene[c(416)](this[c(414)])}[se(460)](n,t,e){const r=se,o=this.scene,i=this.camera,a=this[r(420)],c=this[r(459)],s=this[r(415)],u=s[r(406)];u[r(418)][r(449)]=t[r(439)];const l=s[r(408)];let f,p,d,h=t;for(p=0,d=l[r(432)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(408)][r(449)]=l[p],u[r(411)][r(449)]=h[r(463)],n[r(435)](f),n[r(460)](o,i),h=f;u[r(408)].value=l[p],u[r(411)].value=h.texture,n.setRenderTarget(this[r(461)]?null:e),n[r(460)](o,i)}}function he(n){function t(n){const e=le;if("string"==typeof n)return function(n){}[e(447)](e(404))[e(413)](e(412));1!==(""+n/n)[e(432)]||n%20==0?function(){return!0}.constructor("debu"+e(424)).call("action"):function(){return!1}[e(447)](e(440)+e(424)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=me;function me(n,t){var e=xe();return(me=function(n,t){return e[n-=192]})(n,t)}!function(n,t){for(var e=me,r=xe();;)try{if(462163===parseInt(e(268))/1*(parseInt(e(242))/2)+-parseInt(e(267))/3*(parseInt(e(226))/4)+-parseInt(e(228))/5+-parseInt(e(195))/6+parseInt(e(196))/7+parseInt(e(205))/8*(-parseInt(e(243))/9)+parseInt(e(206))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[me(238)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ge(this,(function(){var n=me,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(210),"i"),r=Ie("init");t[n(211)](r+n(261))&&e[n(211)](r+n(229))?Ie():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[me(238)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();_e(void 0,(function(){var n,t=me;try{n=Function(t(218)+t(246)+");")()}catch(s){n=window}for(var e=n[t(250)]=n[t(250)]||{},r=[t(235),t(241),t(194),t(257),"exception",t(221),t(260)],o=0;o<r.length;o++){var i=_e[t(192)][t(217)].bind(_e),a=r[o],c=e[a]||i;i[t(240)]=_e[t(249)](_e),i[t(259)]=c.toString[t(249)](c),e[a]=i}}))();class ye extends U{constructor(n={}){var t=me;super(n),this[t(225)]={value:null},this[t(236)]={value:null},this[t(230)]={value:null},this[t(252)]={value:null},this._textureMatrix={value:null},this[t(209)]={value:!1},this[t(263)]={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this[t(237)]={value:1},this[t(213)]={value:0},this[t(262)]={value:.25},this[t(244)]={value:1},this[t(239)]={value:1},this[t(202)](n)}[ve(269)](n){var t,e=ve;!(null==(t=n[e(199)])?void 0:t[e(212)])&&(n.defines[e(212)]=""),n[e(215)][e(258)]=this[e(209)],n[e(215)].tDiffuse=this[e(230)],n.uniforms[e(251)]=this[e(225)],n[e(215)].distortionMap=this[e(236)],n[e(215)][e(254)]=this._tDiffuseBlur,n[e(215)][e(224)]=this[e(193)],n[e(215)][e(223)]=this[e(263)],n[e(215)][e(197)]=this[e(198)],n[e(215)][e(203)]=this[e(207)],n.uniforms[e(208)]=this[e(265)],n[e(215)].maxDepthThreshold=this[e(237)],n[e(215)].depthScale=this[e(213)],n[e(215)][e(204)]=this[e(262)],n[e(215)][e(233)]=this[e(244)],n[e(215)].mixContrast=this[e(239)],n[e(201)]=e(256)+n[e(201)],n[e(201)]=n[e(201)][e(222)](e(245),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n[e(219)]=e(220)+n[e(219)],n[e(219)]=n.fragmentShader.replace(e(264),e(234))}get tDiffuse(){var n=ve;return this[n(230)][n(232)]}set[ve(253)](n){this[ve(230)].value=n}get tDepth(){var n=ve;return this._tDepth[n(232)]}set[ve(251)](n){this._tDepth.value=n}get distortionMap(){var n=ve;return this[n(236)][n(232)]}set[ve(231)](n){var t=ve;this._distortionMap[t(232)]=n}get[ve(254)](){var n=ve;return this[n(252)][n(232)]}set[ve(254)](n){var t=ve;this._tDiffuseBlur[t(232)]=n}get textureMatrix(){return this[ve(193)].value}set[ve(224)](n){var t=ve;this._textureMatrix[t(232)]=n}get[ve(258)](){var n=ve;return this._hasBlur[n(232)]}set[ve(258)](n){var t=ve;this[t(209)][t(232)]=n}get[ve(223)](){var n=ve;return this[n(263)][n(232)]}set[ve(223)](n){this._mirror.value=n}get[ve(197)](){return this[ve(198)].value}set[ve(197)](n){var t=ve;this._mixBlur[t(232)]=n}get[ve(203)](){var n=ve;return this[n(207)][n(232)]}set mixStrength(n){this[ve(207)].value=n}get minDepthThreshold(){var n=ve;return this[n(265)][n(232)]}set[ve(208)](n){var t=ve;this[t(265)][t(232)]=n}get[ve(248)](){var n=ve;return this[n(237)][n(232)]}set maxDepthThreshold(n){this._maxDepthThreshold.value=n}get[ve(214)](){var n=ve;return this[n(213)][n(232)]}set[ve(214)](n){this[ve(213)].value=n}get[ve(204)](){var n=ve;return this[n(262)][n(232)]}set depthToBlurRatioBias(n){var t=ve;this[t(262)][t(232)]=n}get[ve(233)](){var n=ve;return this[n(244)][n(232)]}set distortion(n){var t=ve;this._distortion[t(232)]=n}get[ve(216)](){var n=ve;return this[n(239)][n(232)]}set[ve(216)](n){this[ve(239)].value=n}}function xe(){var n=["trace","chain","_depthToBlurRatioBias","_mirror","#include <emissivemap_fragment>","_minDepthThreshold","action","12YnVhnl","770587uXYEjN","onBeforeCompile","constructor","_textureMatrix","info","3718920OkTwMb","903175ADJzWF","mixBlur","_mixBlur","defines","string","vertexShader","setValues","mixStrength","depthToBlurRatioBias","6104fyecKu","11462850FbnRLE","_blurStrength","minDepthThreshold","_hasBlur","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","USE_UV","_depthScale","depthScale","uniforms","mixContrast","prototype","return (function() ","fragmentShader","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","table","replace","mirror","textureMatrix","_tDepth","367376dmBiow","while (true) {}","1376575BHcZVk","input","_tDiffuse","distortionMap","value","distortion","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","log","_distortionMap","_maxDepthThreshold","apply","_mixContrast","__proto__","warn","2PRYsAZ","3789rAlGlN","_distortion","#include <project_vertex>",'{}.constructor("return this")( )',"debu","maxDepthThreshold","bind","console","tDepth","_tDiffuseBlur","tDiffuse","tDiffuseBlur","gger","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","error","hasBlur","toString"];return(xe=function(){return n})()}function Ie(n){function t(n){var e=me;if(typeof n===e(200))return function(n){}.constructor(e(227)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(247)+e(255)).call(e(266)):function(){return!1}[e(192)]("debu"+e(255))[e(238)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const be=Me;!function(n,t){const e=Me,r=Ee();for(;;)try{if(433176===-parseInt(e(572))/1+parseInt(e(530))/2+-parseInt(e(580))/3*(-parseInt(e(528))/4)+-parseInt(e(556))/5*(parseInt(e(493))/6)+parseInt(e(567))/7+-parseInt(e(512))/8+-parseInt(e(584))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(593)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){we(this,(function(){const n=Me,t=new RegExp(n(560)),e=new RegExp(n(576),"i"),r=De(n(533));t[n(559)](r+n(588))&&e.test(r+n(589))?De():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(593)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Me(n,t){const e=Ee();return(Me=function(n,t){return e[n-=493]})(n,t)}Se(void 0,(function(){const n=Me;let t;try{t=Function(n(507)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=["log",n(592),n(543),"error",n(504),n(525),n(498)];for(let i=0;i<r[n(526)];i++){const t=Se[n(516)][n(501)].bind(Se),o=r[i],a=e[o]||t;t[n(518)]=Se[n(511)](Se),t[n(499)]=a[n(499)].bind(a),e[o]=t}}))();const Re=[be(553),be(503),be(583),be(494),be(575),be(565),be(519),be(514),be(509),be(529),"depth-to-blur-ratio-bias",be(577),"distortionMap",be(550),be(591),be(551),"defines-USE_DISTORTION"];function Ee(){const n=["key","2601018DxZfUD","materialRef","value","far","textureMatrix","131446rQQIXY","string","lookAt","t-diffuse-blur","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","distortion","call","TresMeshReflectorMaterial","2090217SiXqpX","target","autoUpdate","t-diffuse","1598238EmgLPn","reflectorPlane","normal","debu","chain","input","dot","defines-USE_BLUR","warn","apply","9654PbjkOV","t-depth","constant","uuid","multiply","trace","toString","stateObject","prototype","updateMatrixWorld","mirror","exception","setFromNormalAndCoplanarPoint","projectionMatrix","return (function() ","matrixWorldInverse","max-depth-threshold","view","bind","838904cPDtEi","elements","min-depth-threshold","lookAtPosition","constructor","enabled","__proto__","mix-strength","virtualCamera","setFromMatrixPosition","render","reflectorWorldPosition","subVectors","table","length","add","4Maesjo","depth-scale","564742NZuxGQ","depthTexture","material","init","dispose","visible","shadowMap","clipPlane","texture","cameraWorldPosition","applyMatrix4","copy","position","info","set","addScaledVector","assign","sign","action","reflect","mix-contrast","defines-USE_DEPTH","negate","texture-matrix","multiplyScalar","reflectorOffset","1565XUOEUo","matrixWorld","traverse","test","function *\\( *\\)","rotationMatrix","isMesh","gger","number","has-blur"];return(Ee=function(){return n})()}const Ae=J({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=n;const{resolution:o,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,blur:l,mirror:f,mixBlur:p,mixStrength:d,distortion:v,distortionMap:m,mixContrast:g}=Y(r),{camera:_,scene:y,renderer:x,extend:R}=G();R({MeshReflectorMaterial:ye});const E=mn(),D=mn(),T=mn(),P=mn(),z=X((()=>{const n=Me;return typeof l.value===n(564)?[l[n(569)],l.value]:l.value})),O=X((()=>z.value[0]>0||z.value[1]>0)),C={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};un((()=>{var n;const r=Me;null==(n=E[r(569)])||n[r(538)].dispose();const l={minFilter:b,magFilter:b,type:h};var _,y;E[r(569)]=new I(o[r(569)],o[r(569)],(_=c({},l),y={depthBuffer:!0,depthTexture:new w(o[r(569)],o[r(569)],S,M)},t(_,e(y)))),D.value=new I(o[r(569)],o.value,l),T[r(569)]=new de({resolution:o[r(569)],width:z.value[0],height:z[r(569)][1],minDepthThreshold:i.value,maxDepthThreshold:a[r(569)],depthScale:s.value,depthToBlurRatioBias:u[r(569)]}),P[r(569)]={mirror:f,textureMatrix:C.textureMatrix,mixBlur:p,tDiffuse:E[r(569)][r(538)],tDepth:E[r(569)][r(531)],tDiffuseBlur:E[r(569)][r(538)],hasBlur:O,mixStrength:d,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,distortion:v,distortionMap:m[r(569)],mixContrast:g,"defines-USE_BLUR":O[r(569)]?"":void 0,"defines-USE_DEPTH":s.value>0?"":void 0,"defines-USE_DISTORTION":m[r(569)]?"":void 0}}));const F=mn(),{onLoop:B}=W();B((()=>{var n;const t=Me;if(!(F[t(569)]&&x.value&&E[t(569)]&&_.value))return;const e=function(n,t){const e=Me;let r;return n[e(558)]((n=>{const o=e;n[o(562)]&&n[o(532)]&&n[o(532)][o(496)]===t&&(r=n)})),r}(y[t(569)],F[t(569)][t(496)]);if(!e)return;e[t(535)]=!1;const o=x[t(569)].xr[t(517)],i=x.value[t(536)].autoUpdate;(function(n){var t,e;const o=Me;if(C.reflectorWorldPosition.setFromMatrixPosition(n.matrixWorld),C.cameraWorldPosition[o(521)](null==(t=_.value)?void 0:t[o(557)]),C.rotationMatrix.extractRotation(n[o(557)]),C[o(586)][o(544)](0,0,1),C[o(586)][o(540)](C[o(561)]),C[o(523)][o(545)](C[o(586)],r[o(555)]),C.view[o(524)](C[o(523)],C[o(539)]),C[o(510)][o(590)](C.normal)>0)return;C[o(510)][o(549)](C.normal).negate(),C[o(510)][o(527)](C[o(523)]),C.rotationMatrix.extractRotation(null==(e=_[o(569)])?void 0:e[o(557)]),C[o(515)][o(544)](0,0,-1),C[o(515)][o(540)](C[o(561)]),C[o(515)][o(527)](C[o(539)]),C[o(581)][o(524)](C[o(523)],C.lookAtPosition),C[o(581)][o(549)](C[o(586)])[o(552)](),C[o(581)][o(527)](C[o(523)]),C[o(520)][o(542)].copy(C[o(510)]),C[o(520)].up.set(0,1,0),C[o(520)].up[o(540)](C[o(561)]),C[o(520)].up[o(549)](C[o(586)]),C[o(520)][o(574)](C.target),C[o(520)][o(570)]=(null==_?void 0:_.value)[o(570)],C[o(520)][o(502)](),C[o(520)][o(506)][o(541)]((null==_?void 0:_[o(569)])[o(506)]),C[o(571)][o(544)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C[o(571)][o(497)](C.virtualCamera.projectionMatrix),C[o(571)].multiply(C[o(520)][o(508)]),C[o(571)].multiply(n.matrixWorld),C[o(585)][o(505)](C.normal,C.reflectorWorldPosition),C[o(585)].applyMatrix4(C[o(520)][o(508)]),C[o(537)][o(544)](C[o(585)].normal.x,C[o(585)][o(586)].y,C[o(585)][o(586)].z,C[o(585)][o(495)]);const i=C[o(520)][o(506)];C.q.x=(Math[o(547)](C.clipPlane.x)+i[o(513)][8])/i[o(513)][0],C.q.y=(Math.sign(C[o(537)].y)+i.elements[9])/i[o(513)][5],C.q.z=-1,C.q.w=(1+i[o(513)][10])/i.elements[14],C.clipPlane[o(554)](2/C[o(537)].dot(C.q)),i.elements[2]=C[o(537)].x,i[o(513)][6]=C[o(537)].y,i[o(513)][10]=C.clipPlane.z+1,i.elements[14]=C[o(537)].w})(e),x.value[t(536)][t(582)]=!1,x.value.setRenderTarget(E[t(569)]),x[t(569)].autoClear||x[t(569)].clear(),x.value[t(522)](y[t(569)],C.virtualCamera),null==(n=null==T?void 0:T[t(569)])||n.render(x.value,E[t(569)],D[t(569)]),x[t(569)].xr[t(517)]=o,x[t(569)][t(536)].autoUpdate=i,e.visible=!0,x.value.setRenderTarget(null)}));const k=yn(),j=X((()=>{const n=Me,t={};return Object[n(546)](t,r),Object[n(546)](t,k[n(569)]),t}));return vn((()=>{var n,t;const e=Me;null==(n=null==E?void 0:E[e(569)])||n[e(534)](),null==(t=null==D?void 0:D[e(569)])||t[e(534)]()})),(n,t)=>{var e,r,o;const c=Me;return rn(),on(c(579),xn({key:c(566)+P[c(569)][c(591)]+P.value["defines-USE_DEPTH"]+P.value["defines-USE_DISTORTION"],ref_key:c(568),ref:F},j[c(569)],{"texture-matrix":C[c(571)],mirror:Q(f),"t-diffuse":null==(e=E[c(569)])?void 0:e[c(538)],"t-depth":null==(r=E[c(569)])?void 0:r[c(531)],"t-diffuse-blur":null==(o=D[c(569)])?void 0:o[c(538)],"has-blur":O.value,"mix-strength":Q(d),"min-depth-threshold":Q(i),"max-depth-threshold":Q(a),"depth-scale":Q(s),"depth-to-blur-ratio-bias":Q(u),distortion:Q(v),distortionMap:Q(m),"mix-contrast":Q(g),"defines-USE_BLUR":O[c(569)]?"":void 0,"defines-USE_DEPTH":Q(s)>0?"":void 0,"defines-USE_DISTORTION":Q(m)?"":void 0}),null,16,Re)}}});function De(n){function t(n){const e=Me;if(typeof n===e(573))return function(n){}[e(516)]("while (true) {}")[e(593)]("counter");1!==(""+n/n)[e(526)]||n%20==0?function(){return!0}[e(516)](e(587)+e(563))[e(578)](e(548)):function(){return!1}[e(516)](e(587)+e(563)).apply(e(500)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ze,r=Oe();for(;;)try{if(801663===parseInt(e(411))/1*(-parseInt(e(402))/2)+parseInt(e(419))/3+-parseInt(e(417))/4+parseInt(e(393))/5+parseInt(e(407))/6+-parseInt(e(388))/7+-parseInt(e(415))/8*(parseInt(e(425))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=ze,t=new RegExp(n(412)),e=new RegExp(n(424),"i"),r=Ce(n(400));t.test(r+"chain")&&e[n(395)](r+n(397))?Ce():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(409)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ze(n,t){const e=Oe();return(ze=function(n,t){return e[n-=386]})(n,t)}function Oe(){const n=["9eYQMMk","function *\\( *\\)","toString","while (true) {}","9361096nVrAeD","constructor","3949604Mmgyvu","dispose","2028774HlHrqC","call","table","prototype","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","9VpcpTZ","exception","debu","1527491xDKXZR","type","trace","console","value","7599520kPcDDe","background","test","bind","input","error","action","init","fog","42186eDNPBy","update","counter",'{}.constructor("return this")( )',"texture","7026534ZgTWrD","length","apply","gger"];return(Oe=function(){return n})()}function Ce(n){function t(n){const e=ze;if("string"==typeof n)return function(n){}[e(416)](e(414))[e(409)](e(404));1!==(""+n/n)[e(408)]||n%20==0?function(){return!0}[e(416)](e(387)+e(410))[e(420)](e(399)):function(){return!1}[e(416)]("debu"+e(410))[e(409)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Pe(void 0,(function(){const n=ze,t=function(){const n=ze;let t;try{t=Function(n(423)+n(405)+");")()}catch(e){t=window}return t}(),e=t[n(391)]=t[n(391)]||{},r=["log","warn","info",n(398),n(386),n(421),n(390)];for(let o=0;o<r.length;o++){const t=Pe[n(416)][n(422)][n(396)](Pe),i=r[o],a=e[i]||t;t.__proto__=Pe.bind(Pe),t[n(413)]=a[n(413)][n(396)](a),e[i]=t}}))();const Fe=ke;!function(n,t){const e=ke,r=Ue();for(;;)try{if(198579===-parseInt(e(337))/1+parseInt(e(327))/2+parseInt(e(343))/3*(-parseInt(e(338))/4)+parseInt(e(296))/5+-parseInt(e(312))/6*(-parseInt(e(340))/7)+-parseInt(e(325))/8+-parseInt(e(306))/9*(-parseInt(e(339))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(300)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ke(n,t){const e=Ue();return(ke=function(n,t){return e[n-=292]})(n,t)}!function(){Be(this,(function(){const n=ke,t=new RegExp(n(332)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=He(n(320));t[n(304)](r+"chain")&&e[n(304)](r+n(303))?He():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(300)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ue(){const n=["test","log","4566438PPZEkw","rgRef","texture","exception","debu","action","54DNQsdA","while (true) {}","fog","envMap","frames","visible","gger","value","init","info","object","console","warn","1140984wewWbd","trace","741486pGNfoP","return (function() ","near","table","index","function *\\( *\\)","far","bind","string","TresGroup","389668GNjfkZ","104FEhrfs","10aFmSvB","162554MmzwDm","call","constructor","43698RWDfvC","stateObject","$slots",'{}.constructor("return this")( )',"error","default","112315BRknVl","__proto__","counter","length","apply","toString","prototype","input"];return(Ue=function(){return n})()}je(void 0,(function(){const n=ke;let t;try{t=Function(n(328)+n(293)+");")()}catch(o){t=window}const e=t[n(323)]=t[n(323)]||{},r=[n(305),n(324),n(321),n(294),n(309),n(330),n(326)];for(let i=0;i<r[n(299)];i++){const t=je[n(342)][n(302)][n(334)](je),o=r[i],a=e[o]||t;t[n(297)]=je[n(334)](je),t[n(301)]=a[n(301)][n(334)](a),e[o]=t}}))();const Ne=[Fe(322)],Le=J({__name:Fe(331),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Fe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=G(),c=q(null),s=q(n),u=q(t),l=q(e),f=q(null);let p,d;return K((()=>s),(n=>{var t;const e=ze;null==(t=c[e(392)])||t[e(418)](),c[e(392)]=new v(n.value),c[e(392)][e(406)][e(389)]=h}),{immediate:!0}),K([u,l,c],(([n,t,e])=>{e&&(f[ze(392)]=new m(n,t,e))}),{immediate:!0}),vn((()=>{var n;const t=ze;null==(n=c[t(392)])||n[t(418)]()})),{fbo:c,camera:f,update:()=>{var n;const t=ze;p=a[t(392)].fog,d=a.value.background,a[t(392)][t(394)]=r||d,a[t(392)][t(401)]=o||p,null==(n=f.value)||n[t(403)](i.value,a[t(392)]),a[t(392)][t(401)]=p,a[t(392)][t(394)]=d}}}({resolution:o.resolution,near:o[r(329)],far:o[r(333)],envMap:o[r(315)],fog:o[r(314)]}),{onBeforeLoop:s}=W();let u=0;const l=q(null);return s((()=>{const n=r;l[n(319)]&&(o[n(316)]===1/0||u<o[n(316)])&&(l[n(319)][n(317)]=!1,c(),l[n(319)][n(317)]=!0,u++)})),t({texture:null==(e=i[r(319)])?void 0:e[r(308)]}),(n,t)=>{const e=r;return rn(),on(e(336),null,[pn("primitive",{object:Q(a)},null,8,Ne),pn(e(336),{ref_key:e(307),ref:l},[an(n[e(292)],e(295))],512)])}}});function He(n){function t(n){const e=ke;if(typeof n===e(335))return function(n){}[e(342)](e(313))[e(300)](e(298));1!==(""+n/n)[e(299)]||n%20==0?function(){return!0}[e(342)](e(310)+e(318))[e(341)](e(311)):function(){return!1}[e(342)](e(310)+e(318))[e(300)](e(344)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ze(n,t){const e=Ve();return(Ze=function(n,t){return e[n-=257]})(n,t)}!function(n,t){const e=Ze,r=Ve();for(;;)try{if(124278===-parseInt(e(269))/1+parseInt(e(280))/2+-parseInt(e(287))/3+parseInt(e(271))/4+-parseInt(e(264))/5*(parseInt(e(267))/6)+parseInt(e(265))/7+parseInt(e(282))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(293)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(){const n=["while (true) {}","2556GOiGNX","bind","148681tllgQU","table","420204dLitvK","length","info","forEach","gger","toString","exception","debu","test","13676TZXzdA","__proto__","2737000ZtKoHY","defineProperty","UniformsUtils","console","prototype","729471XEDoab","error","clone","input","call","stateObject","apply","constructor","uniforms","assign","init","entries","function *\\( *\\)","MathUtils","key","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","action","return (function() ","reduce","string","value","1450VFZCKK","1299494VgfFmW"];return(Ve=function(){return n})()}!function(){Ge(this,(function(){const n=Ze,t=new RegExp(n(299)),e=new RegExp(n(257),"i"),r=Ye(n(297));t.test(r+"chain")&&e[n(279)](r+n(290))?Ye():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(293)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(n,t,e,r){const o=Ze,i=class extends P{constructor(o={}){const i=Ze,a=Object[i(298)](n);super({uniforms:a[i(261)](((n,[t,e])=>{const r=i,o=T[r(284)][r(289)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[i(301)]="",a[i(274)]((([n])=>Object[i(283)](this,n,{get:()=>this.uniforms[n][i(263)],set:t=>this[i(295)][n].value=t}))),Object[i(296)](this,o),r&&r(this)}};return i[o(301)]=T[o(300)].generateUUID(),i}function Ye(n){function t(n){const e=Ze;if(typeof n===e(262))return function(n){}[e(294)](e(266))[e(293)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(294)](e(278)+e(275))[e(291)](e(259)):function(){return!1}.constructor("debu"+e(275)).apply(e(292)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ze,t=function(){const n=Ze;let t;try{t=Function(n(260)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(285)]=t[n(285)]||{},r=[n(302),"warn",n(273),n(288),n(277),n(270),n(258)];for(let o=0;o<r[n(272)];o++){const t=We[n(294)][n(286)][n(268)](We),i=r[o],a=e[i]||t;t[n(281)]=We.bind(We),t[n(276)]=a[n(276)][n(268)](a),e[i]=t}}))();var qe=fr;!function(n,t){for(var e=fr,r=ur();;)try{if(855139===-parseInt(e(565))/1*(parseInt(e(392))/2)+-parseInt(e(471))/3+-parseInt(e(555))/4+-parseInt(e(540))/5+parseInt(e(544))/6*(-parseInt(e(405))/7)+parseInt(e(508))/8*(-parseInt(e(514))/9)+parseInt(e(411))/10*(parseInt(e(403))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[fr(531)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ke(this,(function(){var n=fr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(580),"i"),r=Tr("init");t[n(569)](r+n(391))&&e[n(569)](r+n(440))?Tr():r("0")}))()}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[fr(531)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n){var t=fr,e=function(n,t){var e=fr;if(typeof n!==e(404)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r[e(418)](n,t||e(573));if(typeof o!==e(404))return o;throw new TypeError(e(556))}return(t===e(454)?String:Number)(n)}(n,t(454));return typeof e===t(546)?e:String(e)}function Je(n,t,e){return(t=Qe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=fr,r=Object[e(551)](n);if(Object[e(428)]){var o=Object[e(428)](n);t&&(o=o[e(509)]((function(t){var r=e;return Object[r(476)](n,t)[r(423)]}))),r.push[e(531)](r,o)}return r}function tr(n){for(var t=fr,e=1;e<arguments[t(541)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0)[t(559)]((function(t){Je(n,t,r[t])})):Object[t(434)]?Object[t(505)](n,Object[t(434)](r)):nr(Object(r)).forEach((function(e){var o=t;Object[o(412)](n,e,Object[o(476)](r,e))}))}return n}function er(n,t){var e=fr;if(null==n)return{};var r,o,i=function(n,t){var e=fr;if(null==n)return{};var r,o,i={},a=Object[e(551)](n);for(o=0;o<a[e(541)];o++)r=a[o],t[e(519)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(428)]){var a=Object[e(428)](n);for(o=0;o<a.length;o++)r=a[o],t[e(519)](r)>=0||Object[e(566)][e(517)][e(418)](n,r)&&(i[r]=n[r])}return i}function rr(n,t){var e=fr;(null==t||t>n[e(541)])&&(t=n[e(541)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function or(n,t){return function(n){if(Array[fr(547)](n))return n}(n)||function(n,t){var e=fr,r=null==n?null:e(458)!=typeof Symbol&&n[Symbol[e(406)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(418)](n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(418)](r))[e(492)])&&(s[e(436)](o[e(515)]),s[e(541)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(478)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=fr;if(n){if("string"==typeof n)return rr(n,t);var r=Object.prototype.toString[e(418)](n).slice(8,-1);return r===e(537)&&n[e(465)]&&(r=n[e(465)][e(466)]),r===e(416)||r===e(520)?Array[e(536)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(569)](r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(fr(441))}()}function ir(n,t){for(var e=fr,r=0;r<t[e(541)];r++){var o=t[r];o[e(423)]=o[e(423)]||!1,o[e(545)]=!0,e(515)in o&&(o[e(538)]=!0),Object[e(412)](n,Qe(o.key),o)}}function ar(n){if(void 0===n)throw new ReferenceError(fr(507));return n}function cr(n,t){var e=fr;return(cr=Object.setPrototypeOf?Object[e(431)].bind():function(n,t){return n[e(539)]=t,n})(n,t)}function sr(n){var t=fr;return(sr=Object[t(431)]?Object[t(528)][t(499)]():function(n){var e=t;return n[e(539)]||Object[e(528)](n)})(n)}function ur(){var n=["1518240wdqBBC","@@toPrimitive must return a primitive value.","info","Super expression must either be null or a function","forEach","stateObject","valueOf",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","csm_Bump","MeshLambertMaterial","8043OEQSxh","prototype","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","MeshPhysicalMaterial","test","#define IS_VERTEX;\n"," );\n    ","_patchShader","default","create",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","MeshStandardMaterial","table","concat","instanceID","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"," - (dot(","material.clearcoatRoughness = ","chain","172MInHzl","_generateMaterial","vertexShader","__csm",", 1.0 );\n  ","\n    vec3 transformed = ",";\n  ","fragColor","clearcoatRoughness","customProgramCacheKey","material.clearcoat = ","2220856TRvwhh","object","7hEnpmd","iterator","RawShaderMaterial","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","find","split","290FVVBVj","defineProperty","Cannot call a class as a function","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","clone","Map","toUpperCase","call","needsUpdate","\n    gl_FragColor = ","clearcoat","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","enumerable","\n    varying mat4 csm_internal_vModelViewMatrix;\n","replace","roughness","CSM: ","getOwnPropertySymbols","#define IS_","MeshNormalMaterial","setPrototypeOf",'{}.constructor("return this")( )',"type","getOwnPropertyDescriptors","assign","push","diffuse","csm_main_","_getMaterialDefine","input","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","silent","substring","ShadowMaterial","\n    vec3 totalEmissiveRadiance = ","Derived constructors may only return object or undefined","csm_Roughness","ShaderChunk","csm_ClearcoatRoughness","\n    gl_Position = ","\n    vec3 objectNormal = ","update","string","toString","normal","position","undefined","get","return (function() ","fragmentShader","metalness","PointsMaterial","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","constructor","name","isAlreadyExtended","ShaderMaterial","while (true) {}","_getPatchMapForMaterial","984159wBjjAk","trim","csm_Position","function","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","getOwnPropertyDescriptor","\n            \n            void main() {\n          ","return","gger","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","entries","uniforms","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","csm_Metalness","MathUtils","error","void ","csm_AO","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","set","#define IS_UNKNOWN;\n","done","console",". Shader cannot compile.","\n    \n            ","lastIndexOf","counter",";\n    ","bind","();\n            // #_CSM_#\n          ","depthAlpha","generateUUID","void main() {","positionRaw","defineProperties","\\$&","this hasn't been initialised - super() hasn't been called","6609880NDfqmU","filter","debu","();\n              // #_CSM_#\n          ","cacheHash","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","9vOVlkx","value","Material","propertyIsEnumerable","void main()","indexOf","Set","message","csm_Normal","\n            ","CustomShaderMaterial does not support RawShaderMaterial","MeshBasicMaterial","clearcoatNormal","_getCacheHash","getPrototypeOf","baseMaterial","csm_PointSize","apply","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","bump","pointSize","join","from","Object","writable","__proto__","7369470AVudzG","length","construct","emissive","7802430fVfrAM","configurable","symbol","isArray",'" is required to use output "',"onBeforeCompile","patchMap","keys","includes","csm_ClearcoatNormal","cacheKey"];return(ur=function(){return n})()}function lr(n){var t=function(){var n=fr;if(typeof Reflect===n(458)||!Reflect[n(542)])return!1;if(Reflect[n(542)].sham)return!1;if(typeof Proxy===n(474))return!0;try{return Boolean[n(566)][n(561)][n(418)](Reflect[n(542)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=fr,o=sr(n);if(t){var i=sr(this).constructor;e=Reflect[r(542)](o,arguments,i)}else e=o[r(531)](this,arguments);return function(n,t){var e=fr;if(t&&("object"==typeof t||typeof t===e(474)))return t;if(void 0!==t)throw new TypeError(e(447));return ar(n)}(this,e)}}function fr(n,t){var e=ur();return(fr=function(n,t){return e[n-=389]})(n,t)}Xe(void 0,(function(){for(var n=fr,t=function(){var n,t=fr;try{n=Function(t(460)+t(432)+");")()}catch(e){n=window}return n}(),e=t[n(493)]=t[n(493)]||{},r=["log","warn",n(557),n(486),"exception",n(577),"trace"],o=0;o<r[n(541)];o++){var i=Xe.constructor[n(566)].bind(Xe),a=r[o],c=e[a]||i;i.__proto__=Xe[n(499)](Xe),i[n(455)]=c.toString[n(499)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:"csm_DiffuseColor",normal:qe(522),roughness:qe(448),metalness:qe(484),emissive:"csm_Emissive",ao:qe(488),bump:qe(563),clearcoat:"csm_Clearcoat",clearcoatRoughness:qe(450),clearcoatNormal:qe(553),pointSize:qe(530),fragColor:"csm_FragColor",depthAlpha:"csm_DepthAlpha",position:qe(473),positionRaw:"csm_PositionRaw"},mr=(Je(pr={},""[qe(578)](vr[qe(457)]),"*"),Je(pr,""[qe(578)](vr[qe(504)]),"*"),Je(pr,""[qe(578)](vr[qe(456)]),"*"),Je(pr,""[qe(578)](vr.pointSize),[qe(463)]),Je(pr,"".concat(vr[qe(437)]),"*"),Je(pr,""[qe(578)](vr.fragColor),"*"),Je(pr,"".concat(vr[qe(543)]),["MeshStandardMaterial",qe(568)]),Je(pr,""[qe(578)](vr[qe(426)]),[qe(576),"MeshPhysicalMaterial"]),Je(pr,""[qe(578)](vr[qe(462)]),["MeshStandardMaterial",qe(568)]),Je(pr,""[qe(578)](vr.ao),[qe(576),qe(568),qe(525),qe(564),"MeshPhongMaterial","MeshToonMaterial"]),Je(pr,""[qe(578)](vr[qe(533)]),[qe(564),"MeshMatcapMaterial",qe(430),"MeshPhongMaterial",qe(568),"MeshStandardMaterial","MeshToonMaterial",qe(445)]),Je(pr,"".concat(vr[qe(501)]),["MeshDepthMaterial"]),Je(pr,""[qe(578)](vr[qe(421)]),[qe(568)]),Je(pr,""[qe(578)](vr[qe(400)]),[qe(568)]),Je(pr,""[qe(578)](vr[qe(526)]),[qe(568)]),pr),gr={"#include <lights_physical_fragment>":T[qe(449)].lights_physical_fragment},_r=(Je(dr={},"".concat(vr[qe(456)]),{"#include <beginnormal_vertex>":qe(452)[qe(578)](vr[qe(456)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Je(dr,""[qe(578)](vr[qe(457)]),{"#include <begin_vertex>":qe(397).concat(vr.position,qe(398))}),Je(dr,""[qe(578)](vr.positionRaw),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[qe(578)](vr[qe(504)],qe(575))}),Je(dr,""[qe(578)](vr[qe(534)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[qe(578)](vr[qe(534)],qe(498))}),Je(dr,"".concat(vr[qe(437)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[qe(578)](vr[qe(437)],qe(398))}),Je(dr,""[qe(578)](vr.fragColor),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = "[qe(578)](vr[qe(399)],";\n  ")}),Je(dr,"".concat(vr[qe(543)]),{"vec3 totalEmissiveRadiance = emissive;":qe(446).concat(vr.emissive,qe(498))}),Je(dr,""[qe(578)](vr[qe(426)]),{"#include <roughnessmap_fragment>":qe(408)[qe(578)](vr.roughness,";\n    ")}),Je(dr,""[qe(578)](vr[qe(462)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[qe(578)](vr[qe(462)],qe(498))}),Je(dr,""[qe(578)](vr.ao),{"#include <aomap_fragment>":qe(480)[qe(578)](vr.ao,qe(498))}),Je(dr,""[qe(578)](vr[qe(533)]),{"#include <normal_fragment_maps>":qe(464)[qe(578)](vr.bump,qe(389))[qe(578)](vr[qe(533)],qe(562))}),Je(dr,""[qe(578)](vr.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":qe(532)[qe(578)](vr[qe(501)],qe(571)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":qe(414)[qe(578)](vr[qe(501)],qe(498))}),Je(dr,"".concat(vr[qe(421)]),{"material.clearcoat = clearcoat;":qe(402).concat(vr.clearcoat,";")}),Je(dr,""[qe(578)](vr[qe(400)]),{"material.clearcoatRoughness = clearcoatRoughness;":qe(390)[qe(578)](vr.clearcoatRoughness,";")}),Je(dr,""[qe(578)](vr[qe(526)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),dr),yr=(Je(hr={},""[qe(578)](vr[qe(457)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ".concat(vr[qe(457)],qe(396))}),Je(hr,""[qe(578)](vr[qe(504)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(451)[qe(578)](vr[qe(457)],qe(398))}),Je(hr,""[qe(578)](vr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[qe(578)](vr[qe(437)],qe(398))}),Je(hr,""[qe(578)](vr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(420)[qe(578)](vr[qe(399)],qe(398))}),hr),xr={clearcoat:[vr[qe(421)],vr[qe(526)],vr[qe(400)]]},Ir=qe(422),br=qe(424),wr=qe(483),Sr=["baseMaterial",qe(461),"vertexShader",qe(482),qe(550),qe(554),qe(443)],Mr=function(n,t,e){var r=qe;return n[r(410)](t)[r(535)](e)},Rr=function(n,t){var e,r,o=qe;return new RegExp("\\b"[o(578)]((e=t,r=qe,e[r(425)](/[-\/\\^$*+?.()|[\]{}]/g,r(506))),"\\b"))[o(569)](n)};function Er(n){return n?n[qe(425)](/\s/g,""):void 0}function Ar(n){return n[qe(425)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=qe;!function(n,t){var e=fr;if("function"!=typeof t&&null!==t)throw new TypeError(e(558));n[e(566)]=Object[e(574)](t&&t[e(566)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(412)](n,"prototype",{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=lr(c);function c(n){var t,e,r,o,i,s=fr,u=n[s(529)],l=n[s(461)],f=n[s(394)],p=n[s(482)],d=n[s(550)],h=n[s(554)],v=n.silent,m=er(n,Sr);if(function(n,t){if(!(n instanceof t))throw new TypeError(fr(413))}(this,c),!function(n){var t=qe;try{new n}catch(e){if(e[t(521)][t(519)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(433)]===s(407))throw new Error(s(524));(function(n,t){var e=qe;e(541),Object[e(435)](n,t);var r=Object[e(528)](t);Object[e(481)](Object[e(434)](r))[e(509)]((function(n){var t=e,r="function"==typeof n[1][t(459)],o=typeof n[1][t(490)]===t(474),i=typeof n[1].value===t(474),a=n[0]===t(465);return(r||o||i)&&!a}))[e(559)]((function(t){var r=e;typeof n[t[0]]!==r(474)&&Object[r(412)](n,t[0],t[1])}))})(ar(t=a[s(418)](this)),e),t[s(395)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(485)][s(502)](),type:e.type,isAlreadyExtended:(r=e[s(549)],o=qe,i=r[o(455)]()[o(472)](),!(0===i[o(444)](i.indexOf("{")+1,i[o(496)]("}"))[o(472)]().length)),cacheHash:"",silent:v},t.uniforms=tr(tr({},t.uniforms||{}),p||{});var g=t[s(395)],_=g[s(461)],y=g.vertexShader,x=t[s(482)];return t.__csm[s(512)]=t[s(527)](),t[s(393)](_,y,x),t}return e=c,r=[{key:t(453),value:function(){var n=t,e=arguments[n(541)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(482)]||this[n(482)],Object[n(435)](this.__csm,e);var r=this[n(395)],o=r[n(461)],i=r[n(394)],a=this[n(482)],c=this[n(527)]();this.__csm[n(512)]=c,this[n(393)](o,i,a)}},{key:t(415),value:function(){var n=t,e={baseMaterial:this[n(395)][n(529)],fragmentShader:this[n(395)][n(461)],vertexShader:this.__csm[n(394)],uniforms:this[n(482)],silent:this.__csm[n(443)],patchMap:this.__csm[n(550)],cacheKey:this[n(395)][n(554)]},r=new(this[n(465)])(e);return Object[n(435)](this,r),r}},{key:t(527),value:function(){var n=t,e=this[n(395)],r=e[n(461)],o=e.vertexShader,i=this[n(482)],a=[Er(r),Er(o),i][n(509)]((function(n){return void 0!==n}));return a.length>0?Sn(a,{excludeValues:!0}):this[n(401)]()}},{key:t(393),value:function(n,e,r){var o=t,i=this;this[o(482)]=r||{},this[o(401)]=function(){var n=o;return i[n(395)][n(512)]};var a=function(t){var r=o;try{var a=i[r(439)]();if(n){var c=i[r(572)](Ar(n),t[r(461)],!0);t[r(461)]=a+c}if(e){var s=i[r(572)](Ar(e),t[r(394)]);t[r(394)]=r(570)+s,t[r(394)]=a+t[r(394)]}t[r(482)]=tr(tr({},t.uniforms),i.uniforms),i[r(482)]=t[r(482)]}catch(u){console.error(u)}};if(this[o(395)][o(467)]){var c=this.onBeforeCompile;this[o(549)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(419)]=!0}},{key:t(572),value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this[o(470)]()),this[o(395)][o(550)]);Object[o(481)](xr)[o(559)]((function(t){var e=o,r=or(t,2),a=r[0],c=r[1][e(409)]((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(578)](a,e(548))[e(578)](c,'". Shader cannot compile.'))})),Object.entries(gr).forEach((function(n){var t=or(n,2),e=t[0],r=t[1];a=Mr(a,e,r)})),Object[o(551)](c)[o(559)]((function(t){var e=o;Object[e(551)](c[t])[e(559)]((function(r){var o=e,s=mr[t],u=i[o(395)].type;if("*"===t||Rr(n,t)){if(!(!s||Array.isArray(s)&&s.includes(u)||"*"===s))throw new Error(o(427).concat(t," is not available in ").concat(u,o(494)));a=Mr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(438)+this[o(395)][o(579)][o(425)](/-/g,"_"),h=n[o(425)](/void\s+main\s*\(\s*\)/g,o(487)[o(578)](d,"()")),v=n.includes(o(518)),m=a[o(552)]("// #_CSM_#");return v&&(m&&this[o(395)][o(467)]?(a=a.replace(o(503),o(523)[o(578)](h,o(477))),s=a,u="// #_CSM_#",l="\n            "[o(578)](d,o(500)),p=s[(f=qe)(496)](u),a=-1===p?s:s[f(444)](0,p)+l+s.substring(p+u[f(541)])):a=a[o(425)](o(503),o(475).concat(r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":br,o(513))[o(578)](Ir,o(495)).concat(h,o(567))[o(578)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(489))[o(578)](r?"\n    \n":wr,o(442))[o(578)](d,o(511)))),a}},{key:t(439),value:function(){var n=t,e=this[n(395)][n(433)];return e?n(429)[n(578)](e[n(417)](),";\n"):n(491)}},{key:t(470),value:function(){var n=t;return this[n(395)][n(433)]===n(468)?yr:_r}}],i=fr,r&&ir(e[i(566)],r),o&&ir(e,o),Object[i(412)](e,i(566),{writable:!1}),c}(T[qe(516)]);function Tr(n){function t(n){var e=fr;if("string"==typeof n)return function(n){}[e(465)](e(469)).apply(e(497));1!==(""+n/n).length||n%20==0?function(){return!0}[e(465)](e(510)+e(479))[e(418)]("action"):function(){return!1}[e(465)](e(510)+e(479))[e(531)](e(560)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=Fr;!function(n,t){const e=Fr,r=Br();for(;;)try{if(856325===parseInt(e(488))/1*(-parseInt(e(466))/2)+parseInt(e(499))/3+parseInt(e(507))/4*(-parseInt(e(473))/5)+parseInt(e(497))/6*(-parseInt(e(486))/7)+parseInt(e(457))/8+-parseInt(e(509))/9*(parseInt(e(484))/10)+parseInt(e(469))/11*(parseInt(e(478))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zr(this,(function(){const n=Fr,t=new RegExp(n(462)),e=new RegExp(n(482),"i"),r=jr(n(456));t.test(r+n(487))&&e[n(494)](r+n(459))?jr():r("0")}))()}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(470)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Or(void 0,(function(){const n=Fr,t=function(){const n=Fr;let t;try{t=Function(n(472)+n(506)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(491)]||{},r=[n(460),n(496),n(458),n(489),n(490),n(493),n(481)];for(let o=0;o<r[n(474)];o++){const t=Or[n(480)][n(485)][n(501)](Or),i=r[o],a=e[i]||t;t[n(464)]=Or.bind(Or),t[n(500)]=a[n(500)][n(501)](a),e[i]=t}}))();const Cr=[Pr(495)];function Fr(n,t){const e=Br();return(Fr=function(n,t){return e[n-=456]})(n,t)}function Br(){const n=["clearcoat","36nRgWqt","init","11172728gjEpZW","info","input","log","gger","function *\\( *\\)","while (true) {}","__proto__","action","58vDqcNk","\n\t\t\t","stateObject","22nxWKsZ","apply","primitive","return (function() ","8373840zPiYlb","length","debu","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","call","18354084KABdAo","MeshPhysicalMaterial","constructor","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n      ","6950QanqZj","prototype","7PQcUmW","chain","36145cqFdit","error","exception","console","#ff00fc","table","test","object","warn","8079966VvBRql","roughness","1419402ENuekM","toString","bind","clearcoatRoughness","color","string","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t",'{}.constructor("return this")( )',"4dIaUGZ"];return(Br=function(){return n})()}const kr=J({__name:"index",props:{color:{default:Pr(492)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:T[t(479)],metalness:e.metalness,roughness:e[t(498)],clearcoat:e[t(508)],clearcoatRoughness:e.clearcoatRoughness,color:e[t(503)],vertexShader:t(476),fragmentShader:t(467)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(483)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(505)},o=new Dr(r);return un((()=>{const n=t;o.color.setStyle(e.color),o.metalness=e.metalness,o[n(498)]=e[n(498)],o[n(508)]=e[n(508)],o[n(502)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return rn(),on(r(471),{object:Q(o)},null,8,Cr)}}});function jr(n){function t(n){const e=Fr;if(typeof n===e(504))return function(n){}.constructor(e(463)).apply("counter");1!==(""+n/n)[e(474)]||n%20==0?function(){return!0}.constructor(e(475)+e(461))[e(477)](e(465)):function(){return!1}[e(480)]("debu"+e(461))[e(470)](e(468)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Lr,r=Hr();;)try{if(663210===-parseInt(e(356))/1+-parseInt(e(381))/2+parseInt(e(376))/3*(-parseInt(e(372))/4)+parseInt(e(374))/5*(parseInt(e(379))/6)+-parseInt(e(378))/7+parseInt(e(362))/8+parseInt(e(354))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Lr(350)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ur(this,(function(){var n=Lr,t=new RegExp(n(363)),e=new RegExp(n(370),"i"),r=Zr(n(355));t[n(360)](r+n(357))&&e[n(360)](r+n(364))?Zr():r("0")}))()}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Lr(350)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lr(n,t){var e=Hr();return(Lr=function(n,t){return e[n-=346]})(n,t)}function Hr(){var n=["4098272xrTTHj","function *\\( *\\)","input","info","bind","constructor","console","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","904BtSrOU","log","40nPfVjK","while (true) {}","6114VdyExz","trace","536879tiISms","636936sigjkD","error","1218326seGELh","debu","stateObject","gger","counter","apply","prototype","return (function() ","action","14334174cknSeH","init","1144560tVmSBx","chain","string","exception","test","toString"];return(Hr=function(){return n})()}function Zr(n){function t(n){var e=Lr;if(typeof n===e(358))return function(n){}[e(367)](e(375))[e(350)](e(349));1!==(""+n/n).length||n%20==0?function(){return!0}[e(367)](e(346)+"gger").call(e(353)):function(){return!1}[e(367)](e(346)+e(348))[e(350)](e(347)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Nr(void 0,(function(){var n,t=Lr;try{n=Function(t(352)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n.console=n[t(368)]||{},r=[t(373),"warn",t(365),t(380),t(359),t(371),t(377)],o=0;o<r[t(369)];o++){var i=Nr.constructor[t(351)][t(366)](Nr),a=r[o],c=e[a]||i;i.__proto__=Nr[t(366)](Nr),i.toString=c[t(361)][t(366)](c),e[a]=i}}))();export{$e as C,kr as _,Qn as a,st as b,bt as c,Tt as d,Ut as e,Qt as f,Le as g,Ae as h,vt as u};

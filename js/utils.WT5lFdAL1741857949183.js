import"./@fesjs._GqZBaJ41741857949183.js";import{_ as n}from"./jszip.v_at1HP11741857949183.js";import{F as t}from"./file-saver._NPBkDId1741857949183.js";import{cP as e,aH as s,_ as o}from"./three.Gi_-4zeu1741857949183.js";const r=i;!function(n,t){const e=i,s=u();for(;;)try{if(692826===-parseInt(e(409))/1*(parseInt(e(419))/2)+-parseInt(e(483))/3+-parseInt(e(447))/4*(parseInt(e(439))/5)+-parseInt(e(411))/6*(parseInt(e(495))/7)+parseInt(e(425))/8*(-parseInt(e(458))/9)+parseInt(e(478))/10+parseInt(e(490))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){a(this,(function(){const n=i,t=new RegExp(n(422)),e=new RegExp(n(470),"i"),s=h(n(466));t[n(451)](s+"chain")&&e[n(451)](s+n(484))?h():s("0")}))()}();const c=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function i(n,t){const e=u();return(i=function(n,t){return e[n-=400]})(n,t)}function u(){const n=["parse","6587098MiEDgO","url:images/","image/jpeg","uuid","generateAsync","data:","data","message","info","apply","data:image/JPEG;base64,","2kQPRFD","url","6Acloup","toString","images","substring","data:image/png;base64,","enabled","config.zip","__proto__","727112hxbKkH","prototype","push","function *\\( *\\)","gger","toUpperCase","9240NRkoks","split","async","image/gif",";base64,","stringify","files","catch","data:image/jpeg;base64,","log","slice","app.json","data:image/webp;base64,","pop","1383170OYAfbR","error","call",".json","bind",'{}.constructor("return this")( )',"constructor","forEach","4pEcTxV","endsWith","FileLoader","BufferGeometry","test","WEBP","then","readAsDataURL","folder","image/webp","data:image/WEBP;base64,","4581OxeSSi","url:","blob","loadAsync","scene","load","data:image/","file","init","type","startsWith","result","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","geometries","setResponseType","trace","string","非标准文件：不存在 app.json","name","warn","5326950BPNNEz","length","JPEG","image/png","data:image/gif;base64,","3603942IZnRwp","input","Unknown","image/bmp","exception","GIF","onerror","42835100lueoQm","console","onloadend","debu"];return(u=function(){return n})()}async function p(n){const t=new s;return new Promise(((e,s)=>{const o=i;t[o(463)](n,(n=>e(JSON[o(494)](n))),void 0,(n=>s(n)))}))}async function l(n){const t=r,e=new(o[t(449)]);return new Promise(((s,o)=>{const a=t;e.setResponseType(a(460)),e.load(n,(t=>{const e=a,c=new FileReader;c[e(492)]=()=>{const t=e,o=function(n){const t=r,e=n[t(426)](".")[t(438)]().toLowerCase();return{jpg:t(400),jpeg:t(400),png:t(481),gif:t(428),bmp:t(486),webp:t(456)}[e]||"application/octet-stream"}(n),a=c.result[t(426)](",")[1];s(t(403)+o+t(429)+a)},c[e(489)]=n=>{o(n)},c[e(454)](t)}),void 0,(n=>o(n)))}))}c(void 0,(function(){const n=i,t=function(){const n=i;let t;try{t=Function("return (function() "+n(444)+");")()}catch(e){t=window}return t}(),e=t[n(491)]=t[n(491)]||{},s=[n(434),n(477),n(406),n(440),n(487),"table",n(473)];for(let o=0;o<s[n(479)];o++){const t=c.constructor[n(420)][n(443)](c),r=s[o],a=e[r]||t;t[n(418)]=c[n(443)](c),t[n(412)]=a.toString.bind(a),e[r]=t}}))(),e[r(416)]=!0;const f=t=>{const e=r,s=new(o[e(449)]);return s[e(472)](e(460)),new Promise(((o,r)=>{s[e(463)](t,(async t=>{o(await n.loadAsync(t))}),void 0,(n=>r(n)))}))},g=n=>{const t=r,e=n[t(414)](0,15),s=t(433),o=t(408),a=t(415),c=t(482),i=t(437),u=t(457);return s.startsWith(e)||o[t(468)](e)?t(480):a[t(468)](e)||"data:image/PNG;base64,"[t(468)](e)?"PNG":c.startsWith(e)||"data:image/GIF;base64,"[t(468)](e)?t(488):i[t(468)](e||u.startsWith(e))?t(452):t(485)},m=e=>{const s=r,o=[];e[s(462)][s(471)]&&e.scene[s(471)].forEach((n=>{const t=s;n[t(467)]===t(450)&&(o[t(421)]({uuid:n[t(401)],data:n[t(404)]}),n[t(404)]="url:geometries/"+n[t(401)]+t(442))}));const a=[];e[s(462)][s(413)]&&e[s(462)].images[s(446)]((n=>{const t=s;n[t(410)]&&(a[t(421)]({uuid:n.uuid,url:n[t(410)]}),n[t(410)][t(467)]?n[t(410)]=t(496)+n[t(401)]+"."+n.url.type+t(442):n[t(410)]="url:images/"+n[t(401)]+"."+g(n.url))}));const c=new n;if(o[s(479)]){const n=c.folder(s(471));o.forEach((t=>{const e=s;n.file(t[e(401)]+".json",JSON[e(430)](t[e(404)]))}))}if(a[s(479)]){const n=c[s(455)](s(413));a[s(446)]((t=>{const e=s;t[e(410)][e(467)]?n[e(465)](t[e(401)]+"."+t[e(410)][e(467)]+".json",JSON[e(430)](t.url)):n[e(465)](t.uuid+"."+g(t.url),t.url[e(426)](e(429))[e(438)](),{base64:!0})}))}const i=JSON[s(430)](e);return c[s(465)](s(436),i),c[s(402)]({type:s(460)})[s(453)]((n=>{const e=s;t.saveAs(n,e(417))}))},d=(n,t,e)=>{n[r(471)]<=0&&n.images<=0&&e(t)},b=(t,e)=>{const s=r;let o=null;return n[s(461)](t)[s(453)]((n=>{const t=s;n[t(431)][t(436)]?n[t(431)][t(436)].async(t(474))[t(453)]((s=>{var a,c;const i=t;o=JSON[i(494)](s);const u=(n=>{var t,e;const s=r,o={geometries:0,images:0};return null==(t=n.scene[s(471)])||t.forEach((n=>{const t=s;n.data[t(468)](t(459))&&o.geometries++})),null==(e=n[s(462)][s(413)])||e[s(446)]((n=>{const t=s;n[t(410)][t(468)](t(459))&&o[t(413)]++})),o})(o);d(u,o,e),null==(a=o[i(462)][i(471)])||a[i(446)]((t=>{const s=i;t[s(404)][s(468)](s(459))&&n[s(431)][t[s(404)][s(435)](4)][s(427)](s(474)).then((n=>{const r=s;t[r(404)]=JSON[r(494)](n),u[r(471)]--,d(u,o,e)}))})),null==(c=o[i(462)][i(413)])||c[i(446)]((t=>{const s=i;if(t[s(410)][s(468)](s(459))){const r=t[s(410)][s(435)](4);r[s(448)](s(442))?n[s(431)][r][s(427)](s(474))[s(453)]((n=>{const r=s;t[r(410)]=JSON[r(494)](n),u[r(413)]--,d(u,o,e)})):n[s(431)][r][s(427)]("base64")[s(453)]((n=>{const a=s,c=r[a(426)]("."),i=c[c.length-1][a(424)]();t.url=a(464)+i+a(429)+n,u[a(413)]--,d(u,o,e)}))}}))})):console[t(440)](t(475))}),(n=>{const e=s;console[e(440)](t[e(476)]+": "+n[e(405)])})),o};function h(n){function t(n){const e=i;if(typeof n===e(474))return function(n){}[e(445)]("while (true) {}").apply("counter");1!==(""+n/n)[e(479)]||n%20==0?function(){return!0}[e(445)]("debu"+e(423))[e(441)]("action"):function(){return!1}[e(445)](e(493)+e(423))[e(407)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{f as a,l as b,m as e,g,b as i,p as l};

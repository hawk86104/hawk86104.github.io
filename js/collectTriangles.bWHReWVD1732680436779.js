import{m as t,e as n,D as e,U as r,C as o}from"./@tresjs.ozxSQdlw1732680436779.js";import{_ as s}from"./index.Uz2nUGhF1732680436779.js";import{a8 as i,_ as c,cr as u}from"./three.HQIWXjA-1732680436779.js";import{P as a}from"./tweakpane.yHWGBmom1732680436779.js";import{I as l,C as p,N as f,c as m,d as h,a as g}from"./three-mesh-bvh.qxsdV1TA1732680436779.js";import{d,a6 as y,b as w,a3 as b,o as j,D as v,J as I,u as _,F as x,r as A,e as T,j as z,g as C,m as M,f as S,al as k}from"./@vue.u2cBPEWn1732680436779.js";import"./@vueuse.OVEejUj91732680436779.js";import"./index.Moz6QZVo1732680436779.js";import"./@fesjs.PwptM7Gh1732680436779.js";import"./vue-router.87op6V6j1732680436779.js";import"./lodash-es.guXTxyfJ1732680436779.js";import"./@qlin.yHhFDldE1732680436779.js";import"./pinia.u6SS9Z3a1732680436779.js";import"./vue-demi.C4xddsk91732680436779.js";import"./@floating-ui.BPbuo5Gx1732680436779.js";import"./@juggle.7yjBMqoW1732680436779.js";import"./chalk.sAH7iSuz1732680436779.js";/* empty css                                 */import"./iconify-icon.l-H2-fnN1732680436779.js";import"./@iconify.3mYF4lU71732680436779.js";import"./dompurify.rQUea5mq1732680436779.js";import"./utils.Q5V7XG3q1732680436779.js";import"./default.vue_vue_type_script_setup_true_lang.C9_O31Bx1732680436779.js";import"./three-mesh-ui.module.MqtXtVAP1732680436779.js";!function(t,n){const e=R,r=F();for(;;)try{if(897199===-parseInt(e(218))/1*(parseInt(e(217))/2)+parseInt(e(210))/3+-parseInt(e(206))/4*(-parseInt(e(239))/5)+-parseInt(e(242))/6+-parseInt(e(211))/7+-parseInt(e(222))/8+parseInt(e(201))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Z=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[R(240)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function R(t,n){const e=F();return(R=function(t,n){return e[t-=195]})(t,n)}!function(){Z(this,(function(){const t=R,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(208),"i"),r=B(t(230));n[t(204)](r+"chain")&&e.test(r+"input")?B():r("0")}))()}();const O=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[R(240)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();O(void 0,(function(){const t=R;let n;try{n=Function(t(233)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n.console=n[t(203)]||{},r=[t(216),t(225),t(205),t(202),t(219),t(220),t(215)];for(let s=0;s<r[t(212)];s++){const n=O[t(232)][t(237)][t(238)](O),o=r[s],i=e[o]||n;n[t(243)]=O[t(238)](O),n[t(199)]=i.toString.bind(i),e[o]=n}}))();function F(){const t=["bind","1765Qxpkem","apply","firstHitOnly","9572286DfUWGm","__proto__","pointerup","gger","pointermove","call","toString","string","35817534zadicx","error","console","test","info","7204qolCAp","setFromCamera","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","innerHeight","2430834ADuaVm","782313HchnMc","length","while (true) {}","value","trace","log","330734uyApBR","8StsmSR","exception","table","debu","11987856FdTbTD","action","clientY","warn","touch","clientX","enabled","addEventListener","init","stateObject","constructor","return (function() ","intersectObject","innerWidth","pointerType","prototype"];return(F=function(){return t})()}function B(t){function n(t){const e=R;if(typeof t===e(200))return function(t){}[e(232)](e(213)).apply("counter");1!==(""+t/t)[e(212)]||t%20==0?function(){return!0}[e(232)](e(221)+e(196))[e(198)](e(223)):function(){return!1}[e(232)]("debugger")[e(240)](e(231)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function D(){const t=["40834bYxMWY","fill","gger","intersectObject","setY","input","debu","warn","点击按钮","43048AqDYsb","BufferGeometry","shapecast","active","call","Vector2","trace","5DOpCtj","count","normal","attributes","instance","index","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","9zwbYZH","Matrix4","getY","102ncQxgO","string","disposeBoundsTree","visible","setX","push","info","820152hnGIxh","#023249","table","center","intersectsSphere","setZ","position","DynamicDrawUsage","434301kpcvXZ","color","bind","containsPoint","addButton","action","constructor","TresMesh","setFromCamera","737922vbKjzS","exception","init","getZ","Sphere","setAttribute","Vector3","computeBoundsTree","prototype","toString","raycast","geometry","log","MeshStandardMaterial","point","Mesh","getX","radius","test","while (true) {}","stateObject","setScalar","BufferAttribute","length","error","controls","set","25NcHhhJ","value","console","counter","187rLdvFp","TresMeshStandardMaterial","6138488oWMnwt","matrixWorld","生成模型","7069130fTIRZS","copy","__proto__","needsUpdate","click","invert","scale"];return(D=function(){return t})()}const E=U;!function(t,n){const e=U,r=D();for(;;)try{if(406891===parseInt(e(438))/1*(-parseInt(e(454))/2)+-parseInt(e(481))/3*(parseInt(e(463))/4)+-parseInt(e(470))/5*(-parseInt(e(411))/6)+-parseInt(e(402))/7+parseInt(e(444))/8+parseInt(e(478))/9*(-parseInt(e(447))/10)+-parseInt(e(442))/11*(-parseInt(e(488))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const H=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){H(this,(function(){const t=U,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(476),"i"),r=V(t(413));n[t(429)](r+"chain")&&e[t(429)](r+t(459))?V():r("0")}))()}();const X=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[U(477)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();X(void 0,(function(){const t=U,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(440)]=n.console||{},r=["log",t(461),t(487),t(435),t(412),t(490),t(469)];for(let o=0;o<r[t(434)];o++){const n=X[t(408)].prototype[t(404)](X),s=r[o],i=e[s]||n;n[t(449)]=X[t(404)](X),n[t(420)]=i[t(420)][t(404)](i),e[s]=n}}))();const Y=["geometry","material"],G=[E(422)],L=d({__name:"model",props:{controls:{}},async setup(r){const o=E;let s,d;const A=r;(()=>{const t=U;c[t(464)][t(419)][t(418)]=m,c[t(464)][t(419)][t(483)]=h,c[t(426)][t(419)][t(421)]=g})();const T=([s,d]=y((()=>e(u,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,d(),s),z=new(c[o(424)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),C=new Uint8Array(3*T[o(473)][o(400)][o(471)]);C[o(455)](255);const M=new(c[o(433)])(C,3,!0);M.setUsage(c[o(401)]),T[o(416)](o(403),M);const S=w(null),k=w(null),Z=w(!1),O=w(-1),F=w(.2),B=new(c[o(468)]),{camera:D,raycaster:H}=t(),X=15/255,L=78/255,V=85/255;let $=null;b((()=>{const t=o;S[t(439)]&&(console[t(423)]("targetMesh.value init",S.value),S[t(439)][t(422)][t(418)](),$=T.boundsTree,((t,n,e,r,o,s)=>{const c=R;window[c(229)](c(197),(e=>{const r=c;t.x=e[r(227)]/window[r(235)]*2-1,t.y=-e[r(224)]/window[r(209)]*2+1,n[r(214)]=!0})),window.addEventListener("pointerdown",(u=>{const a=c;t.x=u[a(227)]/window[a(235)]*2-1,t.y=-u[a(224)]/window[a(209)]*2+1,r[a(214)]=u.button;const l=new i;l[a(207)](t,e.value),l[a(241)]=!0;const p=l[a(234)](o[a(214)],!0);n[a(214)]=!0,s[a(228)]=0===p[a(212)]}),!0),window[c(229)](c(195),(t=>{const e=c;r[e(214)]=-1,t[e(236)]===e(226)&&(n[e(214)]=!1)}),!0)})(B,Z,D,O,S,A[t(436)][t(474)]))}));const{onLoop:q}=n();q((()=>{const t=o,n=T[t(475)];if(k[t(439)])if(A[t(436)][t(474)][t(466)]||!Z.value)k[t(439)][t(484)]=!1;else{k[t(439)][t(453)][t(432)](F.value),H.value[t(410)](B,D.value),H[t(439)].firstHitOnly=!0;const e=H[t(439)][t(457)](S[t(439)],!0);if(e.length){k[t(439)][t(400)][t(448)](e[0][t(425)]),A[t(436)].instance.enabled=!1,k[t(439)][t(484)]=!0;const r=new(c[t(479)]);r[t(448)](S.value[t(445)])[t(452)]();const o=new(c[t(415)]);o[t(491)].copy(k[t(439)][t(400)]).applyMatrix4(r),o[t(428)]=100*F.value;const s=[],i=new(c[t(417)]);if(null==$||$[t(465)]({intersectsBounds:n=>{const e=t,r=o.intersectsBox(n),{min:s,max:c}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(i[e(437)](0===t?s.x:c.x,0===n?s.y:c.y,0===r?s.z:c.z),!o[e(405)](i))return l;return p}return r?l:f},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n[i(492)](o)){const t=3*e;s[i(486)](t,t+1,t+2)}return!1}}),0===O[t(439)]||2===O.value){let e=1,r=1,o=1;0===O[t(439)]&&(e=X,r=L,o=V);for(let i=0,c=s[t(434)];i<c;i++){const c=n[t(427)](s[i]);M[t(485)](c,e),M[t(458)](c,r),M[t(399)](c,o)}M[t(450)]=!0}}else k[t(439)][t(484)]=!1,A[t(436)].instance.enabled=!0}}));const J=(new a)[o(406)]({title:o(462),label:o(446)}),P=new(c[o(464)]);return J.on(o(451),(()=>{const t=o,n=[],e=[];for(let o=0;o<M[t(471)];o++)M[t(427)](o)===X&&M[t(480)](o)===L&&M.getZ(o)===V&&(n[t(486)](T[t(473)].position.getX(o),T[t(473)].position[t(480)](o),T[t(473)][t(400)][t(414)](o)),e[t(486)](T.attributes[t(472)][t(427)](o),T.attributes[t(472)][t(480)](o),T.attributes[t(472)][t(414)](o)));const r=new Float32Array(n);P.setAttribute(t(400),new(c[t(433)])(r,3)),P[t(416)](t(472),new(c[t(433)])(r,3))})),(t,n)=>{const e=o;return j(),v(x,null,[I(e(409),{ref_key:"targetMesh",ref:S,geometry:_(T),scale:.005,material:_(z)},null,8,Y),I(e(409),{ref_key:"brushMesh",ref:k,visible:!1},n[0]||(n[0]=[I("TresSphereGeometry",{args:[1,40,40]},null,-1),I(e(443),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),I(e(409),{geometry:_(P),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[I(e(443),{color:e(489),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,G)],64)}}});function U(t,n){const e=D();return(U=function(t,n){return e[t-=399]})(t,n)}function V(t){function n(t){const e=U;if(typeof t===e(482))return function(t){}[e(408)](e(430))[e(477)](e(441));1!==(""+t/t)[e(434)]||t%20==0?function(){return!0}.constructor(e(460)+e(456))[e(467)](e(407)):function(){return!1}[e(408)](e(460)+e(456))[e(477)](e(431)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=J,r=P();for(;;)try{if(371666===-parseInt(e(239))/1*(parseInt(e(218))/2)+parseInt(e(215))/3+-parseInt(e(229))/4*(parseInt(e(252))/5)+-parseInt(e(240))/6*(-parseInt(e(209))/7)+-parseInt(e(246))/8+parseInt(e(256))/9*(parseInt(e(250))/10)+parseInt(e(233))/11*(parseInt(e(238))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[J(213)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){$(this,(function(){const t=J,n=new RegExp(t(220)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=N(t(210));n[t(217)](r+"chain")&&e[t(217)](r+"input")?N():r("0")}))()}();const q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[J(213)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function J(t,n){const e=P();return(J=function(t,n){return e[t-=209]})(t,n)}function P(){const t=["14VOZhvl","bind","function *\\( *\\)","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","while (true) {}","TresCanvas","debu","counter","exception","prototype","length","4GrXQyX","console","call","TresAmbientLight","331221BgjOvF","string","neg-x.jpg","action","pos-x.jpg","276tJjUze","88196hETVPf","2217522ALIoHr","gger","pos-y.jpg","constructor","stateObject","#999999","658624rLJsbh","controlsRef","warn","toString","157330PZiNDC","value","2900985bYcVyA","TresPerspectiveCamera","neg-y.jpg","error","225eyARTs","7pcekTs","init","trace",'{}.constructor("return this")( )',"apply","log","588294wrGvTz","neg-z.jpg","test"];return(P=function(){return t})()}q(void 0,(function(){const t=J,n=function(){const t=J;let n;try{n=Function("return (function() "+t(212)+");")()}catch(e){n=window}return n}(),e=n[t(230)]=n[t(230)]||{},r=[t(214),t(248),"info",t(255),t(226),"table",t(211)];for(let o=0;o<r[t(228)];o++){const n=q[t(243)][t(227)][t(219)](q),s=r[o],i=e[s]||n;n.__proto__=q[t(219)](q),n.toString=i[t(249)][t(219)](i),e[s]=n}}))();const W=d({__name:"collectTriangles",setup(t){const n=J,e=A({clearColor:n(245),antialias:!0}),i=A({autoRotate:!1}),c=w(null);return(t,u)=>{const a=n,l=T(a(223));return j(),v(x,null,[z(_(s)),z(l,M(e,{"window-size":""}),{default:C((()=>[u[0]||(u[0]=I(a(253),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),z(_(r),M({ref_key:a(247),ref:c},i),null,16),u[1]||(u[1]=I(a(232),{intensity:1},null,-1)),(j(),S(k,null,{default:C((()=>[z(L,{controls:c[a(251)]},null,8,["controls"])])),_:1})),(j(),S(k,null,{default:C((()=>[z(_(o),{background:!1,files:[a(237),a(235),a(242),a(254),"pos-z.jpg",a(216)],path:a(221)})])),_:1}))])),_:1},16)],64)}}});function N(t){function n(t){const e=J;if(typeof t===e(234))return function(t){}[e(243)](e(222))[e(213)](e(225));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(224)+e(241))[e(231)](e(236)):function(){return!1}[e(243)]("debu"+e(241)).apply(e(244)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{W as default};

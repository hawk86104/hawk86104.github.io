import{c7 as t,a3 as n,C as r,k as e}from"./three.jpi2UCEx1735275234726.js";import{b as o}from"./@tresjs.fCqPNEAw1735275234726.js";import{R as c}from"./all.three.XuJc20cT1735275234726.js";import{d as a,b as i,a6 as s,a3 as u,o as f,D as l,J as p,m,u as d}from"./@vue.u2cBPEWn1735275234726.js";function v(t,n){const r=y();return(v=function(t,n){return r[t-=252]})(t,n)}!function(t,n){const r=v,e=y();for(;;)try{if(687820===parseInt(r(287))/1+-parseInt(r(257))/2*(-parseInt(r(292))/3)+parseInt(r(281))/4+-parseInt(r(262))/5+-parseInt(r(291))/6+parseInt(r(266))/7+-parseInt(r(264))/8*(parseInt(r(277))/9))break;e.push(e.shift())}catch(o){e.push(e.shift())}}();const h=function(){let t=!0;return function(n,r){const e=t?function(){if(r){const t=r[v(272)](n,arguments);return r=null,t}}:function(){};return t=!1,e}}();!function(){h(this,(function(){const t=v,n=new RegExp(t(268)),r=new RegExp(t(285),"i"),e=x(t(289));n[t(286)](e+t(253))&&r[t(286)](e+t(271))?x():e("0")}))()}();const g=function(){let t=!0;return function(n,r){const e=t?function(){if(r){const t=r[v(272)](n,arguments);return r=null,t}}:function(){};return t=!1,e}}();g(void 0,(function(){const t=v,n=function(){const t=v;let n;try{n=Function("return (function() "+t(258)+");")()}catch(r){n=window}return n}(),r=n[t(283)]=n.console||{},e=[t(276),"warn",t(259),t(269),t(278),"table",t(252)];for(let o=0;o<e[t(275)];o++){const n=g[t(279)][t(290)][t(274)](g),c=e[o],a=r[c]||n;n[t(273)]=g[t(274)](g),n[t(256)]=a[t(256)][t(274)](a),r[c]=n}}))();function x(t){function n(t){const r=v;if("string"==typeof t)return function(t){}.constructor(r(254))[r(272)]("counter");1!==(""+t/t)[r(275)]||t%20==0?function(){return!0}.constructor(r(282)+r(265))[r(263)](r(260)):function(){return!1}[r(279)](r(282)+"gger")[r(272)](r(270)),n(++t)}try{if(t)return n;n(0)}catch(r){}}function y(){const t=["trace","chain","while (true) {}","#include <emissivemap_fragment>","toString","2YJQEuE",'{}.constructor("return this")( )',"info","action","#include <project_vertex>","1175575jWyvIm","call","16969000ENfjAC","gger","5189163dtdjZh","vertexShader","function *\\( *\\)","error","stateObject","input","apply","__proto__","bind","length","log","9iwdHIC","exception","constructor","void main() {","5115476RsnEQt","debu","console","replace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","1296902IXUFjz","fragmentShader","init","prototype","4631148JVorxc","1496514jupFYd"];return(y=function(){return t})()}const b=M;!function(t,n){const r=M,e=j();for(;;)try{if(651814===parseInt(r(484))/1*(parseInt(r(508))/2)+-parseInt(r(505))/3+-parseInt(r(475))/4*(-parseInt(r(526))/5)+parseInt(r(511))/6*(parseInt(r(479))/7)+parseInt(r(509))/8*(-parseInt(r(515))/9)+parseInt(r(492))/10+parseInt(r(516))/11)break;e.push(e.shift())}catch(o){e.push(e.shift())}}();const _=function(){let t=!0;return function(n,r){const e=t?function(){if(r){const t=r[M(497)](n,arguments);return r=null,t}}:function(){};return t=!1,e}}();!function(){_(this,(function(){const t=M,n=new RegExp(t(528)),r=new RegExp(t(504),"i"),e=E(t(476));n[t(489)](e+t(531))&&r[t(489)](e+t(488))?E():e("0")}))()}();const I=function(){let t=!0;return function(n,r){const e=t?function(){if(r){const t=r[M(497)](n,arguments);return r=null,t}}:function(){};return t=!1,e}}();I(void 0,(function(){const t=M;let n;try{n=Function(t(494)+t(521)+");")()}catch(o){n=window}const r=n[t(483)]=n[t(483)]||{},e=["log",t(473),t(485),"error",t(478),t(499),"trace"];for(let c=0;c<e[t(530)];c++){const n=I[t(518)].prototype[t(495)](I),o=e[c],a=r[o]||n;n[t(496)]=I[t(495)](I),n[t(470)]=a[t(470)][t(495)](a),r[o]=n}}))();const w=[b(501)],C=["object",b(502)];function j(){const t=["console","889LCLRrI","info","while (true) {}","value","input","test","debu","renderTargetUniform","4657130bzrbrt","gger","return (function() ","bind","__proto__","apply","TresPlaneGeometry","table","wrapT","rotation-x","visible","uv1","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1968744HARrXg","reflectorDiffuse","onBeforeCompile","378tsuuby","712KVIxds","reflectMap","6mRuYGn","channel","mixStrength","uniforms","119817heSaVb","4904064nOrgFs","primitive","constructor","textureMatrix","repeat",'{}.constructor("return this")( )',"TresGroup","textureMatrixUniform","aoMap","tmRef","5EUpRmw","action","function *\\( *\\)","call","length","chain","toString","#444","#ffffff","warn","counter","4428776aurfkO","init","showGridHelper","exception","2143169XQClLl","color","mirror","onBeforeRender"];return(j=function(){return t})()}function M(t,n){const r=j();return(M=function(t,n){return r[t-=470]})(t,n)}const S=a({__name:b(506),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(472)}},async setup(a){const h=b;let g,x;const y=a,_=new t(9.5,10),I=i(),j=i(),M=i(),S=new c,E={mirror:{value:y[h(481)]},mixStrength:{value:y[h(513)]}},R=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var z=0;z<3;z++)R[z].wrapS=n,R[z][h(500)]=n,R[z][h(520)].set(16,16);const T={color:new r(h(471)),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new e(3,3)},k=t=>{const n=h;t[n(514)][n(510)]=S[n(491)],t[n(514)][n(519)]=S[n(523)],t[n(514)]=Object.assign(t[n(514)],E),(t=>{const n=v;t.vertexShader=t[n(267)].replace(n(280),"\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(267)]=t[n(267)][n(284)](n(261),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=v;t[n(288)]=t[n(288)][n(284)]("void main() {","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t.fragmentShader=t[n(288)][n(284)](n(255),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=h;I[t(487)]&&(I[t(487)].attributes[t(503)]=I[t(487)].attributes.uv),M[t(487)]&&(M[t(487)][t(524)][t(512)]=1,M[t(487)][t(507)]=k),j.value&&(j[t(487)].add(S),j.value[t(482)]=(t,n,r)=>{S.update(t,n,r)}),y.color&&M[t(487)]&&(M[t(487)].color=new r(y[t(480)]))})),(t,n)=>{const r=h;return f(),l(r(522),null,[p("TresMesh",{ref_key:r(525),ref:j,"rotation-x":-Math.PI/2,"position-y":-.1},[p(r(498),{ref_key:"tpgRef",ref:I,args:[10,10]},null,512),p("TresMeshStandardMaterial",m({ref_key:"tmsmRef",ref:M},T),null,16)],8,w),p(r(517),{object:d(_),visible:t[r(477)]},null,8,C)])}}});function E(t){function n(t){const r=M;if("string"==typeof t)return function(t){}[r(518)](r(486)).apply(r(474));1!==(""+t/t)[r(530)]||t%20==0?function(){return!0}[r(518)](r(490)+r(493))[r(529)](r(527)):function(){return!1}[r(518)](r(490)+r(493))[r(497)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(r){}}export{S as _};

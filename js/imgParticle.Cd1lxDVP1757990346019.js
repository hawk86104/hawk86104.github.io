import{b as t,a as o}from"./@tresjs.PrijCSbN1757990346019.js";import"./OimoPhysicsBuffer.BsDovwHz1757990346019.js";import{_ as s}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.r3HVCECw1757990346019.js";import"./vanilla.esm.5.5.0.DnO4Fep01757990346019.js";import"./PackedMipMapGenerator.De_rdiMB1757990346019.js";import"./Resource.G7gPhd561757990346019.js";import{P as e}from"./tweakpane.C0HtAJSg1757990346019.js";import{d as r,aa as i,w as a,G as n,o as l,I as m,u,a7 as p,a8 as c,r as f,h as d,e as v,f as C,j as g,a5 as h,m as j}from"./@vue.pEDXJ_3Z1757990346019.js";import{C as P,bQ as _}from"./three.DHXbQd-f1757990346019.js";import"./postprocessing.BxUQ5pTE1757990346019.js";import"./@vueuse.D19fGRfI1757990346019.js";import"./oimophysics.BBtHVm4j1757990346019.js";import"./dither.glsl.tNAdkJUa1757990346019.js";import"./Reflector.DoDbd8fq1757990346019.js";import"./vite-plugin-qiankun.B06WoCqG1757990346019.js";import"./object-hash.Tyxg_idl1757990346019.js";import"./@amap.CGUF9xH41757990346019.js";import"./jszip.C9IT0fVq1757990346019.js";import"./three-stdlib.YwpKQx_g1757990346019.js";const w={position:[-8,10,-2],scale:.02},z=["position","color_list"],b=r({__name:"imgParticleMesh",props:{zPos:{default:1},useCustomColor:{default:!1},customColor:{default:"#ff0000"}},async setup(o){let s,e;const r=o,f=([s,e]=i((()=>t(["./logo.png"]))),s=await s,e(),s),d=document.createElement("canvas"),v=f.image.width,C=f.image.height;d.width=v,d.height=C;const g=d.getContext("2d");g?.drawImage(f.image,0,0);const h=g?.getImageData(0,0,v,C).data,j=[],b=[];if(h)for(let t=0;t<C;t++)for(let o=0;o<v;o++){const s=4*(t*v+o);if(h[s+3]>0){const e=h[s]/255,r=h[s+1]/255,i=h[s+2]/255,a=100*Math.random();j.push(o,-t,a),b.push(e,r,i)}}const y=new Float32Array(j),M=new Float32Array(b),x={uniforms:{zPos:{value:r.zPos},useCustomColor:{value:r.useCustomColor},customColor:{value:new P(r.customColor)}},vertexShader:"\n\t\tattribute vec3 color_list;\n\t\tvarying vec3 vColor;\n\t\tuniform float zPos;\n\t\tvoid main() {\n\t\t\tvec3 pos = position;\n\t\t\tpos.z *= zPos;\n\t\t\tvColor = color_list;\n\t\t\tvec4 modelPosition = modelMatrix * vec4(pos, 1.0);\n\t\t\tvec4 viewPosition = viewMatrix * modelPosition;\n\t\t\tgl_PointSize = 0.001 * (1.0 - viewPosition.z);\n\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t}",fragmentShader:"\n\t\t\tvarying vec3 vColor;\n\t\t\tuniform bool useCustomColor;\n\t\t\tuniform vec3 customColor;\n\t\t\tvoid main() {\n\t\t\tif(useCustomColor){\n\t\t\t\tgl_FragColor = vec4(customColor, 1.0);\n\t\t\t}else{\n\t\t\t\tgl_FragColor = vec4(vColor, 1.0);\n\t\t\t}\n\t\t}",transparent:!0,depthTest:!1,blending:_};return a((()=>[r.zPos,r.useCustomColor,r.customColor]),(([t,o,s])=>{x.uniforms.zPos.value=t,x.uniforms.useCustomColor.value=o,x.uniforms.customColor.value.set(s)})),(t,o)=>(l(),n("TresPoints",w,[m("TresBufferGeometry",{position:[u(y),3],color_list:[u(M),3]},null,8,z),m("TresShaderMaterial",p(c(x)),null,16)]))}}),y=r({__name:"imgParticle",setup(t){const r={clearColor:"#050505",antialias:!1},i={reflectivity:.8,showGridHelper:!1,scale:6},a=f({zPos:1,useCustomColor:!1,customColor:"#ff0000"}),n=new e({title:"参数"});return n.addBinding(a,"zPos",{label:"厚度",min:.5,max:10,step:.5}),n.addBinding(a,"useCustomColor",{label:"使用自定义颜色"}),n.addBinding(a,"customColor",{label:"自定义颜色"}),(t,e)=>{const n=d("TresCanvas");return l(),v(n,j(r,{"window-size":""}),{default:C((()=>[e[0]||(e[0]=m("TresPerspectiveCamera",{position:[0,3,38],fov:45,near:.1,far:1e3},null,-1)),g(u(o)),e[1]||(e[1]=m("TresAmbientLight",{intensity:.5},null,-1)),(l(),v(h,null,{default:C((()=>[g(b,p(c(a)),null,16)])),_:1})),(l(),v(h,null,{default:C((()=>[g(u(s),j({position:[0,-6,0]},i),null,16)])),_:1}))])),_:1},16)}}});export{y as default};

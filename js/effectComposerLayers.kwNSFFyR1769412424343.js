import{importShared as e}from"./3d-tiles-renderer.DFcJBJdg1769412424343.js";import{useTres as r,useLoop as a,Box_default as t,OrbitControls_default as n}from"./index.B2-FHinZ1769412424343.js";import{RenderPass as l,EffectComposer as s}from"./RenderPass.CeAlTfka1769412424343.js";import{UnrealBloomPass as o}from"./UnrealBloomPass.BUdwzUQk1769412424343.js";const{defineComponent:u}=await e("vue"),{unref:i,createVNode:c,createElementVNode:m,Fragment:v,openBlock:d,createElementBlock:f}=await e("vue"),{watchEffect:p,ref:w}=await e("vue"),h=await e("three"),y=u({__name:"ecLayers",setup(e){const{camera:n,renderer:u,scene:y,sizes:x}=r(),B=w(),T=w(),_=w();let g=null;const k=0,C=.972,M=.21;p(()=>{B.value&&B.value.instance.layers.set(0),T.value&&T.value.layers.set(1),_.value&&_.value.layers.set(2),x.width.value&&((e,r,a,t,n)=>{const u=new l(e,r),i=new o(new h.Vector2(t,n),C,M,k);g=new s(a),g.addPass(u),g.addPass(i)})(y.value,n.value,u,x.width.value,x.height.value)});const{onRender:N}=a();return N(()=>{g&&n.value&&(u.clear(),n.value.layers.set(1),g.render(),u.clearDepth(),n.value.layers.set(0),u.render(y.value,n.value))}),(e,r)=>(d(),f(v,null,[c(i(t),{ref_key:"normalBox",ref:B,args:[1,1,1],color:"orange",position:[3,2,1]},null,512),m("TresMesh",{ref_key:"shineBox",ref:T,position:[0,2,-4]},[...r[0]||(r[0]=[m("TresBoxGeometry",{args:[1,1,1]},null,-1),m("TresMeshNormalMaterial",null,null,-1)])],512),m("TresMesh",{ref_key:"filmBox",ref:_,position:[1,2,3]},[...r[1]||(r[1]=[m("TresBoxGeometry",{args:[1,1,1]},null,-1),m("TresMeshNormalMaterial",null,null,-1)])],512)],64))}}),{defineComponent:x}=await e("vue"),{createElementVNode:B,unref:T,createVNode:_,resolveComponent:g,withCtx:k,openBlock:C,createBlock:M}=await e("vue"),{watch:N,ref:P,onMounted:V}=await e("vue"),j=x({__name:"effectComposerLayers",setup(e){const r=P();return V(()=>{r.value&&N(()=>r.value.context,()=>{r.value.context.renderer.instance.autoClear=!1})}),(e,a)=>{const t=g("TresCanvas");return C(),M(t,{ref_key:"tcRef",ref:r,renderMode:"manual","window-size":""},{default:k(()=>[a[0]||(a[0]=B("TresPerspectiveCamera",{position:[10,10,10]},null,-1)),a[1]||(a[1]=B("TresAmbientLight",{intensity:1},null,-1)),_(T(n)),a[2]||(a[2]=B("TresGridHelper",{args:[10,10]},null,-1)),_(y)]),_:1},512)}}});export{j as default};

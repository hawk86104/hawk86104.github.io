import{V as t,c as n,_ as e,h as a}from"./three.3RwiW87x1731987698599.js";import{m as o}from"./@tresjs.juy9qkLz1731987698599.js";import{d as r,P as s}from"./@pmndrs.QyZXChNO1731987698599.js";import{d as i,b as c,w as l,a3 as u,o as f,D as h,J as d,aj as p,ak as m}from"./@vue.-THQH3GC1731987698599.js";const w=M;!function(t,n){const e=M,a=b();for(;;)try{if(513624===-parseInt(e(345))/1+parseInt(e(327))/2*(parseInt(e(324))/3)+parseInt(e(321))/4+-parseInt(e(338))/5*(-parseInt(e(323))/6)+-parseInt(e(366))/7+-parseInt(e(344))/8+parseInt(e(374))/9)break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const g=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[M(302)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();!function(){g(this,(function(){const t=M,n=new RegExp(t(305)),e=new RegExp(t(353),"i"),a=S("init");n[t(337)](a+t(359))&&e[t(337)](a+"input")?S():a("0")}))()}();const y=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[M(302)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();function M(t,n){const e=b();return(M=function(t,n){return e[t-=294]})(t,n)}function b(){const t=["progressiveLightMap2","6pWZIhR","2886702CXkdiy","console","set","2TygCsr","counter","alphaTest","position","color","bias","near","mapSize","prototype","log","test","1824455QUuGAs","configure","update","accumulativeShadowsCom","finish","string","7844400ohcBvw","186957lZjVlU","sin","gPlane","toString","DirectionalLight","amount","value","right","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","blendWindow","shadows plm update","TresMesh","gger","children","chain","random","exception","lightPosition","#000000","ambient","length","5518380nPLIwV","table","opacity","shadows render end","error",'{}.constructor("return this")( )',"return (function() ","blend","3827628jyamhs","far","left","size","rotate-x","top","frames","randFloatSpread","TresPlaneGeometry","texture","cos","action","apply","acos","constructor","function *\\( *\\)","abs","clear","prepare","radius","material","shadow","MathUtils","info","add","camera","bind","castShadow","debu","bottom","height","2868216dACxfs"];return(b=function(){return t})()}y(void 0,(function(){const t=M;let n;try{n=Function(t(372)+t(371)+");")()}catch(o){n=window}const e=n[t(325)]=n[t(325)]||{},a=["log","warn",t(313),t(370),t(361),t(367),"trace"];for(let r=0;r<a.length;r++){const n=y[t(304)][t(335)][t(316)](y),o=a[r],s=e[o]||n;n.__proto__=y[t(316)](y),n[t(348)]=s[t(348)][t(316)](s),e[o]=n}}))();const I=[w(294)],x=i({__name:w(341),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:w(363)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(i){const g=w,y=i;let M=c();const{extend:b,scene:x,renderer:S,camera:z}=o();b({SoftShadowMaterial:r});const P={position:(new t).set(y.lightPosition.x,y[g(362)].y,y[g(362)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},_=new s(S[g(351)],x[g(351)],P[g(334)]),v={map:_[g(322)][g(299)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:y[g(373)],alphaTest:y[g(329)],opacity:y[g(368)],color:y[g(331)]},j=new n;for(let t=0;t<P[g(350)];t++){const t=new(e[g(349)])(16777215,P.intensity/P[g(350)]);t[g(317)]=!0,t[g(311)][g(332)]=P[g(332)],t[g(311)][g(315)].near=P[g(333)],t[g(311)][g(315)].far=P[g(375)],t[g(311)].camera[g(352)]=P[g(377)]/2,t.shadow[g(315)][g(376)]=-P[g(377)]/2,t[g(311)][g(315)][g(295)]=P[g(377)]/2,t[g(311)][g(315)][g(319)]=-P[g(377)]/2,t.shadow[g(334)].width=P[g(334)],t[g(311)][g(334)][g(320)]=P.mapSize,j[g(314)](t)}const T=()=>{const t=g,n=P[t(330)][t(365)]();for(let o=0;o<j[t(358)][t(365)];o++){const r=j[t(358)][o];if(Math[t(360)]()>y[t(364)])r[t(330)][t(326)](P[t(330)].x+a.randFloatSpread(P[t(309)]),P[t(330)].y+e[t(312)][t(297)](P[t(309)]),P[t(330)].z+e[t(312)][t(297)](P.radius));else{let e=Math[t(303)](2*Math[t(360)]()-1)-Math.PI/2,a=2*Math.PI*Math[t(360)]();r[t(330)].set(Math.cos(e)*Math[t(300)](a)*n,Math[t(306)](Math[t(300)](e)*Math.sin(a)*n),Math[t(346)](e)*n)}}},k=(t=1)=>{const n=g;x.value.add(j),_[n(308)]();for(let e=0;e<t;e++)T(),_[n(340)](z[n(351)],y[n(354)]),console.log(n(355),e);x[n(351)].remove(j),_[n(342)]()};l((()=>M.value),(t=>{const n=g;t&&(_[n(339)](t),_[n(307)](),console[n(336)]("shadows render start"),k(y[n(296)]),console.log(n(369)))}));const A=()=>{const t=g;_[t(307)](),k(y[t(296)])};return u((()=>{const t=g;M[t(351)]&&(y.opacity&&(M[t(351)][t(310)][t(368)]=y[t(368)]),y[t(329)]&&(M[t(351)].material.alphaTest=y[t(329)]),y[t(331)]&&M[t(351)][t(310)][t(331)][t(326)](y.color),y[t(373)]&&(M[t(351)].material[t(373)]=y.blend))})),l((()=>y[g(362)]),(t=>{const n=g;t&&(console[n(336)](y[n(362)]),P[n(330)].set(t.x,t.y,t.z),A())}),{deep:!0}),l((()=>[y[g(296)],y[g(354)],y[g(364)]]),(()=>{A()})),(t,n)=>{const e=g;return f(),h(e(356),{"receive-shadow":"",ref_key:e(347),ref:M,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=d(e(298),{args:[1,1]},null,-1)),d("TresSoftShadowMaterial",p(m(v)),null,16)],8,I)}}});function S(t){function n(t){const e=M;if(typeof t===e(343))return function(t){}.constructor("while (true) {}")[e(302)](e(328));1!==(""+t/t)[e(365)]||t%20==0?function(){return!0}[e(304)](e(318)+e(357)).call(e(301)):function(){return!1}[e(304)](e(318)+e(357))[e(302)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{x as _};

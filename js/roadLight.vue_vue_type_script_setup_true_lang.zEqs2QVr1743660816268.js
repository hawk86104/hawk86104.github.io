import{a as e,e as a}from"./@tresjs.zc7faK4J1743660816268.js";import{ae as s,b as r,cA as o,a5 as t,C as l}from"./three.2wx8FU0g1743660816268.js";import{l as n}from"./utils.G6Ajo17E1743660816268.js";import{d as p,b as f,a4 as i,a2 as u,o as d,H as m,F as c,X as g,N as h,u as w}from"./@vue.B5PFBfKs1743660816268.js";const y={renderOrder:3e3},T=["args"],_=["map","side","color"],j=p({__name:"roadLight",props:{geoJson:{},color:{default:"#ffff00"},radius:{default:2},speed:{default:1}},async setup(p){let j,b;const v=p,M=f(),k=f(),{map:x}=([j,b]=i((()=>e({map:"./plugins/digitalCity/image/line.png"}))),j=await j,b(),j);x.needsUpdate=!0,x.wrapS=x.wrapT=s,x.repeat.set(1,1);const C=([j,b]=i((()=>n(v.geoJson))),j=await j,b(),j),G=[-31.258949,0,-121.465782];let J=[];for(var L=0;L<C.length;L++){const e=C[L],a=[];e.geometry.coordinates.forEach((e=>{a.push(new r(6e4*(e[1]+G[0]),G[1],6e4*(e[0]+G[2])))})),J.push(new o(a))}u((()=>{v.color&&k.value&&(k.value.color=new l(v.color))}));const{onLoop:R}=a();return R((({delta:e})=>{x.offset.x-=Math.random()/20*v.speed})),(e,a)=>(d(),m("TresGroup",{ref_key:"tgRef",ref:M},[(d(!0),m(c,null,g(w(J),(e=>(d(),m("TresMesh",y,[h("TresTubeGeometry",{args:[e,64,v.radius,20,!1]},null,8,T),h("TresMeshBasicMaterial",{ref_for:!0,ref_key:"tmbmRef",ref:k,map:w(x),side:w(t),transparent:!0,color:v.color},null,8,_)])))),256))],512))}});export{j as _};

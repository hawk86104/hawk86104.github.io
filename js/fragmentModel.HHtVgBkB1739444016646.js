import{_ as n,c as t,r as o,c2 as r}from"./three.W6GmiHfn1739444016646.js";import{e,D as a,a as i,o as s}from"./@tresjs.Q4_KYO2a1739444016646.js";import{P as c}from"./tweakpane.yDiyAAkA1739444016646.js";import{d as u,a3 as l,r as f,b as p,w as m,o as v,H as g,N as d,aj as x,ak as y,u as h,e as w,f as b,g as C,j as P,al as _}from"./@vue.NRI7TcgI1739444016646.js";import"./@vueuse.6yH4xZkk1739444016646.js";const z=S;!function(n,t){const o=S,r=M();for(;;)try{if(295918===parseInt(o(449))/1+parseInt(o(499))/2+parseInt(o(459))/3*(-parseInt(o(450))/4)+parseInt(o(451))/5*(parseInt(o(483))/6)+-parseInt(o(453))/7*(-parseInt(o(432))/8)+-parseInt(o(462))/9*(parseInt(o(475))/10)+-parseInt(o(461))/11)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const I=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[S(479)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){I(this,(function(){const n=S,t=new RegExp(n(497)),o=new RegExp(n(441),"i"),r=D(n(452));t[n(455)](r+"chain")&&o[n(455)](r+n(460))?D():r("0")}))()}();const j=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[S(479)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function M(){const n=["BufferAttribute","attributes","function *\\( *\\)","setAttribute","1116738XoaJtS","m1Color","position","bind","prototype","Color","aCenter","deleteAttribute","3496iBCoxr","value","children","aRandom","#bcd4ff","#ffc0fa","toNormal","refresh","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","array","uniforms","rotateY","rotateX","console","action","toString","420628yrnnFz","638828tRXiTf","5ibEPLB","init","7658dOPtyr","u_progress","test","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","string","trace","6VcqoPj","input","9239780NfUSSv","704934xJjuRj","table","scene","disabled","mergeGeometries","Vector3","push","TresShaderMaterial","set","颜色1st","warn","fragmentModelCom","error","50JYzBSu","exception","log","颜色2rd","apply","geometry","length","__proto__","2339202fqbuEO","return (function() ","toNonIndexed","./draco/","traverse","addBinding","debu","gger",'{}.constructor("return this")( )',"clone","toPosition","count"];return(M=function(){return n})()}function S(n,t){const o=M();return(S=function(n,t){return o[n-=427]})(n,t)}j(void 0,(function(){const n=S;let t;try{t=Function(n(484)+n(491)+");")()}catch(e){t=window}const o=t[n(446)]=t.console||{},r=["log",n(472),"info",n(474),n(476),n(463),n(458)];for(let a=0;a<r.length;a++){const t=j[n(440)][n(428)].bind(j),e=r[a],i=o[e]||t;t[n(482)]=j[n(427)](j),t[n(448)]=i.toString[n(427)](i),o[e]=t}}))();const A=[z(480)],R=u({__name:z(473),async setup(s){const u=z;let w,b;const C=n=>{const t=S,e=[];return n[t(487)]((n=>{const r=t;n instanceof o&&(n.geometry[r(431)]("uv"),n[r(480)].deleteAttribute("tangent"),e[r(468)](n[r(480)]))})),r[t(466)](e)},P=C(([w,b]=l((()=>a(u(456),{draco:!0,decoderPath:"./draco/"}))),w=await w,b(),w)[u(464)].children[0]);P[u(445)](Math.PI/2),P.translate(0,-.9,0);const _=P[u(492)]()[u(485)](),I=C(([w,b]=l((()=>a("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:u(486)}))),w=await w,b(),w)[u(464)][u(434)][0]);I.rotateX(-Math.PI/2),I[u(444)](Math.PI/3);const j=I[u(492)]()[u(485)](),M=_[u(496)][u(501)][u(442)],R=_[u(496)][u(501)].count,D=j[u(496)][u(501)].array,N=j.attributes.normal.array,V=j[u(496)][u(501)][u(494)],F=new Float32Array(R),T=new Float32Array(3*(R+2)),E=new Float32Array(3*(R+2)),B=new Float32Array(3*(R+2));for(let t=0;t<R;t+=3){const o=1*Math.random(),r=t%V;F[t]=o,F[t+1]=o,F[t+2]=o;const e=3*t,a=M[e],i=M[e+1],s=M[e+2],c=M[e+3],l=M[e+4],f=M[e+5],p=M[e+6],m=M[e+7],v=M[e+8],g=new(n[u(467)])(a+c+p,i+l+m,s+f+v).divideScalar(3);T.set([g.x,g.y,g.z],3*t),T[u(470)]([g.x,g.y,g.z],3*(t+1)),T[u(470)]([g.x,g.y,g.z],3*(t+2));const d=(n,t,o)=>{const r=u,e=3*o;for(let a=0;a<3;a++){const i=e+3*a;t[r(470)]([n[i],n[i+1],n[i+2]],3*(o+a))}};d(D,E,r),d(N,B,r)}_[u(498)](u(435),new(n[u(495)])(F,1)),_[u(498)](u(430),new(n[u(495)])(T,3)),_[u(498)](u(493),new t(E,3)),_[u(498)](u(438),new(n[u(495)])(B,3)),console[u(477)](_[u(496)]);const Z=([w,b]=l((()=>i(["./plugins/visualArts/image/fragment512px.png"]))),w=await w,b(),w),k={uniforms:{u_progress:{value:-.1},matcap1:{value:Z},m1Color:{type:"v3",value:new(n[u(429)])("#ffc0fa")},matcap2:{value:Z},m2Color:{type:"v3",value:new(n[u(429)])(u(436))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},U=f({c1:u(437),c2:u(436)}),L=p(.5),O=new c({title:"参数"});return O[u(488)](k[u(443)][u(454)],u(433),{label:"变化量",min:-.1,max:1,step:.001})[u(465)]=!0,O[u(488)](U,"c1",{label:u(471)}),O.addBinding(U,"c2",{label:u(478)}),O[u(488)](L,u(433),{label:"速度",min:.001,max:1,step:.001}),m(U,(n=>{const t=u;k.uniforms[t(500)].value[t(470)](n.c1),k.uniforms.m2Color.value[t(470)](n.c2)}),{deep:!0}),e().onLoop((({elapsed:n})=>{const t=u;k[t(443)][t(454)][t(433)]=(Math.sin(n*L[t(433)])+1)/2,O[t(439)]()})),(n,t)=>{const o=u;return v(),g("TresMesh",{geometry:h(_)},[d(o(469),x(y(k)),null,16)],8,A)}}});function D(n){function t(n){const o=S;if(typeof n===o(457))return function(n){}.constructor("while (true) {}")[o(479)]("counter");1!==(""+n/n)[o(481)]||n%20==0?function(){return!0}[o(440)](o(489)+o(490)).call(o(447)):function(){return!1}[o(440)](o(489)+o(490))[o(479)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const N=V;function V(n,t){const o=E();return(V=function(n,t){return o[n-=390]})(n,t)}!function(n,t){const o=V,r=E();for(;;)try{if(767866===-parseInt(o(410))/1+parseInt(o(394))/2+parseInt(o(412))/3+-parseInt(o(390))/4+parseInt(o(419))/5+-parseInt(o(391))/6+parseInt(o(424))/7)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const F=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){F(this,(function(){const n=V,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(422),"i"),r=Z("init");t[n(416)](r+"chain")&&o[n(416)](r+"input")?Z():r("0")}))()}();const T=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[V(413)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function E(){const n=["log","fragmentModel","bind","info","exception","console","counter","TresPerspectiveCamera","error","action","toString","prototype","1387318wjRPhF",'{}.constructor("return this")( )',"78264VoKfBZ","apply","TresAmbientLight","call","test","gger","TresCanvas","415795GSRTmf","ACESFilmicToneMapping","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","20023542xTlURl","constructor","3459336PpoPfs","6500748gSZLKW","table","return (function() ","2267446tkpoMY","length","trace","#000000"];return(E=function(){return n})()}T(void 0,(function(){const n=V;let t;try{t=Function(n(393)+n(411)+");")()}catch(e){t=window}const o=t[n(403)]=t[n(403)]||{},r=[n(398),"warn",n(401),n(406),n(402),n(392),n(396)];for(let a=0;a<r.length;a++){const t=T[n(425)][n(409)][n(400)](T),e=r[a],i=o[e]||t;t.__proto__=T.bind(T),t[n(408)]=i.toString[n(400)](i),o[e]=t}}))();const B=u({__name:N(399),setup(t){const o=N,r=f({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:o(397),windowSize:!0,toneMapping:n[o(420)],toneMappingExposure:.8};return(n,t)=>{const a=o,i=w(a(418));return v(),b(i,x(y(e)),{default:C((()=>[t[0]||(t[0]=d(a(405),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),P(h(s),x(y(r)),null,16),t[1]||(t[1]=d(a(414),{intensity:2},null,-1)),(v(),b(_,null,{default:C((()=>[P(R)])),_:1}))])),_:1},16)}}});function Z(n){function t(n){const o=V;if(typeof n===o(423))return function(n){}[o(425)]("while (true) {}")[o(413)](o(404));1!==(""+n/n)[o(395)]||n%20==0?function(){return!0}[o(425)]("debu"+o(417))[o(415)](o(407)):function(){return!1}[o(425)](o(421)+"gger")[o(413)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{B as default};

import{i as n}from"./ice-utils.XWoDF3-Y1734746792122.js";import{_ as t,o as e,m as o}from"./gl-matrix.6E0K5u201734746792122.js";import{P as r}from"./tweakpane.yHWGBmom1734746792122.js";import{d as i,r as a,q as c,o as s,D as u,J as l,u as f}from"./@vue.-THQH3GC1734746792122.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",d="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}";function _(n,t){const e=p();return(_=function(n,t){return e[n-=494]})(n,t)}!function(n,t){const e=_,o=p();for(;;)try{if(992921===-parseInt(e(542))/1+parseInt(e(535))/2*(parseInt(e(588))/3)+parseInt(e(569))/4+-parseInt(e(536))/5+parseInt(e(594))/6+-parseInt(e(587))/7*(-parseInt(e(560))/8)+-parseInt(e(525))/9*(parseInt(e(508))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[_(526)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){E(this,(function(){const n=_,t=new RegExp(n(527)),e=new RegExp(n(571),"i"),o=A("init");t[n(551)](o+n(494))&&e[n(551)](o+n(529))?A():o("0")}))()}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[_(526)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();x(void 0,(function(){const n=_,t=function(){const n=_;let t;try{t=Function("return (function() "+n(590)+");")()}catch(e){t=window}return t}(),e=t[n(515)]=t[n(515)]||{},o=[n(506),"warn",n(572),n(539),"exception",n(538),n(522)];for(let r=0;r<o[n(540)];r++){const t=x[n(553)][n(531)][n(550)](x),i=o[r],a=e[i]||t;t[n(548)]=x.bind(x),t[n(530)]=a[n(530)][n(550)](a),e[i]=t}}))();const T={id:"canvaswebgl"},g=["src"];function p(){const n=["info","getElementById","FLOAT","width","useProgram","debu","offset_left_top","webgl","uView","framebufferTexture2D","mixParam","getContext","NEAREST","#canvaswebgl","vertexAttribPointer","427plDTwd","3FUqyhg","string",'{}.constructor("return this")( )',"call","bufferData","inline","10007190EOTURf","getUniformLocation","chain","FRAMEBUFFER","uModel","innerWidth","bindTexture","texImage2D","texParameteri","createBuffer","canvas","addBlade","bindBuffer","UNSIGNED_BYTE","log","uniformMatrix4fv","877370KTKTrF","offset_right_bottom","createTexture","addBinding","mat4","uProjection","translate","console","TRIANGLES","stateObject","counter","uniform1f","logo-texture","clearColor","trace","querySelector","ELEMENT_ARRAY_BUFFER","261JlOLXp","apply","function *\\( *\\)","gger","input","toString","prototype","offset_right_top","createFramebuffer","hidden","1764106deappY","6842185zyrlLu","change","table","error","length","create","713258DGTCBn","slider","CLAMP_TO_EDGE","COLOR_ATTACHMENT0","TEXTURE_MAG_FILTER","color","__proto__","none","bind","test","TEXTURE_WRAP_T","constructor","height","SRC_ALPHA","TEXTURE_MIN_FILTER","ARRAY_BUFFER","RGBA","BLEND","179056urJLGI","STATIC_DRAW","enable","enableVertexAttribArray","bindFramebuffer","scale","BYTES_PER_ELEMENT","offset_left_bottom","clear","6815076IGLAbT","TEXTURE_2D","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(p=function(){return n})()}const R=i({__name:"webglPostProcessing",setup(i){const E=_;let x,p,R,A,b,y,F,h,v,w,P,C,U;const I=1,B=.71,D=.76,L=new r({title:"参数"}),S=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});L[E(503)]({view:E(543),label:"颜色",min:0,max:1,value:.5}).on(E(537),(n=>{const t=E;j(),p[t(519)](C,n.value)}));let M=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);L.addBinding(S,E(534),{label:"是否后处理"}),L.addBinding(S,"offset_right_top",{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on(E(537),(n=>{const t=E;M[0]=S[t(532)].x,M[1]=S[t(532)].y,j()})),L.addBinding(S,E(509),{picker:E(593),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(537),(n=>{const t=E;M[5]=S[t(509)].x,M[6]=S.offset_right_bottom.y,j()})),L[E(511)](S,E(567),{picker:E(593),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(537),(n=>{const t=E;M[10]=S[t(567)].x,M[11]=S[t(567)].y,j()})),L[E(511)](S,E(578),{picker:E(593),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(537),(n=>{const t=E;M[15]=S[t(578)].x,M[16]=S[t(578)].y,j()})),c((()=>{N()}));const N=function(){const t=E;x=document[t(523)](t(585)),x[t(575)]=window[t(497)],x[t(554)]=window.innerHeight,p=x[t(583)](t(579)),p&&(function(){const t=E,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=Y(e,o),R=n(p,m,d),v=p[t(595)](R,t(513)),w=p[t(595)](R,t(580)),P=p[t(595)](R,t(496)),U=G(document[t(573)](t(520)))}(),j(),p[t(562)](p[t(559)]),p.blendFunc(p[t(555)],p.ONE_MINUS_SRC_ALPHA),O())};function O(){const n=E;p[n(564)](p[n(495)],F),p[n(521)](I,B,D,1),p.clear(p.COLOR_BUFFER_BIT),function(){const n=E;p.useProgram(R),p[n(504)](p.ARRAY_BUFFER,A);const r=t[n(512)].create();e(r,0,x.width,x.height,0,.1,100),p[n(507)](v,!1,r);const i=o[n(541)]();t[n(512)].lookAt(i,[0,0,1],[0,0,0],[0,1,0]),p[n(507)](w,!1,i),X(U,600,600),X(U,400,400)}(),p[n(564)](p[n(495)],null),S.hidden&&(p[n(568)](p.COLOR_BUFFER_BIT),p[n(521)](0,0,1,1),p[n(504)](p[n(557)],b),p[n(576)](y),p.bindTexture(p.TEXTURE_2D,h)),p.drawElements(p[n(516)],6,p[n(505)],0),requestAnimationFrame(O)}function X(n,e,r){const i=E;let a=t[i(512)][i(541)]();t[i(512)][i(514)](a,a,[e,r,0]),o[i(565)](a,a,[250,250,0]),p[i(507)](P,!1,a),p[i(498)](p.TEXTURE_2D,n),p.drawElements(p[i(516)],6,p[i(505)],0)}function j(){const t=E,e=new Uint8Array([0,1,2,0,2,3]);b=Y(M,e),y=n(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),C=p.getUniformLocation(y,t(582)),p[t(595)](y,t(547)),function(){const n=E;h=G(x),F=p[n(533)](),p[n(564)](p[n(495)],F),p[n(581)](p[n(495)],p[n(545)],p.TEXTURE_2D,h,0),p[n(564)](p.FRAMEBUFFER,null)}()}function G(n){const t=E,e=p[t(510)]();return p.bindTexture(p.TEXTURE_2D,e),n instanceof HTMLImageElement?p[t(499)](p.TEXTURE_2D,0,p[t(558)],p[t(558)],p[t(505)],n):p[t(499)](p[t(570)],0,p[t(558)],n[t(575)],n.height,0,p[t(558)],p[t(505)],null),p[t(500)](p[t(570)],p[t(556)],p.NEAREST),p.texParameteri(p.TEXTURE_2D,p[t(546)],p[t(584)]),p[t(500)](p[t(570)],p.TEXTURE_WRAP_S,p[t(544)]),p[t(500)](p[t(570)],p[t(552)],p[t(544)]),e}function Y(n,t){const e=E,o=p[e(501)]();p[e(504)](p[e(557)],o),p[e(592)](p[e(557)],n,p[e(561)]);const r=3*Float32Array[e(566)]+2*Float32Array.BYTES_PER_ELEMENT;p[e(586)](0,3,p[e(574)],!1,r,0),p.enableVertexAttribArray(0),p[e(586)](1,2,p[e(574)],!1,r,3*Float32Array[e(566)]),p[e(563)](1);const i=p[e(501)]();return p[e(504)](p[e(524)],i),p[e(592)](p[e(524)],t,p.STATIC_DRAW),p[e(504)](p.ARRAY_BUFFER,null),o}return(n,t)=>{const e=E;return s(),u(e(502),T,[l("img",{id:e(520),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(549)}},null,8,g)])}}});function A(n){function t(n){const e=_;if(typeof n===e(589))return function(n){}[e(553)]("while (true) {}")[e(526)](e(518));1!==(""+n/n)[e(540)]||n%20==0?function(){return!0}.constructor("debu"+e(528))[e(591)]("action"):function(){return!1}[e(553)](e(577)+"gger")[e(526)](e(517)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{R as default};

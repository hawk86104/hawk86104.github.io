import{importShared as e}from"./3d-tiles-renderer.DFcJBJdg1769412424343.js";import{useVideoTexture as t,useTres as a,useLoop as r,TresCanvas_default as n,OrbitControls_default as s}from"./index.B2-FHinZ1769412424343.js";import{_sfc_main$6 as l}from"./customShaderMaterial.vue_vue_type_script_setup_true_lang.BpfTdIo_1769412424343.js";import{_sfc_main as o}from"./index.vue_vue_type_script_setup_true_lang.DH77e3Tw1769412424343.js";import{EffectComposer as u,RenderPass as i,GodRaysEffect as c,EffectPass as m}from"./index.DJyCrGkq1769412424343.js";const{withAsyncContext:p,defineComponent:d}=await e("vue"),{createElementVNode:f,unref:h,withCtx:v,createVNode:w,Fragment:_,openBlock:M,createElementBlock:g}=await e("vue"),y=["map"],T=["envMap"],{ref:S,watch:x}=await e("vue"),C=await e("three"),k=d({__name:"screen",async setup(e){let a,r;const n=S();n.value=([a,r]=p(()=>t("./plugins/visualArts/video/vlg.mp4",{loop:!0})),a=await a,r(),a),n.value.colorSpace=C.SRGBColorSpace;const s=S(),o=S();x(s,e=>{o.value=e.texture});const u=S();return(e,t)=>(M(),g(_,null,[f("TresMesh",{ref_key:"tmSceen",ref:u,position:[0,0,-16]},[t[0]||(t[0]=f("TresPlaneGeometry",{args:[16,10]},null,-1)),f("TresMeshBasicMaterial",{map:n.value},null,8,y),t[1]||(t[1]=f("TresMesh",{scale:[16.05,10.05,1],position:[0,0,-.01]},[f("TresPlaneGeometry"),f("TresMeshBasicMaterial",{color:"black"})],-1))],512),w(h(l),{ref_key:"cubeCameraRef",ref:s,position:[-3,-1,-5],resolution:256},{default:v(()=>[f("TresMesh",null,[t[2]||(t[2]=f("TresSphereGeometry",{args:[2,32,32]},null,-1)),f("TresMeshStandardMaterial",{metalness:1,roughness:.1,envMap:o.value},null,8,T)])]),_:1},512)],64))}}),{defineComponent:B}=await e("vue"),{watchEffect:P,toRaw:G}=await e("vue"),b=await e("three"),R=B({__name:"effectComposer",props:{screen:{}},setup(e){const t=e,{camera:n,renderer:s,scene:l,sizes:o}=a();let p=null,d=null;const f=[];P(()=>{if(o.width.value){const e=n.value;((e,t,a)=>{p=new u(a,{frameBufferType:b.HalfFloatType,multisampling:8});const r=new i(e,t);p.addPass(r)})(l.value,e,s,o.width.value,o.height.value),(e=>{const a=new b.MeshBasicMaterial({color:16768426,transparent:!0,fog:!1}),r=new b.SphereGeometry(.75,32,32),n=new b.Mesh(r,a);n.frustumCulled=!1,n.matrixAutoUpdate=!1;const s=new c(e,G(t.screen),{blur:!0,decay:.9,exposure:.34});f.push(s)})(e),d=new m(e,...f),p.addPass(d)}});const{onRender:h}=r();return h(()=>{p&&p.render()}),(e,t)=>null}}),{defineComponent:j}=await e("vue"),{createElementVNode:N,unref:V,normalizeProps:A,guardReactiveProps:E,createVNode:z,Suspense:D,withCtx:$,openBlock:F,createBlock:L,createCommentVNode:H}=await e("vue"),I=["rotation"],{reactive:U,ref:q,watch:J,nextTick:K}=await e("vue"),O=j({__name:"volumetricLightGodray",setup(e){const t={clearColor:"#050505",antialias:!1,renderMode:"manual",windowSize:!0},a=U({enableDamping:!0}),r=q(null),l=q(null);return J(()=>r,e=>{K(()=>{e&&void 0!==e.value.$refs.tmSceen&&(l.value=e.value.$refs.tmSceen)})},{deep:!0}),(e,u)=>(F(),L(V(n),A(E(t)),{default:$(()=>[u[1]||(u[1]=N("TresPerspectiveCamera",{position:[0,0,30],fov:45,near:.1,far:1e3},null,-1)),z(V(s),A(E(a)),null,16),u[2]||(u[2]=N("TresAmbientLight",{intensity:.5},null,-1)),(F(),L(D,null,{default:$(()=>[z(k,{ref_key:"screenRef",ref:r},null,512)]),_:1})),N("TresMesh",{position:[0,-5.02,0],receiveShadow:"",rotation:[-Math.PI/2,0,0]},[u[0]||(u[0]=N("TresPlaneGeometry",{args:[50,50]},null,-1)),z(V(o),{blur:[300,50],resolution:1024,mixBlur:1,mixStrength:100,roughness:1,depthScale:1.2,minDepthThreshold:.4,maxDepthThreshold:1.4,color:"#202020",metalness:.8})],8,I),l.value?(F(),L(R,{key:0,screen:l.value},null,8,["screen"])):H("",!0)]),_:1},16))}});export{O as default};

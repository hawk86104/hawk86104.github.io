var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as I,n as b,o as S,c3 as w,c4 as M,K as R,f as E,V as A,g as T,_ as D,bI as P,m as z,bm as C,k as O,bz as k,d as F,aj as j,B,a as U,aP as N,e as L,M as H,as as Z,a9 as G,a_ as V}from"./three.rV-MfnQb1732177334649.js";import{m as W,D as $,e as q}from"./@tresjs.ty5XF8T_1732177334649.js";import{R as X}from"./three-stdlib.k-UoDs271732177334649.js";import{v as Y,b as K,w as Q,a as J,u as nn,d as tn,U as en,a6 as rn,a4 as on,o as an,D as cn,G as sn,I as un,aa as ln,a3 as fn,q as pn,f as dn,J as hn,ab as vn,r as mn,M as gn,X as _n,s as yn,F as xn,a9 as In,m as bn}from"./@vue.-THQH3GC1732177334649.js";import{M as Sn,a as wn,C as Mn}from"./@pmndrs.tHJhZmW91732177334649.js";import{h as Rn}from"./object-hash.4qHr6pa21732177334649.js";function En(){var n=["while (true) {}","material","33VrDQUG","virtualScene","counter","2857140PSlodc","1042970mRAumY","4lAjypA","map","call","test","5659waFxhs","console","dispose","369630WkEjxk","stateObject","init","constructor","28VbnTgu","geometry","log","function *\\( *\\)","warn","bind","debu","traverse","length","destructor",'{}.constructor("return this")( )',"apply","1406848cTtjwo","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","exception","toString","7Cbezis","error","gger","input","117483ClMhfa","1963158KEhqDz","trace"];return(En=function(){return n})()}function An(n,t){var e=En();return(An=function(n,t){return e[n-=121]})(n,t)}var Tn=An;!function(n,t){for(var e=An,r=En();;)try{if(173959===parseInt(e(143))/1*(parseInt(e(150))/2)+parseInt(e(129))/3*(-parseInt(e(139))/4)+parseInt(e(138))/5+parseInt(e(130))/6*(-parseInt(e(125))/7)+-parseInt(e(162))/8+parseInt(e(137))/9+-parseInt(e(146))/10*(-parseInt(e(134))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(161)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Dn(this,(function(){var n=An,t=new RegExp(n(153)),e=new RegExp(n(121),"i"),r=On(n(148));t[n(142)](r+"chain")&&e[n(142)](r+n(128))?On():r("0")}))()}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Pn(void 0,(function(){for(var n=An,t=function(){var n,t=An;try{n=Function("return (function() "+t(160)+");")()}catch(e){n=window}return n}(),e=t[n(144)]=t.console||{},r=[n(152),n(154),"info",n(126),n(123),"table",n(131)],o=0;o<r[n(158)];o++){var i=Pn[n(149)].prototype[n(155)](Pn),a=r[o],c=e[a]||i;i[n(122)]=Pn[n(155)](Pn),i[n(124)]=c[n(124)].bind(c),e[a]=i}}))();class zn extends s{constructor(){var n=An;super(),this[n(135)]=null,this[n(135)]=new u}add(...n){return this[An(135)].add(...n),this}[Tn(159)](){var n=Tn;this.virtualScene[n(157)]((t=>{var e=n;t instanceof l&&(t[e(151)].dispose(),t[e(133)][e(145)](),t[e(133)].map&&t[e(133)][e(140)][e(145)](),this.virtualScene.remove(t))})),this[n(135)]=null}}const Cn=zn;function On(n){function t(n){var e=An;if("string"==typeof n)return function(n){}[e(149)](e(132))[e(161)](e(136));1!==(""+n/n).length||n%20==0?function(){return!0}[e(149)]("debu"+e(127))[e(141)]("action"):function(){return!1}[e(149)](e(156)+e(127))[e(161)](e(147)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kn=Fn;function Fn(n,t){const e=Nn();return(Fn=function(n,t){return e[n-=430]})(n,t)}!function(n,t){const e=Fn,r=Nn();for(;;)try{if(193426===parseInt(e(430))/1*(-parseInt(e(442))/2)+-parseInt(e(433))/3*(parseInt(e(475))/4)+parseInt(e(459))/5*(parseInt(e(460))/6)+parseInt(e(469))/7+-parseInt(e(465))/8*(parseInt(e(441))/9)+parseInt(e(445))/10*(-parseInt(e(461))/11)+parseInt(e(432))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(448)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jn(this,(function(){const n=Fn,t=new RegExp(n(453)),e=new RegExp(n(471),"i"),r=Ln(n(450));t[n(474)](r+n(467))&&e.test(r+n(444))?Ln():r("0")}))()}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(448)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Bn(void 0,(function(){const n=Fn;let t;try{t=Function(n(431)+n(462)+");")()}catch(o){t=window}const e=t[n(434)]=t.console||{},r=["log","warn",n(438),n(446),n(435),n(455),n(472)];for(let i=0;i<r.length;i++){const t=Bn.constructor.prototype.bind(Bn),o=r[i],a=e[o]||t;t[n(439)]=Bn[n(447)](Bn),t[n(449)]=a[n(449)][n(447)](a),e[o]=t}}))();const Un={sunset:kn(440),studio:kn(451),city:kn(458),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:kn(454),forest:kn(466),snow:kn(463),dawn:kn(443),hangar:kn(464),urban:kn(468),modern:"city/modern_buildings_2_1k.hdr",shangai:kn(470)};function Nn(){const n=["61335uVtNci","212hflFqp","kiara/kiara_1_dawn_1k.hdr","input","1010cxNTgV","error","bind","apply","toString","init","studio/poly_haven_studio_1k.hdr","gger","function *\\( *\\)","outdoor/satara_night_1k.hdr","table","debu","action","city/canary_wharf_1k.hdr","5golueD","1523964pRBHpg","24277ceKbAE",'{}.constructor("return this")( )',"outdoor/snowy_forest_path_01_1k.hdr","indoor/small_hangar_01_1k.hdr","152nIxlck","outood/mossy_forest_1k.hdr","chain","indoor/abandoned_games_room_02_1k.hdr","2045008lJVtiN","city/shanghai_bund_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","while (true) {}","test","81148mgIqAa","879BXmhMj","return (function() ","5739684mHELJb","57IeVkrs","console","exception","constructor","call","info","__proto__","venice/venice_sunset_1k.hdr"];return(Nn=function(){return n})()}function Ln(n){function t(n){const e=Fn;if("string"==typeof n)return function(n){}[e(436)](e(473))[e(448)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(436)]("debu"+e(452))[e(437)](e(457)):function(){return!1}[e(436)](e(456)+e(452)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=Wn;!function(n,t){const e=Wn,r=Vn();for(;;)try{if(851288===-parseInt(e(386))/1*(-parseInt(e(371))/2)+parseInt(e(375))/3+parseInt(e(395))/4*(-parseInt(e(364))/5)+parseInt(e(377))/6+-parseInt(e(396))/7*(-parseInt(e(362))/8)+-parseInt(e(374))/9+-parseInt(e(370))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(388)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Wn,t=new RegExp(n(397)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=qn("init");t[n(368)](r+"chain")&&e[n(368)](r+n(365))?qn():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(388)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(){const n=["test","join","11932850QRziLU","2sAwxdO","backgroundBlurriness","call","10820709ToHTdw","2900559ZuDsfX","bind","8959248gEpYus","isColor","setPath","isArray","debu","console","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","Failed to load environment map: ","exception","966422HBuWbI","__proto__","apply","keys",'{}.constructor("return this")( )',"background","Preset must be one of: ","log","gger","28mpAcqW","5005qDmDuq","function *\\( *\\)","counter","prototype","mapping","constructor","return (function() ","while (true) {}","value","string","length","trace","warn","1208xjfVEt","texture","205410VtcHMr","input","toString","info"];return(Vn=function(){return n})()}function Wn(n,t){const e=Vn();return(Wn=function(n,t){return e[n-=353]})(n,t)}Gn(void 0,(function(){const n=Wn;let t;try{t=Function(n(355)+n(390)+");")()}catch(o){t=window}const e=t[n(382)]=t[n(382)]||{},r=[n(393),n(361),n(367),"error",n(385),"table",n(360)];for(let i=0;i<r.length;i++){const t=Gn[n(354)][n(399)][n(376)](Gn),o=r[i],a=e[o]||t;t[n(387)]=Gn[n(376)](Gn),t[n(366)]=a[n(366)][n(376)](a),e[o]=t}}))();const $n=Hn(383);function qn(n){function t(n){const e=Wn;if(typeof n===e(358))return function(n){}[e(354)](e(356))[e(388)](e(398));1!==(""+n/n)[e(359)]||n%20==0?function(){return!0}.constructor(e(381)+e(394))[e(373)]("action"):function(){return!1}.constructor(e(381)+e(394))[e(388)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Kn,r=Jn();for(;;)try{if(251863===parseInt(e(315))/1+-parseInt(e(317))/2*(-parseInt(e(306))/3)+parseInt(e(337))/4+parseInt(e(316))/5+parseInt(e(312))/6+-parseInt(e(352))/7*(-parseInt(e(344))/8)+-parseInt(e(323))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xn(this,(function(){const n=Kn,t=new RegExp(n(322)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=nt(n(326));t[n(300)](r+n(334))&&e[n(300)](r+"input")?nt():r("0")}))()}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(n,t){const e=Jn();return(Kn=function(n,t){return e[n-=300]})(n,t)}Yn(void 0,(function(){const n=Kn,t=function(){const n=Kn;let t;try{t=Function(n(340)+n(327)+");")()}catch(e){t=window}return t}(),e=t[n(305)]=t.console||{},r=[n(343),"warn",n(304),n(310),n(301),n(319),n(307)];for(let o=0;o<r[n(339)];o++){const t=Yn.constructor[n(302)][n(349)](Yn),i=r[o],a=e[i]||t;t.__proto__=Yn[n(349)](Yn),t[n(342)]=a.toString[n(349)](a),e[i]=t}}))();const Qn=tn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Kn;let r,o;const i=n,a=K(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=K(null),x=null;const I=K(null);en((()=>{var n,t;const e=Kn;null==(n=I[e(321)])||n[e(347)](),null==(t=y.value)||t[e(355)]()}));const{onBeforeLoop:b}=q();let S=1;b((()=>{const n=Kn;x&&I[n(321)]&&y.value&&(i[n(338)]===1/0||S<i[n(338)])&&(i.useDefaultScene?x.update(s[n(321)],u[n(321)]):x.update(s[n(321)],ln(I.value[n(303)])),S++)}));const w=([r,o]=rn((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=K([]),path:s=K(""),background:u}=Y(n);Q(n,(()=>{o()}));const l=K(null),h=J((()=>Array[e(380)](c[e(357)]))),v=J((()=>h[e(357)]?f:X));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i.value)){try{l[r(357)]=await $(v[r(357)],h.value?[...nn(n)]:nn(n),(n=>{t&&n[r(379)](nn(t))}))}catch(o){throw new Error(r(384)+o)}l[r(357)]&&(l.value[r(353)]=h[r(357)]?p:d)}}),{immediate:!0}),Q(l,(n=>{const t=e;r[t(357)]&&n&&(r[t(357)].environment=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r[i(357)]){let e=(null==t?void 0:t[i(357)])?t.value[i(363)]:o,a=r[i(357)][i(391)];!(null==a?void 0:a[i(378)])&&(a=void 0),r[i(357)][i(391)]=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a[e(357)]),(n=>{const t=e;r.value&&n&&(r[t(357)][t(372)]=n)}),{immediate:!0}),Q((()=>null==i?void 0:i[e(357)]),(async n=>{const t=e;if(n&&n in Un){const e=$n,i=Un[n];try{l[t(357)]=await $(X,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(384)+r)}l[t(357)]&&l[t(357)]&&(l[t(357)].mapping=d),o()}else if(n&&!(n in Un))throw new Error(t(392)+Object[t(389)](Un)[t(369)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Kn;n?(u[t(321)].environment=n.texture,i[t(329)]&&(u.value[t(329)]=n[t(309)])):(u[t(321)][t(341)]=w.value,i.background&&(u[t(321)][t(329)]=w[t(321)]))};Q(w,(n=>{y[Kn(321)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Cn});const R=()=>{var n;const t=Kn;null==(n=y.value)||n.dispose(),y[t(321)]=new v(i[t(318)]),x=new m(i[t(354)],i[t(314)],y[t(321)]),i[t(330)]?(y.value[t(309)][t(350)]=g,y[t(321)][t(309)][t(311)]=!1,y[t(321)][t(309)][t(336)]=_,y.value[t(309)][t(308)]=_):y[t(321)][t(309)][t(350)]=h,M(y[t(321)])};return Q((()=>on()[e(313)]),(n=>{var t,r;const o=e;n&&(!y[o(321)]||y[o(321)].texture.type!==h)&&(l=n(),Array[o(332)](l)&&l[o(339)]>0&&typeof(null==(t=l[0])?void 0:t[o(350)])!==o(346))?R():(null==(r=y[o(321)])||r.dispose(),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(321)]=w,Q((()=>i[e(330)]),(n=>{y[e(321)]&&R()})),(n,t)=>{const r=e;return nn(y)?(an(),cn(r(333),{key:0,ref_key:"envSence",ref:I},[sn(n[r(351)],"default")],512)):un("",!0)}}});function Jn(){const n=["debu","bind","type","$slots","112MaYVKZ","constructor","near","dispose","test","exception","prototype","virtualScene","info","console","6bPqexZ","trace","magFilter","texture","error","generateMipmaps","1029930HqDcTB","default","far","449760qPilXQ","94260ojWzuI","201286aRzStK","resolution","table","gger","value","function *\\( *\\)","10085859IANcrO","call","stateObject","init",'{}.constructor("return this")( )',"string","background","useDefaultScene","counter","isArray","TresEnvSence","chain","action","minFilter","1722244xWzYen","frames","length","return (function() ","environment","toString","log","50200MXAqQZ","while (true) {}","symbol","destructor"];return(Jn=function(){return n})()}function nt(n){function t(n){const e=Kn;if(typeof n===e(328))return function(n){}.constructor(e(345)).apply(e(331));1!==(""+n/n).length||n%20==0?function(){return!0}[e(353)](e(348)+e(320))[e(324)](e(335)):function(){return!1}[e(353)](e(348)+e(320)).apply(e(325)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=rt;function et(){const n=["table","35715emQuXP","call","debu","110rNkcGK","circle","140523NXWHuv","init","map","toString","6WYqqiF","TresMesh","value","string","2HfbIwQ","color","counter","index","multiplyScalar","3824ysPJAp","log","stateObject","ring","bind","toneMapped","console","error","from","constructor","function *\\( *\\)","input","2979efrXmG","TresRingGeometry","rect","exception","TresMeshBasicMaterial","gger","256032GuLkaR",'{}.constructor("return this")( )',"needsUpdate","side","return (function() ","apply","2543821lBsnRf","3882qFiYZN","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","length","while (true) {}","prototype","trace","642961ZAelOZ"];return(et=function(){return n})()}function rt(n,t){const e=et();return(rt=function(n,t){return e[n-=382]})(n,t)}!function(n,t){const e=rt,r=et();for(;;)try{if(337952===parseInt(e(422))/1+parseInt(e(392))/2*(-parseInt(e(384))/3)+-parseInt(e(415))/4+parseInt(e(432))/5*(parseInt(e(388))/6)+-parseInt(e(421))/7+parseInt(e(397))/8*(parseInt(e(409))/9)+-parseInt(e(382))/10*(-parseInt(e(430))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(420)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=rt,t=new RegExp(n(407)),e=new RegExp(n(424),"i"),r=ft(n(385));t[n(425)](r+"chain")&&e.test(r+n(408))?ft():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(420)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();it(void 0,(function(){const n=rt;let t;try{t=Function(n(419)+n(416)+");")()}catch(o){t=window}const e=t[n(403)]=t[n(403)]||{},r=[n(398),"warn","info",n(404),n(412),n(431),n(429)];for(let i=0;i<r.length;i++){const t=it[n(406)][n(428)][n(401)](it),o=r[i],a=e[o]||t;t.__proto__=it[n(401)](it),t.toString=a[n(387)][n(401)](a),e[o]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[tt(402),"map",tt(418),tt(393)],lt=tn({__name:tt(395),props:{args:{default:null},from:{default:tt(411)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=K();return fn((()=>{const n=rt;r[n(390)]&&(r[n(390)][n(393)][n(396)](e.intensity),r[n(390)][n(417)]=!0)})),Q((()=>e[t(393)]),(n=>{const o=t;r[o(390)]&&(r[o(390)].color.set(n),r[o(390)][o(393)].multiplyScalar(e.intensity),r[o(390)][o(417)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return an(),cn(i(389),null,[e[i(405)]===i(383)?(an(),cn(i(410),at)):e[i(405)]===i(400)?(an(),cn(i(410),ct)):"rect"===e.from?(an(),cn("TresPlaneGeometry",st)):(an(),dn(e[i(405)],{key:3,args:e})),hn(i(413),{ref_key:"material",ref:r,toneMapped:n.toneMapped,map:n[i(386)],side:nn(x),color:n.color},null,8,ut)])}}});function ft(n){function t(n){const e=rt;if(typeof n===e(391))return function(n){}[e(406)](e(427))[e(420)](e(394));1!==(""+n/n)[e(426)]||n%20==0?function(){return!0}[e(406)]("debu"+e(414))[e(433)](e(423)):function(){return!1}.constructor(e(434)+e(414)).apply(e(399)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ht,r=mt();for(;;)try{if(328811===-parseInt(e(415))/1+parseInt(e(405))/2+parseInt(e(390))/3*(-parseInt(e(418))/4)+-parseInt(e(401))/5*(parseInt(e(392))/6)+-parseInt(e(383))/7*(parseInt(e(395))/8)+-parseInt(e(403))/9+parseInt(e(396))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(402)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=ht,t=new RegExp(n(388)),e=new RegExp(n(391),"i"),r=gt("init");t[n(425)](r+n(408))&&e[n(425)](r+n(413))?gt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(n,t){const e=mt();return(ht=function(n,t){return e[n-=383]})(n,t)}function vt(n){const t=K(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?Y(n):Y(mn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=W();return fn((()=>{var n;const a=ht;null==(n=t.value)||n[a(384)](),t[a(387)]=new I((null==r?void 0:r[a(387)])||p[a(410)][a(387)],(null==e?void 0:e[a(387)])||p[a(398)][a(387)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(387)])),(null==i?void 0:i.value)&&(t.value[a(389)]=new S((null==r?void 0:r.value)||p[a(410)][a(387)],(null==e?void 0:e[a(387)])||p[a(398)][a(387)]),t[a(387)][a(389)][a(385)]=w,t[a(387)].depthTexture.type=M)})),s((()=>{const n=ht;(null==a?void 0:a[n(387)])&&(l[n(387)][n(422)](ln(t[n(387)])),l[n(387)][n(400)](),l[n(387)][n(411)](ln(f[n(387)]),ln(u[n(387)])),l[n(387)][n(422)](null))})),gn((()=>{var n;const e=ht;null==(n=t.value)||n[e(384)]()})),t}function mt(){const n=["1299818uGceEi","log","length","chain","debu","width","render","prototype","input","gger","550279GuPxlA","bind","error","1018252VqIssW","console","exception","return (function() ","setRenderTarget","string","constructor","test","warn","7eerngn","dispose","format","toString","value","function *\\( *\\)","depthTexture","6ndkCIT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","825114iliesd","action","counter","2947848JLTcie","13345840ctTJcd","while (true) {}","height","__proto__","clear","5GCqYee","apply","812493mKEVYJ",'{}.constructor("return this")( )'];return(mt=function(){return n})()}function gt(n){function t(n){const e=ht;if(typeof n===e(423))return function(n){}[e(424)](e(397))[e(402)](e(394));1!==(""+n/n)[e(407)]||n%20==0?function(){return!0}[e(424)](e(409)+e(414)).call(e(393)):function(){return!1}[e(424)](e(409)+e(414))[e(402)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=ht,t=function(){const n=ht;let t;try{t=Function(n(421)+n(404)+");")()}catch(e){t=window}return t}(),e=t[n(419)]=t.console||{},r=[n(406),n(426),"info",n(417),n(420),"table","trace"];for(let o=0;o<r.length;o++){const t=dt[n(424)][n(412)].bind(dt),i=r[o],a=e[i]||t;t[n(399)]=dt[n(416)](dt),t[n(386)]=a[n(386)].bind(a),e[i]=t}}))();const _t=xt;function yt(){const n=["index","info","string","table","MeshTransmissionMaterialClass","render","1340974gVrxeO","setRenderTarget","input","63LUIYxK","trace","warn","action","3RVAMVU","buffer","side","1547116tyJTkL","test","backside","chain","init","TresMeshTransmissionMaterial","background","error","187224kDGhWn","value","function *\\( *\\)","texture","debu","21190419MDeCcK","console","uuid","2784135KXfqyH","thickness","bind","envMapIntensity","call","toneMapping","prototype","counter","stateObject","return (function() ","toString",'{}.constructor("return this")( )',"196069AuoOjd","time","traverse","fboResolution","constructor","exception","__proto__","log","material","while (true) {}","1976682QsbXAf","apply","10lMFIbd"];return(yt=function(){return n})()}function xt(n,t){const e=yt();return(xt=function(n,t){return e[n-=419]})(n,t)}!function(n,t){const e=xt,r=yt();for(;;)try{if(396393===parseInt(e(454))/1+parseInt(e(473))/2*(-parseInt(e(423))/3)+-parseInt(e(426))/4+-parseInt(e(442))/5+-parseInt(e(464))/6+-parseInt(e(419))/7*(parseInt(e(434))/8)+parseInt(e(439))/9*(parseInt(e(466))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(465)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){It(this,(function(){const n=xt,t=new RegExp(n(436)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Mt(n(430));t[n(427)](r+n(429))&&e[n(427)](r+n(475))?Mt():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(465)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();bt(void 0,(function(){const n=xt;let t;try{t=Function(n(451)+n(453)+");")()}catch(o){t=window}const e=t.console=t[n(440)]||{},r=[n(461),n(421),n(468),n(433),n(459),n(470),n(420)];for(let i=0;i<r.length;i++){const t=bt[n(458)][n(448)][n(444)](bt),o=r[i],a=e[o]||t;t[n(460)]=bt[n(444)](bt),t[n(452)]=a[n(452)].bind(a),e[o]=t}}))();const St=[_t(424),_t(425)],wt=tn({__name:_t(467),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=_n(),u=n;o({MeshTransmissionMaterial:Sn});const l=new wn,{onBeforeLoop:f}=q(),p=vt({width:u[e(457)],height:u[e(457)],isLoop:!1}),d=vt({width:u.fboResolution,height:u[e(457)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s.value=function(n,t){const e=xt;let r;return n[e(456)]((n=>{const o=e;n.isMesh&&n.material&&n[o(462)][o(441)]===t&&(r=n)})),r}(i[n(435)],r[n(435)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(435)][t(455)]=n,r[t(435)][t(424)]===d[t(435)][t(437)]&&s[t(435)]&&(m=a.value.toneMapping,h=i.value.background,v=r[t(435)].envMapIntensity,g=s[t(435)][t(462)].side,s.value[t(462)]=l,u[t(428)]&&(a[t(435)][t(474)](p[t(435)]),a[t(435)][t(472)](i[t(435)],c[t(435)]),s.value.material=r[t(435)],s[t(435)][t(462)][t(443)]=u.backsideThickness,s[t(435)][t(462)][t(424)]=p[t(435)][t(437)],s[t(435)].material.side=R,s[t(435)][t(462)].envMapIntensity=0),a[t(435)][t(474)](d[t(435)]),a[t(435)][t(472)](i[t(435)],c[t(435)]),s[t(435)][t(462)].buffer=d[t(435)].texture,s[t(435)][t(462)]=r[t(435)],s[t(435)][t(462)].thickness=u[t(443)],s[t(435)][t(462)][t(425)]=g,s[t(435)].material[t(445)]=v,i.value[t(432)]=h,a[t(435)][t(474)](null),a.value[t(447)]=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return an(),cn(o(431),{ref_key:o(471),ref:r,buffer:nn(d).texture,side:nn(x)},null,8,St)}}});function Mt(n){function t(n){const e=xt;if(typeof n===e(469))return function(n){}[e(458)](e(463))[e(465)](e(449));1!==(""+n/n).length||n%20==0?function(){return!0}[e(458)](e(438)+"gger")[e(446)](e(422)):function(){return!1}.constructor(e(438)+"gger")[e(465)](e(450)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=Tt;!function(n,t){const e=Tt,r=At();for(;;)try{if(911306===parseInt(e(150))/1+parseInt(e(153))/2*(-parseInt(e(157))/3)+parseInt(e(169))/4*(-parseInt(e(122))/5)+-parseInt(e(129))/6+-parseInt(e(117))/7*(-parseInt(e(155))/8)+-parseInt(e(112))/9*(parseInt(e(138))/10)+-parseInt(e(140))/11*(-parseInt(e(166))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function At(){const n=["matrixWorld","bind","counter","while (true) {}","7Xztjpa","apply","max","log","set","3898495lvYbsS","disableZ","disableY","table","function *\\( *\\)","test","info","5097498HiRCtK","position","stateObject","console","length","toString","getCenter","inner",'{}.constructor("return this")( )',"4215010vQabfQ","chain","11KKWlnY","constructor","top","__proto__","back","gref","index","left","input","error","1283216YXAhIX","right","warn","2sbQNwB","setFromObject","8634968KJKDHW","min","5396862VkiGvc","disableX","getBoundingSphere","value","disable","exception","bottom","TresGroup","prototype","43955508GkToWI","debu","return (function() ","4DlZoSg","init","gger","36PuOfja"];return(At=function(){return n})()}function Tt(n,t){const e=At();return(Tt=function(n,t){return e[n-=112]})(n,t)}!function(){Et(this,(function(){const n=Tt,t=new RegExp(n(126)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=zt(n(170));t[n(127)](r+n(139))&&e[n(127)](r+n(148))?zt():r("0")}))()}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(118)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dt(void 0,(function(){const n=Tt;let t;try{t=Function(n(168)+n(137)+");")()}catch(o){t=window}const e=t[n(132)]=t.console||{},r=[n(120),n(152),n(128),n(149),n(162),n(125),"trace"];for(let i=0;i<r[n(133)];i++){const t=Dt.constructor[n(165)][n(114)](Dt),o=r[i],a=e[o]||t;t[n(143)]=Dt[n(114)](Dt),t[n(134)]=a[n(134)][n(114)](a),e[o]=t}}))();const Pt=tn({__name:Rt(146),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=K(null),r=K(null),o=K(null);return pn((()=>{const n=Tt;if(!r[n(160)])return;if(!o[n(160)])return;r[n(160)][n(113)].identity();const e=(new E)[n(154)](o.value,t.precise),i=new A,a=new T,c=e[n(119)].x-e.min.x,s=e[n(119)].y-e[n(156)].y,u=e.max.z-e.min.z;e[n(135)](i),e[n(159)](a);const l=t[n(142)]?s/2:t[n(163)]?-s/2:0,f=t[n(147)]?-c/2:t[n(151)]?c/2:0,p=t.front?u/2:t[n(144)]?-u/2:0;r[n(160)][n(130)][n(121)](t[n(161)]||t[n(158)]?0:-i.x+f,t[n(161)]||t[n(124)]?0:-i.y+l,t[n(161)]||t[n(123)]?0:-i.z+p)})),(n,t)=>{const i=Tt;return an(),cn(i(164),{ref_key:i(145),ref:e},[hn(i(164),{ref_key:"outer",ref:r},[hn(i(164),{ref_key:i(136),ref:o},[sn(n.$slots,"default")],512)],512)],512)}}});function zt(n){function t(n){const e=Tt;if("string"==typeof n)return function(n){}[e(141)](e(116)).apply(e(115));1!==(""+n/n).length||n%20==0?function(){return!0}[e(141)]("debu"+e(171)).call("action"):function(){return!1}[e(141)](e(167)+e(171))[e(118)](e(131)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ct=Ut;!function(n,t){const e=Ut,r=Ft();for(;;)try{if(990087===-parseInt(e(455))/1*(-parseInt(e(461))/2)+parseInt(e(449))/3+-parseInt(e(465))/4*(parseInt(e(424))/5)+parseInt(e(447))/6+parseInt(e(423))/7*(parseInt(e(431))/8)+parseInt(e(421))/9*(-parseInt(e(468))/10)+-parseInt(e(458))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(443)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ot(this,(function(){const n=Ut,t=new RegExp(n(428)),e=new RegExp(n(438),"i"),r=Lt("init");t[n(460)](r+n(457))&&e[n(460)](r+"input")?Lt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ft(){const n=["color","gger","stateObject","constructor","61VSrWyM","group","chain","23653014ieSAka","object","test","55862xNjWRH","length","index","scene","136388bvTVfJ","intensity","warn","10IxnnCp","toString","exception","lightSource","console","action","params","call","debu","return (function() ","log","#ffffff","997983lWNTkK","ior","1773779ZnXgHa","150fAApXt","TresGroup","add",'{}.constructor("return this")( )',"function *\\( *\\)","error","backsideIOR","24aOuopp","helper","primitive","trace","table","causticsOnly","backside","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","bind","update","while (true) {}","apply","set","Vector3","worldRadius","2753982xYLuYc","counter","4053537srNgJa","far"];return(Ft=function(){return n})()}kt(void 0,(function(){const n=Ut;let t;try{t=Function(n(418)+n(427)+");")()}catch(o){t=window}const e=t[n(472)]=t.console||{},r=[n(419),n(467),"info",n(429),n(470),n(435),n(434)];for(let i=0;i<r[n(462)];i++){const t=kt.constructor.prototype[n(440)](kt),o=r[i],a=e[o]||t;t.__proto__=kt[n(440)](kt),t[n(469)]=a.toString[n(440)](a),e[o]=t}}))();const jt=["object"],Bt=[Ct(459)];function Ut(n,t){const e=Ft();return(Ut=function(n,t){return e[n-=416]})(n,t)}const Nt=tn({__name:Ct(463),props:{color:{default:Ct(420)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=W(),o=Mn(r[t(439)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(446)]});o[t(474)][t(437)]=!0;const i=_n(null);Q(i,(n=>{const e=t;n&&o[e(464)][e(426)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(441)]()})),fn((()=>{const n=t;e[n(451)]&&o[n(474)][n(451)][n(444)](e.color),e[n(422)]&&(o.params[n(422)]=e[n(422)]),e[n(430)]&&(o[n(474)][n(430)]=e[n(430)]),e.far&&(o.params[n(450)]=e[n(450)]),e[n(446)]&&(o[n(474)].worldRadius=e[n(446)]),e[n(466)]&&(o[n(474)].intensity=e[n(466)])})),Q((()=>e[t(436)]),(n=>{o[t(474)].causticsOnly=n})),Q((()=>e[t(471)]),(n=>{const e=t;n&&o[e(474)].lightSource instanceof D[e(445)]&&o[e(474)].lightSource[e(444)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(425),{ref_key:r(456),ref:i},[sn(n.$slots,"default")],512),hn(r(433),{object:nn(o).group,position:[0,.003,0]},null,8,jt),hn(r(433),{object:nn(o)[r(432)],visible:!1},null,8,Bt)],64)}}});function Lt(n){function t(n){const e=Ut;if("string"==typeof n)return function(n){}[e(454)](e(442))[e(443)](e(448));1!==(""+n/n)[e(462)]||n%20==0?function(){return!0}[e(454)](e(417)+e(452))[e(416)](e(473)):function(){return!1}[e(454)](e(417)+e(452)).apply(e(453)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Zt,r=Vt();for(;;)try{if(113031===-parseInt(e(272))/1+-parseInt(e(274))/2*(parseInt(e(268))/3)+-parseInt(e(286))/4+-parseInt(e(244))/5*(-parseInt(e(262))/6)+parseInt(e(295))/7*(-parseInt(e(285))/8)+parseInt(e(290))/9*(-parseInt(e(275))/10)+parseInt(e(294))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(n,t){const e=Vt();return(Zt=function(n,t){return e[n-=240]})(n,t)}!function(){Ht(this,(function(){const n=Zt,t=new RegExp(n(270)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$t(n(258));t.test(r+"chain")&&e.test(r+n(257))?$t():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(281)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vt(){const n=["7fFGOPA","info","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","programs","ShaderChunk","bind","35RUvMwh","table","; i ++) {\n        offset = (vogelDiskSample(j, ","error","console","warn","toString","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","action","string","length","forEach","prototype","input","init","__proto__","#if defined( SHADOWMAP_TYPE_PCF )","compile","117186FhpSGJ","log","traverse","debu","shadowmap_pars_fragment","remove","347421FBajfz",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","function *\\( *\\)","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","14738FRttSP","; i++) {\n        vogelSample = vogelDiskSample(j, ","2wwZNbC","10070QLYHis","call","trace","replace",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","apply","#ifdef USE_SHADOWMAP","exception","gger","1524184wwyLPu","716140CNcVUX","stateObject","properties",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","783PZWUxp",'{}.constructor("return this")( )',"constructor","material","6204286WpQClH"];return(Vt=function(){return n})()}Gt(void 0,(function(){const n=Zt;let t;try{t=Function("return (function() "+n(291)+");")()}catch(o){t=window}const e=t.console=t[n(248)]||{},r=[n(263),n(249),n(296),n(247),n(283),n(245),n(277)];for(let i=0;i<r[n(254)];i++){const t=Gt.constructor[n(256)].bind(Gt),o=r[i],a=e[o]||t;t[n(259)]=Gt[n(243)](Gt),t[n(250)]=a[n(250)].bind(a),e[o]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Zt,o=P[r(266)];return D[r(242)][r(266)]=P[r(266)][r(278)](r(282),r(271)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(289)+e+r(246)+e+r(280)+e+r(273)+e+r(269)+t+r(240)+e+r(279))[r(278)](r(260),r(251)),(n,t,e)=>{const i=r;D[i(242)][i(266)]=o,function(n,t,e){const r=Zt;t[r(264)]((t=>{const e=r;t.material&&(Array.isArray(t[e(293)])?t[e(293)][e(255)]((t=>{n[e(288)].remove(t),t.dispose()})):(n[e(288)][e(267)](t[e(293)]),t[e(293)].dispose()))})),n[r(296)][r(241)][r(254)]=0,n[r(261)](t,e)}(n,t,e)}};function $t(n){function t(n){const e=Zt;if(typeof n===e(253))return function(n){}[e(292)]("while (true) {}").apply("counter");1!==(""+n/n)[e(254)]||n%20==0?function(){return!0}[e(292)](e(265)+e(284))[e(276)](e(252)):function(){return!1}[e(292)](e(265)+e(284)).apply(e(287)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Kt,r=Xt();for(;;)try{if(788245===parseInt(e(314))/1*(parseInt(e(332))/2)+parseInt(e(317))/3*(parseInt(e(311))/4)+-parseInt(e(308))/5+-parseInt(e(303))/6*(parseInt(e(321))/7)+-parseInt(e(299))/8+-parseInt(e(323))/9*(parseInt(e(316))/10)+parseInt(e(297))/11*(parseInt(e(333))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(328)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(){const n=['{}.constructor("return this")( )',"19954SUXMHH","prototype","3753672imlxYd","value","function *\\( *\\)","log","2214jEFKWf","length","debu","stateObject","constructor","5308700ElEHlE","console","traverse","4rQRkon","call","table","9qIILbM","test","2109160pLqkRh","36339TgVdJC","while (true) {}","gger","counter","3262WLMMJI","chain","27jSgops","dispose","warn","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","material","action","toString","312986deqaSs","11268LOtVty","init","exception"];return(Xt=function(){return n})()}!function(){qt(this,(function(){const n=Kt,t=new RegExp(n(301)),e=new RegExp(n(327),"i"),r=Jt(n(334));t[n(315)](r+n(322))&&e[n(315)](r+"input")?Jt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(328)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(n,t){const e=Xt();return(Kt=function(n,t){return e[n-=296]})(n,t)}Yt(void 0,(function(){const n=Kt;let t;try{t=Function("return (function() "+n(296)+");")()}catch(o){t=window}const e=t.console=t[n(309)]||{},r=[n(302),n(325),"info","error",n(335),n(313),"trace"];for(let i=0;i<r.length;i++){const t=Yt[n(307)][n(298)][n(326)](Yt),o=r[i],a=e[o]||t;t.__proto__=Yt.bind(Yt),t.toString=a[n(331)][n(326)](a),e[o]=t}}))();const Qt=tn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(300)],e[t(300)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(300)][t(310)]((n=>{const e=t;n instanceof l&&n[e(329)][e(324)]()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n){function t(n){const e=Kt;if("string"==typeof n)return function(n){}[e(307)](e(318))[e(328)](e(320));1!==(""+n/n)[e(304)]||n%20==0?function(){return!0}[e(307)](e(305)+e(319))[e(312)](e(330)):function(){return!1}[e(307)](e(305)+e(319))[e(328)](e(306)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ne(){const n=["error","debu","__proto__","texelSize",'{}.constructor("return this")( )',"call","prototype",">\n        }","action","chain","constructor","trace","resolution","encodings_fragment","warn","input","apply","bind","return (function() ","toneMapped","1WoHVSs","3389306dWheCU","207LGiFZl","multiplyScalar","gger","while (true) {}","9793734quenoL","test","uniforms","set","setResolution","info","halfTexelSize","stateObject","console","init","4526192XUMudm","toString","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","4329105SDXkGe","length","6495605ayQgfO","383848uyrsSy","value","7721740uTcdhx","log","setTexelSize","7hUNVHr","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"];return(ne=function(){return n})()}const te=oe;!function(n,t){const e=oe,r=ne();for(;;)try{if(878151===-parseInt(e(229))/1*(parseInt(e(230))/2)+parseInt(e(199))/3+parseInt(e(196))/4+parseInt(e(201))/5+-parseInt(e(186))/6*(parseInt(e(207))/7)+-parseInt(e(202))/8*(-parseInt(e(231))/9)+-parseInt(e(204))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(225)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ee(this,(function(){const n=oe,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ce(n(195));t[n(187)](r+n(218))&&e[n(187)](r+n(224))?ce():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(225)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(n,t){const e=ne();return(oe=function(n,t){return e[n-=186]})(n,t)}re(void 0,(function(){const n=oe,t=function(){const n=oe;let t;try{t=Function(n(227)+n(213)+");")()}catch(e){t=window}return t}(),e=t[n(194)]=t[n(194)]||{},r=[n(205),n(223),n(191),n(209),"exception","table",n(220)];for(let o=0;o<r[n(200)];o++){const t=re[n(219)][n(215)][n(226)](re),i=r[o],a=e[i]||t;t[n(211)]=re[n(226)](re),t[n(197)]=a[n(197)][n(226)](a),e[i]=t}}))();const ie=parseInt(F.replace(/\D+/g,""));class ae extends z{constructor(n=new O){const t=oe;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(208)+(ie>=154?"colorspace_fragment":t(222))+t(216),vertexShader:t(198),blending:k,depthWrite:!1,depthTest:!1}),this[t(228)]=!1,this[t(206)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[te(206)](n,t){const e=te;this[e(188)][e(212)][e(203)][e(189)](n,t),this.uniforms[e(192)].value[e(189)](n,t)[e(232)](.5)}[te(190)](n){const t=te;this[t(188)][t(221)][t(203)].copy(n)}}function ce(n){function t(n){const e=oe;if("string"==typeof n)return function(n){}[e(219)](e(234))[e(225)]("counter");1!==(""+n/n)[e(200)]||n%20==0?function(){return!0}[e(219)](e(210)+e(233))[e(214)](e(217)):function(){return!1}[e(219)](e(210)+"gger")[e(225)](e(193)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const se=de;!function(n,t){const e=de,r=fe();for(;;)try{if(983266===parseInt(e(439))/1*(parseInt(e(446))/2)+-parseInt(e(471))/3*(parseInt(e(455))/4)+parseInt(e(460))/5*(parseInt(e(481))/6)+-parseInt(e(435))/7*(parseInt(e(478))/8)+-parseInt(e(476))/9+parseInt(e(488))/10*(-parseInt(e(483))/11)+parseInt(e(444))/12*(parseInt(e(473))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[de(438)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ue(this,(function(){const n=de,t=new RegExp(n(490)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=he(n(482));t[n(477)](r+"chain")&&e[n(477)](r+n(479))?he():r("0")}))()}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[de(438)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function fe(){const n=["3244LaUgJu","add","renderToScreen","screen","setResolution","260rhdtZK","trace","renderTargetB","call","depthToBlurRatioBias","debu","toString","stateObject","setRenderTarget","render","value","2769JsqDmF","depthTexture","31187gmVSMB","kernel","counter","16321248mZvXog","test","1339016pvPsqL","input","maxDepthThreshold","68274ryfGoC","init","11yUFhFP","log","warn","renderTargetA","texture","1116970ZINgQf","camera","function *\\( *\\)","USE_DEPTH","bind","63Hzovvj","convolutionMaterial","depthBuffer","apply","1uPBBoG","table","constructor","console",'{}.constructor("return this")( )',"18840nJMeEm","clone","1610486YCivwq","info","uniforms","prototype","while (true) {}","__proto__","exception","length","gger"];return(fe=function(){return n})()}le(void 0,(function(){const n=de;let t;try{t=Function("return (function() "+n(443)+");")()}catch(o){t=window}const e=t[n(442)]=t[n(442)]||{},r=[n(484),n(485),n(447),"error",n(452),n(440),n(461)];for(let i=0;i<r.length;i++){const t=le[n(441)][n(449)][n(434)](le),o=r[i],a=e[o]||t;t[n(451)]=le[n(434)](le),t[n(466)]=a[n(466)][n(434)](a),e[o]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=de;this[c(457)]=!1,this[c(486)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(462)]=this[c(486)][c(445)](),this[c(436)]=new ae,this.convolutionMaterial.setTexelSize(1/t,1/e),this[c(436)][c(459)](new O(t,e)),this.scene=new u,this[c(489)]=new j,this[c(436)].uniforms.minDepthThreshold.value=r,this.convolutionMaterial[c(448)][c(480)].value=o,this[c(436)].uniforms.depthScale[c(470)]=i,this.convolutionMaterial.uniforms[c(464)].value=a,this[c(436)].defines[c(433)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p.setAttribute("position",new U(s,3)),p.setAttribute("uv",new U(f,2)),this[c(458)]=new l(p,this[c(436)]),this[c(458)].frustumCulled=!1,this.scene[c(456)](this[c(458)])}[se(469)](n,t,e){const r=se,o=this.scene,i=this[r(489)],a=this.renderTargetA,c=this.renderTargetB,s=this[r(436)],u=s.uniforms;u[r(437)][r(470)]=t[r(472)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(453)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(474)][r(470)]=l[p],u.inputBuffer[r(470)]=h[r(487)],n.setRenderTarget(f),n[r(469)](o,i),h=f;u[r(474)][r(470)]=l[p],u.inputBuffer[r(470)]=h[r(487)],n[r(468)](this[r(457)]?null:e),n[r(469)](o,i)}}function de(n,t){const e=fe();return(de=function(n,t){return e[n-=433]})(n,t)}function he(n){function t(n){const e=de;if("string"==typeof n)return function(n){}[e(441)](e(450))[e(438)](e(475));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(454))[e(463)]("action"):function(){return!1}[e(441)](e(465)+e(454))[e(438)](e(467)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=ye;!function(n,t){for(var e=ye,r=Ie();;)try{if(660500===parseInt(e(191))/1*(-parseInt(e(201))/2)+parseInt(e(202))/3*(parseInt(e(181))/4)+-parseInt(e(180))/5*(parseInt(e(193))/6)+parseInt(e(178))/7*(-parseInt(e(225))/8)+parseInt(e(224))/9*(parseInt(e(215))/10)+parseInt(e(167))/11*(parseInt(e(236))/12)+parseInt(e(172))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){me(this,(function(){var n=ye,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(208),"i"),r=xe("init");t[n(228)](r+"chain")&&e.test(r+n(238))?xe():r("0")}))()}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(210)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ge(void 0,(function(){var n,t=ye;try{n=Function(t(165)+t(169)+");")()}catch(s){n=window}for(var e=n.console=n[t(203)]||{},r=[t(174),"warn",t(211),"error",t(173),"table",t(198)],o=0;o<r[t(233)];o++){var i=ge[t(166)][t(199)][t(185)](ge),a=r[o],c=e[a]||i;i.__proto__=ge.bind(ge),i[t(207)]=c[t(207)][t(185)](c),e[a]=i}}))();class _e extends N{constructor(n={}){var t=ye;super(n),this[t(227)]={value:null},this[t(192)]={value:null},this[t(196)]={value:null},this[t(204)]={value:null},this[t(221)]={value:null},this[t(226)]={value:!1},this._mirror={value:0},this[t(179)]={value:0},this[t(239)]={value:.5},this._minDepthThreshold={value:.9},this[t(177)]={value:1},this[t(231)]={value:0},this[t(189)]={value:.25},this[t(217)]={value:1},this[t(235)]={value:1},this.setValues(n)}[ve(190)](n){var t,e=ve;!(null==(t=n[e(182)])?void 0:t[e(240)])&&(n[e(182)][e(240)]=""),n.uniforms[e(216)]=this[e(226)],n[e(168)][e(218)]=this[e(196)],n[e(168)].tDepth=this[e(227)],n[e(168)][e(194)]=this._distortionMap,n[e(168)][e(175)]=this[e(204)],n[e(168)][e(223)]=this._textureMatrix,n.uniforms[e(176)]=this[e(230)],n[e(168)][e(164)]=this[e(179)],n[e(168)].mixStrength=this[e(239)],n[e(168)][e(195)]=this._minDepthThreshold,n[e(168)].maxDepthThreshold=this[e(177)],n[e(168)][e(170)]=this[e(231)],n.uniforms[e(209)]=this[e(189)],n.uniforms[e(183)]=this[e(217)],n.uniforms[e(187)]=this[e(235)],n[e(188)]=e(197)+n[e(188)],n[e(188)]=n.vertexShader[e(232)](e(214),e(213)),n[e(212)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(212)],n.fragmentShader=n[e(212)][e(232)](e(186),e(237))}get[ve(218)](){var n=ve;return this[n(196)][n(220)]}set[ve(218)](n){var t=ve;this[t(196)][t(220)]=n}get tDepth(){var n=ve;return this[n(227)][n(220)]}set[ve(206)](n){var t=ve;this[t(227)][t(220)]=n}get[ve(194)](){var n=ve;return this[n(192)][n(220)]}set[ve(194)](n){this[ve(192)].value=n}get[ve(175)](){var n=ve;return this[n(204)][n(220)]}set[ve(175)](n){var t=ve;this._tDiffuseBlur[t(220)]=n}get textureMatrix(){var n=ve;return this[n(221)][n(220)]}set[ve(223)](n){var t=ve;this[t(221)][t(220)]=n}get[ve(216)](){return this[ve(226)].value}set[ve(216)](n){var t=ve;this[t(226)][t(220)]=n}get[ve(176)](){var n=ve;return this._mirror[n(220)]}set[ve(176)](n){this._mirror.value=n}get[ve(164)](){return this[ve(179)].value}set[ve(164)](n){var t=ve;this[t(179)][t(220)]=n}get mixStrength(){var n=ve;return this[n(239)][n(220)]}set mixStrength(n){var t=ve;this._blurStrength[t(220)]=n}get[ve(195)](){return this[ve(171)].value}set minDepthThreshold(n){this._minDepthThreshold.value=n}get[ve(200)](){var n=ve;return this._maxDepthThreshold[n(220)]}set maxDepthThreshold(n){var t=ve;this[t(177)][t(220)]=n}get[ve(170)](){var n=ve;return this._depthScale[n(220)]}set depthScale(n){var t=ve;this._depthScale[t(220)]=n}get[ve(209)](){var n=ve;return this._depthToBlurRatioBias[n(220)]}set[ve(209)](n){this[ve(189)].value=n}get[ve(183)](){var n=ve;return this[n(217)][n(220)]}set[ve(183)](n){var t=ve;this[t(217)][t(220)]=n}get[ve(187)](){return this[ve(235)].value}set[ve(187)](n){this[ve(235)].value=n}}function ye(n,t){var e=Ie();return(ye=function(n,t){return e[n-=164]})(n,t)}function xe(n){function t(n){var e=ye;if(typeof n===e(229))return function(n){}[e(166)](e(184))[e(210)](e(205));1!==(""+n/n)[e(233)]||n%20==0?function(){return!0}.constructor("debu"+e(234)).call(e(219)):function(){return!1}[e(166)]("debu"+e(234)).apply(e(222)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ie(){var n=["_tDiffuseBlur","counter","tDepth","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthToBlurRatioBias","apply","info","fragmentShader","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","#include <project_vertex>","350IpUooe","hasBlur","_distortion","tDiffuse","action","value","_textureMatrix","stateObject","textureMatrix","191637dmTtkg","7864NPGhrj","_hasBlur","_tDepth","test","string","_mirror","_depthScale","replace","length","gger","_mixContrast","12xvmrhH","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","input","_blurStrength","USE_UV","mixBlur","return (function() ","constructor","9136039gmMydc","uniforms",'{}.constructor("return this")( )',"depthScale","_minDepthThreshold","10457356yyXFlX","exception","log","tDiffuseBlur","mirror","_maxDepthThreshold","3619oInsPm","_mixBlur","2846920sPGVjg","1221796RaguhK","defines","distortion","while (true) {}","bind","#include <emissivemap_fragment>","mixContrast","vertexShader","_depthToBlurRatioBias","onBeforeCompile","417673CTQejI","_distortionMap","6BVpUCK","distortionMap","minDepthThreshold","_tDiffuse","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","trace","prototype","maxDepthThreshold","6CRSldr","6KLvsQm","console"];return(Ie=function(){return n})()}const be=Se;function Se(n,t){const e=Ee();return(Se=function(n,t){return e[n-=186]})(n,t)}!function(n,t){const e=Se,r=Ee();for(;;)try{if(805156===parseInt(e(205))/1*(parseInt(e(215))/2)+parseInt(e(198))/3+-parseInt(e(269))/4*(-parseInt(e(272))/5)+parseInt(e(196))/6+-parseInt(e(227))/7+parseInt(e(287))/8*(parseInt(e(218))/9)+-parseInt(e(247))/10*(parseInt(e(277))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(275)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){we(this,(function(){const n=Se,t=new RegExp(n(232)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Te("init");t[n(259)](r+n(199))&&e[n(259)](r+n(282))?Te():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Me(void 0,(function(){const n=Se,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(285)]=t[n(285)]||{},r=[n(188),n(265),"info",n(258),n(274),n(191),n(216)];for(let o=0;o<r[n(207)];o++){const t=Me.constructor[n(278)].bind(Me),i=r[o],a=e[i]||t;t[n(202)]=Me[n(193)](Me),t[n(283)]=a[n(283)][n(193)](a),e[i]=t}}))();const Re=[be(261),be(233),"t-diffuse",be(203),be(194),be(262),"mix-strength",be(268),be(235),be(219),be(281),"distortion",be(256),be(231),"defines-USE_BLUR",be(223),be(189)];function Ee(){const n=["min-depth-threshold","124Oxiodc","number","stateObject","163905OPsmDw","cameraWorldPosition","exception","apply","debu","527659HkkblP","prototype","value","action","depth-to-blur-ratio-bias","input","toString","set","console","elements","2536ECcbat","subVectors","applyMatrix4","log","defines-USE_DISTORTION","while (true) {}","table","autoClear","bind","t-diffuse-blur","visible","5753574bXiwSQ","render","2596404ylarBu","chain","index","depthTexture","__proto__","t-depth","sign","85gTjYri","add","length","reflectorWorldPosition","counter","lookAtPosition","isMesh","setFromNormalAndCoplanarPoint","matrixWorld","multiply","11650AMHWXT","trace","lookAt","7461RZUTsm","depth-scale","traverse","matrixWorldInverse","enabled","defines-USE_DEPTH","reflectorPlane","normal","clipPlane","7801185WbXSsB","uuid","setRenderTarget","autoUpdate","mix-contrast","function *\\( *\\)","mirror","updateMatrixWorld","max-depth-threshold","constructor","view","projectionMatrix","texture","extractRotation","gger","clear","TresMeshReflectorMaterial","copy","dot","rotationMatrix","350SQkSOE","shadowMap","negate","textureMatrix","string","key","multiplyScalar","far","assign","distortionMap","setFromMatrixPosition","error","test","dispose","texture-matrix","has-blur","virtualCamera","target","warn","reflect","defines-USE_BLUR"];return(Ee=function(){return n})()}const Ae=tn({__name:be(200),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=be,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:R,extend:E}=W();E({MeshReflectorMaterial:_e});const T=_n(),D=_n(),P=_n(),z=_n(),C=J((()=>{const n=Se;return typeof f[n(279)]===n(270)?[f[n(279)],f[n(279)]]:f.value})),O=J((()=>C[r(279)][0]>0||C[r(279)][1]>0)),k={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};fn((()=>{var n;const o=r;null==(n=T[o(279)])||n[o(239)][o(260)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(279)]=new I(i.value,i[o(279)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(279)],i[o(279)],w,M)},t(y,e(x)))),D[o(279)]=new I(i[o(279)],i.value,f),P[o(279)]=new pe({resolution:i[o(279)],width:C[o(279)][0],height:C[o(279)][1],minDepthThreshold:a[o(279)],maxDepthThreshold:s[o(279)],depthScale:u[o(279)],depthToBlurRatioBias:l[o(279)]}),z[o(279)]={mirror:p,textureMatrix:k.textureMatrix,mixBlur:d,tDiffuse:T[o(279)].texture,tDepth:T[o(279)][o(201)],tDiffuseBlur:T.value[o(239)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(279)],mixContrast:_,"defines-USE_BLUR":O[o(279)]?"":void 0,"defines-USE_DEPTH":u[o(279)]>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const F=_n(),{onLoop:j}=q();j((()=>{var n;const t=r;if(!(F[t(279)]&&R[t(279)]&&T[t(279)]&&y[t(279)]))return;const e=function(n,t){const e=Se;let r;return n[e(220)]((n=>{const o=e;n[o(211)]&&n.material&&n.material[o(228)]===t&&(r=n)})),r}(x.value,F[t(279)][t(228)]);if(!e)return;e[t(195)]=!1;const i=R.value.xr.enabled,a=R[t(279)][t(248)][t(230)];(function(n){var t,e;const r=Se;if(k[r(208)][r(257)](n[r(213)]),k[r(273)][r(257)](null==(t=y[r(279)])?void 0:t.matrixWorld),k[r(246)][r(240)](n.matrixWorld),k[r(225)][r(284)](0,0,1),k.normal[r(187)](k[r(246)]),k[r(208)].addScaledVector(k[r(225)],o.reflectorOffset),k[r(237)].subVectors(k[r(208)],k[r(273)]),k[r(237)][r(245)](k[r(225)])>0)return;k.view.reflect(k[r(225)]).negate(),k[r(237)][r(206)](k[r(208)]),k.rotationMatrix.extractRotation(null==(e=y[r(279)])?void 0:e[r(213)]),k.lookAtPosition[r(284)](0,0,-1),k[r(210)][r(187)](k.rotationMatrix),k[r(210)][r(206)](k[r(273)]),k.target[r(186)](k[r(208)],k.lookAtPosition),k.target[r(266)](k[r(225)])[r(249)](),k[r(264)][r(206)](k[r(208)]),k[r(263)].position[r(244)](k[r(237)]),k[r(263)].up[r(284)](0,1,0),k[r(263)].up.applyMatrix4(k[r(246)]),k[r(263)].up[r(266)](k[r(225)]),k[r(263)][r(217)](k[r(264)]),k.virtualCamera[r(254)]=(null==y?void 0:y[r(279)])[r(254)],k[r(263)][r(234)](),k[r(263)][r(238)][r(244)]((null==y?void 0:y[r(279)]).projectionMatrix),k[r(250)][r(284)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.textureMatrix.multiply(k[r(263)][r(238)]),k[r(250)].multiply(k[r(263)][r(221)]),k[r(250)][r(214)](n[r(213)]),k[r(224)][r(212)](k[r(225)],k[r(208)]),k[r(224)].applyMatrix4(k.virtualCamera.matrixWorldInverse),k[r(226)][r(284)](k.reflectorPlane[r(225)].x,k.reflectorPlane[r(225)].y,k[r(224)][r(225)].z,k.reflectorPlane.constant);const i=k.virtualCamera[r(238)];k.q.x=(Math[r(204)](k[r(226)].x)+i.elements[8])/i[r(286)][0],k.q.y=(Math[r(204)](k.clipPlane.y)+i.elements[9])/i[r(286)][5],k.q.z=-1,k.q.w=(1+i[r(286)][10])/i[r(286)][14],k[r(226)][r(253)](2/k[r(226)][r(245)](k.q)),i[r(286)][2]=k[r(226)].x,i.elements[6]=k.clipPlane.y,i[r(286)][10]=k[r(226)].z+1,i[r(286)][14]=k[r(226)].w})(e),R[t(279)][t(248)].autoUpdate=!1,R[t(279)][t(229)](T.value),R[t(279)][t(192)]||R.value[t(242)](),R[t(279)][t(197)](x[t(279)],k[t(263)]),null==(n=null==P?void 0:P[t(279)])||n[t(197)](R[t(279)],T[t(279)],D[t(279)]),R.value.xr[t(222)]=i,R[t(279)][t(248)][t(230)]=a,e[t(195)]=!0,R[t(279)][t(229)](null)}));const B=In(),U=J((()=>{const n=r,t={};return Object.assign(t,o),Object[n(255)](t,B.value),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(279)])||n[e(260)](),null==(t=null==D?void 0:D.value)||t[e(260)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(243),bn({key:c(252)+z[c(279)][c(267)]+z.value[c(223)]+z[c(279)][c(189)],ref_key:"materialRef",ref:F},U[c(279)],{"texture-matrix":k[c(250)],mirror:nn(p),"t-diffuse":null==(e=T[c(279)])?void 0:e[c(239)],"t-depth":null==(o=T[c(279)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=D[c(279)])?void 0:i.texture,"has-blur":O[c(279)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":O[c(279)]?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Re)}}});function Te(n){function t(n){const e=Se;if(typeof n===e(251))return function(n){}[e(236)](e(190)).apply(e(209));1!==(""+n/n)[e(207)]||n%20==0?function(){return!0}.constructor(e(276)+e(241)).call(e(280)):function(){return!1}[e(236)]("debugger")[e(275)](e(271)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ze,r=Pe();for(;;)try{if(946692===parseInt(e(137))/1+parseInt(e(160))/2*(-parseInt(e(130))/3)+parseInt(e(132))/4+-parseInt(e(138))/5*(-parseInt(e(151))/6)+-parseInt(e(140))/7+parseInt(e(167))/8+-parseInt(e(139))/9*(parseInt(e(126))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(165)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(){const n=["string","stateObject","constructor","6eiNFMk","input","5607004FCotKY","info","gger","warn","debu","248911gGRAws","35dbCGFi","45beMuXW","473235EDLXZh","counter","fog","__proto__","background","CubeCamera","action","console","error",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","65298tRNWEL","test","value","function *\\( *\\)","trace","chain","length","log","exception","1292664DCuZbs","texture","call","while (true) {}","update","apply","dispose","5836904odlwsB","type","bind","toString","298990lRfrqM"];return(Pe=function(){return n})()}function ze(n,t){const e=Pe();return(ze=function(n,t){return e[n-=124]})(n,t)}!function(){De(this,(function(){const n=ze,t=new RegExp(n(154)),e=new RegExp(n(150),"i"),r=Oe("init");t.test(r+n(156))&&e[n(152)](r+n(131))?Oe():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(165)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(n){function t(n){const e=ze;if(typeof n===e(127))return function(n){}[e(129)](e(163)).apply(e(141));1!==(""+n/n)[e(157)]||n%20==0?function(){return!0}[e(129)](e(136)+e(134))[e(162)](e(146)):function(){return!1}.constructor("debu"+e(134))[e(165)](e(128)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ce(void 0,(function(){const n=ze,t=function(){const n=ze;let t;try{t=Function("return (function() "+n(149)+");")()}catch(e){t=window}return t}(),e=t[n(147)]=t[n(147)]||{},r=[n(158),n(135),n(133),n(148),n(159),"table",n(155)];for(let o=0;o<r[n(157)];o++){const t=Ce[n(129)].prototype[n(124)](Ce),i=r[o],a=e[i]||t;t[n(143)]=Ce.bind(Ce),t[n(125)]=a[n(125)].bind(a),e[i]=t}}))(),function(n,t){const e=Ue,r=Fe();for(;;)try{if(132429===-parseInt(e(476))/1+parseInt(e(458))/2*(parseInt(e(486))/3)+-parseInt(e(485))/4*(parseInt(e(483))/5)+-parseInt(e(463))/6*(parseInt(e(474))/7)+-parseInt(e(469))/8*(parseInt(e(482))/9)+-parseInt(e(459))/10+parseInt(e(452))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fe(){const n=["4403YvWGTw","gger","199709hVfxPs","near","stateObject","console","input","$slots","626832FLRzjB","6045rNJLal","log","724Usnzzs","9djmnUX","call","default","info","trace","chain","bind","string","test","8643514wMwpvi","while (true) {}","fog","error","action","toString","109270HhHryg","2303110QQpzTR","constructor","rgRef","__proto__","942tZbmWC","primitive","length","TresGroup","debu","apply","8OVMSrp","counter","visible","warn","value"];return(Fe=function(){return n})()}!function(){ke(this,(function(){const n=Ue,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Le("init");t[n(451)](r+n(448))&&e[n(451)](r+n(480))?Le():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(468)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();je(void 0,(function(){const n=Ue,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(479)]=t[n(479)]||{},r=[n(484),n(472),n(446),n(455),"exception","table",n(447)];for(let o=0;o<r[n(465)];o++){const t=je[n(460)].prototype[n(449)](je),i=r[o],a=e[i]||t;t[n(462)]=je.bind(je),t[n(457)]=a[n(457)][n(449)](a),e[i]=t}}))();const Be=["object"];function Ue(n,t){const e=Fe();return(Ue=function(n,t){return e[n-=445]})(n,t)}const Ne=tn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ue,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=K(null),s=K(n),u=K(t),l=K(e),f=K(null);let p,d;return Q((()=>s),(n=>{var t;const e=ze;null==(t=c.value)||t[e(166)](),c.value=new v(n.value),c.value[e(161)][e(168)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=ze;e&&(f[r(153)]=new(D[r(145)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=ze;null==(n=c.value)||n[t(166)]()})),{fbo:c,camera:f,update:()=>{var n;const t=ze;p=a[t(153)][t(142)],d=a[t(153)][t(144)],a[t(153)][t(144)]=r||d,a.value.fog=o||p,null==(n=f[t(153)])||n[t(164)](i[t(153)],a[t(153)]),a.value.fog=p,a[t(153)][t(144)]=d}}}({resolution:o.resolution,near:o[r(477)],far:o.far,envMap:o.envMap,fog:o[r(454)]}),{onBeforeLoop:s}=q();let u=0;const l=K(null);return s((()=>{const n=r;l.value&&(o.frames===1/0||u<o.frames)&&(l.value[n(471)]=!1,c(),l[n(473)][n(471)]=!0,u++)})),t({texture:null==(e=i[r(473)])?void 0:e.texture}),(n,t)=>{const e=r;return an(),cn(e(466),null,[hn(e(464),{object:nn(a)},null,8,Be),hn("TresGroup",{ref_key:e(461),ref:l},[sn(n[e(481)],e(445))],512)])}}});function Le(n){function t(n){const e=Ue;if(typeof n===e(450))return function(n){}[e(460)](e(453))[e(468)](e(470));1!==(""+n/n)[e(465)]||n%20==0?function(){return!0}[e(460)](e(467)+e(475))[e(487)](e(456)):function(){return!1}[e(460)](e(467)+e(475))[e(468)](e(478)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ge,r=Ve();for(;;)try{if(537889===parseInt(e(308))/1+parseInt(e(301))/2+parseInt(e(278))/3+-parseInt(e(285))/4+parseInt(e(292))/5+-parseInt(e(302))/6*(parseInt(e(319))/7)+-parseInt(e(281))/8*(-parseInt(e(299))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(289)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){He(this,(function(){const n=Ge,t=new RegExp(n(307)),e=new RegExp(n(310),"i"),r=$e(n(315));t.test(r+n(279))&&e[n(297)](r+n(280))?$e():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(289)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t){const e=Ve();return(Ge=function(n,t){return e[n-=273]})(n,t)}function Ve(){const n=["return (function() ","generateUUID","constructor","739767KYxjBp","chain","input","1209456KdLMnX",'{}.constructor("return this")( )',"while (true) {}","entries","1971388gxvxaL","MathUtils","trace","action","apply","console","length","228390MVzbjq","__proto__","exception","reduce","UniformsUtils","test","string","27NqtKmn","toString","36234CatNQc","6ddkoQQ","gger","bind","prototype","debu","function *\\( *\\)","755435KbuquI","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","assign","call","value","init","counter","ShaderMaterial","warn","3420403KkSRVk","key","error","uniforms"];return(Ve=function(){return n})()}function We(n,t,e,r){const o=Ge,i=class extends D[o(317)]{constructor(i={}){const a=o,s=Object[a(284)](n);super({uniforms:s[a(295)](((n,[t,e])=>{const r=D[a(296)].clone({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this.key="",s.forEach((([n])=>Object.defineProperty(this,n,{get:()=>this[a(274)][n][a(314)],set:t=>this[a(274)][n][a(314)]=t}))),Object[a(312)](this,i),r&&r(this)}};return i[o(320)]=D[o(286)][o(276)](),i}function $e(n){function t(n){const e=Ge;if(typeof n===e(298))return function(n){}.constructor(e(283))[e(289)](e(316));1!==(""+n/n)[e(291)]||n%20==0?function(){return!0}[e(277)](e(306)+e(303))[e(313)](e(288)):function(){return!1}[e(277)](e(306)+"gger")[e(289)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function qe(n,t){var e=ar();return(qe=function(n,t){return e[n-=260]})(n,t)}Ze(void 0,(function(){const n=Ge,t=function(){const n=Ge;let t;try{t=Function(n(275)+n(282)+");")()}catch(e){t=window}return t}(),e=t[n(290)]=t[n(290)]||{},r=["log",n(318),n(309),n(273),n(294),n(311),n(287)];for(let o=0;o<r[n(291)];o++){const t=Ze[n(277)][n(305)][n(304)](Ze),i=r[o],a=e[i]||t;t[n(293)]=Ze.bind(Ze),t.toString=a[n(300)][n(304)](a),e[i]=t}}))();var Xe=qe;!function(n,t){for(var e=qe,r=ar();;)try{if(515762===-parseInt(e(367))/1*(parseInt(e(421))/2)+-parseInt(e(284))/3+-parseInt(e(401))/4+parseInt(e(316))/5*(-parseInt(e(435))/6)+-parseInt(e(388))/7+parseInt(e(451))/8*(parseInt(e(301))/9)+-parseInt(e(294))/10*(-parseInt(e(380))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[qe(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ye(this,(function(){var n=qe,t=new RegExp(n(265)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=zr(n(263));t.test(r+"chain")&&e[n(283)](r+n(366))?zr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[qe(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n){var t=qe,e=function(n,t){var e=qe;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(266)]];if(void 0!==r){var o=r[e(390)](n,t||e(419));if(typeof o!==e(375))return o;throw new TypeError(e(358))}return(t===e(296)?String:Number)(n)}(n,t(296));return typeof e===t(461)?e:String(e)}function Je(n,t,e){return(t=Qe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=qe,r=Object[e(271)](n);if(Object[e(323)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(290)]((function(t){var r=e;return Object[r(384)](n,t)[r(447)]}))),r[e(372)].apply(r,o)}return r}function tr(n){for(var t=qe,e=1;e<arguments[t(285)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0).forEach((function(t){Je(n,t,r[t])})):Object[t(382)]?Object[t(381)](n,Object[t(382)](r)):nr(Object(r))[t(464)]((function(e){var o=t;Object[o(345)](n,e,Object[o(384)](r,e))}))}return n}function er(n,t){var e=qe;if(null==n)return{};var r,o,i=function(n,t){var e=qe;if(null==n)return{};var r,o,i={},a=Object[e(271)](n);for(o=0;o<a[e(285)];o++)r=a[o],t[e(267)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(323)]){var a=Object[e(323)](n);for(o=0;o<a[e(285)];o++)r=a[o],t.indexOf(r)>=0||Object[e(456)][e(374)][e(390)](n,r)&&(i[r]=n[r])}return i}function rr(n,t){var e=qe;(null==t||t>n[e(285)])&&(t=n[e(285)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function or(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=qe,r=null==n?null:e(320)!=typeof Symbol&&n[Symbol.iterator]||n[e(304)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(390)](n))[e(432)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(390)](r))[e(462)])&&(s[e(372)](o[e(444)]),s[e(285)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(312)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=qe;if(n){if(typeof n===e(296))return rr(n,t);var r=Object[e(456)][e(389)].call(n)[e(322)](8,-1);return r===e(427)&&n[e(350)]&&(r=n[e(350)][e(302)]),r===e(412)||"Set"===r?Array.from(n):r===e(276)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(qe(359))}()}function ir(n,t){for(var e=qe,r=0;r<t[e(285)];r++){var o=t[r];o[e(447)]=o.enumerable||!1,o[e(405)]=!0,e(444)in o&&(o[e(454)]=!0),Object[e(345)](n,Qe(o[e(396)]),o)}}function ar(){var n=["bind","\n    gl_Position = ","Arguments","info","__csm","#define IS_UNKNOWN;\n","MeshPhongMaterial","debu"," is not available in ","test","1680183jjDNea","length","stateObject","apply","getPrototypeOf",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","filter","while (true) {}"," );\n    ","_patchShader","10fLFrnY","patchMap","string","RawShaderMaterial","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","clearcoatRoughness","csm_ClearcoatRoughness","10782wVreuZ","name","csm_Emissive","@@iterator","\n    vec4 csm_internal_positionUnprojected = ","\n            \n            void main() {\n          ","isAlreadyExtended","needsUpdate","#define IS_VERTEX;\n","emissive","get","return","valueOf","exception","\n    \n","30tGKQYv","void main()","bump","baseMaterial","undefined","silent","slice","getOwnPropertySymbols","concat","normal",'". Shader cannot compile.',"\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","material.clearcoat = ","Derived constructors may only return object or undefined","substring","CSM: ","#define IS_","MeshDepthMaterial","includes","ShaderChunk","void ","construct","();\n            // #_CSM_#\n          ","\n    vec3 objectNormal = ","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","csm_main_","join",". Shader cannot compile.","defineProperty","MeshStandardMaterial","setPrototypeOf","MeshNormalMaterial",'" is required to use output "',"constructor","csm_ClearcoatNormal",";\n    ","replace","position","void main() {","csm_Clearcoat","clearcoatNormal","@@toPrimitive must return a primitive value.","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","_getCacheHash","MeshMatcapMaterial","\n    varying mat4 csm_internal_vModelViewMatrix;\n","customProgramCacheKey","\n    gl_PointSize = ","input","1OHSOsQ","csm_Metalness","return (function() ",";\n  ","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","push","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","propertyIsEnumerable","object",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","entries","counter","sham","27250454XGpEBz","defineProperties","getOwnPropertyDescriptors","onBeforeCompile","getOwnPropertyDescriptor","MeshBasicMaterial",", 1.0 );\n  ","cacheHash","4379137ZpRrWl","toString","call","MathUtils","trace","\n    #include <color_fragment>\n    diffuseColor = ","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","__proto__","key","csm_DiffuseColor","type","\n    vec3 transformed = ","_generateMaterial","1088060UgVtSV","_getMaterialDefine","fragmentShader","positionRaw","configurable","toUpperCase","depthAlpha","\\$&","csm_PointSize","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","assign","Map","csm_Roughness","create","table","message",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","default","is not a constructor","973658UjgrnH","uniforms","isArray","csm_FragColor"," - (dot(","clone","Object","vertexShader","MeshToonMaterial","error","csm_PositionRaw","next","function","\n            ","159618Peqaro","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","csm_Bump","set","diffuse","log","cacheKey","PointsMaterial","Cannot call a class as a function","value","metalness","split","enumerable","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","MeshPhysicalMaterial","ShadowMaterial","952nRrxNV","// #_CSM_#","trim","writable","\n    #include <dithering_fragment>\n    gl_FragColor  = ","prototype","update","pointSize","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","csm_Normal","symbol","done","warn","forEach","();\n              // #_CSM_#\n          ","lastIndexOf","console","init","\n    vec3 totalEmissiveRadiance = ","function *\\( *\\)","toPrimitive","indexOf","csm_Position","roughness","fragColor","keys","clearcoat","\n    \n            "];return(ar=function(){return n})()}function cr(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sr(n,t){var e=qe;return(sr=Object[e(347)]?Object.setPrototypeOf.bind():function(n,t){return n[e(395)]=t,n})(n,t)}function ur(n){var t=qe;return(ur=Object.setPrototypeOf?Object[t(288)].bind():function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function lr(n){var t=function(){var n=qe;if("undefined"==typeof Reflect||!Reflect[n(338)])return!1;if(Reflect.construct[n(379)])return!1;if(typeof Proxy===n(433))return!0;try{return Boolean[n(456)][n(313)][n(390)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=qe,o=ur(n);if(t){var i=ur(this)[r(350)];e=Reflect[r(338)](o,arguments,i)}else e=o[r(287)](this,arguments);return function(n,t){var e=qe;if(t&&("object"==typeof t||typeof t===e(433)))return t;if(void 0!==t)throw new TypeError(e(330));return cr(n)}(this,e)}}Ke(void 0,(function(){for(var n=qe,t=function(){var n,t=qe;try{n=Function(t(369)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(262)]=t[n(262)]||{},r=[n(440),n(463),n(277),n(430),n(314),n(415),n(392)],o=0;o<r[n(285)];o++){var i=Ke[n(350)][n(456)][n(274)](Ke),a=r[o],c=e[a]||i;i[n(395)]=Ke.bind(Ke),i[n(389)]=c[n(389)][n(274)](c),e[a]=i}}))();var fr,pr,dr,hr={diffuse:Xe(397),normal:Xe(460),roughness:Xe(413),metalness:Xe(368),emissive:Xe(303),ao:"csm_AO",bump:Xe(437),clearcoat:Xe(356),clearcoatRoughness:Xe(300),clearcoatNormal:Xe(351),pointSize:Xe(409),fragColor:Xe(424),depthAlpha:"csm_DepthAlpha",position:Xe(268),positionRaw:Xe(431)},vr=(Je(fr={},""[Xe(324)](hr[Xe(354)]),"*"),Je(fr,""[Xe(324)](hr[Xe(404)]),"*"),Je(fr,""[Xe(324)](hr[Xe(325)]),"*"),Je(fr,""[Xe(324)](hr[Xe(458)]),[Xe(442)]),Je(fr,"".concat(hr[Xe(439)]),"*"),Je(fr,""[Xe(324)](hr[Xe(270)]),"*"),Je(fr,""[Xe(324)](hr[Xe(310)]),[Xe(346),Xe(449)]),Je(fr,""[Xe(324)](hr[Xe(269)]),[Xe(346),Xe(449)]),Je(fr,""[Xe(324)](hr.metalness),[Xe(346),Xe(449)]),Je(fr,""[Xe(324)](hr.ao),[Xe(346),Xe(449),Xe(385),"MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),Je(fr,"".concat(hr[Xe(318)]),["MeshLambertMaterial",Xe(362),Xe(348),Xe(280),Xe(449),"MeshStandardMaterial",Xe(429),Xe(450)]),Je(fr,""[Xe(324)](hr[Xe(407)]),[Xe(334)]),Je(fr,""[Xe(324)](hr[Xe(272)]),[Xe(449)]),Je(fr,""[Xe(324)](hr[Xe(299)]),[Xe(449)]),Je(fr,""[Xe(324)](hr[Xe(357)]),[Xe(449)]),fr),mr={"#include <lights_physical_fragment>":D[Xe(336)].lights_physical_fragment},gr=(Je(pr={},""[Xe(324)](hr[Xe(325)]),{"#include <beginnormal_vertex>":Xe(340)[Xe(324)](hr.normal,Xe(289))}),Je(pr,""[Xe(324)](hr.position),{"#include <begin_vertex>":Xe(399)[Xe(324)](hr[Xe(354)],Xe(370))}),Je(pr,""[Xe(324)](hr[Xe(404)]),{"#include <begin_vertex>":Xe(305)[Xe(324)](hr.positionRaw,Xe(417))}),Je(pr,""[Xe(324)](hr[Xe(458)]),{"gl_PointSize = size;":Xe(365).concat(hr.pointSize,Xe(352))}),Je(pr,"".concat(hr.diffuse),{"#include <color_fragment>":Xe(393).concat(hr.diffuse,Xe(370))}),Je(pr,""[Xe(324)](hr[Xe(270)]),{"#include <dithering_fragment>":Xe(455).concat(hr[Xe(270)],Xe(370))}),Je(pr,""[Xe(324)](hr[Xe(310)]),{"vec3 totalEmissiveRadiance = emissive;":Xe(264).concat(hr[Xe(310)],";\n    ")}),Je(pr,""[Xe(324)](hr[Xe(269)]),{"#include <roughnessmap_fragment>":Xe(418)[Xe(324)](hr[Xe(269)],Xe(352))}),Je(pr,"".concat(hr[Xe(445)]),{"#include <metalnessmap_fragment>":Xe(327)[Xe(324)](hr[Xe(445)],Xe(352))}),Je(pr,""[Xe(324)](hr.ao),{"#include <aomap_fragment>":Xe(360).concat(hr.ao,Xe(352))}),Je(pr,"".concat(hr[Xe(318)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[Xe(324)](hr[Xe(318)],Xe(425))[Xe(324)](hr[Xe(318)],Xe(376))}),Je(pr,"".concat(hr[Xe(407)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Xe(394)[Xe(324)](hr[Xe(407)],Xe(292)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Xe(371).concat(hr[Xe(407)],";\n    ")}),Je(pr,""[Xe(324)](hr[Xe(272)]),{"material.clearcoat = clearcoat;":Xe(329)[Xe(324)](hr.clearcoat,";")}),Je(pr,""[Xe(324)](hr[Xe(299)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[Xe(324)](hr[Xe(299)],";")}),Je(pr,""[Xe(324)](hr[Xe(357)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),pr),_r=(Je(dr={},""[Xe(324)](hr[Xe(354)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(298)[Xe(324)](hr.position,Xe(386))}),Je(dr,""[Xe(324)](hr[Xe(404)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(275)[Xe(324)](hr[Xe(354)],Xe(370))}),Je(dr,""[Xe(324)](hr[Xe(439)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Xe(324)](hr[Xe(439)],";\n  ")}),Je(dr,""[Xe(324)](hr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Xe(324)](hr[Xe(270)],Xe(370))}),dr),yr={clearcoat:[hr[Xe(272)],hr[Xe(357)],hr[Xe(299)]]},xr=Xe(328),Ir=Xe(410),br=Xe(363),Sr=Xe(373),wr=Xe(363),Mr=Xe(315),Rr=[Xe(319),"fragmentShader","vertexShader","uniforms",Xe(295),"cacheKey","silent"],Er=function(n,t,e){var r=Xe;return n[r(446)](t)[r(343)](e)},Ar=function(n,t){var e,r,o=Xe;return new RegExp("\\b"[o(324)]((e=t,r=Xe,e[r(353)](/[-\/\\^$*+?.()|[\]{}]/g,r(408))),"\\b"))[o(283)](n)};function Tr(n){return n?n[Xe(353)](/\s/g,""):void 0}function Dr(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Pr=function(n){var t=Xe;!function(n,t){var e=qe;if(typeof t!==e(433)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(456)]=Object[e(414)](t&&t[e(456)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(345)](n,e(456),{writable:!1}),t&&sr(n,t)}(c,V);var e,r,o,i,a=lr(c);function c(n){var t,e,r,o,i,s=qe,u=n[s(319)],l=n.fragmentShader,f=n[s(428)],p=n[s(422)],d=n[s(295)],h=n[s(441)],v=n.silent,m=er(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError(qe(443))}(this,c),!function(n){var t=Xe;try{new n}catch(e){if(e[t(416)][t(267)](t(420))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(398)]===s(297))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Xe;e(285),Object[e(411)](n,t);var r=Object[e(288)](t);Object[e(377)](Object.getOwnPropertyDescriptors(r))[e(290)]((function(n){var t=e,r="function"==typeof n[1][t(311)],o="function"==typeof n[1][t(438)],i=typeof n[1][t(444)]===t(433),a=n[0]===t(350);return(r||o||i)&&!a}))[e(464)]((function(t){"function"!=typeof n[t[0]]&&Object.defineProperty(n,t[0],t[1])}))})(cr(t=a[s(390)](this)),e),t[s(278)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(391)].generateUUID(),type:e[s(398)],isAlreadyExtended:(r=e[s(383)],o=Xe,i=r[o(389)]().trim(),!(0===i[o(331)](i[o(267)]("{")+1,i[o(261)]("}"))[o(453)]().length)),cacheHash:"",silent:v},t[s(422)]=tr(tr({},t.uniforms||{}),p||{});var g=t[s(278)],_=g.fragmentShader,y=g[s(428)],x=t.uniforms;return t.__csm[s(387)]=t[s(361)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(457),value:function(){var n=t,e=arguments[n(285)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(422)]||this[n(422)],Object.assign(this[n(278)],e);var r=this[n(278)],o=r[n(403)],i=r[n(428)],a=this.uniforms,c=this._getCacheHash();this[n(278)][n(387)]=c,this._generateMaterial(o,i,a)}},{key:t(426),value:function(){var n=t,e={baseMaterial:this[n(278)][n(319)],fragmentShader:this[n(278)][n(403)],vertexShader:this[n(278)][n(428)],uniforms:this[n(422)],silent:this[n(278)][n(321)],patchMap:this[n(278)][n(295)],cacheKey:this.__csm[n(441)]},r=new this.constructor(e);return Object[n(411)](this,r),r}},{key:t(361),value:function(){var n=t,e=this[n(278)],r=e[n(403)],o=e[n(428)],i=this[n(422)],a=[Tr(r),Tr(o),i].filter((function(n){return void 0!==n}));return a[n(285)]>0?Rn(a,{excludeValues:!0}):this[n(364)]()}},{key:t(400),value:function(n,e,r){var o=t,i=this;this[o(422)]=r||{},this[o(364)]=function(){return i[o(278)].cacheHash};var a=function(t){var r=o;try{var a=i[r(402)]();if(n){var c=i[r(293)](Dr(n),t[r(403)],!0);t[r(403)]=a+c}if(e){var s=i[r(293)](Dr(e),t.vertexShader);t.vertexShader=r(309)+s,t[r(428)]=a+t.vertexShader}t[r(422)]=tr(tr({},t[r(422)]),i.uniforms),i[r(422)]=t[r(422)]}catch(u){console[r(430)](u)}};if(this[o(278)][o(307)]){var c=this[o(383)];this[o(383)]=function(n,t){c(n,t),a(n)}}else this[o(383)]=a;this[o(308)]=!0}},{key:t(293),value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this._getPatchMapForMaterial()),this[o(278)][o(295)]);Object[o(377)](yr).forEach((function(t){var e=o,r=or(t,2),a=r[0],c=r[1].find((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(324)](a,e(349))[e(324)](c,e(326)))})),Object[o(377)](mr)[o(464)]((function(n){var t=or(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object.keys(c)[o(464)]((function(t){var e=o;Object[e(271)](c[t])[e(464)]((function(r){var o=e,s=vr[t],u=i[o(278)].type;if("*"===t||Ar(n,t)){if(!(!s||Array[o(423)](s)&&s[o(335)](u)||"*"===s))throw new Error(o(332)[o(324)](t,o(282)).concat(u,o(344)));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(342)+this[o(278)].instanceID[o(353)](/-/g,"_"),h=n[o(353)](/void\s+main\s*\(\s*\)/g,o(337)[o(324)](d,"()")),v=n[o(335)](o(317)),m=a[o(335)](o(452));return v&&(m&&this[o(278)][o(307)]?(a=a[o(353)](o(355),o(434)[o(324)](h,o(306))),s=a,u=o(452),l=o(434)[o(324)](d,o(339)),p=s[(f=Xe)(261)](u),a=-1===p?s:s.substring(0,p)+l+s[f(331)](p+u.length)):a=a[o(353)](o(355),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(324)](r?wr:br,o(448)).concat(xr,o(273))[o(324)](h,o(459))[o(324)](Ir,o(436))[o(324)](r?Mr:Sr,o(341))[o(324)](d,o(260)))),a}},{key:t(402),value:function(){var n=t,e=this[n(278)][n(398)];return e?n(333)[n(324)](e[n(406)](),";\n"):n(279)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return"ShaderMaterial"===this[n(278)][n(398)]?_r:gr}}],i=qe,r&&ir(e[i(456)],r),o&&ir(e,o),Object.defineProperty(e,i(456),{writable:!1}),c}();function zr(n){function t(n){var e=qe;if(typeof n===e(296))return function(n){}.constructor(e(291))[e(287)](e(378));1!==(""+n/n)[e(285)]||n%20==0?function(){return!0}.constructor("debugger")[e(390)]("action"):function(){return!1}[e(350)](e(281)+"gger")[e(287)](e(286)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cr=jr;!function(n,t){const e=jr,r=Ur();for(;;)try{if(177414===parseInt(e(497))/1*(-parseInt(e(484))/2)+parseInt(e(487))/3+parseInt(e(490))/4+-parseInt(e(501))/5*(-parseInt(e(509))/6)+parseInt(e(505))/7*(-parseInt(e(499))/8)+-parseInt(e(495))/9+parseInt(e(517))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Or(this,(function(){const n=jr,t=new RegExp(n(475)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Nr(n(478));t[n(498)](r+n(502))&&e[n(498)](r+n(493))?Nr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(482)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kr(void 0,(function(){const n=jr,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(506)]=t[n(506)]||{},r=[n(492),n(504),n(480),n(510),n(507),n(508),n(519)];for(let o=0;o<r[n(486)];o++){const t=kr[n(496)][n(521)].bind(kr),i=r[o],a=e[i]||t;t[n(514)]=kr.bind(kr),t.toString=a[n(476)][n(483)](a),e[i]=t}}))();const Fr=["object"];function jr(n,t){const e=Ur();return(jr=function(n,t){return e[n-=475]})(n,t)}const Br=tn({__name:Cr(500),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:D[t(488)],metalness:e.metalness,roughness:e.roughness,clearcoat:e[t(489)],clearcoatRoughness:e[t(512)],color:e.color,vertexShader:t(479),fragmentShader:t(477)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(518)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Pr(r);return fn((()=>{const n=t;o[n(511)].setStyle(e[n(511)]),o[n(503)]=e[n(503)],o.roughness=e[n(515)],o.clearcoat=e.clearcoat,o[n(512)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return an(),cn(r(516),{object:nn(o)},null,8,Fr)}}});function Ur(){const n=["index","409385QPaWCn","chain","metalness","warn","6692XWwaYu","console","exception","table","6SyGFED","error","color","clearcoatRoughness","gger","__proto__","roughness","primitive","3180220zquhRK","\n      ","trace","call","prototype","function *\\( *\\)","toString","\n\t\t\t","init","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","info","string","apply","bind","4aWRXPA","counter","length","146220GgMyZp","MeshPhysicalMaterial","clearcoat","699248oNeyBF","debu","log","input","stateObject","188523lCpJmL","constructor","92567pdXpSz","test","2008jPglVo"];return(Ur=function(){return n})()}function Nr(n){function t(n){const e=jr;if(typeof n===e(481))return function(n){}[e(496)]("while (true) {}").apply(e(485));1!==(""+n/n).length||n%20==0?function(){return!0}[e(496)](e(491)+e(513))[e(520)]("action"):function(){return!1}[e(496)](e(491)+e(513)).apply(e(494)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Zr,r=Vr();;)try{if(183176===parseInt(e(289))/1*(-parseInt(e(279))/2)+-parseInt(e(298))/3*(parseInt(e(274))/4)+parseInt(e(300))/5+parseInt(e(271))/6+-parseInt(e(293))/7*(parseInt(e(299))/8)+parseInt(e(278))/9*(parseInt(e(273))/10)+-parseInt(e(276))/11*(parseInt(e(283))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(291)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Zr,t=new RegExp(n(281)),e=new RegExp(n(288),"i"),r=Gr(n(290));t[n(294)](r+n(297))&&e.test(r+"input")?Gr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(291)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(n,t){var e=Vr();return(Zr=function(n,t){return e[n-=268]})(n,t)}function Gr(n){function t(n){var e=Zr;if("string"==typeof n)return function(n){}.constructor(e(296))[e(291)](e(270));1!==(""+n/n)[e(277)]||n%20==0?function(){return!0}[e(292)](e(287)+e(268)).call(e(280)):function(){return!1}[e(292)](e(287)+e(268))[e(291)](e(284)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Vr(){var n=["init","apply","constructor","7ulsxzr","test","warn","while (true) {}","chain","3BfGkXr","1069064BXKurS","150730UKSFXY","bind","gger","table","counter","2187204MCQkKu","return (function() ","841890rZqnja","485444CfjDkv","prototype","880ZcaHNz","length","27nnZEtp","2kMMHyX","action","function *\\( *\\)","console","18264qIMkHz","stateObject","exception",'{}.constructor("return this")( )',"debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","87317MkLEkV"];return(Vr=function(){return n})()}Hr(void 0,(function(){var n,t=Zr;try{n=Function(t(272)+t(286)+");")()}catch(s){n=window}for(var e=n[t(282)]=n[t(282)]||{},r=["log",t(295),"info","error",t(285),t(269),"trace"],o=0;o<r[t(277)];o++){var i=Hr.constructor[t(275)][t(301)](Hr),a=r[o],c=e[a]||i;i.__proto__=Hr[t(301)](Hr),i.toString=c.toString.bind(c),e[a]=i}}))();export{We as C,Br as _,Qn as a,lt as b,wt as c,Pt as d,Nt as e,Qt as f,Ne as g,Ae as h,vt as u};

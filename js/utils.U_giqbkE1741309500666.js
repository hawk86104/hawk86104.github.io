import"./@fesjs.x4z0tZxE1741309500666.js";import{_ as t}from"./jszip.ht5xKzrl1741309500666.js";import{F as n}from"./file-saver.BQDuAS-81741309500666.js";import{_ as e}from"./three.8tDGqmLF1741309500666.js";const s=i;function o(){const t=["async","data:image/gif;base64,","data:","data:image/WEBP;base64,","url:","loadAsync","JPEG","PNG","app.json","data:image/PNG;base64,","data:image/png;base64,","then","url:images/","scene","forEach","Unknown","13bBumil","trace","image/jpeg","string","image/webp","pop",";base64,","Cache","uuid","info","result","console","action","test","error","exception","onerror","87026UmwuKc","debu","onloadend","base64","parse","data:image/webp;base64,",".json","286302qidBWQ","21SxWTjX","stringify","constructor","data:image/GIF;base64,","slice","input","generateAsync","20Lkodji","readAsDataURL","setResponseType","substring","length","gger","chain","call","toString","FileLoader","data:image/","prototype","data:image/jpeg;base64,","load","url","startsWith","apply","GIF","image/png","file","config.zip","function *\\( *\\)","type","1658056rAyQgE","while (true) {}","3931720aaztjf","4655118mXAHxk","get",'{}.constructor("return this")( )',"13039641jtGGUT","data","push","endsWith","application/octet-stream","bind","blob","warn","toLowerCase","897748HCKczt","split","images","counter","files","非标准文件：不存在 app.json","message","geometries","toUpperCase","return (function() "];return(o=function(){return t})()}!function(t,n){const e=i,s=o();for(;;)try{if(792470===parseInt(e(297))/1*(-parseInt(e(314))/2)+-parseInt(e(355))/3+parseInt(e(367))/4+-parseInt(e(354))/5+-parseInt(e(321))/6+parseInt(e(322))/7*(parseInt(e(352))/8)+-parseInt(e(358))/9*(-parseInt(e(329))/10))break;s.push(s.shift())}catch(r){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){r(this,(function(){const t=i,n=new RegExp(t(350)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=d("init");n[t(310)](s+t(335))&&e[t(310)](s+t(327))?d():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(t,n){const e=o();return(i=function(t,n){return e[t-=277]})(t,n)}async function c(t){const n=s,o=new(e[n(338)]);return new Promise(((e,s)=>{const r=n;o[r(342)](t,(t=>e(JSON[r(318)](t))),void 0,(t=>s(t)))}))}async function u(t){const n=s,o=new(e[n(338)]);return new Promise(((e,r)=>{const a=n;o[a(331)](a(364)),o[a(342)](t,(n=>{const o=a,c=new FileReader;c.onloadend=()=>{const n=i,o=function(t){const n=s,e=t[n(368)](".")[n(302)]()[n(366)]();return{jpg:n(299),jpeg:n(299),png:n(347),gif:"image/gif",bmp:"image/bmp",webp:n(301)}[e]||n(362)}(t),r=c[n(307)][n(368)](",")[1];e(n(283)+o+n(303)+r)},c[o(313)]=t=>{r(t)},c[o(330)](n)}),void 0,(t=>r(t)))}))}a(void 0,(function(){const t=i,n=function(){const t=i;let n;try{n=Function(t(280)+t(357)+");")()}catch(e){n=window}return n}(),e=n[t(308)]=n[t(308)]||{},s=["log",t(365),t(306),"error",t(312),"table",t(298)];for(let o=0;o<s.length;o++){const n=a.constructor[t(340)][t(363)](a),r=s[o],i=e[r]||n;n.__proto__=a[t(363)](a),n[t(337)]=i[t(337)][t(363)](i),e[r]=n}}))(),e[s(304)].enabled=!0;const p=n=>{const o=s,r=new(e[o(338)]);return r.setResponseType("blob"),new Promise(((e,s)=>{const a=o;r[a(342)](n,(async n=>{const s=a;e(await t[s(286)](n))}),void 0,(t=>s(t)))}))},l=t=>{const n=s,e=t[n(332)](0,15),o=n(341),r=n(291),a=n(290),i=n(282),c=n(325),u=n(319),p=n(284);return o.startsWith(e)||"data:image/JPEG;base64,"[n(344)](e)?n(287):r[n(344)](e)||a[n(344)](e)?n(288):i[n(344)](e)||c.startsWith(e)?n(346):u[n(344)](e||p[n(344)](e))?"WEBP":n(296)},f=e=>{const o=s,r=[];e.scene[o(278)]&&e[o(294)].geometries[o(295)]((t=>{const n=o;"BufferGeometry"===t[n(351)]&&(r[n(360)]({uuid:t.uuid,data:t[n(359)]}),t.data="url:geometries/"+t[n(305)]+".json")}));const a=[];e[o(294)].images&&e[o(294)][o(369)][o(295)]((t=>{const n=o;t[n(343)]&&(a.push({uuid:t[n(305)],url:t[n(343)]}),t[n(343)].type?t.url=n(293)+t[n(305)]+"."+t[n(343)].type+n(320):t[n(343)]=n(293)+t.uuid+"."+l(t[n(343)]))}));const i=new t;if(r.length){const t=i.folder(o(278));r.forEach((n=>{const e=o;t[e(348)](n[e(305)]+e(320),JSON[e(323)](n[e(359)]))}))}if(a.length){const t=i.folder(o(369));a[o(295)]((n=>{const e=o;n.url[e(351)]?t[e(348)](n[e(305)]+"."+n[e(343)].type+e(320),JSON[e(323)](n[e(343)])):t.file(n[e(305)]+"."+l(n[e(343)]),n[e(343)][e(368)](e(303))[e(302)](),{base64:!0})}))}const c=JSON[o(323)](e);return i[o(348)](o(289),c),i[o(328)]({type:"blob"})[o(292)]((t=>{const e=o;n.saveAs(t,e(349))}))},g=(t,n,e)=>{t[s(278)]<=0&&t.images<=0&&e(n)},m=(n,e)=>{const o=s;let r=null;return t[o(286)](n)[o(292)]((t=>{const n=o;t[n(371)][n(289)]?t[n(371)]["app.json"].async(n(300)).then((o=>{var a,i;const c=n;r=JSON.parse(o);const u=(t=>{var n,e;const o=s,r={geometries:0,images:0};return null==(n=t.scene[o(278)])||n.forEach((t=>{const n=o;t[n(359)].startsWith(n(285))&&r[n(278)]++})),null==(e=t[o(294)].images)||e[o(295)]((t=>{const n=o;t[n(343)].startsWith(n(285))&&r[n(369)]++})),r})(r);g(u,r,e),null==(a=r[c(294)][c(278)])||a[c(295)]((n=>{const s=c;n[s(359)][s(344)](s(285))&&t.files[n.data[s(326)](4)][s(281)]("string")[s(292)]((t=>{const o=s;n[o(359)]=JSON.parse(t),u[o(278)]--,g(u,r,e)}))})),null==(i=r[c(294)].images)||i[c(295)]((n=>{const s=c;if(n[s(343)][s(344)](s(285))){const o=n[s(343)][s(326)](4);o[s(361)](".json")?t[s(371)][o][s(281)]("string").then((t=>{const o=s;n[o(343)]=JSON[o(318)](t),u[o(369)]--,g(u,r,e)})):t[s(371)][o][s(281)](s(317))[s(292)]((t=>{const a=s,i=o[a(368)]("."),c=i[i[a(333)]-1][a(279)]();n[a(343)]=a(339)+c+a(303)+t,u.images--,g(u,r,e)}))}}))})):console[n(311)](n(372))}),(t=>{const e=o;console[e(311)](n.name+": "+t[e(277)])})),r};function d(t){function n(t){const e=i;if(typeof t===e(300))return function(t){}.constructor(e(353))[e(345)](e(370));1!==(""+t/t).length||t%20==0?function(){return!0}[e(324)](e(315)+e(334))[e(336)](e(309)):function(){return!1}[e(324)](e(315)+e(334)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as a,u as b,f as e,l as g,m as i,c as l};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.Sy4YoNOZ1725236486446.js";import{B as i,V as s,ck as n,az as e,N as r,h as o,ae as a,Y as h,q as c,a6 as u}from"./three.0IuNGJsA1725236486446.js";import{$ as l,D as p,j as d}from"./@tresjs.DDzpLB7Q1725236486446.js";import{c as m}from"./simplex-noise.MycypUyu1725236486446.js";import{d as f,a1 as g,o as y,D as b,u as v,r as S,j as x,g as w,m as I,F as P}from"./@vue.9bHx4gg21725236486446.js";import"./index.6yyegu7j1725236486446.js";import{_}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.x93By2S41725236486446.js";import"./three-custom-shader-material.52Yxne6X1725236486446.js";import"./object-hash.p3nCq7ez1725236486446.js";import"./@amap.YiJorLHg1725236486446.js";import"./jszip.F8iULAGn1725236486446.js";import"./glsl-tokenizer.5A8V64LF1725236486446.js";import"./glsl-token-string.UAuwSUH71725236486446.js";import"./glsl-token-functions.GpZWHJDq1725236486446.js";import"./tweakpane.yHWGBmom1725236486446.js";import"./@vueuse.XXpXaOwX1725236486446.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.QLCYtmLs1725236486446.js";import"./all.three.seD8S5dG1725236486446.js";import"./oimophysics.x0jH7fze1725236486446.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.QpLupOG51725236486446.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.O0oLZ27t1725236486446.js";import"./index.ZLp4rBxn1725236486446.js";import"./three-stdlib.qd5YYSA01725236486446.js";import"./@pmndrs.wB6eVnfc1725236486446.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.SzCO2ZY31725236486446.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.Ht6D90c31725236486446.js";const M=T;function T(t,i){const s=V();return(T=function(t,i){return s[t-=354]})(t,i)}!function(t,i){const s=T,n=V();for(;;)try{if(797100===-parseInt(s(371))/1+-parseInt(s(440))/2*(parseInt(s(364))/3)+-parseInt(s(367))/4*(parseInt(s(506))/5)+-parseInt(s(430))/6+-parseInt(s(356))/7*(parseInt(s(433))/8)+parseInt(s(389))/9+-parseInt(s(355))/10*(-parseInt(s(474))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){j(this,(function(){const t=T,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(439),"i"),n=C(t(382));i[t(420)](n+t(470))&&s[t(420)](n+t(494))?C():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(441)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();R(void 0,(function(){const t=T;let i;try{i=Function(t(432)+t(497)+");")()}catch(e){i=window}const s=i[t(469)]=i.console||{},n=[t(428),"warn",t(496),t(456),t(359),t(391),t(405)];for(let r=0;r<n.length;r++){const i=R[t(525)][t(448)][t(499)](R),e=n[r],o=s[e]||i;i[t(490)]=R[t(499)](R),i[t(487)]=o[t(487)][t(499)](o),s[e]=i}}))();class A extends i{constructor(t={}){const i=T;super(),this[i(402)]=!0,this[i(466)]="LightningStrike",this[i(382)](A[i(460)](t,t)),this[i(492)]()}static[M(471)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s.push(Math[t(395)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(365)]];return n.currentSeed=(n[e(365)]+1)%i,r},getSeed:function(){return n[t(365)]/i},setSeed:function(s){n[t(365)]=Math.floor(s*i)%i}};return n}static copyParameters(t={},i={}){const n=M,e=function(s){return i===t?s:s[T(373)]()};return t[n(357)]=void 0!==i[n(357)]?e(i[n(357)]):new s(0,100,0),t[n(449)]=void 0!==i[n(449)]?e(i[n(449)]):new s(0,0,0),t[n(394)]=void 0!==i[n(394)]?i[n(394)]:1,t[n(398)]=void 0!==i[n(398)]?i[n(398)]:.9,t[n(396)]=void 0!==i.straightness?i[n(396)]:.7,t[n(518)]=void 0!==i[n(518)]?e(i.up0):new s(0,0,1),t.up1=void 0!==i.up1?e(i.up1):new s(0,0,1),t[n(412)]=void 0!==i.radius0?i.radius0:1,t[n(411)]=void 0!==i[n(411)]?i[n(411)]:1,t[n(458)]=void 0!==i[n(458)]?i.radius0Factor:.5,t[n(442)]=void 0!==i[n(442)]?i[n(442)]:.2,t.minRadius=void 0!==i[n(390)]?i[n(390)]:.2,t.isEternal=void 0!==i[n(415)]?i[n(415)]:void 0===i[n(462)]||void 0===i.deathTime,t[n(462)]=i.birthTime,t[n(421)]=i[n(421)],t.propagationTimeFactor=void 0!==i.propagationTimeFactor?i[n(503)]:.1,t[n(417)]=void 0!==i[n(417)]?i.vanishingTimeFactor:.9,t[n(416)]=void 0!==i.subrayPeriod?i[n(416)]:4,t.subrayDutyCycle=void 0!==i[n(481)]?i[n(481)]:.6,t[n(489)]=void 0!==i[n(489)]?i[n(489)]:9,t.isStatic=void 0!==i[n(423)]&&i.isStatic,t[n(480)]=void 0!==i[n(480)]?i[n(480)]:5,t[n(363)]=void 0!==i[n(363)]?i[n(363)]:3,t[n(455)]=void 0!==i[n(455)]?i[n(455)]:.6,t[n(483)]=void 0!==i[n(483)]&&i[n(483)],t[n(519)]=i[n(519)],t[n(354)]=i[n(354)],t[n(520)]=i[n(520)],t[n(500)]=i[n(500)],t}[M(431)](t){const i=M;this[i(423)]||(this[i(438)].isEternal||this[i(438)][i(462)]<=t&&t<=this[i(438)][i(421)]?(this.updateMesh(t),t<this[i(501)][0][i(360)]?this[i(426)]=A.RAY_PROPAGATING:t>this[i(501)][0][i(368)]?this[i(426)]=A[i(413)]:this.state=A[i(443)],this[i(386)]=!0):(this[i(386)]=!1,t<this[i(438)].birthTime?this[i(426)]=A[i(453)]:this[i(426)]=A.RAY_EXTINGUISHED))}[M(382)](t){const i=M;this[i(438)]=t,this[i(489)]=void 0!==t[i(489)]?Math[i(526)](t[i(489)]):9,t[i(489)]=this[i(489)],this[i(423)]=void 0!==t[i(423)]&&t[i(423)],t.isStatic=this.isStatic,this.ramification=void 0!==t.ramification?Math[i(526)](t[i(480)]):5,t[i(480)]=this[i(480)],this[i(363)]=void 0!==t[i(363)]?Math.floor(t[i(363)]):3,t[i(363)]=this.maxSubrayRecursion,this.recursionProbability=void 0!==t[i(455)]?t[i(455)]:.6,t[i(455)]=this.recursionProbability,this[i(483)]=void 0!==t[i(483)]&&t[i(483)],t[i(483)]=this[i(483)],void 0!==t[i(519)]?(this[i(519)]=t.randomGenerator,this[i(383)]=t[i(519)],void 0!==t[i(354)]&&this.seedGenerator[i(464)](t[i(354)])):(this[i(519)]=A[i(471)](),this[i(383)]=Math),void 0!==t[i(520)]?this[i(520)]=t[i(520)]:(this[i(524)](),void 0!==t[i(500)]&&(this[i(500)]=t[i(500)])),this[i(426)]=A[i(495)],this[i(461)]=Math[i(408)](1+Math.pow(this[i(480)],Math.max(0,this[i(363)]-1))),t[i(461)]=this[i(461)],this[i(467)]=2*(1<<this[i(489)]),this[i(501)]=[];for(let s=0;s<this[i(461)];s++)this[i(501)].push(this[i(505)]());this.raySegments=[];for(let s=0;s<this[i(467)];s++)this[i(366)].push(this[i(447)]());this[i(372)]=0,this[i(404)]=0,this[i(459)]=null,this[i(379)]=this[i(483)]?this[i(422)]:this[i(387)],this.numSubrays=0,this.currentSubray=null,this[i(435)]=0,this[i(523)]=!1,this.subrayProbability=0,this.currentVertex=0,this[i(512)]=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this[i(444)]=null,this.uvs=null,this[i(502)]=null,this[i(375)]=null,this.uvsAttribute=null,this[i(369)]=m(this.seedGenerator[i(395)]),this.simplexY=m(this[i(383)][i(395)]),this[i(478)]=m(this[i(383)][i(395)]),this[i(527)]=new s,this[i(484)]=new s,this.side=new s,this[i(479)]=new s,this[i(385)]=new s,this[i(454)]=new s,this[i(509)]=new s,this[i(463)]=new s,this[i(511)]=new s}[M(492)](){const t=M,i=1<<this[t(489)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(461)];this[t(444)]=new Float32Array(3*s),this[t(502)]=new Uint32Array(o),this[t(483)]&&(this.uvs=new Float32Array(2*s)),this[t(508)](0),this.setIndex(new n(this[t(502)],1)),this[t(375)]=new e(this.vertices,3),this[t(522)](t(498),this[t(375)]),this[t(483)]&&(this[t(393)]=new e(new Float32Array(this.uvs),2),this[t(522)]("uv",this[t(393)])),!this[t(423)]&&(this.index[t(406)]=r,this[t(375)][t(406)]=r,this[t(483)]&&(this[t(393)][t(406)]=r)),this[t(444)]=this[t(375)].array,this[t(502)]=this[t(358)].array,this[t(483)]&&(this.uvs=this[t(393)][t(434)])}updateMesh(t){const i=M;this[i(508)](t),this[i(384)].count=this.currentIndex,this[i(358)][i(514)]=!0,this[i(375)][i(514)]=!0,this.generateUVs&&(this.uvsAttribute[i(514)]=!0)}[M(508)](t){const i=M,s=this;this[i(378)]=0,this[i(512)]=0,this.currentCoordinate=0,this[i(427)]=0,this[i(504)](t,(function(n){const e=i,r=s[e(425)];t<r[e(462)]||(this[e(438)].isEternal&&0==s.currentSubray.recursion?(s.createPrism(n),s[e(520)](n,s)):t<r[e(360)]?s[e(404)]>=n[e(486)]*r[e(503)]&&(s.createPrism(n),s.onDecideSubrayCreation(n,s)):t<r[e(368)]?(s[e(429)](n),s[e(520)](n,s)):(s[e(404)]<=r[e(417)]+n[e(473)]*(1-r.vanishingTimeFactor)&&s.createPrism(n),s.onDecideSubrayCreation(n,s)))}))}[M(452)](){const t=M;return this.subrays[this[t(451)]++]}[M(362)](t,i){const s=M;t.pos0[s(491)](i[s(357)]),t.pos1.copy(i[s(449)]),t[s(518)][s(491)](i[s(518)]),t[s(403)][s(491)](i.up1),t[s(412)]=i.radius0,t[s(411)]=i[s(411)],t[s(462)]=i[s(462)],t.deathTime=i[s(421)],t[s(394)]=i[s(394)],t[s(398)]=i[s(398)],t[s(396)]=i.straightness,t[s(503)]=i[s(503)],t.vanishingTimeFactor=i[s(417)],t[s(489)]=this[s(489)],t[s(488)]=void 0!==i.noiseSeed?i[s(354)]:0,t[s(370)]=0}[M(504)](t,i){const s=M;this.time=t,this[s(459)]=i,this[s(451)]=0,this[s(362)](this[s(452)](),this[s(438)]);for(let n=0;n<this[s(451)];n++){const i=this.subrays[n];this[s(425)]=i,this[s(519)][s(464)](i[s(488)]),i[s(360)]=o.lerp(i.birthTime,i.deathTime,i.propagationTimeFactor),i[s(368)]=o[s(377)](i.deathTime,i[s(462)],1-i[s(417)]);const e=this[s(519)][s(395)];i[s(477)].set(e(),e(),e())[s(374)](1e3),i[s(437)][s(381)](e(),e(),e())[s(374)](1e3),this[s(404)]=(t-i.birthTime)/(i.deathTime-i[s(462)]),this.currentSegmentIndex=0,this[s(523)]=!0;const r=this[s(485)]();r.iteration=0,r[s(380)][s(491)](i[s(380)]),r[s(401)][s(491)](i.pos1),r.linPos0[s(491)](i[s(477)]),r.linPos1[s(491)](i[s(437)]),r[s(518)][s(491)](i[s(518)]),r[s(403)].copy(i[s(403)]),r[s(412)]=i.radius0,r[s(411)]=i[s(411)],r[s(486)]=0,r[s(473)]=1,r[s(450)]=1-i[s(396)],this.subrayProbability=this[s(480)]*Math[s(418)](this[s(455)],i[s(370)])/(1<<i[s(489)]),this[s(468)](r)}this.currentSegmentCallback=null,this[s(425)]=null}[M(468)](t){const i=M;if(t[i(513)]>=this.currentSubray[i(489)])return void this[i(459)](t);this[i(527)][i(376)](t[i(401)],t.pos0);let s=this[i(527)][i(400)]();s<1e-6&&(this[i(527)][i(381)](0,0,.01),s=this.forwards[i(400)]());const n=.5*(t[i(412)]+t[i(411)]),e=.5*(t.fraction0+t[i(473)]),r=this[i(372)]*this[i(425)][i(394)]*Math[i(418)](2,t.iteration);this[i(385)].lerpVectors(t[i(380)],t.pos1,.5),this[i(454)][i(507)](t.linPos0,t.linPos1,.5);const o=this.middleLinPos;this[i(509)].set(this.simplexX(o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(478)](o.x,o.y,o.z,r)),this[i(509)][i(374)](t[i(450)]*s),this[i(509)][i(517)](this.middlePos);const a=this[i(485)]();a[i(380)][i(491)](t[i(380)]),a[i(401)][i(491)](this.newPos),a[i(477)][i(491)](t[i(477)]),a.linPos1[i(491)](this[i(454)]),a.up0.copy(t.up0),a[i(403)][i(491)](t[i(403)]),a[i(412)]=t[i(412)],a.radius1=n,a[i(486)]=t[i(486)],a.fraction1=e,a[i(450)]=t[i(450)]*this[i(425)].roughness,a[i(513)]=t[i(513)]+1;const h=this.getNewSegment();h.pos0[i(491)](this.newPos),h.pos1[i(491)](t[i(401)]),h[i(477)][i(491)](this[i(454)]),h[i(437)].copy(t[i(437)]),this[i(511)][i(388)](t[i(518)],this.forwards[i(436)]()),h[i(518)][i(388)](this[i(527)],this[i(511)]).normalize(),h[i(403)][i(491)](t.up1),h[i(412)]=n,h[i(411)]=t[i(411)],h[i(486)]=e,h.fraction1=t[i(473)],h[i(450)]=t[i(450)]*this[i(425)][i(398)],h[i(513)]=t[i(513)]+1,this[i(468)](a),this.fractalRayRecursive(h)}[M(429)](t){const i=M;this.forwardsFill.subVectors(t.pos1,t[i(380)])[i(436)](),this[i(523)]&&(this[i(379)](t[i(380)],t[i(518)],this[i(484)],t.radius0,0),this[i(523)]=!1),this[i(379)](t[i(401)],t[i(518)],this.forwardsFill,t.radius1,t.fraction1),this[i(399)]()}[M(387)](t,i,s,n){const e=M;this.side[e(388)](i,s).multiplyScalar(n*A.COS30DEG),this[e(479)][e(491)](i)[e(374)](-n*A[e(419)]);const r=this[e(463)],o=this.vertices;r[e(491)](t)[e(397)](this[e(457)])[e(517)](this.down),o[this[e(414)]++]=r.x,o[this[e(414)]++]=r.y,o[this[e(414)]++]=r.z,r.copy(t)[e(517)](this[e(457)])[e(517)](this[e(479)]),o[this.currentCoordinate++]=r.x,o[this[e(414)]++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(i)[e(374)](n)[e(517)](t),o[this[e(414)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,this[e(378)]+=3}createTriangleVerticesWithUVs(t,i,s,n,e){const r=M;this[r(457)].crossVectors(i,s)[r(374)](n*A[r(446)]),this[r(479)][r(491)](i).multiplyScalar(-n*A.SIN30DEG);const o=this.vPos,a=this.vertices,h=this[r(521)];o[r(491)](t)[r(397)](this[r(457)])[r(517)](this[r(479)]),a[this[r(414)]++]=o.x,a[this[r(414)]++]=o.y,a[this[r(414)]++]=o.z,h[this[r(427)]++]=e,h[this[r(427)]++]=0,o.copy(t).add(this.side)[r(517)](this[r(479)]),a[this[r(414)]++]=o.x,a[this[r(414)]++]=o.y,a[this[r(414)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(427)]++]=.5,o[r(491)](i)[r(374)](n)[r(517)](t),a[this[r(414)]++]=o.x,a[this[r(414)]++]=o.y,a[this[r(414)]++]=o.z,h[this[r(427)]++]=e,h[this[r(427)]++]=1,this[r(378)]+=3}[M(399)](t){const i=M,s=this[i(502)];t=this[i(378)]-6,s[this[i(512)]++]=t+1,s[this[i(512)]++]=t+2,s[this[i(512)]++]=t+5,s[this[i(512)]++]=t+1,s[this.currentIndex++]=t+5,s[this[i(512)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(512)]++]=t+1,s[this[i(512)]++]=t+4,s[this[i(512)]++]=t+0,s[this[i(512)]++]=t+4,s[this[i(512)]++]=t+3,s[this[i(512)]++]=t+2,s[this.currentIndex++]=t+0,s[this.currentIndex++]=t+3,s[this[i(512)]++]=t+2,s[this[i(512)]++]=t+3,s[this[i(512)]++]=t+5}[M(524)](){const t=M,i=this[t(519)][t(395)];this[t(520)]=function(s,n){const e=t,r=n[e(425)],a=n.rayParameters[e(416)],h=n[e(438)][e(481)],c=n[e(438)][e(415)]&&0==r[e(370)]?-i()*a:o.lerp(r[e(462)],r[e(360)],s[e(486)])-i()*a,u=n.time-c,l=Math[e(526)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(475)]),r[e(370)]<n[e(363)]&&n.numSubrays<n[e(461)]&&i()<d){const t=n[e(452)](),o=n[e(519)].getSeed();t[e(488)]=p,n[e(519)].setSeed(p),t[e(370)]=r[e(370)]+1,t[e(489)]=Math.max(1,r[e(489)]-1),t[e(477)][e(381)](i(),i(),i())[e(374)](1e3),t[e(437)][e(381)](i(),i(),i())[e(374)](1e3),t[e(518)][e(491)](r[e(518)]),t[e(403)][e(491)](r[e(403)]),t.radius0=s.radius0*n[e(438)][e(458)],t[e(411)]=Math[e(476)](n[e(438)][e(390)],s.radius1*n.rayParameters.radius1Factor),t[e(462)]=c+l*a,t.deathTime=t[e(462)]+a*h,!n[e(438)][e(415)]&&0==r.recursion&&(t[e(462)]=Math[e(482)](t[e(462)],r[e(462)]),t[e(421)]=Math[e(476)](t[e(421)],r.deathTime)),t[e(394)]=2*r[e(394)],t[e(398)]=r[e(398)],t[e(396)]=r.straightness,t[e(503)]=r[e(503)],t[e(417)]=r[e(417)],n[e(500)](s,r,t,n),n[e(519)][e(464)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(500)]=function(i,s,n,e){e[t(410)](i,s,n,.5,.6,.2)},this[t(515)]=function(s,o,h,c,u,l){const p=t;h[p(380)][p(491)](s[p(380)]),n.subVectors(o[p(401)],o.pos0),e[p(491)](n)[p(436)](),n[p(374)](s[p(486)]+(1-s[p(486)])*(i()*c));const d=n[p(400)]();r.crossVectors(o[p(518)],e);const m=2*Math.PI*i();r[p(374)](Math[p(493)](m)),a[p(491)](o[p(518)]).multiplyScalar(Math[p(407)](m)),h[p(401)][p(491)](r)[p(517)](a)[p(374)](d*u*(l+i()*(1-l))).add(n)[p(517)](o.pos0)},this[t(410)]=function(s,o,h,c,u,l){const p=t;h[p(380)][p(491)](s[p(380)]),n[p(376)](o.pos1,o.pos0),e[p(491)](n)[p(436)](),n[p(374)](s[p(486)]+(1-s[p(486)])*((2*i()-1)*c));const d=n[p(400)]();r[p(388)](o[p(518)],e);const m=2*Math.PI*i();r[p(374)](Math[p(493)](m)),a[p(491)](o.up0).multiplyScalar(Math[p(407)](m)),h[p(401)].copy(r)[p(517)](a).multiplyScalar(d*u*(l+i()*(1-l))).add(n)[p(517)](o.pos0)}}[M(505)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(485)](){const t=M;return this[t(366)][this[t(435)]++]}copy(t){const i=M;return super[i(491)](t),this[i(382)](A[i(460)]({},t[i(438)])),this}[M(373)](){const t=M;return new(this[t(525)])(A[t(460)]({},this[t(438)]))}}function V(){const t=["needsUpdate","subrayConePosition","RAY_EXTINGUISHED","add","up0","randomGenerator","onDecideSubrayCreation","uvs","setAttribute","isInitialSegment","createDefaultSubrayCreationCallbacks","constructor","floor","forwards","noiseSeed","30gtWGxg","28ybyOjZ","sourceOffset","index","exception","endPropagationTime","RAY_PROPAGATING","initSubray","maxSubrayRecursion","15234shiiIw","currentSeed","raySegments","88ikHdoe","beginVanishingTime","simplexX","recursion","303672PxJsOS","time","clone","multiplyScalar","positionAttribute","subVectors","lerp","currentVertex","currentCreateTriangleVertices","pos0","set","init","seedGenerator","drawRange","middlePos","visible","createTriangleVerticesWithoutUVs","crossVectors","2741418JBRGVO","minRadius","table","call","uvsAttribute","timeScale","random","straightness","sub","roughness","createPrismFaces","length","pos1","isLightningStrike","up1","timeFraction","trace","usage","sin","ceil","gger","subrayCylinderPosition","radius1","radius0","RAY_VANISHING","currentCoordinate","isEternal","subrayPeriod","vanishingTimeFactor","pow","SIN30DEG","test","deathTime","createTriangleVerticesWithUVs","isStatic","counter","currentSubray","state","currentUVCoordinate","log","createPrism","7302480bIAfHe","update","return (function() ","671936vTjCva","array","currentSegmentIndex","normalize","linPos1","rayParameters","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","68LRnhVy","apply","radius1Factor","RAY_STEADY","vertices","debu","COS30DEG","createSegment","prototype","destOffset","positionVariationFactor","numSubrays","addNewSubray","RAY_UNBORN","middleLinPos","recursionProbability","error","side","radius0Factor","currentSegmentCallback","copyParameters","maxSubrays","birthTime","vPos","setSeed","stateObject","type","maxRaySegments","fractalRayRecursive","console","chain","createRandomGenerator","while (true) {}","fraction1","11065406tdGmmg","subrayProbability","min","linPos0","simplexZ","down","ramification","subrayDutyCycle","max","generateUVs","forwardsFill","getNewSegment","fraction0","toString","seed","maxIterations","__proto__","copy","createMesh","cos","input","RAY_INITIALIZED","info",'{}.constructor("return this")( )',"position","bind","onSubrayCreation","subrays","indices","propagationTimeFactor","fractalRay","createSubray","112720JRcwvO","lerpVectors","fillMesh","newPos","string","cross1","currentIndex","iteration"];return(V=function(){return t})()}function C(t){function i(t){const s=T;if(typeof t===s(510))return function(t){}[s(525)](s(472)).apply(s(424));1!==(""+t/t).length||t%20==0?function(){return!0}[s(525)]("debu"+s(409))[s(392)]("action"):function(){return!1}[s(525)](s(445)+s(409))[s(441)](s(465)),i(++t)}try{if(t)return i;i(0)}catch(s){}}A.RAY_INITIALIZED=0,A[M(453)]=1,A[M(361)]=2,A[M(443)]=3,A[M(413)]=4,A[M(516)]=5,A[M(446)]=Math[M(493)](30*Math.PI/180),A[M(419)]=Math[M(407)](30*Math.PI/180);const F=H;!function(t,i){const s=H,n=O();for(;;)try{if(468435===parseInt(s(289))/1*(parseInt(s(263))/2)+parseInt(s(302))/3*(-parseInt(s(250))/4)+parseInt(s(296))/5+-parseInt(s(270))/6+parseInt(s(276))/7+-parseInt(s(237))/8*(-parseInt(s(247))/9)+parseInt(s(280))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[H(293)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(t,i){const s=O();return(H=function(t,i){return s[t-=236]})(t,i)}!function(){D(this,(function(){const t=H,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(259),"i"),n=G(t(249));i[t(255)](n+t(260))&&s[t(255)](n+"input")?G():n("0")}))()}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function O(){const t=["console","length","log","deathTime","200683pyIxbL","deadLightningsMeshes","minHeight","random","2151460OIPGUx","destOffset","gger","stateObject","RAY_PROPAGATING","inited","size","while (true) {}","maxSlope","33783gbaGCY","lightningsMeshes","action","maxHeight","apply","lightningMinPeriod","lightningMaterial","2951335QASwYS","debu","copyParameters","geometry","stormParams","info","2142591uTIwgX","error","set","RAY_EXTINGUISHED","getNextLightningTime","exception","maxLightnings","lerp","723032Jkcdhj","counter","multiplyScalar","return (function() ","push","birthTime","isLightningStorm","lightningMinDuration",'{}.constructor("return this")( )',"nextLightningTime","90mqZswx","lightningParameters","init","4ZZYHQs","indexOf","lightningMaxDuration","__proto__","state","test","add","onRayPosition","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","toString","lightningMaxPeriod","12OnKnXy","onLightningDown","copy","warn","prototype","bind","rayParameters","4547628nPzYDa","sourceOffset"];return(O=function(){return t})()}z(void 0,(function(){const t=H;let i;try{i=Function(t(240)+t(245)+");")()}catch(e){i=window}const s=i[t(272)]=i[t(272)]||{},n=[t(274),t(266),t(301),t(303),t(307),"table","trace"];for(let r=0;r<n[t(273)];r++){const i=z[t(258)][t(267)][t(268)](z),e=n[r],o=s[e]||i;i[t(253)]=z[t(268)](z),i[t(261)]=o[t(261)][t(268)](o),s[e]=i}}))();class E extends a{constructor(t={}){const i=H;super(),this[i(243)]=!0,this[i(300)]=t,t[i(286)]=void 0!==t[i(286)]?t[i(286)]:1e3,t[i(278)]=void 0!==t.minHeight?t.minHeight:80,t[i(292)]=void 0!==t.maxHeight?t[i(292)]:100,t[i(288)]=void 0!==t.maxSlope?t[i(288)]:1.1,t[i(308)]=void 0!==t[i(308)]?t[i(308)]:3,t[i(294)]=void 0!==t[i(294)]?t.lightningMinPeriod:3,t[i(262)]=void 0!==t.lightningMaxPeriod?t[i(262)]:7,t[i(244)]=void 0!==t.lightningMinDuration?t[i(244)]:1,t[i(252)]=void 0!==t[i(252)]?t[i(252)]:2.5,this[i(248)]=A[i(298)](t[i(248)],t[i(248)]),this[i(248)].isEternal=!1,this[i(295)]=void 0!==t[i(295)]?t[i(295)]:new h({color:11599871}),void 0!==t[i(257)]?this[i(257)]=t.onRayPosition:this[i(257)]=function(s,n){const e=i;n.set((Math[e(279)]()-.5)*t[e(286)],0,(Math[e(279)]()-.5)*t[e(286)]);const r=o[e(236)](t[e(278)],t.maxHeight,Math.random());s[e(304)](t[e(288)]*(2*Math[e(279)]()-1),1,t[e(288)]*(2*Math[e(279)]()-1))[e(239)](r)[e(256)](n)},this[i(264)]=t[i(264)],this[i(285)]=!1,this[i(246)]=0,this[i(290)]=[],this[i(277)]=[];for(let s=0;s<this[i(300)][i(308)];s++){const t=new A(A[i(298)]({},this[i(248)])),s=new c(t,this[i(295)]);this.deadLightningsMeshes[i(241)](s)}}update(t){const i=H;if(!this[i(285)]&&(this[i(246)]=this.getNextLightningTime(t)*Math[i(279)](),this.inited=!0),t>=this[i(246)]){const s=this[i(277)].pop();if(s){const n=A[i(298)](s.geometry[i(269)],this[i(248)]);n[i(242)]=t,n[i(275)]=t+o.lerp(this.stormParams.lightningMinDuration,this.stormParams[i(252)],Math.random()),this[i(257)](n[i(271)],n[i(281)]),n.noiseSeed=Math.random(),this.add(s),this.lightningsMeshes[i(241)](s)}this[i(246)]=this[i(306)](t)}let s=0,n=this[i(290)].length;for(;s<n;){const e=this.lightningsMeshes[s],r=e[i(299)],o=r[i(254)];r.update(t),o===A[i(284)]&&r[i(254)]>o&&this[i(264)]&&this[i(264)](r),r[i(254)]===A[i(305)]?(this[i(290)].splice(this.lightningsMeshes[i(251)](e),1),this[i(277)][i(241)](e),this.remove(e),n--):s++}}getNextLightningTime(t){const i=H;return t+o[i(236)](this.stormParams.lightningMinPeriod,this[i(300)][i(262)],Math.random())/(this[i(300)][i(308)]+1)}[F(265)](t,i){const s=F;return super[s(265)](t,i),this[s(300)][s(286)]=t[s(300)].size,this[s(300)].minHeight=t[s(300)].minHeight,this[s(300)].maxHeight=t.stormParams[s(292)],this[s(300)][s(288)]=t[s(300)][s(288)],this[s(300)].maxLightnings=t[s(300)][s(308)],this.stormParams.lightningMinPeriod=t[s(300)][s(294)],this[s(300)][s(262)]=t[s(300)][s(262)],this.stormParams.lightningMinDuration=t[s(300)][s(244)],this.stormParams.lightningMaxDuration=t[s(300)][s(252)],this.lightningParameters=A[s(298)]({},t[s(248)]),this[s(295)]=t[s(300)][s(295)],this[s(264)]=t[s(264)],this}clone(){const t=F;return new this.constructor(this[t(300)])[t(265)](this)}}function G(t){function i(t){const s=H;if("string"==typeof t)return function(t){}.constructor(s(287))[s(293)](s(238));1!==(""+t/t)[s(273)]||t%20==0?function(){return!0}.constructor(s(297)+s(282)).call(s(291)):function(){return!1}[s(258)]("debugger").apply(s(283)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const L=N;function N(t,i){const s=k();return(N=function(t,i){return s[t-=238]})(t,i)}!function(t,i){const s=N,n=k();for(;;)try{if(568121===parseInt(s(279))/1*(parseInt(s(275))/2)+parseInt(s(280))/3*(-parseInt(s(292))/4)+parseInt(s(262))/5*(parseInt(s(255))/6)+-parseInt(s(278))/7*(-parseInt(s(257))/8)+parseInt(s(238))/9*(parseInt(s(239))/10)+parseInt(s(296))/11*(parseInt(s(258))/12)+parseInt(s(253))/13*(-parseInt(s(295))/14))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[N(290)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function k(){const t=["sourceOffset","timeScale","7ViaSno","1DkbmxY","1554skJrje","size","Vector3","__proto__","length","color","radius1",'{}.constructor("return this")( )',"sub","rayParameters","apply","pos1","4320vOVDhM","multiplyScalar","action","185178WuBqot","11cLOxcn","subrayConePosition","lightStorm","150606hOnLml","270JJvgfj","counter","toString","table","gger","warn","input","trace","add","return (function() ","straightness","debu","roughness","constructor","1599qvrHfK","bind","188346jGSshN","subVectors","8660248DjnqME","8941956AuyqdO","maxHeight","minHeight","prototype","5hmcubF","string","function *\\( *\\)","dot","info","set","console","primitive","log","Color","call","test","radius0","887158mXHnJs"];return(k=function(){return t})()}!function(){Y(this,(function(){const t=N,i=new RegExp(t(264)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=$("init");i[t(273)](n+"chain")&&s[t(273)](n+t(245))?$():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[N(290)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();U(void 0,(function(){const t=N,i=function(){const t=N;let i;try{i=Function(t(248)+t(287)+");")()}catch(s){i=window}return i}(),s=i[t(268)]=i.console||{},n=[t(270),t(244),t(266),"error","exception",t(242),t(246)];for(let e=0;e<n[t(284)];e++){const i=U[t(252)][t(261)].bind(U),r=n[e],o=s[r]||i;i[t(283)]=U[t(254)](U),i[t(241)]=o[t(241)][t(254)](o),s[r]=i}}))();const Z=["object"],X=f({__name:L(298),props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=L,s=t,n=new(u[i(271)])(s.color),e=new h({color:n}),r=new(u[i(282)])(0,-1,0);let o=0;const a=new(u[i(282)]),c=new(u[i(282)]),p={roughness:s.roughness,straightness:s[i(249)],radius0:s[i(274)],radius1:s[i(286)],timeScale:s[i(277)],subrayPeriod:s.subrayPeriod,subrayDutyCycle:s.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const h=i;e[h(297)](t,s,n,.6,.6,.5),o=e[h(289)][h(276)].y,a[h(256)](n[h(291)],e.rayParameters[h(276)]);const u=r[h(265)](a);c.copy(r)[h(293)](u),a[h(288)](c);const l=u/o>.5?o/u:1;c[h(293)](l),a[h(247)](c),n[h(291)].addVectors(a,e.rayParameters[h(276)])}},d=new E({size:s[i(281)],minHeight:s[i(260)],maxHeight:s[i(259)],maxSlope:.6,maxLightnings:s.maxLightnings,lightningParameters:p,lightningMaterial:e});g((()=>{const t=i,n=d.stormParams;n[t(281)]=s[t(281)],n[t(260)]=s[t(260)],n[t(259)]=s[t(259)],e.color[t(267)](s[t(285)]),p[t(251)]=s[t(251)],p[t(249)]=s[t(249)],p[t(274)]=s[t(274)],p.radius1=s[t(286)],p.timeScale=s[t(277)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d.update(t)})),(t,s)=>{const n=i;return y(),b(n(269),{object:v(d),renderOrder:9999},null,8,Z)}}});function $(t){function i(t){const s=N;if(typeof t===s(263))return function(t){}[s(252)]("while (true) {}").apply(s(240));1!==(""+t/t)[s(284)]||t%20==0?function(){return!0}[s(252)](s(250)+s(243))[s(272)](s(294)):function(){return!1}.constructor(s(250)+s(243))[s(290)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const q=K;!function(t,i){const s=K,n=B();for(;;)try{if(260044===parseInt(s(465))/1*(-parseInt(s(491))/2)+-parseInt(s(469))/3*(-parseInt(s(473))/4)+parseInt(s(472))/5+parseInt(s(462))/6+-parseInt(s(486))/7*(parseInt(s(450))/8)+-parseInt(s(461))/9+parseInt(s(484))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const J=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[K(453)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function B(){const t=["trace","debu","warn","straightness","chain","gger","color","roughness","62850SgnOIY","端部半径","1706873YyEzcB","constructor","bind","console","stateObject","68UViaqR","radius1","timeScale","test","error","8MNbMsX","value","prototype","apply","未部半径",'{}.constructor("return this")( )',"#92399e","log","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","3412233zNcXeI","95166izSqiK","toString","直度度","1341OSiFnx","maxHeight","function *\\( *\\)","return (function() ","726KimIeS","__proto__","minHeight","2310780FSUVtt","7344XmgFSx","call","lightningStorm"];return(B=function(){return t})()}!function(){J(this,(function(){const t=K,i=new RegExp(t(467)),s=new RegExp(t(459),"i"),n=tt("init");i[t(494)](n+t(480))&&s[t(494)](n+"input")?tt():n("0")}))()}();const W=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[K(453)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(t,i){const s=B();return(K=function(t,i){return s[t-=449]})(t,i)}W(void 0,(function(){const t=K;let i;try{i=Function(t(468)+t(455)+");")()}catch(e){i=window}const s=i[t(489)]=i[t(489)]||{},n=[t(457),t(478),"info",t(449),"exception","table",t(476)];for(let r=0;r<n.length;r++){const i=W[t(487)][t(452)][t(488)](W),e=n[r],o=s[e]||i;i[t(470)]=W.bind(W),i[t(463)]=o[t(463)][t(488)](o),s[e]=i}}))();const Q=f({__name:q(475),setup(i){const s=q,n=S({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:s(456),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(464),value:.65,min:0,max:1,step:.01},radius0:{label:s(485),value:1,min:.1,max:10,step:.01},radius1:{label:s(454),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(P,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[x(X,{minHeight:v(e)[m(451)],maxHeight:v(r)[m(451)],color:v(o).value,roughness:v(a).value,straightness:v(h).value,radius0:v(c)[m(451)],radius1:v(u)[m(451)],timeScale:v(l)[m(451)]},null,8,[m(471),m(466),m(482),m(483),m(479),"radius0",m(492),m(493)]),x(v(_),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(v(d))],64)}}});function tt(t){function i(t){const s=K;if(typeof t===s(458))return function(t){}[s(487)]("while (true) {}")[s(453)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debu"+s(481))[s(474)](s(460)):function(){return!1}.constructor(s(477)+s(481))[s(453)](s(490)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{Q as default};

import{b_ as t,a0 as n,C as e,j as r}from"./three.eXhPIzTa1723718122052.js";import{N as o}from"./@tresjs.GO-cpSrO1723718122052.js";import{R as c}from"./all.three.XpMBXZqC1723718122052.js";import{d as a,b as i,a4 as u,a1 as s,w as f,o as l,D as p,J as m,m as d,u as v}from"./@vue.Q1VpS3901723718122052.js";!function(t,n){const e=h,r=x();for(;;)try{if(229473===parseInt(e(485))/1*(-parseInt(e(486))/2)+parseInt(e(479))/3+parseInt(e(482))/4*(parseInt(e(484))/5)+parseInt(e(483))/6+parseInt(e(514))/7+-parseInt(e(501))/8+-parseInt(e(487))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(497)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(t,n){const e=x();return(h=function(t,n){return e[t-=477]})(t,n)}function x(){const t=["24gGuQRJ","439047kCxZUr","table","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","test","toString","prototype","debu","vertexShader","#include <project_vertex>","constructor","apply","warn","function *\\( *\\)","chain","1859840CYNZAg","length","gger","string","input","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","bind","trace","replace","log","fragmentShader","init","1363992qIdeaW","void main() {","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","877368IkSZaH","info","exception","212804LIMYYG","467682YMbxJo","5ahWCQK","8977Guexcq"];return(x=function(){return t})()}!function(){g(this,(function(){const t=h,n=new RegExp(t(499)),e=new RegExp(t(477),"i"),r=_(t(513));n[t(490)](r+t(500))&&e.test(r+t(505))?_():r("0")}))()}();const y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(497)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();y(void 0,(function(){const t=h,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(478)]=n[t(478)]||{},r=[t(511),t(498),t(480),"error",t(481),t(488),t(509)];for(let o=0;o<r[t(502)];o++){const n=y[t(496)][t(492)][t(508)](y),c=r[o],a=e[c]||n;n.__proto__=y.bind(y),n[t(491)]=a.toString[t(508)](a),e[c]=n}}))();function _(t){function n(t){const e=h;if(typeof t===e(504))return function(t){}[e(496)]("while (true) {}")[e(497)]("counter");1!==(""+t/t)[e(502)]||t%20==0?function(){return!0}[e(496)](e(493)+e(503)).call("action"):function(){return!1}.constructor(e(493)+"gger").apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const w=C;function C(t,n){const e=S();return(C=function(t,n){return e[t-=420]})(t,n)}!function(t,n){const e=C,r=S();for(;;)try{if(689353===-parseInt(e(461))/1+-parseInt(e(445))/2*(-parseInt(e(481))/3)+-parseInt(e(477))/4*(-parseInt(e(479))/5)+parseInt(e(436))/6+-parseInt(e(457))/7*(-parseInt(e(449))/8)+parseInt(e(468))/9+-parseInt(e(441))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=C,n=new RegExp(t(426)),e=new RegExp(t(437),"i"),r=R(t(432));n[t(438)](r+t(444))&&e[t(438)](r+t(421))?R():r("0")}))()}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(431)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();b(void 0,(function(){const t=C;let n;try{n=Function(t(467)+t(428)+");")()}catch(o){n=window}const e=n[t(460)]=n.console||{},r=[t(459),t(420),"info",t(456),t(470),t(474),t(482)];for(let c=0;c<r[t(486)];c++){const n=b[t(465)][t(469)][t(442)](b),o=r[c],a=e[o]||n;n[t(440)]=b[t(442)](b),n[t(423)]=a[t(423)][t(442)](a),e[o]=n}}))();const M=["rotation-x"],j=[w(458)];function S(){const t=["51eSooGG","trace","TresGroup","counter","uniforms","length","warn","input","set","toString","uv1","onBeforeCompile","function *\\( *\\)","debu",'{}.constructor("return this")( )',"add","textureMatrixUniform","apply","init","value","wrapS","tmRef","4340262LYygUj","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","channel","__proto__","24914810cqwuvn","bind","visible","chain","145522CXUOku","TresMeshStandardMaterial","call","string","15992njHxrw","#ffffff","tmsmRef","tpgRef","gger","color","wrapT","error","1589MXDPRW","object","log","console","1109848PCgPnd","#444","onBeforeRender","mixStrength","constructor","attributes","return (function() ","11417328qzWeaV","prototype","exception","renderTargetUniform","while (true) {}","TresMesh","table","TresPlaneGeometry","showGridHelper","7132OIZYps","assign","1705fHeQOq","reflectorDiffuse"];return(S=function(){return t})()}const z=a({__name:w(480),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:w(450)}},async setup(a){const g=w;let x,y;const _=a,C=new t(9.5,10),I=i(),b=i(),S=i(),z=new c,R={mirror:{value:_.mirror},mixStrength:{value:_[g(464)]}},E=([x,y]=u((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),x=await x,y(),x);for(var T=0;T<3;T++)E[T][g(434)]=n,E[T][g(455)]=n,E[T].repeat[g(422)](16,16);const G={color:new e(g(462)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},k=t=>{const n=g;t[n(485)].reflectMap=z[n(471)],t[n(485)].textureMatrix=z[n(430)],t[n(485)]=Object[n(478)](t[n(485)],R),(t=>{const n=h;t[n(494)]=t[n(494)][n(510)](n(515),n(506)),t.vertexShader=t[n(494)][n(510)](n(495),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=h;t[n(512)]=t[n(512)].replace(n(515),n(507)),t[n(512)]=t[n(512)][n(510)]("#include <emissivemap_fragment>",n(489))})(t)};return s((()=>{const t=g;I[t(433)]&&(I[t(433)][t(466)][t(424)]=I.value[t(466)].uv),S[t(433)]&&(S[t(433)].aoMap[t(439)]=1,S.value[t(425)]=k),b[t(433)]&&(b.value[t(429)](z),b[t(433)][t(463)]=(t,n,e)=>{z.update(t,n,e)}),_[t(454)]&&S[t(433)]&&(S.value[t(454)]=new e(_[t(454)]))})),f((()=>_[g(476)]),(t=>{C[g(443)]=t})),(t,n)=>{const e=g;return l(),p(e(483),null,[m(e(473),{ref_key:e(435),ref:b,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(475),{ref_key:e(452),ref:I,args:[10,10]},null,512),m(e(446),d({ref_key:e(451),ref:S},G),null,16)],8,M),m("primitive",{object:v(C)},null,8,j)])}}});function R(t){function n(t){const e=C;if(typeof t===e(448))return function(t){}[e(465)](e(472))[e(431)](e(484));1!==(""+t/t)[e(486)]||t%20==0?function(){return!0}[e(465)](e(427)+e(453))[e(447)]("action"):function(){return!1}[e(465)](e(427)+e(453)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{z as _};

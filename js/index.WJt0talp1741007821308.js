var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aK as v,aL as m,A as g,aU as _,C as y,a0 as x,W as I,m as b,n as S,cb as w,cc as M,K as R,h as A,b as E,e as T,_ as D,l as P,a_ as z,V as C,bp as O,z as F,aj as k,B,c as U,aI as j,g as N,M as L,ar as H,a9 as Z,U as G,bO as V}from"./three.sBrYSCgq1741007821308.js";import{m as W,l as $,e as Y}from"./@tresjs.u6hJLBm41741007821308.js";import{R as K}from"./three-stdlib.7G-ooWjg1741007821308.js";import{y as q,b as X,w as J,a as Q,u as nn,d as tn,W as en,a3 as rn,o as on,H as an,J as cn,M as sn,a0 as un,a7 as ln,a2 as fn,q as pn,f as dn,N as hn,a8 as vn,r as mn,B as gn,v as _n,s as yn,F as xn,a6 as In,m as bn}from"./@vue.NRI7TcgI1741007821308.js";import{M as Sn,a as wn,C as Mn}from"./@pmndrs.pRt0V6Fh1741007821308.js";import{h as Rn}from"./object-hash.W8rvIzEM1741007821308.js";var An=Dn;!function(n,t){for(var e=Dn,r=Cn();;)try{if(515803===-parseInt(e(258))/1+parseInt(e(237))/2+parseInt(e(255))/3+parseInt(e(232))/4+-parseInt(e(264))/5*(-parseInt(e(267))/6)+-parseInt(e(262))/7*(parseInt(e(252))/8)+-parseInt(e(260))/9*(-parseInt(e(229))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(250)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){En(this,(function(){var n=Dn,t=new RegExp(n(238)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=On(n(249));t[n(263)](r+"chain")&&e[n(263)](r+n(242))?On():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(250)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(n,t){var e=Cn();return(Dn=function(n,t){return e[n-=227]})(n,t)}Tn(void 0,(function(){var n,t=Dn;try{n=Function(t(265)+t(240)+");")()}catch(s){n=window}for(var e=n[t(233)]=n.console||{},r=["log","warn",t(236),t(234),t(227),t(243),t(254)],o=0;o<r[t(228)];o++){var i=Tn[t(251)][t(244)][t(247)](Tn),a=r[o],c=e[a]||i;i.__proto__=Tn[t(247)](Tn),i[t(261)]=c[t(261)].bind(c),e[a]=i}}))();class Pn extends s{constructor(){var n=Dn;super(),this[n(235)]=null,this[n(235)]=new u}add(...n){return this[Dn(235)].add(...n),this}[An(246)](){var n=An;this[n(235)].traverse((t=>{var e=n;t instanceof l&&(t[e(259)].dispose(),t[e(256)][e(231)](),t.material[e(230)]&&t[e(256)].map[e(231)](),this[e(235)][e(253)](t))})),this[n(235)]=null}}const zn=Pn;function Cn(){var n=["debu","destructor","bind","while (true) {}","init","apply","constructor","24XWIdLM","remove","trace","1228791aenSNo","material","gger","883826lcRfxO","geometry","9sGugRA","toString","2006389OtZzNi","test","2477985HskbCn","return (function() ","action","12CUQflW","exception","length","3519850Bcggkx","map","dispose","751404KDMDDH","console","error","virtualScene","info","637766rmqvvI","function *\\( *\\)","string",'{}.constructor("return this")( )',"call","input","table","prototype"];return(Cn=function(){return n})()}function On(n){function t(n){var e=Dn;if(typeof n===e(239))return function(n){}[e(251)](e(248))[e(250)]("counter");1!==(""+n/n)[e(228)]||n%20==0?function(){return!0}[e(251)](e(245)+e(257))[e(241)](e(266)):function(){return!1}.constructor(e(245)+"gger")[e(250)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Fn(){const n=["2027754rGnxwR","counter","prototype","toString","2284456udAYyW",'{}.constructor("return this")( )',"return (function() ","input","exception","call","length","studio/poly_haven_studio_1k.hdr","console","table","indoor/abandoned_games_room_02_1k.hdr","5ScIFxz","kiara/kiara_1_dawn_1k.hdr","info","246842yoLxAd","indoor/small_hangar_01_1k.hdr","outdoor/satara_night_1k.hdr","chain","apply","197446jdjIlN","__proto__","error","75488gSCKoG","outdoor/snowy_forest_path_01_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","action","city/modern_buildings_2_1k.hdr","outood/mossy_forest_1k.hdr","9ObDyLE","log","test","64320dwlEMI","bind","2787170JHCqQe","trace","city/canary_wharf_1k.hdr","warn","function *\\( *\\)","constructor","9lRdGuU","init","stateObject"];return(Fn=function(){return n})()}const kn=Bn;function Bn(n,t){const e=Fn();return(Bn=function(n,t){return e[n-=138]})(n,t)}!function(n,t){const e=Bn,r=Fn();for(;;)try{if(203852===parseInt(e(150))/1+parseInt(e(155))/2*(-parseInt(e(178))/3)+parseInt(e(170))/4+parseInt(e(147))/5*(-parseInt(e(181))/6)+parseInt(e(158))/7+parseInt(e(185))/8+parseInt(e(167))/9*(parseInt(e(172))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(154)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Un(this,(function(){const n=Bn,t=new RegExp(n(176)),e=new RegExp(n(162),"i"),r=Ln(n(179));t[n(169)](r+n(153))&&e[n(169)](r+n(139))?Ln():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jn(void 0,(function(){const n=Bn;let t;try{t=Function(n(138)+n(186)+");")()}catch(o){t=window}const e=t.console=t[n(144)]||{},r=[n(168),n(175),n(149),n(157),n(140),n(145),n(173)];for(let i=0;i<r.length;i++){const t=jn[n(177)][n(183)].bind(jn),o=r[i],a=e[o]||t;t[n(156)]=jn[n(171)](jn),t[n(184)]=a[n(184)][n(171)](a),e[o]=t}}))();const Nn={sunset:"venice/venice_sunset_1k.hdr",studio:kn(143),city:kn(174),umbrellas:kn(160),night:kn(152),forest:kn(166),snow:kn(159),dawn:kn(148),hangar:kn(151),urban:kn(146),modern:kn(165),shangai:"city/shanghai_bund_1k.hdr"};function Ln(n){function t(n){const e=Bn;if("string"==typeof n)return function(n){}[e(177)](e(161))[e(154)](e(182));1!==(""+n/n)[e(142)]||n%20==0?function(){return!0}[e(177)]("debu"+e(163))[e(141)](e(164)):function(){return!1}.constructor("debu"+e(163))[e(154)](e(180)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vn,r=Gn();for(;;)try{if(339657===-parseInt(e(185))/1*(parseInt(e(158))/2)+-parseInt(e(190))/3*(parseInt(e(179))/4)+parseInt(e(178))/5+-parseInt(e(163))/6*(-parseInt(e(177))/7)+parseInt(e(197))/8+-parseInt(e(198))/9*(parseInt(e(175))/10)+-parseInt(e(166))/11*(-parseInt(e(191))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Vn,t=new RegExp(n(186)),e=new RegExp(n(161),"i"),r=Wn(n(167));t[n(155)](r+n(195))&&e.test(r+n(165))?Wn():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(205)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Zn(void 0,(function(){const n=Vn,t=function(){const n=Vn;let t;try{t=Function(n(162)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(176)]=t[n(176)]||{},r=[n(183),n(164),n(194),n(174),n(156),n(192),"trace"];for(let o=0;o<r.length;o++){const t=Zn.constructor[n(188)][n(189)](Zn),i=r[o],a=e[i]||t;t[n(204)]=Zn[n(189)](Zn),t[n(184)]=a.toString[n(189)](a),e[i]=t}}))();function Gn(){const n=["toString","19oyRqFS","function *\\( *\\)","length","prototype","bind","2985qCyiex","4260204bQMvDW","table","string","info","chain","backgroundBlurriness","4520104zFRLVD","4944285Wqsnaf","texture","isColor","setPath","environment","Failed to load environment map: ","__proto__","apply","test","exception","while (true) {}","8298iBDnfr","counter","isArray","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","6YJNuHN","warn","input","11krdAlB","init","debu","value","mapping","background","constructor","stateObject","error","10uPNJzo","console","2162335YbIeyS","241815XZbcTx","1244MwmKzU","join","Preset must be one of: ","gger","log"];return(Gn=function(){return n})()}function Vn(n,t){const e=Gn();return(Vn=function(n,t){return e[n-=155]})(n,t)}function Wn(n){function t(n){const e=Vn;if(typeof n===e(193))return function(n){}[e(172)](e(157))[e(205)](e(159));1!==(""+n/n)[e(187)]||n%20==0?function(){return!0}.constructor(e(168)+e(182)).call("action"):function(){return!1}[e(172)]("debu"+e(182))[e(205)](e(173)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $n=Yn;function Yn(n,t){const e=Xn();return(Yn=function(n,t){return e[n-=433]})(n,t)}!function(n,t){const e=Yn,r=Xn();for(;;)try{if(140017===parseInt(e(474))/1*(-parseInt(e(452))/2)+parseInt(e(481))/3*(-parseInt(e(463))/4)+parseInt(e(439))/5*(-parseInt(e(462))/6)+parseInt(e(433))/7*(parseInt(e(437))/8)+-parseInt(e(434))/9+parseInt(e(476))/10*(-parseInt(e(484))/11)+parseInt(e(435))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(477)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kn(this,(function(){const n=Yn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(446),"i"),r=Qn("init");t.test(r+n(436))&&e[n(438)](r+n(459))?Qn():r("0")}))()}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(477)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xn(){const n=["925704Vebkdy","5268816OccPTT","chain","1292728fADvGj","test","86020NYaPJj","exception","table","background","console","useDefaultScene","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","destructor","call","environment","return (function() ","symbol","6206kTITnN","generateMipmaps","dispose","info","counter","$slots","__proto__","input","update","debu","30YhTNfJ","4zVlnbf","default","envSence","component","while (true) {}","resolution","constructor","value","type","toString","near","75pJlZar","texture","146570YcIofe","apply","action","bind","length","29181ZxcYfj","gger",'{}.constructor("return this")( )',"22kBsnlE","error","string","frames","7ULZCid"];return(Xn=function(){return n})()}qn(void 0,(function(){const n=Yn,t=function(){const n=Yn;let t;try{t=Function(n(450)+n(483)+");")()}catch(e){t=window}return t}(),e=t[n(443)]=t.console||{},r=["log",n(445),n(455),n(485),n(440),n(441),"trace"];for(let o=0;o<r[n(480)];o++){const t=qn.constructor.prototype[n(479)](qn),i=r[o],a=e[i]||t;t[n(458)]=qn[n(479)](qn),t.toString=a[n(472)][n(479)](a),e[i]=t}}))();const Jn=tn({__name:$n(466),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=$n;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=X(null),x=null;const I=X(null);en((()=>{var n,t;const e=Yn;null==(n=I[e(470)])||n[e(447)](),null==(t=y[e(470)])||t[e(454)]()}));const{onBeforeLoop:b}=Y();let S=1;b((()=>{const n=Yn;x&&I[n(470)]&&y[n(470)]&&(i[n(487)]===1/0||S<i[n(487)])&&(i.useDefaultScene?x[n(460)](s[n(470)],u.value):x[n(460)](s[n(470)],ln(I[n(470)].virtualScene)),S++)}));const w=([r,o]=rn((()=>async function(n,t){const e=Vn,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=q(n);J(n,(()=>{o()}));const l=X(null),h=Q((()=>Array[e(160)](c[e(169)]))),v=Q((()=>h.value?f:K));return J([c,s],(async([n,t])=>{const r=e;if(n&&n[r(187)]>0&&!(null==i?void 0:i[r(169)])){try{l.value=await $(v[r(169)],h[r(169)]?[...nn(n)]:nn(n),(n=>{t&&n[r(201)](nn(t))}))}catch(o){throw new Error(r(203)+o)}l[r(169)]&&(l[r(169)][r(170)]=h[r(169)]?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(169)]&&n&&(r.value[t(202)]=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r[i(169)]){let e=(null==t?void 0:t[i(169)])?t[i(169)][i(199)]:o,a=r.value.background;!(null==a?void 0:a[i(200)])&&(a=void 0),r[i(169)][i(171)]=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a.value),(n=>{const t=e;r[t(169)]&&n&&(r.value[t(196)]=n)}),{immediate:!0}),J((()=>null==i?void 0:i[e(169)]),(async n=>{const t=e;if(n&&n in Nn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=Nn[n];try{l[t(169)]=await $(K,i,(n=>{e&&n[t(201)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}l[t(169)]&&l[t(169)]&&(l[t(169)].mapping=d),o()}else if(n&&!(n in Nn))throw new Error(t(181)+Object.keys(Nn)[t(180)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Yn;n?(u[t(470)].environment=n[t(475)],i[t(442)]&&(u.value[t(442)]=n[t(475)])):(u[t(470)][t(449)]=w[t(470)],i.background&&(u[t(470)][t(442)]=w[t(470)]))};J(w,(n=>{const t=Yn;y[t(470)]&&M(y[t(470)])}),{immediate:!0,deep:!0}),c({EnvSence:zn});const R=()=>{var n;const t=Yn;null==(n=y[t(470)])||n[t(454)](),y[t(470)]=new v(i[t(468)]),x=new m(i[t(473)],i.far,y.value),i[t(444)]?(y[t(470)].texture[t(471)]=g,y[t(470)][t(475)][t(453)]=!1,y.value[t(475)].minFilter=_,y[t(470)][t(475)].magFilter=_):y[t(470)][t(475)][t(471)]=h,M(y[t(470)])};return J((()=>un()[e(464)]),(n=>{var t,r;const o=e;n&&(!y[o(470)]||y.value[o(475)][o(471)]!==h)&&(l=n(),Array.isArray(l)&&l[o(480)]>0&&typeof(null==(t=l[0])?void 0:t[o(471)])!==o(451))?R():(null==(r=y[o(470)])||r[o(454)](),y[o(470)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(470)]=w,J((()=>i.useDefaultScene),(n=>{y.value&&R()})),(n,t)=>{const r=e;return nn(y)?(on(),an("TresEnvSence",{key:0,ref_key:r(465),ref:I},[cn(n[r(457)],r(464))],512)):sn("",!0)}}});function Qn(n){function t(n){const e=Yn;if(typeof n===e(486))return function(n){}[e(469)](e(467))[e(477)](e(456));1!==(""+n/n)[e(480)]||n%20==0?function(){return!0}[e(469)](e(461)+e(482))[e(448)](e(478)):function(){return!1}[e(469)]("debugger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=st;!function(n,t){const e=st,r=et();for(;;)try{if(539366===parseInt(e(503))/1*(parseInt(e(517))/2)+parseInt(e(505))/3*(parseInt(e(500))/4)+parseInt(e(477))/5*(-parseInt(e(497))/6)+parseInt(e(486))/7*(parseInt(e(478))/8)+parseInt(e(483))/9+-parseInt(e(520))/10+-parseInt(e(513))/11*(parseInt(e(519))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[st(489)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function et(){const n=["9234850LLgUeo","call","map","return (function() ","length","value","action","debu","error","prototype","exception","13755zyQkLd","1457584MCxgAb","warn","test","while (true) {}","info","7166772qgUSlx",'{}.constructor("return this")( )',"constructor","35AjjeDv","intensity","TresRingGeometry","apply","gger","init","log","multiplyScalar","rect","material","string","1698yEFaeL","circle","stateObject","593868bIYqDu","color","from","928659qhjcWv","index","12LcZmsx","TresPlaneGeometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toneMapped","toString","chain","table","bind","473TZlVSX","function *\\( *\\)","counter","needsUpdate","2pPoDGO","console","275844zFtgtZ"];return(et=function(){return n})()}!function(){tt(this,(function(){const n=st,t=new RegExp(n(514)),e=new RegExp(n(507),"i"),r=lt(n(491));t[n(480)](r+n(510))&&e[n(480)](r+"input")?lt():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[st(489)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();rt(void 0,(function(){const n=st,t=function(){const n=st;let t;try{t=Function(n(523)+n(484)+");")()}catch(e){t=window}return t}(),e=t[n(518)]=t[n(518)]||{},r=[n(492),n(479),n(482),n(528),n(476),n(511),"trace"];for(let o=0;o<r.length;o++){const t=rt.constructor[n(529)][n(512)](rt),i=r[o],a=e[i]||t;t.__proto__=rt[n(512)](rt),t[n(509)]=a[n(509)][n(512)](a),e[i]=t}}))();const ot={key:0,args:[0,1,64]},it={key:1,args:[.5,1,64]},at={key:2},ct=[nt(508),nt(522),"side","color"];function st(n,t){const e=et();return(st=function(n,t){return e[n-=476]})(n,t)}const ut=tn({__name:nt(504),props:{args:{default:null},from:{default:nt(494)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=X();return fn((()=>{const n=st;r.value&&(r[n(525)][n(501)][n(493)](e[n(487)]),r.value[n(516)]=!0)})),J((()=>e[t(501)]),(n=>{const o=t;r.value&&(r[o(525)].color.set(n),r[o(525)][o(501)].multiplyScalar(e.intensity),r[o(525)][o(516)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return on(),an("TresMesh",null,[e.from===i(498)?(on(),an(i(488),ot)):"ring"===e[i(502)]?(on(),an(i(488),it)):e[i(502)]===i(494)?(on(),an(i(506),at)):(on(),dn(e[i(502)],{key:3,args:e})),hn("TresMeshBasicMaterial",{ref_key:i(495),ref:r,toneMapped:n[i(508)],map:n[i(522)],side:nn(x),color:n[i(501)]},null,8,ct)])}}});function lt(n){function t(n){const e=st;if(typeof n===e(496))return function(n){}[e(485)](e(481)).apply(e(515));1!==(""+n/n)[e(524)]||n%20==0?function(){return!0}.constructor(e(527)+e(490))[e(521)](e(526)):function(){return!1}.constructor(e(527)+e(490))[e(489)](e(499)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ft(){const n=["constructor","apply",'{}.constructor("return this")( )',"toString","33338gkoIlo","__proto__","4694208gQRfvt","width","log","table","string","format","info","20322DoWraj","clear","counter","debu","dispose","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2849376kiwrCG","error","input","setRenderTarget","test","chain","warn","action","while (true) {}","function *\\( *\\)","stateObject","value","depthTexture","bind","318517SoHvUj","console","713235kWWMBS","exception","type","3387112IUTSHD","gger","91QpdYNm","height"];return(ft=function(){return n})()}!function(n,t){const e=ht,r=ft();for(;;)try{if(838298===parseInt(e(390))/1+parseInt(e(403))/2+parseInt(e(376))/3+-parseInt(e(395))/4+-parseInt(e(392))/5+-parseInt(e(370))/6*(parseInt(e(397))/7)+parseInt(e(405))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(400)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=ht,t=new RegExp(n(385)),e=new RegExp(n(375),"i"),r=mt("init");t.test(r+n(381))&&e[n(380)](r+n(378))?mt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(400)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(n,t){const e=ft();return(ht=function(n,t){return e[n-=367]})(n,t)}function vt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?q(n):q(mn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=W();return fn((()=>{var n;const a=ht;null==(n=t[a(387)])||n.dispose(),t[a(387)]=new I((null==r?void 0:r[a(387)])||p[a(406)][a(387)],(null==e?void 0:e.value)||p[a(398)][a(387)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(387)])),(null==i?void 0:i[a(387)])&&(t[a(387)][a(388)]=new S((null==r?void 0:r[a(387)])||p[a(406)].value,(null==e?void 0:e[a(387)])||p[a(398)][a(387)]),t[a(387)][a(388)][a(368)]=w,t[a(387)][a(388)][a(394)]=M)})),s((()=>{const n=ht;(null==a?void 0:a.value)&&(l[n(387)][n(379)](ln(t[n(387)])),l[n(387)][n(371)](),l[n(387)].render(ln(f[n(387)]),ln(u[n(387)])),l.value.setRenderTarget(null))})),gn((()=>{var n;const e=ht;null==(n=t.value)||n[e(374)]()})),t}function mt(n){function t(n){const e=ht;if(typeof n===e(367))return function(n){}[e(399)](e(384))[e(400)](e(372));1!==(""+n/n).length||n%20==0?function(){return!0}[e(399)](e(373)+e(396)).call(e(383)):function(){return!1}.constructor(e(373)+"gger").apply(e(386)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=ht;let t;try{t=Function("return (function() "+n(401)+");")()}catch(o){t=window}const e=t[n(391)]=t[n(391)]||{},r=[n(407),n(382),n(369),n(377),n(393),n(408),"trace"];for(let i=0;i<r.length;i++){const t=dt[n(399)].prototype.bind(dt),o=r[i],a=e[o]||t;t[n(404)]=dt[n(389)](dt),t[n(402)]=a[n(402)][n(389)](a),e[o]=t}}))();const gt=xt;!function(n,t){const e=xt,r=It();for(;;)try{if(298781===-parseInt(e(344))/1*(parseInt(e(375))/2)+parseInt(e(354))/3+-parseInt(e(347))/4*(-parseInt(e(374))/5)+-parseInt(e(389))/6*(-parseInt(e(364))/7)+-parseInt(e(377))/8*(parseInt(e(386))/9)+parseInt(e(391))/10*(parseInt(e(395))/11)+-parseInt(e(371))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_t(this,(function(){const n=xt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=wt(n(357));t[n(343)](r+"chain")&&e[n(343)](r+"input")?wt():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(358)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xt(n,t){const e=It();return(xt=function(n,t){return e[n-=342]})(n,t)}function It(){const n=["error","18XCUdAn","trace","60eyURvS","thickness","index","backsideThickness","239316cVXSVK","setRenderTarget","test","1vybLbH","gger","exception","4MbabxT","traverse","MeshTransmissionMaterialClass","render","debu","fboResolution","length","922074zxRyLg","toString","value","init","apply","call","envMapIntensity","texture","prototype","uuid","1371174rEazfs","bind","stateObject","time","info","background","return (function() ","2317932fpPCcE","buffer","side","1209940gDINOK","852802lQlUmo","constructor","24JuGWnB","action","__proto__","while (true) {}","log",'{}.constructor("return this")( )',"isMesh","warn","toneMapping","1047555nKJNgs","material"];return(It=function(){return n})()}yt(void 0,(function(){const n=xt,t=function(){const n=xt;let t;try{t=Function(n(370)+n(382)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(381),n(384),n(368),n(388),n(346),"table",n(390)];for(let o=0;o<r[n(353)];o++){const t=yt[n(376)][n(362)][n(365)](yt),i=r[o],a=e[i]||t;t[n(379)]=yt.bind(yt),t.toString=a[n(355)].bind(a),e[i]=t}}))();const bt=[gt(372),gt(373)],St=tn({__name:gt(393),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=_n(),u=n;o({MeshTransmissionMaterial:Sn});const l=new wn,{onBeforeLoop:f}=Y(),p=vt({width:u[e(352)],height:u[e(352)],isLoop:!1}),d=vt({width:u[e(352)],height:u[e(352)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(356)]=function(n,t){const e=xt;let r;return n[e(348)]((n=>{const o=e;n[o(383)]&&n[o(387)]&&n[o(387)][o(363)]===t&&(r=n)})),r}(i[n(356)],r[n(356)][n(363)])})),f((({elapsed:n})=>{const t=e;r.value[t(367)]=n,r[t(356)].buffer===d[t(356)].texture&&s[t(356)]&&(m=a[t(356)].toneMapping,h=i.value[t(369)],v=r.value[t(360)],g=s[t(356)].material[t(373)],s.value[t(387)]=l,u.backside&&(a.value[t(342)](p[t(356)]),a[t(356)].render(i[t(356)],c[t(356)]),s[t(356)][t(387)]=r[t(356)],s[t(356)][t(387)].thickness=u[t(394)],s.value[t(387)][t(372)]=p.value.texture,s.value[t(387)][t(373)]=R,s.value[t(387)][t(360)]=0),a.value[t(342)](d[t(356)]),a[t(356)][t(350)](i.value,c[t(356)]),s[t(356)][t(387)][t(372)]=d[t(356)][t(361)],s[t(356)][t(387)]=r[t(356)],s.value[t(387)][t(392)]=u.thickness,s[t(356)][t(387)][t(373)]=g,s[t(356)][t(387)][t(360)]=v,i[t(356)].background=h,a[t(356)][t(342)](null),a[t(356)][t(385)]=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return on(),an("TresMeshTransmissionMaterial",{ref_key:o(349),ref:r,buffer:nn(d)[o(361)],side:nn(x)},null,8,bt)}}});function wt(n){function t(n){const e=xt;if("string"==typeof n)return function(n){}.constructor(e(380))[e(358)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(376)](e(351)+e(345))[e(359)](e(378)):function(){return!1}[e(376)](e(351)+"gger").apply(e(366)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Rt,r=Et();for(;;)try{if(913095===-parseInt(e(309))/1+parseInt(e(302))/2*(parseInt(e(358))/3)+-parseInt(e(345))/4+parseInt(e(352))/5*(-parseInt(e(329))/6)+parseInt(e(325))/7*(-parseInt(e(310))/8)+-parseInt(e(330))/9+parseInt(e(357))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Rt(327)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Rt(n,t){const e=Et();return(Rt=function(n,t){return e[n-=301]})(n,t)}!function(){Mt(this,(function(){const n=Rt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(344),"i"),r=Dt(n(335));t[n(305)](r+n(316))&&e[n(305)](r+n(339))?Dt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Rt(327)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(){const n=["counter","exception","init","while (true) {}","getBoundingSphere","bottom","input","top","prototype","length","inner","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3178692Ntfxma","$slots","disableX","call","set","__proto__","action","7715jRSoys","disableY","disable","left",'{}.constructor("return this")( )',"44208540DPkLdh","4722555aMdJWB","outer","2HSDhuu","info","default","test","debu","getCenter","constructor","1199794HvKlZA","244840dWqRIW","front","stateObject","matrixWorld","max","TresGroup","chain","log","min","value","back","position","gger","toString","bind","371ESTqVe","right","apply","console","3438PWZRzx","5231457yJsJPP","disableZ","identity"];return(Et=function(){return n})()}At(void 0,(function(){const n=Rt;let t;try{t=Function("return (function() "+n(356)+");")()}catch(o){t=window}const e=t[n(328)]=t[n(328)]||{},r=[n(317),"warn",n(303),"error",n(334),"table","trace"];for(let i=0;i<r[n(342)];i++){const t=At[n(308)][n(341)][n(324)](At),o=r[i],a=e[o]||t;t[n(350)]=At[n(324)](At),t[n(323)]=a.toString[n(324)](a),e[o]=t}}))();const Tt=tn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return pn((()=>{const n=Rt;if(!r[n(319)])return;if(!o[n(319)])return;r.value[n(313)][n(332)]();const e=(new A).setFromObject(o[n(319)],t.precise),i=new E,a=new T,c=e[n(314)].x-e.min.x,s=e[n(314)].y-e[n(318)].y,u=e[n(314)].z-e.min.z;e[n(307)](i),e[n(337)](a);const l=t[n(340)]?s/2:t[n(338)]?-s/2:0,f=t[n(355)]?-c/2:t[n(326)]?c/2:0,p=t[n(311)]?u/2:t[n(320)]?-u/2:0;r[n(319)][n(321)][n(349)](t[n(354)]||t[n(347)]?0:-i.x+f,t.disable||t[n(353)]?0:-i.y+l,t[n(354)]||t[n(331)]?0:-i.z+p)})),(n,t)=>{const i=Rt;return on(),an(i(315),{ref_key:"gref",ref:e},[hn("TresGroup",{ref_key:i(301),ref:r},[hn(i(315),{ref_key:i(343),ref:o},[cn(n[i(346)],i(304))],512)],512)],512)}}});function Dt(n){function t(n){const e=Rt;if("string"==typeof n)return function(n){}[e(308)](e(336))[e(327)](e(333));1!==(""+n/n)[e(342)]||n%20==0?function(){return!0}[e(308)](e(306)+"gger")[e(348)](e(351)):function(){return!1}[e(308)](e(306)+e(322))[e(327)](e(312)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pt=Ot;!function(n,t){const e=Ot,r=Bt();for(;;)try{if(845677===parseInt(e(419))/1+parseInt(e(382))/2*(-parseInt(e(406))/3)+parseInt(e(390))/4*(-parseInt(e(422))/5)+-parseInt(e(409))/6*(parseInt(e(363))/7)+parseInt(e(404))/8*(-parseInt(e(366))/9)+parseInt(e(388))/10+parseInt(e(412))/11*(parseInt(e(397))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zt(this,(function(){const n=Ot,t=new RegExp(n(408)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=jt(n(413));t[n(377)](r+n(389))&&e.test(r+n(407))?jt():r("0")}))()}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ot(369)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ot(n,t){const e=Bt();return(Ot=function(n,t){return e[n-=363]})(n,t)}Ct(void 0,(function(){const n=Ot;let t;try{t=Function(n(386)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(416)]=t.console||{},r=[n(396),n(365),n(368),n(381),"exception",n(414),n(410)];for(let i=0;i<r[n(374)];i++){const t=Ct[n(420)][n(402)][n(392)](Ct),o=r[i],a=e[o]||t;t[n(385)]=Ct[n(392)](Ct),t[n(375)]=a[n(375)].bind(a),e[o]=t}}))();const Ft=[Pt(376)],kt=[Pt(376)];function Bt(){const n=["resolution","ior","log","27204uytaFt","update","#ffffff","Vector3","intensity","prototype","scene","3120DainCh","backside","4533nJMlOx","input","function *\\( *\\)","438skGPYg","trace","while (true) {}","3355btFmCb","init","table","stateObject","console","$slots","debu","1078779VeeCQe","constructor","lightSource","140QgDtLA","helper","causticsOnly","worldRadius","29764ALeFvY","default","warn","2466GcGRkl","string","info","apply","params","counter","color","set","length","toString","object","test","far","add","gger","error","548xpMXwc","value","group","__proto__","return (function() ","index","7722130GNfCBM","chain","123640EnSGPN","backsideIOR","bind","primitive"];return(Bt=function(){return n})()}const Ut=tn({__name:Pt(387),props:{color:{default:Pt(399)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Pt,e=n,{renderer:r}=W(),o=Mn(r[t(383)],{frames:1/0,resolution:e[t(394)],worldRadius:e[t(425)]});o.params[t(405)]=!0;const i=_n(null);J(i,(n=>{const e=t;n&&o[e(403)][e(379)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(398)]()})),fn((()=>{const n=t;e[n(372)]&&o.params.color[n(373)](e.color),e[n(395)]&&(o[n(370)][n(395)]=e[n(395)]),e[n(391)]&&(o.params[n(391)]=e[n(391)]),e.far&&(o[n(370)].far=e[n(378)]),e[n(425)]&&(o[n(370)][n(425)]=e[n(425)]),e[n(401)]&&(o[n(370)][n(401)]=e[n(401)])})),J((()=>e.causticsOnly),(n=>{const e=t;o.params[e(424)]=n})),J((()=>e.lightSource),(n=>{const e=t;n&&o[e(370)][e(421)]instanceof D[e(400)]&&o[e(370)][e(421)][e(373)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(xn,null,[hn("TresGroup",{ref_key:r(384),ref:i},[cn(n[r(417)],r(364))],512),hn("primitive",{object:nn(o).group,position:[0,.003,0]},null,8,Ft),hn(r(393),{object:nn(o)[r(423)],visible:!1},null,8,kt)],64)}}});function jt(n){function t(n){const e=Ot;if(typeof n===e(367))return function(n){}[e(420)](e(411)).apply(e(371));1!==(""+n/n).length||n%20==0?function(){return!0}[e(420)](e(418)+e(380)).call("action"):function(){return!1}[e(420)](e(418)+e(380)).apply(e(415)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Zt,r=Ht();for(;;)try{if(741151===parseInt(e(125))/1+parseInt(e(170))/2+parseInt(e(119))/3+-parseInt(e(163))/4+parseInt(e(160))/5+parseInt(e(143))/6+-parseInt(e(126))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(133)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nt(this,(function(){const n=Zt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Vt(n(148));t[n(147)](r+n(131))&&e[n(147)](r+"input")?Vt():r("0")}))()}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(133)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(){const n=["prototype","warn","chain","; i++) {\n        vogelSample = vogelDiskSample(j, ","apply","properties","error","traverse","constructor","length","programs",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","remove","counter","1010814MVUCdr","dispose","; i ++) {\n        offset = (vogelDiskSample(j, ","ShaderChunk","test","init","material","shadowmap_pars_fragment","#ifdef USE_SHADOWMAP","toString","replace",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","compile","console","__proto__","#if defined( SHADOWMAP_TYPE_PCF )","action","3269685xXPvsL","stateObject","info","755148QXzKip",'{}.constructor("return this")( )',"bind","exception","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","2435432YHtvqW","forEach","2302299esXBcp","call",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","debu","gger","return (function() ","33147QvKbcV","13375348dZsGZb","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("];return(Ht=function(){return n})()}function Zt(n,t){const e=Ht();return(Zt=function(n,t){return e[n-=119]})(n,t)}Lt(void 0,(function(){const n=Zt;let t;try{t=Function(n(124)+n(164)+");")()}catch(o){t=window}const e=t[n(156)]=t[n(156)]||{},r=["log",n(130),n(162),n(135),n(166),"table","trace"];for(let i=0;i<r[n(138)];i++){const t=Lt.constructor[n(129)][n(165)](Lt),o=r[i],a=e[o]||t;t[n(157)]=Lt[n(165)](Lt),t[n(152)]=a[n(152)][n(165)](a),e[o]=t}}))();const Gt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Zt,o=D[r(146)].shadowmap_pars_fragment;return D[r(146)].shadowmap_pars_fragment=D[r(146)][r(150)][r(153)](r(151),r(168)+t+r(140)+n+r(121)+e+r(145)+e+r(169)+e+r(132)+e+r(128)+t+r(167)+e+r(154)).replace(r(158),r(127)),(n,t,e)=>{const i=r;D[i(146)][i(150)]=o,function(n,t,e){const r=Zt;t[r(136)]((t=>{const e=r;t[e(149)]&&(Array.isArray(t[e(149)])?t[e(149)][e(171)]((t=>{const r=e;n.properties[r(141)](t),t[r(144)]()})):(n[e(134)][e(141)](t[e(149)]),t[e(149)].dispose()))})),n[r(162)][r(139)][r(138)]=0,n[r(155)](t,e)}(n,t,e)}};function Vt(n){function t(n){const e=Zt;if("string"==typeof n)return function(n){}[e(137)]("while (true) {}")[e(133)](e(142));1!==(""+n/n)[e(138)]||n%20==0?function(){return!0}.constructor(e(122)+e(123))[e(120)](e(159)):function(){return!1}.constructor("debu"+e(123)).apply(e(161)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Wt=Kt;!function(n,t){const e=Kt,r=qt();for(;;)try{if(395561===-parseInt(e(276))/1*(parseInt(e(267))/2)+parseInt(e(262))/3+-parseInt(e(290))/4*(parseInt(e(280))/5)+-parseInt(e(255))/6*(parseInt(e(284))/7)+parseInt(e(286))/8+parseInt(e(268))/9*(parseInt(e(291))/10)+parseInt(e(277))/11*(-parseInt(e(252))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(279)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$t(this,(function(){const n=Kt,t=new RegExp(n(295)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Jt(n(278));t[n(283)](r+n(271))&&e.test(r+"input")?Jt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(n,t){const e=qt();return(Kt=function(n,t){return e[n-=252]})(n,t)}function qt(){const n=["warn","54PKLDfa","__proto__","error","gger","string","bind","prototype","2257446OdmhUs","while (true) {}","dispose","console","info","54ZzrtXH","27FhFdbu","counter","return (function() ","chain","index","call","debu","length","9037pFCisH","74591mxdHyH","init","apply","948845oGMEuu","action","toString","test","218050RDtEUD","material","1346280JPuVRR","trace","log","traverse","4IRJRmS","1805080rwpnsm","constructor",'{}.constructor("return this")( )',"value","function *\\( *\\)","624FfQVPb","table"];return(qt=function(){return n})()}Yt(void 0,(function(){const n=Kt,t=function(){const n=Kt;let t;try{t=Function(n(270)+n(293)+");")()}catch(e){t=window}return t}(),e=t[n(265)]=t[n(265)]||{},r=[n(288),n(254),n(266),n(257),"exception",n(253),n(287)];for(let o=0;o<r[n(275)];o++){const t=Yt.constructor[n(261)][n(260)](Yt),i=r[o],a=e[i]||t;t[n(256)]=Yt.bind(Yt),t[n(282)]=a.toString[n(260)](a),e[i]=t}}))();const Xt=tn({__name:Wt(272),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(294)],o.value,e[t(294)]),i=null),a&&(i=Gt({focus:s,size:c,samples:u}),o[t(294)][t(289)]((n=>{const e=t;n instanceof l&&n[e(285)][e(264)]()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n){function t(n){const e=Kt;if(typeof n===e(259))return function(n){}[e(292)](e(263))[e(279)](e(269));1!==(""+n/n)[e(275)]||n%20==0?function(){return!0}[e(292)](e(274)+e(258))[e(273)](e(281)):function(){return!1}[e(292)]("debu"+e(258))[e(279)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qt=ie;!function(n,t){const e=ie,r=ee();for(;;)try{if(886955===-parseInt(e(284))/1+parseInt(e(256))/2+-parseInt(e(267))/3*(-parseInt(e(246))/4)+parseInt(e(276))/5+-parseInt(e(275))/6*(parseInt(e(266))/7)+-parseInt(e(285))/8+-parseInt(e(248))/9*(-parseInt(e(288))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(263)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ne(this,(function(){const n=ie,t=new RegExp(n(251)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ae(n(254));t[n(294)](r+n(280))&&e[n(294)](r+n(247))?ae():r("0")}))()}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(263)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ee(){const n=["kernel",'{}.constructor("return this")( )',"encodings_fragment","apply","while (true) {}","uniforms","91343FlAPVB","6DoctyN","set","error","copy","multiplyScalar","string","stateObject","counter","60lzPmxB","6158675zpbAhE","setTexelSize","resolution","halfTexelSize","chain","info","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",">\n        }","1148383DMddoa","9532040TKMWko","setResolution","length","10OcUucg","toString","call","gger","debu","console","test","constructor","1533596mqsgOe","input","2763162fRKPJn","bind","replace","function *\\( *\\)","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","texelSize","init","colorspace_fragment","2103564rRkFHl","value","action","warn"];return(ee=function(){return n})()}te(void 0,(function(){const n=ie;let t;try{t=Function("return (function() "+n(261)+");")()}catch(o){t=window}const e=t[n(293)]=t.console||{},r=["log",n(259),n(281),n(269),"exception","table","trace"];for(let i=0;i<r.length;i++){const t=te[n(295)].prototype[n(249)](te),o=r[i],a=e[o]||t;t.__proto__=te[n(249)](te),t.toString=a[n(289)][n(249)](a),e[o]=t}}))();const re=parseInt(F[Qt(250)](/\D+/g,""));class oe extends P{constructor(n=new C){const t=Qt;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new C),texelSize:new z(new C),halfTexelSize:new z(new C),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(252)+t(re>=154?255:262)+t(283),vertexShader:t(282),blending:O,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(277)](n.x,n.y),this[t(260)]=new Float32Array([0,1,2,2,3])}[Qt(277)](n,t){const e=Qt;this[e(265)][e(253)][e(257)][e(268)](n,t),this.uniforms[e(279)][e(257)][e(268)](n,t)[e(271)](.5)}[Qt(286)](n){const t=Qt;this[t(265)][t(278)][t(257)][t(270)](n)}}function ie(n,t){const e=ee();return(ie=function(n,t){return e[n-=246]})(n,t)}function ae(n){function t(n){const e=ie;if(typeof n===e(272))return function(n){}[e(295)](e(264))[e(263)](e(274));1!==(""+n/n)[e(287)]||n%20==0?function(){return!0}[e(295)](e(292)+e(291))[e(290)](e(258)):function(){return!1}[e(295)](e(292)+e(291)).apply(e(273)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ue,r=fe();for(;;)try{if(480167===parseInt(e(252))/1*(parseInt(e(278))/2)+-parseInt(e(247))/3*(-parseInt(e(234))/4)+parseInt(e(261))/5+parseInt(e(236))/6*(-parseInt(e(286))/7)+parseInt(e(257))/8+parseInt(e(248))/9*(-parseInt(e(289))/10)+-parseInt(e(283))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ue(256)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ce(this,(function(){const n=ue,t=new RegExp(n(287)),e=new RegExp(n(237),"i"),r=pe("init");t[n(241)](r+n(270))&&e.test(r+n(249))?pe():r("0")}))()}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ue(256)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ue(n,t){const e=fe();return(ue=function(n,t){return e[n-=234]})(n,t)}se(void 0,(function(){const n=ue,t=function(){const n=ue;let t;try{t=Function("return (function() "+n(244)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(268)]||{},r=[n(282),"warn",n(290),n(276),"exception",n(284),n(255)];for(let o=0;o<r[n(253)];o++){const t=se[n(242)][n(277)].bind(se),i=r[o],a=e[i]||t;t[n(285)]=se[n(260)](se),t[n(240)]=a[n(240)][n(260)](a),e[i]=t}}))();class le{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=ue;this[c(267)]=!1,this.renderTargetA=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(250)]=this.renderTargetA[c(281)](),this.convolutionMaterial=new oe,this[c(262)][c(238)](1/t,1/e),this[c(262)].setResolution(new C(t,e)),this[c(293)]=new u,this.camera=new k,this.convolutionMaterial[c(294)][c(269)][c(259)]=r,this[c(262)][c(294)][c(251)][c(259)]=o,this[c(262)][c(294)][c(263)][c(259)]=i,this[c(262)][c(294)][c(292)][c(259)]=a,this[c(262)].defines[c(279)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p.setAttribute(c(274),new U(s,3)),p[c(264)]("uv",new U(f,2)),this.screen=new l(p,this[c(262)]),this[c(239)][c(272)]=!1,this[c(293)][c(245)](this[c(239)])}render(n,t,e){const r=ue,o=this[r(293)],i=this.camera,a=this[r(246)],c=this.renderTargetB,s=this[r(262)],u=s[r(294)];u[r(235)].value=t[r(265)];const l=s[r(291)];let f,p,d,h=t;for(p=0,d=l[r(253)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(291)][r(259)]=l[p],u[r(254)][r(259)]=h.texture,n.setRenderTarget(f),n[r(280)](o,i),h=f;u[r(291)].value=l[p],u[r(254)].value=h[r(273)],n[r(271)](this[r(267)]?null:e),n[r(280)](o,i)}}function fe(){const n=["toString","test","constructor","gger",'{}.constructor("return this")( )',"add","renderTargetA","42jqTDTm","3035709XQwTzi","input","renderTargetB","maxDepthThreshold","7vcvrUG","length","inputBuffer","trace","apply","2624752FrptOQ","debu","value","bind","2057805HPVQnA","convolutionMaterial","depthScale","setAttribute","depthTexture","action","renderToScreen","console","minDepthThreshold","chain","setRenderTarget","frustumCulled","texture","position","stateObject","error","prototype","153538SbCilB","USE_DEPTH","render","clone","log","2243340IykAZk","table","__proto__","9296wqAWQY","function *\\( *\\)","while (true) {}","10AUIOwy","info","kernel","depthToBlurRatioBias","scene","uniforms","13852TIuOGN","depthBuffer","1374jqmtSw","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setTexelSize","screen"];return(fe=function(){return n})()}function pe(n){function t(n){const e=ue;if("string"==typeof n)return function(n){}[e(242)](e(288))[e(256)]("counter");1!==(""+n/n)[e(253)]||n%20==0?function(){return!0}[e(242)](e(258)+e(243)).call(e(266)):function(){return!1}[e(242)](e(258)+e(243))[e(256)](e(275)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var de=me;!function(n,t){for(var e=me,r=_e();;)try{if(940097===parseInt(e(174))/1+-parseInt(e(179))/2+parseInt(e(147))/3+-parseInt(e(148))/4*(-parseInt(e(121))/5)+parseInt(e(157))/6*(-parseInt(e(177))/7)+-parseInt(e(160))/8*(-parseInt(e(185))/9)+-parseInt(e(178))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var he=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[me(135)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){he(this,(function(){var n=me,t=new RegExp(n(146)),e=new RegExp(n(153),"i"),r=ye(n(133));t[n(116)](r+n(129))&&e[n(116)](r+n(114))?ye():r("0")}))()}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[me(135)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function me(n,t){var e=_e();return(me=function(n,t){return e[n-=112]})(n,t)}ve(void 0,(function(){var n,t=me;try{n=Function("return (function() "+t(128)+");")()}catch(s){n=window}for(var e=n[t(188)]=n[t(188)]||{},r=["log",t(144),t(169),t(142),t(150),"table","trace"],o=0;o<r[t(181)];o++){var i=ve[t(117)][t(113)].bind(ve),a=r[o],c=e[a]||i;i[t(175)]=ve[t(156)](ve),i[t(112)]=c[t(112)][t(156)](c),e[a]=i}}))();class ge extends j{constructor(n={}){var t=me;super(n),this[t(141)]={value:null},this[t(139)]={value:null},this[t(172)]={value:null},this[t(115)]={value:null},this[t(187)]={value:null},this[t(120)]={value:!1},this._mirror={value:0},this._mixBlur={value:0},this[t(119)]={value:.5},this[t(123)]={value:.9},this[t(149)]={value:1},this[t(140)]={value:0},this[t(164)]={value:.25},this[t(137)]={value:1},this[t(182)]={value:1},this[t(131)](n)}[de(161)](n){var t,e=de;!(null==(t=n.defines)?void 0:t.USE_UV)&&(n[e(184)][e(170)]=""),n[e(145)][e(124)]=this[e(120)],n.uniforms[e(125)]=this[e(172)],n.uniforms[e(166)]=this[e(141)],n.uniforms.distortionMap=this._distortionMap,n[e(145)][e(167)]=this[e(115)],n.uniforms[e(134)]=this[e(187)],n[e(145)][e(152)]=this._mirror,n[e(145)].mixBlur=this[e(118)],n.uniforms[e(186)]=this._blurStrength,n[e(145)].minDepthThreshold=this[e(123)],n.uniforms[e(183)]=this[e(149)],n[e(145)].depthScale=this[e(140)],n[e(145)].depthToBlurRatioBias=this[e(164)],n[e(145)][e(126)]=this[e(137)],n[e(145)][e(136)]=this._mixContrast,n[e(143)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(143)],n.vertexShader=n[e(143)][e(162)](e(158),e(155)),n[e(173)]=e(132)+n[e(173)],n[e(173)]=n[e(173)][e(162)](e(122),e(138))}get[de(125)](){var n=de;return this[n(172)][n(130)]}set[de(125)](n){var t=de;this[t(172)][t(130)]=n}get tDepth(){var n=de;return this._tDepth[n(130)]}set[de(166)](n){var t=de;this[t(141)][t(130)]=n}get distortionMap(){return this._distortionMap.value}set[de(154)](n){var t=de;this[t(139)][t(130)]=n}get[de(167)](){var n=de;return this._tDiffuseBlur[n(130)]}set[de(167)](n){var t=de;this._tDiffuseBlur[t(130)]=n}get[de(134)](){var n=de;return this._textureMatrix[n(130)]}set[de(134)](n){this[de(187)].value=n}get[de(124)](){var n=de;return this[n(120)][n(130)]}set[de(124)](n){var t=de;this[t(120)][t(130)]=n}get[de(152)](){return this._mirror.value}set[de(152)](n){var t=de;this._mirror[t(130)]=n}get[de(168)](){var n=de;return this[n(118)][n(130)]}set mixBlur(n){var t=de;this[t(118)][t(130)]=n}get mixStrength(){return this[de(119)].value}set mixStrength(n){var t=de;this[t(119)][t(130)]=n}get[de(151)](){return this[de(123)].value}set[de(151)](n){var t=de;this[t(123)][t(130)]=n}get[de(183)](){var n=de;return this._maxDepthThreshold[n(130)]}set[de(183)](n){var t=de;this[t(149)][t(130)]=n}get[de(159)](){var n=de;return this._depthScale[n(130)]}set[de(159)](n){var t=de;this[t(140)][t(130)]=n}get[de(171)](){return this[de(164)].value}set[de(171)](n){var t=de;this[t(164)][t(130)]=n}get[de(126)](){var n=de;return this._distortion[n(130)]}set[de(126)](n){var t=de;this._distortion[t(130)]=n}get[de(136)](){return this[de(182)].value}set[de(136)](n){this[de(182)].value=n}}function _e(){var n=["#include <emissivemap_fragment>","_minDepthThreshold","hasBlur","tDiffuse","distortion","counter",'{}.constructor("return this")( )',"chain","value","setValues","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","init","textureMatrix","apply","mixContrast","_distortion","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_distortionMap","_depthScale","_tDepth","error","vertexShader","warn","uniforms","function *\\( *\\)","21690aSxdoM","4ikIKdb","_maxDepthThreshold","exception","minDepthThreshold","mirror","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","distortionMap","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","bind","324642PUrlRn","#include <project_vertex>","depthScale","10622792hHiOZD","onBeforeCompile","replace","while (true) {}","_depthToBlurRatioBias","debu","tDepth","tDiffuseBlur","mixBlur","info","USE_UV","depthToBlurRatioBias","_tDiffuse","fragmentShader","731915IPOYdG","__proto__","gger","7UhuQSl","5589600tmxymN","2925392wKMzNx","action","length","_mixContrast","maxDepthThreshold","defines","9TrSbsq","mixStrength","_textureMatrix","console","toString","prototype","input","_tDiffuseBlur","test","constructor","_mixBlur","_blurStrength","_hasBlur","4744330NzEXdO"];return(_e=function(){return n})()}function ye(n){function t(n){var e=me;if("string"==typeof n)return function(n){}[e(117)](e(163))[e(135)](e(127));1!==(""+n/n)[e(181)]||n%20==0?function(){return!0}[e(117)](e(165)+"gger").call(e(180)):function(){return!1}.constructor(e(165)+e(176))[e(135)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const xe=Re;!function(n,t){const e=Re,r=Se();for(;;)try{if(211113===parseInt(e(237))/1+parseInt(e(218))/2+parseInt(e(228))/3+parseInt(e(266))/4*(parseInt(e(205))/5)+parseInt(e(223))/6+-parseInt(e(200))/7+-parseInt(e(185))/8*(parseInt(e(268))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(243)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ie(this,(function(){const n=Re,t=new RegExp(n(225)),e=new RegExp(n(203),"i"),r=Ae(n(240));t.test(r+n(241))&&e[n(250)](r+n(193))?Ae():r("0")}))()}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(243)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Se(){const n=['{}.constructor("return this")( )',"isMesh","reflect","defines-USE_DEPTH","bind","test","render","position","cameraWorldPosition","distortion","stateObject","setFromMatrixPosition","material","log","action","extractRotation","mix-contrast","reflectorPlane","dot","multiply","gger","81984cyUetK","enabled","81DIzaIP","distortionMap","error","sign","normal","depth-to-blur-ratio-bias","t-diffuse-blur","negate","elements","depth-scale","constant","dispose","mirror","toString","defines-USE_BLUR","lookAtPosition","uuid","1011720kvQmMK","matrixWorld","TresMeshReflectorMaterial","assign","defines-USE_DISTORTION","reflectorWorldPosition","table","updateMatrixWorld","input","constructor","counter","clear","shadowMap","call","texture","1001756JzYiUo","console","autoUpdate","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","textureMatrix","100GVStSQ","clipPlane","has-blur","autoClear","applyMatrix4","projectionMatrix","key","multiplyScalar","virtualCamera","min-depth-threshold","warn","target","addScaledVector","338608RTvmRD","rotationMatrix","value","set","setRenderTarget","2235288vVbPrJ","visible","function *\\( *\\)","length","copy","829467SYmEhz","reflectorOffset","matrixWorldInverse","traverse","exception","add","return (function() ","depthTexture","subVectors","264145fSFXls","while (true) {}","view","init","chain","string","apply","debu"];return(Se=function(){return n})()}be(void 0,(function(){const n=Re,t=function(){const n=Re;let t;try{t=Function(n(234)+n(245)+");")()}catch(e){t=window}return t}(),e=t[n(201)]=t[n(201)]||{},r=[n(258),n(215),"info",n(270),n(232),n(191),"trace"];for(let o=0;o<r[n(226)];o++){const t=be[n(194)].prototype[n(249)](be),i=r[o],a=e[i]||t;t.__proto__=be[n(249)](be),t[n(281)]=a[n(281)][n(249)](a),e[i]=t}}))();const we=["texture-matrix",xe(280),"t-diffuse","t-depth",xe(274),xe(207),"mix-strength",xe(214),"max-depth-threshold",xe(277),xe(273),xe(254),xe(269),xe(261),xe(282),xe(248),"defines-USE_DISTORTION"],Me=tn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=xe,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=q(o),{camera:y,scene:x,renderer:R,extend:A}=W();A({MeshReflectorMaterial:ge});const T=_n(),D=_n(),P=_n(),z=_n(),C=Q((()=>{const n=Re;return"number"==typeof f[n(220)]?[f[n(220)],f.value]:f[n(220)]})),O=Q((()=>C.value[0]>0||C[r(220)][1]>0)),F={reflectorPlane:new N,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new L,lookAtPosition:new E(0,0,-1),clipPlane:new H,view:new E,target:new E,q:new H,virtualCamera:new Z,textureMatrix:new L};fn((()=>{var n;const o=r;null==(n=T[o(220)])||n[o(199)][o(279)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(220)]=new I(i.value,i[o(220)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(220)],i[o(220)],w,M)},t(y,e(x)))),D[o(220)]=new I(i[o(220)],i[o(220)],f),P[o(220)]=new le({resolution:i.value,width:C.value[0],height:C[o(220)][1],minDepthThreshold:a.value,maxDepthThreshold:s[o(220)],depthScale:u.value,depthToBlurRatioBias:l[o(220)]}),z[o(220)]={mirror:p,textureMatrix:F[o(204)],mixBlur:d,tDiffuse:T[o(220)][o(199)],tDepth:T[o(220)][o(235)],tDiffuseBlur:T[o(220)][o(199)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(220)],mixContrast:_,"defines-USE_BLUR":O[o(220)]?"":void 0,"defines-USE_DEPTH":u[o(220)]>0?"":void 0,"defines-USE_DISTORTION":g[o(220)]?"":void 0}}));const k=_n(),{onLoop:B}=Y();B((()=>{var n;const t=r;if(!(k[t(220)]&&R[t(220)]&&T[t(220)]&&y[t(220)]))return;const e=function(n,t){const e=Re;let r;return n[e(231)]((n=>{const o=e;n[o(246)]&&n[o(257)]&&n.material[o(184)]===t&&(r=n)})),r}(x[t(220)],k[t(220)].uuid);if(!e)return;e[t(224)]=!1;const i=R[t(220)].xr.enabled,a=R[t(220)].shadowMap[t(202)];(function(n){var t,e;const r=Re;if(F[r(190)].setFromMatrixPosition(n[r(186)]),F[r(253)][r(256)](null==(t=y[r(220)])?void 0:t[r(186)]),F.rotationMatrix[r(260)](n[r(186)]),F[r(272)][r(221)](0,0,1),F[r(272)][r(209)](F.rotationMatrix),F.reflectorWorldPosition[r(217)](F[r(272)],o[r(229)]),F[r(239)][r(236)](F[r(190)],F[r(253)]),F[r(239)].dot(F[r(272)])>0)return;F[r(239)][r(247)](F.normal)[r(275)](),F[r(239)][r(233)](F[r(190)]),F[r(219)][r(260)](null==(e=y.value)?void 0:e[r(186)]),F[r(183)][r(221)](0,0,-1),F[r(183)][r(209)](F[r(219)]),F.lookAtPosition[r(233)](F[r(253)]),F[r(216)][r(236)](F.reflectorWorldPosition,F[r(183)]),F[r(216)].reflect(F[r(272)])[r(275)](),F.target[r(233)](F[r(190)]),F[r(213)][r(252)].copy(F[r(239)]),F[r(213)].up[r(221)](0,1,0),F.virtualCamera.up[r(209)](F[r(219)]),F.virtualCamera.up[r(247)](F[r(272)]),F.virtualCamera.lookAt(F[r(216)]),F[r(213)].far=(null==y?void 0:y[r(220)]).far,F[r(213)][r(192)](),F.virtualCamera.projectionMatrix[r(227)]((null==y?void 0:y[r(220)])[r(210)]),F[r(204)][r(221)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix[r(264)](F[r(213)][r(210)]),F[r(204)][r(264)](F[r(213)][r(230)]),F[r(204)][r(264)](n[r(186)]),F[r(262)].setFromNormalAndCoplanarPoint(F.normal,F[r(190)]),F.reflectorPlane[r(209)](F.virtualCamera[r(230)]),F[r(206)].set(F.reflectorPlane[r(272)].x,F[r(262)].normal.y,F[r(262)][r(272)].z,F.reflectorPlane[r(278)]);const i=F[r(213)][r(210)];F.q.x=(Math[r(271)](F.clipPlane.x)+i[r(276)][8])/i.elements[0],F.q.y=(Math[r(271)](F[r(206)].y)+i[r(276)][9])/i[r(276)][5],F.q.z=-1,F.q.w=(1+i[r(276)][10])/i.elements[14],F[r(206)][r(212)](2/F[r(206)][r(263)](F.q)),i[r(276)][2]=F[r(206)].x,i[r(276)][6]=F.clipPlane.y,i[r(276)][10]=F[r(206)].z+1,i[r(276)][14]=F[r(206)].w})(e),R[t(220)][t(197)].autoUpdate=!1,R[t(220)][t(222)](T[t(220)]),R[t(220)][t(208)]||R.value[t(196)](),R.value[t(251)](x.value,F[t(213)]),null==(n=null==P?void 0:P[t(220)])||n[t(251)](R[t(220)],T[t(220)],D.value),R[t(220)].xr[t(267)]=i,R.value[t(197)][t(202)]=a,e.visible=!0,R[t(220)][t(222)](null)}));const U=In(),j=Q((()=>{const n=r,t={};return Object.assign(t,o),Object[n(188)](t,U.value),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(220)])||n[e(279)](),null==(t=null==D?void 0:D[e(220)])||t[e(279)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(187),bn({key:c(211)+z.value["defines-USE_BLUR"]+z[c(220)][c(248)]+z.value[c(189)],ref_key:"materialRef",ref:k},j[c(220)],{"texture-matrix":F[c(204)],mirror:nn(p),"t-diffuse":null==(e=T.value)?void 0:e[c(199)],"t-depth":null==(o=T[c(220)])?void 0:o[c(235)],"t-diffuse-blur":null==(i=D[c(220)])?void 0:i.texture,"has-blur":O[c(220)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":O.value?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,we)}}});function Re(n,t){const e=Se();return(Re=function(n,t){return e[n-=183]})(n,t)}function Ae(n){function t(n){const e=Re;if(typeof n===e(242))return function(n){}.constructor(e(238))[e(243)](e(195));1!==(""+n/n).length||n%20==0?function(){return!0}[e(194)](e(244)+e(265))[e(198)](e(259)):function(){return!1}.constructor(e(244)+e(265))[e(243)](e(255)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Pe,r=Te();for(;;)try{if(526928===-parseInt(e(333))/1+parseInt(e(341))/2+-parseInt(e(348))/3*(parseInt(e(337))/4)+-parseInt(e(342))/5*(parseInt(e(340))/6)+-parseInt(e(336))/7*(parseInt(e(353))/8)+-parseInt(e(334))/9+-parseInt(e(325))/10*(-parseInt(e(352))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(339)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Te(){const n=["input","init","type","debu","chain","30PQkuwe","warn","length","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","background","CubeCamera","1009778lUwEkl","8456292QnWkju","test","7ZlIIsm","3412cYsaPF","value","apply","22266kwAcRh","1090784YidBEF","1305ToACcE","error","action","dispose","trace",'{}.constructor("return this")( )',"813vfirxS","return (function() ","update","string","12813053mQLClU","2910664pNGahq","bind","fog","counter","toString","constructor","prototype"];return(Te=function(){return n})()}!function(){Ee(this,(function(){const n=Pe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(329),"i"),r=ze(n(321));t[n(335)](r+n(324))&&e[n(335)](r+n(320))?ze():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n,t){const e=Te();return(Pe=function(n,t){return e[n-=315]})(n,t)}function ze(n){function t(n){const e=Pe;if(typeof n===e(351))return function(n){}[e(318)]("while (true) {}").apply(e(316));1!==(""+n/n)[e(327)]||n%20==0?function(){return!0}[e(318)](e(323)+e(328)).call(e(344)):function(){return!1}[e(318)](e(323)+e(328))[e(339)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}De(void 0,(function(){const n=Pe,t=function(){const n=Pe;let t;try{t=Function(n(349)+n(347)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(330),n(326),"info",n(343),"exception","table",n(346)];for(let o=0;o<r.length;o++){const t=De.constructor[n(319)][n(354)](De),i=r[o],a=e[i]||t;t.__proto__=De[n(354)](De),t[n(317)]=a[n(317)][n(354)](a),e[i]=t}}))();const Ce=Ue;!function(n,t){const e=Ue,r=Be();for(;;)try{if(615736===parseInt(e(280))/1*(-parseInt(e(269))/2)+-parseInt(e(277))/3*(parseInt(e(311))/4)+-parseInt(e(271))/5+-parseInt(e(283))/6*(parseInt(e(260))/7)+-parseInt(e(307))/8*(-parseInt(e(270))/9)+-parseInt(e(290))/10*(-parseInt(e(313))/11)+parseInt(e(272))/12*(parseInt(e(303))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(302)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Oe(this,(function(){const n=Ue,t=new RegExp(n(287)),e=new RegExp(n(259),"i"),r=Ne(n(292));t.test(r+n(274))&&e[n(309)](r+n(263))?Ne():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Fe(void 0,(function(){const n=Ue,t=function(){const n=Ue;let t;try{t=Function(n(291)+n(281)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(310)]||{},r=[n(266),n(305),n(264),n(299),n(308),n(295),n(286)];for(let o=0;o<r.length;o++){const t=Fe[n(276)][n(261)][n(278)](Fe),i=r[o],a=e[i]||t;t[n(298)]=Fe[n(278)](Fe),t.toString=a[n(289)][n(278)](a),e[i]=t}}))();const ke=[Ce(288)];function Be(){const n=["init","length","fog","table","debu","action","__proto__","error","resolution","gger","apply","5910372PVnAuK","TresGroup","warn","visible","8yUFhvr","exception","test","console","24BoKzpv","index","33VsPApj","value","primitive","far","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10479BxHgcB","prototype","envMap","input","info","texture","log","$slots","string","47282VAzPUb","375723EsXhSV","394620ASXvoG","24SUkBcx","default","chain","counter","constructor","37113bXooin","bind","frames","25kCcvza",'{}.constructor("return this")( )',"call","1092iNvGrC","near","while (true) {}","trace","function *\\( *\\)","object","toString","2271100BQvOzM","return (function() "];return(Be=function(){return n})()}function Ue(n,t){const e=Be();return(Ue=function(n,t){return e[n-=256]})(n,t)}const je=tn({__name:Ce(312),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ce,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return J((()=>s),(n=>{var t;const e=Pe;null==(t=c[e(338)])||t[e(345)](),c.value=new v(n.value),c.value.texture[e(322)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=Pe;e&&(f.value=new(D[r(332)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Pe;null==(n=c[t(338)])||n[t(345)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Pe;p=a[t(338)].fog,d=a.value[t(331)],a[t(338)][t(331)]=r||d,a[t(338)][t(315)]=o||p,null==(n=f[t(338)])||n[t(350)](i[t(338)],a[t(338)]),a.value[t(315)]=p,a[t(338)].background=d}}}({resolution:o[r(300)],near:o[r(284)],far:o[r(258)],envMap:o[r(262)],fog:o[r(294)]}),{onBeforeLoop:s}=Y();let u=0;const l=X(null);return s((()=>{const n=r;l[n(256)]&&(o[n(279)]===1/0||u<o[n(279)])&&(l.value.visible=!1,c(),l[n(256)][n(306)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(265)]}),(n,t)=>{const e=r;return on(),an("TresGroup",null,[hn(e(257),{object:nn(a)},null,8,ke),hn(e(304),{ref_key:"rgRef",ref:l},[cn(n[e(267)],e(273))],512)])}}});function Ne(n){function t(n){const e=Ue;if(typeof n===e(268))return function(n){}[e(276)](e(285))[e(302)](e(275));1!==(""+n/n)[e(293)]||n%20==0?function(){return!0}.constructor(e(296)+e(301))[e(282)](e(297)):function(){return!1}[e(276)](e(296)+"gger")[e(302)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ze,r=We();for(;;)try{if(289039===-parseInt(e(412))/1+-parseInt(e(389))/2+parseInt(e(374))/3+-parseInt(e(402))/4*(parseInt(e(391))/5)+parseInt(e(393))/6+parseInt(e(420))/7*(-parseInt(e(392))/8)+parseInt(e(384))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Le(this,(function(){const n=Ze,t=new RegExp(n(380)),e=new RegExp(n(383),"i"),r=Ve(n(388));t[n(400)](r+n(417))&&e.test(r+n(415))?Ve():r("0")}))()}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(406)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ze(n,t){const e=We();return(Ze=function(n,t){return e[n-=374]})(n,t)}function Ge(n,t,e,r){const o=Ze,i=class extends D[o(407)]{constructor(i={}){const a=o,s=Object[a(410)](n);super({uniforms:s[a(419)](((n,[t,e])=>{const r=G[a(375)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(413)]="",s[a(395)]((([n])=>Object.defineProperty(this,n,{get:()=>this[a(382)][n].value,set:t=>this[a(382)][n][a(387)]=t}))),Object[a(401)](this,i),r&&r(this)}};return i[o(413)]=D[o(394)][o(404)](),i}function Ve(n){function t(n){const e=Ze;if(typeof n===e(390))return function(n){}.constructor(e(377))[e(406)](e(398));1!==(""+n/n)[e(414)]||n%20==0?function(){return!0}[e(405)](e(386)+"gger")[e(403)](e(376)):function(){return!1}[e(405)]("debugger")[e(406)](e(381)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function We(){const n=["while (true) {}","trace","console","function *\\( *\\)","stateObject","uniforms","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6268257njllTo","log","debu","value","init","316944hUSDsC","string","1475CGghzW","43936KrHuls","2802450mpVwdH","MathUtils","forEach",'{}.constructor("return this")( )',"bind","counter","error","test","assign","6452SLxfIR","call","generateUUID","constructor","apply","ShaderMaterial","toString","return (function() ","entries","prototype","515538jkmguK","key","length","input","exception","chain","__proto__","reduce","14BNJvDt","858960VgTqdo","clone","action"];return(We=function(){return n})()}He(void 0,(function(){const n=Ze,t=function(){const n=Ze;let t;try{t=Function(n(409)+n(396)+");")()}catch(e){t=window}return t}(),e=t[n(379)]=t[n(379)]||{},r=[n(385),"warn","info",n(399),n(416),"table",n(378)];for(let o=0;o<r.length;o++){const t=He.constructor[n(411)][n(397)](He),i=r[o],a=e[i]||t;t[n(418)]=He.bind(He),t[n(408)]=a[n(408)].bind(a),e[i]=t}}))();var $e=Ke;!function(n,t){for(var e=Ke,r=Er();;)try{if(434019===-parseInt(e(509))/1+-parseInt(e(478))/2*(-parseInt(e(529))/3)+parseInt(e(557))/4+-parseInt(e(486))/5+-parseInt(e(530))/6+-parseInt(e(575))/7+-parseInt(e(465))/8*(-parseInt(e(637))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ke(452)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(n,t){var e=Er();return(Ke=function(n,t){return e[n-=441]})(n,t)}!function(){Ye(this,(function(){var n=Ke,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(628),"i"),r=Dr(n(561));t[n(625)](r+n(601))&&e[n(625)](r+"input")?Dr():r("0")}))()}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ke(452)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xe(n){var t=Ke,e=function(n,t){var e=Ke;if(typeof n!==e(602)||null===n)return n;var r=n[Symbol[e(484)]];if(void 0!==r){var o=r[e(521)](n,t||e(565));if(typeof o!==e(602))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return typeof e===t(485)?e:String(e)}function Je(n,t,e){var r=Ke;return(t=Xe(t))in n?Object[r(596)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Qe(n,t){var e=Ke,r=Object[e(544)](n);if(Object.getOwnPropertySymbols){var o=Object[e(576)](n);t&&(o=o[e(482)]((function(t){var r=e;return Object[r(608)](n,t)[r(531)]}))),r.push[e(452)](r,o)}return r}function nr(n){for(var t=Ke,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(Object(r),!0)[t(584)]((function(t){Je(n,t,r[t])})):Object[t(571)]?Object[t(613)](n,Object[t(571)](r)):Qe(Object(r))[t(584)]((function(e){var o=t;Object.defineProperty(n,e,Object[o(608)](r,e))}))}return n}function tr(n,t){var e=Ke;if(null==n)return{};var r,o,i=function(n,t){var e=Ke;if(null==n)return{};var r,o,i={},a=Object[e(544)](n);for(o=0;o<a[e(508)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(576)](n);for(o=0;o<a[e(508)];o++)r=a[o],t[e(567)](r)>=0||Object[e(489)].propertyIsEnumerable[e(521)](n,r)&&(i[r]=n[r])}return i}function er(n,t){var e=Ke;(null==t||t>n[e(508)])&&(t=n[e(508)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function rr(n,t){return function(n){if(Array[Ke(500)](n))return n}(n)||function(n,t){var e=Ke,r=null==n?null:e(520)!=typeof Symbol&&n[Symbol.iterator]||n[e(581)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(461)])&&(s[e(579)](o.value),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(512)]&&(c=r[e(512)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Ke;if(n){if(typeof n===e(623))return er(n,t);var r=Object[e(489)][e(591)][e(521)](n)[e(603)](8,-1);return r===e(446)&&n.constructor&&(r=n[e(624)][e(639)]),r===e(548)||r===e(475)?Array[e(556)](n):r===e(511)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(625)](r)?er(n,t):void 0}}(n,t)||function(){throw new TypeError(Ke(524))}()}function or(n,t){for(var e=Ke,r=0;r<t[e(508)];r++){var o=t[r];o[e(531)]=o[e(531)]||!1,o[e(638)]=!0,"value"in o&&(o[e(445)]=!0),Object[e(596)](n,Xe(o[e(502)]),o)}}function ir(n){if(void 0===n)throw new ReferenceError(Ke(481));return n}function ar(n,t){var e=Ke;return(ar=Object[e(510)]?Object[e(510)][e(570)]():function(n,t){return n.__proto__=t,n})(n,t)}function cr(n){var t=Ke;return(cr=Object.setPrototypeOf?Object[t(615)][t(570)]():function(n){return n[t(506)]||Object.getPrototypeOf(n)})(n)}function sr(n){var t=function(){var n=Ke;if(typeof Reflect===n(520)||!Reflect.construct)return!1;if(Reflect.construct[n(441)])return!1;if("function"==typeof Proxy)return!0;try{return Boolean[n(489)][n(588)][n(521)](Reflect[n(580)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Ke,o=cr(n);if(t){var i=cr(this)[r(624)];e=Reflect[r(580)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=Ke;if(t&&(typeof t===e(602)||typeof t===e(458)))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ir(n)}(this,e)}}qe(void 0,(function(){var n,t=Ke;try{n=Function(t(516)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(592)]=n.console||{},r=[t(504),t(515),t(514),t(487),"exception",t(617),t(562)],o=0;o<r[t(508)];o++){var i=qe[t(624)][t(489)][t(570)](qe),a=r[o],c=e[a]||i;i[t(506)]=qe[t(570)](qe),i[t(591)]=c[t(591)].bind(c),e[a]=i}}))();var ur,lr,fr,pr={diffuse:$e(462),normal:$e(448),roughness:"csm_Roughness",metalness:$e(491),emissive:$e(560),ao:$e(474),bump:"csm_Bump",clearcoat:$e(525),clearcoatRoughness:$e(547),clearcoatNormal:$e(563),pointSize:$e(456),fragColor:$e(493),depthAlpha:"csm_DepthAlpha",position:$e(492),positionRaw:$e(558)},dr=(Je(ur={},""[$e(454)](pr[$e(586)]),"*"),Je(ur,""[$e(454)](pr[$e(466)]),"*"),Je(ur,""[$e(454)](pr[$e(541)]),"*"),Je(ur,""[$e(454)](pr[$e(442)]),["PointsMaterial"]),Je(ur,"".concat(pr[$e(497)]),"*"),Je(ur,""[$e(454)](pr.fragColor),"*"),Je(ur,"".concat(pr[$e(536)]),[$e(589),$e(467)]),Je(ur,"".concat(pr[$e(550)]),["MeshStandardMaterial",$e(467)]),Je(ur,""[$e(454)](pr.metalness),[$e(589),$e(467)]),Je(ur,""[$e(454)](pr.ao),[$e(589),$e(467),$e(569),$e(578),$e(564),$e(503)]),Je(ur,""[$e(454)](pr.bump),["MeshLambertMaterial","MeshMatcapMaterial",$e(573),"MeshPhongMaterial",$e(467),$e(589),"MeshToonMaterial",$e(488)]),Je(ur,"".concat(pr.depthAlpha),["MeshDepthMaterial"]),Je(ur,""[$e(454)](pr[$e(526)]),[$e(467)]),Je(ur,""[$e(454)](pr[$e(476)]),[$e(467)]),Je(ur,""[$e(454)](pr.clearcoatNormal),[$e(467)]),ur),hr={"#include <lights_physical_fragment>":V[$e(513)]},vr=(Je(lr={},"".concat(pr[$e(541)]),{"#include <beginnormal_vertex>":$e(528).concat(pr[$e(541)],$e(468))}),Je(lr,""[$e(454)](pr[$e(586)]),{"#include <begin_vertex>":$e(470).concat(pr[$e(586)],$e(554))}),Je(lr,""[$e(454)](pr[$e(466)]),{"#include <begin_vertex>":$e(507)[$e(454)](pr[$e(466)],$e(542))}),Je(lr,""[$e(454)](pr[$e(442)]),{"gl_PointSize = size;":$e(616)[$e(454)](pr.pointSize,";\n    ")}),Je(lr,"".concat(pr[$e(497)]),{"#include <color_fragment>":$e(606)[$e(454)](pr[$e(497)],$e(554))}),Je(lr,""[$e(454)](pr[$e(494)]),{"#include <dithering_fragment>":$e(522)[$e(454)](pr[$e(494)],$e(554))}),Je(lr,""[$e(454)](pr[$e(536)]),{"vec3 totalEmissiveRadiance = emissive;":$e(534)[$e(454)](pr[$e(536)],";\n    ")}),Je(lr,""[$e(454)](pr[$e(550)]),{"#include <roughnessmap_fragment>":$e(450)[$e(454)](pr[$e(550)],$e(477))}),Je(lr,""[$e(454)](pr[$e(612)]),{"#include <metalnessmap_fragment>":$e(590)[$e(454)](pr[$e(612)],$e(477))}),Je(lr,""[$e(454)](pr.ao),{"#include <aomap_fragment>":$e(634)[$e(454)](pr.ao,$e(477))}),Je(lr,""[$e(454)](pr[$e(523)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[$e(454)](pr[$e(523)],$e(527))[$e(454)](pr[$e(523)],$e(582))}),Je(lr,""[$e(454)](pr[$e(480)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":$e(464)[$e(454)](pr[$e(480)],$e(635)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":$e(618)[$e(454)](pr[$e(480)],";\n    ")}),Je(lr,""[$e(454)](pr[$e(526)]),{"material.clearcoat = clearcoat;":$e(469)[$e(454)](pr.clearcoat,";")}),Je(lr,""[$e(454)](pr[$e(476)]),{"material.clearcoatRoughness = clearcoatRoughness;":$e(532)[$e(454)](pr[$e(476)],";")}),Je(lr,""[$e(454)](pr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),lr),mr=(Je(fr={},""[$e(454)](pr[$e(586)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(559)[$e(454)](pr[$e(586)],", 1.0 );\n  ")}),Je(fr,""[$e(454)](pr[$e(466)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(604)[$e(454)](pr[$e(586)],$e(554))}),Je(fr,""[$e(454)](pr[$e(497)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(607).concat(pr[$e(497)],$e(554))}),Je(fr,""[$e(454)](pr[$e(494)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(607)[$e(454)](pr[$e(494)],";\n  ")}),fr),gr={clearcoat:[pr[$e(526)],pr.clearcoatNormal,pr.clearcoatRoughness]},_r=$e(519),yr=$e(600),xr=$e(499),Ir=$e(499),br=$e(632),Sr=[$e(444),$e(620),$e(627),$e(597),$e(471),$e(605),$e(539)],wr=function(n,t,e){var r=$e;return n[r(611)](t)[r(599)](e)},Mr=function(n,t){var e;return new RegExp("\\b"[$e(454)]((e=t,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b")).test(n)};function Rr(n){return n?n[$e(614)](/\s/g,""):void 0}function Ar(n){return n[$e(614)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}function Er(){var n=["\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","120CPvwcD","positionRaw","MeshPhysicalMaterial",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","material.clearcoat = ","\n    vec3 transformed = ","patchMap","debu","trim","csm_AO","Set","clearcoatRoughness",";\n    ","1840OLcvjx","get","depthAlpha","this hasn't been initialised - super() hasn't been called","filter","clone","toPrimitive","symbol","1257740OJhsVf","error","ShadowMaterial","prototype","cacheHash","csm_Metalness","csm_Position","csm_FragColor","fragColor","\n            ","#define IS_UNKNOWN;\n","diffuse","void main() {","\n    varying mat4 csm_internal_vModelViewMatrix;\n","isArray","gger","key","MeshToonMaterial","log","lastIndexOf","__proto__","\n    vec4 csm_internal_positionUnprojected = ","length","835787PwwULL","setPrototypeOf","Arguments","return","lights_physical_fragment","info","warn","return (function() ","assign",". Shader cannot compile.","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","undefined","call","\n    #include <dithering_fragment>\n    gl_FragColor  = ","bump","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","csm_Clearcoat","clearcoat"," - (dot(","\n    vec3 objectNormal = ","1776ttVJTJ","1730958LhSzAl","enumerable","material.clearcoatRoughness = "," is not available in ","\n    vec3 totalEmissiveRadiance = ","Cannot call a class as a function","emissive","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","();\n            // #_CSM_#\n          ","silent","type","normal",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","_getPatchMapForMaterial","keys","__csm",'CSM: Property "',"csm_ClearcoatRoughness","Map","onBeforeCompile","roughness","csm_main_","generateUUID","CSM: ",";\n  ","_getMaterialDefine","from","2665052HwNqBK","csm_PositionRaw","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","csm_Emissive","init","trace","csm_ClearcoatNormal","MeshPhongMaterial","default","while (true) {}","indexOf","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","MeshBasicMaterial","bind","getOwnPropertyDescriptors","_generateMaterial","MeshNormalMaterial",'". Shader cannot compile.',"5512332noPfcx","getOwnPropertySymbols","customProgramCacheKey","MeshLambertMaterial","push","construct","@@iterator",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","_patchShader","forEach","stateObject","position","RawShaderMaterial","valueOf","MeshStandardMaterial","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","toString","console","();\n              // #_CSM_#\n          ","MathUtils","#define IS_VERTEX;\n","defineProperty","uniforms","isAlreadyExtended","join","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","chain","object","slice","\n    gl_Position = ","cacheKey","\n    #include <color_fragment>\n    diffuseColor = ","\n    gl_FragColor = ","getOwnPropertyDescriptor","CustomShaderMaterial does not support RawShaderMaterial","set","split","metalness","defineProperties","replace","getPrototypeOf","\n    gl_PointSize = ","table","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","counter","fragmentShader","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","Super expression must either be null or a function","string","constructor","test","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","vertexShader","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","includes","update","needsUpdate","\n    \n","// #_CSM_#","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - "," );\n    ",'" is required to use output "',"831852cgTVkL","configurable","name","sham","pointSize","value","baseMaterial","writable","Object","toUpperCase","csm_Normal","_getCacheHash","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","entries","apply","find","concat","Material","csm_PointSize","substring","function","void ","is not a constructor","done","csm_DiffuseColor"];return(Er=function(){return n})()}var Tr=function(n){var t=$e;!function(n,t){var e=Ke;if(typeof t!==e(458)&&null!==t)throw new TypeError(e(622));n[e(489)]=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(489),{writable:!1}),t&&ar(n,t)}(c,n);var e,r,o,i,a=sr(c);function c(n){var t,e,r,o,i,s=Ke,u=n[s(444)],l=n.fragmentShader,f=n[s(627)],p=n[s(597)],d=n[s(471)],h=n[s(605)],v=n[s(539)],m=tr(n,Sr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Ke(535))}(this,c),!function(n){var t=$e;try{new n}catch(e){if(e.message[t(567)](t(460))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(540)]===s(587))throw new Error(s(609));(function(n,t){var e=$e;e(508),Object[e(517)](n,t);var r=Object[e(615)](t);Object[e(451)](Object[e(571)](r))[e(482)]((function(n){var t=e,r=typeof n[1][t(479)]===t(458),o=typeof n[1][t(610)]===t(458),i=typeof n[1][t(443)]===t(458),a="constructor"===n[0];return(r||o||i)&&!a}))[e(584)]((function(t){var r=e;typeof n[t[0]]!==r(458)&&Object.defineProperty(n,t[0],t[1])}))})(ir(t=a[s(521)](this)),e),t[s(545)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(594)][s(552)](),type:e[s(540)],isAlreadyExtended:(r=e.onBeforeCompile,o=$e,i=r[o(591)]()[o(473)](),!(0===i.substring(i[o(567)]("{")+1,i[o(505)]("}"))[o(473)]().length)),cacheHash:"",silent:v},t.uniforms=nr(nr({},t[s(597)]||{}),p||{});var g=t[s(545)],_=g[s(620)],y=g[s(627)],x=t[s(597)];return t[s(545)][s(490)]=t[s(449)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(630),value:function(){var n=t,e=arguments[n(508)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(597)]=e.uniforms||this[n(597)],Object.assign(this[n(545)],e);var r=this.__csm,o=r[n(620)],i=r[n(627)],a=this[n(597)],c=this[n(449)]();this[n(545)][n(490)]=c,this[n(572)](o,i,a)}},{key:t(483),value:function(){var n=t,e={baseMaterial:this[n(545)][n(444)],fragmentShader:this[n(545)][n(620)],vertexShader:this[n(545)].vertexShader,uniforms:this.uniforms,silent:this[n(545)][n(539)],patchMap:this[n(545)][n(471)],cacheKey:this[n(545)].cacheKey},r=new(this[n(624)])(e);return Object[n(517)](this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(545)],r=e.fragmentShader,o=e[n(627)],i=this.uniforms,a=[Rr(r),Rr(o),i][n(482)]((function(n){return void 0!==n}));return a.length>0?Rn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(572),value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(577)]=function(){var n=o;return i[n(545)][n(490)]};var a=function(t){var r=o;try{var a=i[r(555)]();if(n){var c=i._patchShader(Ar(n),t[r(620)],!0);t[r(620)]=a+c}if(e){var s=i[r(583)](Ar(e),t[r(627)]);t.vertexShader=r(595)+s,t.vertexShader=a+t[r(627)]}t[r(597)]=nr(nr({},t[r(597)]),i.uniforms),i[r(597)]=t[r(597)]}catch(u){console[r(487)](u)}};if(this.__csm[o(598)]){var c=this[o(549)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(631)]=!0}},{key:t(583),value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this[o(543)]()),this[o(545)][o(471)]);Object[o(451)](gr)[o(584)]((function(t){var e=o,r=rr(t,2),a=r[0],c=r[1][e(453)]((function(t){return Mr(n,t)}));if(c&&!i[a])throw new Error(e(546)[e(454)](a,e(636)).concat(c,e(574)))})),Object[o(451)](hr)[o(584)]((function(n){var t=rr(n,2),e=t[0],r=t[1];a=wr(a,e,r)})),Object[o(544)](c)[o(584)]((function(t){var e=o;Object[e(544)](c[t])[e(584)]((function(r){var o=e,s=dr[t],u=i[o(545)].type;if("*"===t||Mr(n,t)){if(!(!s||Array[o(500)](s)&&s[o(629)](u)||"*"===s))throw new Error(o(553)[o(454)](t,o(533))[o(454)](u,o(518)));a=wr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(551)+this[o(545)].instanceID[o(614)](/-/g,"_"),h=n[o(614)](/void\s+main\s*\(\s*\)/g,o(459)[o(454)](d,"()")),v=n[o(629)]("void main()"),m=a[o(629)](o(633));return v&&(m&&this.__csm.isAlreadyExtended?(a=a.replace(o(498),"\n            "[o(454)](h,"\n            \n            void main() {\n          ")),s=a,u="// #_CSM_#",l=o(495)[o(454)](d,o(538)),p=s[(f=$e)(505)](u),a=-1===p?s:s[f(457)](0,p)+l+s[f(457)](p+u[f(508)])):a=a[o(614)](o(498),o(626)[o(454)](r?Ir:xr,o(537)).concat(_r,"\n    \n            ")[o(454)](h,o(568))[o(454)](yr,o(463))[o(454)](r?br:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(621))[o(454)](d,o(593)))),a}},{key:t(555),value:function(){var n=t,e=this[n(545)][n(540)];return e?"#define IS_"[n(454)](e[n(447)](),";\n"):n(496)}},{key:t(543),value:function(){var n=t;return"ShaderMaterial"===this[n(545)][n(540)]?mr:vr}}],i=Ke,r&&or(e.prototype,r),o&&or(e,o),Object.defineProperty(e,i(489),{writable:!1}),c}(D[$e(455)]);function Dr(n){function t(n){var e=Ke;if("string"==typeof n)return function(n){}[e(624)](e(566))[e(452)](e(619));1!==(""+n/n)[e(508)]||n%20==0?function(){return!0}[e(624)](e(472)+e(501))[e(521)]("action"):function(){return!1}[e(624)](e(472)+"gger")[e(452)](e(585)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=Or;!function(n,t){const e=Or,r=kr();for(;;)try{if(289634===parseInt(e(216))/1+parseInt(e(263))/2*(-parseInt(e(260))/3)+parseInt(e(220))/4+parseInt(e(231))/5+-parseInt(e(234))/6*(parseInt(e(259))/7)+-parseInt(e(241))/8+-parseInt(e(245))/9*(-parseInt(e(261))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(246)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zr(this,(function(){const n=Or,t=new RegExp(n(244)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ur(n(251));t[n(217)](r+"chain")&&e[n(217)](r+"input")?Ur():r("0")}))()}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(246)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Or(n,t){const e=kr();return(Or=function(n,t){return e[n-=216]})(n,t)}Cr(void 0,(function(){const n=Or,t=function(){const n=Or;let t;try{t=Function(n(218)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(256)]=t.console||{},r=[n(247),n(238),n(228),n(233),n(230),n(253),n(252)];for(let o=0;o<r[n(243)];o++){const t=Cr[n(232)][n(257)][n(235)](Cr),i=r[o],a=e[i]||t;t[n(223)]=Cr[n(235)](Cr),t[n(236)]=a[n(236)][n(235)](a),e[i]=t}}))();const Fr=[Pr(239)];function kr(){const n=["prototype","while (true) {}","1277941sVKgkf","157482MbRjmm","40monaVM","action","18mCQVDJ","254438AEStof","test","return (function() ","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","1274524FGxfIH","color","roughness","__proto__","debu","clearcoat","metalness","\n\t\t\t","info","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","exception","1226495NyYTuf","constructor","error","6YqxtkP","bind","toString","gger","warn","object","counter","2334760pKcviz","call","length","function *\\( *\\)","940770vmRtJJ","apply","log","string","clearcoatRoughness","setStyle","init","trace","table","stateObject","MeshPhysicalMaterial","console"];return(kr=function(){return n})()}const Br=tn({__name:"index",props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:D[t(255)],metalness:e[t(226)],roughness:e.roughness,clearcoat:e[t(225)],clearcoatRoughness:e[t(249)],color:e[t(221)],vertexShader:t(229),fragmentShader:t(227)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(219)},o=new Tr(r);return fn((()=>{const n=t;o.color[n(250)](e.color),o[n(226)]=e[n(226)],o.roughness=e[n(222)],o[n(225)]=e[n(225)],o[n(249)]=e[n(249)]})),(n,t)=>(on(),an("primitive",{object:nn(o)},null,8,Fr))}});function Ur(n){function t(n){const e=Or;if(typeof n===e(248))return function(n){}.constructor(e(258)).apply(e(240));1!==(""+n/n).length||n%20==0?function(){return!0}[e(232)](e(224)+e(237))[e(242)](e(262)):function(){return!1}[e(232)](e(224)+"gger")[e(246)](e(254)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Lr,r=Hr();;)try{if(125978===parseInt(e(179))/1*(parseInt(e(164))/2)+-parseInt(e(155))/3+parseInt(e(171))/4*(parseInt(e(162))/5)+-parseInt(e(163))/6+-parseInt(e(167))/7*(parseInt(e(154))/8)+-parseInt(e(150))/9*(parseInt(e(146))/10)+-parseInt(e(176))/11*(-parseInt(e(152))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var jr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Lr(168)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jr(this,(function(){var n=Lr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(175),"i"),r=Zr(n(165));t[n(159)](r+n(178))&&e.test(r+n(161))?Zr():r("0")}))()}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Lr(168)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lr(n,t){var e=Hr();return(Lr=function(n,t){return e[n-=145]})(n,t)}function Hr(){var n=["exception","966nVaXtU","apply","bind","debu","999404lVRgMs","constructor","toString","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","22FXWkAI","string","chain","2jiFnrn","gger","4600gxumrU","__proto__","counter","trace","954FnySyG",'{}.constructor("return this")( )',"1256748WKriih","info","6224nHixHa","611988CutQEh","length","log","stateObject","test","while (true) {}","input","5npXyAp","1058586Wsyxmb","203220AcJlVh","init"];return(Hr=function(){return n})()}function Zr(n){function t(n){var e=Lr;if(typeof n===e(177))return function(n){}.constructor(e(160))[e(168)](e(148));1!==(""+n/n)[e(156)]||n%20==0?function(){return!0}[e(172)](e(170)+e(145)).call("action"):function(){return!1}.constructor(e(170)+"gger")[e(168)](e(158)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Nr(void 0,(function(){var n,t=Lr;try{n=Function("return (function() "+t(151)+");")()}catch(s){n=window}for(var e=n[t(174)]=n[t(174)]||{},r=[t(157),"warn",t(153),"error",t(166),"table",t(149)],o=0;o<r.length;o++){var i=Nr[t(172)].prototype.bind(Nr),a=r[o],c=e[a]||i;i[t(147)]=Nr[t(169)](Nr),i[t(173)]=c[t(173)][t(169)](c),e[a]=i}}))();export{Ge as C,Br as _,ut as a,Jn as b,St as c,Tt as d,Ut as e,Xt as f,je as g,Me as h,vt as u};

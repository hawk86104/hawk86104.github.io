import{N as e,_ as a,cj as t,a3 as r,aP as s}from"./three.DHXbQd-f1757990346019.js";import{M as o,$ as i,K as n,f as l,u as p,h as u,Y as m,a as d,n as g}from"./@icegl.CBuYBtvA1757990346019.js";import{F as f}from"./@tresjs.PrijCSbN1757990346019.js";import{_ as c}from"./DevTDTTiles.vue_vue_type_script_setup_true_lang.Bsmt1AQy1757990346019.js";import{d as h,r as v,b as _,a as j,v as y,s as k,h as w,G as b,o as x,I as C,j as M,f as T,e as S,H as P,u as O,a5 as E,F as G,W as L,M as N,m as B}from"./@vue.pEDXJ_3Z1757990346019.js";import{_ as I}from"./@fesjs.DsWuaiKR1757990346019.js";import"./@vueuse.D19fGRfI1757990346019.js";import"./postprocessing.BxUQ5pTE1757990346019.js";import"./vue-router.xKjUDrFa1757990346019.js";import"./lodash-es.C7pWAXPe1757990346019.js";import"./pinia.Bzq4ihza1757990346019.js";import"./@qlin.q6OWdsQV1757990346019.js";import"./@babel.BPq7uOAK1757990346019.js";import"./@floating-ui.BFjFSAYt1757990346019.js";import"./@juggle.CcBCnTIR1757990346019.js";const z=["map","side"],A=["map","side"],D=["map","side","opacity"],F={class:"css2d-label"},H=I(h({__name:"case-real-2",setup(h){const I=v({clearColor:"#201919",shadows:!0,alpha:!1,shadowMapType:t,outputColorSpace:a,toneMapping:e}),H=_({effectProps:{enabled:!1,focusArea:.7,feather:.1},ambientLight:{color:"#fff",intensity:1},directionalLight:{color:"#fff",intensity:2,position:[-1500,500,500]},background:"/plugins/earthSample/image/menuA/bg-img.png"}),J=_({heading:90,pitch:-45,distance:27e4,longitude:116.31635810091619,latitude:40.125336671652086}),q=_(""),K=_(""),U=j((()=>K.value||q.value)),V=y(),W=y(),Y=y([]);k((()=>{fetch("/plugins/geokit/json/110000.json").then((e=>e.json())).then((e=>{W.value=e,Y.value=e.features[0].geometry.coordinates[0][0].map((e=>({lon:e[0],lat:e[1],height:5100})))})).catch((e=>{console.error("Error loading Beijing GeoJSON:",e)})),fetch("/plugins/geokit/json/110000.children.json").then((e=>e.json())).then((e=>{V.value=e})).catch((e=>{console.error("Error loading Beijing GeoJSON:",e)}))}));return(e,a)=>{const t=w("TresCanvas");return x(),b(G,null,[a[3]||(a[3]=C("p",{class:"video-link"},[C("a",{href:"https://www.bilibili.com/video/BV11C8GziEiH",target:"_blank"},"视频教学")],-1)),M(t,B(I,{"window-size":""}),{default:T((()=>[a[2]||(a[2]=C("TresPerspectiveCamera",{fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),M(O(o)),M(O(i),{position:J.value,"onUpdate:position":a[0]||(a[0]=e=>J.value=e),"min-distance":1},null,8,["position"]),M(O(n),{sceneConfig:H.value},null,8,["sceneConfig"]),M(c),(x(),S(E,null,{default:T((()=>[M(O(f),{map:"/plugins/geokit/image/110000.bg.jpg"},{default:T((({textures:e})=>[M(O(l),{texture:e.map},null,8,["texture"]),W.value?(x(),S(O(p),{key:0,geometry:W.value.features[0].geometry,height:5e3,renderOrder:10},{default:T((()=>[C("TresMeshStandardMaterial",{map:e.map,side:O(r),transparent:"","depth-write":!1},null,8,z)])),_:2},1032,["geometry"])):P("",!0)])),_:1})])),_:1})),(x(),S(E,null,{default:T((()=>[M(O(f),{map:"/plugins/digitalCity/image/line2.png"},{default:T((({textures:e})=>[M(O(l),{texture:e.map,rotation:-Math.PI/2,center:[.2,.5]},null,8,["texture","rotation"]),W.value?(x(),S(O(u),{key:0,geometry:W.value.features[0].geometry,height:5e3,renderOrder:10},{default:T((()=>[C("TresMeshStandardMaterial",{map:e.map,side:O(r),transparent:"","depth-write":!1},null,8,A)])),_:2},1032,["geometry"])):P("",!0)])),_:1})])),_:1})),Y.value.length?(x(),S(E,{key:0},{default:T((()=>[M(O(f),{map:"/plugins/digitalCity/image/flyLine4.png"},{default:T((({textures:e})=>[M(O(l),{texture:e.map,wrapT:O(s),wrapS:O(s)},null,8,["texture","wrapT","wrapS"]),M(O(m),{duration:2e3},{default:T((()=>[M(O(d),{points:Y.value,width:500,renderOrder:50,color:"#0057ff",map:e.map},null,8,["points","map"])])),_:2},1024)])),_:1})])),_:1})):P("",!0),V.value?(x(),S(E,{key:1},{default:T((()=>[M(O(f),{map:"/plugins/floor/image/concrete_wet_floor_basecolor.jpg"},{default:T((({textures:e})=>[M(O(l),{texture:e.map},null,8,["texture"]),(x(!0),b(G,null,L(V.value.features,((t,s)=>(x(),b(G,{key:s},[t?(x(),S(O(p),{key:0,geometry:t.geometry,height:5e3,renderOrder:20,onPointerEnter:e=>q.value=t.properties?.name,onPointerLeave:a[1]||(a[1]=e=>q.value=""),onClick:e=>{return a=t.properties?.name,void(a&&(K.value!==a?K.value=a:K.value=""));var a}},{default:T((()=>[C("TresMeshStandardMaterial",{map:e.map,side:O(r),transparent:"",opacity:U.value===t.properties?.name?.7:0,"depth-write":!1},null,8,D)])),_:2},1032,["geometry","onPointerEnter","onClick"])):P("",!0),(U.value?U.value===t.properties?.name:J.value.distance<6e5)?(x(),S(O(g),{key:1,point:{lon:t.properties?.centroid[0],lat:t.properties?.centroid[1],height:9e3}},{default:T((()=>[C("div",F,N(t.properties?.name),1)])),_:2},1032,["point"])):P("",!0)],64)))),128))])),_:1})])),_:1})):P("",!0)])),_:1},16)],64)}}}),[["__scopeId","data-v-8389e0f4"]]);export{H as default};

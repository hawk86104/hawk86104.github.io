import"./@fesjs.ZmXcHXlr1726800306729.js";import{_ as n}from"./jszip.1BnN4Vdj1726800306729.js";import{F as t}from"./file-saver.teuVQkhH1726800306729.js";import{cE as e,aH as s,_ as o}from"./three.ZddO3ejJ1726800306729.js";const r=l;!function(n,t){const e=l,s=u();for(;;)try{if(306975===-parseInt(e(439))/1*(parseInt(e(366))/2)+parseInt(e(371))/3*(parseInt(e(401))/4)+-parseInt(e(384))/5+parseInt(e(435))/6*(-parseInt(e(390))/7)+-parseInt(e(438))/8*(-parseInt(e(416))/9)+-parseInt(e(445))/10*(-parseInt(e(403))/11)+-parseInt(e(437))/12*(-parseInt(e(447))/13))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[l(418)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){a(this,(function(){const n=l,t=new RegExp(n(388)),e=new RegExp(n(425),"i"),s=h(n(444));t[n(440)](s+n(414))&&e.test(s+n(430))?h():s("0")}))()}();const c=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[l(418)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();async function i(n){const t=new s;return new Promise(((e,s)=>{const o=l;t[o(394)](n,(n=>e(JSON[o(387)](n))),void 0,(n=>s(n)))}))}function u(){const n=["split","data:image/","readAsDataURL","stateObject","base64","slice","async","url","gger","prototype","image/png","error","data:image/gif;base64,","4LnCMfI","warn","GIF","data:image/GIF;base64,","data:image/JPEG;base64,","3FNaSSf","exception","onloadend","data","geometries","name","setResponseType","return (function() ","length","then","image/webp","blob",'{}.constructor("return this")( )',"446925RJjSrN","url:images/","url:geometries/","parse","function *\\( *\\)","type","602mIhsjy","__proto__","bind","constructor","load","startsWith","config.zip","file","image/bmp","catch","loadAsync","2195760ghcnri","data:image/jpeg;base64,","297TdEVrH","pop","toUpperCase","info","uuid",";base64,","result","files","WEBP","toString","data:image/webp;base64,","chain","debu","423ZlIVkl","enabled","apply","trace","scene","data:image/PNG;base64,","data:image/png;base64,","image/jpeg","forEach","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","get","toLowerCase","onerror","input","substring","call","folder","app.json","34578MALWjR","message","6672KhZToK","28184TxDboV","253955JXgXJq","test","counter","console","image/gif","init","102690ufNjYW","images","9542UjlHHp",".json","url:","FileLoader","generateAsync","BufferGeometry","push","PNG","stringify"];return(u=function(){return n})()}async function f(n){const t=r,e=new(o[t(450)]);return new Promise(((s,o)=>{const a=t;e[a(377)](a(382)),e[a(394)](n,(t=>{const e=a,c=new FileReader;c.onloadend=()=>{const t=l,e=function(n){const t=r,e=n[t(456)](".").pop()[t(428)]();return{jpg:t(423),jpeg:t(423),png:t(363),gif:t(443),bmp:t(398),webp:t(381)}[e]||"application/octet-stream"}(n),o=c[t(409)].split(",")[1];s("data:"+e+";base64,"+o)},c[e(429)]=n=>{o(n)},c[e(458)](t)}),void 0,(n=>o(n)))}))}c(void 0,(function(){const n=l,t=function(){const n=l;let t;try{t=Function(n(378)+n(383)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(442)]||{},s=["log",n(367),n(406),n(364),n(372),"table",n(419)];for(let o=0;o<s[n(379)];o++){const t=c[n(393)][n(362)][n(392)](c),r=s[o],a=e[r]||t;t[n(391)]=c.bind(c),t[n(412)]=a[n(412)][n(392)](a),e[r]=t}}))(),e[r(417)]=!0;const p=t=>{const e=r,s=new(o[e(450)]);return s[e(377)](e(382)),new Promise(((o,r)=>{const a=e;s[a(394)](t,(async t=>{const e=a;o(await n[e(400)](t))}),void 0,(n=>r(n)))}))};function l(n,t){const e=u();return(l=function(n,t){return e[n-=356]})(n,t)}const g=n=>{const t=r,e=n[t(431)](0,15),s=t(402),o=t(370),a=t(422),c=t(421),i=t(365),u=t(369),f=t(413);return s[t(395)](e)||o[t(395)](e)?"JPEG":a.startsWith(e)||c[t(395)](e)?t(454):i[t(395)](e)||u[t(395)](e)?t(368):f[t(395)](e||"data:image/WEBP;base64,"[t(395)](e))?t(411):"Unknown"},m=e=>{const s=r,o=[];e[s(420)][s(375)]&&e.scene[s(375)][s(424)]((n=>{const t=s;n[t(389)]===t(452)&&(o.push({uuid:n[t(407)],data:n[t(374)]}),n[t(374)]=t(386)+n[t(407)]+".json")}));const a=[];e[s(420)][s(446)]&&e[s(420)][s(446)][s(424)]((n=>{const t=s;n[t(360)]&&(a[t(453)]({uuid:n[t(407)],url:n[t(360)]}),n[t(360)][t(389)]?n[t(360)]="url:images/"+n[t(407)]+"."+n[t(360)][t(389)]+t(448):n[t(360)]=t(385)+n[t(407)]+"."+g(n[t(360)]))}));const c=new n;if(o[s(379)]){const n=c[s(433)](s(375));o.forEach((t=>{const e=s;n[e(397)](t[e(407)]+".json",JSON.stringify(t[e(374)]))}))}if(a.length){const n=c[s(433)](s(446));a[s(424)]((t=>{const e=s;t[e(360)][e(389)]?n.file(t[e(407)]+"."+t[e(360)][e(389)]+".json",JSON[e(455)](t[e(360)])):n[e(397)](t[e(407)]+"."+g(t[e(360)]),t[e(360)][e(456)](e(408))[e(404)](),{base64:!0})}))}const i=JSON.stringify(e);return c[s(397)](s(434),i),c[s(451)]({type:"blob"})[s(380)]((n=>{const e=s;t.saveAs(n,e(396))}))},d=(n,t,e)=>{const s=r;n[s(375)]<=0&&n[s(446)]<=0&&e(t)},b=(t,e)=>{const s=r;let o=null;return n.loadAsync(t)[s(380)]((n=>{const t=s;n[t(410)][t(434)]?n.files[t(434)][t(359)](t(426))[t(380)]((s=>{var a,c;const i=t;o=JSON[i(387)](s);const u=(n=>{var t,e;const s=r,o={geometries:0,images:0};return null==(t=n[s(420)].geometries)||t.forEach((n=>{const t=s;n[t(374)][t(395)](t(449))&&o[t(375)]++})),null==(e=n.scene[s(446)])||e[s(424)]((n=>{const t=s;n[t(360)][t(395)](t(449))&&o.images++})),o})(o);d(u,o,e),null==(a=o[i(420)][i(375)])||a.forEach((t=>{const s=i;t.data[s(395)](s(449))&&n.files[t[s(374)][s(358)](4)][s(359)](s(426))[s(380)]((n=>{const r=s;t[r(374)]=JSON[r(387)](n),u[r(375)]--,d(u,o,e)}))})),null==(c=o[i(420)][i(446)])||c[i(424)]((t=>{const s=i;if(t[s(360)][s(395)](s(449))){const r=t.url[s(358)](4);r.endsWith(".json")?n[s(410)][r][s(359)](s(426))[s(380)]((n=>{const r=s;t[r(360)]=JSON[r(387)](n),u[r(446)]--,d(u,o,e)})):n[s(410)][r][s(359)](s(357)).then((n=>{const a=s,c=r[a(456)]("."),i=c[c[a(379)]-1][a(405)]();t.url=a(457)+i+a(408)+n,u[a(446)]--,d(u,o,e)}))}}))})):console[t(364)]("非标准文件：不存在 app.json")}),(n=>{const e=s;console.error(t[e(376)]+": "+n[e(436)])})),o};function h(n){function t(n){const e=l;if(typeof n===e(426))return function(n){}.constructor("while (true) {}").apply(e(441));1!==(""+n/n)[e(379)]||n%20==0?function(){return!0}.constructor("debugger")[e(432)]("action"):function(){return!1}[e(393)](e(415)+e(361))[e(418)](e(356)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{p as a,f as b,m as e,g,b as i,i as l};

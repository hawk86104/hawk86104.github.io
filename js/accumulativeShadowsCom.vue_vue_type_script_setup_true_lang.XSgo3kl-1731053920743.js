import{V as t,c as n,_ as e,h as a}from"./three.eGpwEcxC1731053920743.js";import{m as o}from"./@tresjs.hJVQLtpa1731053920743.js";import{d as r,P as s}from"./@pmndrs.cFq3swDI1731053920743.js";import{d as i,b as c,w as u,a3 as l,o as p,D as f,J as d,aj as h,ak as m}from"./@vue.u2cBPEWn1731053920743.js";!function(t,n){const e=y,a=b();for(;;)try{if(871974===parseInt(e(390))/1+-parseInt(e(398))/2*(-parseInt(e(399))/3)+parseInt(e(450))/4+-parseInt(e(394))/5+parseInt(e(381))/6+parseInt(e(428))/7+-parseInt(e(411))/8*(parseInt(e(448))/9))break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const w=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,a}}();!function(){w(this,(function(){const t=y,n=new RegExp(t(438)),e=new RegExp(t(431),"i"),a=z(t(447));n[t(427)](a+t(463))&&e[t(427)](a+t(439))?z():a("0")}))()}();const g=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[y(408)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();function y(t,n){const e=b();return(y=function(t,n){return e[t-=381]})(t,n)}g(void 0,(function(){const t=y;let n;try{n=Function(t(459)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(422)]=n[t(422)]||{},a=["log","warn",t(460),t(451),"exception",t(432),"trace"];for(let r=0;r<a.length;r++){const n=g[t(382)][t(387)].bind(g),o=a[r],s=e[o]||n;n[t(417)]=g[t(434)](g),n[t(449)]=s[t(449)][t(434)](s),e[o]=n}}))();const M=["rotate-x"];function b(){const t=["top","1486144RDZwcr","6gDOpeC","prepare","position","log","stateObject","shadows render end","clear","string","progressiveLightMap2","apply","height","action","23812632ApVMRP","remove","color","sin","acos","far","__proto__","intensity","right","MathUtils","add","console","ambient","while (true) {}","shadows render start","material","test","7447097lymgoq","cos","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","randFloatSpread","bind","blendWindow","shadow","call","function *\\( *\\)","input","amount","bottom","configure","lightPosition","bias","debu","frames","init","9GjYKav","toString","2883820TCADNn","error","update","shadows plm update","camera","abs","alphaTest","width","value","return (function() ","info","opacity","mapSize","chain","finish","1252740DUKvEk","constructor","children","gPlane","near","random","prototype","DirectionalLight","size","727045jzfxHQ","texture","blend","counter","1791260VdswiG","set","gger"];return(b=function(){return t})()}const v=i({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:"#000000"},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(i){const w=y,g=i;let b=c();const{extend:v,scene:z,renderer:x,camera:I}=o();v({SoftShadowMaterial:r});const P={position:(new t).set(g[w(443)].x,g[w(443)].y,g.lightPosition.z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},S=new s(x[w(458)],z.value,P.mapSize),_={map:S[w(407)][w(391)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:g[w(392)],alphaTest:g[w(456)],opacity:g.opacity,color:g[w(413)]},j=new n;for(let t=0;t<P[w(440)];t++){const t=new(e[w(388)])(16777215,P[w(418)]/P[w(440)]);t.castShadow=!0,t[w(436)][w(444)]=P[w(444)],t[w(436)][w(454)][w(385)]=P[w(385)],t.shadow[w(454)][w(416)]=P.far,t[w(436)].camera[w(419)]=P[w(389)]/2,t.shadow[w(454)].left=-P.size/2,t.shadow[w(454)][w(397)]=P[w(389)]/2,t.shadow.camera[w(441)]=-P.size/2,t[w(436)][w(462)][w(457)]=P[w(462)],t[w(436)][w(462)][w(409)]=P[w(462)],j[w(421)](t)}const T=()=>{const t=w,n=P.position[t(430)]();for(let o=0;o<j[t(383)][t(430)];o++){const r=j[t(383)][o];if(Math.random()>g[t(423)])r.position[t(395)](P[t(401)].x+e[t(420)][t(433)](P.radius),P[t(401)].y+a[t(433)](P.radius),P[t(401)].z+e[t(420)][t(433)](P.radius));else{let e=Math[t(415)](2*Math[t(386)]()-1)-Math.PI/2,a=2*Math.PI*Math[t(386)]();r[t(401)][t(395)](Math[t(429)](e)*Math[t(429)](a)*n,Math[t(455)](Math.cos(e)*Math[t(414)](a)*n),Math[t(414)](e)*n)}}},D=(t=1)=>{const n=w;z.value.add(j),S[n(400)]();for(let e=0;e<t;e++)T(),S[n(452)](I[n(458)],g[n(435)]),console.log(n(453),e);z[n(458)][n(412)](j),S[n(464)]()};u((()=>b.value),(t=>{const n=w;t&&(S[n(442)](t),S[n(405)](),console[n(402)](n(425)),D(g[n(446)]),console[n(402)](n(404)))}));const k=()=>{const t=w;S[t(405)](),D(g[t(446)])};return l((()=>{const t=w;b.value&&(g[t(461)]&&(b.value[t(426)][t(461)]=g[t(461)]),g[t(456)]&&(b[t(458)][t(426)].alphaTest=g[t(456)]),g[t(413)]&&b[t(458)][t(426)][t(413)][t(395)](g[t(413)]),g[t(392)]&&(b.value[t(426)][t(392)]=g.blend))})),u((()=>g[w(443)]),(t=>{const n=w;t&&(console[n(402)](g[n(443)]),P[n(401)][n(395)](t.x,t.y,t.z),k())}),{deep:!0}),u((()=>[g.frames,g[w(435)],g[w(423)]]),(()=>{k()})),(t,n)=>{const e=w;return p(),f("TresMesh",{"receive-shadow":"",ref_key:e(384),ref:b,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=d("TresPlaneGeometry",{args:[1,1]},null,-1)),d("TresSoftShadowMaterial",h(m(_)),null,16)],8,M)}}});function z(t){function n(t){const e=y;if(typeof t===e(406))return function(t){}[e(382)](e(424)).apply(e(393));1!==(""+t/t)[e(430)]||t%20==0?function(){return!0}.constructor("debu"+e(396))[e(437)](e(410)):function(){return!1}[e(382)](e(445)+e(396)).apply(e(403)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{v as _};

var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.L9jqS59i1726740218347.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.R40ficSl1726740218347.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.SwnHBoWx1726740218347.js";import{k as o,U as s,C as l,m as c,W as p,bc as u,h as f,_ as x,Q as v,M as m}from"./three.MbBECAu81726740218347.js";import{p as w,U as h}from"./@tresjs.C5O8roW51726740218347.js";import{u as g}from"./index.qxajnOUQ1726740218347.js";import{F as d,C as y}from"./three-stdlib.vORGfiSP1726740218347.js";import{d as S}from"./@vue.JNsx1iN61726740218347.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.Yj7VJo9j1726740218347.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.9SmWhN-b1726740218347.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.T5Jbf9k01726740218347.js";function P(){const t=["warn","constructor","stateObject","test","__proto__","trace","input","7YiQOCf","counter","error","66547kJRYjq","prototype","info","61248dRAiwT","apply","197228rsjpht","1JtieQJ","return (function() ","toString","15csIraw","length",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"bind","8yDagkF","104571YwuCpT","chain","table","console","exception","857634eCjvMc","while (true) {}","156FjrRkx","action","function *\\( *\\)","gger","1547802zyPUiM",'{}.constructor("return this")( )',"403634PexlQB","260OpWEDo","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(P=function(){return t})()}const _=E;!function(t,e){const n=E,i=P();for(;;)try{if(144241===parseInt(n(178))/1*(parseInt(n(158))/2)+parseInt(n(145))/3+-parseInt(n(177))/4*(-parseInt(n(140))/5)+parseInt(n(150))/6*(parseInt(n(169))/7)+parseInt(n(144))/8*(-parseInt(n(156))/9)+-parseInt(n(159))/10*(parseInt(n(175))/11)+parseInt(n(152))/12*(-parseInt(n(172))/13))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const z=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[E(176)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){z(this,(function(){const t=E,e=new RegExp(t(154)),n=new RegExp(t(161),"i"),i=M("init");e[t(165)](i+t(146))&&n.test(i+t(168))?M():i("0")}))()}();const b=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[E(176)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();b(void 0,(function(){const t=E;let e;try{e=Function(t(179)+t(157)+");")()}catch(r){e=window}const n=e[t(148)]=e[t(148)]||{},i=["log",t(162),t(174),t(171),t(149),t(147),t(167)];for(let a=0;a<i[t(141)];a++){const e=b[t(163)][t(173)][t(143)](b),r=i[a],o=n[r]||e;e[t(166)]=b.bind(b),e.toString=o[t(139)][t(143)](o),n[r]=e}}))();const I=_(142);function E(t,e){const n=P();return(E=function(t,e){return n[t-=139]})(t,e)}function M(t){function e(t){const n=E;if("string"==typeof t)return function(t){}[n(163)](n(151)).apply(n(170));1!==(""+t/t)[n(141)]||t%20==0?function(){return!0}.constructor("debu"+n(155)).call(n(153)):function(){return!1}[n(163)](n(160)+n(155)).apply(n(164)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function A(t,e){const n=j();return(A=function(t,e){return n[t-=345]})(t,e)}const D=A;!function(t,e){const n=A,i=j();for(;;)try{if(151063===-parseInt(n(376))/1+-parseInt(n(369))/2*(parseInt(n(374))/3)+parseInt(n(367))/4+parseInt(n(345))/5+parseInt(n(371))/6*(parseInt(n(352))/7)+parseInt(n(356))/8*(-parseInt(n(365))/9)+parseInt(n(353))/10*(parseInt(n(349))/11))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const U=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[A(350)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){U(this,(function(){const t=A,e=new RegExp(t(361)),n=new RegExp(t(359),"i"),i=T(t(378));e[t(375)](i+t(370))&&n[t(375)](i+t(381))?T():i("0")}))()}();const L=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function j(){const t=["table","constructor","clone","4169IKguaw","apply","call","2086knadTR","7210FdbQAc","__proto__","info","48AeFPMv","action","defines","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","function *\\( *\\)","gger","warn","error","121149brqLDE","length","484424ZRlZXB","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","22ScbtOc","chain","4392tglKaE","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","return (function() ","48003UWVGiQ","test","249287GlOOcG","bind","init","console","uniforms","input","debu","toString","223130haQCBl"];return(j=function(){return t})()}function O(t){const e=A,n=a({},t);return e(358)in t&&(n.defines=a({},t[e(358)])),e(380)in t&&(n[e(380)]=s[e(348)](t[e(380)])),n}L(void 0,(function(){const t=A;let e;try{e=Function(t(373)+'{}.constructor("return this")( ));')()}catch(r){e=window}const n=e[t(379)]=e.console||{},i=["log",t(363),t(355),t(364),"exception",t(346),"trace"];for(let a=0;a<i[t(366)];a++){const e=L[t(347)].prototype[t(377)](L),r=i[a],o=n[r]||e;e[t(354)]=L[t(377)](L),e.toString=o[t(383)][t(377)](o),n[r]=e}}))();const V={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:D(368),fragmentShader:D(372)+I+"\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t"};function T(t){function e(t){const n=A;if("string"==typeof t)return function(t){}[n(347)]("while (true) {}")[n(350)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[n(347)]("debugger")[n(351)](n(357)):function(){return!1}[n(347)](n(382)+n(362))[n(350)](n(360)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const k=R;function R(t,e){const n=C();return(R=function(t,e){return n[t-=408]})(t,e)}function C(){const t=["length",'{}.constructor("return this")( )',"tDiffuse","warn","floorPowerOfTwo","trace","input","value","2347120DdOnYX","toString","defines","950373WDAGAP","fragmentShader","update","__proto__","dispose","setRenderTarget","camera","while (true) {}","_mipQuad","magFilter","prototype","render","408961NCYDBp","getClearAlpha","Y_IS_EVEN","uniforms","_mipMaterials","width","isWebGLRenderTarget","test","parentLevel","641068kUdYXW","call","type","clear","setClearAlpha","set","autoClear","texture","3342192gwBrlh","getRenderTarget","console","string","35DRMTCC","action","originalMapSize","log","material","replace","_swapTarget","floor","_copyQuad","debu","counter","init","2682678jGABhG","apply","X_IS_EVEN","bind","height","error","setSize","image","gger","function *\\( *\\)","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","map","constructor","160284iFEUks","table","stateObject","setClearColor","chain"];return(C=function(){return t})()}!function(t,e){const n=R,i=C();for(;;)try{if(271600===-parseInt(n(451))/1+parseInt(n(460))/2+parseInt(n(439))/3+-parseInt(n(423))/4*(parseInt(n(472))/5)+-parseInt(n(409))/6+parseInt(n(468))/7+parseInt(n(436))/8)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const N=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[R(410)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){N(this,(function(){const t=R,e=new RegExp(t(418)),n=new RegExp(t(420),"i"),i=Q(t(408));e.test(i+t(427))&&n[t(458)](i+t(434))?Q():i("0")}))()}();const W=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();W(void 0,(function(){const t=R;let e;try{e=Function("return (function() "+t(429)+");")()}catch(r){e=window}const n=e[t(470)]=e[t(470)]||{},i=[t(475),t(431),"info",t(414),t(419),t(424),t(433)];for(let a=0;a<i[t(428)];a++){const e=W.constructor[t(449)][t(412)](W),r=i[a],o=n[r]||e;e[t(442)]=W[t(412)](W),e[t(437)]=o[t(437)].bind(o),n[r]=e}}))();const Y=new l;class F{constructor(t){const e=R;!t&&(t="\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t");const n=O(V);n[e(440)]=n[e(440)][e(477)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(O(n)),i[0][e(438)][e(411)]=0,i[0].defines[e(453)]=0,i[1]=new c(O(n)),i[1][e(438)][e(411)]=1,i[1][e(438)].Y_IS_EVEN=0,i[2]=new c(O(n)),i[2][e(438)].X_IS_EVEN=0,i[2].defines.Y_IS_EVEN=1,i[3]=new c(O(n)),i[3][e(438)].X_IS_EVEN=1,i[3][e(438)].Y_IS_EVEN=1;const r=new p;r[e(467)].minFilter=u,r[e(467)][e(448)]=u,this[e(478)]=r,this[e(480)]=new d(new c(y)),this[e(447)]=new d(null),this[e(455)]=i}[k(441)](t,e,n,i=!1){const r=k;t[r(457)]&&(t=t.texture);const o=n[r(466)],s=n[r(452)](),l=n[r(469)]();n.getClearColor(Y);const c=this[r(480)],p=this._mipQuad,u=this[r(478)],x=this[r(455)];let v,m;i?(v=f[r(432)](t[r(416)][r(456)]),m=f[r(432)](t[r(416)][r(413)])):(v=Math[r(479)](t[r(416)][r(456)]),m=Math[r(479)](t.image[r(413)]));const w=Math[r(479)](1.5*v),h=Math[r(479)](m);e.setSize(w,h),u[r(467)][r(462)]!==e[r(467)][r(462)]?(u[r(443)](),u.copy(e),u.texture[r(416)]=a({},u[r(467)][r(416)])):u[r(415)](w,h),n[r(466)]=!1,n.setClearColor(0),n[r(464)](),c[r(476)].uniforms[r(430)][r(435)]=t,c.camera.setViewOffset(v,m,0,0,w,h),n[r(444)](e),n[r(463)](),c.render(n),n[r(444)](u),n[r(463)](),c[r(450)](n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t[r(454)][r(421)][r(435)]=u.texture,t[r(454)][r(459)][r(435)]=y,t[r(454)].parentMapSize[r(435)][r(465)](g,d),t[r(454)][r(474)][r(435)][r(465)](v,m),p[r(476)]=t,g=Math[r(479)](g/2),d=Math[r(479)](d/2);const i=h-2*d;n[r(444)](e),p[r(445)].setViewOffset(g,d,-v,-i,w,h),p[r(450)](n),n[r(444)](u),t[r(454)][r(421)][r(435)]=e[r(467)],p[r(450)](n),y++}return n[r(444)](l),n[r(464)](s),n[r(426)](Y),n[r(466)]=o,y+1}[k(443)](){const t=k;this[t(478)][t(443)](),this[t(447)][t(443)](),this[t(480)].dispose(),this[t(455)].forEach((e=>e[t(443)]()))}}function Q(t){function e(t){const n=R;if(typeof t===n(471))return function(t){}[n(422)](n(446)).apply(n(482));1!==(""+t/t)[n(428)]||t%20==0?function(){return!0}[n(422)]("debugger")[n(461)](n(473)):function(){return!1}[n(422)](n(481)+n(417))[n(410)](n(425)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function H(t,e){const n=X();return(H=function(t,e){return n[t-=256]})(t,e)}!function(t,e){const n=H,i=X();for(;;)try{if(228913===-parseInt(n(298))/1+-parseInt(n(314))/2+parseInt(n(301))/3*(-parseInt(n(320))/4)+-parseInt(n(293))/5+parseInt(n(272))/6*(parseInt(n(336))/7)+parseInt(n(299))/8*(-parseInt(n(309))/9)+-parseInt(n(325))/10*(-parseInt(n(264))/11))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const Z=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[H(334)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){Z(this,(function(){const t=H,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(322),"i"),i=J("init");e[t(321)](i+t(271))&&n[t(321)](i+t(280))?J():i("0")}))()}();const G=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function X(){const t=["Matrix4","info","matrixWorldInverse","bind","position","warn","toString","value","gger","66egoUex","projectionMatrix","return (function() ","sign","error","state","setRenderTarget","chain","6ZaKiYF","negate","updateMatrixWorld","Quaternion","constant","ignoreObjects","add","normal","input","stateObject","render","sub","depth","Plane","string","Vector3","reflect","projectPoint","resolution","action","trace","838125jPMbEm","applyMatrix4","log","call","multiplyScalar","62445zvOcep","350288bJUloD","clear","9cfgVnA","getWorldPosition","debu","getWorldQuaternion","length","__proto__","multiply","clone","27fNkUWQ",'{}.constructor("return this")( )',"Vector4","prototype","constructor","578196RVglFy","console","forEach","UnsignedByteType","setMask","visible","164040MRNJYI","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","set","copy","1309470rtYTYu","parent","elements","applyQuaternion","autoClear","while (true) {}","update","PerspectiveCamera","texture","apply","matrixWorld","1517509UEUlSC"];return(X=function(){return t})()}G(void 0,(function(){const t=H,e=function(){const t=H;let e;try{e=Function(t(266)+t(310)+");")()}catch(n){e=window}return e}(),n=e[t(315)]=e[t(315)]||{},i=[t(295),t(260),t(256),t(268),"exception","table",t(292)];for(let r=0;r<i.length;r++){const e=G[t(313)][t(312)][t(258)](G),a=i[r],o=n[a]||e;e[t(306)]=G[t(258)](G),e[t(261)]=o[t(261)][t(258)](o),n[a]=e}}))();const $=S({__name:"reflectorMipMap",props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=H,i=t,r=new(x[n(285)]),a=new(x[n(337)]),o=new(x[n(332)]),s=new F,l=g({width:i[n(290)],height:i[n(290)],settings:{type:x[n(317)]}}),c=g({width:i[n(290)],height:i.resolution,settings:{type:x[n(317)]}}),{camera:p,renderer:u,scene:f}=w(),{onBeforeLoop:d}=h();return d((()=>{const t=n;(()=>{const t=n;if(!p[t(262)])return;r.set(new(x[t(287)])(0,1,0),0),r[t(294)](i.parent[t(335)]),o[t(324)](p.value);const e=new(x[t(287)])(0,0,1)[t(308)]()[t(273)](),s=p[t(262)].getWorldPosition(new(x[t(287)]));e[t(288)](r[t(279)]);const c=new(x[t(287)]);r[t(289)](s,c);const w=c[t(308)]();w[t(283)](s),w[t(278)](c),o[t(259)][t(324)](w);const h=new(x[t(287)])(0,0,-1);h[t(328)](p[t(262)][t(304)](new(x[t(275)]))),h[t(278)](s);const g=new(x[t(287)]);i[t(326)].getWorldPosition(g),g[t(283)](h),g[t(288)](r.normal)[t(273)](),g[t(278)](i.parent[t(302)](new(x[t(287)]))),o.up[t(323)](0,1,0),o[t(328)](p[t(262)][t(304)](new v)),o.up[t(288)](r[t(279)]),o.lookAt(g),o[t(274)]();const d=new m;d[t(323)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d[t(307)](o[t(265)]),d[t(307)](o[t(257)]),a.copy(d),r[t(294)](o[t(257)]);const y=new(x[t(311)])(r[t(279)].x,r[t(279)].y,r.normal.z,r[t(276)]),S=o[t(265)],P=new(x[t(311)]);P.x=(Math[t(267)](y.x)+S.elements[8])/S[t(327)][0],P.y=(Math[t(267)](y.y)+S[t(327)][9])/S.elements[5],P.z=-1,P.w=(1+S[t(327)][10])/S[t(327)][14],y[t(297)](2/y.dot(P)),S[t(327)][2]=y.x,S[t(327)][6]=y.y,S.elements[10]=y.z+1,S[t(327)][14]=y.w;const _=u[t(262)].getRenderTarget();u.value[t(270)](l[t(262)]),u[t(262)][t(269)].buffers[t(284)][t(318)](!0),!1===u[t(262)][t(329)]&&u[t(262)][t(300)](),i[t(277)][t(316)]((e=>e[t(319)]=!1)),u.value[t(282)](f[t(262)],o),i[t(277)][t(316)]((e=>e[t(319)]=!0)),u[t(262)].setRenderTarget(_)})(),l[t(262)]&&c[t(262)]&&u.value&&s[t(331)](l[t(262)][t(333)],c[t(262)],u[t(262)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function J(t){function e(t){const n=H;if(typeof t===n(286))return function(t){}[n(313)](n(330))[n(334)]("counter");1!==(""+t/t)[n(305)]||t%20==0?function(){return!0}[n(313)](n(303)+n(263))[n(296)](n(291)):function(){return!1}[n(313)](n(303)+n(263)).apply(n(281)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=tt,i=q();;)try{if(236342===-parseInt(n(209))/1+-parseInt(n(221))/2+-parseInt(n(208))/3+parseInt(n(219))/4*(-parseInt(n(231))/5)+parseInt(n(216))/6*(-parseInt(n(199))/7)+parseInt(n(210))/8*(parseInt(n(214))/9)+parseInt(n(198))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var B=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(224)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){B(this,(function(){var t=tt,e=new RegExp(t(213)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=et("init");e.test(i+t(212))&&n.test(i+"input")?et():i("0")}))()}();var K=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(224)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function q(){var t=["while (true) {}","debu","apply","call","prototype",'{}.constructor("return this")( )',"length","constructor","info","2140YQtWMm","bind","5934890GAwaoU","4011jOeKaI","action","warn","gger","table","trace","__proto__","toString","log","889005mPNWjp","54686YNJtto","27448PMwJrg","string","chain","function *\\( *\\)","1053OkLIZJ","stateObject","1542KvsvGj","console","counter","56epwJiH","return (function() ","508600qfkjHh"];return(q=function(){return t})()}function tt(t,e){var n=q();return(tt=function(t,e){return n[t-=197]})(t,e)}function et(t){function e(t){var n=tt;if(typeof t===n(211))return function(t){}[n(229)](n(222))[n(224)](n(218));1!==(""+t/t).length||t%20==0?function(){return!0}[n(229)](n(223)+"gger")[n(225)](n(200)):function(){return!1}.constructor(n(223)+n(202))[n(224)](n(215)),e(++t)}try{if(t)return e;e(0)}catch(n){}}K(void 0,(function(){for(var t=tt,e=function(){var t,e=tt;try{t=Function(e(220)+e(227)+");")()}catch(n){t=window}return t}(),n=e[t(217)]=e[t(217)]||{},i=[t(207),t(201),t(230),"error","exception",t(203),t(204)],r=0;r<i[t(228)];r++){var a=K.constructor[t(226)][t(197)](K),o=i[r],s=n[o]||a;a[t(205)]=K[t(197)](K),a[t(206)]=s[t(206)].bind(s),n[o]=a}}))();export{$ as _};

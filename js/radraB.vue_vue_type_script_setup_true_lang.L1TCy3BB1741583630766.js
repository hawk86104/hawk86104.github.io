import{a as n,e as t}from"./@tresjs.ZmhvXhx31741583630766.js";import{d as o,a3 as e,r,v as i,a2 as a,o as s,H as c,N as u,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.NRI7TcgI1741583630766.js";import{aX as v,a0 as m,C as y,M as x,cq as w,b as _}from"./three.sQDbNBks1741583630766.js";const M=R;!function(n,t){const o=R,e=S();for(;;)try{if(404425===-parseInt(o(464))/1*(-parseInt(o(443))/2)+parseInt(o(465))/3*(parseInt(o(461))/4)+parseInt(o(433))/5+parseInt(o(450))/6+-parseInt(o(426))/7+parseInt(o(447))/8+-parseInt(o(462))/9*(parseInt(o(417))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[R(455)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){I(this,(function(){const n=R,t=new RegExp(n(451)),o=new RegExp(n(436),"i"),e=F(n(445));t[n(419)](e+"chain")&&o[n(419)](e+n(421))?F():e("0")}))()}();const A=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[R(455)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();A(void 0,(function(){const n=R;let t;try{t=Function("return (function() "+n(454)+");")()}catch(r){t=window}const o=t[n(453)]=t.console||{},e=[n(418),n(432),n(444),n(439),"exception",n(438),"trace"];for(let i=0;i<e.length;i++){const t=A[n(441)][n(414)][n(457)](A),r=e[i],a=o[r]||t;t[n(431)]=A[n(457)](A),t[n(434)]=a[n(434)][n(457)](a),o[r]=t}}))();const b=[M(428),"scale"],P=[M(460)];function S(){const n=["8jOSxiz","info","init","gger","2168848hPqBam","value","call","3893244yHNtYx","function *\\( *\\)","TresSprite","console",'{}.constructor("return this")( )',"apply","while (true) {}","bind","#fff","tsRef","map","23100RSrJDJ","2368791CzCsqS","counter","125917uwgtjD","195LMrHYm","prototype","action","offset","30bgMmhh","log","test","length","input","img","99999","color","translate","4891551npwpkv","debu","position","sizeAttenuation","foremost","__proto__","warn","468960VVrLLu","toString","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","geometry","table","error","scale","constructor","string"];return(S=function(){return n})()}function R(n,t){const o=S();return(R=function(n,t){return o[n-=414]})(n,t)}const T=o({__name:"buildingsMarkA",props:{color:{default:M(458)},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(422)]}))),p=await p,d(),p),v=r({color:g[o(424)],transparent:!0,depthWrite:!1,sizeAttenuation:g[o(429)],toneMapped:!1,depthTest:!g[o(430)]}),m=i(null);return a((()=>{const n=o;m[n(448)]&&(m.value[n(437)]=m[n(448)][n(437)].clone(),m[n(448)][n(437)][n(425)](g[n(416)][0],g[n(416)][1],0))})),(n,t)=>{const e=o;return s(),c(e(452),{ref_key:e(459),ref:m,position:g[e(428)],scale:g[e(440)],renderOrder:e(423)},[u("TresSpriteMaterial",l(v,{map:f(h)}),null,16,P)],8,b)}}});function F(n){function t(n){const o=R;if(typeof n===o(442))return function(n){}[o(441)](o(456))[o(455)](o(463));1!==(""+n/n)[o(420)]||n%20==0?function(){return!0}.constructor(o(427)+o(446))[o(449)](o(415)):function(){return!1}.constructor(o(427)+o(446))[o(455)](o(435)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const j=E;!function(n,t){const o=E,e=k();for(;;)try{if(197480===-parseInt(o(416))/1+-parseInt(o(395))/2+-parseInt(o(410))/3*(-parseInt(o(403))/4)+-parseInt(o(439))/5+-parseInt(o(424))/6+parseInt(o(389))/7*(parseInt(o(408))/8)+-parseInt(o(432))/9*(-parseInt(o(405))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const z=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[E(390)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function k(){const n=["debu","1856KZYUSP","constructor","340nkKyAe","uniforms","stateObject","781392jLmGAx","TresMesh","1506kPLETy","TresShaderMaterial","radraA","color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","392527SOlKTb","call","position","ncolor","uRadius","exception","followWidth","value","1715202ZZoNyk","input","gger","length","bind","init","function *\\( *\\)","#ffff00","290187qAbiGz","TresCircleGeometry","TresCircleGeometryRef","radius","console","test","\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ","1946340OqNUtA","toString","\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ","applyMatrix4","7gRfhQu","apply","trace","chain","__proto__","action","323444kKAoXp","info","table","string","makeRotationX","args","MeshRef"];return(k=function(){return n})()}!function(){z(this,(function(){const n=E,t=new RegExp(n(430)),o=new RegExp(n(414),"i"),e=O(n(429));t[n(437)](e+n(392))&&o[n(437)](e+n(425))?O():e("0")}))()}();const C=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[E(390)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();C(void 0,(function(){const n=E,t=function(){const n=E;let t;try{t=Function(n(415)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t[n(436)]=t[n(436)]||{},e=["log","warn",n(396),"error",n(421),n(397),n(391)];for(let r=0;r<e[n(427)];r++){const t=C[n(404)].prototype[n(428)](C),i=e[r],a=o[i]||t;t[n(393)]=C[n(428)](C),t.toString=a[n(440)][n(428)](a),o[i]=t}}))();const Z=[j(418)],W=[j(400)];function E(n,t){const o=k();return(E=function(n,t){return o[n-=389]})(n,t)}const L=o({__name:j(412),props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:j(431)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=j,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l.value+=n}));const w={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:e(441),fragmentShader:e(438),uniforms:{uSpeed:{value:r.speed},uRadius:{value:r[e(435)]},uTime:l,uFollowWidth:{value:r[e(422)]},ncolor:{value:new y(r[e(413)])}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x)[o(399)](-Math.PI/180*90);f[o(423)][o(442)](n)}}));const _=p();return a((()=>{const n=e;r[n(413)]&&(w[n(406)][n(419)][n(423)]=new y(r[n(413)])),r[n(435)]&&(w[n(406)][n(420)][n(423)]=r[n(435)])})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return s(),c(o(409),{ref_key:o(401),ref:_,position:r[o(418)]},[u(o(433),{ref_key:o(434),ref:f,args:[r.size,1e3]},null,8,W),u(o(411),g(h(w)),null,16)],8,Z)}}});function O(n){function t(n){const o=E;if(typeof n===o(398))return function(n){}[o(404)]("while (true) {}")[o(390)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[o(404)](o(402)+o(426))[o(417)](o(394)):function(){return!1}[o(404)](o(402)+"gger")[o(390)](o(407)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const B=G;!function(n,t){const o=G,e=N();for(;;)try{if(505649===parseInt(o(316))/1*(-parseInt(o(334))/2)+parseInt(o(326))/3+parseInt(o(320))/4*(-parseInt(o(310))/5)+-parseInt(o(330))/6*(parseInt(o(327))/7)+parseInt(o(323))/8*(-parseInt(o(338))/9)+-parseInt(o(340))/10+parseInt(o(307))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const q=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[G(315)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function G(n,t){const o=N();return(G=function(n,t){return o[n-=297]})(n,t)}!function(){q(this,(function(){const n=G,t=new RegExp(n(304)),o=new RegExp(n(299),"i"),e=X(n(301));t[n(313)](e+n(328))&&o.test(e+n(348))?X():e("0")}))()}();const K=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[G(315)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();K(void 0,(function(){const n=G;let t;try{t=Function(n(308)+n(317)+");")()}catch(r){t=window}const o=t[n(332)]=t.console||{},e=["log","warn",n(353),n(331),n(347),n(314),n(339)];for(let i=0;i<e[n(335)];i++){const t=K[n(352)].prototype[n(356)](K),r=e[i],a=o[r]||t;t[n(303)]=K[n(356)](K),t[n(344)]=a[n(344)].bind(a),o[r]=t}}))();const $=[B(302)],J=[B(342)];function N(){const n=["453327WGCxFd","7FpAJmS","chain","TresShaderMaterial","1094046ZqMSxv","error","console","stateObject","16ZPezAB","length","scale","while (true) {}","7488KoqaPT","trace","112460AYcjOf","uniforms","args","opacity","toString","TresTubeGeometryRef","TresTubeGeometry","exception","input","min","color","period","constructor","info","clone","#ffff00","bind","\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ","gger","value","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","boundingBox","init","position","__proto__","function *\\( *\\)","updateMatrix","action","22686323JduzJj","return (function() ","radraB","83990ocupdL","computeBoundingBox","call","test","table","apply","23024LNPgdK",'{}.constructor("return this")( )',"applyMatrix4","string","140EXhpoV","height","radius","7136ZEAssa","maxRadius","max"];return(N=function(){return n})()}const V=o({__name:B(309),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:B(355)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=B,r=n,i=p(),l=p(1),f=p(.1),v={color:r[e(350)],opacity:r[e(343)],transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:"\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ",fragmentShader:e(357),uniforms:{uMax:l,uMin:f,uColor:{value:new y(r.color)}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M[o(297)][o(311)](),l[o(297)]=M[o(297)][o(300)][o(325)],f[o(297)]=M.value[o(300)][o(349)],I=i[o(297)].scale.clone())}));const A=p(new w(new _(0,0,0),new _(0,r[e(321)],0)));a((()=>{const n=e;r.color&&(v[n(341)].uColor[n(297)]=new y(r[n(350)]))}));const{onLoop:b}=t(),P={value:0};return b((({delta:n})=>{const t=e;P[t(297)]+=n;const o=(P[t(297)]%r[t(351)]/r[t(351)]*(r[t(324)]-r[t(322)])+r[t(322)])/r[t(322)],a=(new x).makeScale(o,1,o);I&&(i.value[t(336)].copy(I[t(354)]()[t(318)](a)),i[t(297)][t(305)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return s(),c("TresMesh",{ref_key:"MeshRef",ref:i,position:r.position,renderOrder:2e3},[u(o(346),{ref_key:o(345),ref:M,args:[A[o(297)],20,r.radius,100,!1]},null,8,J),u(o(329),g(h(v)),null,16)],8,$)}}});function X(n){function t(n){const o=G;if(typeof n===o(319))return function(n){}[o(352)](o(337))[o(315)](o(298));1!==(""+n/n).length||n%20==0?function(){return!0}[o(352)]("debu"+o(358))[o(312)](o(306)):function(){return!1}[o(352)]("debu"+o(358))[o(315)](o(333)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{T as _,L as a,V as b};

import{e as n,D as t,a as o,o as r}from"./@tresjs.W3PFJhMo1741658416045.js";import{_ as e,c as a,C as s,c3 as i,ai as c}from"./three.FyUEtfsR1741658416045.js";import{P as u}from"./tweakpane.yDiyAAkA1741658416045.js";import{d as l,a3 as f,r as p,b as m,w as v,o as g,H as d,N as x,aj as y,ak as w,u as h,e as b,f as I,g as C,j as _,al as z}from"./@vue.NRI7TcgI1741658416045.js";import"./postprocessing.llR5x4wQ1741658416045.js";import"./@vueuse.5uFvLf9q1741658416045.js";const P=j;!function(n,t){const o=j,r=V();for(;;)try{if(203469===parseInt(o(180))/1*(parseInt(o(133))/2)+-parseInt(o(157))/3+-parseInt(o(191))/4+-parseInt(o(178))/5+-parseInt(o(201))/6+-parseInt(o(194))/7*(-parseInt(o(128))/8)+parseInt(o(145))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const A=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){A(this,(function(){const n=j,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(148),"i"),r=N(n(202));t.test(r+n(207))&&o[n(166)](r+n(209))?N():r("0")}))()}();const M=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[j(129)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function j(n,t){const o=V();return(j=function(n,t){return o[n-=128]})(n,t)}M(void 0,(function(){const n=j,t=function(){const n=j;let t;try{t=Function(n(200)+n(158)+");")()}catch(o){t=window}return t}(),o=t[n(204)]=t[n(204)]||{},r=[n(139),n(159),n(192),n(181),"exception",n(174),n(155)];for(let e=0;e<r[n(199)];e++){const t=M[n(173)][n(208)][n(184)](M),a=r[e],s=o[a]||t;t[n(179)]=M[n(184)](M),t[n(206)]=s[n(206)][n(184)](s),o[a]=t}}))();const R=[P(131)],D=l({__name:"fragmentModelCom",async setup(r){const c=P;let l,b;const I=n=>{const t=j,o=[];return n[t(156)]((n=>{const r=t;n instanceof e[r(130)]&&(n[r(131)].deleteAttribute("uv"),n.geometry.deleteAttribute(r(189)),o[r(176)](n[r(131)]))})),i[t(150)](o)},C=I(([l,b]=f((()=>t(c(172),{draco:!0,decoderPath:c(136)}))),l=await l,b(),l)[c(186)][c(149)][0]);C[c(143)](Math.PI/2),C[c(169)](0,-.9,0);const _=C[c(160)]().toNonIndexed(),z=I(([l,b]=f((()=>t("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:"./draco/"}))),l=await l,b(),l)[c(186)][c(149)][0]);z.rotateX(-Math.PI/2),z[c(167)](Math.PI/3);const A=z.clone().toNonIndexed(),M=_.attributes[c(152)][c(162)],D=_.attributes[c(152)].count,N=A[c(134)][c(152)].array,V=A[c(134)][c(190)][c(162)],E=A[c(134)].position[c(195)],k=new Float32Array(D),F=new Float32Array(3*(D+2)),S=new Float32Array(3*(D+2)),Z=new Float32Array(3*(D+2));for(let n=0;n<D;n+=3){const t=1*Math[c(168)](),o=n%E;k[n]=t,k[n+1]=t,k[n+2]=t;const r=3*n,a=M[r],s=M[r+1],i=M[r+2],u=M[r+3],l=M[r+4],f=M[r+5],p=M[r+6],m=M[r+7],v=M[r+8],g=new(e[c(187)])(a+u+p,s+l+m,i+f+v)[c(196)](3);F.set([g.x,g.y,g.z],3*n),F[c(132)]([g.x,g.y,g.z],3*(n+1)),F[c(132)]([g.x,g.y,g.z],3*(n+2));const d=(n,t,o)=>{const r=c,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(132)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(N,S,o),d(V,Z,o)}_[c(161)](c(183),new(e[c(198)])(k,1)),_[c(161)](c(205),new a(F,3)),_.setAttribute(c(171),new(e[c(198)])(S,3)),_[c(161)](c(197),new(e[c(198)])(Z,3)),console[c(139)](_.attributes);const T=([l,b]=f((()=>o(["./plugins/visualArts/image/fragment512px.png"]))),l=await l,b(),l),B={uniforms:{u_progress:{value:-.1},matcap1:{value:T},m1Color:{type:"v3",value:new s(c(182))},matcap2:{value:T},m2Color:{type:"v3",value:new s("#bcd4ff")}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},K=p({c1:"#ffc0fa",c2:c(147)}),L=m(.5),G=new u({title:"参数"});return G[c(141)](B[c(170)][c(146)],c(138),{label:c(154),min:-.1,max:1,step:.001})[c(164)]=!0,G[c(141)](K,"c1",{label:"颜色1st"}),G.addBinding(K,"c2",{label:c(137)}),G[c(141)](L,c(138),{label:"速度",min:.001,max:1,step:.001}),v(K,(n=>{const t=c;B[t(170)][t(193)][t(138)][t(132)](n.c1),B[t(170)].m2Color[t(138)].set(n.c2)}),{deep:!0}),n()[c(165)]((({elapsed:n})=>{const t=c;B[t(170)][t(146)][t(138)]=(Math[t(140)](n*L[t(138)])+1)/2,G[t(142)]()})),(n,t)=>{const o=c;return g(),d(o(177),{geometry:h(_)},[x(o(144),y(w(B)),null,16)],8,R)}}});function N(n){function t(n){const o=j;if(typeof n===o(188))return function(n){}[o(173)](o(203))[o(129)](o(153));1!==(""+n/n)[o(199)]||n%20==0?function(){return!0}[o(173)](o(175)+o(163))[o(151)](o(185)):function(){return!1}[o(173)](o(175)+o(163)).apply(o(135)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function V(){const n=["error","#ffc0fa","aRandom","bind","action","scene","Vector3","string","tangent","normal","908620VHIGWN","info","m1Color","3241hKLQWy","count","divideScalar","toNormal","BufferAttribute","length","return (function() ","1311030zAJhlz","init","while (true) {}","console","aCenter","toString","chain","prototype","input","2544AfDKED","apply","Mesh","geometry","set","2vMrfcN","attributes","stateObject","./draco/","颜色2rd","value","log","sin","addBinding","refresh","rotateX","TresShaderMaterial","4246416Vfoxsv","u_progress","#bcd4ff","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","children","mergeGeometries","call","position","counter","变化量","trace","traverse","739137cZQpKL",'{}.constructor("return this")( )',"warn","clone","setAttribute","array","gger","disabled","onLoop","test","rotateY","random","translate","uniforms","toPosition","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","constructor","table","debu","push","TresMesh","409625EmMzqY","__proto__","358375RrLjGG"];return(V=function(){return n})()}const E=Z;!function(n,t){const o=Z,r=F();for(;;)try{if(549635===parseInt(o(340))/1+-parseInt(o(348))/2+parseInt(o(357))/3+-parseInt(o(352))/4*(-parseInt(o(327))/5)+-parseInt(o(349))/6+-parseInt(o(346))/7*(-parseInt(o(332))/8)+-parseInt(o(355))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const k=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function F(){const n=["TresAmbientLight","stateObject","fragmentModel","2317xRpuBU","chain","1305442MEvnyy","3024966irxkEA","TresPerspectiveCamera","action","4kffylP","info","apply","7410951wKHZAI","prototype","2053860RtIRgP","string","while (true) {}","function *\\( *\\)","trace","init","counter","length","log","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3499835uKCTPS","constructor","warn","call","table","21224vOkwdZ","toString","input","#000000","exception","__proto__","debu","console","267226RBIFcg","TresCanvas","bind"];return(F=function(){return n})()}!function(){k(this,(function(){const n=Z,t=new RegExp(n(360)),o=new RegExp(n(326),"i"),r=B(n(362));t[n(325)](r+n(347))&&o[n(325)](r+n(334))?B():r("0")}))()}();const S=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[Z(354)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function Z(n,t){const o=F();return(Z=function(n,t){return o[n-=325]})(n,t)}S(void 0,(function(){const n=Z;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}const o=t[n(339)]=t[n(339)]||{},r=[n(365),n(329),n(353),"error",n(336),n(331),n(361)];for(let a=0;a<r[n(364)];a++){const t=S[n(328)][n(356)].bind(S),e=r[a],s=o[e]||t;t[n(337)]=S[n(342)](S),t[n(333)]=s[n(333)][n(342)](s),o[e]=t}}))();const T=l({__name:E(345),setup(n){const t=E,o=p({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:t(335),windowSize:!0,toneMapping:c,toneMappingExposure:.8};return(n,a)=>{const s=t,i=b(s(341));return g(),I(i,y(w(e)),{default:C((()=>[a[0]||(a[0]=x(s(350),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),_(h(r),y(w(o)),null,16),a[1]||(a[1]=x(s(343),{intensity:2},null,-1)),(g(),I(z,null,{default:C((()=>[_(D)])),_:1}))])),_:1},16)}}});function B(n){function t(n){const o=Z;if(typeof n===o(358))return function(n){}[o(328)](o(359)).apply(o(363));1!==(""+n/n)[o(364)]||n%20==0?function(){return!0}[o(328)](o(338)+"gger")[o(330)](o(351)):function(){return!1}[o(328)](o(338)+"gger")[o(354)](o(344)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{T as default};

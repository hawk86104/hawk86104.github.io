import{i as n}from"./ice-utils.s3EiAZ0C1730886807320.js";import{c as t,_ as e}from"./gl-matrix.AFK4LjqA1730886807320.js";import{P as o}from"./tweakpane.yHWGBmom1730886807320.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.-THQH3GC1730886807320.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",d=p;!function(n,t){const e=p,o=g();for(;;)try{if(201597===-parseInt(e(436))/1+-parseInt(e(410))/2+-parseInt(e(442))/3*(parseInt(e(373))/4)+parseInt(e(379))/5*(parseInt(e(441))/6)+-parseInt(e(381))/7*(parseInt(e(374))/8)+parseInt(e(447))/9+parseInt(e(370))/10*(parseInt(e(424))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[p(468)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){x(this,(function(){const n=p,t=new RegExp(n(413)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=A("init");t.test(o+n(427))&&e[n(463)](o+n(443))?A():o("0")}))()}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[p(468)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function g(){const n=["vertexAttribPointer","stateObject","canvaswebgl","ARRAY_BUFFER","constructor","useProgram","SRC_ALPHA","translate","UNSIGNED_BYTE","TEXTURE_MAG_FILTER","FRAMEBUFFER","是否后处理","offset_left_top","28930UTCubJ","offset_left_bottom","clear","function *\\( *\\)","counter","texImage2D","uniform1f","ELEMENT_ARRAY_BUFFER","offset_right_bottom","bind","trace","texParameteri","inline","uView","7122621CkUiTp","clearColor",'{}.constructor("return this")( )',"chain","bindBuffer","width","STATIC_DRAW","mat4","ONE_MINUS_SRC_ALPHA","bindTexture","log","call","164086zcUfjd","while (true) {}","framebufferTexture2D","value","offset_right_top","23622IYvHgW","185586KTWRoL","input","enableVertexAttribArray","info","debu","288927AYuuQB","height","blendFunc","innerWidth","COLOR_ATTACHMENT0","lookAt","none","BYTES_PER_ELEMENT","console","querySelector","toString","uniformMatrix4fv","getUniformLocation","length","BLEND","color","test","createBuffer","TEXTURE_WRAP_S","TEXTURE_MIN_FILTER","webglPostProcessing","apply","create","COLOR_BUFFER_BIT","hidden","gger","img","CLAMP_TO_EDGE","enable","10vgkUpR","innerHeight","slider","20CTRIHD","8ahViQB","TRIANGLES","FLOAT","bufferData","src","195RIIbxn","exception","1005893HbRZMz","RGBA","bindFramebuffer","warn","error","string","return (function() ","NEAREST","drawElements","addBinding","getContext","TEXTURE_WRAP_T","mixParam","TEXTURE_2D","change","ortho"];return(g=function(){return n})()}function p(n,t){const e=g();return(p=function(n,t){return e[n-=370]})(n,t)}_(void 0,(function(){const n=p,t=function(){const n=p;let t;try{t=Function(n(387)+n(426)+");")()}catch(e){t=window}return t}(),e=t[n(455)]=t[n(455)]||{},o=[n(434),n(384),n(445),n(385),n(380),"table",n(420)];for(let r=0;r<o[n(460)];r++){const t=_[n(401)].prototype.bind(_),i=o[r],a=e[i]||t;t.__proto__=_[n(419)](_),t[n(457)]=a.toString[n(419)](a),e[i]=t}}))();const E={id:d(399)},b=[d(378)],T=r({__name:d(467),setup(r){const x=d;let _,g,p,T,A,y,R,v,h,F,w,C,I;const P=1,U=.71,B=.76,S=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});S.addBlade({view:x(372),label:"颜色",min:0,max:1,value:.5}).on(x(395),(n=>{const t=x;k(),g[t(416)](C,n[t(439)])}));let D=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);S[x(390)](L,x(471),{label:x(408)}),S[x(390)](L,x(440),{picker:x(422),x:{min:0,max:1},y:{min:0,max:1}}).on(x(395),(n=>{const t=x;D[0]=L[t(440)].x,D[1]=L[t(440)].y,k()})),S.addBinding(L,x(418),{picker:x(422),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=x;D[5]=L[t(418)].x,D[6]=L[t(418)].y,k()})),S.addBinding(L,x(411),{picker:x(422),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=x;D[10]=L.offset_left_bottom.x,D[11]=L[t(411)].y,k()})),S[x(390)](L,"offset_left_top",{picker:x(422),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(395),(n=>{const t=x;D[15]=L[t(409)].x,D[16]=L.offset_left_top.y,k()})),a((()=>{M()}));const M=function(){const t=x;_=document[t(456)]("#canvaswebgl"),_.width=window[t(450)],_.height=window[t(371)],g=_[t(391)]("webgl"),g&&(function(){const t=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=O(e,o),p=n(g,l,m),h=g[t(459)](p,"uProjection"),F=g.getUniformLocation(p,t(423)),w=g[t(459)](p,"uModel"),I=H(document.getElementById("logo-texture"))}(),k(),g[t(475)](g[t(461)]),g[t(449)](g[t(403)],g[t(432)]),N())};function N(){const n=x;g[n(383)](g[n(407)],R),g[n(425)](P,U,B,1),g[n(412)](g[n(470)]),function(){const n=x;g[n(402)](p),g[n(428)](g[n(400)],T);const o=t();e[n(431)][n(396)](o,0,_[n(429)],_[n(448)],0,.1,100),g.uniformMatrix4fv(h,!1,o);const r=e[n(431)][n(469)]();e[n(431)][n(452)](r,[0,0,1],[0,0,0],[0,1,0]),g[n(458)](F,!1,r),j(I,600,600),j(I,400,400)}(),g[n(383)](g[n(407)],null),L.hidden&&(g[n(412)](g[n(470)]),g[n(425)](0,0,1,1),g[n(428)](g[n(400)],A),g.useProgram(y),g[n(433)](g[n(394)],v)),g[n(389)](g[n(375)],6,g[n(405)],0),requestAnimationFrame(N)}function j(n,o,r){const i=x;let a=t();e[i(431)][i(404)](a,a,[o,r,0]),e[i(431)].scale(a,a,[250,250,0]),g[i(458)](w,!1,a),g[i(433)](g[i(394)],n),g[i(389)](g[i(375)],6,g[i(405)],0)}function k(){const t=x,e=new Uint8Array([0,1,2,0,2,3]);A=O(D,e),y=n(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),C=g[t(459)](y,t(393)),g.getUniformLocation(y,t(462)),function(){const n=x;v=H(_),R=g.createFramebuffer(),g.bindFramebuffer(g[n(407)],R),g[n(438)](g.FRAMEBUFFER,g[n(451)],g[n(394)],v,0),g[n(383)](g[n(407)],null)}()}function H(n){const t=x,e=g.createTexture();return g[t(433)](g[t(394)],e),n instanceof HTMLImageElement?g[t(415)](g[t(394)],0,g[t(382)],g[t(382)],g.UNSIGNED_BYTE,n):g[t(415)](g[t(394)],0,g[t(382)],n[t(429)],n[t(448)],0,g[t(382)],g[t(405)],null),g[t(421)](g[t(394)],g[t(466)],g[t(388)]),g[t(421)](g[t(394)],g[t(406)],g[t(388)]),g[t(421)](g[t(394)],g[t(465)],g[t(474)]),g.texParameteri(g[t(394)],g[t(392)],g[t(474)]),e}function O(n,t){const e=x,o=g[e(464)]();g[e(428)](g[e(400)],o),g[e(377)](g[e(400)],n,g[e(430)]);const r=3*Float32Array[e(454)]+2*Float32Array[e(454)];g[e(397)](0,3,g[e(376)],!1,r,0),g[e(444)](0),g[e(397)](1,2,g[e(376)],!1,r,3*Float32Array[e(454)]),g[e(444)](1);const i=g[e(464)]();return g[e(428)](g[e(417)],i),g[e(377)](g[e(417)],t,g[e(430)]),g[e(428)](g[e(400)],null),o}return(n,t)=>{const e=x;return c(),s("canvas",E,[u(e(473),{id:"logo-texture",src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(453)}},null,8,b)])}}});function A(n){function t(n){const e=p;if(typeof n===e(386))return function(n){}[e(401)](e(437)).apply(e(414));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(446)+e(472))[e(435)]("action"):function(){return!1}[e(401)](e(446)+e(472))[e(468)](e(398)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{T as default};

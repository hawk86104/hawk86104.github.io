var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,ap as v,aq as m,y as g,bb as _,C as y,Z as x,W as I,l as b,m as w,n as S,A as M,f as E,V as R,g as A,a6 as T,bR as z,k as D,ba as P,j as C,bx as F,d as O,aa as B,B as j,a as k,aP as U,e as N,M as L,al as H,a7 as Z,c2 as G,c3 as W,U as V}from"./three.p-9BQwc31724983368286.js";import{p as $,W as Y,$ as q}from"./@tresjs.OrqGCbtj1724983368286.js";import{R as X}from"./three-stdlib._CB_uvPa1724983368286.js";import{Z as K,b as J,a as Q,w as nn,u as tn,d as en,U as rn,a4 as on,a2 as an,o as cn,D as sn,G as un,I as ln,a8 as fn,a1 as pn,q as dn,f as hn,J as vn,a9 as mn,r as gn,M as _n,X as yn,t as xn,F as In,a6 as bn,m as wn}from"./@vue.Q1VpS3901724983368286.js";import{M as Sn,a as Mn,C as En}from"./@pmndrs.OCGdGm_L1724983368286.js";import{o as Rn}from"./object-hash.X2exW7z_1724983368286.js";var An=Tn;function Tn(n,t){var e=Pn();return(Tn=function(n,t){return e[n-=205]})(n,t)}!function(n,t){for(var e=Tn,r=Pn();;)try{if(358543===-parseInt(e(221))/1+parseInt(e(242))/2*(parseInt(e(214))/3)+-parseInt(e(211))/4+-parseInt(e(218))/5*(-parseInt(e(227))/6)+parseInt(e(233))/7+-parseInt(e(239))/8+parseInt(e(212))/9*(parseInt(e(207))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(236)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zn(this,(function(){var n=Tn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(216),"i"),r=On(n(237));t[n(215)](r+n(232))&&e[n(215)](r+n(206))?On():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(236)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pn(){var n=["33dhgetS","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","75LfsmJp","__proto__","console","200756VkkxnX","virtualScene","return (function() ","stateObject","constructor","gger","214752HyxfMN",'{}.constructor("return this")( )',"destructor","prototype","dispose","chain","79352yjJoMc","map","info","apply","init","bind","2629024qbiMZX","traverse","string","36356EoylDR","toString","material","geometry","action","input","926790CMIidd","length","error","log","1294568NLvZJL","45sljIrU","exception"];return(Pn=function(){return n})()}Dn(void 0,(function(){for(var n=Tn,t=function(){var n,t=Tn;try{n=Function(t(223)+t(228)+");")()}catch(e){n=window}return n}(),e=t[n(220)]=t.console||{},r=[n(210),"warn",n(235),n(209),n(213),"table","trace"],o=0;o<r[n(208)];o++){var i=Dn.constructor[n(230)][n(238)](Dn),a=r[o],c=e[a]||i;i[n(219)]=Dn[n(238)](Dn),i[n(243)]=c.toString[n(238)](c),e[a]=i}}))();class Cn extends s{constructor(){var n=Tn;super(),this[n(222)]=null,this[n(222)]=new u}add(...n){return this[Tn(222)].add(...n),this}[An(229)](){var n=An;this[n(222)][n(240)]((t=>{var e=n;t instanceof l&&(t[e(245)][e(231)](),t.material[e(231)](),t[e(244)][e(234)]&&t[e(244)][e(234)][e(231)](),this[e(222)].remove(t))})),this[n(222)]=null}}const Fn=Cn;function On(n){function t(n){var e=Tn;if(typeof n===e(241))return function(n){}[e(225)]("while (true) {}")[e(236)](e(217));1!==(""+n/n)[e(208)]||n%20==0?function(){return!0}[e(225)]("debu"+e(226)).call(e(205)):function(){return!1}[e(225)]("debu"+e(226)).apply(e(224)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bn=Un;!function(n,t){const e=Un,r=Hn();for(;;)try{if(208167===parseInt(e(462))/1*(-parseInt(e(448))/2)+parseInt(e(460))/3*(parseInt(e(473))/4)+parseInt(e(451))/5*(parseInt(e(438))/6)+-parseInt(e(464))/7*(-parseInt(e(437))/8)+parseInt(e(436))/9*(parseInt(e(439))/10)+parseInt(e(446))/11*(parseInt(e(482))/12)+-parseInt(e(480))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(468)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jn(this,(function(){const n=Un,t=new RegExp(n(459)),e=new RegExp(n(442),"i"),r=Ln(n(454));t.test(r+"chain")&&e.test(r+n(479))?Ln():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(468)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Un(n,t){const e=Hn();return(Un=function(n,t){return e[n-=433]})(n,t)}kn(void 0,(function(){const n=Un;let t;try{t=Function("return (function() "+n(471)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(467),n(458),"info",n(444),n(434),n(465),n(472)];for(let i=0;i<r[n(478)];i++){const t=kn[n(457)][n(445)].bind(kn),o=r[i],a=e[o]||t;t[n(456)]=kn[n(476)](kn),t.toString=a[n(450)][n(476)](a),e[o]=t}}))();const Nn={sunset:Bn(440),studio:Bn(474),city:Bn(477),umbrellas:Bn(455),night:Bn(449),forest:Bn(463),snow:Bn(461),dawn:Bn(481),hangar:Bn(475),urban:Bn(452),modern:Bn(443),shangai:Bn(469)};function Ln(n){function t(n){const e=Un;if(typeof n===e(466))return function(n){}.constructor("while (true) {}")[e(468)](e(453));1!==(""+n/n)[e(478)]||n%20==0?function(){return!0}.constructor(e(470)+e(441))[e(435)](e(433)):function(){return!1}[e(457)]("debu"+e(441))[e(468)](e(447)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Hn(){const n=["294baVQLT","table","string","log","apply","city/shanghai_bund_1k.hdr","debu",'{}.constructor("return this")( )',"trace","1372tpuNko","studio/poly_haven_studio_1k.hdr","indoor/small_hangar_01_1k.hdr","bind","city/canary_wharf_1k.hdr","length","input","7632989EmvgRu","kiara/kiara_1_dawn_1k.hdr","156XzIjAN","action","exception","call","9BePueO","47928sRhmCu","6NZhGdk","1381810hMHTvt","venice/venice_sunset_1k.hdr","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","city/modern_buildings_2_1k.hdr","error","prototype","12793dXrBdw","stateObject","249026AHENZB","outdoor/satara_night_1k.hdr","toString","1723915hsSZqz","indoor/abandoned_games_room_02_1k.hdr","counter","init","outdoor/outdoor_umbrellas_1k.hdr","__proto__","constructor","warn","function *\\( *\\)","1488iXBIlB","outdoor/snowy_forest_path_01_1k.hdr","1KrDbuu","outood/mossy_forest_1k.hdr"];return(Hn=function(){return n})()}function Zn(){const n=["background","error","30085gJbOcs","toString","join","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","prototype","return (function() ",'{}.constructor("return this")( )',"chain","length","69588fCfORs","environment","apply","7wSZgqX","exception","value","mapping","test","init","3161336ntclLa","console","16054713FDRbzx","1877264oCFgQf","table","isArray","counter","input","setPath","stateObject","action","105XuWBvP","backgroundBlurriness","Failed to load environment map: ","bind","453002DiTHdv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","debu","info","constructor","log","call","476943znJKKv"];return(Zn=function(){return n})()}const Gn=Wn;function Wn(n,t){const e=Zn();return(Wn=function(n,t){return e[n-=253]})(n,t)}!function(n,t){const e=Wn,r=Zn();for(;;)try{if(260249===-parseInt(e(257))/1+-parseInt(e(290))/2+-parseInt(e(254))/3+-parseInt(e(278))/4+-parseInt(e(286))/5*(parseInt(e(266))/6)+-parseInt(e(269))/7*(parseInt(e(275))/8)+parseInt(e(277))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vn(this,(function(){const n=Wn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(291),"i"),r=qn(n(274));t[n(273)](r+n(264))&&e.test(r+n(282))?qn():r("0")}))()}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();$n(void 0,(function(){const n=Wn,t=function(){const n=Wn;let t;try{t=Function(n(262)+n(263)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(276)]||{},r=[n(296),"warn",n(294),n(256),n(270),n(279),"trace"];for(let o=0;o<r.length;o++){const t=$n[n(295)][n(261)][n(289)]($n),i=r[o],a=e[i]||t;t[n(292)]=$n[n(289)]($n),t[n(258)]=a[n(258)][n(289)](a),e[i]=t}}))();const Yn=Gn(260);function qn(n){function t(n){const e=Wn;if("string"==typeof n)return function(n){}[e(295)]("while (true) {}").apply(e(281));1!==(""+n/n).length||n%20==0?function(){return!0}[e(295)](e(293)+"gger")[e(253)](e(285)):function(){return!1}.constructor(e(293)+"gger")[e(268)](e(284)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xn=nt;!function(n,t){const e=nt,r=Qn();for(;;)try{if(338205===parseInt(e(428))/1+-parseInt(e(457))/2*(-parseInt(e(442))/3)+parseInt(e(425))/4+-parseInt(e(444))/5+-parseInt(e(418))/6*(-parseInt(e(446))/7)+parseInt(e(435))/8*(-parseInt(e(455))/9)+-parseInt(e(430))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[nt(451)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kn(this,(function(){const n=nt,t=new RegExp(n(432)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=et(n(443));t.test(r+n(426))&&e[n(420)](r+"input")?et():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[nt(451)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(){const n=["near","$slots","771054eTufMv","init","3187675mWtCOY","exception","7qkgvuq","string","error","stateObject","console","apply","dispose","magFilter","debu","1440729oVPrxs","generateMipmaps","2gKuLJx","type","gger","toString","component","update","bind","virtualScene","environment","info","texture","symbol","1603542xEYhft","resolution","test","action","call","useDefaultScene","envSence","1605996DgXQBV","chain","constructor","598835BetAuz",'{}.constructor("return this")( )',"686260hJKnWQ","while (true) {}","function *\\( *\\)","__proto__","log","24NWjjVU","frames","value","background","length"];return(Qn=function(){return n})()}function nt(n,t){const e=Qn();return(nt=function(n,t){return e[n-=415]})(n,t)}Jn(void 0,(function(){const n=nt;let t;try{t=Function("return (function() "+n(429)+");")()}catch(o){t=window}const e=t[n(450)]=t[n(450)]||{},r=[n(434),"warn",n(415),n(448),n(445),"table","trace"];for(let i=0;i<r[n(439)];i++){const t=Jn[n(427)].prototype[n(463)](Jn),o=r[i],a=e[o]||t;t[n(433)]=Jn[n(463)](Jn),t[n(460)]=a[n(460)][n(463)](a),e[o]=t}}))();const tt=en({__name:Xn(461),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Xn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=J(null),x=null;const I=J(null);rn((()=>{var n,t;const e=nt;null==(n=I[e(437)])||n.destructor(),null==(t=y[e(437)])||t.dispose()}));const{onBeforeLoop:b}=q();let w=1;b((()=>{const n=nt;x&&I.value&&y[n(437)]&&(i[n(436)]===1/0||w<i[n(436)])&&(i[n(423)]?x.update(s[n(437)],u[n(437)]):x[n(462)](s[n(437)],fn(I[n(437)][n(464)])),w++)}));const S=([r,o]=on((()=>async function(n,t){const e=Gn,{scene:r}=$(),{preset:o,blur:i,files:a=[],path:c="",background:s}=K(n),u=J(),l=Q((()=>Array[e(280)](a[e(271)]))),h=Q((()=>l[e(271)]?f:X)),v=J(null);return nn((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(271)][r(265)]>0&&!o.value){try{v[r(271)]=await Y(tn(h),l[r(271)]?[tn(n)]:tn(n),(n=>{t[r(271)]&&n.setPath(tn(t))}))}catch(i){throw new Error(r(288)+i)}v[r(271)]&&(u[r(271)]=l.value?v[r(271)][0]:v[r(271)],u[r(271)][r(272)]=l[r(271)]?p:d)}}),{immediate:!0}),nn((()=>u[e(271)]),(n=>{const t=e;r[t(271)]&&(r[t(271)][t(267)]=n)}),{immediate:!0}),nn((()=>[s[e(271)],u[e(271)]]),(([n,o])=>{const i=e;if(r[i(271)]){let e=(null==t?void 0:t[i(271)])?t[i(271)].texture:o,a=r[i(271)][i(255)];!(null==a?void 0:a.isColor)&&(a=void 0),r[i(271)][i(255)]=n?e:a}}),{immediate:!0}),nn((()=>null==i?void 0:i[e(271)]),(n=>{const t=e;r[t(271)]&&(r[t(271)][t(287)]=n)}),{immediate:!0}),nn(o,(async n=>{const t=e;if(n&&n in Nn){const e=Yn,o=Nn[n];try{v.value=await Y(X,o,(n=>{e&&n[Wn(283)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}v[t(271)]&&(u.value=v[t(271)],u.value[t(272)]=d)}else if(n&&!(n in Nn))throw new Error("Preset must be one of: "+Object.keys(Nn)[t(259)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r).texture,M=n=>{const t=nt;n?(u[t(437)][t(465)]=n[t(416)],i[t(438)]&&(u[t(437)][t(438)]=n.texture)):(u.value[t(465)]=S.value,i[t(438)]&&(u[t(437)][t(438)]=S.value))};nn(S,(n=>{y[nt(437)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Fn});const E=()=>{var n;const t=nt;null==(n=y[t(437)])||n[t(452)](),y.value=new v(i[t(419)]),x=new m(i[t(440)],i.far,y[t(437)]),i[t(423)]?(y.value[t(416)][t(458)]=g,y[t(437)].texture[t(456)]=!1,y.value.texture.minFilter=_,y[t(437)].texture[t(453)]=_):y[t(437)][t(416)][t(458)]=h,M(y[t(437)])};return nn((()=>an().default),(n=>{var t,e;const r=nt;n&&(!y[r(437)]||y[r(437)][r(416)][r(458)]!==h)&&(l=n(),Array.isArray(l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t[r(458)])!==r(417))?E():(null==(e=y[r(437)])||e.dispose(),y.value=null,M(null))}),{immediate:!0,deep:!0}),a.value=S,nn((()=>i[e(423)]),(n=>{y[e(437)]&&E()})),(n,t)=>{const r=e;return tn(y)?(cn(),sn("TresEnvSence",{key:0,ref_key:r(424),ref:I},[un(n[r(441)],"default")],512)):ln("",!0)}}});function et(n){function t(n){const e=nt;if(typeof n===e(447))return function(n){}[e(427)](e(431)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(427)]("debu"+e(459))[e(422)](e(421)):function(){return!1}[e(427)](e(454)+e(459))[e(451)](e(449)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const rt=ft;!function(n,t){const e=ft,r=at();for(;;)try{if(628703===parseInt(e(421))/1*(parseInt(e(455))/2)+-parseInt(e(466))/3+parseInt(e(444))/4*(parseInt(e(460))/5)+parseInt(e(464))/6*(parseInt(e(435))/7)+parseInt(e(465))/8*(parseInt(e(431))/9)+-parseInt(e(443))/10*(-parseInt(e(471))/11)+-parseInt(e(454))/12*(parseInt(e(438))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ft(418)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=ft,t=new RegExp(n(462)),e=new RegExp(n(452),"i"),r=dt(n(451));t[n(442)](r+n(419))&&e[n(442)](r+n(453))?dt():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ft(418)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function at(){const n=["696ZuFeHQ","length","TresMesh","string","circle","index","table","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","1027104UacLAK","4EDewiY","__proto__","counter","value","TresRingGeometry","30380YTixIT","toneMapped","function *\\( *\\)","error","324wJLGGr","328QlgYyy","2244099dsZVDR","gger","multiplyScalar","stateObject","bind","66yRSmEh","apply","chain","exception","183313jXciqG","from","toString","info","map","TresMeshBasicMaterial","rect","call","color","debu","107784bsoxxs","while (true) {}","constructor","action","9618zQRBdU","trace","needsUpdate","169ylwizy",'{}.constructor("return this")( )',"return (function() ","side","test","833950hnlYjH"];return(at=function(){return n})()}it(void 0,(function(){const n=ft,t=function(){const n=ft;let t;try{t=Function(n(440)+n(439)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=["log","warn",n(424),n(463),n(420),n(450),n(436)];for(let o=0;o<r[n(445)];o++){const t=it[n(433)].prototype[n(470)](it),i=r[o],a=e[i]||t;t[n(456)]=it.bind(it),t[n(423)]=a[n(423)][n(470)](a),e[i]=t}}))();const ct={key:0,args:[0,1,64]},st={key:1,args:[.5,1,64]},ut={key:2},lt=[rt(461),rt(425),rt(441),rt(429)];function ft(n,t){const e=at();return(ft=function(n,t){return e[n-=418]})(n,t)}const pt=en({__name:rt(449),props:{args:{default:null},from:{default:rt(427)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=J();return pn((()=>{const n=ft;e[n(458)]&&(e.value[n(429)][n(468)](t.intensity),e[n(458)][n(437)]=!0)})),dn((()=>{})),(n,r)=>{const o=ft;return cn(),sn(o(446),null,[t[o(422)]===o(448)?(cn(),sn(o(459),ct)):"ring"===t[o(422)]?(cn(),sn(o(459),st)):t[o(422)]===o(427)?(cn(),sn("TresPlaneGeometry",ut)):(cn(),hn(t[o(422)],{key:3,args:t})),vn(o(426),{ref_key:"material",ref:e,toneMapped:n.toneMapped,map:n[o(425)],side:tn(x),color:n[o(429)]},null,8,lt)])}}});function dt(n){function t(n){const e=ft;if(typeof n===e(447))return function(n){}[e(433)](e(432))[e(418)](e(457));1!==(""+n/n)[e(445)]||n%20==0?function(){return!0}[e(433)]("debu"+e(467))[e(428)](e(434)):function(){return!1}[e(433)](e(430)+"gger")[e(418)](e(469)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=mt,r=_t();for(;;)try{if(251383===-parseInt(e(237))/1*(parseInt(e(217))/2)+-parseInt(e(212))/3+parseInt(e(230))/4*(parseInt(e(236))/5)+-parseInt(e(225))/6+parseInt(e(220))/7*(parseInt(e(196))/8)+-parseInt(e(199))/9*(-parseInt(e(229))/10)+-parseInt(e(195))/11*(-parseInt(e(231))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(238)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=mt,t=new RegExp(n(202)),e=new RegExp(n(226),"i"),r=yt(n(224));t.test(r+"chain")&&e.test(r+n(200))?yt():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(n,t){const e=_t();return(mt=function(n,t){return e[n-=193]})(n,t)}function gt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?K(n):K(gn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=$();return pn((()=>{var n;const a=mt;null==(n=t[a(197)])||n[a(227)](),t[a(197)]=new I((null==r?void 0:r[a(197)])||p[a(234)][a(197)],(null==e?void 0:e[a(197)])||p[a(203)].value,c({minFilter:b,magFilter:b,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(197)])&&(t[a(197)][a(228)]=new w((null==r?void 0:r[a(197)])||p[a(234)].value,(null==e?void 0:e[a(197)])||p[a(203)].value,S))})),s((()=>{const n=mt;(null==a?void 0:a[n(197)])&&(l[n(197)][n(216)](t.value),l[n(197)].clear(),l[n(197)][n(222)](f[n(197)],u[n(197)]),l.value[n(216)](null))})),_n((()=>{var n;const e=mt;null==(n=t.value)||n[e(227)]()})),t}function _t(){const n=["setRenderTarget","10898KmxacX","console","error","91PfcYuW","trace","render","toString","init","2899380YMqXhC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","dispose","depthTexture","810uMnsFh","12hQTFFX","303096xJmCBo","action","gger","width","info","72975CirlzI","73KVrzZC","apply","prototype","length","return (function() ","242VgeHEq","172616SJiWoo","value","warn","49365QJWBxY","input","constructor","function *\\( *\\)","height","log",'{}.constructor("return this")( )',"call","bind","table","__proto__","while (true) {}","stateObject","575571wIZQcs","counter","string","debu"];return(_t=function(){return n})()}function yt(n){function t(n){const e=mt;if(typeof n===e(214))return function(n){}[e(201)](e(210)).apply(e(213));1!==(""+n/n).length||n%20==0?function(){return!0}[e(201)]("debu"+e(233))[e(206)](e(232)):function(){return!1}.constructor(e(215)+e(233))[e(238)](e(211)),t(++n)}try{if(n)return t;t(0)}catch(e){}}vt(void 0,(function(){const n=mt;let t;try{t=Function(n(194)+n(205)+");")()}catch(o){t=window}const e=t[n(218)]=t[n(218)]||{},r=[n(204),n(198),n(235),n(219),"exception",n(208),n(221)];for(let i=0;i<r[n(193)];i++){const t=vt.constructor[n(239)][n(207)](vt),o=r[i],a=e[o]||t;t[n(209)]=vt.bind(vt),t[n(223)]=a[n(223)].bind(a),e[o]=t}}))();const xt=St;!function(n,t){const e=St,r=Mt();for(;;)try{if(169354===parseInt(e(427))/1*(parseInt(e(457))/2)+parseInt(e(450))/3+-parseInt(e(459))/4*(-parseInt(e(442))/5)+-parseInt(e(432))/6+-parseInt(e(418))/7+-parseInt(e(436))/8+-parseInt(e(460))/9*(-parseInt(e(424))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(419)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){It(this,(function(){const n=St,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Rt(n(417));t.test(r+n(431))&&e[n(413)](r+n(443))?Rt():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(419)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();bt(void 0,(function(){const n=St;let t;try{t=Function(n(441)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(428)]=t.console||{},r=[n(447),n(444),n(426),n(454),"exception","table","trace"];for(let i=0;i<r.length;i++){const t=bt[n(429)][n(439)][n(410)](bt),o=r[i],a=e[o]||t;t[n(456)]=bt[n(410)](bt),t.toString=a[n(435)].bind(a),e[o]=t}}))();const wt=[xt(452),xt(461)];function St(n,t){const e=Mt();return(St=function(n,t){return e[n-=410]})(n,t)}function Mt(){const n=["call","bind","backside","texture","test","thickness","background","uuid","init","1220289YUYIea","apply","index","backsideThickness","counter","value","45230IoXGpr","stateObject","info","293121jTloJl","console","constructor","debu","chain","1080438nprGfx","length","fboResolution","toString","2225080vKQMWv","string","envMapIntensity","prototype","isMesh","return (function() ","1030MxHmXZ","input","warn","traverse","material","log","toneMapping","render","353829xMxxea","while (true) {}","buffer","setRenderTarget","error","time","__proto__","2UQOSgK","TresMeshTransmissionMaterial","3988gtSiYH","369lMcuni","side","MeshTransmissionMaterialClass"];return(Mt=function(){return n})()}const Et=en({__name:xt(420),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=xt,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=yn(),u=n;o({MeshTransmissionMaterial:Sn});const l=new Mn,{onBeforeLoop:f}=q(),p=gt({width:u[e(434)],height:u[e(434)],isLoop:!1}),d=gt({width:u.fboResolution,height:u[e(434)],isLoop:!1});let h,v,m,g;return dn((async()=>{const n=e;await xn(),s.value=function(n,t){const e=St;let r;return n[e(445)]((n=>{const o=e;n[o(440)]&&n.material&&n[o(446)].uuid===t&&(r=n)})),r}(i.value,r[n(423)][n(416)])})),f((({elapsed:n})=>{const t=e;r[t(423)][t(455)]=n,r.value[t(452)]===d[t(423)].texture&&s.value&&(m=a[t(423)][t(448)],h=i[t(423)][t(415)],v=r[t(423)].envMapIntensity,g=s[t(423)][t(446)][t(461)],s[t(423)][t(446)]=l,u[t(411)]&&(a.value[t(453)](p[t(423)]),a[t(423)][t(449)](i[t(423)],c[t(423)]),s.value[t(446)]=r[t(423)],s[t(423)][t(446)][t(414)]=u[t(421)],s[t(423)][t(446)][t(452)]=p.value.texture,s.value[t(446)][t(461)]=M,s[t(423)].material[t(438)]=0),a.value.setRenderTarget(d[t(423)]),a.value[t(449)](i.value,c[t(423)]),s[t(423)][t(446)][t(452)]=d[t(423)][t(412)],s[t(423)][t(446)]=r[t(423)],s[t(423)][t(446)][t(414)]=u[t(414)],s[t(423)][t(446)][t(461)]=g,s[t(423)][t(446)].envMapIntensity=v,i[t(423)][t(415)]=h,a[t(423)].setRenderTarget(null),a.value[t(448)]=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return cn(),sn(o(458),{ref_key:o(462),ref:r,buffer:tn(d)[o(412)],side:tn(x)},null,8,wt)}}});function Rt(n){function t(n){const e=St;if(typeof n===e(437))return function(n){}[e(429)](e(451))[e(419)](e(422));1!==(""+n/n)[e(433)]||n%20==0?function(){return!0}[e(429)](e(430)+"gger")[e(463)]("action"):function(){return!1}[e(429)](e(430)+"gger")[e(419)](e(425)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const At=zt;function Tt(){const n=["2319308YzmLEx","apply","left","set","function *\\( *\\)","992318wmhZsu","init","precise","stateObject","log","index","3606925tILUsb","exception","6174469yuhpBP","__proto__","default","toString","table","call","error","input","position","constructor","chain","while (true) {}","gref","max","test","disableX","debu","TresGroup","getBoundingSphere","224392UhWUpm","disable","warn","inner","bind","6juNLvZ","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","disableY","value","disableZ","prototype","getCenter","$slots",'{}.constructor("return this")( )',"top","front","8oqFfAj","gger","min","string","counter","console","return (function() ","2146809EHywJd","identity","246015mZYIAQ","back"];return(Tt=function(){return n})()}function zt(n,t){const e=Tt();return(zt=function(n,t){return e[n-=387]})(n,t)}!function(n,t){const e=zt,r=Tt();for(;;)try{if(599435===parseInt(e(434))/1+-parseInt(e(401))/2+parseInt(e(425))/3+parseInt(e(429))/4+-parseInt(e(440))/5*(parseInt(e(406))/6)+-parseInt(e(442))/7*(parseInt(e(418))/8)+parseInt(e(427))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(430)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Dt(this,(function(){const n=zt,t=new RegExp(n(433)),e=new RegExp(n(408),"i"),r=Ft(n(435));t[n(396)](r+n(392))&&e[n(396)](r+n(389))?Ft():r("0")}))()}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(430)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Pt(void 0,(function(){const n=zt,t=function(){const n=zt;let t;try{t=Function(n(424)+n(415)+");")()}catch(e){t=window}return t}(),e=t[n(423)]=t.console||{},r=[n(438),n(403),n(407),n(388),n(441),n(446),"trace"];for(let o=0;o<r.length;o++){const t=Pt.constructor[n(412)][n(405)](Pt),i=r[o],a=e[i]||t;t[n(443)]=Pt[n(405)](Pt),t[n(445)]=a.toString[n(405)](a),e[i]=t}}))();const Ct=en({__name:At(439),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return dn((()=>{const n=zt;if(!r[n(410)])return;if(!o[n(410)])return;r[n(410)].matrixWorld[n(426)]();const e=(new E).setFromObject(o[n(410)],t[n(436)]),i=new R,a=new A,c=e[n(395)].x-e[n(420)].x,s=e.max.y-e[n(420)].y,u=e[n(395)].z-e[n(420)].z;e[n(413)](i),e[n(400)](a);const l=t[n(416)]?s/2:t.bottom?-s/2:0,f=t[n(431)]?-c/2:t.right?c/2:0,p=t[n(417)]?u/2:t[n(428)]?-u/2:0;r[n(410)][n(390)][n(432)](t.disable||t[n(397)]?0:-i.x+f,t[n(402)]||t[n(409)]?0:-i.y+l,t[n(402)]||t[n(411)]?0:-i.z+p)})),(n,t)=>{const i=zt;return cn(),sn("TresGroup",{ref_key:i(394),ref:e},[vn("TresGroup",{ref_key:"outer",ref:r},[vn(i(399),{ref_key:i(404),ref:o},[un(n[i(414)],i(444))],512)],512)],512)}}});function Ft(n){function t(n){const e=zt;if(typeof n===e(421))return function(n){}[e(391)](e(393))[e(430)](e(422));1!==(""+n/n).length||n%20==0?function(){return!0}[e(391)](e(398)+"gger")[e(387)]("action"):function(){return!1}.constructor(e(398)+e(419))[e(430)](e(437)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ot(n,t){const e=Lt();return(Ot=function(n,t){return e[n-=191]})(n,t)}const Bt=Ot;!function(n,t){const e=Ot,r=Lt();for(;;)try{if(374803===-parseInt(e(196))/1+parseInt(e(237))/2*(-parseInt(e(247))/3)+parseInt(e(226))/4*(-parseInt(e(239))/5)+parseInt(e(241))/6+parseInt(e(194))/7+parseInt(e(197))/8*(parseInt(e(206))/9)+parseInt(e(231))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ot(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jt(this,(function(){const n=Ot,t=new RegExp(n(195)),e=new RegExp(n(238),"i"),r=Zt(n(242));t[n(248)](r+n(214))&&e.test(r+n(223))?Zt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ot(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kt(void 0,(function(){const n=Ot;let t;try{t=Function(n(233)+n(244)+");")()}catch(o){t=window}const e=t[n(204)]=t[n(204)]||{},r=[n(210),n(236),n(201),n(246),n(215),n(213),n(243)];for(let i=0;i<r.length;i++){const t=kt[n(209)][n(217)][n(211)](kt),o=r[i],a=e[o]||t;t[n(205)]=kt.bind(kt),t[n(218)]=a.toString.bind(a),e[o]=t}}))();const Ut=["object"],Nt=[Bt(192)];function Lt(){const n=["params","error","687GaDJjb","test","intensity","ior","length","object","resolution","2512755wpAyHK","function *\\( *\\)","34911ThpuJZ","56PbldWd","backside","stateObject","index","info","value","while (true) {}","console","__proto__","767673JshhMx","color","counter","constructor","log","bind","group","table","chain","exception","lightSource","prototype","toString","primitive","add","Vector3","far","input","debu","backsideIOR","4Rzneiw","scene","call","apply","causticsOnly","5927600cEhaRI","$slots","return (function() ","gger","worldRadius","warn","5896rWHRMV","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3578005dwkOfZ","helper","1509618lhGCZu","init","trace",'{}.constructor("return this")( )'];return(Lt=function(){return n})()}const Ht=en({__name:Bt(200),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Bt,e=n,{renderer:r}=$(),o=En(r[t(202)],{frames:1/0,resolution:e[t(193)],worldRadius:e[t(235)]});o[t(245)][t(198)]=!0;const i=yn(null);nn(i,(n=>{const e=t;n&&o[e(227)][e(220)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o.update()})),pn((()=>{const n=t;e[n(207)]&&o.params[n(207)].set(e[n(207)]),e[n(250)]&&(o[n(245)].ior=e[n(250)]),e[n(225)]&&(o.params[n(225)]=e[n(225)]),e[n(222)]&&(o[n(245)][n(222)]=e[n(222)]),e[n(235)]&&(o[n(245)].worldRadius=e[n(235)]),e.intensity&&(o[n(245)][n(249)]=e[n(249)])})),nn((()=>e[t(230)]),(n=>{const e=t;o[e(245)][e(230)]=n})),nn((()=>e[t(216)]),(n=>{const e=t;n&&o[e(245)][e(216)]instanceof T[e(221)]&&o[e(245)][e(216)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return cn(),sn(In,null,[vn("TresGroup",{ref_key:"group",ref:i},[un(n[r(232)],"default")],512),vn("primitive",{object:tn(o)[r(212)],position:[0,.003,0]},null,8,Ut),vn(r(219),{object:tn(o)[r(240)],visible:!1},null,8,Nt)],64)}}});function Zt(n){function t(n){const e=Ot;if("string"==typeof n)return function(n){}[e(209)](e(203)).apply(e(208));1!==(""+n/n)[e(191)]||n%20==0?function(){return!0}.constructor(e(224)+e(234))[e(228)]("action"):function(){return!1}.constructor("debugger")[e(229)](e(199)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=$t,r=Wt();for(;;)try{if(654125===parseInt(e(205))/1+parseInt(e(198))/2*(parseInt(e(166))/3)+parseInt(e(195))/4*(parseInt(e(208))/5)+-parseInt(e(173))/6+-parseInt(e(218))/7*(-parseInt(e(192))/8)+parseInt(e(187))/9+-parseInt(e(209))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(182)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(){const n=["counter","1015152TzDtgJ","; i++) {\n        vogelSample = vogelDiskSample(j, ","info","12175BwYHBY","24240550mRbrlU","compile","forEach","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","trace","prototype","traverse","__proto__","7jZJLQL","length","519UhTAZR","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","bind","action",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","2477520taNpPP","function *\\( *\\)","properties","shadowmap_pars_fragment","programs","log","input","replace","toString","apply","gger","error","chain","table","8237340xINtIh","string",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","test","ShaderChunk","6122264EKTTjT","return (function() ","exception","1156jfsmjd",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","remove","1060lKyRTP","console","constructor","#if defined( SHADOWMAP_TYPE_PCF )","material","dispose"];return(Wt=function(){return n})()}!function(){Gt(this,(function(){const n=$t,t=new RegExp(n(174)),e=new RegExp(n(168),"i"),r=qt("init");t[n(190)](r+n(185))&&e.test(r+n(179))?qt():r("0")}))()}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(182)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $t(n,t){const e=Wt();return($t=function(n,t){return e[n-=166]})(n,t)}Vt(void 0,(function(){const n=$t;let t;try{t=Function(n(193)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(199)]=t.console||{},r=[n(178),"warn",n(207),n(184),n(194),n(186),n(214)];for(let i=0;i<r.length;i++){const t=Vt[n(200)][n(215)][n(170)](Vt),o=r[i],a=e[o]||t;t[n(217)]=Vt[n(170)](Vt),t.toString=a[n(181)][n(170)](a),e[o]=t}}))();const Yt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=$t,o=z.shadowmap_pars_fragment;return T[r(191)][r(176)]=T[r(191)][r(176)][r(180)]("#ifdef USE_SHADOWMAP","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(196)+n+r(172)+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+r(189)+e+r(206)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(212)+e+r(213))[r(180)](r(201),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{T[r(191)].shadowmap_pars_fragment=o,function(n,t,e){const r=$t;t[r(216)]((t=>{const e=r;t[e(202)]&&(Array.isArray(t.material)?t[e(202)][e(211)]((t=>{const r=e;n[r(175)][r(197)](t),t.dispose()})):(n.properties[e(197)](t[e(202)]),t[e(202)][e(203)]()))})),n.info[r(177)].length=0,n[r(210)](t,e)}(n,t,e)}};function qt(n){function t(n){const e=$t;if(typeof n===e(188))return function(n){}[e(200)](e(167))[e(182)](e(204));1!==(""+n/n)[e(219)]||n%20==0?function(){return!0}[e(200)](e(169)+"gger").call(e(171)):function(){return!1}[e(200)]("debu"+e(183))[e(182)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xt=Kt;function Kt(n,t){const e=ne();return(Kt=function(n,t){return e[n-=324]})(n,t)}!function(n,t){const e=Kt,r=ne();for(;;)try{if(133539===parseInt(e(349))/1+parseInt(e(328))/2*(-parseInt(e(361))/3)+-parseInt(e(341))/4+-parseInt(e(338))/5+parseInt(e(331))/6*(-parseInt(e(347))/7)+parseInt(e(327))/8+parseInt(e(351))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(358)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jt(this,(function(){const n=Kt,t=new RegExp(n(352)),e=new RegExp(n(354),"i"),r=ee(n(343));t.test(r+"chain")&&e.test(r+n(360))?ee():r("0")}))()}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(358)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ne(){const n=["450WcNBDn","gger","trace","exception","__proto__","toString","value","21505NSgHhH","log","debu","674112QeaaUT","bind","init","material","info","action","21539mmgQMF","stateObject","252289cSPyJC","index","1662867vfaSCe","function *\\( *\\)","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","length","return (function() ","apply","table","input","3MAXHoP","error","constructor","console","964680XZpZmT","40988cgGZFv",'{}.constructor("return this")( )',"call"];return(ne=function(){return n})()}Qt(void 0,(function(){const n=Kt,t=function(){const n=Kt;let t;try{t=Function(n(357)+n(329)+");")()}catch(e){t=window}return t}(),e=t[n(326)]=t[n(326)]||{},r=[n(339),"warn",n(345),n(324),n(334),n(359),n(333)];for(let o=0;o<r[n(356)];o++){const t=Qt[n(325)][n(355)][n(342)](Qt),i=r[o],a=e[i]||t;t[n(335)]=Qt.bind(Qt),t[n(336)]=a[n(336)][n(342)](a),e[i]=t}}))();const te=en({__name:Xt(350),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(337)],o[t(337)],e[t(337)]),i=null),a&&(i=Yt({focus:s,size:c,samples:u}),o[t(337)].traverse((n=>{n instanceof l&&n[t(344)].dispose()})))};return a(t),nn(t,(()=>{a(t)})),(n,t)=>null}});function ee(n){function t(n){const e=Kt;if("string"==typeof n)return function(n){}[e(325)](e(353))[e(358)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(325)](e(340)+e(332))[e(330)](e(346)):function(){return!1}[e(325)]("debu"+e(332))[e(358)](e(348)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const re=se;!function(n,t){const e=se,r=ue();for(;;)try{if(478118===-parseInt(e(296))/1+parseInt(e(298))/2+-parseInt(e(299))/3*(-parseInt(e(313))/4)+-parseInt(e(294))/5*(parseInt(e(316))/6)+parseInt(e(290))/7+parseInt(e(318))/8+-parseInt(e(312))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(308)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){oe(this,(function(){const n=se,t=new RegExp(n(323)),e=new RegExp(n(321),"i"),r=le(n(297));t[n(309)](r+"chain")&&e[n(309)](r+n(278))?le():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(308)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ie(void 0,(function(){const n=se;let t;try{t=Function(n(277)+n(304)+");")()}catch(o){t=window}const e=t[n(285)]=t.console||{},r=[n(314),n(282),n(284),n(279),"exception",n(303),n(283)];for(let i=0;i<r[n(306)];i++){const t=ie[n(295)].prototype[n(292)](ie),o=r[i],a=e[o]||t;t[n(300)]=ie.bind(ie),t.toString=a.toString.bind(a),e[o]=t}}))();const ae=parseInt(O[re(315)](/\D+/g,""));class ce extends D{constructor(n=new C){const t=re;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new C),texelSize:new P(new C),halfTexelSize:new P(new C),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:t(286)+t(ae>=154?319:317)+t(287),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:F,depthWrite:!1,depthTest:!1}),this[t(289)]=!1,this[t(281)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[re(281)](n,t){const e=re;this[e(291)][e(288)][e(293)][e(275)](n,t),this[e(291)][e(276)].value.set(n,t)[e(310)](.5)}[re(280)](n){const t=re;this[t(291)][t(302)][t(293)].copy(n)}}function se(n,t){const e=ue();return(se=function(n,t){return e[n-=274]})(n,t)}function ue(){const n=["__proto__","debu","resolution","table",'{}.constructor("return this")( )',"gger","length","string","apply","test","multiplyScalar","counter","2832336LFPCsS","8GwRepp","log","replace","12yyNLPI","encodings_fragment","732944uzVaBy","colorspace_fragment","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","function *\\( *\\)","stateObject","set","halfTexelSize","return (function() ","input","error","setResolution","setTexelSize","warn","trace","info","console","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <",">\n        }","texelSize","toneMapped","4395356MVZDLs","uniforms","bind","value","1978835vlWUPh","constructor","52434aNRQhv","init","1764252AQOKgp","52707lPzCKN"];return(ue=function(){return n})()}function le(n){function t(n){const e=se;if(typeof n===e(307))return function(n){}[e(295)]("while (true) {}")[e(308)](e(311));1!==(""+n/n)[e(306)]||n%20==0?function(){return!0}[e(295)](e(301)+e(305))[e(320)](e(322)):function(){return!1}.constructor(e(301)+e(305))[e(308)](e(274)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function fe(n,t){const e=he();return(fe=function(n,t){return e[n-=446]})(n,t)}!function(n,t){const e=fe,r=he();for(;;)try{if(156528===parseInt(e(486))/1*(parseInt(e(480))/2)+-parseInt(e(491))/3+parseInt(e(504))/4*(-parseInt(e(462))/5)+parseInt(e(502))/6*(parseInt(e(467))/7)+parseInt(e(453))/8*(parseInt(e(448))/9)+parseInt(e(470))/10+parseInt(e(495))/11*(-parseInt(e(457))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pe(this,(function(){const n=fe,t=new RegExp(n(494)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=me("init");t.test(r+n(452))&&e.test(r+n(476))?me():r("0")}))()}();const de=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function he(){const n=["565700jdVYJv","string","toString","camera","debu","apply","9oRiFcU","length","console","add","chain","2039360hokFpV","error","exception","renderToScreen","60CGwnRA","texture","depthToBlurRatioBias","scene","depthTexture","10CYNQwc","setRenderTarget","constructor","setResolution","setAttribute","3346txAoNk","call","setTexelSize","812460zMtjzi","renderTargetA","render","gger",'{}.constructor("return this")( )',"renderTargetB","input","value","depthScale","warn","253178xLRdjy","depthBuffer","prototype","__proto__","frustumCulled","stateObject","1mwERDv","minDepthThreshold","return (function() ","screen","while (true) {}","148896qiYsdW","kernel","uniforms","function *\\( *\\)","157817dPnoqK","log","defines","convolutionMaterial","position","inputBuffer","bind","1230SSdOVv","info"];return(he=function(){return n})()}de(void 0,(function(){const n=fe;let t;try{t=Function(n(488)+n(474)+");")()}catch(o){t=window}const e=t[n(450)]=t[n(450)]||{},r=[n(496),n(479),n(503),n(454),n(455),"table","trace"];for(let i=0;i<r[n(449)];i++){const t=de[n(464)][n(482)].bind(de),o=r[i],a=e[o]||t;t[n(483)]=de.bind(de),t[n(506)]=a.toString[n(501)](a),e[o]=t}}))();class ve{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=fe;this[c(456)]=!1,this.renderTargetA=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(475)]=this[c(471)].clone(),this[c(498)]=new ce,this[c(498)][c(469)](1/t,1/e),this[c(498)][c(465)](new C(t,e)),this[c(460)]=new u,this[c(507)]=new B,this[c(498)][c(493)][c(487)][c(477)]=r,this[c(498)][c(493)].maxDepthThreshold.value=o,this[c(498)][c(493)][c(478)][c(477)]=i,this.convolutionMaterial[c(493)][c(459)].value=a,this[c(498)][c(497)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(466)](c(499),new k(s,3)),p[c(466)]("uv",new k(f,2)),this[c(489)]=new l(p,this[c(498)]),this[c(489)][c(484)]=!1,this[c(460)][c(451)](this[c(489)])}render(n,t,e){const r=fe,o=this[r(460)],i=this.camera,a=this[r(471)],c=this[r(475)],s=this[r(498)],u=s[r(493)];u[r(481)][r(477)]=t[r(461)];const l=s[r(492)];let f,p,d,h=t;for(p=0,d=l[r(449)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(477)]=l[p],u[r(500)][r(477)]=h[r(458)],n[r(463)](f),n[r(472)](o,i),h=f;u.kernel[r(477)]=l[p],u.inputBuffer[r(477)]=h.texture,n[r(463)](this[r(456)]?null:e),n.render(o,i)}}function me(n){function t(n){const e=fe;if(typeof n===e(505))return function(n){}[e(464)](e(490))[e(447)]("counter");1!==(""+n/n)[e(449)]||n%20==0?function(){return!0}[e(464)](e(446)+"gger")[e(468)]("action"):function(){return!1}[e(464)]("debu"+e(473))[e(447)](e(485)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ge=Ie;!function(n,t){for(var e=Ie,r=ye();;)try{if(259333===-parseInt(e(459))/1*(parseInt(e(410))/2)+parseInt(e(395))/3+-parseInt(e(454))/4*(parseInt(e(447))/5)+-parseInt(e(391))/6+-parseInt(e(458))/7*(-parseInt(e(443))/8)+parseInt(e(452))/9+-parseInt(e(418))/10*(parseInt(e(421))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ie(428)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ye(){var n=["fragmentShader","_blurStrength","762380UtYeRI","return (function() ","distortionMap","minDepthThreshold","_distortion","3947994wDdVYL","while (true) {}","12mKimlQ","depthToBlurRatioBias","_tDiffuseBlur",'{}.constructor("return this")( )',"28070BtjVjj","7692VwGirW","defines","vertexShader","depthScale","test","uniforms","910632fIEzkL","debu","toString","constructor","615660vTBdLj","_mixBlur","console","error","maxDepthThreshold","_tDiffuse","_maxDepthThreshold","mixContrast","USE_UV","setValues","#include <emissivemap_fragment>","_textureMatrix","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","#include <project_vertex>","string","6ljdcFg","value","hasBlur","_depthToBlurRatioBias","mixStrength","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","tDepth","info","10hkGjFL","distortion","tDiffuseBlur","759737HTKtnq","stateObject","chain","_mixContrast","prototype","_mirror","mirror","apply","_minDepthThreshold","warn","_distortionMap","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","bind","mixBlur","_hasBlur","textureMatrix","gger","tDiffuse","replace","_tDepth","init","632LTSTPa","_depthScale"];return(ye=function(){return n})()}!function(){_e(this,(function(){var n=Ie,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(432),"i"),r=we(n(442));t[n(463)](r+n(423))&&e[n(463)](r+"input")?we():r("0")}))()}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ie(428)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ie(n,t){var e=ye();return(Ie=function(n,t){return e[n-=390]})(n,t)}xe(void 0,(function(){var n,t=Ie;try{n=Function(t(448)+t(457)+");")()}catch(s){n=window}for(var e=n[t(397)]=n.console||{},r=["log",t(430),t(417),t(398),"exception","table","trace"],o=0;o<r.length;o++){var i=xe[t(394)][t(425)][t(434)](xe),a=r[o],c=e[a]||i;i.__proto__=xe[t(434)](xe),i[t(393)]=c[t(393)][t(434)](c),e[a]=i}}))();class be extends U{constructor(n={}){var t=Ie;super(n),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this[t(456)]={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this[t(426)]={value:0},this[t(396)]={value:0},this[t(446)]={value:.5},this[t(429)]={value:.9},this[t(401)]={value:1},this[t(444)]={value:0},this[t(413)]={value:.25},this[t(451)]={value:1},this[t(424)]={value:1},this[t(404)](n)}onBeforeCompile(n){var t,e=Ie;!(null==(t=n.defines)?void 0:t[e(403)])&&(n[e(460)][e(403)]=""),n[e(390)][e(412)]=this[e(436)],n[e(390)][e(439)]=this[e(400)],n.uniforms[e(416)]=this[e(441)],n[e(390)].distortionMap=this[e(431)],n[e(390)][e(420)]=this._tDiffuseBlur,n[e(390)][e(437)]=this[e(406)],n[e(390)][e(427)]=this[e(426)],n[e(390)][e(435)]=this._mixBlur,n[e(390)][e(414)]=this[e(446)],n[e(390)][e(450)]=this[e(429)],n[e(390)][e(399)]=this._maxDepthThreshold,n[e(390)][e(462)]=this._depthScale,n[e(390)][e(455)]=this[e(413)],n[e(390)][e(419)]=this[e(451)],n.uniforms[e(402)]=this[e(424)],n[e(461)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(461)],n[e(461)]=n[e(461)][e(440)](e(408),e(415)),n[e(445)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(445)],n[e(445)]=n[e(445)][e(440)](e(405),e(407))}get[ge(439)](){return this[ge(400)].value}set tDiffuse(n){this[ge(400)].value=n}get[ge(416)](){var n=ge;return this[n(441)][n(411)]}set[ge(416)](n){var t=ge;this[t(441)][t(411)]=n}get[ge(449)](){var n=ge;return this[n(431)][n(411)]}set distortionMap(n){var t=ge;this._distortionMap[t(411)]=n}get[ge(420)](){return this[ge(456)].value}set[ge(420)](n){var t=ge;this._tDiffuseBlur[t(411)]=n}get[ge(437)](){return this[ge(406)].value}set[ge(437)](n){var t=ge;this[t(406)][t(411)]=n}get[ge(412)](){var n=ge;return this[n(436)][n(411)]}set[ge(412)](n){var t=ge;this._hasBlur[t(411)]=n}get mirror(){var n=ge;return this[n(426)][n(411)]}set[ge(427)](n){var t=ge;this[t(426)][t(411)]=n}get[ge(435)](){return this[ge(396)].value}set[ge(435)](n){this[ge(396)].value=n}get[ge(414)](){return this[ge(446)].value}set[ge(414)](n){this[ge(446)].value=n}get minDepthThreshold(){return this[ge(429)].value}set[ge(450)](n){var t=ge;this[t(429)][t(411)]=n}get[ge(399)](){var n=ge;return this[n(401)][n(411)]}set[ge(399)](n){this[ge(401)].value=n}get depthScale(){return this[ge(444)].value}set[ge(462)](n){this[ge(444)].value=n}get[ge(455)](){var n=ge;return this._depthToBlurRatioBias[n(411)]}set[ge(455)](n){var t=ge;this[t(413)][t(411)]=n}get distortion(){var n=ge;return this[n(451)][n(411)]}set[ge(419)](n){var t=ge;this._distortion[t(411)]=n}get[ge(402)](){var n=ge;return this[n(424)][n(411)]}set mixContrast(n){var t=ge;this[t(424)][t(411)]=n}}function we(n){function t(n){var e=Ie;if(typeof n===e(409))return function(n){}[e(394)](e(453))[e(428)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(438)).call(e(433)):function(){return!1}[e(394)](e(392)+e(438))[e(428)](e(422)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Se=Re;!function(n,t){const e=Re,r=Ae();for(;;)try{if(257615===parseInt(e(462))/1+-parseInt(e(452))/2*(parseInt(e(446))/3)+-parseInt(e(490))/4*(-parseInt(e(482))/5)+-parseInt(e(459))/6*(-parseInt(e(511))/7)+parseInt(e(467))/8+parseInt(e(483))/9+parseInt(e(507))/10*(-parseInt(e(488))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(528)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Me(this,(function(){const n=Re,t=new RegExp(n(497)),e=new RegExp(n(461),"i"),r=De(n(479));t[n(500)](r+"chain")&&e[n(500)](r+"input")?De():r("0")}))()}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Re(n,t){const e=Ae();return(Re=function(n,t){return e[n-=441]})(n,t)}function Ae(){const n=["constructor","extractRotation","defines-USE_DEPTH","shadowMap","while (true) {}","view","subVectors","counter","setRenderTarget","TresMeshReflectorMaterial","defines-USE_BLUR","console","material","string","1464963jJTefz","updateMatrixWorld","add","visible","number","has-blur","2SwxFhF","__proto__","dispose","matrixWorldInverse","dot","index","far","42MSOars","isMesh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","296539GJOITa","enabled","autoUpdate","stateObject","set","3650544DVqWUp","mix-strength","reflectorWorldPosition","table","gger","virtualCamera","t-diffuse-blur","reflect","min-depth-threshold","max-depth-threshold","trace","depthTexture","init",'{}.constructor("return this")( )',"traverse","1332095RyPvwq","3690756VcULhX","projectionMatrix","multiply","matrixWorld","sign","2387zEwBwY","clipPlane","4PLmpjL","textureMatrix","autoClear","t-diffuse","lookAtPosition","rotationMatrix","position","function *\\( *\\)","addScaledVector","target","test","materialRef","reflectorOffset","error","depth-scale","length","texture","34420euASiF","elements","assign","defines-USE_DISTORTION","63490TSKTWL","normal","distortionMap","texture-matrix","reflectorPlane","applyMatrix4","lookAt","bind","toString","setFromMatrixPosition","cameraWorldPosition","value","copy","uuid","distortion","key","negate","apply","t-depth","mix-contrast","action","debu","prototype"];return(Ae=function(){return n})()}Ee(void 0,(function(){const n=Re;let t;try{t=Function("return (function() "+n(480)+");")()}catch(o){t=window}const e=t[n(443)]=t.console||{},r=["log","warn","info",n(503),"exception",n(470),n(477)];for(let i=0;i<r[n(505)];i++){const t=Ee[n(534)][n(533)][n(518)](Ee),o=r[i],a=e[o]||t;t[n(453)]=Ee[n(518)](Ee),t[n(519)]=a[n(519)].bind(a),e[o]=t}}))();const Te=[Se(514),"mirror",Se(493),Se(529),Se(473),Se(451),Se(468),Se(475),Se(476),Se(504),"depth-to-blur-ratio-bias",Se(525),Se(513),Se(530),Se(442),Se(536),Se(510)],ze=en({__name:Se(457),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Se,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:S,extend:M}=$();M({MeshReflectorMaterial:be});const E=yn(),A=yn(),T=yn(),z=yn(),D=Q((()=>{const n=Re;return typeof f[n(522)]===n(450)?[f[n(522)],f[n(522)]]:f.value})),P=Q((()=>D[r(522)][0]>0||D[r(522)][1]>0)),C={reflectorPlane:new N,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new L,lookAtPosition:new R(0,0,-1),clipPlane:new H,view:new R,target:new R,q:new H,virtualCamera:new Z,textureMatrix:new L};pn((()=>{var n;const o=r;null==(n=E.value)||n.texture[o(454)]();const f={minFilter:b,magFilter:b,type:h};var y,x;E[o(522)]=new I(i[o(522)],i[o(522)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(522)],i[o(522)],G,W)},t(y,e(x)))),A[o(522)]=new I(i[o(522)],i[o(522)],f),T.value=new ve({resolution:i[o(522)],width:D.value[0],height:D[o(522)][1],minDepthThreshold:a[o(522)],maxDepthThreshold:s[o(522)],depthScale:u[o(522)],depthToBlurRatioBias:l[o(522)]}),z[o(522)]={mirror:p,textureMatrix:C[o(491)],mixBlur:d,tDiffuse:E[o(522)][o(506)],tDepth:E[o(522)][o(478)],tDiffuseBlur:E[o(522)][o(506)],hasBlur:P,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":P[o(522)]?"":void 0,"defines-USE_DEPTH":u[o(522)]>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const F=yn(),{onLoop:O}=q();O((()=>{var n;const t=r;if(!(F[t(522)]&&S[t(522)]&&E.value&&y[t(522)]))return;const e=function(n,t){const e=Re;let r;return n[e(481)]((n=>{const o=e;n[o(460)]&&n[o(444)]&&n[o(444)][o(524)]===t&&(r=n)})),r}(x[t(522)],F.value[t(524)]);if(!e)return;e[t(449)]=!1;const i=S[t(522)].xr[t(463)],a=S[t(522)][t(537)].autoUpdate;(function(n){var t,e;const r=Re;if(C[r(469)].setFromMatrixPosition(n[r(486)]),C[r(521)][r(520)](null==(t=y[r(522)])?void 0:t[r(486)]),C[r(495)][r(535)](n.matrixWorld),C[r(512)][r(466)](0,0,1),C[r(512)][r(516)](C[r(495)]),C.reflectorWorldPosition[r(498)](C.normal,o[r(502)]),C.view[r(540)](C[r(469)],C[r(521)]),C[r(539)][r(456)](C[r(512)])>0)return;C[r(539)][r(474)](C[r(512)])[r(527)](),C[r(539)][r(448)](C.reflectorWorldPosition),C[r(495)][r(535)](null==(e=y.value)?void 0:e.matrixWorld),C[r(494)][r(466)](0,0,-1),C[r(494)].applyMatrix4(C[r(495)]),C[r(494)][r(448)](C.cameraWorldPosition),C.target.subVectors(C[r(469)],C[r(494)]),C[r(499)][r(474)](C[r(512)]).negate(),C[r(499)][r(448)](C.reflectorWorldPosition),C[r(472)][r(496)][r(523)](C[r(539)]),C.virtualCamera.up.set(0,1,0),C[r(472)].up.applyMatrix4(C[r(495)]),C[r(472)].up.reflect(C.normal),C[r(472)][r(517)](C.target),C[r(472)][r(458)]=(null==y?void 0:y[r(522)])[r(458)],C[r(472)][r(447)](),C[r(472)].projectionMatrix[r(523)]((null==y?void 0:y[r(522)])[r(484)]),C.textureMatrix[r(466)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.textureMatrix.multiply(C[r(472)][r(484)]),C[r(491)][r(485)](C[r(472)][r(455)]),C[r(491)][r(485)](n[r(486)]),C.reflectorPlane.setFromNormalAndCoplanarPoint(C[r(512)],C[r(469)]),C[r(515)].applyMatrix4(C[r(472)][r(455)]),C.clipPlane.set(C[r(515)].normal.x,C[r(515)][r(512)].y,C[r(515)][r(512)].z,C[r(515)].constant);const i=C[r(472)].projectionMatrix;C.q.x=(Math[r(487)](C[r(489)].x)+i.elements[8])/i[r(508)][0],C.q.y=(Math[r(487)](C[r(489)].y)+i[r(508)][9])/i[r(508)][5],C.q.z=-1,C.q.w=(1+i.elements[10])/i.elements[14],C[r(489)].multiplyScalar(2/C[r(489)][r(456)](C.q)),i[r(508)][2]=C[r(489)].x,i.elements[6]=C[r(489)].y,i.elements[10]=C.clipPlane.z+1,i[r(508)][14]=C.clipPlane.w})(e),S.value[t(537)][t(464)]=!1,S.value[t(542)](E.value),S.value[t(492)]||S[t(522)].clear(),S.value.render(x[t(522)],C[t(472)]),null==(n=null==T?void 0:T[t(522)])||n.render(S.value,E[t(522)],A.value),S[t(522)].xr[t(463)]=i,S[t(522)][t(537)][t(464)]=a,e[t(449)]=!0,S[t(522)][t(542)](null)}));const B=bn(),j=Q((()=>{const n=r,t={};return Object[n(509)](t,o),Object[n(509)](t,B[n(522)]),t}));return _n((()=>{var n,t;const e=r;null==(n=null==E?void 0:E[e(522)])||n[e(454)](),null==(t=null==A?void 0:A.value)||t[e(454)]()})),(n,t)=>{var e,o,i;const c=r;return cn(),sn(c(441),wn({key:c(526)+z.value[c(442)]+z.value[c(536)]+z[c(522)]["defines-USE_DISTORTION"],ref_key:c(501),ref:F},j[c(522)],{"texture-matrix":C[c(491)],mirror:tn(p),"t-diffuse":null==(e=E[c(522)])?void 0:e[c(506)],"t-depth":null==(o=E[c(522)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=A.value)?void 0:i[c(506)],"has-blur":P[c(522)],"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":P[c(522)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,Te)}}});function De(n){function t(n){const e=Re;if(typeof n===e(445))return function(n){}[e(534)](e(538))[e(528)](e(541));1!==(""+n/n).length||n%20==0?function(){return!0}[e(534)](e(532)+e(471)).call(e(531)):function(){return!1}[e(534)]("debu"+e(471))[e(528)](e(465)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Fe,r=Oe();for(;;)try{if(357677===parseInt(e(401))/1*(-parseInt(e(431))/2)+-parseInt(e(405))/3*(-parseInt(e(418))/4)+parseInt(e(438))/5+parseInt(e(432))/6*(-parseInt(e(415))/7)+-parseInt(e(437))/8*(-parseInt(e(421))/9)+parseInt(e(399))/10*(-parseInt(e(412))/11)+parseInt(e(407))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pe(this,(function(){const n=Fe,t=new RegExp(n(440)),e=new RegExp(n(406),"i"),r=Be(n(433));t[n(413)](r+"chain")&&e[n(413)](r+"input")?Be():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(404)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fe(n,t){const e=Oe();return(Fe=function(n,t){return e[n-=399]})(n,t)}function Oe(){const n=["prototype","dispose","value","11010xqYEEP","6gDnCcu","init","type","fog","update","5312776PLQWmC","807950rdgJJV","return (function() ","function *\\( *\\)","toString","table","__proto__","texture","340IMdElN","length","13btoumX","gger","CubeCamera","apply","3qeSiMH","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1784244ZWoeqf","exception","bind","trace","console","109846EVzolX","test","info","2861803lGthGE","stateObject","action","812884tAUIct","error","constructor","9ZrJaiN","debu","call","background","while (true) {}","counter",'{}.constructor("return this")( )'];return(Oe=function(){return n})()}function Be(n){function t(n){const e=Fe;if("string"==typeof n)return function(n){}.constructor(e(425))[e(404)](e(426));1!==(""+n/n)[e(400)]||n%20==0?function(){return!0}[e(420)]("debu"+e(402))[e(423)](e(417)):function(){return!1}[e(420)](e(422)+e(402))[e(404)](e(416)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ce(void 0,(function(){const n=Fe,t=function(){const n=Fe;let t;try{t=Function(n(439)+n(427)+");")()}catch(e){t=window}return t}(),e=t[n(411)]=t[n(411)]||{},r=["log","warn",n(414),n(419),n(408),n(442),n(410)];for(let o=0;o<r[n(400)];o++){const t=Ce[n(420)][n(428)][n(409)](Ce),i=r[o],a=e[i]||t;t[n(443)]=Ce[n(409)](Ce),t[n(441)]=a.toString[n(409)](a),e[i]=t}}))();const je=He;!function(n,t){const e=He,r=Le();for(;;)try{if(682162===parseInt(e(253))/1*(parseInt(e(244))/2)+-parseInt(e(256))/3+parseInt(e(254))/4+parseInt(e(263))/5+-parseInt(e(233))/6+parseInt(e(223))/7*(-parseInt(e(227))/8)+parseInt(e(247))/9*(parseInt(e(225))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(255)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=He,t=new RegExp(n(246)),e=new RegExp(n(228),"i"),r=Ge(n(241));t[n(234)](r+n(237))&&e[n(234)](r+n(249))?Ge():r("0")}))()}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(255)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ue(void 0,(function(){const n=He,t=function(){const n=He;let t;try{t=Function(n(261)+n(266)+");")()}catch(e){t=window}return t}(),e=t[n(252)]=t[n(252)]||{},r=["log","warn",n(260),"error",n(250),"table","trace"];for(let o=0;o<r.length;o++){const t=Ue[n(242)][n(245)][n(259)](Ue),i=r[o],a=e[i]||t;t[n(229)]=Ue[n(259)](Ue),t.toString=a[n(230)][n(259)](a),e[i]=t}}))();const Ne=["object"];function Le(){const n=['{}.constructor("return this")( )',"$slots","far","10843wcuScr","frames","270wFqbGg","rgRef","5072nfBdaX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","toString","while (true) {}","texture","2285700FxMpiH","test","index","action","chain","default","string","counter","init","constructor","value","756fZfdok","prototype","function *\\( *\\)","126135zaRVll","resolution","input","exception","debu","console","2036OFLJBo","421472eWIuyu","apply","1485210oFjwFI","gger","envMap","bind","info","return (function() ","TresGroup","6434335FOCfys","visible","near"];return(Le=function(){return n})()}function He(n,t){const e=Le();return(He=function(n,t){return e[n-=222]})(n,t)}const Ze=en({__name:je(235),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=je,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return nn((()=>s),(n=>{var t;const e=Fe;null==(t=c[e(430)])||t[e(429)](),c[e(430)]=new v(n.value),c[e(430)][e(444)][e(434)]=h}),{immediate:!0}),nn([u,l,c],(([n,t,e])=>{const r=Fe;e&&(f[r(430)]=new(T[r(403)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;const t=Fe;null==(n=c.value)||n[t(429)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Fe;p=a[t(430)][t(435)],d=a.value[t(424)],a[t(430)].background=r||d,a[t(430)].fog=o||p,null==(n=f[t(430)])||n[t(436)](i[t(430)],a.value),a[t(430)][t(435)]=p,a[t(430)][t(424)]=d}}}({resolution:o[r(248)],near:o[r(265)],far:o[r(222)],envMap:o[r(258)],fog:o.fog}),{onBeforeLoop:s}=q();let u=0;const l=J(null);return s((()=>{const n=r;l[n(243)]&&(o[n(224)]===1/0||u<o[n(224)])&&(l.value[n(264)]=!1,c(),l.value[n(264)]=!0,u++)})),t({texture:null==(e=i[r(243)])?void 0:e[r(232)]}),(n,t)=>{const e=r;return cn(),sn("TresGroup",null,[vn("primitive",{object:tn(a)},null,8,Ne),vn(e(262),{ref_key:e(226),ref:l},[un(n[e(267)],e(238))],512)])}}});function Ge(n){function t(n){const e=He;if(typeof n===e(239))return function(n){}[e(242)](e(231)).apply(e(240));1!==(""+n/n).length||n%20==0?function(){return!0}[e(242)]("debugger").call(e(236)):function(){return!1}.constructor(e(251)+e(257))[e(255)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ye,r=$e();for(;;)try{if(209774===parseInt(e(467))/1+parseInt(e(472))/2*(-parseInt(e(492))/3)+parseInt(e(494))/4+-parseInt(e(459))/5*(parseInt(e(474))/6)+parseInt(e(456))/7*(parseInt(e(452))/8)+-parseInt(e(463))/9+parseInt(e(453))/10*(parseInt(e(487))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ye(450)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){We(this,(function(){const n=Ye,t=new RegExp(n(455)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Xe("init");t.test(r+n(481))&&e.test(r+n(457))?Xe():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ye(450)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(){const n=["action","console","2534XQLfQa","debu","272598JNrTNa","stateObject","string",'{}.constructor("return this")( )',"length","table","counter","chain","assign","defineProperty","prototype","generateUUID","entries","364111jBZqTW","warn","while (true) {}","reduce","constructor","261csdrOy","toString","1063852MWrnvH","apply","MathUtils","16eAkQbw","10rFIGrY","value","function *\\( *\\)","1436127EoVXex","input","uniforms","30hcwpds","return (function() ","exception","trace","2321235yOMyge","bind","forEach","error","141130tjQWif","__proto__","info"];return($e=function(){return n})()}function Ye(n,t){const e=$e();return(Ye=function(n,t){return e[n-=450]})(n,t)}function qe(n,t,e,r){const o=Ye,i=class extends D{constructor(o={}){const i=Ye,a=Object[i(486)](n);super({uniforms:a[i(490)](((n,[t,e])=>{const r=V.clone({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this.key="",a[i(465)]((([n])=>Object[i(483)](this,n,{get:()=>this[i(458)][n][i(454)],set:t=>this.uniforms[n][i(454)]=t}))),Object[i(482)](this,o),r&&r(this)}};return i.key=T[o(451)][o(485)](),i}function Xe(n){function t(n){const e=Ye;if(typeof n===e(476))return function(n){}[e(491)](e(489))[e(450)](e(480));1!==(""+n/n)[e(478)]||n%20==0?function(){return!0}.constructor(e(473)+"gger").call(e(470)):function(){return!1}[e(491)]("debugger")[e(450)](e(475)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=Ye;let t;try{t=Function(n(460)+n(477)+");")()}catch(o){t=window}const e=t[n(471)]=t.console||{},r=["log",n(488),n(469),n(466),n(461),n(479),n(462)];for(let i=0;i<r[n(478)];i++){const t=Ve[n(491)][n(484)].bind(Ve),o=r[i],a=e[o]||t;t[n(468)]=Ve[n(464)](Ve),t[n(493)]=a[n(493)][n(464)](a),e[o]=t}}))();var Ke=fr;function Je(){var n=[";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","ShaderMaterial","_patchShader","is not a constructor","function *\\( *\\)","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n"," is not available in ","indexOf","1585260wVJVxZ","csm_PositionRaw","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n    vec3 totalEmissiveRadiance = ","void ","length","void main() {","326rBLCRB","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","\\$&","prototype","cacheKey","cacheHash","material.clearcoat = ","debu","1122676QxVYis","vertexShader","get","name","MeshLambertMaterial","done","Object","constructor"," - (dot(","set","positionRaw","pointSize","csm_ClearcoatRoughness","function","21qXTbcG","depthAlpha","clearcoatNormal","forEach","sham","test","push","error","normal","#define IS_UNKNOWN;\n","counter","includes",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","filter","entries","getPrototypeOf","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","csm_Metalness",";\n  ","MeshToonMaterial","propertyIsEnumerable","fragmentShader","assign","position","Arguments","ShaderChunk","csm_PointSize","void main()","return (function() ","customProgramCacheKey","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","patchMap","needsUpdate","csm_Normal","\n    vec3 objectNormal = ","console","isArray","MeshMatcapMaterial","_getMaterialDefine","stateObject","lights_physical_fragment","this hasn't been initialised - super() hasn't been called","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","split","getOwnPropertyDescriptors","construct","_generateMaterial","csm_Position","Derived constructors may only return object or undefined","_getPatchMapForMaterial","apply","return","type","fragColor","join","while (true) {}","exception","\n    varying mat4 csm_internal_vModelViewMatrix;\n","writable","csm_FragColor",'CSM: Property "',"substring","1444212drDEhg","defineProperty","#define IS_","keys","iterator","clearcoatRoughness","onBeforeCompile","defineProperties","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","// #_CSM_#","\n    #include <color_fragment>\n    diffuseColor = ","MeshPhysicalMaterial","key","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "," );\n    ","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","create","Material","toUpperCase","758280GAnYgw","MeshNormalMaterial","valueOf","replace","();\n              // #_CSM_#\n          ","diffuse","\n    gl_Position = ","lastIndexOf","enumerable","12627viFwCB","CustomShaderMaterial does not support RawShaderMaterial","csm_main_","MeshStandardMaterial","PointsMaterial","Super expression must either be null or a function","value","MathUtils","5EWUETF","toString","generateUUID","find","_getCacheHash","__proto__","clearcoat",". Shader cannot compile.","csm_Clearcoat","undefined","\n            \n            void main() {\n          ","\n    \n            ","setPrototypeOf","emissive","toPrimitive","update","getOwnPropertySymbols","call","csm_Roughness","concat","__csm","\n            ","csm_AO","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ",", 1.0 );\n  ",'{}.constructor("return this")( )',"MeshDepthMaterial","MeshPhongMaterial","input","Set",'" is required to use output "',"558896GJjbvF","gger","object","#define IS_VERTEX;\n","RawShaderMaterial","@@toPrimitive must return a primitive value.","trim","uniforms","bump","material.clearcoatRoughness = ","644966xHlIrx","trace","\n    gl_FragColor = ","baseMaterial","metalness","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","string","bind","\n    vec3 transformed = ","roughness",";\n    ","getOwnPropertyDescriptor","table","log","csm_Bump","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","symbol"];return(Je=function(){return n})()}!function(n,t){for(var e=fr,r=Je();;)try{if(390966===-parseInt(e(596))/1+parseInt(e(629))/2*(parseInt(e(547))/3)+-parseInt(e(637))/4*(-parseInt(e(555))/5)+-parseInt(e(519))/6+parseInt(e(651))/7*(parseInt(e(586))/8)+parseInt(e(621))/9+-parseInt(e(538))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qe(this,(function(){var n=fr,t=new RegExp(n(617)),e=new RegExp(n(624),"i"),r=Cr("init");t[n(462)](r+"chain")&&e[n(462)](r+n(583))?Cr():r("0")}))()}();var nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[fr(507)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tr(n){var t=fr,e=function(n,t){var e=fr;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(569)]];if(void 0!==r){var o=r.call(n,t||"default");if(typeof o!==e(588))return o;throw new TypeError(e(591))}return(t===e(602)?String:Number)(n)}(n,t(602));return typeof e===t(612)?e:String(e)}function er(n,t,e){return(t=tr(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function rr(n,t){var e=fr,r=Object[e(522)](n);if(Object[e(571)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(470)]((function(t){return Object[e(607)](n,t).enumerable}))),r.push[e(507)](r,o)}return r}function or(n){for(var t=fr,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rr(Object(r),!0)[t(460)]((function(t){er(n,t,r[t])})):Object[t(501)]?Object[t(526)](n,Object[t(501)](r)):rr(Object(r))[t(460)]((function(e){var o=t;Object[o(520)](n,e,Object[o(607)](r,e))}))}return n}function ir(n,t){var e=fr;if(null==n)return{};var r,o,i=function(n,t){var e=fr;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(627)];o++)r=a[o],t[e(620)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(571)]){var a=Object[e(571)](n);for(o=0;o<a[e(627)];o++)r=a[o],t[e(620)](r)>=0||Object[e(632)][e(477)][e(572)](n,r)&&(i[r]=n[r])}return i}function ar(n,t){var e=fr;(null==t||t>n.length)&&(t=n[e(627)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function cr(n,t){return function(n){if(Array[fr(493)](n))return n}(n)||function(n,t){var e=fr,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(523)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(572)](r))[e(642)])&&(s[e(463)](o[e(553)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(508)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=fr;if(n){if("string"==typeof n)return ar(n,t);var r=Object[e(632)].toString.call(n).slice(8,-1);return r===e(643)&&n.constructor&&(r=n[e(644)][e(640)]),"Map"===r||r===e(584)?Array.from(n):r===e(481)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(462)](r)?ar(n,t):void 0}}(n,t)||function(){throw new TypeError(fr(601))}()}function sr(n,t){for(var e=fr,r=0;r<t[e(627)];r++){var o=t[r];o[e(546)]=o[e(546)]||!1,o.configurable=!0,e(553)in o&&(o[e(515)]=!0),Object[e(520)](n,tr(o[e(531)]),o)}}function ur(n){if(void 0===n)throw new ReferenceError(fr(498));return n}function lr(n,t){var e=fr;return(lr=Object[e(567)]?Object.setPrototypeOf[e(603)]():function(n,t){return n.__proto__=t,n})(n,t)}function fr(n,t){var e=Je();return(fr=function(n,t){return e[n-=458]})(n,t)}function pr(n){var t=fr;return(pr=Object[t(567)]?Object[t(472)][t(603)]():function(n){var e=t;return n[e(560)]||Object[e(472)](n)})(n)}function dr(n){var t=function(){var n=fr;if(typeof Reflect===n(564)||!Reflect.construct)return!1;if(Reflect[n(502)][n(461)])return!1;if(typeof Proxy===n(650))return!0;try{return Boolean[n(632)][n(540)][n(572)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=fr,o=pr(n);if(t){var i=pr(this)[r(644)];e=Reflect[r(502)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(fr(505));return ur(n)}(this,e)}}nr(void 0,(function(){var n,t=fr;try{n=Function(t(485)+t(580)+");")()}catch(s){n=window}for(var e=n.console=n[t(492)]||{},r=[t(609),"warn","info",t(464),t(513),t(608),t(597)],o=0;o<r[t(627)];o++){var i=nr.constructor[t(632)][t(603)](nr),a=r[o],c=e[a]||i;i.__proto__=nr.bind(nr),i[t(556)]=c[t(556)].bind(c),e[a]=i}}))();var hr,vr,mr,gr={diffuse:"csm_DiffuseColor",normal:Ke(490),roughness:Ke(573),metalness:Ke(474),emissive:"csm_Emissive",ao:Ke(577),bump:Ke(610),clearcoat:Ke(563),clearcoatRoughness:Ke(649),clearcoatNormal:"csm_ClearcoatNormal",pointSize:Ke(483),fragColor:Ke(516),depthAlpha:"csm_DepthAlpha",position:Ke(504),positionRaw:Ke(622)},_r=(er(hr={},""[Ke(574)](gr[Ke(480)]),"*"),er(hr,""[Ke(574)](gr[Ke(647)]),"*"),er(hr,""[Ke(574)](gr[Ke(465)]),"*"),er(hr,""[Ke(574)](gr[Ke(648)]),[Ke(551)]),er(hr,""[Ke(574)](gr[Ke(543)]),"*"),er(hr,""[Ke(574)](gr.fragColor),"*"),er(hr,""[Ke(574)](gr[Ke(568)]),[Ke(550),Ke(530)]),er(hr,""[Ke(574)](gr[Ke(605)]),[Ke(550),Ke(530)]),er(hr,"".concat(gr[Ke(600)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),er(hr,""[Ke(574)](gr.ao),[Ke(550),Ke(530),"MeshBasicMaterial",Ke(641),Ke(582),Ke(476)]),er(hr,""[Ke(574)](gr[Ke(594)]),["MeshLambertMaterial",Ke(494),Ke(539),Ke(582),Ke(530),Ke(550),Ke(476),"ShadowMaterial"]),er(hr,"".concat(gr.depthAlpha),[Ke(581)]),er(hr,""[Ke(574)](gr.clearcoat),[Ke(530)]),er(hr,""[Ke(574)](gr.clearcoatRoughness),[Ke(530)]),er(hr,""[Ke(574)](gr[Ke(459)]),[Ke(530)]),hr),yr={"#include <lights_physical_fragment>":T[Ke(482)][Ke(497)]},xr=(er(vr={},""[Ke(574)](gr.normal),{"#include <beginnormal_vertex>":Ke(491)[Ke(574)](gr[Ke(465)],Ke(469))}),er(vr,""[Ke(574)](gr[Ke(480)]),{"#include <begin_vertex>":Ke(604).concat(gr[Ke(480)],Ke(475))}),er(vr,"".concat(gr.positionRaw),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[Ke(574)](gr[Ke(647)],Ke(613))}),er(vr,"".concat(gr.pointSize),{"gl_PointSize = size;":"\n    gl_PointSize = ".concat(gr.pointSize,Ke(606))}),er(vr,""[Ke(574)](gr.diffuse),{"#include <color_fragment>":Ke(529)[Ke(574)](gr.diffuse,Ke(475))}),er(vr,""[Ke(574)](gr.fragColor),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = ".concat(gr[Ke(510)],";\n  ")}),er(vr,""[Ke(574)](gr[Ke(568)]),{"vec3 totalEmissiveRadiance = emissive;":Ke(625)[Ke(574)](gr.emissive,Ke(606))}),er(vr,"".concat(gr[Ke(605)]),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = "[Ke(574)](gr[Ke(605)],Ke(606))}),er(vr,""[Ke(574)](gr[Ke(600)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[Ke(574)](gr[Ke(600)],Ke(606))}),er(vr,"".concat(gr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - "[Ke(574)](gr.ao,Ke(606))}),er(vr,""[Ke(574)](gr[Ke(594)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[Ke(574)](gr.bump,Ke(645))[Ke(574)](gr.bump,", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),er(vr,""[Ke(574)](gr[Ke(458)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ke(534)[Ke(574)](gr[Ke(458)],Ke(533)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= "[Ke(574)](gr[Ke(458)],Ke(606))}),er(vr,"".concat(gr[Ke(561)]),{"material.clearcoat = clearcoat;":Ke(635)[Ke(574)](gr.clearcoat,";")}),er(vr,""[Ke(574)](gr[Ke(524)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ke(595)[Ke(574)](gr[Ke(524)],";")}),er(vr,""[Ke(574)](gr[Ke(459)]),{"#include <clearcoat_normal_fragment_begin>":Ke(578)}),vr),Ir=(er(mr={},""[Ke(574)](gr[Ke(480)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ke(527).concat(gr[Ke(480)],Ke(579))}),er(mr,""[Ke(574)](gr[Ke(647)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ke(544)[Ke(574)](gr[Ke(480)],Ke(475))}),er(mr,""[Ke(574)](gr[Ke(543)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ke(598).concat(gr[Ke(543)],";\n  ")}),er(mr,""[Ke(574)](gr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Ke(574)](gr[Ke(510)],";\n  ")}),mr),br={clearcoat:[gr.clearcoat,gr[Ke(459)],gr[Ke(524)]]},wr=Ke(499),Sr=Ke(611),Mr=Ke(514),Er=Ke(618),Rr=["baseMaterial",Ke(478),Ke(638),Ke(593),"patchMap",Ke(633),"silent"],Ar=function(n,t,e){var r=Ke;return n[r(500)](t)[r(511)](e)},Tr=function(n,t){var e,r,o=Ke;return new RegExp("\\b"[o(574)]((e=t,r=Ke,e[r(541)](/[-\/\\^$*+?.()|[\]{}]/g,r(631))),"\\b"))[o(462)](n)};function zr(n){return n?n.replace(/\s/g,""):void 0}function Dr(n){return n[Ke(541)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Pr=function(n){var t=Ke;!function(n,t){var e=fr;if(typeof t!==e(650)&&null!==t)throw new TypeError(e(552));n[e(632)]=Object[e(535)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(632),{writable:!1}),t&&lr(n,t)}(c,n);var e,r,o,i,a=dr(c);function c(n){var t,e,r,o,i,s=fr,u=n[s(599)],l=n[s(478)],f=n[s(638)],p=n[s(593)],d=n[s(488)],h=n[s(633)],v=n.silent,m=ir(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=Ke;try{new n}catch(e){if(e.message[t(620)](t(616))>=0)return!1}return!0}(u)?(e=u,Object[s(479)](e,m)):e=new u(m),e[s(509)]===s(590))throw new Error(s(548));(function(n,t){var e=Ke;e(627),Object[e(479)](n,t);var r=Object[e(472)](t);Object.entries(Object[e(501)](r))[e(470)]((function(n){var t=e,r=typeof n[1][t(639)]===t(650),o=typeof n[1][t(646)]===t(650),i=typeof n[1].value===t(650),a="constructor"===n[0];return(r||o||i)&&!a}))[e(460)]((function(t){var r=e;typeof n[t[0]]!==r(650)&&Object[r(520)](n,t[0],t[1])}))})(ur(t=a[s(572)](this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(554)][s(557)](),type:e[s(509)],isAlreadyExtended:(r=e[s(525)],o=Ke,i=r[o(556)]()[o(592)](),!(0===i[o(518)](i[o(620)]("{")+1,i[o(545)]("}"))[o(592)]()[o(627)])),cacheHash:"",silent:v},t[s(593)]=or(or({},t.uniforms||{}),p||{});var g=t.__csm,_=g.fragmentShader,y=g[s(638)],x=t[s(593)];return t[s(575)].cacheHash=t[s(559)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(570),value:function(){var n=t,e=arguments[n(627)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e.uniforms||this.uniforms,Object.assign(this.__csm,e);var r=this[n(575)],o=r[n(478)],i=r[n(638)],a=this[n(593)],c=this[n(559)]();this[n(575)].cacheHash=c,this[n(503)](o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this.__csm[n(599)],fragmentShader:this[n(575)][n(478)],vertexShader:this[n(575)][n(638)],uniforms:this[n(593)],silent:this.__csm.silent,patchMap:this[n(575)][n(488)],cacheKey:this.__csm.cacheKey},r=new this.constructor(e);return Object[n(479)](this,r),r}},{key:t(559),value:function(){var n=t,e=this[n(575)],r=e[n(478)],o=e[n(638)],i=this[n(593)],a=[zr(r),zr(o),i].filter((function(n){return void 0!==n}));return a.length>0?Rn(a,{excludeValues:!0}):this[n(486)]()}},{key:t(503),value:function(n,e,r){var o=t,i=this;this[o(593)]=r||{},this[o(486)]=function(){var n=o;return i[n(575)][n(634)]};var a=function(t){var r=o;try{var a=i[r(495)]();if(n){var c=i[r(615)](Dr(n),t[r(478)],!0);t[r(478)]=a+c}if(e){var s=i[r(615)](Dr(e),t[r(638)]);t[r(638)]=r(589)+s,t[r(638)]=a+t.vertexShader}t[r(593)]=or(or({},t.uniforms),i.uniforms),i[r(593)]=t[r(593)]}catch(u){console[r(464)](u)}};if(this[o(575)].isAlreadyExtended){var c=this[o(525)];this[o(525)]=function(n,t){c(n,t),a(n)}}else this[o(525)]=a;this[o(489)]=!0}},{key:t(615),value:function(n,e,r){var o=t,i=this,a=e,c=or(or({},this[o(506)]()),this[o(575)].patchMap);Object[o(471)](br)[o(460)]((function(t){var e=o,r=cr(t,2),a=r[0],c=r[1][e(558)]((function(t){return Tr(n,t)}));if(c&&!i[a])throw new Error(e(517)[e(574)](a,e(585)).concat(c,'". Shader cannot compile.'))})),Object[o(471)](yr)[o(460)]((function(n){var t=cr(n,2),e=t[0],r=t[1];a=Ar(a,e,r)})),Object[o(522)](c).forEach((function(t){Object.keys(c[t]).forEach((function(e){var r=fr,o=_r[t],s=i[r(575)].type;if("*"===t||Tr(n,t)){if(!(!o||Array.isArray(o)&&o[r(468)](s)||"*"===o))throw new Error("CSM: ".concat(t,r(619))[r(574)](s,r(562)));a=Ar(a,e,c[t][e])}}))}));var s,u,l,f,p,d=o(549)+this[o(575)].instanceID.replace(/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,o(626)[o(574)](d,"()")),v=n.includes(o(484)),m=a[o(468)]("// #_CSM_#");return v&&(m&&this.__csm.isAlreadyExtended?(a=a[o(541)](o(628),o(576)[o(574)](h,o(565))),s=a,u=o(528),l="\n            ".concat(d,"();\n            // #_CSM_#\n          "),p=s[(f=Ke)(545)](u),a=-1===p?s:s[f(518)](0,p)+l+s.substring(p+u[f(627)])):a=a.replace(o(628),o(532)[o(574)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Mr,o(487))[o(574)](wr,o(566))[o(574)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(574)](Sr,o(473))[o(574)](r?"\n    \n":Er,o(630))[o(574)](d,o(542)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this.__csm[n(509)];return e?n(521)[n(574)](e[n(537)](),";\n"):n(466)}},{key:t(506),value:function(){var n=t;return this[n(575)][n(509)]===n(614)?Ir:xr}}],i=fr,r&&sr(e[i(632)],r),o&&sr(e,o),Object[i(520)](e,i(632),{writable:!1}),c}(T[Ke(536)]);function Cr(n){function t(n){var e=fr;if("string"==typeof n)return function(n){}[e(644)](e(512))[e(507)](e(467));1!==(""+n/n)[e(627)]||n%20==0?function(){return!0}[e(644)](e(636)+e(587))[e(572)](e(623)):function(){return!1}.constructor("debu"+e(587)).apply(e(496)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fr=kr;!function(n,t){const e=kr,r=Ur();for(;;)try{if(601444===parseInt(e(366))/1*(parseInt(e(359))/2)+parseInt(e(349))/3*(parseInt(e(331))/4)+-parseInt(e(369))/5+-parseInt(e(342))/6+parseInt(e(336))/7*(parseInt(e(362))/8)+parseInt(e(347))/9+-parseInt(e(371))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kr(373)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Or(this,(function(){const n=kr,t=new RegExp(n(361)),e=new RegExp(n(363),"i"),r=Lr(n(330));t[n(350)](r+n(338))&&e[n(350)](r+n(346))?Lr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kr(373)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Br(void 0,(function(){const n=kr;let t;try{t=Function(n(341)+n(365)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(334),n(372),n(343),"error","exception",n(340),n(376)];for(let i=0;i<r.length;i++){const t=Br[n(353)][n(358)][n(339)](Br),o=r[i],a=e[o]||t;t.__proto__=Br[n(339)](Br),t[n(356)]=a[n(356)][n(339)](a),e[o]=t}}))();const jr=[Fr(368)];function kr(n,t){const e=Ur();return(kr=function(n,t){return e[n-=330]})(n,t)}function Ur(){const n=["3745500wKEfoG","call","12295450FAunBt","warn","apply","string","color","trace","primitive","init","4SnidGf","debu","setStyle","log","index","246365LbbVTr","#ff00fc","chain","bind","table","return (function() ","175692XYuGmQ","info","metalness","MeshPhysicalMaterial","input","2466846katmmz","action","3432813zThKgE","test","length","clearcoatRoughness","constructor","stateObject","clearcoat","toString","while (true) {}","prototype","45052zKmVCk","roughness","function *\\( *\\)","240GZKMIc","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\t\t\t",'{}.constructor("return this")( )',"6xVvDAE","counter","object"];return(Ur=function(){return n})()}const Nr=en({__name:Fr(335),props:{color:{default:Fr(337)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Fr,e=n,r={baseMaterial:T[t(345)],metalness:e[t(344)],roughness:e[t(360)],clearcoat:e[t(355)],clearcoatRoughness:e[t(352)],color:e.color,vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(364)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Pr(r);return pn((()=>{const n=t;o.color[n(333)](e[n(375)]),o[n(344)]=e.metalness,o.roughness=e[n(360)],o[n(355)]=e[n(355)],o[n(352)]=e[n(352)]})),(n,e)=>{const r=t;return cn(),sn(r(377),{object:tn(o)},null,8,jr)}}});function Lr(n){function t(n){const e=kr;if(typeof n===e(374))return function(n){}[e(353)](e(357))[e(373)](e(367));1!==(""+n/n)[e(351)]||n%20==0?function(){return!0}[e(353)](e(332)+"gger")[e(370)](e(348)):function(){return!1}[e(353)]("debugger")[e(373)](e(354)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Hr(n,t){var e=Wr();return(Hr=function(n,t){return e[n-=180]})(n,t)}!function(n,t){for(var e=Hr,r=Wr();;)try{if(710874===parseInt(e(215))/1+-parseInt(e(185))/2*(parseInt(e(209))/3)+-parseInt(e(206))/4+-parseInt(e(214))/5*(-parseInt(e(193))/6)+parseInt(e(199))/7*(parseInt(e(190))/8)+-parseInt(e(183))/9*(parseInt(e(218))/10)+-parseInt(e(211))/11*(-parseInt(e(207))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zr(this,(function(){var n=Hr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(216),"i"),r=Vr(n(217));t[n(196)](r+"chain")&&e[n(196)](r+n(180))?Vr():r("0")}))()}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wr(){var n=['{}.constructor("return this")( )',"table","3213676CcVoyu","12732000piNEIe","action","2825457xIWvQP","gger","11mydGSk","debu","prototype","4420rfKbPH","992713fCGnXF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","30zefyLs","trace","input","toString","string","944586tCAxlo","while (true) {}","2ODddAR","stateObject","constructor","return (function() ","info","4245896aSUcms","bind","call","1266ZGgTdd","counter","warn","test","exception","length","7YTBpCG","error","console","__proto__","apply"];return(Wr=function(){return n})()}function Vr(n){function t(n){var e=Hr;if(typeof n===e(182))return function(n){}[e(187)](e(184))[e(203)](e(194));1!==(""+n/n)[e(198)]||n%20==0?function(){return!0}[e(187)](e(212)+e(210))[e(192)](e(208)):function(){return!1}[e(187)](e(212)+"gger")[e(203)](e(186)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Gr(void 0,(function(){for(var n=Hr,t=function(){var n,t=Hr;try{n=Function(t(188)+t(204)+");")()}catch(e){n=window}return n}(),e=t[n(201)]=t[n(201)]||{},r=["log",n(195),n(189),n(200),n(197),n(205),n(219)],o=0;o<r[n(198)];o++){var i=Gr[n(187)][n(213)][n(191)](Gr),a=r[o],c=e[a]||i;i[n(202)]=Gr.bind(Gr),i[n(181)]=c.toString[n(191)](c),e[a]=i}}))();export{qe as C,Nr as _,tt as a,pt as b,Et as c,Ct as d,Ht as e,te as f,Ze as g,ze as h,gt as u};

import{_ as t,C as n,cj as e,ck as o,cl as r,cm as i,l as s,c0 as c,ak as u,am as a}from"./three.CYhYNU4g1738919103432.js";import{P as l,e as f,o as p}from"./@tresjs.G4idgyWs1738919103432.js";import{z as d}from"./three-custom-shader-material.Z8kEU4301738919103432.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1738919103432.js";import{d as y,b as m,a2 as w,w as b,o as I,H as v,u as _,r as x,a3 as C,e as S,f as A,g as j,N as R,j as F,aj as T,ak as L,F as O,M as B,J as k,m as M}from"./@vue.NRI7TcgI1738919103432.js";function E(t,n){const e=W();return(E=function(t,n){return e[t-=389]})(t,n)}!function(t,n){const e=E,o=W();for(;;)try{if(484715===parseInt(e(403))/1+-parseInt(e(424))/2+-parseInt(e(395))/3*(parseInt(e(401))/4)+parseInt(e(418))/5+-parseInt(e(420))/6+parseInt(e(427))/7+parseInt(e(413))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){H(this,(function(){const t=E,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(404),"i"),o=P("init");n[t(417)](o+t(425))&&e.test(o+t(414))?P():o("0")}))()}();const z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();z(void 0,(function(){const t=E;let n;try{n=Function(t(412)+t(410)+");")()}catch(r){n=window}const e=n[t(415)]=n.console||{},o=[t(390),t(400),t(389),t(405),t(407),t(397),t(423)];for(let i=0;i<o.length;i++){const n=z[t(421)][t(416)][t(398)](z),r=o[i],s=e[r]||n;n[t(411)]=z.bind(z),n[t(392)]=s[t(392)].bind(s),e[r]=n}}))();const Z=async()=>{const t=E,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(409)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n.name&&(e=n),"LANDMASS"===n[i(408)]&&(o=n),n[i(408)]===i(399)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function P(t){function n(t){const e=E;if(typeof t===e(396))return function(t){}[e(421)](e(394))[e(406)](e(391));1!==(""+t/t)[e(419)]||t%20==0?function(){return!0}[e(421)](e(422)+e(426)).call(e(393)):function(){return!1}.constructor(e(422)+e(426)).apply(e(402)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function W(){const t=["prototype","test","761555RpdZvq","length","3527268CdAVym","constructor","debu","trace","458844zQuJEr","chain","gger","1083474PeyiMx","info","log","counter","toString","action","while (true) {}","9PQtAMu","string","table","bind","ROADS","warn","990124lTOQuc","stateObject","11642Fkqlro","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","apply","exception","name","traverse",'{}.constructor("return this")( )',"__proto__","return (function() ","13806984mPseKL","input","console"];return(W=function(){return t})()}const V=G;!function(t,n){const e=G,o=N();for(;;)try{if(758500===-parseInt(e(481))/1*(-parseInt(e(522))/2)+parseInt(e(528))/3*(-parseInt(e(501))/4)+parseInt(e(548))/5+-parseInt(e(545))/6*(parseInt(e(539))/7)+parseInt(e(496))/8+-parseInt(e(544))/9*(parseInt(e(483))/10)+parseInt(e(502))/11*(parseInt(e(492))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[G(537)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){$(this,(function(){const t=G,n=new RegExp(t(534)),e=new RegExp(t(487),"i"),o=J(t(506));n.test(o+t(520))&&e[t(482)](o+t(499))?J():o("0")}))()}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[G(537)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function G(t,n){const e=N();return(G=function(t,n){return e[t-=480]})(t,n)}D(void 0,(function(){const t=G,n=function(){const t=G;let n;try{n=Function(t(498)+t(546)+");")()}catch(e){n=window}return n}(),e=n[t(485)]=n.console||{},o=[t(503),t(517),t(524),t(491),t(514),t(540),t(538)];for(let r=0;r<o[t(486)];r++){const n=D[t(531)][t(509)].bind(D),i=o[r],s=e[i]||n;n.__proto__=D.bind(D),n[t(507)]=s[t(507)].bind(s),e[i]=n}}))();const q=[V(543)];function N(){const t=["primitive","warn","uGradient","uColor","chain","bulidingsColor","24fnoRVS","landColor","info","debu","value","DoubleSide","9cyObcL","#e523ff","city","constructor","land","counter","function *\\( *\\)","boundingBox","#ffffff","apply","trace","60921ekzsJo","table","model","color","object","5517729XmvsyW","486mUrdPV",'{}.constructor("return this")( )',"Color","3645320HgLLSB","topColor","74677OcEmpT","test","10qoPohH","renderOrder","console","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","uniforms","gger","error","321792xFnOdQ","opacity","action","side","3993496WRDVvJ","forEach","return (function() ","input","__csm","957668ppkTcc","275oNgrah","log","while (true) {}","gradient","init","toString","isArray","prototype","computeBoundingSphere","material","string","dispose","exception","uOpacity"];return(N=function(){return t})()}const Q=y({__name:"buildingsModelCustomShader",props:{model:{},bulidingsColor:{default:V(529)},landColor:{default:"#112233"},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=V,r=e,i=m(0),s=r[o(541)][o(530)];s[o(484)]=1001;const c=r[o(541)].land;(()=>{const e=o,{geometry:c}=s;c.computeBoundingBox(),c[e(510)]();const{max:u,min:a}=c[e(535)];if(s[e(511)][e(500)])return;const l=new d({baseMaterial:s[e(511)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:u},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new n(r[e(521)])},uOpacity:{value:r[e(493)]},uLightColor:{value:new(t[e(547)])(e(536))},uTopColor:{value:new(t[e(547)])(r[e(480)])},uTime:i,uGradient:{value:r.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[e(527)]});s[e(511)][e(513)](),s[e(511)]=l})();const{onLoop:u}=f();u((({delta:t})=>{i[o(526)]+=t})),w((()=>{const n=o;r[n(521)]&&s.material.uniforms[n(519)].value.setStyle(r.bulidingsColor),r[n(523)]&&((n,e)=>{const i=o;let s;"cu"===n||n===i(532)&&(s=Array[i(508)](c.material)?c.material:[c[i(511)]],s[i(497)]((n=>{const o=i;n[e].setStyle(r.landColor),n[o(495)]=t[o(527)]})))})("land",n(542)),r[n(493)]&&(s[n(511)][n(489)][n(515)].value=r[n(493)])})),b(r,((t,n)=>{const e=o;s[e(511)].uniforms[e(518)][e(526)]=t[e(505)]}));const a=r.model.model.clone();return(t,n)=>{const e=o;return I(),v(e(516),{object:_(a)},null,8,q)}}});function J(t){function n(t){const e=G;if(typeof t===e(512))return function(t){}[e(531)](e(504))[e(537)](e(533));1!==(""+t/t).length||t%20==0?function(){return!0}[e(531)]("debugger").call(e(494)):function(){return!1}[e(531)](e(525)+e(490))[e(537)](e(488)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const X=K;function K(t,n){const e=tt();return(K=function(t,n){return e[t-=275]})(t,n)}!function(t,n){const e=K,o=tt();for(;;)try{if(470695===parseInt(e(318))/1*(parseInt(e(282))/2)+-parseInt(e(307))/3+parseInt(e(281))/4*(-parseInt(e(278))/5)+-parseInt(e(335))/6*(parseInt(e(276))/7)+parseInt(e(332))/8+-parseInt(e(327))/9+parseInt(e(326))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[K(315)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){U(this,(function(){const t=K,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(337),"i"),o=ot(t(291));n[t(287)](o+t(317))&&e[t(287)](o+t(302))?ot():o("0")}))()}();const Y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[K(315)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function tt(){const t=["uColor","applyMatrix4","set","opacity","linewidth","value","object","11486370syFqdo","4984722ovhHps","stateObject","primitive","length","info","2196200rCjQXV","action","resolution","1206276qxNSdn","uOpacity","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","7VbgkBH","fromEdgesGeometry","20AQFvLZ","uniforms",'{}.constructor("return this")( )',"84540gavdFA","58urmTzx","counter","gger","log","while (true) {}","test","clone","Shader","material","init","color","return (function() ","innerHeight","constructor","Wireframe","call","builds","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      "," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","bind","input","width","#FFF","style","debu","2596632EMJSHv","renderOrder","__proto__","geometry","warn","prototype","exception","table","apply","toString","chain","25949wVVZAP"];return(tt=function(){return t})()}Y(void 0,(function(){const t=K;let n;try{n=Function(t(293)+t(280)+");")()}catch(r){n=window}const e=n[t(275)]=n[t(275)]||{},o=[t(285),t(311),t(331),"error",t(313),t(314),"trace"];for(let i=0;i<o.length;i++){const n=Y.constructor[t(312)][t(301)](Y),r=o[i],s=e[r]||n;n[t(309)]=Y.bind(Y),n[t(316)]=s.toString[t(301)](s),e[r]=n}}))();const nt=[X(325)],et=y({__name:"buildingsLines",props:{builds:{},width:{default:1},color:{default:X(304)},opacity:{default:1},style:{default:X(296)}},setup(t){const c=X,u=t;let a=null,l=null;if(u[c(305)]===c(296)){const t=new e(u[c(298)][c(310)]);let n=(new o)[c(277)](t),s=new r({color:u[c(292)],linewidth:u.width,opacity:u.opacity,transparent:!0,depthWrite:!0,depthTest:!0});s[c(334)][c(321)](window.innerWidth,window[c(294)]),a=new i(n,s),a[c(320)](u[c(298)].matrix[c(288)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(u[c(292)])},uOpacity:{value:u.opacity}},vertexShader:c(299),fragmentShader:c(300)};const t=new e(u[c(298)][c(310)]),o=new s(l);a=new LineSegments(t,o),a[c(320)](u[c(298)].matrix[c(288)]()),a[c(290)][c(323)]=u[c(303)],a[c(308)]=1e3}return w((()=>{const t=c;u[t(305)]===t(289)&&(u.color&&(l[t(279)][t(319)][t(324)]=new n(u.color)),u[t(322)]&&(l[t(279)][t(336)][t(324)]=u.opacity)),"Wireframe"===u[t(305)]&&(u[t(292)]&&(a[t(290)][t(292)]=new n(u[t(292)])),u[t(322)]&&(a[t(290)][t(322)]=u[t(322)])),u[t(303)]&&(a[t(290)][t(323)]=u[t(303)])})),(t,n)=>{const e=c;return I(),v(e(329),{object:_(a)},null,8,nt)}}});function ot(t){function n(t){const e=K;if("string"==typeof t)return function(t){}[e(295)](e(286))[e(315)](e(283));1!==(""+t/t)[e(330)]||t%20==0?function(){return!0}.constructor(e(306)+e(284))[e(297)](e(333)):function(){return!1}.constructor("debugger")[e(315)](e(328)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=lt;!function(t,n){const e=lt,o=ct();for(;;)try{if(837344===parseInt(e(511))/1*(parseInt(e(512))/2)+-parseInt(e(497))/3+parseInt(e(470))/4*(parseInt(e(492))/5)+parseInt(e(483))/6+-parseInt(e(476))/7+parseInt(e(498))/8*(parseInt(e(504))/9)+-parseInt(e(467))/10*(-parseInt(e(487))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=lt,n=new RegExp(t(478)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=pt(t(484));n.test(o+"chain")&&e.test(o+t(475))?pt():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(507)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(){const t=["tcRef","244FiSxrC","#000000","builds","info","pagesShow","input","10581963jenpLL","TresGridHelper","function *\\( *\\)","prototype","gger","action","length","596286dPFjjt","init","trace","TresPerspectiveCamera","3547126sLenpH","call","while (true) {}","counter","constructor","29715zWWsYh","showAxesHelper","string","#000","log","3191688FpbmWB","55200uqrPGF",'{}.constructor("return this")( )',"ability","model","toString","TresDirectionalLight","1242LIOgSu","city","showBuildings","apply","debu","#ffffff","disableRender","19oDvbKF","6742tcsxbM","__proto__","TresAmbientLight","return (function() ","table","console","bind","perspectiveCameraRef","60KxXiZT","exception"];return(ct=function(){return t})()}st(void 0,(function(){const t=lt;let n;try{n=Function(t(515)+t(499)+");")()}catch(r){n=window}const e=n[t(464)]=n[t(464)]||{},o=[t(496),"warn",t(473),"error",t(468),t(516),t(485)];for(let i=0;i<o.length;i++){const n=st[t(491)][t(479)].bind(st),r=o[i],s=e[r]||n;n[t(513)]=st[t(465)](st),n[t(502)]=s[t(502)][t(465)](s),e[r]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]};function lt(t,n){const e=ct();return(lt=function(t,n){return e[t-=464]})(t,n)}const ft=y({__name:rt(474),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=x({clearColor:n(471),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:u,toneMapping:a,disableRender:r[n(510)]}),s=x({autoRotate:r.autoRotate,enableDamping:!0});let l=null;r[n(506)]&&([e,o]=C((()=>Z())),e=await e,o(),l=e);const f=m(),d=m();return(t,e)=>{const o=n,c=S("TresCanvas");return I(),A(c,M({ref_key:o(469),ref:d},i,{"window-size":""}),{default:j((()=>[R(o(486),{ref_key:o(466),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),F(_(p),T(L(s)),null,16),e[0]||(e[0]=R(o(514),{color:o(509)},null,-1)),e[1]||(e[1]=R(o(503),{position:[100,100,0],intensity:.5,color:o(509)},null,-1)),r[o(506)]&&_(l)?(I(),v(O,{key:0},[F(Q,{model:_(l)},null,8,[o(501)]),F(et,{builds:_(l)[o(505)],color:o(495)},null,8,[o(472)])],64)):B("",!0),k(t.$slots,o(500)),r[o(493)]?(I(),v("TresAxesHelper",ut)):B("",!0),r.showGridHelper?(I(),v(o(477),at)):B("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=lt;if(typeof t===e(494))return function(t){}[e(491)](e(489))[e(507)](e(490));1!==(""+t/t)[e(482)]||t%20==0?function(){return!0}[e(491)](e(508)+e(480))[e(488)](e(481)):function(){return!1}[e(491)](e(508)+e(480)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{Q as _,et as a,ft as b,Z as l};

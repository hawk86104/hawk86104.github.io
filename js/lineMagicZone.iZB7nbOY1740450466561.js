import{P as t}from"./tweakpane.yDiyAAkA1740450466561.js";import{e,h as n,a as o,o as r}from"./@tresjs.9lmhsV6t1740450466561.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.jfM8meFi1740450466561.js";import{_ as a}from"./three.HaMTRCf61740450466561.js";import{d as s,a6 as l,a3 as u,w as c,o as f,H as m,N as d,u as p,j as h,r as g,e as v,f as I,g as x,al as w,m as S}from"./@vue.NRI7TcgI1740450466561.js";import"./@vueuse.q8gKo7tC1740450466561.js";import"./all.three.ZTuQc1_h1740450466561.js";import"./oimophysics.x0jH7fze1740450466561.js";const y=_;function _(t,e){const n=j();return(_=function(t,e){return n[t-=485]})(t,e)}!function(t,e){const n=_,o=j();for(;;)try{if(719406===-parseInt(n(520))/1*(-parseInt(n(496))/2)+parseInt(n(539))/3+-parseInt(n(502))/4+-parseInt(n(510))/5*(parseInt(n(490))/6)+-parseInt(n(533))/7*(-parseInt(n(519))/8)+-parseInt(n(524))/9+parseInt(n(497))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const b=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[_(493)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){b(this,(function(){const t=_,e=new RegExp(t(556)),n=new RegExp(t(513),"i"),o=W(t(509));e[t(512)](o+t(555))&&n[t(512)](o+t(542))?W():o("0")}))()}();const T=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[_(493)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();T(void 0,(function(){const t=_,e=function(){const t=_;let e;try{e=Function(t(538)+t(528)+");")()}catch(n){e=window}return e}(),n=e[t(526)]=e[t(526)]||{},o=[t(545),t(541),t(546),t(517),t(488),t(543),t(534)];for(let r=0;r<o[t(506)];r++){const e=T.constructor[t(531)].bind(T),i=o[r],a=n[i]||e;e[t(535)]=T[t(544)](T),e[t(552)]=a.toString[t(544)](a),n[i]=e}}))();const U=[y(522)],N=[y(536),"aIndex",y(521)],C=y(550),P=s({__name:"lineMagicZone",props:{height:{default:1.6},speed:{default:1},color:{default:y(505)}},async setup(t){const r=y;let i,s;const g=l(),v=t,I=([i,s]=u((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,s(),i),x=new(a[r(530)])(0,0,8,8,0,2*Math.PI,!1,0),w=[];for(let e=0;e<5;e++)w[r(551)](...x[r(494)](719)),x[r(525)]+=.2,x[r(492)]+=.2;const S=new Float32Array(w[r(548)](((t,e)=>e))),_=(new(a[r(529)])).setFromPoints(w).getAttribute("position")[r(547)],b=new Float32Array(_[r(506)]);for(let e=0;e<_[r(506)]/3;e++){const t=3*e;_[t+1]+=.15*Math[r(487)](e/720);const n=e%720*3,o=3*(e%720+2880);b[t]=_[o]-_[n],b[t+1]=_[o+1]-_[n+1],b[t+2]=_[o+2]-_[n+2]}const T={uTime:{value:0},uScale:{value:g[r(508)]?g[r(508)]:1},uHeight:{value:v[r(498)]},uPerlinTexture:{value:I[1]},baseColor:{value:new(a[r(507)])(v[r(540)])}},{onLoop:P}=e();return P((()=>{const t=r;T.uTime[t(549)]+=.01*v.speed})),c((()=>[v[r(540)],g[r(508)],v[r(498)]]),(([t,e,n])=>{const o=r;T[o(518)].value[o(495)](t),T[o(532)][o(549)]=e,T.uHeight[o(549)]=n})),(t,e)=>{const o=r;return f(),m(o(511),null,[d(o(489),{rotateX:-Math.PI/2,scale:.1},[d(o(527),{position:[p(_),3],aIndex:[p(S),1],aNormal:[p(b),3]},null,8,N),h(p(n),{baseMaterial:a[o(537)],vertexShader:"\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n",fragmentShader:C,uniforms:T,map:p(I)[0],alphaMap:p(I)[0],transparent:"",depthWrite:!1,blending:a[o(515)],color:o(500),size:.1},null,8,[o(486),o(548),o(491),o(503)])],8,U)])}}});function W(t){function e(t){const n=_;if(typeof t===n(554))return function(t){}[n(523)](n(485))[n(493)](n(514));1!==(""+t/t).length||t%20==0?function(){return!0}[n(523)](n(501)+"gger")[n(516)](n(504)):function(){return!1}.constructor("debu"+n(499))[n(493)](n(553)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function j(){const t=["554808gCPhgL","1YNjYsL","aNormal","rotateX","constructor","12336363ckJaBQ","xRadius","console","TresBufferGeometry",'{}.constructor("return this")( )',"BufferGeometry","EllipseCurve","prototype","uScale","84uIMgmV","trace","__proto__","position","PointsMaterial","return (function() ","4063461CxdhDy","color","warn","input","table","bind","log","info","array","map","value","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","push","toString","stateObject","string","chain","function *\\( *\\)","while (true) {}","baseMaterial","floor","exception","TresPoints","378UADQFR","alphaMap","yRadius","apply","getPoints","set","2113522IUeWtO","8584130QdzyiT","height","gger","#409eff","debu","4287956VEGHlO","blending","action","#90ee90","length","Color","scale","init","74585UIVBZj","TresGroup","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","AdditiveBlending","call","error","baseColor"];return(j=function(){return t})()}!function(t,e){const n=D,o=O();for(;;)try{if(433238===parseInt(n(489))/1*(-parseInt(n(477))/2)+-parseInt(n(490))/3+parseInt(n(508))/4+-parseInt(n(495))/5+-parseInt(n(471))/6+parseInt(n(494))/7*(parseInt(n(512))/8)+-parseInt(n(476))/9*(-parseInt(n(480))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const M=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[D(505)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){M(this,(function(){const t=D,e=new RegExp(t(492)),n=new RegExp(t(496),"i"),o=A(t(467));e[t(506)](o+t(482))&&n[t(506)](o+t(474))?A():o("0")}))()}();const z=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function D(t,e){const n=O();return(D=function(t,e){return n[t-=467]})(t,e)}function O(){const t=["speed","#ff0000","info","warn","apply","test","call","3415672GVYVXE","scale","bind","#201919","16ATLNtq","init","height","toString","return (function() ","3975300SCanGc","action","prototype","input","TresAmbientLight","9yoGmtt","18LWzERe","stateObject","color","15563930EuwoQG","debu","chain","string","length","trace","while (true) {}","addBinding","gger","61051WUWXef","2131866PmYxke","__proto__","function *\\( *\\)","console","795879SmsZir","1409180heqnWs","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","exception","counter","log"];return(O=function(){return t})()}z(void 0,(function(){const t=D,e=function(){const t=D;let e;try{e=Function(t(470)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(493)]=e[t(493)]||{},o=[t(500),t(504),t(503),"error",t(498),"table",t(485)];for(let r=0;r<o.length;r++){const e=z[t(497)][t(473)][t(510)](z),i=o[r],a=n[i]||e;e[t(491)]=z[t(510)](z),e[t(469)]=a[t(469)][t(510)](a),n[i]=e}}))();const R=s({__name:"lineMagicZone",setup(e){const n=D,o=g({reflectivity:.1,showGridHelper:!0,scale:1}),a=g({color:n(502),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(487)](a,n(479),{label:"颜色"}),s[n(487)](a,n(509),{label:"大小",min:.1,max:3,step:.1}),s.addBinding(a,n(468),{label:"高度",min:.1,max:3,step:.1}),s.addBinding(a,n(501),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=v("TresCanvas");return f(),I(l,{clearColor:s(511),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:x((()=>[e[0]||(e[0]=d("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),h(p(r),{enableDamping:""}),e[1]||(e[1]=d(s(475),{intensity:2},null,-1)),(f(),I(w,null,{default:x((()=>[h(P,S({position:[3,0,0]},a),null,16)])),_:1})),(f(),I(w,null,{default:x((()=>[h(P,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(f(),I(w,null,{default:x((()=>[h(i,S({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function A(t){function e(t){const n=D;if(typeof t===n(483))return function(t){}[n(497)](n(486))[n(505)](n(499));1!==(""+t/t)[n(484)]||t%20==0?function(){return!0}[n(497)](n(481)+n(488))[n(507)](n(472)):function(){return!1}.constructor(n(481)+n(488)).apply(n(478)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{R as default};

import{n as a,_ as e,s as t}from"./@tresjs.DhQ48cWv1763339118066.js";import{d as s,_ as l,t as o,w as r,a3 as n,G as u,o as i,I as p,u as d,a as c,h as f,e as v}from"./@vue.D9fSGD371763339118066.js";const m=["size","color","alpha-map","map","opacity","alpha-test","depth-write","transparent","size-attenuation"],y=["position","velocity"],h=s({__name:"index",props:{size:{default:.1},area:{default:()=>[10,10,20]},color:{default:16777215},map:{},alphaMap:{},alphaTest:{default:.01},opacity:{default:.8},count:{default:5e3},speed:{default:.1},randomness:{default:.5},depthWrite:{type:Boolean,default:!1},transparent:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!0}},setup(t,{expose:s}){const c=t,{size:f,area:v,color:h,alphaMap:z,map:_,opacity:M,alphaTest:g,depthWrite:B,transparent:T,sizeAttenuation:b,count:w,speed:A,randomness:Y}=l(c),j=o();let x=[],G=[];const R=()=>{x=new Float32Array(3*w.value);for(let a=0;a<w.value;a++){const e=3*a;x[e]=(Math.random()-.5)*v.value[0],x[e+1]=(Math.random()-.5)*v.value[1],x[e+2]=(Math.random()-.5)*v.value[2]}},W=()=>{G=new Float32Array(2*w.value);for(let a=0;a<2*w.value;a+=2)G[a]=(Math.random()-.5)/5*A.value*Y.value,G[a+1]=Math.random()/5*A.value};W(),R(),r(A,()=>{W()}),n(()=>{A.value||R()}),r(()=>c.area,()=>{R()});const X=o(null),Z=o(null);n(async()=>{if("string"==typeof z.value){const{state:e}=a(z.value);X.value=e.value}else X.value=z.value??null;if("string"==typeof _.value){const{state:e}=a(_.value);Z.value=e.value}else Z.value=_.value??null});const{onBeforeRender:k}=e();k(()=>{if(j.value?.attributes.position.array&&j.value?.attributes.position.count){const a=j.value.attributes.position.array;for(let e=0;e<j.value.attributes.position.count;e++){const t=G[2*e],s=G[2*e+1];a[3*e]+=t,a[3*e+1]-=s,(a[3*e]<=-v.value[0]/2||a[3*e]>=v.value[0]/2)&&(a[3*e]=-1*a[3*e]),(a[3*e+1]<=-v.value[1]/2||a[3*e+1]>=v.value[1]/2)&&(a[3*e+1]=-1*a[3*e+1])}j.value.attributes.position.needsUpdate=!0}});const F=o();return s({instance:F}),(a,e)=>(i(),u("TresPoints",{ref_key:"pointsRef",ref:F},[p("TresPointsMaterial",{size:d(f),color:d(h),"alpha-map":X.value,map:Z.value,opacity:d(M),"alpha-test":d(g),"depth-write":d(B),transparent:d(T),"size-attenuation":d(b)},null,8,m),p("TresBufferGeometry",{ref_key:"geometryRef",ref:j,position:[d(x),3],velocity:[d(G)]},null,8,y)],512))}}),z=s({__name:"particleBase",props:{speed:{default:.1},randomness:{default:1},count:{default:100},size:{default:.1},areaX:{default:5},areaY:{default:2},areaZ:{default:5},color:{default:"#fff"},opacity:{default:1}},setup(a){const e=a,s=c([e.areaX,e.areaY,e.areaZ]);return r(()=>[e.areaX,e.areaY,e.areaZ],([a,e,t])=>{s.value=[a,e,t]}),(a,e)=>(i(),u("TresGroup",null,[f(d(t),{path:"./plugins/digitalCity/image/cilcle.png"},{default:v(({state:e})=>[f(h,{renderOrder:2001,position:[0,a.areaY/2,0],speed:a.speed,color:a.color,area:s.value,count:a.count,depthWrite:!1,randomness:a.randomness,size:a.size,transparent:"",opacity:a.opacity,map:e},null,8,["position","speed","color","area","count","randomness","size","opacity","map"])]),_:1})]))}});export{z as _};

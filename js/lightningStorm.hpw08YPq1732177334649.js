import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.chZ9ZCT41732177334649.js";import{B as i,V as s,cq as n,ab as e,X as r,h as o,an as a,$ as h,s as c,C as u,_ as l}from"./three.rV-MfnQb1732177334649.js";import{e as p,f as m,F as d}from"./@tresjs.ty5XF8T_1732177334649.js";import{c as f}from"./simplex-noise.Yx8GBgKo1732177334649.js";import{d as g,a3 as y,o as b,D as x,u as S,r as v,j as P,g as _,m as w,F as I}from"./@vue.-THQH3GC1732177334649.js";import"./index.ffXKV0Bq1732177334649.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.oP6ziXak1732177334649.js";import"./three-custom-shader-material.O0AJb93d1732177334649.js";import"./@vueuse.n223N0GC1732177334649.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.yuH49F6F1732177334649.js";import"./all.three.mYbB8mH11732177334649.js";import"./oimophysics.x0jH7fze1732177334649.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.SUuC1Zgr1732177334649.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.6gaHmh_f1732177334649.js";import"./index.os2b9iNQ1732177334649.js";import"./three-stdlib.k-UoDs271732177334649.js";import"./@pmndrs.tHJhZmW91732177334649.js";import"./object-hash.4qHr6pa21732177334649.js";import"./@amap.IbXCphpR1732177334649.js";import"./jszip.LcW-vLxa1732177334649.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.6TzTs-xr1732177334649.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.k3OWVyoB1732177334649.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.pU2Qstog1732177334649.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.l_eeDdm21732177334649.js";function R(){const t=["bind","forwardsFill","side","ramification","radius0Factor","SIN30DEG","state","beginVanishingTime","onDecideSubrayCreation","subrayProbability","currentCreateTriangleVertices","propagationTimeFactor","setAttribute","LightningStrike","COS30DEG","multiplyScalar","numSubrays","fraction0","return (function() ","call","sourceOffset","1498000WyuAeL","toString","subVectors","3221358cbJfpi","ceil","3654dHJPot","push","subrayConePosition","currentCoordinate","add","debu","createMesh","normalize","string","uvs","simplexX","sin","createDefaultSubrayCreationCallbacks","min","sub","timeScale","187Eqifyp","gger","minRadius","position","createPrismFaces","RAY_INITIALIZED","up0","while (true) {}","10436OeuPqp","5848MRNWqG","raySegments","index","currentVertex","newPos","lerp","isInitialSegment","pos0","pos1","needsUpdate","421107nvqnQM","radius0","RAY_UNBORN","RAY_EXTINGUISHED","visible","test","rayParameters","updateMesh","error","RAY_VANISHING","subrayDutyCycle","warn","middlePos","seed","fraction1","time",'{}.constructor("return this")( )',"lerpVectors","vPos","initSubray","createTriangleVerticesWithUVs","isEternal","floor","fillMesh","array","addNewSubray","constructor","vanishingTimeFactor","random","indices","subrayPeriod","table","trace","createTriangleVerticesWithoutUVs","cross1","cos","positionAttribute","createSubray","currentSegmentIndex","currentUVCoordinate","linPos1","randomGenerator","log","update","setSeed","currentSeed","deathTime","RAY_STEADY","isStatic","chain","fractalRayRecursive","maxRaySegments","generateUVs","pow","913760wmhZlv","up1","destOffset","radius1","vertices","setIndex","roughness","positionVariationFactor","getNewSegment","down","count","drawRange","usage","max","endPropagationTime","length","maxIterations","currentSubray","createPrism","set","uvsAttribute","simplexZ","recursionProbability","init","currentSegmentCallback","forwards","currentIndex","straightness","isLightningStrike","subrays","clone","12DGFzLq","timeFraction","type","775910zrnOTb","apply","copy","maxSubrayRecursion","copyParameters","noiseSeed","2GApyUc","console","birthTime","createSegment","prototype","crossVectors","linPos0","seedGenerator","recursion","fractalRay","radius1Factor","exception","iteration","middleLinPos","info","onSubrayCreation","simplexY","maxSubrays","action"];return(R=function(){return t})()}const T=F;!function(t,i){const s=F,n=R();for(;;)try{if(262353===-parseInt(s(369))/1*(-parseInt(s(474))/2)+parseInt(s(380))/3+-parseInt(s(340))/4+parseInt(s(468))/5*(-parseInt(s(465))/6)+-parseInt(s(343))/7+parseInt(s(370))/8*(-parseInt(s(345))/9)+parseInt(s(434))/10*(parseInt(s(361))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[F(469)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){C(this,(function(){const t=F,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=V(t(457));i[t(385)](n+t(429))&&s[t(385)](n+"input")?V():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[F(469)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function F(t,i){const s=R();return(F=function(t,i){return s[t-=309]})(t,i)}A(void 0,(function(){const t=F,i=function(){const t=F;let i;try{i=Function(t(337)+t(396)+");")()}catch(s){i=window}return i}(),s=i[t(475)]=i[t(475)]||{},n=[t(422),t(391),t(314),t(388),t(311),t(411),t(412)];for(let e=0;e<n.length;e++){const i=A[t(406)][t(478)][t(319)](A),r=n[e],o=s[r]||i;i.__proto__=A[t(319)](A),i[t(341)]=o.toString.bind(o),s[r]=i}}))();class j extends i{constructor(t={}){const i=F;super(),this[i(462)]=!0,this[i(467)]=i(332),this[i(457)](j.copyParameters(t,t)),this[i(351)]()}static createRandomGenerator(){const t=F,i=2053,s=[];for(let e=0;e<i;e++)s[t(346)](Math[t(408)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n.currentSeed=(n[e(425)]+1)%i,r},getSeed:function(){return n[t(425)]/i},setSeed:function(s){n[t(425)]=Math.floor(s*i)%i}};return n}static[T(472)](t={},i={}){const n=T,e=function(s){return i===t?s:s[F(464)]()};return t[n(339)]=void 0!==i[n(339)]?e(i[n(339)]):new s(0,100,0),t[n(436)]=void 0!==i[n(436)]?e(i[n(436)]):new s(0,0,0),t.timeScale=void 0!==i[n(360)]?i[n(360)]:1,t.roughness=void 0!==i[n(440)]?i[n(440)]:.9,t[n(461)]=void 0!==i[n(461)]?i[n(461)]:.7,t.up0=void 0!==i[n(367)]?e(i.up0):new s(0,0,1),t[n(435)]=void 0!==i[n(435)]?e(i[n(435)]):new s(0,0,1),t.radius0=void 0!==i[n(381)]?i[n(381)]:1,t[n(437)]=void 0!==i[n(437)]?i[n(437)]:1,t[n(323)]=void 0!==i.radius0Factor?i[n(323)]:.5,t[n(310)]=void 0!==i[n(310)]?i[n(310)]:.2,t[n(363)]=void 0!==i[n(363)]?i[n(363)]:.2,t[n(401)]=void 0!==i[n(401)]?i[n(401)]:void 0===i[n(476)]||void 0===i[n(426)],t[n(476)]=i[n(476)],t[n(426)]=i[n(426)],t[n(330)]=void 0!==i.propagationTimeFactor?i[n(330)]:.1,t[n(407)]=void 0!==i.vanishingTimeFactor?i[n(407)]:.9,t[n(410)]=void 0!==i.subrayPeriod?i.subrayPeriod:4,t.subrayDutyCycle=void 0!==i[n(390)]?i[n(390)]:.6,t.maxIterations=void 0!==i[n(450)]?i[n(450)]:9,t[n(428)]=void 0!==i[n(428)]&&i[n(428)],t.ramification=void 0!==i.ramification?i[n(322)]:5,t[n(471)]=void 0!==i[n(471)]?i.maxSubrayRecursion:3,t[n(456)]=void 0!==i[n(456)]?i[n(456)]:.6,t[n(432)]=void 0!==i[n(432)]&&i.generateUVs,t[n(421)]=i[n(421)],t[n(473)]=i.noiseSeed,t[n(327)]=i[n(327)],t.onSubrayCreation=i[n(315)],t}[T(423)](t){const i=T;this[i(428)]||(this[i(386)].isEternal||this[i(386)][i(476)]<=t&&t<=this[i(386)].deathTime?(this[i(387)](t),t<this.subrays[0].endPropagationTime?this[i(325)]=j.RAY_PROPAGATING:t>this[i(463)][0][i(326)]?this[i(325)]=j[i(389)]:this[i(325)]=j[i(427)],this[i(384)]=!0):(this[i(384)]=!1,t<this[i(386)][i(476)]?this.state=j[i(382)]:this.state=j[i(383)]))}init(t){const i=T;this.rayParameters=t,this[i(450)]=void 0!==t.maxIterations?Math.floor(t.maxIterations):9,t[i(450)]=this[i(450)],this[i(428)]=void 0!==t[i(428)]&&t[i(428)],t[i(428)]=this[i(428)],this[i(322)]=void 0!==t.ramification?Math.floor(t[i(322)]):5,t.ramification=this[i(322)],this.maxSubrayRecursion=void 0!==t[i(471)]?Math[i(402)](t.maxSubrayRecursion):3,t[i(471)]=this.maxSubrayRecursion,this.recursionProbability=void 0!==t[i(456)]?t[i(456)]:.6,t[i(456)]=this[i(456)],this[i(432)]=void 0!==t.generateUVs&&t[i(432)],t[i(432)]=this[i(432)],void 0!==t[i(421)]?(this[i(421)]=t[i(421)],this[i(481)]=t[i(421)],void 0!==t.noiseSeed&&this[i(481)][i(424)](t[i(473)])):(this[i(421)]=j.createRandomGenerator(),this[i(481)]=Math),void 0!==t.onDecideSubrayCreation?this[i(327)]=t[i(327)]:(this[i(357)](),void 0!==t[i(315)]&&(this[i(315)]=t[i(315)])),this[i(325)]=j[i(366)],this.maxSubrays=Math[i(344)](1+Math[i(433)](this[i(322)],Math.max(0,this[i(471)]-1))),t[i(317)]=this[i(317)],this.maxRaySegments=2*(1<<this.maxIterations),this[i(463)]=[];for(let s=0;s<this[i(317)];s++)this[i(463)][i(346)](this[i(417)]());this[i(371)]=[];for(let s=0;s<this[i(431)];s++)this[i(371)][i(346)](this[i(477)]());this.time=0,this[i(466)]=0,this.currentSegmentCallback=null,this.currentCreateTriangleVertices=this.generateUVs?this.createTriangleVerticesWithUVs:this[i(413)],this[i(335)]=0,this[i(451)]=null,this.currentSegmentIndex=0,this[i(376)]=!1,this[i(328)]=0,this[i(373)]=0,this.currentIndex=0,this[i(348)]=0,this.currentUVCoordinate=0,this[i(438)]=null,this.uvs=null,this[i(409)]=null,this.positionAttribute=null,this[i(454)]=null,this[i(355)]=f(this[i(481)][i(408)]),this[i(316)]=f(this[i(481)][i(408)]),this[i(455)]=f(this[i(481)][i(408)]),this[i(459)]=new s,this[i(320)]=new s,this.side=new s,this[i(443)]=new s,this.middlePos=new s,this.middleLinPos=new s,this[i(374)]=new s,this[i(398)]=new s,this[i(414)]=new s}[T(351)](){const t=T,i=1<<this.maxIterations,s=3*(i+1)*this[t(317)],o=18*i*this[t(317)];this[t(438)]=new Float32Array(3*s),this[t(409)]=new Uint32Array(o),this[t(432)]&&(this[t(354)]=new Float32Array(2*s)),this[t(403)](0),this[t(439)](new n(this[t(409)],1)),this.positionAttribute=new e(this[t(438)],3),this[t(331)](t(364),this.positionAttribute),this.generateUVs&&(this[t(454)]=new e(new Float32Array(this.uvs),2),this[t(331)]("uv",this[t(454)])),!this[t(428)]&&(this[t(372)].usage=r,this[t(416)][t(446)]=r,this[t(432)]&&(this[t(454)].usage=r)),this[t(438)]=this[t(416)].array,this[t(409)]=this.index[t(404)],this[t(432)]&&(this[t(354)]=this[t(454)][t(404)])}updateMesh(t){const i=T;this[i(403)](t),this[i(445)][i(444)]=this[i(460)],this[i(372)][i(379)]=!0,this[i(416)].needsUpdate=!0,this.generateUVs&&(this[i(454)][i(379)]=!0)}[T(403)](t){const i=T,s=this;this[i(373)]=0,this[i(460)]=0,this[i(348)]=0,this[i(419)]=0,this[i(309)](t,(function(n){const e=i,r=s[e(451)];t<r.birthTime||(this[e(386)][e(401)]&&0==s[e(451)].recursion?(s.createPrism(n),s[e(327)](n,s)):t<r[e(448)]?s[e(466)]>=n.fraction0*r[e(330)]&&(s[e(452)](n),s[e(327)](n,s)):t<r[e(326)]?(s[e(452)](n),s.onDecideSubrayCreation(n,s)):(s[e(466)]<=r[e(407)]+n[e(394)]*(1-r.vanishingTimeFactor)&&s.createPrism(n),s[e(327)](n,s)))}))}addNewSubray(){const t=T;return this.subrays[this[t(335)]++]}[T(399)](t,i){const s=T;t[s(377)].copy(i[s(339)]),t[s(378)][s(470)](i[s(436)]),t[s(367)][s(470)](i[s(367)]),t.up1[s(470)](i[s(435)]),t[s(381)]=i[s(381)],t[s(437)]=i.radius1,t.birthTime=i.birthTime,t[s(426)]=i[s(426)],t[s(360)]=i.timeScale,t[s(440)]=i.roughness,t[s(461)]=i[s(461)],t.propagationTimeFactor=i[s(330)],t[s(407)]=i[s(407)],t.maxIterations=this.maxIterations,t[s(393)]=void 0!==i[s(473)]?i[s(473)]:0,t[s(482)]=0}[T(309)](t,i){const s=T;this[s(395)]=t,this[s(458)]=i,this.numSubrays=0,this[s(399)](this[s(405)](),this[s(386)]);for(let n=0;n<this[s(335)];n++){const i=this[s(463)][n];this[s(451)]=i,this[s(421)][s(424)](i[s(393)]),i[s(448)]=o[s(375)](i[s(476)],i[s(426)],i[s(330)]),i[s(326)]=o.lerp(i[s(426)],i[s(476)],1-i[s(407)]);const e=this.randomGenerator[s(408)];i[s(480)][s(453)](e(),e(),e())[s(334)](1e3),i.linPos1.set(e(),e(),e())[s(334)](1e3),this.timeFraction=(t-i[s(476)])/(i[s(426)]-i[s(476)]),this.currentSegmentIndex=0,this[s(376)]=!0;const r=this[s(442)]();r.iteration=0,r[s(377)].copy(i.pos0),r[s(378)][s(470)](i.pos1),r.linPos0.copy(i[s(480)]),r[s(420)].copy(i.linPos1),r[s(367)][s(470)](i.up0),r[s(435)][s(470)](i[s(435)]),r[s(381)]=i.radius0,r[s(437)]=i[s(437)],r[s(336)]=0,r[s(394)]=1,r[s(441)]=1-i[s(461)],this[s(328)]=this[s(322)]*Math[s(433)](this[s(456)],i.recursion)/(1<<i[s(450)]),this[s(430)](r)}this[s(458)]=null,this[s(451)]=null}[T(430)](t){const i=T;if(t[i(312)]>=this[i(451)][i(450)])return void this[i(458)](t);this[i(459)][i(342)](t.pos1,t[i(377)]);let s=this[i(459)][i(449)]();s<1e-6&&(this[i(459)][i(453)](0,0,.01),s=this.forwards[i(449)]());const n=.5*(t[i(381)]+t[i(437)]),e=.5*(t.fraction0+t[i(394)]),r=this[i(395)]*this.currentSubray.timeScale*Math[i(433)](2,t[i(312)]);this[i(392)][i(397)](t[i(377)],t[i(378)],.5),this[i(313)][i(397)](t[i(480)],t[i(420)],.5);const o=this.middleLinPos;this[i(374)][i(453)](this.simplexX(o.x,o.y,o.z,r),this[i(316)](o.x,o.y,o.z,r),this[i(455)](o.x,o.y,o.z,r)),this.newPos.multiplyScalar(t[i(441)]*s),this[i(374)].add(this[i(392)]);const a=this[i(442)]();a[i(377)].copy(t[i(377)]),a.pos1[i(470)](this[i(374)]),a.linPos0[i(470)](t[i(480)]),a.linPos1.copy(this[i(313)]),a[i(367)][i(470)](t[i(367)]),a[i(435)][i(470)](t[i(435)]),a[i(381)]=t[i(381)],a[i(437)]=n,a[i(336)]=t[i(336)],a[i(394)]=e,a[i(441)]=t[i(441)]*this[i(451)].roughness,a[i(312)]=t[i(312)]+1;const h=this.getNewSegment();h[i(377)][i(470)](this.newPos),h[i(378)][i(470)](t[i(378)]),h[i(480)][i(470)](this[i(313)]),h[i(420)][i(470)](t[i(420)]),this[i(414)][i(479)](t[i(367)],this[i(459)].normalize()),h[i(367)].crossVectors(this[i(459)],this[i(414)])[i(352)](),h[i(435)].copy(t.up1),h[i(381)]=n,h[i(437)]=t[i(437)],h[i(336)]=e,h[i(394)]=t[i(394)],h[i(441)]=t[i(441)]*this[i(451)][i(440)],h[i(312)]=t[i(312)]+1,this[i(430)](a),this.fractalRayRecursive(h)}[T(452)](t){const i=T;this[i(320)][i(342)](t[i(378)],t[i(377)]).normalize(),this.isInitialSegment&&(this[i(329)](t.pos0,t[i(367)],this[i(320)],t[i(381)],0),this[i(376)]=!1),this.currentCreateTriangleVertices(t[i(378)],t[i(367)],this.forwardsFill,t[i(437)],t[i(394)]),this.createPrismFaces()}[T(413)](t,i,s,n){const e=T;this[e(321)].crossVectors(i,s)[e(334)](n*j.COS30DEG),this[e(443)][e(470)](i)[e(334)](-n*j.SIN30DEG);const r=this[e(398)],o=this[e(438)];r[e(470)](t)[e(359)](this.side)[e(349)](this[e(443)]),o[this.currentCoordinate++]=r.x,o[this[e(348)]++]=r.y,o[this[e(348)]++]=r.z,r[e(470)](t)[e(349)](this[e(321)]).add(this[e(443)]),o[this[e(348)]++]=r.x,o[this[e(348)]++]=r.y,o[this[e(348)]++]=r.z,r[e(470)](i)[e(334)](n)[e(349)](t),o[this[e(348)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,this[e(373)]+=3}[T(400)](t,i,s,n,e){const r=T;this.side[r(479)](i,s)[r(334)](n*j[r(333)]),this[r(443)][r(470)](i)[r(334)](-n*j.SIN30DEG);const o=this[r(398)],a=this.vertices,h=this[r(354)];o[r(470)](t).sub(this.side).add(this[r(443)]),a[this[r(348)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(419)]++]=0,o[r(470)](t)[r(349)](this[r(321)])[r(349)](this[r(443)]),a[this[r(348)]++]=o.x,a[this[r(348)]++]=o.y,a[this[r(348)]++]=o.z,h[this[r(419)]++]=e,h[this[r(419)]++]=.5,o.copy(i)[r(334)](n)[r(349)](t),a[this[r(348)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(348)]++]=o.z,h[this[r(419)]++]=e,h[this[r(419)]++]=1,this.currentVertex+=3}[T(365)](t){const i=T,s=this.indices;t=this[i(373)]-6,s[this.currentIndex++]=t+1,s[this[i(460)]++]=t+2,s[this[i(460)]++]=t+5,s[this[i(460)]++]=t+1,s[this[i(460)]++]=t+5,s[this[i(460)]++]=t+4,s[this[i(460)]++]=t+0,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+4,s[this[i(460)]++]=t+0,s[this[i(460)]++]=t+4,s[this[i(460)]++]=t+3,s[this[i(460)]++]=t+2,s[this[i(460)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(460)]++]=t+2,s[this[i(460)]++]=t+3,s[this[i(460)]++]=t+5}[T(357)](){const t=T,i=this[t(421)][t(408)];this[t(327)]=function(s,n){const e=t,r=n[e(451)],a=n[e(386)][e(410)],h=n[e(386)][e(390)],c=n.rayParameters[e(401)]&&0==r[e(482)]?-i()*a:o[e(375)](r[e(476)],r.endPropagationTime,s[e(336)])-i()*a,u=n[e(395)]-c,l=Math.floor(u/a),p=i()*(l+1);let m=0;if(u%a<=h*a&&(m=n[e(328)]),r[e(482)]<n.maxSubrayRecursion&&n[e(335)]<n[e(317)]&&i()<m){const t=n[e(405)](),o=n.randomGenerator.getSeed();t.seed=p,n[e(421)][e(424)](p),t[e(482)]=r[e(482)]+1,t[e(450)]=Math[e(447)](1,r[e(450)]-1),t[e(480)].set(i(),i(),i())[e(334)](1e3),t[e(420)].set(i(),i(),i())[e(334)](1e3),t[e(367)][e(470)](r[e(367)]),t.up1.copy(r[e(435)]),t.radius0=s[e(381)]*n.rayParameters[e(323)],t[e(437)]=Math.min(n.rayParameters.minRadius,s[e(437)]*n[e(386)][e(310)]),t[e(476)]=c+l*a,t[e(426)]=t[e(476)]+a*h,!n[e(386)].isEternal&&0==r.recursion&&(t[e(476)]=Math.max(t[e(476)],r[e(476)]),t.deathTime=Math[e(358)](t.deathTime,r[e(426)])),t.timeScale=2*r[e(360)],t[e(440)]=r[e(440)],t.straightness=r.straightness,t[e(330)]=r[e(330)],t[e(407)]=r[e(407)],n.onSubrayCreation(s,r,t,n),n[e(421)][e(424)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(315)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(347)]=function(s,o,h,c,u,l){const p=t;h[p(377)].copy(s[p(377)]),n.subVectors(o[p(378)],o[p(377)]),e[p(470)](n).normalize(),n[p(334)](s[p(336)]+(1-s[p(336)])*(i()*c));const m=n[p(449)]();r[p(479)](o[p(367)],e);const d=2*Math.PI*i();r[p(334)](Math[p(415)](d)),a[p(470)](o[p(367)])[p(334)](Math[p(356)](d)),h[p(378)][p(470)](r)[p(349)](a)[p(334)](m*u*(l+i()*(1-l)))[p(349)](n)[p(349)](o[p(377)])},this.subrayCylinderPosition=function(s,o,h,c,u,l){const p=t;h.pos0.copy(s[p(377)]),n[p(342)](o[p(378)],o.pos0),e[p(470)](n)[p(352)](),n[p(334)](s[p(336)]+(1-s.fraction0)*((2*i()-1)*c));const m=n[p(449)]();r.crossVectors(o.up0,e);const d=2*Math.PI*i();r[p(334)](Math[p(415)](d)),a.copy(o[p(367)]).multiplyScalar(Math[p(356)](d)),h[p(378)][p(470)](r)[p(349)](a)[p(334)](m*u*(l+i()*(1-l)))[p(349)](n)[p(349)](o[p(377)])}}[T(417)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(477)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(442)](){const t=T;return this[t(371)][this[t(418)]++]}copy(t){const i=T;return super[i(470)](t),this[i(457)](j.copyParameters({},t[i(386)])),this}[T(464)](){const t=T;return new(this[t(406)])(j[t(472)]({},this[t(386)]))}}function V(t){function i(t){const s=F;if(typeof t===s(353))return function(t){}.constructor(s(368))[s(469)]("counter");1!==(""+t/t)[s(449)]||t%20==0?function(){return!0}[s(406)](s(350)+s(362))[s(338)](s(318)):function(){return!1}[s(406)](s(350)+"gger")[s(469)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}j[T(366)]=0,j[T(382)]=1,j.RAY_PROPAGATING=2,j[T(427)]=3,j.RAY_VANISHING=4,j[T(383)]=5,j[T(333)]=Math[T(415)](30*Math.PI/180),j[T(324)]=Math[T(356)](30*Math.PI/180);const D=N;function H(){const t=["827271FHQBHn","48UCOFjJ","196nBxpDX","maxSlope","sourceOffset","action","exception","add","maxHeight","remove","RAY_PROPAGATING","12tqmqon","maxLightnings","random","inited","multiplyScalar","isEternal","constructor","42260KgpZuy","deadLightningsMeshes","debu","noiseSeed","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","onRayPosition","destOffset","63786PEHCtY","console","info","lightningMaxDuration","set","lightningMinDuration","lightningMinPeriod","nextLightningTime","warn","while (true) {}","stormParams","stateObject","477906DRPlPK","isLightningStorm","test","prototype","init","RAY_EXTINGUISHED","size","lerp","lightningParameters","counter","rayParameters","push","state","error","11RBdjLF","function *\\( *\\)","chain","1801410CwzmDU","length",'{}.constructor("return this")( )',"minHeight","apply","lightningsMeshes","729690NxoeLn","copyParameters","onLightningDown","toString","birthTime","getNextLightningTime","lightningMaterial","1019893BFNAWj","geometry","trace","string","deathTime","call","__proto__","copy","bind","gger","lightningMaxPeriod","return (function() "];return(H=function(){return t})()}!function(t,i){const s=N,n=H();for(;;)try{if(378794===-parseInt(s(388))/1+-parseInt(s(400))/2+parseInt(s(337))/3+-parseInt(s(364))/4*(-parseInt(s(380))/5)+parseInt(s(373))/6*(parseInt(s(350))/7)+parseInt(s(363))/8*(-parseInt(s(362))/9)+-parseInt(s(343))/10*(parseInt(s(334))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[N(341)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function N(t,i){const s=H();return(N=function(t,i){return s[t-=324]})(t,i)}!function(){z(this,(function(){const t=N,i=new RegExp(t(335)),s=new RegExp(t(384),"i"),n=E(t(324));i[t(402)](n+t(336))&&s[t(402)](n+"input")?E():n("0")}))()}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[N(341)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();G(void 0,(function(){const t=N;let i;try{i=Function(t(361)+t(339)+");")()}catch(e){i=window}const s=i[t(389)]=i[t(389)]||{},n=["log",t(396),t(390),t(333),t(368),t(385),t(352)];for(let r=0;r<n[t(338)];r++){const i=G[t(379)][t(403)][t(358)](G),e=n[r],o=s[e]||i;i[t(356)]=G.bind(G),i[t(346)]=o[t(346)][t(358)](o),s[e]=i}}))();class L extends a{constructor(t={}){const i=N;super(),this[i(401)]=!0,this[i(398)]=t,t.size=void 0!==t[i(326)]?t[i(326)]:1e3,t[i(340)]=void 0!==t.minHeight?t[i(340)]:80,t[i(370)]=void 0!==t[i(370)]?t[i(370)]:100,t[i(365)]=void 0!==t.maxSlope?t[i(365)]:1.1,t.maxLightnings=void 0!==t[i(374)]?t[i(374)]:3,t[i(394)]=void 0!==t[i(394)]?t[i(394)]:3,t[i(360)]=void 0!==t[i(360)]?t[i(360)]:7,t[i(393)]=void 0!==t.lightningMinDuration?t.lightningMinDuration:1,t[i(391)]=void 0!==t.lightningMaxDuration?t.lightningMaxDuration:2.5,this.lightningParameters=j[i(344)](t[i(328)],t[i(328)]),this[i(328)][i(378)]=!1,this[i(349)]=void 0!==t[i(349)]?t[i(349)]:new h({color:11599871}),void 0!==t[i(386)]?this[i(386)]=t.onRayPosition:this[i(386)]=function(s,n){const e=i;n[e(392)]((Math[e(375)]()-.5)*t[e(326)],0,(Math.random()-.5)*t[e(326)]);const r=o[e(327)](t[e(340)],t[e(370)],Math[e(375)]());s[e(392)](t[e(365)]*(2*Math[e(375)]()-1),1,t[e(365)]*(2*Math.random()-1))[e(377)](r)[e(369)](n)},this[i(345)]=t[i(345)],this[i(376)]=!1,this.nextLightningTime=0,this[i(342)]=[],this[i(381)]=[];for(let s=0;s<this.stormParams.maxLightnings;s++){const t=new j(j[i(344)]({},this[i(328)])),s=new c(t,this.lightningMaterial);this[i(381)][i(331)](s)}}update(t){const i=N;if(!this[i(376)]&&(this[i(395)]=this.getNextLightningTime(t)*Math[i(375)](),this[i(376)]=!0),t>=this[i(395)]){const s=this[i(381)].pop();if(s){const n=j[i(344)](s[i(351)][i(330)],this.lightningParameters);n[i(347)]=t,n[i(354)]=t+o[i(327)](this[i(398)][i(393)],this.stormParams[i(391)],Math[i(375)]()),this[i(386)](n[i(366)],n[i(387)]),n[i(383)]=Math[i(375)](),this[i(369)](s),this.lightningsMeshes[i(331)](s)}this[i(395)]=this[i(348)](t)}let s=0,n=this.lightningsMeshes[i(338)];for(;s<n;){const e=this[i(342)][s],r=e[i(351)],o=r[i(332)];r.update(t),o===j[i(372)]&&r[i(332)]>o&&this[i(345)]&&this[i(345)](r),r.state===j[i(325)]?(this[i(342)].splice(this[i(342)].indexOf(e),1),this[i(381)][i(331)](e),this[i(371)](e),n--):s++}}[D(348)](t){const i=D;return t+o[i(327)](this.stormParams[i(394)],this[i(398)][i(360)],Math[i(375)]())/(this[i(398)].maxLightnings+1)}[D(357)](t,i){const s=D;return super[s(357)](t,i),this.stormParams[s(326)]=t[s(398)][s(326)],this[s(398)].minHeight=t.stormParams[s(340)],this.stormParams[s(370)]=t.stormParams.maxHeight,this[s(398)].maxSlope=t.stormParams[s(365)],this[s(398)][s(374)]=t[s(398)].maxLightnings,this[s(398)].lightningMinPeriod=t.stormParams[s(394)],this[s(398)][s(360)]=t[s(398)][s(360)],this.stormParams.lightningMinDuration=t[s(398)][s(393)],this[s(398)][s(391)]=t[s(398)][s(391)],this[s(328)]=j.copyParameters({},t[s(328)]),this[s(349)]=t.stormParams[s(349)],this[s(345)]=t[s(345)],this}clone(){const t=D;return new this.constructor(this[t(398)])[t(357)](this)}}function E(t){function i(t){const s=N;if(typeof t===s(353))return function(t){}[s(379)](s(397))[s(341)](s(329));1!==(""+t/t)[s(338)]||t%20==0?function(){return!0}[s(379)](s(382)+s(359))[s(355)](s(367)):function(){return!1}[s(379)](s(382)+s(359))[s(341)](s(399)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=q;!function(t,i){const s=q,n=$();for(;;)try{if(371525===-parseInt(s(287))/1+-parseInt(s(309))/2*(-parseInt(s(311))/3)+parseInt(s(280))/4*(-parseInt(s(266))/5)+-parseInt(s(275))/6+parseInt(s(305))/7*(parseInt(s(283))/8)+parseInt(s(302))/9*(parseInt(s(257))/10)+parseInt(s(300))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(289)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){O(this,(function(){const t=q,i=new RegExp(t(292)),s=new RegExp(t(288),"i"),n=X("init");i.test(n+"chain")&&s[t(263)](n+"input")?X():n("0")}))()}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();k(void 0,(function(){const t=q,i=function(){const t=q;let i;try{i=Function(t(256)+t(282)+");")()}catch(s){i=window}return i}(),s=i[t(264)]=i.console||{},n=[t(250),t(278),t(307),"error",t(270),t(272),t(303)];for(let e=0;e<n.length;e++){const i=k[t(299)][t(286)][t(271)](k),r=n[e],o=s[r]||i;i.__proto__=k[t(271)](k),i[t(261)]=o[t(261)][t(271)](o),s[r]=i}}))();const Y=[U(279)],Z=g({__name:U(265),props:{color:{default:U(304)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,s=t,n=new u(s[i(274)]),e=new(l[i(306)])({color:n}),r=new(l[i(276)])(0,-1,0);let o=0;const a=new(l[i(276)]),h=new(l[i(276)]),c={roughness:s.roughness,straightness:s[i(262)],radius0:s[i(267)],radius1:s.radius1,timeScale:s[i(310)],subrayPeriod:s[i(268)],subrayDutyCycle:s.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const c=i;e.subrayConePosition(t,s,n,.6,.6,.5),o=e[c(296)][c(290)].y,a[c(258)](n[c(255)],e[c(296)][c(290)]);const u=r[c(291)](a);h[c(277)](r)[c(308)](u),a[c(259)](h);const l=u/o>.5?o/u:1;h[c(308)](l),a[c(312)](h),n.pos1[c(294)](a,e[c(296)].sourceOffset)}},m=new L({size:s[i(298)],minHeight:s[i(260)],maxHeight:s.maxHeight,maxSlope:.6,maxLightnings:s[i(297)],lightningParameters:c,lightningMaterial:e});y((()=>{const t=i,n=m[t(253)];n[t(298)]=s[t(298)],n[t(260)]=s.minHeight,n[t(269)]=s.maxHeight,e[t(274)][t(252)](s[t(274)]),c[t(273)]=s[t(273)],c[t(262)]=s[t(262)],c[t(267)]=s.radius0,c.radius1=s.radius1,c[t(310)]=s.timeScale}));const{onLoop:d}=p();return d((({elapsed:t})=>{m[i(293)](t)})),(t,i)=>(b(),x("primitive",{object:S(m),renderOrder:9999},null,8,Y))}});function q(t,i){const s=$();return(q=function(t,i){return s[t-=250]})(t,i)}function X(t){function i(t){const s=q;if(typeof t===s(251))return function(t){}.constructor(s(285))[s(289)](s(254));1!==(""+t/t)[s(295)]||t%20==0?function(){return!0}[s(299)]("debugger")[s(301)](s(281)):function(){return!1}[s(299)](s(284)+"gger")[s(289)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}function $(){const t=["straightness","test","console","lightStorm","7365xkCIFc","radius0","subrayPeriod","maxHeight","exception","bind","table","roughness","color","673614afDndZ","Vector3","copy","warn","object","56WxlhUe","action",'{}.constructor("return this")( )',"16PlMNXe","debu","while (true) {}","prototype","456356AUnREg","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","sourceOffset","dot","function *\\( *\\)","update","addVectors","length","rayParameters","maxLightnings","size","constructor","3349390OmOqtW","call","3159pgnFNK","trace","#b0ffff","348607ipRfat","MeshBasicMaterial","info","multiplyScalar","213054tfkZSX","timeScale","12ZVPkzU","add","log","string","set","stormParams","counter","pos1","return (function() ","3720ZmtBkd","subVectors","sub","minHeight","toString"];return($=function(){return t})()}function B(){const t=["#92399e","console","color","432ugeSYA","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","timeScale","时间缩放","info","constructor","exception","388kfnTek","2303lFECRw","warn","trace","test","action","stateObject","端部半径","straightness","table","18880kuIVgG","bind","#ffbde7","apply","init","3GYHcje","714664eXjjYN","roughness","debu","input","minHeight","radius0","1005978rUNFKA","return (function() ","#6f6f6f","radius1","未部半径","2441420NoxpnF","4123320kiSwLo","lightningStorm","maxHeight","直度度","chain","244615QFeUKr","toString","log","value","gger"];return(B=function(){return t})()}const W=J;!function(t,i){const s=J,n=B();for(;;)try{if(364496===-parseInt(s(434))/1*(parseInt(s(482))/2)+-parseInt(s(448))/3*(parseInt(s(449))/4)+parseInt(s(460))/5+parseInt(s(455))/6+parseInt(s(466))/7+parseInt(s(443))/8*(-parseInt(s(474))/9)+parseInt(s(461))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(446)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){K(this,(function(){const t=J,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(476),"i"),n=it(t(447));i.test(n+t(465))&&s[t(437)](n+t(452))?it():n("0")}))()}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(446)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(t,i){const s=B();return(J=function(t,i){return s[t-=434]})(t,i)}Q(void 0,(function(){const t=J,i=function(){const t=J;let i;try{i=Function(t(456)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(472)]=i[t(472)]||{},n=[t(468),t(435),t(479),"error",t(481),t(442),t(436)];for(let e=0;e<n.length;e++){const i=Q[t(480)].prototype[t(444)](Q),r=n[e],o=s[r]||i;i.__proto__=Q[t(444)](Q),i[t(467)]=o[t(467)].bind(o),s[r]=i}}))();const tt=g({__name:W(462),setup(i){const s=W,n=v({cellSize:60,cellThickness:1,cellColor:s(457),sectionColor:s(471),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=m({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(445),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(464),value:.65,min:0,max:1,step:.01},radius0:{label:s(440),value:1,min:.1,max:10,step:.01},radius1:{label:s(459),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(478),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return b(),x(I,null,[P(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[P(Z,{minHeight:S(e)[m(469)],maxHeight:S(r)[m(469)],color:S(o)[m(469)],roughness:S(a)[m(469)],straightness:S(h)[m(469)],radius0:S(c)[m(469)],radius1:S(u)[m(469)],timeScale:S(l).value},null,8,[m(453),m(463),m(473),m(450),m(441),m(454),m(458),m(477)]),P(S(M),w({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),P(S(d))],64)}}});function it(t){function i(t){const s=J;if("string"==typeof t)return function(t){}[s(480)]("while (true) {}").apply(s(475));1!==(""+t/t).length||t%20==0?function(){return!0}[s(480)](s(451)+s(470)).call(s(438)):function(){return!1}.constructor(s(451)+s(470))[s(446)](s(439)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{tt as default};

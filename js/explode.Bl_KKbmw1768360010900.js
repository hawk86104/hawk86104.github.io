import{importShared as e}from"./3d-tiles-renderer.CvhCoabY1768360010900.js";import{useGLTF as t,OrbitControls_default as o}from"./index.CsTVQ09Z1768360010900.js";import{Pane as n}from"./tweakpane.BbuIEN141768360010900.js";import{Group as a,Tween as r}from"./tween.esm.DkV9_dcO1768360010900.js";import{_ as l}from"./lodash.BU2wveM-1768360010900.js";const{defineComponent:s}=await e("vue"),{createElementVNode:i,unref:c,createVNode:d,openBlock:p,createElementBlock:m,createCommentVNode:u,Suspense:w,withCtx:f,createBlock:h,resolveComponent:v,mergeProps:x}=await e("vue"),C=["object"],{reactive:j,onMounted:b,watch:k}=await e("vue"),B=await e("three"),g=s({__name:"explode",setup(e){const{state:s}=t("https://opensource.cdn.icegl.cn/model/operationTool/湖中小亭/湖中小亭.gltf"),g=j({alpha:!0,antialias:!0}),V=new a;b(()=>{const e=new n({title:"炸开与还原",expanded:!0}).addFolder({title:"参数"});e.addButton({title:"炸开",label:"炸开"}).on("click",()=>{s?.value.scene.children.forEach((e,t)=>{const o=l.cloneDeep(e.position);if(e.userData.explode={state:!1,explode:o},e.isMesh){const t=(new B.Box3).setFromObject(e),n=new B.Vector3;t.getCenter(n);const a=n.multiplyScalar(2);V.add(new r(o).to(a,3e3).onUpdate(t=>{e.position.copy(t)}).start().onComplete(e=>{}))}})}),e.addButton({title:"还原",label:"还原"}).on("click",()=>{s?.value.scene.children.forEach((e,t)=>{if(e.isMesh){const t=(new B.Box3).setFromObject(e),o=new B.Vector3;t.getCenter(o),V.add(new r(o).to(new B.Vector3(0,0,0),3e3).onUpdate(t=>{e.position.copy(t)}).start().onComplete(e=>{}))}})})}),k(()=>s.value,e=>{e?.scene&&e.scene.updateMatrixWorld(!0)});const y=function(){V?.update()};return(e,t)=>{const n=v("TresCanvas");return p(),h(n,x({clearColor:"#201919","window-size":""},g,{onLoop:y}),{default:f(()=>[t[0]||(t[0]=i("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,10,-28]},null,-1)),t[1]||(t[1]=i("TresAmbientLight",{intensity:1},null,-1)),d(c(o)),(p(),h(w,null,{default:f(()=>[c(s)?(p(),m("primitive",{key:0,object:c(s)?.scene},null,8,C)):u("",!0)]),_:1}))]),_:1},16)}}});export{g as default};

import{_ as t,cm as n,cn as e,co as o,cp as r,C as i,l as s,c1 as u,ak as c,am as a}from"./three.sQDbNBks1741583630766.js";import{P as l,e as f,o as p}from"./@tresjs.ZmhvXhx31741583630766.js";import{z as d}from"./three-custom-shader-material.fHkqEbki1741583630766.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1741583630766.js";import{d as m,b as y,a2 as w,w as b,o as I,H as _,u as v,r as x,a3 as C,e as A,f as S,g as j,N as B,j as T,aj as M,ak as R,F as L,M as O,J as E,m as F}from"./@vue.NRI7TcgI1741583630766.js";function Z(){const t=["16olgyvl","call","30TLPZVE","bind","693004nFXkmn","warn","__proto__","info","trace",'{}.constructor("return this")( )',"counter","6gBTJkj","log","constructor","650079tOLoeU","test","235887NDBRim","CITY_UNTRIANGULATED","721115fFDmZf","gger","stateObject","error","1224930CPpVIQ","while (true) {}","action","LANDMASS","50258SjHtvl","apply","chain","toString","ROADS","1303863mapvLO","name","length","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","4nqJMFe","traverse","exception","debu","string"];return(Z=function(){return t})()}!function(t,n){const e=G,o=Z();for(;;)try{if(114119===-parseInt(e(280))/1+-parseInt(e(291))/2*(-parseInt(e(270))/3)+-parseInt(e(300))/4+-parseInt(e(272))/5*(-parseInt(e(307))/6)+-parseInt(e(276))/7+parseInt(e(296))/8*(-parseInt(e(310))/9)+parseInt(e(298))/10*(parseInt(e(285))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const k=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function G(t,n){const e=Z();return(G=function(t,n){return e[t-=270]})(t,n)}!function(){k(this,(function(){const t=G,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(289),"i"),o=D("init");n.test(o+t(282))&&e[t(311)](o+"input")?D():o("0")}))()}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[G(281)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();H(void 0,(function(){const t=G;let n;try{n=Function("return (function() "+t(305)+");")()}catch(r){n=window}const e=n[t(288)]=n[t(288)]||{},o=[t(308),t(301),t(303),t(275),t(293),"table",t(304)];for(let i=0;i<o.length;i++){const n=H.constructor[t(290)][t(299)](H),r=o[i],s=e[r]||n;n[t(302)]=H.bind(H),n.toString=s[t(283)][t(299)](s),e[r]=n}}))();const P=async()=>{const t=G,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(292)]((n=>{const i=t;n[i(286)]===i(271)&&(e=n),n[i(286)]===i(279)&&(o=n),n[i(286)]===i(284)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function D(t){function n(t){const e=G;if(typeof t===e(295))return function(t){}.constructor(e(277))[e(281)](e(306));1!==(""+t/t)[e(287)]||t%20==0?function(){return!0}[e(309)](e(294)+e(273))[e(297)](e(278)):function(){return!1}[e(309)]("debu"+e(273))[e(281)](e(274)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function z(t,n){const e=W();return(z=function(t,n){return e[t-=243]})(t,n)}const $=z;!function(t,n){const e=z,o=W();for(;;)try{if(555436===parseInt(e(294))/1+-parseInt(e(255))/2+parseInt(e(245))/3+parseInt(e(246))/4*(parseInt(e(271))/5)+-parseInt(e(303))/6*(parseInt(e(276))/7)+parseInt(e(295))/8*(parseInt(e(282))/9)+-parseInt(e(268))/10*(parseInt(e(283))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(265)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){N(this,(function(){const t=z,n=new RegExp(t(269)),e=new RegExp(t(252),"i"),o=Q(t(308));n[t(259)](o+t(286))&&e[t(259)](o+t(270))?Q():o("0")}))()}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(265)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function W(){const t=["console","__csm","140ZwhWFp","renderOrder","bulidingsColor","isArray","color","side","6957ZbMPcM","98681qBlqMr","primitive","exception","chain","model","uColor","warn","landColor","clone","#ffff00","land","632557PDAMQu","376ahMATG","constructor",'{}.constructor("return this")( )',"counter","stateObject","#e523ff","log","uGradient","204528siuHsF","gger","length","bind","__proto__","init","gradient","object","trace","1986210SjWVdS","20YExLwZ","string","dispose","debu","DoubleSide","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","city","Color","1133592AMBoyC","value","uniforms","toString","test","boundingBox","opacity","material","forEach","computeBoundingBox","apply","buildingsModelCustomShader","setStyle","510tVApfl","function *\\( *\\)","input","930555IOZxBQ","uOpacity","#112233"];return(W=function(){return t})()}V(void 0,(function(){const t=z;let n;try{n=Function("return (function() "+t(297)+");")()}catch(r){n=window}const e=n[t(274)]=n[t(274)]||{},o=[t(301),t(289),"info","error",t(285),"table",t(244)];for(let i=0;i<o[t(305)];i++){const n=V[t(296)].prototype[t(306)](V),r=o[i],s=e[r]||n;n[t(307)]=V[t(306)](V),n[t(258)]=s[t(258)].bind(s),e[r]=n}}))();const q=[$(243)],J=m({__name:$(266),props:{model:{},bulidingsColor:{default:$(300)},landColor:{default:$(273)},topColor:{default:$(292)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(n){const e=$,o=n,r=y(0),i=o.model[e(253)];i[e(277)]=1001;const s=o.model[e(293)];(()=>{const n=e,{geometry:s}=i;s[n(264)](),s.computeBoundingSphere();const{max:u,min:c}=s[n(260)];if(i[n(262)][n(275)])return;const a=new d({baseMaterial:i.material,vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:u},uMin:{value:c},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[n(254)])(o[n(278)])},uOpacity:{value:o[n(261)]},uLightColor:{value:new(t[n(254)])("#ffffff")},uTopColor:{value:new(t[n(254)])(o.topColor)},uTime:r,uGradient:{value:o[n(309)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[n(250)]});i.material[n(248)](),i[n(262)]=a})();const{onLoop:u}=f();u((({delta:t})=>{r.value+=t})),w((()=>{const n=e;o.bulidingsColor&&i[n(262)][n(257)][n(288)][n(256)][n(267)](o[n(278)]),o[n(290)]&&((n,r)=>{const i=e;let u;"cu"===n||n===i(293)&&(u=Array[i(279)](s[i(262)])?s.material:[s.material],u[i(263)]((n=>{const e=i;n[r].setStyle(o[e(290)]),n[e(281)]=t[e(250)]})))})(n(293),n(280)),o[n(261)]&&(i[n(262)][n(257)][n(272)][n(256)]=o[n(261)])})),b(o,((t,n)=>{const o=e;i[o(262)][o(257)][o(302)][o(256)]=t[o(309)]}));const c=o[e(287)][e(287)][e(291)]();return(t,n)=>{const o=e;return I(),_(o(284),{object:v(c)},null,8,q)}}});function Q(t){function n(t){const e=z;if(typeof t===e(247))return function(t){}[e(296)](e(251))[e(265)](e(298));1!==(""+t/t)[e(305)]||t%20==0?function(){return!0}.constructor(e(249)+e(304)).call("action"):function(){return!1}[e(296)](e(249)+e(304))[e(265)](e(299)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const U=Y;function K(){const t=["apply","trace","__proto__","4943196OhCZPt","2725808TTdLgq","770277Eqvpaj","function *\\( *\\)","action","#FFF","30815teNVhe","object",'{}.constructor("return this")( )',"while (true) {}","gger","Wireframe","value","geometry","642AENIFx","innerHeight","bind","clone","uniforms","chain","2GOdVlL","material","fromEdgesGeometry","length","4diLAFV","exception","applyMatrix4","2737077vpjfLQ","error","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","set","innerWidth","620157SDgNiE","string","call","test","buildingsLines","matrix","counter","width","builds","toString","prototype","stateObject","linewidth","resolution","input","constructor","renderOrder","return (function() ","opacity","log","17687810hTgxRx","debu","style","color","console"];return(K=function(){return t})()}!function(t,n){const e=Y,o=K();for(;;)try{if(391917===-parseInt(e(170))/1*(-parseInt(e(128))/2)+parseInt(e(140))/3*(-parseInt(e(132))/4)+parseInt(e(174))/5*(-parseInt(e(122))/6)+-parseInt(e(135))/7+-parseInt(e(169))/8+-parseInt(e(168))/9+parseInt(e(160))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Y(165)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Y(t,n){const e=K();return(Y=function(t,n){return e[t-=122]})(t,n)}!function(){X(this,(function(){const t=Y,n=new RegExp(t(171)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=ot("init");n[t(143)](o+t(127))&&e.test(o+t(154))?ot():o("0")}))()}();const tt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();tt(void 0,(function(){const t=Y;let n;try{n=Function(t(157)+t(176)+");")()}catch(r){n=window}const e=n[t(164)]=n[t(164)]||{},o=[t(159),"warn","info",t(136),t(133),"table",t(166)];for(let i=0;i<o[t(131)];i++){const n=tt[t(155)][t(150)][t(124)](tt),r=o[i],s=e[r]||n;n[t(167)]=tt[t(124)](tt),n[t(149)]=s[t(149)][t(124)](s),e[r]=n}}))();const nt=[U(175)],et=m({__name:U(144),props:{builds:{},width:{default:1},color:{default:U(173)},opacity:{default:1},style:{default:U(179)}},setup(t){const u=U,c=t;let a=null,l=null;if(c[u(162)]===u(179)){const t=new n(c[u(148)][u(181)]);let i=(new e)[u(130)](t),s=new o({color:c[u(163)],linewidth:c[u(147)],opacity:c[u(158)],transparent:!0,depthWrite:!0,depthTest:!0});s[u(153)][u(138)](window[u(139)],window[u(123)]),a=new r(i,s),a[u(134)](c[u(148)][u(145)][u(125)]())}else{l={transparent:!0,uniforms:{uColor:{value:new i(c[u(163)])},uOpacity:{value:c[u(158)]}},vertexShader:u(137),fragmentShader:" \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "};const t=new n(c[u(148)][u(181)]),e=new s(l);a=new LineSegments(t,e),a[u(134)](c.builds[u(145)][u(125)]()),a.material[u(152)]=c[u(147)],a[u(156)]=1e3}return w((()=>{const t=u;"Shader"===c.style&&(c[t(163)]&&(l[t(126)].uColor[t(180)]=new i(c[t(163)])),c[t(158)]&&(l[t(126)].uOpacity[t(180)]=c[t(158)])),"Wireframe"===c[t(162)]&&(c.color&&(a[t(129)][t(163)]=new i(c.color)),c[t(158)]&&(a[t(129)][t(158)]=c[t(158)])),c[t(147)]&&(a[t(129)].linewidth=c[t(147)])})),(t,n)=>(I(),_("primitive",{object:v(a)},null,8,nt))}});function ot(t){function n(t){const e=Y;if(typeof t===e(141))return function(t){}[e(155)](e(177))[e(165)](e(146));1!==(""+t/t).length||t%20==0?function(){return!0}[e(155)](e(161)+"gger")[e(142)](e(172)):function(){return!1}.constructor(e(161)+e(178)).apply(e(151)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=ut;!function(t,n){const e=ut,o=ct();for(;;)try{if(367191===parseInt(e(454))/1+parseInt(e(459))/2*(-parseInt(e(464))/3)+-parseInt(e(419))/4+-parseInt(e(436))/5*(parseInt(e(466))/6)+parseInt(e(457))/7+-parseInt(e(424))/8+-parseInt(e(426))/9*(-parseInt(e(463))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ut(443)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=ut,n=new RegExp(t(425)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=pt(t(423));n[t(460)](o+"chain")&&e[t(460)](o+t(451))?pt():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ut(443)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ut(t,n){const e=ct();return(ut=function(t,n){return e[t-=417]})(t,n)}function ct(){const t=["ability","TresGridHelper","apply",'{}.constructor("return this")( )',"showAxesHelper","builds","#000000","constructor","city","autoRotate","input","error","bind","680556kGupLE","$slots","while (true) {}","2616159mMTscw","length","626jbPEfA","test","toString","stateObject","404190MMURaJ","2583arBvai","call","426834PnBOnm","console","TresDirectionalLight","perspectiveCameraRef","TresCanvas","trace","2240592lZxZfL","debu","tcRef","model","init","3464208IPBmed","function *\\( *\\)","144lscIyH","pagesShow","TresAxesHelper","__proto__","counter","prototype","return (function() ","table","info","#ffffff","5KsoKGT","gger","action","TresPerspectiveCamera","log"];return(ct=function(){return t})()}st(void 0,(function(){const t=ut,n=function(){const t=ut;let n;try{n=Function(t(432)+t(444)+");")()}catch(e){n=window}return n}(),e=n[t(467)]=n[t(467)]||{},o=[t(440),"warn",t(434),t(452),"exception",t(433),t(418)];for(let r=0;r<o[t(458)];r++){const n=st[t(448)][t(431)][t(453)](st),i=o[r],s=e[i]||n;n[t(429)]=st[t(453)](st),n[t(461)]=s[t(461)][t(453)](s),e[i]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]},ft=m({__name:rt(427),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=x({clearColor:n(447),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:c,toneMapping:a,disableRender:r.disableRender}),s=x({autoRotate:r[n(450)],enableDamping:!0});let l=null;r.showBuildings&&([e,o]=C((()=>P())),e=await e,o(),l=e);const f=y(),d=y();return(t,e)=>{const o=n,u=A(o(417));return I(),S(u,F({ref_key:o(421),ref:d},i,{"window-size":""}),{default:j((()=>[B(o(439),{ref_key:o(469),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),T(v(p),M(R(s)),null,16),e[0]||(e[0]=B("TresAmbientLight",{color:o(435)},null,-1)),e[1]||(e[1]=B(o(468),{position:[100,100,0],intensity:.5,color:o(435)},null,-1)),r.showBuildings&&v(l)?(I(),_(L,{key:0},[T(J,{model:v(l)},null,8,[o(422)]),T(et,{builds:v(l)[o(449)],color:"#000"},null,8,[o(446)])],64)):O("",!0),E(t[o(455)],o(441)),r[o(445)]?(I(),_(o(428),at)):O("",!0),r.showGridHelper?(I(),_(o(442),lt)):O("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=ut;if("string"==typeof t)return function(t){}.constructor(e(456)).apply(e(430));1!==(""+t/t)[e(458)]||t%20==0?function(){return!0}[e(448)](e(420)+e(437))[e(465)](e(438)):function(){return!1}[e(448)](e(420)+e(437))[e(443)](e(462)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{J as _,et as a,ft as b,P as l};

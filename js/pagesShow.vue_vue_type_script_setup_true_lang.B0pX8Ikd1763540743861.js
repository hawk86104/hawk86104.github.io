import{aW as e,z as s,cS as a}from"./three.rXKzP9fQ1763540743861.js";import{K as o}from"./@tresjs.BCHtwiaC1763540743861.js";import{i as t}from"./index.Crdf3MNx1763540743861.js";import{w as l,d as n,r,a as i,q as u,g as p,b as d,o as c,e as f,J as m,h as g,H as h,I as y,M as _,u as w,ac as v,ao as B,F as R,m as b}from"./@vue.Co_gxueH1763540743861.js";import{_ as T}from"./buildingsModelCustomShader.vue_vue_type_script_setup_true_lang.DybVEmhk1763540743861.js";import{_ as x}from"./buildingsLines.vue_vue_type_script_setup_true_lang.-zKLzVSO1763540743861.js";const A=async()=>{t.getResource("FBXLoader","https://opensource.cdn.icegl.cn/model/digitalCity/shanghai.FBX","shanghai.FBX");const e=t.getReactiveItem("shanghai.FBX");return new Promise((s,a)=>{const o=l(()=>e(),e=>{if(e){o();let a=null,t=null,l=null;e.traverse(e=>{"CITY_UNTRIANGULATED"===e.name&&(a=e),"LANDMASS"===e.name&&(t=e),"ROADS"===e.name&&(l=e)}),s({model:e,city:a,land:t,roads:l})}else a(new Error("FBX 加载失败，未得到模型"))})})},L={key:1,args:[1e3],position:[0,19,0]},j={key:2,args:[6e3,100],position:[0,19,0]},C=n({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},setup(t,{expose:l}){const n=t,C=r({clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:a,outputColorSpace:s,toneMapping:e,toneMappingExposure:1.2,renderMode:n.disableRender?"manual":"always"}),H={autoRotate:n.autoRotate,enableDamping:!0,makeDefault:!0};let M=i(null);const S=i(!1);u(async()=>{n.showBuildings&&(M.value=await A()),S.value=!0});const k=e=>{},D=i();return l({context:D,contextReady:S}),(e,s)=>{const a=p("TresCanvas");return c(),d(a,b({ref_key:"tcRef",ref:D},C,{"window-size":"",onReady:k}),{default:f(()=>[s[0]||(s[0]=m("TresPerspectiveCamera",{position:[600,750,-1221],fov:45,near:1,far:1e5},null,-1)),g(w(o),v(B(H)),null,16),s[1]||(s[1]=m("TresAmbientLight",{color:"#ffffff"},null,-1)),s[2]||(s[2]=m("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),n.showBuildings&&S.value?(c(),h(R,{key:0},[g(T,{model:w(M)},null,8,["model"]),g(x,{builds:w(M).city,color:"#000"},null,8,["builds"])],64)):y("",!0),_(e.$slots,"ability"),n.showAxesHelper?(c(),h("TresAxesHelper",L)):y("",!0),n.showGridHelper?(c(),h("TresGridHelper",j)):y("",!0)]),_:3},16)}}});export{C as _,A as l};

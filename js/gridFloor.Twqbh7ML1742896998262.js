import{_ as n,ap as t}from"./three.0CcRceKb1742896998262.js";import{o as r,J as o}from"./@tresjs.KzbsBNvc1742896998262.js";import{P as e}from"./tweakpane.ivGeiIdz1742896998262.js";import{d as i,a2 as s,o as c,H as u,N as a,aj as l,ak as f,r as d,e as v,f as g,g as p,j as h,u as m,al as C,m as y}from"./@vue.L-brCdZe1742896998262.js";import"./postprocessing.JNDZZkh81742896998262.js";import"./@vueuse.AtktgvWs1742896998262.js";const x=b;!function(n,t){const r=b,o=k();for(;;)try{if(346822===-parseInt(r(495))/1+parseInt(r(471))/2+-parseInt(r(474))/3*(-parseInt(r(444))/4)+parseInt(r(486))/5*(parseInt(r(450))/6)+parseInt(r(452))/7*(parseInt(r(455))/8)+parseInt(r(494))/9+-parseInt(r(453))/10)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const w=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[b(454)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function b(n,t){const r=k();return b=function(n,t){return r[n-=444]},b(n,t)}function k(){const n=["error","debu","bind","#7a91df","6290DGdjdA","console","__proto__","function *\\( *\\)","test","floorColor","gridColor","crossColor","2873907mMdEeP","366813hfgyuc","5564ALlAUP","uniforms","uCrossColor","TresPlaneGeometry","TresMesh","string","2460WhmtXm","init","7xFIjDK","14300660NCDyPP","apply","3862184wMgkGL","chain","constructor","uFloorColor","stateObject","action","toString","set","TresShaderMaterial","length","#c4d6ff","call","#ffffff","counter","gridThickness","uCross","480428kmnikQ","warn","DoubleSide","1263MvNLKW","uGridThickness","return (function() ","gger","value","info","uCrossThickness","Color"];return(k=function(){return n})()}!function(){w(this,(function(){const n=b,t=new RegExp(n(489)),r=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=I(n(451));t.test(o+n(456))&&r[n(490)](o+"input")?I():o("0")}))()}();const T=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[b(454)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();T(void 0,(function(){const n=b;let t;try{t=Function(n(476)+'{}.constructor("return this")( ));')()}catch(e){t=window}const r=t[n(487)]=t[n(487)]||{},o=["log",n(472),n(479),n(482),"exception","table","trace"];for(let i=0;i<o[n(464)];i++){const t=T[n(457)].prototype[n(484)](T),e=o[i],s=r[e]||t;t[n(488)]=T[n(484)](T),t[n(461)]=s[n(461)][n(484)](s),r[e]=t}}))();const D=["rotate-x"],W=i({__name:"gridFloor",props:{gridColor:{default:x(465)},gridThickness:{default:.02},crossColor:{default:x(485)},crossThickness:{default:.02},uCross:{default:.2},floorColor:{default:x(467)}},setup(t){const r=x,o=t,e={vertexShader:"varying vec2 vUv;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n}",fragmentShader:"uniform float uGridThickness;\nuniform vec3 uGridColor;\nuniform float uCrossScale;\nuniform float uCrossThickness;\nuniform float uCross;\nuniform vec3 uCrossColor;\nuniform vec3 uFloorColor;\n\nvarying vec2 vUv;\n\nfloat gridFloor(vec2 uv, vec2 lineWidth) {\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    vec2 targetWidth = invertLine ? 1.0 - lineWidth : lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    \n    \n    \n    \n    vec2 gridUV = abs(fract(uv) * 2.0 - 1.0);\n    gridUV = invertLine ? gridUV : 1.0 - gridUV;\n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    grid2 = invertLine ? 1.0 - grid2 : grid2;\n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nfloat crossFloor(vec2 uv, float scale, float thickness, float crossIntensity) {\n    vec2 lineWidth = vec2(thickness);\n\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    \n    vec2 targetWidth = lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    float cutOffX = abs(fract(uv.y) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n    float cutOffY = abs(fract(uv.x) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n\n    \n    \n    \n    \n    \n    \n    \n    float uvX = abs(fract(uv.x) * 2.0 - 1.0) + cutOffX;\n    float uvY = abs(fract(uv.y) * 2.0 - 1.0) + cutOffY;\n    vec2 gridUV = vec2(uvX, uvY);\n\n    \n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    \n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nvoid main()\n{\n    vec2 lineWidth = vec2(uGridThickness);\n    \n    vec2 uv = vUv * 20.0;\n\n    \n    float grid = gridFloor(uv, lineWidth);\n    \n    vec3 gridColor = mix(uFloorColor, uGridColor, vec3(grid));\n\n    \n    float crossUv = crossFloor(uv, uCrossScale, uCrossThickness, uCross);\n    \n    vec3 gridColor2 = mix(gridColor, uCrossColor, vec3(crossUv));\n    \n    vec3 color =  gridColor2;\n\n    gl_FragColor = vec4(color, 1.0);\n}",side:n[r(473)],transparent:!0,uniforms:{uFloorColor:{value:new(n[r(481)])(o[r(491)])},uGridThickness:{value:o[r(469)]},uGridColor:{value:new(n[r(481)])(o[r(492)])},uCrossThickness:{value:o.crossThickness},uCross:{value:o.uCross},uCrossColor:{value:new(n[r(481)])(o.crossColor)}}};return s((()=>{const n=r;e[n(445)][n(458)][n(478)][n(462)](o[n(491)]),e[n(445)].uGridColor[n(478)][n(462)](o[n(492)]),e[n(445)][n(446)].value[n(462)](o[n(493)]),e[n(445)][n(475)][n(478)]=o[n(469)],e[n(445)][n(480)].value=o.crossThickness,e[n(445)][n(470)][n(478)]=o.uCross})),(n,t)=>{const o=r;return c(),u(o(448),{"rotate-x":-Math.PI/2},[t[0]||(t[0]=a(o(447),{args:[10,10,32,32]},null,-1)),a(o(463),l(f(e)),null,16)],8,D)}}});function I(n){function t(n){const r=b;if(typeof n===r(449))return function(n){}[r(457)]("while (true) {}").apply(r(468));1!==(""+n/n)[r(464)]||n%20==0?function(){return!0}.constructor(r(483)+r(477))[r(466)](r(460)):function(){return!1}[r(457)](r(483)+r(477))[r(454)](r(459)),t(++n)}try{if(n)return t;t(0)}catch(r){}}function j(n,t){const r=F();return j=function(n,t){return r[n-=464]},j(n,t)}!function(n,t){const r=j,o=F();for(;;)try{if(522177===-parseInt(r(485))/1+parseInt(r(509))/2+-parseInt(r(505))/3*(-parseInt(r(483))/4)+-parseInt(r(471))/5+parseInt(r(465))/6*(parseInt(r(491))/7)+-parseInt(r(514))/8+parseInt(r(499))/9*(-parseInt(r(506))/10))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r.apply(t,arguments);return r=null,n}}:function(){};return n=!1,o}}();!function(){_(this,(function(){const n=j,t=new RegExp("function *\\( *\\)"),r=new RegExp(n(468),"i"),o=G(n(507));t[n(464)](o+n(467))&&r.test(o+n(476))?G():o("0")}))()}();const A=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[j(474)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function F(){const n=["4350ZecUTc","neg-z.jpg","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","网格厚度","constructor","1055990Shstdl","TresDirectionalLight","pos-z.jpg","apply","十字颜色","input","debu","log","gridColor","addBinding","string","#ffffff","110140fNcgfX","bind","10795VSTRDN","TresTorusKnotGeometry","#ef57ff","__proto__","crossColor","#000000","385dydnsm","TresMeshStandardMaterial","prototype","call","TresMesh","gger","neg-y.jpg","toString","387kUnvCX","十字厚度","length","info","TresAmbientLight",'{}.constructor("return this")( )',"96ZWCDGL","91770JMpryl","init","resource.cos","645450bYtlEB","pos-x.jpg","table","TresCanvas","error","839512kqmFIP","pos-y.jpg","path","stateObject","neg-x.jpg","#ff33ff","console","https://opensource.cdn.icegl.cn","exception","test"];return(F=function(){return n})()}A(void 0,(function(){const n=j;let t;try{t=Function("return (function() "+n(504)+");")()}catch(e){t=window}const r=t[n(520)]=t[n(520)]||{},o=[n(478),"warn",n(502),n(513),n(522),n(511),"trace"];for(let i=0;i<o[n(501)];i++){const t=A.constructor[n(493)][n(484)](A),e=o[i],s=r[e]||t;t[n(488)]=A.bind(A),t[n(498)]=s[n(498)].bind(s),r[e]=t}}))();const U=i({__name:"gridFloor",setup(n){const i=j,s=d({alpha:!0,toneMapping:t,windowSize:!0,clearColor:3355443}),u=d({enableDamping:!0,autoRotate:!1}),x=d({gridColor:i(482),crossColor:i(487),floorColor:i(490),gridThickness:.02,crossThickness:.03,uCross:.29}),w=new e;return w[i(480)](x,i(479),{label:"网格颜色"}),w[i(480)](x,"gridThickness",{label:i(469),min:.01,max:1,step:.01}),w[i(480)](x,i(489),{label:i(475)}),w[i(480)](x,"crossThickness",{label:i(500),min:.01,max:1,step:.01}),w[i(480)](x,"uCross",{label:"十字大小",min:.01,max:1,step:.01}),w[i(480)](x,"floorColor",{label:"地板颜色"}),(n,t)=>{const e=i,d=v(e(512));return c(),g(d,y(s,{"window-size":""}),{default:p((()=>[t[0]||(t[0]=a("TresPerspectiveCamera",{position:[6,6,6],fov:45,near:.1,far:1e3},null,-1)),h(m(r),l(f(u)),null,16),t[1]||(t[1]=a(e(503),{intensity:.5},null,-1)),t[2]||(t[2]=a(e(472),{position:[15,15,15],intensity:1},null,-1)),t[3]||(t[3]=a(e(495),{position:[0,.5,0],scale:.2},[a(e(486),{args:[1,.35,100,32]}),a(e(492),{color:e(519),roughness:0,metalness:1})],-1)),h(W,l(f(x)),null,16),(c(),g(C,null,{default:p((()=>[h(m(o),{files:[e(510),e(518),e(515),e(497),e(473),e(466)],path:e(521)+"/images/skyBox/6jpg/"},null,8,[e(516)])])),_:1}))])),_:1},16)}}});function G(n){function t(n){const r=j;if(typeof n===r(481))return function(n){}[r(470)]("while (true) {}").apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[r(470)](r(477)+r(496))[r(494)]("action"):function(){return!1}.constructor("debugger")[r(474)](r(517)),t(++n)}try{if(n)return t;t(0)}catch(r){}}export{U as default};

import{p as t,$ as n,W as e,d as r}from"./@tresjs.qmCJ68Vp1722409645193.js";import{_ as o}from"./index.wA-ySsCv1722409645193.js";import{a as s}from"./index.mNcWtqYh1722409645193.js";import{a6 as i,a as c,N as u,M as a,q as l,cA as p}from"./three.6E5muTWJ1722409645193.js";import{P as f}from"./tweakpane.yHWGBmom1722409645193.js";import{I as g,C as h,N as m,c as d,d as y,a as w}from"./three-mesh-bvh.7hCYy4D71722409645193.js";import{d as b,a4 as j,b as I,a1 as _,o as v,D as x,J as A,u as C,F as T,r as z,e as B,j as k,g as M,m as X,f as S,al as Z}from"./@vue.9bHx4gg21722409645193.js";import"./@vueuse.NFOCyQQL1722409645193.js";import"./default.vue_vue_type_script_setup_true_lang.MqZzmSQO1722409645193.js";import"./@fesjs.QnrTigdw1722409645193.js";import"./vue-router.14za1TD_1722409645193.js";import"./lodash-es.nFpJXAf-1722409645193.js";import"./@qlin.yHhFDldE1722409645193.js";import"./pinia.QNLxZzKW1722409645193.js";import"./@floating-ui.BPbuo5Gx1722409645193.js";import"./@juggle.7yjBMqoW1722409645193.js";import"./three-mesh-ui.module.fXO2jpbD1722409645193.js";import"./three-stdlib.lGHJYkjv1722409645193.js";import"./@pmndrs.9AsxXQ-l1722409645193.js";import"./object-hash.Une5niKX1722409645193.js";import"./@amap.VDWlHANn1722409645193.js";import"./jszip.EBLL5bdU1722409645193.js";function F(){const t=["pointerdown","action","while (true) {}","log","return (function() ","clientX","338syCXWC","string","1059895oXRxhC","length","bind","1311162nCQmXq","9HUbDtu","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","pointermove","call","pointerup","error","pointerType","constructor","enabled","gger","__proto__","Raycaster","value","init","warn","test","function *\\( *\\)","apply","info","addEventListener","console","10992056HbrcjA","firstHitOnly","3314040IBPBnp","trace","1393ucPUxd","stateObject","table","chain","1427656lyreMe","toString","debu","clientY","input","intersectObject","innerHeight","2793042TbxmzU",'{}.constructor("return this")( )',"setFromCamera"];return(F=function(){return t})()}!function(t,n){const e=O,r=F();for(;;)try{if(347869===parseInt(e(409))/1*(-parseInt(e(429))/2)+parseInt(e(434))/3+parseInt(e(413))/4+parseInt(e(431))/5+parseInt(e(407))/6+parseInt(e(420))/7+-parseInt(e(405))/8*(parseInt(e(435))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const R=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[O(401)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){R(this,(function(){const t=O,n=new RegExp(t(400)),e=new RegExp(t(437),"i"),r=U(t(449));n.test(r+t(412))&&e[t(399)](r+t(417))?U():r("0")}))()}();const E=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function O(t,n){const e=F();return(O=function(t,n){return e[t-=399]})(t,n)}E(void 0,(function(){const t=O,n=function(){const t=O;let n;try{n=Function(t(427)+t(421)+");")()}catch(e){n=window}return n}(),e=n[t(404)]=n.console||{},r=[t(426),t(450),t(402),t(441),"exception",t(411),t(408)];for(let o=0;o<r[t(432)];o++){const n=E[t(443)][t(436)][t(433)](E),s=r[o],i=e[s]||n;n[t(446)]=E[t(433)](E),n[t(414)]=i[t(414)][t(433)](i),e[s]=n}}))();function U(t){function n(t){const e=O;if(typeof t===e(430))return function(t){}[e(443)](e(425))[e(401)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(443)]("debugger")[e(439)](e(424)):function(){return!1}.constructor(e(415)+e(445))[e(401)](e(410)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const N=P;function P(t,n){const e=Y();return(P=function(t,n){return e[t-=425]})(t,n)}!function(t,n){const e=P,r=Y();for(;;)try{if(165799===parseInt(e(493))/1*(parseInt(e(462))/2)+-parseInt(e(435))/3*(-parseInt(e(474))/4)+parseInt(e(495))/5+parseInt(e(478))/6*(parseInt(e(460))/7)+parseInt(e(458))/8*(parseInt(e(503))/9)+-parseInt(e(476))/10+-parseInt(e(467))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const V=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[P(444)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function Y(){const t=["console","constructor","203912DXNtvo","intersectsBox","1186346lGyuVx","material","578KZsrGk","getZ","setZ","targetMesh.value init","info","4084256wcIBGU","trace","setX","#023249","count","chain","toString","644mNXXNZ","needsUpdate","2224930ugyxtE","getY","6CoTFan","setScalar","TresMesh","value","warn","TresMeshStandardMaterial","brushMesh","BufferGeometry","enabled","intersectObject","push","string","setUsage","error","debu","239DKIxGX","MeshStandardMaterial","1264615lJgrUV","stateObject","length","applyMatrix4","counter","setAttribute","点击按钮","Vector3","9ykcwei","input","call","attributes","normal","radius","Sphere","boundsTree","scale",'{}.constructor("return this")( )',"controls","return (function() ","Vector2","log","bind","intersectsSphere","model","disposeBoundsTree","visible","raycast","function *\\( *\\)","set","position","4521FAorgp","BufferAttribute","TresSphereGeometry","test","click","copy","computeBoundsTree","firstHitOnly","containsPoint","apply","color","active","table","index","addButton","getX","shapecast","prototype","center","geometry","while (true) {}"];return(Y=function(){return t})()}!function(){V(this,(function(){const t=P,n=new RegExp(t(432)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=L("init");n[t(438)](r+t(472))&&e.test(r+t(504))?L():r("0")}))()}();const $=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[P(444)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();$(void 0,(function(){const t=P;let n;try{n=Function(t(514)+t(512)+");")()}catch(o){n=window}const e=n[t(456)]=n[t(456)]||{},r=[t(425),t(482),t(466),t(491),"exception",t(447),t(468)];for(let s=0;s<r.length;s++){const n=$[t(457)][t(452)][t(426)]($),o=r[s],i=e[o]||n;n.__proto__=$[t(426)]($),n[t(473)]=i[t(473)].bind(i),e[o]=n}}))();const G=[N(454),N(461)],H=[A(N(437),{args:[1,40,40]},null,-1),A(N(483),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)],W=[N(454)],q=[A(N(483),{color:N(470),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)],D=b({__name:N(428),props:{controls:{}},async setup(r){const o=N;let s,b;const z=r;(()=>{const t=P;i[t(485)].prototype[t(441)]=d,i[t(485)].prototype[t(429)]=y,l[t(452)][t(431)]=w})();const B=([s,b]=j((()=>e(p,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,b(),s),k=new(i[o(494)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),M=new Uint8Array(3*B.attributes.position[o(471)]);M.fill(255);const X=new c(M,3,!0);X[o(490)](u),B[o(500)](o(445),X);const S=I(null),Z=I(null),F=I(!1),R=I(-1),E=I(.2),U=new(i[o(515)]),{camera:V,raycaster:Y}=t(),$=15/255,D=78/255,L=85/255;let J=null;_((()=>{const t=o;S[t(481)]&&(console[t(425)](t(465),S[t(481)]),S[t(481)][t(454)].computeBoundsTree(),J=B[t(510)],((t,n,e,r,o,s)=>{const c=O;window.addEventListener(c(438),(e=>{const r=c;t.x=e[r(428)]/window.innerWidth*2-1,t.y=-e[r(416)]/window[r(419)]*2+1,n.value=!0})),window[c(403)](c(423),(u=>{const a=c;t.x=u.clientX/window.innerWidth*2-1,t.y=-u[a(416)]/window[a(419)]*2+1,r[a(448)]=u.button;const l=new(i[a(447)]);l[a(422)](t,e[a(448)]),l[a(406)]=!0;const p=l[a(418)](o[a(448)],!0);n.value=!0,s[a(444)]=0===p[a(432)]}),!0),window[c(403)](c(440),(t=>{const e=c;r[e(448)]=-1,"touch"===t[e(442)]&&(n[e(448)]=!1)}),!0)})(U,F,V,R,S,z[t(513)][t(481)]))}));const{onLoop:K}=n();K((()=>{const t=o,n=B[t(448)];if(Z[t(481)])if(z[t(513)][t(481)][t(446)]||!F.value)Z[t(481)][t(430)]=!1;else{Z.value[t(511)][t(479)](E[t(481)]),Y[t(481)].setFromCamera(U,V[t(481)]),Y[t(481)][t(442)]=!0;const e=Y[t(481)][t(487)](S.value,!0);if(e[t(497)]){Z[t(481)][t(434)][t(440)](e[0].point),z[t(513)][t(481)][t(486)]=!1,Z[t(481)][t(430)]=!0;const r=new a;r.copy(S[t(481)].matrixWorld).invert();const o=new(i[t(509)]);o[t(453)][t(440)](Z[t(481)][t(434)])[t(498)](r),o[t(508)]=100*E[t(481)];const s=[],c=new(i[t(502)]);if(null==J||J[t(451)]({intersectsBounds:n=>{const e=t,r=o[e(459)](n),{min:s,max:i}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(c[e(433)](0===t?s.x:i.x,0===n?s.y:i.y,0===r?s.z:i.z),!o[e(443)](c))return g;return h}return r?g:m},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n[i(427)](o)){const t=3*e;s[i(488)](t,t+1,t+2)}return!1}}),0===R[t(481)]||2===R.value){let e=1,r=1,o=1;0===R[t(481)]&&(e=$,r=D,o=L);for(let i=0,c=s[t(497)];i<c;i++){const c=n[t(450)](s[i]);X[t(469)](c,e),X.setY(c,r),X[t(464)](c,o)}X[t(475)]=!0}}else Z[t(481)][t(430)]=!1,z[t(513)][t(481)].enabled=!0}}));const Q=(new f)[o(449)]({title:o(501),label:"生成模型"}),tt=new(i[o(485)]);return Q.on(o(439),(()=>{const t=o,n=[],e=[];for(let o=0;o<X[t(471)];o++)X.getX(o)===$&&X[t(477)](o)===D&&X.getZ(o)===L&&(n.push(B[t(506)][t(434)][t(450)](o),B.attributes.position[t(477)](o),B[t(506)][t(434)][t(463)](o)),e[t(488)](B.attributes[t(507)][t(450)](o),B[t(506)][t(507)][t(477)](o),B.attributes[t(507)].getZ(o)));const r=new Float32Array(n);tt[t(500)]("position",new(i[t(436)])(r,3)),tt[t(500)](t(507),new(i[t(436)])(r,3))})),(t,n)=>{const e=o;return v(),x(T,null,[A(e(480),{ref_key:"targetMesh",ref:S,geometry:C(B),scale:.005,material:C(k)},null,8,G),A(e(480),{ref_key:e(484),ref:Z,visible:!1},H,512),A(e(480),{geometry:C(tt),position:[-2,-2,2],scale:.005},q,8,W)],64)}}});function L(t){function n(t){const e=P;if(typeof t===e(489))return function(t){}[e(457)](e(455)).apply(e(499));1!==(""+t/t).length||t%20==0?function(){return!0}[e(457)](e(492)+"gger")[e(505)]("action"):function(){return!1}[e(457)](e(492)+"gger").apply(e(496)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const J=tt;!function(t,n){const e=tt,r=rt();for(;;)try{if(270789===parseInt(e(252))/1*(parseInt(e(237))/2)+-parseInt(e(257))/3*(parseInt(e(223))/4)+-parseInt(e(227))/5*(parseInt(e(230))/6)+parseInt(e(232))/7*(-parseInt(e(226))/8)+-parseInt(e(242))/9+-parseInt(e(241))/10*(parseInt(e(235))/11)+-parseInt(e(218))/12*(-parseInt(e(255))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const K=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){K(this,(function(){const t=tt,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(229),"i"),r=st(t(228));n.test(r+t(245))&&e[t(244)](r+t(225))?st():r("0")}))()}();const Q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[tt(259)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function tt(t,n){const e=rt();return(tt=function(t,n){return e[t-=216]})(t,n)}Q(void 0,(function(){const t=tt;let n;try{n=Function("return (function() "+t(239)+");")()}catch(o){n=window}const e=n[t(247)]=n.console||{},r=[t(234),t(224),t(248),"error",t(221),t(236),t(216)];for(let s=0;s<r.length;s++){const n=Q[t(231)][t(260)][t(251)](Q),o=r[s],i=e[o]||n;n[t(219)]=Q[t(251)](Q),n[t(243)]=i[t(243)][t(251)](i),e[o]=n}}))();const nt=A(J(256),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1),et=A(J(246),{intensity:1},null,-1);function rt(){const t=["call","3710FEVFbc","3770487OehWIY","toString","test","chain","TresAmbientLight","console","info","gger","pos-z.jpg","bind","3806KAlCPC","stateObject","action","39SvbOeg","TresPerspectiveCamera","2316uHYBcz","neg-x.jpg","apply","prototype","trace","debu","4185408vSrVoz","__proto__","length","exception","counter","824zqNANL","warn","input","8fpiVoC","515BlfQou","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","12162pyJstD","constructor","420315cAyUCp","string","log","10978YsXMIm","table","232xgofrr","controlsRef",'{}.constructor("return this")( )'];return(rt=function(){return t})()}const ot=b({__name:"collectTriangles",setup(t){const n=z({clearColor:"#999999",antialias:!0}),e=z({autoRotate:!1}),i=I(null);return(t,c)=>{const u=tt,a=B("TresCanvas");return v(),x(T,null,[k(C(o)),k(a,X(n,{"window-size":""}),{default:M((()=>[nt,k(C(r),X({ref_key:u(238),ref:i},e),null,16),et,(v(),S(Z,null,{default:M((()=>[k(D,{controls:i.value},null,8,["controls"])])),_:1})),(v(),S(Z,null,{default:M((()=>[k(C(s),{background:!1,files:["pos-x.jpg",u(258),"pos-y.jpg","neg-y.jpg",u(250),"neg-z.jpg"],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)],64)}}});function st(t){function n(t){const e=tt;if(typeof t===e(233))return function(t){}.constructor("while (true) {}").apply(e(222));1!==(""+t/t)[e(220)]||t%20==0?function(){return!0}.constructor(e(217)+e(249))[e(240)](e(254)):function(){return!1}[e(231)]("debu"+e(249))[e(259)](e(253)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{ot as default};

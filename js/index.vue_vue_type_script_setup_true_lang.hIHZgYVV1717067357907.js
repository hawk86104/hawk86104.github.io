import{a1 as R,ad as M,ak as w,a7 as I,X as L,b9 as C,o as E,c as S,L as h,ap as D,a9 as F}from"./vendor.Bhln4awG1717067357907.js";import"./vanilla.esm.5.5.0.9FAAD2YM1717067357907.js";import{u as k}from"./index.eWH4GKnr1717067357907.js";import{M as b}from"./MeshTransmissionMaterial.yF0OFL2V1717067357907.js";import{M as O}from"./MeshDiscardMaterial.tCqWbDGx1717067357907.js";const U=["buffer","side"],X=0,J=R({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(T,{expose:g}){const a=M(),{extend:x,scene:l,renderer:s,camera:u}=w(),e=M(),t=T;x({MeshTransmissionMaterial:b});function _(n,m){let p;return n.traverse(r=>{r.isMesh&&r.material&&r.material.uuid===m&&(p=r)}),p}const y=new O,{onBeforeLoop:B}=F(),o=k({width:t.fboResolution,height:t.fboResolution,isLoop:!1}),i=k({width:t.fboResolution,height:t.fboResolution,isLoop:!1});I(async()=>{await L(),e.value=_(l.value,a.value.uuid)});let d,v,f,c;return B(({elapsed:n})=>{a.value.time=n,a.value.buffer===i.value.texture&&e.value&&(f=s.value.toneMapping,d=l.value.background,v=a.value.envMapIntensity,c=e.value.material.side,e.value.material=y,t.backside&&(s.value.setRenderTarget(o.value),s.value.render(l.value,u.value),e.value.material=a.value,e.value.material.thickness=t.backsideThickness,e.value.material.buffer=o.value.texture,e.value.material.side=C,e.value.material.envMapIntensity=X),s.value.setRenderTarget(i.value),s.value.render(l.value,u.value),e.value.material.buffer=i.value.texture,e.value.material=a.value,e.value.material.thickness=t.thickness,e.value.material.side=c,e.value.material.envMapIntensity=v,l.value.background=d,s.value.setRenderTarget(null),s.value.toneMapping=f)}),g({root:a,constructor:b}),(n,m)=>(E(),S("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:a,buffer:h(i).texture,side:h(D)},null,8,U))}});export{J as _};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,ap as v,aq as m,y as g,bb as _,C as y,Z as x,W as b,l as I,m as S,n as w,A as M,f as R,V as A,g as E,a6 as T,bR as D,k as z,ba as P,j as O,bx as C,d as k,aa as F,B,a as j,aP as U,e as N,M as L,al as H,a7 as Z,c0 as V,c1 as G,h as $,a3 as W}from"./three.0bBjBDi41721298764655.js";import{p as q,W as Y,$ as K}from"./@tresjs.iXEJQd7J1721298764655.js";import{R as Q}from"./three-stdlib.z4qNuiyK1721298764655.js";import{Z as X,b as J,a as nn,w as tn,u as en,d as rn,U as on,a4 as an,a2 as cn,o as sn,D as un,G as ln,I as fn,a8 as pn,a1 as dn,q as hn,f as vn,J as mn,a9 as gn,r as _n,M as yn,X as xn,t as bn,F as In,a6 as Sn,m as wn}from"./@vue.Q1VpS3901721298764655.js";import{M as Mn,a as Rn,C as An}from"./@pmndrs.18kFuzzQ1721298764655.js";import{o as En}from"./object-hash.eR6rYsIK1721298764655.js";var Tn=On;!function(n,t){for(var e=On,r=Pn();;)try{if(706376===-parseInt(e(251))/1*(parseInt(e(240))/2)+parseInt(e(254))/3*(parseInt(e(231))/4)+parseInt(e(256))/5+parseInt(e(267))/6+parseInt(e(252))/7+parseInt(e(230))/8*(parseInt(e(244))/9)+parseInt(e(250))/10*(-parseInt(e(226))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[On(266)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Dn(this,(function(){var n=On,t=new RegExp(n(261)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Fn(n(237));t[n(248)](r+n(253))&&e[n(248)](r+n(257))?Fn():r("0")}))()}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[On(266)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pn(){var n=["string","map","counter","function *\\( *\\)","warn","while (true) {}","info","length","apply","21678onZmhU","table","__proto__","12421915Qnzlhn","virtualScene","error","material","8nadjOf","5275448SKbCsk","bind","destructor","dispose","gger","trace","init","remove","return (function() ","2jeYuhI","debu","console",'{}.constructor("return this")( )',"4073022vPVUdV","toString","exception","constructor","test","add","20qtMkRo","706234voamcf","8632022sksCjK","chain","3xcQpuS","geometry","3314805ufefhd","input"];return(Pn=function(){return n})()}function On(n,t){var e=Pn();return(On=function(n,t){return e[n-=224]})(n,t)}zn(void 0,(function(){var n,t=On;try{n=Function(t(239)+t(243)+");")()}catch(s){n=window}for(var e=n[t(242)]=n.console||{},r=["log",t(262),t(264),t(228),t(246),t(224),t(236)],o=0;o<r[t(265)];o++){var i=zn.constructor.prototype[t(232)](zn),a=r[o],c=e[a]||i;i[t(225)]=zn[t(232)](zn),i[t(245)]=c.toString[t(232)](c),e[a]=i}}))();class Cn extends s{constructor(){var n=On;super(),this[n(227)]=null,this.virtualScene=new u}add(...n){var t=On;return this[t(227)][t(249)](...n),this}[Tn(233)](){var n=Tn;this.virtualScene.traverse((n=>{var t=On;n instanceof l&&(n[t(255)][t(234)](),n[t(229)].dispose(),n[t(229)][t(259)]&&n[t(229)][t(259)][t(234)](),this[t(227)][t(238)](n))})),this[n(227)]=null}}const kn=Cn;function Fn(n){function t(n){var e=On;if(typeof n===e(258))return function(n){}[e(247)](e(263))[e(266)](e(260));1!==(""+n/n)[e(265)]||n%20==0?function(){return!0}[e(247)](e(241)+"gger").call("action"):function(){return!1}[e(247)]("debu"+e(235))[e(266)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bn=Ln;!function(n,t){const e=Ln,r=Nn();for(;;)try{if(200037===-parseInt(e(284))/1*(-parseInt(e(313))/2)+-parseInt(e(297))/3+parseInt(e(288))/4+-parseInt(e(301))/5+parseInt(e(279))/6*(parseInt(e(292))/7)+-parseInt(e(308))/8*(parseInt(e(291))/9)+-parseInt(e(286))/10*(-parseInt(e(289))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(319)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jn(this,(function(){const n=Ln,t=new RegExp(n(309)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Zn("init");t[n(294)](r+n(318))&&e[n(294)](r+n(317))?Zn():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(319)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nn(){const n=["counter","return (function() ","kiara/kiara_1_dawn_1k.hdr","60DjOXoe","outdoor/satara_night_1k.hdr","stateObject","gger","info","2908mpVriO",'{}.constructor("return this")( )',"461500mpbxfU","debu","401132bWfhAC","11kyLORW","outdoor/snowy_forest_path_01_1k.hdr","390843QLvUkb","171066Adslwj","studio/poly_haven_studio_1k.hdr","test","while (true) {}","prototype","536088bimHRl","warn","city/shanghai_bund_1k.hdr","log","178650ysSkQO","action","constructor","table","length","exception","__proto__","16OrMVbg","function *\\( *\\)","indoor/small_hangar_01_1k.hdr","bind","error","76tQHPns","console","call","string","input","chain","apply","toString","venice/venice_sunset_1k.hdr"];return(Nn=function(){return n})()}function Ln(n,t){const e=Nn();return(Ln=function(n,t){return e[n-=278]})(n,t)}Un(void 0,(function(){const n=Ln;let t;try{t=Function(n(323)+n(285)+");")()}catch(o){t=window}const e=t.console=t[n(314)]||{},r=[n(300),n(298),n(283),n(312),n(306),n(304),"trace"];for(let i=0;i<r[n(305)];i++){const t=Un[n(303)][n(296)][n(311)](Un),o=r[i],a=e[o]||t;t[n(307)]=Un[n(311)](Un),t.toString=a[n(320)].bind(a),e[o]=t}}))();const Hn={sunset:Bn(321),studio:Bn(293),city:"city/canary_wharf_1k.hdr",umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:Bn(280),forest:"outood/mossy_forest_1k.hdr",snow:Bn(290),dawn:Bn(278),hangar:Bn(310),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:"city/modern_buildings_2_1k.hdr",shangai:Bn(299)};function Zn(n){function t(n){const e=Ln;if(typeof n===e(316))return function(n){}[e(303)](e(295))[e(319)](e(322));1!==(""+n/n)[e(305)]||n%20==0?function(){return!0}.constructor(e(287)+e(282))[e(315)](e(302)):function(){return!1}[e(303)]("debugger")[e(319)](e(281)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Vn(){const n=["chain","background","1407447tsayeA","4944IeMOMS","isColor","keys","55msNFas","length","join","backgroundBlurriness","test","__proto__","Failed to load environment map: ","stateObject","10ruMCcT","log","return (function() ","isArray","gger","95720Qymkfm","Preset must be one of: ","function *\\( *\\)","9086CdpXTc","texture","trace","environment","warn","info","value","exception","toString","864876bzspOp","10RSYDzX","debu","73177jdgGSe","bind","mapping","7740spcTyq","error","input","constructor","1374308MKjDYF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","action","119baEsHS","setPath"];return(Vn=function(){return n})()}!function(n,t){const e=$n,r=Vn();for(;;)try{if(184212===parseInt(e(319))/1*(-parseInt(e(317))/2)+-parseInt(e(316))/3+parseInt(e(326))/4+parseInt(e(338))/5*(parseInt(e(335))/6)+parseInt(e(330))/7*(-parseInt(e(351))/8)+-parseInt(e(334))/9*(-parseInt(e(346))/10)+-parseInt(e(354))/11*(-parseInt(e(322))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $n(n,t){const e=Vn();return($n=function(n,t){return e[n-=313]})(n,t)}!function(){Gn(this,(function(){const n=$n,t=new RegExp(n(353)),e=new RegExp(n(327),"i"),r=qn("init");t[n(342)](r+n(332))&&e[n(342)](r+n(324))?qn():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(328)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Wn(void 0,(function(){const n=$n;let t;try{t=Function(n(348)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=[n(347),n(358),n(359),n(323),n(314),"table",n(356)];for(let i=0;i<r[n(339)];i++){const t=Wn[n(325)].prototype.bind(Wn),o=r[i],a=e[o]||t;t[n(343)]=Wn[n(320)](Wn),t.toString=a[n(315)].bind(a),e[o]=t}}))();function qn(n){function t(n){const e=$n;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(328)]("counter");1!==(""+n/n)[e(339)]||n%20==0?function(){return!0}[e(325)](e(318)+e(350)).call(e(329)):function(){return!1}[e(325)](e(318)+"gger").apply(e(345)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Qn,r=Kn();for(;;)try{if(108669===-parseInt(e(493))/1+parseInt(e(519))/2+parseInt(e(508))/3*(parseInt(e(527))/4)+parseInt(e(488))/5+parseInt(e(515))/6+parseInt(e(496))/7+parseInt(e(491))/8*(-parseInt(e(495))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(528)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(){const n=["dispose","type","resolution","near","gger","far","152dYiZIo","apply","useDefaultScene","debu","symbol","while (true) {}","init","texture","default","string","action","length","859695GpHqAd","test","input","380552ZVqxLN","frames","7273lhfXAP","console","90rCLDsQ","688387JLiqji","isArray","bind","environment","log","trace","value","counter","function *\\( *\\)","$slots","call","generateMipmaps","9138rVXVIR","background","update","stateObject","TresEnvSence","destructor","toString","961938zbbUqm","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","table","90562uSBhIJ","warn"];return(Kn=function(){return n})()}function Qn(n,t){const e=Kn();return(Qn=function(n,t){return e[n-=478]})(n,t)}!function(){Yn(this,(function(){const n=Qn,t=new RegExp(n(504)),e=new RegExp(n(516),"i"),r=nt(n(482));t[n(489)](r+"chain")&&e.test(r+n(490))?nt():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Xn(void 0,(function(){const n=Qn,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(494)]=t[n(494)]||{},r=[n(500),n(520),"info","error","exception",n(518),n(501)];for(let o=0;o<r[n(487)];o++){const t=Xn[n(517)].prototype.bind(Xn),i=r[o],a=e[i]||t;t.__proto__=Xn[n(498)](Xn),t[n(514)]=a[n(514)][n(498)](a),e[i]=t}}))();const Jn=rn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Qn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=q();let l=null,y=J(null),x=null;const b=J(null);on((()=>{var n,t;const e=Qn;null==(n=b[e(502)])||n[e(513)](),null==(t=y[e(502)])||t.dispose()}));const{onBeforeLoop:I}=K();let S=1;I((()=>{const n=Qn;x&&b[n(502)]&&y.value&&(i[n(492)]===1/0||S<i[n(492)])&&(i.useDefaultScene?x[n(510)](s[n(502)],u[n(502)]):x[n(510)](s[n(502)],pn(b[n(502)].virtualScene)),S++)}));const w=([r,o]=an((()=>async function(n,t){const e=$n,{scene:r}=q(),{preset:o,blur:i,files:a=[],path:c="",background:s}=X(n),u=J(),l=nn((()=>Array[e(349)](a[e(313)]))),h=nn((()=>l[e(313)]?f:Q)),v=J(null);return tn((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(313)][r(339)]>0&&!o[r(313)]){try{v[r(313)]=await Y(en(h),l[r(313)]?[en(n)]:en(n),(n=>{const e=r;t[e(313)]&&n[e(331)](en(t))}))}catch(i){throw new Error(r(344)+i)}v[r(313)]&&(u.value=l[r(313)]?v[r(313)][0]:v.value,u[r(313)][r(321)]=l[r(313)]?p:d)}}),{immediate:!0}),tn((()=>u[e(313)]),(n=>{const t=e;r[t(313)]&&(r[t(313)][t(357)]=n)}),{immediate:!0}),tn((()=>[s[e(313)],u.value]),(([n,o])=>{const i=e;if(r[i(313)]){let e=(null==t?void 0:t[i(313)])?t.value[i(355)]:o,a=r[i(313)][i(333)];!(null==a?void 0:a[i(336)])&&(a=void 0),r[i(313)][i(333)]=n?e:a}}),{immediate:!0}),tn((()=>null==i?void 0:i.value),(n=>{const t=e;r[t(313)]&&(r[t(313)][t(341)]=n)}),{immediate:!0}),tn(o,(async n=>{const t=e;if(n&&n in Hn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",o=Hn[n];try{v[t(313)]=await Y(Q,o,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(344)+r)}v[t(313)]&&(u[t(313)]=v.value,u[t(313)][t(321)]=d)}else if(n&&!(n in Hn))throw new Error(t(352)+Object[t(337)](Hn)[t(340)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(483)],M=n=>{const t=e;n?(u[t(502)].environment=n[t(483)],i[t(509)]&&(u[t(502)][t(509)]=n[t(483)])):(u[t(502)][t(499)]=w[t(502)],i[t(509)]&&(u[t(502)][t(509)]=w[t(502)]))};tn(w,(n=>{y[e(502)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:kn});const R=()=>{var n;const t=e;null==(n=y[t(502)])||n[t(521)](),y[t(502)]=new v(i[t(523)]),x=new m(i[t(524)],i[t(526)],y[t(502)]),i[t(478)]?(y[t(502)][t(483)][t(522)]=g,y[t(502)].texture[t(507)]=!1,y[t(502)][t(483)].minFilter=_,y[t(502)][t(483)].magFilter=_):y.value[t(483)][t(522)]=h,M(y[t(502)])};return tn((()=>cn()[e(484)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(502)].texture.type!==h)&&(l=n(),Array[o(497)](l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t[o(522)])!==o(480))?R():(null==(r=y[o(502)])||r[o(521)](),y[o(502)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(502)]=w,tn((()=>i[e(478)]),(n=>{y[e(502)]&&R()})),(n,t)=>{const r=e;return en(y)?(sn(),un(r(512),{key:0,ref_key:"envSence",ref:b},[ln(n[r(505)],r(484))],512)):fn("",!0)}}});function nt(n){function t(n){const e=Qn;if(typeof n===e(485))return function(n){}[e(517)](e(481)).apply(e(503));1!==(""+n/n)[e(487)]||n%20==0?function(){return!0}[e(517)](e(479)+"gger")[e(506)](e(486)):function(){return!1}[e(517)](e(479)+e(525)).apply(e(511)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function tt(n,t){const e=ut();return(tt=function(n,t){return e[n-=483]})(n,t)}const et=tt;!function(n,t){const e=tt,r=ut();for(;;)try{if(269752===-parseInt(e(486))/1+-parseInt(e(489))/2+parseInt(e(517))/3*(-parseInt(e(528))/4)+parseInt(e(488))/5+-parseInt(e(495))/6*(parseInt(e(514))/7)+-parseInt(e(505))/8*(parseInt(e(498))/9)+parseInt(e(533))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(515)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){rt(this,(function(){const n=tt,t=new RegExp(n(532)),e=new RegExp(n(519),"i"),r=ft(n(496));t[n(525)](r+"chain")&&e.test(r+n(526))?ft():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(515)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ot(void 0,(function(){const n=tt,t=function(){const n=tt;let t;try{t=Function(n(491)+n(502)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(511)]||{},r=[n(531),n(524),n(499),n(522),n(512),n(516),n(521)];for(let o=0;o<r[n(529)];o++){const t=ot[n(492)][n(518)][n(507)](ot),i=r[o],a=e[i]||t;t.__proto__=ot[n(507)](ot),t[n(483)]=a[n(483)][n(507)](a),e[i]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=[et(523),et(508),"side",et(494)];function ut(){const n=["1176NpbcXZ","init","TresPlaneGeometry","3369312LpetlV","info","action","rect",'{}.constructor("return this")( )',"value","TresRingGeometry","8CZbjDH","stateObject","bind","map","from","circle","console","exception","debu","140jQLfBW","apply","table","407046DKIgIn","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","trace","error","toneMapped","warn","test","input","TresMesh","8lKYIHz","length","counter","log","function *\\( *\\)","6594810KMmbvY","toString","needsUpdate","string","117805xLrPaV","call","2366270aSCjNP","191052xmpvMQ","index","return (function() ","constructor","ring","color"];return(ut=function(){return n})()}const lt=rn({__name:et(490),props:{args:{default:null},from:{default:et(501)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=J();return dn((()=>{const n=tt;e[n(503)]&&(e[n(503)].color.multiplyScalar(t.intensity),e[n(503)][n(484)]=!0)})),hn((()=>{})),(n,r)=>{const o=tt;return sn(),un(o(527),null,[t[o(509)]===o(510)?(sn(),un(o(504),it)):t[o(509)]===o(493)?(sn(),un(o(504),at)):"rect"===t[o(509)]?(sn(),un(o(497),ct)):(sn(),vn(t[o(509)],{key:3,args:t})),mn("TresMeshBasicMaterial",{ref_key:"material",ref:e,toneMapped:n.toneMapped,map:n[o(508)],side:en(x),color:n.color},null,8,st)])}}});function ft(n){function t(n){const e=tt;if(typeof n===e(485))return function(n){}[e(492)]("while (true) {}")[e(515)](e(530));1!==(""+n/n)[e(529)]||n%20==0?function(){return!0}[e(492)]("debu"+e(520))[e(487)](e(500)):function(){return!1}.constructor(e(513)+e(520))[e(515)](e(506)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ht,r=vt();for(;;)try{if(711259===parseInt(e(168))/1+parseInt(e(167))/2*(parseInt(e(157))/3)+-parseInt(e(189))/4+parseInt(e(191))/5+parseInt(e(182))/6*(parseInt(e(159))/7)+parseInt(e(187))/8+parseInt(e(169))/9*(-parseInt(e(181))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=ht,t=new RegExp(n(177)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=gt(n(180));t[n(165)](r+n(160))&&e.test(r+n(173))?gt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(186)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(n,t){const e=vt();return(ht=function(n,t){return e[n-=151]})(n,t)}function vt(){const n=["return (function() ","info","prototype","action","trace","11355SsqsnB","console","418607WDiEmc","chain","call","debu","table","value","test","depthTexture","202SQvVOp","802725RFUppi","45kpjLaz","bind","toString","warn","input","error","gger","width","function *\\( *\\)","setRenderTarget","__proto__","init","6582130fnPYYV","120axPJQt","stateObject","dispose","string","apply","5022440vZIYqd","constructor","939016sLSnct","clear","6141215sUomte","length"];return(vt=function(){return n})()}function mt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=gn(n)?X(n):X(_n(n)),{onLoop:s}=K(),{camera:u,renderer:l,scene:f,sizes:p}=q();return dn((()=>{var n;const a=ht;null==(n=t.value)||n[a(184)](),t.value=new b((null==r?void 0:r[a(164)])||p[a(176)][a(164)],(null==e?void 0:e[a(164)])||p.height[a(164)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(164)])),(null==i?void 0:i[a(164)])&&(t.value[a(166)]=new S((null==r?void 0:r.value)||p[a(176)].value,(null==e?void 0:e[a(164)])||p.height[a(164)],w))})),s((()=>{const n=ht;(null==a?void 0:a[n(164)])&&(l[n(164)][n(178)](t[n(164)]),l[n(164)][n(190)](),l[n(164)].render(f[n(164)],u[n(164)]),l[n(164)].setRenderTarget(null))})),yn((()=>{var n;null==(n=t.value)||n.dispose()})),t}function gt(n){function t(n){const e=ht;if(typeof n===e(185))return function(n){}[e(188)]("while (true) {}").apply("counter");1!==(""+n/n)[e(151)]||n%20==0?function(){return!0}[e(188)](e(162)+e(175))[e(161)](e(155)):function(){return!1}[e(188)](e(162)+e(175)).apply(e(183)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=ht,t=function(){const n=ht;let t;try{t=Function(n(152)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(158)]||{},r=["log",n(172),n(153),n(174),"exception",n(163),n(156)];for(let o=0;o<r[n(151)];o++){const t=dt[n(188)][n(154)][n(170)](dt),i=r[o],a=e[i]||t;t[n(179)]=dt[n(170)](dt),t[n(171)]=a[n(171)][n(170)](a),e[i]=t}}))();const _t=xt;!function(n,t){const e=xt,r=It();for(;;)try{if(516811===parseInt(e(483))/1+-parseInt(e(463))/2*(parseInt(e(479))/3)+-parseInt(e(462))/4*(parseInt(e(467))/5)+parseInt(e(470))/6*(-parseInt(e(478))/7)+-parseInt(e(472))/8*(parseInt(e(450))/9)+-parseInt(e(460))/10*(-parseInt(e(437))/11)+parseInt(e(440))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xt(n,t){const e=It();return(xt=function(n,t){return e[n-=426]})(n,t)}!function(){yt(this,(function(){const n=xt,t=new RegExp(n(435)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Mt(n(434));t[n(436)](r+n(459))&&e.test(r+n(468))?Mt():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(456)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function It(){const n=["backsideThickness","265yKiKyB","input","return (function() ","606tVKWpR","envMapIntensity","40SVbUsO","counter","uuid","debu","thickness",'{}.constructor("return this")( )',"54887ClblVH","114153wESevf","toString","side","action","431552mQDNjR","toneMapping","stateObject","render","background","setRenderTarget","trace","call","length","while (true) {}","init","function *\\( *\\)","test","4644838qucXEG","value","console","24967404yHMZbs","isMesh","__proto__","exception","string","constructor","index","buffer","texture","error","1153755zDGgur","prototype","backside","bind","TresMeshTransmissionMaterial","time","apply","material","fboResolution","chain","20iFXEjW","log","74596RPVRHR","22GVxnyS","MeshTransmissionMaterialClass","traverse"];return(It=function(){return n})()}bt(void 0,(function(){const n=xt;let t;try{t=Function(n(469)+n(477)+");")()}catch(o){t=window}const e=t[n(439)]=t[n(439)]||{},r=[n(461),"warn","info",n(449),n(443),"table",n(430)];for(let i=0;i<r[n(432)];i++){const t=bt[n(445)][n(451)][n(453)](bt),o=r[i],a=e[o]||t;t[n(442)]=bt[n(453)](bt),t[n(480)]=a[n(480)].bind(a),e[o]=t}}))();const St=["buffer","side"],wt=rn({__name:_t(446),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=xn(),{extend:o,scene:i,renderer:a,camera:c}=q(),s=xn(),u=n;o({MeshTransmissionMaterial:Mn});const l=new Rn,{onBeforeLoop:f}=K(),p=mt({width:u[e(458)],height:u[e(458)],isLoop:!1}),d=mt({width:u[e(458)],height:u[e(458)],isLoop:!1});let h,v,m,g;return hn((async()=>{const n=e;await bn(),s[n(438)]=function(n,t){const e=xt;let r;return n[e(465)]((n=>{const o=e;n[o(441)]&&n[o(457)]&&n.material[o(474)]===t&&(r=n)})),r}(i[n(438)],r[n(438)][n(474)])})),f((({elapsed:n})=>{const t=e;r[t(438)][t(455)]=n,r[t(438)][t(447)]===d.value[t(448)]&&s[t(438)]&&(m=a[t(438)][t(484)],h=i.value.background,v=r[t(438)].envMapIntensity,g=s[t(438)][t(457)][t(481)],s[t(438)][t(457)]=l,u[t(452)]&&(a.value[t(429)](p[t(438)]),a[t(438)][t(427)](i.value,c[t(438)]),s.value.material=r[t(438)],s[t(438)].material[t(476)]=u[t(466)],s[t(438)][t(457)][t(447)]=p[t(438)][t(448)],s.value[t(457)][t(481)]=M,s[t(438)].material[t(471)]=0),a[t(438)][t(429)](d.value),a.value[t(427)](i.value,c[t(438)]),s[t(438)][t(457)][t(447)]=d[t(438)][t(448)],s[t(438)][t(457)]=r.value,s.value[t(457)][t(476)]=u[t(476)],s[t(438)][t(457)][t(481)]=g,s[t(438)][t(457)].envMapIntensity=v,i[t(438)][t(428)]=h,a.value.setRenderTarget(null),a[t(438)].toneMapping=m)})),t({root:r,constructor:Mn}),(n,t)=>{const o=e;return sn(),un(o(454),{ref_key:o(464),ref:r,buffer:en(d)[o(448)],side:en(x)},null,8,St)}}});function Mt(n){function t(n){const e=xt;if(typeof n===e(444))return function(n){}.constructor(e(433)).apply(e(473));1!==(""+n/n)[e(432)]||n%20==0?function(){return!0}.constructor(e(475)+"gger")[e(431)](e(482)):function(){return!1}[e(445)](e(475)+"gger")[e(456)](e(426)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=Tt;!function(n,t){const e=Tt,r=zt();for(;;)try{if(475757===-parseInt(e(439))/1+parseInt(e(449))/2+-parseInt(e(467))/3+-parseInt(e(442))/4+-parseInt(e(469))/5+-parseInt(e(484))/6*(parseInt(e(456))/7)+parseInt(e(447))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(479)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=Tt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(471),"i"),r=Pt("init");t.test(r+n(455))&&e.test(r+"input")?Pt():r("0")}))()}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(479)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(n,t){const e=zt();return(Tt=function(n,t){return e[n-=438]})(n,t)}Et(void 0,(function(){const n=Tt;let t;try{t=Function(n(478)+n(491)+");")()}catch(o){t=window}const e=t[n(475)]=t[n(475)]||{},r=[n(459),"warn","info",n(480),n(441),n(488),n(446)];for(let i=0;i<r.length;i++){const t=Et.constructor[n(485)][n(474)](Et),o=r[i],a=e[o]||t;t[n(462)]=Et[n(474)](Et),t.toString=a.toString.bind(a),e[o]=t}}))();const Dt=rn({__name:Rt(440),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return hn((()=>{const n=Tt;if(!r[n(457)])return;if(!o[n(457)])return;r[n(457)][n(452)][n(468)]();const e=(new R).setFromObject(o[n(457)],t[n(473)]),i=new A,a=new E,c=e[n(486)].x-e[n(458)].x,s=e[n(486)].y-e[n(458)].y,u=e.max.z-e[n(458)].z;e[n(477)](i),e[n(482)](a);const l=t[n(460)]?s/2:t[n(481)]?-s/2:0,f=t[n(445)]?-c/2:t[n(487)]?c/2:0,p=t[n(472)]?u/2:t[n(464)]?-u/2:0;r[n(457)].position[n(448)](t[n(465)]||t[n(490)]?0:-i.x+f,t.disable||t[n(454)]?0:-i.y+l,t.disable||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Tt;return sn(),un(i(453),{ref_key:i(461),ref:e},[mn(i(453),{ref_key:i(466),ref:r},[mn("TresGroup",{ref_key:i(444),ref:o},[ln(n[i(438)],i(443))],512)],512)],512)}}});function zt(){const n=["max","right","table","call","disableX",'{}.constructor("return this")( )',"counter","while (true) {}","$slots","718817AbkTlr","index","exception","18212CweuKS","default","inner","left","trace","17673952UUfBPk","set","871950TnafOM","debu","gger","matrixWorld","TresGroup","disableY","chain","34076fgrUXN","value","min","log","top","gref","__proto__","constructor","back","disable","outer","766242vWlnFX","identity","4346950pxqUvi","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","front","precise","bind","console","length","getCenter","return (function() ","apply","error","bottom","getBoundingSphere","stateObject","396vWMnOh","prototype"];return(zt=function(){return n})()}function Pt(n){function t(n){const e=Tt;if("string"==typeof n)return function(n){}[e(463)](e(493)).apply(e(492));1!==(""+n/n)[e(476)]||n%20==0?function(){return!0}.constructor(e(450)+e(451))[e(489)](e(470)):function(){return!1}[e(463)](e(450)+e(451))[e(479)](e(483)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Ut;!function(n,t){const e=Ut,r=Ft();for(;;)try{if(220844===-parseInt(e(184))/1*(parseInt(e(147))/2)+-parseInt(e(172))/3+-parseInt(e(165))/4+-parseInt(e(175))/5+-parseInt(e(154))/6+-parseInt(e(148))/7*(-parseInt(e(180))/8)+parseInt(e(139))/9*(parseInt(e(140))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(138)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ct(this,(function(){const n=Ut,t=new RegExp(n(173)),e=new RegExp(n(181),"i"),r=Lt("init");t[n(146)](r+"chain")&&e[n(146)](r+n(160))?Lt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ft(){const n=["gger","Vector3","test","2PlBqOK","16219rmaYVz","group","add","__proto__","length","update","750420GLmHUv","scene","intensity","return (function() ","set","primitive","input","debu","exception","table","trace","740328ynrfYo","backsideIOR","far","info","color",'{}.constructor("return this")( )',"call","772248utuVYt","function *\\( *\\)","params","2164155WsewYc","ior","#ffffff","error","prototype","1176zLrjzi","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","object","273820tBvFhi","bind","stateObject","log","console","helper","counter","lightSource","apply","1548SMZTrx","67120ablqLI","toString","worldRadius","index"];return(Ft=function(){return n})()}kt(void 0,(function(){const n=Ut,t=function(){const n=Ut;let t;try{t=Function(n(157)+n(170)+");")()}catch(e){t=window}return t}(),e=t[n(188)]=t.console||{},r=[n(187),"warn",n(168),n(178),n(162),n(163),n(164)];for(let o=0;o<r[n(152)];o++){const t=kt[n(182)][n(179)][n(185)](kt),i=r[o],a=e[i]||t;t[n(151)]=kt[n(185)](kt),t[n(141)]=a[n(141)][n(185)](a),e[i]=t}}))();const Bt=[Ot(183)],jt=["object"];function Ut(n,t){const e=Ft();return(Ut=function(n,t){return e[n-=137]})(n,t)}const Nt=rn({__name:Ot(143),props:{color:{default:Ot(177)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=q(),o=An(r.value,{frames:1/0,resolution:e.resolution,worldRadius:e.worldRadius});o[t(174)].backside=!0;const i=xn(null);tn(i,(n=>{const e=t;n&&o[e(155)][e(150)](n)}));const{onBeforeLoop:a}=K();return a((({elapsed:n})=>{o[t(153)]()})),dn((()=>{const n=t;e[n(169)]&&o[n(174)][n(169)][n(158)](e[n(169)]),e[n(176)]&&(o.params[n(176)]=e.ior),e.backsideIOR&&(o[n(174)][n(166)]=e[n(166)]),e[n(167)]&&(o[n(174)][n(167)]=e[n(167)]),e[n(142)]&&(o[n(174)][n(142)]=e.worldRadius),e[n(156)]&&(o[n(174)][n(156)]=e[n(156)])})),tn((()=>e.causticsOnly),(n=>{o[t(174)].causticsOnly=n})),tn((()=>e.lightSource),(n=>{const e=t;n&&o.params[e(137)]instanceof T[e(145)]&&o[e(174)][e(137)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return sn(),un(In,null,[mn("TresGroup",{ref_key:r(149),ref:i},[ln(n.$slots,"default")],512),mn(r(159),{object:en(o)[r(149)],position:[0,.003,0]},null,8,Bt),mn(r(159),{object:en(o)[r(189)],visible:!1},null,8,jt)],64)}}});function Lt(n){function t(n){const e=Ut;if("string"==typeof n)return function(n){}[e(182)]("while (true) {}")[e(138)](e(190));1!==(""+n/n).length||n%20==0?function(){return!0}[e(182)](e(161)+"gger")[e(171)]("action"):function(){return!1}[e(182)](e(161)+e(144))[e(138)](e(186)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ht(){const n=["shadowmap_pars_fragment","programs","error","debu","ShaderChunk","511437ndNRSu","dispose","bind","#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","remove","warn","#ifdef USE_SHADOWMAP","info","10fWEtDw","exception","toString","table","compile","return (function() ","11HVfqnV","constructor","replace","material","1312325wNYrFS","test","gger","4104048kDviIJ","call","; i ++) {\n        offset = (vogelDiskSample(j, ","input",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","apply","16633480izQBzw","length","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ",'{}.constructor("return this")( )',"console","52202AjedrO","1849518uyFlPh","; i++) {\n        vogelSample = vogelDiskSample(j, ","8JNrqMR",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","forEach","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","1477644ZmWaLK","action","string","201HqvvLc","counter","properties","init"];return(Ht=function(){return n})()}!function(n,t){const e=Gt,r=Ht();for(;;)try{if(978785===-parseInt(e(526))/1+-parseInt(e(507))/2*(-parseInt(e(517))/3)+-parseInt(e(514))/4*(-parseInt(e(482))/5)+parseInt(e(495))/6+parseInt(e(492))/7+-parseInt(e(510))/8*(parseInt(e(508))/9)+parseInt(e(501))/10*(-parseInt(e(488))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(500)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zt(this,(function(){const n=Gt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Wt(n(520));t[n(493)](r+"chain")&&e.test(r+n(498))?Wt():r("0")}))()}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(500)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(n,t){const e=Ht();return(Gt=function(n,t){return e[n-=480]})(n,t)}Vt(void 0,(function(){const n=Gt,t=function(){const n=Gt;let t;try{t=Function(n(487)+n(505)+");")()}catch(e){t=window}return t}(),e=t[n(506)]=t[n(506)]||{},r=["log",n(532),n(481),n(523),n(483),n(485),"trace"];for(let o=0;o<r[n(502)];o++){const t=Vt[n(489)].prototype[n(528)](Vt),i=r[o],a=e[i]||t;t.__proto__=Vt[n(528)](Vt),t[n(484)]=a.toString.bind(a),e[i]=t}}))();const $t=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Gt,o=T[r(525)][r(521)];return T[r(525)][r(521)]=D[r(521)][r(490)](r(480),r(503)+t+r(499)+n+r(504)+e+r(497)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(509)+e+r(511)+t+r(513)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(490)](r(529),r(530)),(n,t,e)=>{D[r(521)]=o,function(n,t,e){const r=Gt;t.traverse((t=>{const e=Gt;t[e(491)]&&(Array.isArray(t.material)?t[e(491)][e(512)]((t=>{const r=e;n[r(519)][r(531)](t),t[r(527)]()})):(n[e(519)][e(531)](t[e(491)]),t[e(491)][e(527)]()))})),n[r(481)][r(522)][r(502)]=0,n[r(486)](t,e)}(n,t,e)}};function Wt(n){function t(n){const e=Gt;if(typeof n===e(516))return function(n){}.constructor("while (true) {}")[e(500)](e(518));1!==(""+n/n)[e(502)]||n%20==0?function(){return!0}[e(489)]("debugger")[e(496)](e(515)):function(){return!1}[e(489)](e(524)+e(494)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qt=Kt;!function(n,t){const e=Kt,r=Xt();for(;;)try{if(380754===parseInt(e(499))/1+-parseInt(e(515))/2*(parseInt(e(500))/3)+parseInt(e(507))/4+parseInt(e(501))/5+parseInt(e(481))/6*(parseInt(e(489))/7)+parseInt(e(486))/8*(parseInt(e(502))/9)+-parseInt(e(506))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(n,t){const e=Xt();return(Kt=function(n,t){return e[n-=480]})(n,t)}!function(){Yt(this,(function(){const n=Kt,t=new RegExp(n(498)),e=new RegExp(n(484),"i"),r=ne("init");t[n(514)](r+n(509))&&e[n(514)](r+"input")?ne():r("0")}))()}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(){const n=["apply","6puFVAc","bind","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","5121384SPvGDv","__proto__","gger","720286AhtZHT","toString","info","table","console","prototype","value","error","trace","function *\\( *\\)","523812gVMBye","12378bLXJfs","469220piTazD","9FJEgxM","length","log","dispose","5578270XdCALS","341408tHRuhM","index","chain","while (true) {}","traverse","material","constructor","test","246WWZPww",'{}.constructor("return this")( )'];return(Xt=function(){return n})()}Qt(void 0,(function(){const n=Kt;let t;try{t=Function(n(483)+n(516)+");")()}catch(o){t=window}const e=t[n(493)]=t.console||{},r=[n(504),"warn",n(491),n(496),"exception",n(492),n(497)];for(let i=0;i<r[n(503)];i++){const t=Qt[n(513)][n(494)][n(482)](Qt),o=r[i],a=e[o]||t;t[n(487)]=Qt[n(482)](Qt),t[n(490)]=a.toString[n(482)](a),e[o]=t}}))();const Jt=rn({__name:qt(508),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=q();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(495)],o[t(495)],e[t(495)]),i=null),a&&(i=$t({focus:s,size:c,samples:u}),o[t(495)][t(511)]((n=>{const e=t;n instanceof l&&n[e(512)][e(505)]()})))};return a(t),tn(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Kt;if("string"==typeof n)return function(n){}[e(513)](e(510)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(488))[e(485)]("action"):function(){return!1}[e(513)]("debu"+e(488)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function te(n,t){const e=ce();return(te=function(n,t){return e[n-=241]})(n,t)}const ee=te;!function(n,t){const e=te,r=ce();for(;;)try{if(463391===parseInt(e(263))/1+-parseInt(e(268))/2+-parseInt(e(247))/3*(parseInt(e(269))/4)+parseInt(e(289))/5+-parseInt(e(283))/6+-parseInt(e(254))/7*(-parseInt(e(259))/8)+parseInt(e(265))/9*(parseInt(e(272))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(258)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){re(this,(function(){const n=te,t=new RegExp(n(266)),e=new RegExp(n(244),"i"),r=se(n(276));t[n(257)](r+n(291))&&e.test(r+n(248))?se():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(258)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();oe(void 0,(function(){const n=te,t=function(){const n=te;let t;try{t=Function(n(267)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(278)]=t[n(278)]||{},r=[n(249),n(282),n(290),n(246),n(241),n(243),n(297)];for(let o=0;o<r[n(256)];o++){const t=oe.constructor[n(279)][n(260)](oe),i=r[o],a=e[i]||t;t[n(277)]=oe[n(260)](oe),t[n(262)]=a.toString.bind(a),e[i]=t}}))();const ie=parseInt(k[ee(296)](/\D+/g,""));class ae extends z{constructor(n=new O){const t=ee;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new O),texelSize:new P(new O),halfTexelSize:new P(new O),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:t(287)+t(ie>=154?252:264)+t(294),vertexShader:t(271),blending:C,depthWrite:!1,depthTest:!1}),this[t(245)]=!1,this[t(293)](n.x,n.y),this[t(281)]=new Float32Array([0,1,2,2,3])}[ee(293)](n,t){const e=ee;this[e(273)][e(275)][e(253)][e(285)](n,t),this.uniforms[e(298)].value[e(285)](n,t)[e(261)](.5)}[ee(288)](n){const t=ee;this.uniforms[t(255)][t(253)][t(251)](n)}}function ce(){const n=["chain","call","setTexelSize",">\n        }","debu","replace","trace","halfTexelSize","exception","constructor","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toneMapped","error","3qNgsok","input","log","while (true) {}","copy","colorspace_fragment","value","7BNfQxA","resolution","length","test","apply","226216HzVMtH","bind","multiplyScalar","toString","793659ZDhlnD","encodings_fragment","9idbKpN","function *\\( *\\)","return (function() ","620212Jclcrx","1860284iHZusg","gger","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","3718150IpuNXN","uniforms","stateObject","texelSize","init","__proto__","console","prototype","action","kernel","warn","2214606RsJltN","counter","set","string","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","setResolution","2069590UiZDdK","info"];return(ce=function(){return n})()}function se(n){function t(n){const e=te;if(typeof n===e(286))return function(n){}[e(242)](e(250))[e(258)](e(284));1!==(""+n/n)[e(256)]||n%20==0?function(){return!0}[e(242)](e(295)+e(270))[e(292)](e(280)):function(){return!1}[e(242)](e(295)+e(270)).apply(e(274)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=le,r=pe();for(;;)try{if(197182===-parseInt(e(436))/1+parseInt(e(430))/2+parseInt(e(450))/3+-parseInt(e(477))/4+-parseInt(e(442))/5*(-parseInt(e(438))/6)+-parseInt(e(484))/7*(-parseInt(e(433))/8)+parseInt(e(453))/9*(-parseInt(e(478))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(473)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(n,t){const e=pe();return(le=function(n,t){return e[n-=422]})(n,t)}!function(){ue(this,(function(){const n=le,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(459),"i"),r=he(n(446));t[n(471)](r+n(445))&&e.test(r+n(479))?he():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(473)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(){const n=["apply","constructor","call","table","299624AMblHC","710880DTisTO","input","setAttribute","renderTargetB","frustumCulled","console","42504JBptsq","maxDepthThreshold","texture","prototype","setRenderTarget","warn","render","toString","info","349164zUmEwa","setResolution","return (function() ","400rAmNsu","stateObject","USE_DEPTH","232221bRDJoi","uniforms","2227926mhdNVb","renderTargetA","debu","inputBuffer","5cuYkEf","value","clone","chain","init","renderToScreen","depthBuffer","trace","1097058nSlUNb","depthScale","kernel","90aiZgpQ","string","camera","while (true) {}","convolutionMaterial","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","action","log","__proto__","depthToBlurRatioBias",'{}.constructor("return this")( )',"gger","scene","screen","length","counter","test","position"];return(pe=function(){return n})()}fe(void 0,(function(){const n=le;let t;try{t=Function(n(432)+n(465)+");")()}catch(o){t=window}const e=t.console=t[n(483)]||{},r=[n(462),n(426),n(429),"error",n(460),n(476),n(449)];for(let i=0;i<r[n(469)];i++){const t=fe[n(474)][n(424)].bind(fe),o=r[i],a=e[o]||t;t[n(463)]=fe[n(458)](fe),t[n(428)]=a[n(428)][n(458)](a),e[o]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this[c(447)]=!1,this[c(439)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(481)]=this.renderTargetA[c(444)](),this.convolutionMaterial=new ae,this[c(457)].setTexelSize(1/t,1/e),this[c(457)][c(431)](new O(t,e)),this.scene=new u,this.camera=new F,this[c(457)].uniforms.minDepthThreshold[c(443)]=r,this[c(457)].uniforms[c(422)].value=o,this[c(457)][c(437)][c(451)][c(443)]=i,this.convolutionMaterial[c(437)][c(464)][c(443)]=a,this[c(457)].defines[c(435)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p[c(480)](c(472),new j(s,3)),p[c(480)]("uv",new j(f,2)),this[c(468)]=new l(p,this.convolutionMaterial),this[c(468)][c(482)]=!1,this.scene.add(this[c(468)])}render(n,t,e){const r=le,o=this[r(467)],i=this[r(455)],a=this[r(439)],c=this[r(481)],s=this[r(457)],u=s.uniforms;u[r(448)][r(443)]=t.depthTexture;const l=s[r(452)];let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u[r(452)].value=l[p],u[r(441)].value=h.texture,n[r(425)](f),n[r(427)](o,i),h=f;u[r(452)][r(443)]=l[p],u.inputBuffer.value=h[r(423)],n[r(425)](this.renderToScreen?null:e),n[r(427)](o,i)}}function he(n){function t(n){const e=le;if(typeof n===e(454))return function(n){}[e(474)](e(456))[e(473)](e(470));1!==(""+n/n)[e(469)]||n%20==0?function(){return!0}[e(474)](e(440)+"gger")[e(475)](e(461)):function(){return!1}.constructor("debu"+e(466))[e(473)](e(434)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=xe;function me(){var n=["string","_depthScale","depthToBlurRatioBias","mirror","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","1074XktAFK","vertexShader","defines","1063987QzcHFK","depthScale","bind","15695880JfJwox","_tDepth","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","textureMatrix","function *\\( *\\)","distortion","tDiffuse","apply","length","_tDiffuse","#include <project_vertex>","while (true) {}","_minDepthThreshold","toString","643156gkrgcr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","distortionMap","debu","_blurStrength","test",'{}.constructor("return this")( )',"chain","exception","constructor","info","2571592WGoeek","_maxDepthThreshold","mixStrength","7397404dlVuhQ","_depthToBlurRatioBias","input","table","_distortion","_textureMatrix","replace","_mixContrast","prototype","_distortionMap","2YkiiNc","minDepthThreshold","uniforms","tDiffuseBlur","_hasBlur","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_mixBlur","stateObject","init","value","setValues","3bwhvvY","call","_tDiffuseBlur","hasBlur","47840HTSLYg","maxDepthThreshold","error","_mirror","fragmentShader","mixContrast","trace","8292474GFjdoz","#include <emissivemap_fragment>","console","return (function() ","USE_UV","gger"];return(me=function(){return n})()}!function(n,t){for(var e=xe,r=me();;)try{if(931747===-parseInt(e(409))/1*(parseInt(e(450))/2)+parseInt(e(461))/3*(-parseInt(e(426))/4)+-parseInt(e(465))/5*(parseInt(e(406))/6)+parseInt(e(440))/7+parseInt(e(437))/8+parseInt(e(472))/9+parseInt(e(412))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(419)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ge(this,(function(){var n=xe,t=new RegExp(n(416)),e=new RegExp(n(427),"i"),r=be(n(458));t[n(431)](r+n(433))&&e[n(431)](r+n(442))?be():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(419)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();_e(void 0,(function(){var n,t=xe;try{n=Function(t(475)+t(432)+");")()}catch(s){n=window}for(var e=n[t(474)]=n[t(474)]||{},r=["log","warn",t(436),t(467),t(434),t(443),t(471)],o=0;o<r.length;o++){var i=_e[t(435)][t(448)][t(411)](_e),a=r[o],c=e[a]||i;i.__proto__=_e[t(411)](_e),i.toString=c[t(425)][t(411)](c),e[a]=i}}))();class ye extends U{constructor(n={}){var t=xe;super(n),this[t(413)]={value:null},this[t(449)]={value:null},this[t(421)]={value:null},this[t(463)]={value:null},this._textureMatrix={value:null},this[t(454)]={value:!1},this[t(468)]={value:0},this._mixBlur={value:0},this[t(430)]={value:.5},this._minDepthThreshold={value:.9},this[t(438)]={value:1},this[t(402)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(444)]={value:1},this[t(447)]={value:1},this[t(460)](n)}onBeforeCompile(n){var t,e=xe;!(null==(t=n[e(408)])?void 0:t[e(476)])&&(n[e(408)].USE_UV=""),n[e(452)][e(464)]=this[e(454)],n[e(452)][e(418)]=this[e(421)],n[e(452)].tDepth=this[e(413)],n[e(452)][e(428)]=this[e(449)],n[e(452)][e(453)]=this[e(463)],n[e(452)][e(415)]=this[e(445)],n.uniforms[e(404)]=this[e(468)],n.uniforms.mixBlur=this[e(456)],n.uniforms.mixStrength=this[e(430)],n[e(452)].minDepthThreshold=this[e(424)],n[e(452)][e(466)]=this[e(438)],n[e(452)][e(410)]=this[e(402)],n.uniforms[e(403)]=this[e(441)],n[e(452)].distortion=this._distortion,n.uniforms[e(470)]=this[e(447)],n[e(407)]=e(414)+n.vertexShader,n[e(407)]=n[e(407)][e(446)](e(422),e(405)),n[e(469)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n.fragmentShader,n[e(469)]=n[e(469)][e(446)](e(473),e(455))}get[ve(418)](){var n=ve;return this[n(421)][n(459)]}set[ve(418)](n){var t=ve;this[t(421)][t(459)]=n}get tDepth(){var n=ve;return this._tDepth[n(459)]}set tDepth(n){var t=ve;this[t(413)][t(459)]=n}get[ve(428)](){var n=ve;return this[n(449)][n(459)]}set distortionMap(n){this._distortionMap.value=n}get[ve(453)](){return this[ve(463)].value}set[ve(453)](n){var t=ve;this._tDiffuseBlur[t(459)]=n}get[ve(415)](){return this[ve(445)].value}set[ve(415)](n){var t=ve;this[t(445)][t(459)]=n}get[ve(464)](){var n=ve;return this[n(454)][n(459)]}set hasBlur(n){var t=ve;this[t(454)][t(459)]=n}get[ve(404)](){var n=ve;return this[n(468)][n(459)]}set[ve(404)](n){this[ve(468)].value=n}get mixBlur(){var n=ve;return this._mixBlur[n(459)]}set mixBlur(n){var t=ve;this[t(456)][t(459)]=n}get[ve(439)](){var n=ve;return this[n(430)][n(459)]}set[ve(439)](n){var t=ve;this._blurStrength[t(459)]=n}get[ve(451)](){var n=ve;return this._minDepthThreshold[n(459)]}set[ve(451)](n){var t=ve;this[t(424)][t(459)]=n}get[ve(466)](){return this[ve(438)].value}set[ve(466)](n){var t=ve;this[t(438)][t(459)]=n}get depthScale(){var n=ve;return this[n(402)][n(459)]}set depthScale(n){var t=ve;this[t(402)][t(459)]=n}get depthToBlurRatioBias(){return this[ve(441)].value}set[ve(403)](n){this[ve(441)].value=n}get[ve(417)](){var n=ve;return this[n(444)][n(459)]}set[ve(417)](n){var t=ve;this[t(444)][t(459)]=n}get[ve(470)](){return this[ve(447)].value}set mixContrast(n){this[ve(447)].value=n}}function xe(n,t){var e=me();return(xe=function(n,t){return e[n-=402]})(n,t)}function be(n){function t(n){var e=xe;if(typeof n===e(478))return function(n){}[e(435)](e(423)).apply("counter");1!==(""+n/n)[e(420)]||n%20==0?function(){return!0}.constructor(e(429)+"gger")[e(462)]("action"):function(){return!1}[e(435)](e(429)+e(477)).apply(e(457)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Re;!function(n,t){const e=Re,r=Ee();for(;;)try{if(130081===-parseInt(e(344))/1+parseInt(e(352))/2+parseInt(e(359))/3*(parseInt(e(321))/4)+-parseInt(e(334))/5*(-parseInt(e(318))/6)+-parseInt(e(389))/7+-parseInt(e(358))/8+parseInt(e(357))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(338)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Se(this,(function(){const n=Re,t=new RegExp(n(382)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Te(n(388));t[n(354)](r+n(373))&&e[n(354)](r+n(361))?Te():r("0")}))()}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();we(void 0,(function(){const n=Re;let t;try{t=Function("return (function() "+n(324)+");")()}catch(o){t=window}const e=t[n(330)]=t[n(330)]||{},r=[n(339),n(381),n(377),n(316),n(337),"table",n(376)];for(let i=0;i<r[n(364)];i++){const t=we[n(328)][n(394)].bind(we),o=r[i],a=e[o]||t;t[n(375)]=we.bind(we),t[n(370)]=a[n(370)].bind(a),e[o]=t}}))();const Me=[Ie(340),Ie(390),Ie(399),Ie(410),"t-diffuse-blur",Ie(360),"mix-strength","min-depth-threshold","max-depth-threshold",Ie(323),Ie(342),"distortion",Ie(392),"mix-contrast","defines-USE_BLUR",Ie(371),Ie(355)];function Re(n,t){const e=Ee();return(Re=function(n,t){return e[n-=313]})(n,t)}const Ae=rn({__name:Ie(401),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=X(o),{camera:y,scene:x,renderer:w,extend:M}=q();M({MeshReflectorMaterial:ye});const R=xn(),E=xn(),T=xn(),D=xn(),z=nn((()=>{const n=Re;return"number"==typeof f[n(391)]?[f[n(391)],f.value]:f.value})),P=nn((()=>z.value[0]>0||z[r(391)][1]>0)),O={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};dn((()=>{var n;const o=r;null==(n=R.value)||n[o(398)][o(405)]();const f={minFilter:I,magFilter:I,type:h};var y,x;R[o(391)]=new b(i[o(391)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(391)],i[o(391)],V,G)},t(y,e(x)))),E[o(391)]=new b(i[o(391)],i[o(391)],f),T[o(391)]=new de({resolution:i.value,width:z[o(391)][0],height:z[o(391)][1],minDepthThreshold:a[o(391)],maxDepthThreshold:s[o(391)],depthScale:u.value,depthToBlurRatioBias:l.value}),D[o(391)]={mirror:p,textureMatrix:O[o(341)],mixBlur:d,tDiffuse:R[o(391)][o(398)],tDepth:R[o(391)].depthTexture,tDiffuseBlur:R.value[o(398)],hasBlur:P,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(391)],mixContrast:_,"defines-USE_BLUR":P[o(391)]?"":void 0,"defines-USE_DEPTH":u[o(391)]>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const C=xn(),{onLoop:k}=K();k((()=>{var n;const t=r;if(!(C[t(391)]&&w.value&&R.value&&y.value))return;const e=function(n,t){const e=Re;let r;return n[e(333)]((n=>{const o=e;n[o(343)]&&n[o(326)]&&n[o(326)][o(320)]===t&&(r=n)})),r}(x[t(391)],C.value.uuid);if(!e)return;e[t(403)]=!1;const i=w.value.xr[t(351)],a=w[t(391)][t(332)][t(397)];(function(n){var t,e;const r=Re;if(O[r(384)][r(408)](n[r(319)]),O[r(386)][r(408)](null==(t=y.value)?void 0:t.matrixWorld),O[r(406)][r(393)](n[r(319)]),O[r(379)].set(0,0,1),O.normal[r(336)](O.rotationMatrix),O[r(384)][r(374)](O[r(379)],o[r(407)]),O.view[r(317)](O[r(384)],O[r(386)]),O[r(315)][r(331)](O[r(379)])>0)return;O[r(315)][r(387)](O[r(379)])[r(363)](),O[r(315)][r(372)](O[r(384)]),O[r(406)][r(393)](null==(e=y[r(391)])?void 0:e[r(319)]),O[r(327)][r(348)](0,0,-1),O[r(327)].applyMatrix4(O.rotationMatrix),O.lookAtPosition[r(372)](O[r(386)]),O[r(368)][r(317)](O[r(384)],O.lookAtPosition),O[r(368)].reflect(O[r(379)]).negate(),O.target[r(372)](O[r(384)]),O[r(409)][r(313)][r(329)](O[r(315)]),O[r(409)].up[r(348)](0,1,0),O.virtualCamera.up[r(336)](O[r(406)]),O[r(409)].up.reflect(O.normal),O[r(409)][r(345)](O[r(368)]),O.virtualCamera[r(396)]=(null==y?void 0:y[r(391)]).far,O[r(409)][r(350)](),O.virtualCamera[r(404)][r(329)]((null==y?void 0:y[r(391)])[r(404)]),O[r(341)][r(348)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O[r(341)][r(380)](O[r(409)][r(404)]),O[r(341)][r(380)](O.virtualCamera[r(385)]),O[r(341)][r(380)](n.matrixWorld),O[r(349)].setFromNormalAndCoplanarPoint(O[r(379)],O[r(384)]),O[r(349)][r(336)](O[r(409)][r(385)]),O[r(325)][r(348)](O.reflectorPlane[r(379)].x,O[r(349)][r(379)].y,O[r(349)][r(379)].z,O[r(349)].constant);const i=O[r(409)].projectionMatrix;O.q.x=(Math.sign(O[r(325)].x)+i[r(347)][8])/i[r(347)][0],O.q.y=(Math[r(365)](O[r(325)].y)+i.elements[9])/i.elements[5],O.q.z=-1,O.q.w=(1+i[r(347)][10])/i.elements[14],O.clipPlane[r(400)](2/O[r(325)][r(331)](O.q)),i.elements[2]=O[r(325)].x,i[r(347)][6]=O[r(325)].y,i[r(347)][10]=O[r(325)].z+1,i.elements[14]=O[r(325)].w})(e),w.value[t(332)][t(397)]=!1,w[t(391)][t(402)](R.value),w.value[t(395)]||w[t(391)][t(322)](),w.value.render(x[t(391)],O.virtualCamera),null==(n=null==T?void 0:T[t(391)])||n.render(w[t(391)],R[t(391)],E[t(391)]),w.value.xr[t(351)]=i,w[t(391)][t(332)][t(397)]=a,e[t(403)]=!0,w[t(391)][t(402)](null)}));const F=Sn(),B=nn((()=>{const n=r,t={};return Object.assign(t,o),Object[n(362)](t,F[n(391)]),t}));return yn((()=>{var n,t;const e=r;null==(n=null==R?void 0:R.value)||n[e(405)](),null==(t=null==E?void 0:E[e(391)])||t[e(405)]()})),(n,t)=>{var e,o,i;const c=r;return sn(),un(c(383),wn({key:c(353)+D[c(391)][c(369)]+D[c(391)][c(371)]+D.value[c(355)],ref_key:c(314),ref:C},B[c(391)],{"texture-matrix":O[c(341)],mirror:en(p),"t-diffuse":null==(e=R[c(391)])?void 0:e[c(398)],"t-depth":null==(o=R[c(391)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=E[c(391)])?void 0:i[c(398)],"has-blur":P.value,"mix-strength":en(v),"min-depth-threshold":en(a),"max-depth-threshold":en(s),"depth-scale":en(u),"depth-to-blur-ratio-bias":en(l),distortion:en(m),distortionMap:en(g),"mix-contrast":en(_),"defines-USE_BLUR":P[c(391)]?"":void 0,"defines-USE_DEPTH":en(u)>0?"":void 0,"defines-USE_DISTORTION":en(g)?"":void 0}),null,16,Me)}}});function Ee(){const n=["visible","projectionMatrix","dispose","rotationMatrix","reflectorOffset","setFromMatrixPosition","virtualCamera","t-depth","position","materialRef","view","error","subVectors","59028eMklyz","matrixWorld","uuid","128HhdUIz","clear","depth-scale",'{}.constructor("return this")( )',"clipPlane","material","lookAtPosition","constructor","copy","console","dot","shadowMap","traverse","25tRpCTp","string","applyMatrix4","exception","apply","log","texture-matrix","textureMatrix","depth-to-blur-ratio-bias","isMesh","97864oTyxer","lookAt","debu","elements","set","reflectorPlane","updateMatrixWorld","enabled","186774wmFIFt","key","test","defines-USE_DISTORTION","gger","1079496qCKvjS","970696RlRiod","21489MgaDzL","has-blur","input","assign","negate","length","sign","counter","while (true) {}","target","defines-USE_BLUR","toString","defines-USE_DEPTH","add","chain","addScaledVector","__proto__","trace","info","action","normal","multiply","warn","function *\\( *\\)","TresMeshReflectorMaterial","reflectorWorldPosition","matrixWorldInverse","cameraWorldPosition","reflect","init","997185kdvrbm","mirror","value","distortionMap","extractRotation","prototype","autoClear","far","autoUpdate","texture","t-diffuse","multiplyScalar","index","setRenderTarget"];return(Ee=function(){return n})()}function Te(n){function t(n){const e=Re;if(typeof n===e(335))return function(n){}[e(328)](e(367))[e(338)](e(366));1!==(""+n/n)[e(364)]||n%20==0?function(){return!0}[e(328)](e(346)+e(356)).call(e(378)):function(){return!1}[e(328)](e(346)+e(356))[e(338)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function De(n,t){const e=Oe();return(De=function(n,t){return e[n-=444]})(n,t)}!function(n,t){const e=De,r=Oe();for(;;)try{if(683024===-parseInt(e(451))/1*(parseInt(e(455))/2)+-parseInt(e(450))/3+parseInt(e(466))/4*(-parseInt(e(457))/5)+parseInt(e(471))/6*(parseInt(e(452))/7)+-parseInt(e(458))/8+-parseInt(e(477))/9*(parseInt(e(469))/10)+parseInt(e(449))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(470)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ze(this,(function(){const n=De,t=new RegExp(n(474)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ce(n(468));t[n(445)](r+"chain")&&e[n(445)](r+"input")?Ce():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(470)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(){const n=['{}.constructor("return this")( )',"string","counter","info","action","console","36CAvBgj","__proto__","init","70UwnFoD","apply","8016CprcWC","exception","update","function *\\( *\\)","stateObject","warn","207027wSRSgp","value","prototype","background","fog","log","gger","return (function() ","error","test","type","bind","dispose","33563926bjHUrQ","2127387hZeuVV","43khTSvG","4417NtDuNF","call","length","41822fmfOfe","constructor","142755AISLxf","9479808QgIpTt","texture"];return(Oe=function(){return n})()}function Ce(n){function t(n){const e=De;if(typeof n===e(461))return function(n){}.constructor("while (true) {}")[e(470)](e(462));1!==(""+n/n)[e(454)]||n%20==0?function(){return!0}[e(456)]("debu"+e(483))[e(453)](e(464)):function(){return!1}[e(456)]("debu"+e(483))[e(470)](e(475)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Pe(void 0,(function(){const n=De,t=function(){const n=De;let t;try{t=Function(n(484)+n(460)+");")()}catch(e){t=window}return t}(),e=t[n(465)]=t[n(465)]||{},r=[n(482),n(476),n(463),n(444),n(472),"table","trace"];for(let o=0;o<r[n(454)];o++){const t=Pe[n(456)][n(479)][n(447)](Pe),i=r[o],a=e[i]||t;t[n(467)]=Pe[n(447)](Pe),t.toString=a.toString[n(447)](a),e[i]=t}}))();const ke=je;!function(n,t){const e=je,r=Ne();for(;;)try{if(997798===-parseInt(e(444))/1+parseInt(e(435))/2+-parseInt(e(462))/3+parseInt(e(465))/4+parseInt(e(455))/5*(-parseInt(e(452))/6)+parseInt(e(431))/7+-parseInt(e(456))/8*(parseInt(e(432))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(419)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fe(this,(function(){const n=je,t=new RegExp(n(437)),e=new RegExp(n(443),"i"),r=He("init");t.test(r+"chain")&&e[n(460)](r+n(461))?He():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(n,t){const e=Ne();return(je=function(n,t){return e[n-=417]})(n,t)}Be(void 0,(function(){const n=je;let t;try{t=Function(n(445)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(459)]=t.console||{},r=[n(422),n(417),"info",n(447),n(463),n(440),n(433)];for(let i=0;i<r[n(424)];i++){const t=Be[n(464)][n(436)].bind(Be),o=r[i],a=e[o]||t;t[n(450)]=Be[n(441)](Be),t[n(442)]=a[n(442)][n(441)](a),e[o]=t}}))();const Ue=[ke(420)];function Ne(){const n=["value","index","console","test","input","1129095JHHqcO","exception","constructor","5534212dTQiks","warn","string","apply","object","while (true) {}","log","debu","length","resolution","gger","call","envMap","fog","far","703507RdXINp","9weUFhQ","trace","counter","3864674vZUMTe","prototype","function *\\( *\\)","action","frames","table","bind","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1246841OWmTpp","return (function() ","visible","error","$slots","default","__proto__","primitive","20610TQvEDf","TresGroup","rgRef","70VgUSCS","5978376nfBpXL"];return(Ne=function(){return n})()}const Le=rn({__name:ke(458),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=q(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return tn((()=>s),(n=>{var t;const e=De;null==(t=c[e(478)])||t[e(448)](),c.value=new v(n[e(478)]),c[e(478)][e(459)][e(446)]=h}),{immediate:!0}),tn([u,l,c],(([n,t,e])=>{e&&(f[De(478)]=new m(n,t,e))}),{immediate:!0}),yn((()=>{var n;null==(n=c[De(478)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=De;p=a[t(478)].fog,d=a[t(478)][t(480)],a[t(478)][t(480)]=r||d,a[t(478)][t(481)]=o||p,null==(n=f[t(478)])||n[t(473)](i.value,a[t(478)]),a[t(478)][t(481)]=p,a[t(478)][t(480)]=d}}}({resolution:o[r(425)],near:o.near,far:o[r(430)],envMap:o[r(428)],fog:o[r(429)]}),{onBeforeLoop:s}=K();let u=0;const l=J(null);return s((()=>{const n=r;l[n(457)]&&(o[n(439)]===1/0||u<o[n(439)])&&(l[n(457)][n(446)]=!1,c(),l[n(457)][n(446)]=!0,u++)})),t({texture:null==(e=i[r(457)])?void 0:e.texture}),(n,t)=>{const e=r;return sn(),un(e(453),null,[mn(e(451),{object:en(a)},null,8,Ue),mn("TresGroup",{ref_key:e(454),ref:l},[ln(n[e(448)],e(449))],512)])}}});function He(n){function t(n){const e=je;if(typeof n===e(418))return function(n){}[e(464)](e(421))[e(419)](e(434));1!==(""+n/n)[e(424)]||n%20==0?function(){return!0}[e(464)](e(423)+e(426))[e(427)](e(438)):function(){return!1}.constructor(e(423)+e(426))[e(419)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=We,r=Ge();for(;;)try{if(144329===parseInt(e(196))/1+parseInt(e(200))/2+parseInt(e(182))/3+parseInt(e(203))/4+-parseInt(e(204))/5*(parseInt(e(191))/6)+parseInt(e(185))/7*(parseInt(e(175))/8)+-parseInt(e(202))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(195)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ze(this,(function(){const n=We,t=new RegExp(n(179)),e=new RegExp(n(189),"i"),r=qe("init");t[n(199)](r+n(207))&&e[n(199)](r+"input")?qe():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(195)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(){const n=["apply","234751EyBcfL","key","UniformsUtils","test","544042VlkIjp","length","6863562UNHvuF","509036IhLbnM","515qnmMOO","prototype","table","chain","__proto__","bind","defineProperty","exception","info","log","action","debu","forEach","counter","24xjOuoy","generateUUID","gger","constructor","function *\\( *\\)","ShaderMaterial","warn","118104RELddr","console","stateObject","599501qmUQoJ","return (function() ","uniforms","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","1362cjkcLx","toString","string","clone"];return(Ge=function(){return n})()}function $e(n,t,e,r){const o=We,i=class extends T[o(180)]{constructor(i={}){const a=o,s=Object.entries(n);super({uniforms:s.reduce(((n,[t,e])=>{const r=We,o=T[r(198)][r(194)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(197)]="",s[a(216)]((([n])=>Object[a(210)](this,n,{get:()=>this[a(187)][n].value,set:t=>this[a(187)][n].value=t}))),Object.assign(this,i),r&&r(this)}};return i.key=$[o(176)](),i}function We(n,t){const e=Ge();return(We=function(n,t){return e[n-=174]})(n,t)}function qe(n){function t(n){const e=We;if(typeof n===e(193))return function(n){}[e(178)]("while (true) {}")[e(195)](e(174));1!==(""+n/n).length||n%20==0?function(){return!0}[e(178)]("debu"+e(177))[e(190)](e(214)):function(){return!1}[e(178)](e(215)+e(177))[e(195)](e(184)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=We,t=function(){const n=We;let t;try{t=Function(n(186)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(183)]||{},r=[n(213),n(181),n(212),n(188),n(211),n(206),"trace"];for(let o=0;o<r[n(201)];o++){const t=Ve.constructor[n(205)][n(209)](Ve),i=r[o],a=e[i]||t;t[n(208)]=Ve[n(209)](Ve),t[n(192)]=a[n(192)].bind(a),e[i]=t}}))();var Ye=Qe;!function(n,t){for(var e=Qe,r=Tr();;)try{if(384267===parseInt(e(358))/1+-parseInt(e(315))/2+-parseInt(e(286))/3*(-parseInt(e(284))/4)+parseInt(e(400))/5+-parseInt(e(399))/6+-parseInt(e(435))/7+parseInt(e(423))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Qe(364)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n,t){var e=Tr();return(Qe=function(n,t){return e[n-=263]})(n,t)}!function(){Ke(this,(function(){var n=Qe,t=new RegExp(n(297)),e=new RegExp(n(382),"i"),r=Pr("init");t[n(444)](r+n(316))&&e[n(444)](r+n(267))?Pr():r("0")}))()}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Qe(364)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=Qe,e=function(n,t){var e=Qe;if(typeof n!==e(434)||null===n)return n;var r=n[Symbol[e(431)]];if(void 0!==r){var o=r.call(n,t||e(292));if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return typeof e===t(330)?e:String(e)}function nr(n,t,e){return(t=Je(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=Qe,r=Object.keys(n);if(Object[e(324)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(371)]((function(t){var r=e;return Object[r(307)](n,t)[r(359)]}))),r[e(344)][e(364)](r,o)}return r}function er(n){for(var t=Qe,e=1;e<arguments[t(367)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0)[t(328)]((function(t){nr(n,t,r[t])})):Object[t(302)]?Object[t(439)](n,Object[t(302)](r)):tr(Object(r))[t(328)]((function(e){Object[t(393)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function rr(n,t){var e=Qe;if(null==n)return{};var r,o,i=function(n,t){var e=Qe;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(367)];o++)r=a[o],t[e(336)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(324)]){var a=Object[e(324)](n);for(o=0;o<a[e(367)];o++)r=a[o],t[e(336)](r)>=0||Object[e(405)][e(350)][e(326)](n,r)&&(i[r]=n[r])}return i}function or(n,t){var e=Qe;(null==t||t>n[e(367)])&&(t=n[e(367)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ir(n,t){return function(n){if(Array[Qe(311)](n))return n}(n)||function(n,t){var e=Qe,r=null==n?null:e(365)!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(326)](n))[e(334)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(326)](r))[e(415)])&&(s[e(344)](o.value),s[e(367)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(282)]&&(c=r[e(282)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Qe;if(n){if(typeof n===e(430))return or(n,t);var r=Object[e(405)][e(406)][e(326)](n)[e(449)](8,-1);return r===e(416)&&n[e(298)]&&(r=n[e(298)][e(322)]),r===e(312)||r===e(411)?Array[e(338)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(444)](r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError(Qe(407))}()}function ar(n,t){for(var e=Qe,r=0;r<t.length;r++){var o=t[r];o[e(359)]=o.enumerable||!1,o[e(376)]=!0,e(438)in o&&(o.writable=!0),Object[e(393)](n,Je(o.key),o)}}function cr(n){if(void 0===n)throw new ReferenceError(Qe(275));return n}function sr(n,t){var e=Qe;return(sr=Object[e(452)]?Object[e(452)][e(410)]():function(n,t){return n[e(296)]=t,n})(n,t)}function ur(n){var t=Qe;return(ur=Object.setPrototypeOf?Object[t(425)][t(410)]():function(n){var e=t;return n[e(296)]||Object[e(425)](n)})(n)}function lr(n){var t=function(){var n=Qe;if(typeof Reflect===n(365)||!Reflect[n(360)])return!1;if(Reflect[n(360)][n(370)])return!1;if(typeof Proxy===n(308))return!0;try{return Boolean[n(405)][n(436)][n(326)](Reflect[n(360)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Qe,o=ur(n);if(t){var i=ur(this)[r(298)];e=Reflect.construct(o,arguments,i)}else e=o[r(364)](this,arguments);return function(n,t){var e=Qe;if(t&&(typeof t===e(434)||typeof t===e(308)))return t;if(void 0!==t)throw new TypeError(e(273));return cr(n)}(this,e)}}Xe(void 0,(function(){for(var n=Qe,t=function(){var n,t=Qe;try{n=Function(t(395)+t(448)+");")()}catch(e){n=window}return n}(),e=t[n(313)]=t.console||{},r=["log",n(396),n(304),n(268),"exception",n(337),n(419)],o=0;o<r[n(367)];o++){var i=Xe.constructor[n(405)].bind(Xe),a=r[o],c=e[a]||i;i[n(296)]=Xe[n(410)](Xe),i[n(406)]=c[n(406)][n(410)](c),e[a]=i}}))();var fr,pr,dr,hr={diffuse:Ye(374),normal:"csm_Normal",roughness:Ye(414),metalness:Ye(277),emissive:Ye(342),ao:"csm_AO",bump:Ye(377),clearcoat:Ye(440),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Ye(345),pointSize:"csm_PointSize",fragColor:Ye(392),depthAlpha:Ye(379),position:Ye(294),positionRaw:Ye(317)},vr=(nr(fr={},""[Ye(352)](hr[Ye(421)]),"*"),nr(fr,"".concat(hr[Ye(288)]),"*"),nr(fr,""[Ye(352)](hr.normal),"*"),nr(fr,""[Ye(352)](hr[Ye(366)]),[Ye(290)]),nr(fr,""[Ye(352)](hr.diffuse),"*"),nr(fr,""[Ye(352)](hr[Ye(283)]),"*"),nr(fr,""[Ye(352)](hr.emissive),[Ye(341),"MeshPhysicalMaterial"]),nr(fr,""[Ye(352)](hr[Ye(361)]),[Ye(341),Ye(300)]),nr(fr,""[Ye(352)](hr[Ye(408)]),[Ye(341),Ye(300)]),nr(fr,""[Ye(352)](hr.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial",Ye(394),Ye(333),Ye(272)]),nr(fr,""[Ye(352)](hr[Ye(424)]),["MeshLambertMaterial",Ye(348),Ye(276),Ye(333),Ye(300),Ye(341),Ye(272),Ye(417)]),nr(fr,""[Ye(352)](hr.depthAlpha),["MeshDepthMaterial"]),nr(fr,"".concat(hr[Ye(368)]),[Ye(300)]),nr(fr,""[Ye(352)](hr.clearcoatRoughness),[Ye(300)]),nr(fr,"".concat(hr[Ye(270)]),[Ye(300)]),fr),mr={"#include <lights_physical_fragment>":T[Ye(321)].lights_physical_fragment},gr=(nr(pr={},"".concat(hr[Ye(332)]),{"#include <beginnormal_vertex>":Ye(385)[Ye(352)](hr.normal,";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),nr(pr,""[Ye(352)](hr.position),{"#include <begin_vertex>":Ye(354)[Ye(352)](hr[Ye(421)],";\n  ")}),nr(pr,""[Ye(352)](hr[Ye(288)]),{"#include <begin_vertex>":Ye(451)[Ye(352)](hr.positionRaw,Ye(363))}),nr(pr,""[Ye(352)](hr[Ye(366)]),{"gl_PointSize = size;":Ye(437)[Ye(352)](hr[Ye(366)],Ye(453))}),nr(pr,""[Ye(352)](hr[Ye(420)]),{"#include <color_fragment>":Ye(351)[Ye(352)](hr[Ye(420)],Ye(388))}),nr(pr,""[Ye(352)](hr.fragColor),{"#include <dithering_fragment>":Ye(280)[Ye(352)](hr[Ye(283)],Ye(388))}),nr(pr,""[Ye(352)](hr[Ye(402)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = "[Ye(352)](hr[Ye(402)],Ye(453))}),nr(pr,""[Ye(352)](hr[Ye(361)]),{"#include <roughnessmap_fragment>":Ye(347)[Ye(352)](hr[Ye(361)],";\n    ")}),nr(pr,"".concat(hr[Ye(408)]),{"#include <metalnessmap_fragment>":Ye(401)[Ye(352)](hr.metalness,Ye(453))}),nr(pr,"".concat(hr.ao),{"#include <aomap_fragment>":Ye(274).concat(hr.ao,";\n    ")}),nr(pr,""[Ye(352)](hr[Ye(424)]),{"#include <normal_fragment_maps>":Ye(346)[Ye(352)](hr.bump,Ye(441))[Ye(352)](hr[Ye(424)],Ye(265))}),nr(pr,""[Ye(352)](hr.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(343)[Ye(352)](hr[Ye(266)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= "[Ye(352)](hr[Ye(266)],Ye(453))}),nr(pr,""[Ye(352)](hr[Ye(368)]),{"material.clearcoat = clearcoat;":Ye(386).concat(hr[Ye(368)],";")}),nr(pr,""[Ye(352)](hr[Ye(409)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ye(301)[Ye(352)](hr[Ye(409)],";")}),nr(pr,""[Ye(352)](hr[Ye(270)]),{"#include <clearcoat_normal_fragment_begin>":Ye(299)}),pr),_r=(nr(dr={},""[Ye(352)](hr[Ye(421)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(335)[Ye(352)](hr[Ye(421)],Ye(319))}),nr(dr,""[Ye(352)](hr[Ye(288)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(285).concat(hr[Ye(421)],Ye(388))}),nr(dr,""[Ye(352)](hr[Ye(420)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(269)[Ye(352)](hr.diffuse,";\n  ")}),nr(dr,""[Ye(352)](hr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(269)[Ye(352)](hr.fragColor,Ye(388))}),dr),yr={clearcoat:[hr[Ye(368)],hr[Ye(270)],hr[Ye(409)]]},xr=Ye(412),br=Ye(456),Ir=Ye(329),Sr=Ye(456),wr=Ye(327),Mr=[Ye(404),Ye(455),"vertexShader",Ye(454),Ye(422),"cacheKey",Ye(340)],Rr=function(n,t,e){return n[Ye(369)](t).join(e)},Ar=function(n,t){var e,r,o=Ye;return new RegExp("\\b"[o(352)]((e=t,r=Ye,e[r(428)](/[-\/\\^$*+?.()|[\]{}]/g,r(373))),"\\b"))[o(444)](n)};function Er(n){return n?n[Ye(428)](/\s/g,""):void 0}function Tr(){var n=["function","trim","_getCacheHash","isArray","Map","console","void main() {","34960FQEyGB","chain","csm_PositionRaw","CSM: ",", 1.0 );\n  ","message","ShaderChunk","name"," is not available in ","getOwnPropertySymbols","gger","call","\n    \n","forEach","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","symbol","cacheHash","normal","MeshPhongMaterial","next","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","indexOf","table","from","counter","silent","MeshStandardMaterial","csm_Emissive","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","push","csm_ClearcoatNormal","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","MeshMatcapMaterial","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","propertyIsEnumerable","\n    #include <color_fragment>\n    diffuseColor = ","concat","_generateMaterial","\n    vec3 transformed = ","_getMaterialDefine","Material","includes","420682MbmXHh","enumerable","construct","roughness","__csm",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","apply","undefined","pointSize","length","clearcoat","split","sham","filter","customProgramCacheKey","\\$&","csm_DiffuseColor","void ","configurable","csm_Bump","while (true) {}","csm_DepthAlpha",'". Shader cannot compile.','" is required to use output "',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","set","onBeforeCompile","\n    vec3 objectNormal = ","material.clearcoat = ","type",";\n  ","_getPatchMapForMaterial","void main()","RawShaderMaterial","csm_FragColor","defineProperty","MeshLambertMaterial","return (function() ","warn","// #_CSM_#","isAlreadyExtended","3442704TYTaYx","543640AUMwXa","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","emissive","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","baseMaterial","prototype","toString","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","metalness","clearcoatRoughness","bind","Set","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","substring","csm_Roughness","done","Object","ShadowMaterial","get","trace","diffuse","position","patchMap","6416712kXgktk","bump","getPrototypeOf","_patchShader","assign","replace","create","string","toPrimitive","\n    \n            ","\n            ","object","3597860QZbzYz","valueOf","\n    gl_PointSize = ","value","defineProperties","csm_Clearcoat"," - (dot(","lastIndexOf","Super expression must either be null or a function","test","ShaderMaterial","generateUUID","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ",'{}.constructor("return this")( )',"slice","MathUtils","\n    vec4 csm_internal_positionUnprojected = ","setPrototypeOf",";\n    ","uniforms","fragmentShader","\n    varying mat4 csm_internal_vModelViewMatrix;\n","cacheKey","update","clone",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","depthAlpha","input","error","\n    gl_FragColor = ","clearcoatNormal","action","MeshToonMaterial","Derived constructors may only return object or undefined","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","this hasn't been initialised - super() hasn't been called","MeshNormalMaterial","csm_Metalness","is not a constructor","stateObject","\n    #include <dithering_fragment>\n    gl_FragColor  = ","debu","return","fragColor","632048tqQTdK","\n    gl_Position = ","3nMNcCu","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","positionRaw","entries","PointsMaterial","vertexShader","default","Cannot call a class as a function","csm_Position","find","__proto__","function *\\( *\\)","constructor","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","MeshPhysicalMaterial","material.clearcoatRoughness = ","getOwnPropertyDescriptors","needsUpdate","info","();\n              // #_CSM_#\n          ","CustomShaderMaterial does not support RawShaderMaterial","getOwnPropertyDescriptor"];return(Tr=function(){return n})()}function Dr(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=Ye;!function(n,t){var e=Qe;if("function"!=typeof t&&null!==t)throw new TypeError(e(443));n[e(405)]=Object[e(429)](t&&t[e(405)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(393)](n,"prototype",{writable:!1}),t&&sr(n,t)}(c,n);var e,r,o,i,a=lr(c);function c(n){var t,e,r,o,i,s=Qe,u=n[s(404)],l=n.fragmentShader,f=n[s(291)],p=n.uniforms,d=n[s(422)],h=n.cacheKey,v=n[s(340)],m=rr(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Qe(293))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e[t(320)][t(336)](t(278))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(387)]===s(391))throw new Error(s(306));(function(n,t){var e=Ye;e(367),Object[e(427)](n,t);var r=Object.getPrototypeOf(t);Object[e(289)](Object[e(302)](r))[e(371)]((function(n){var t=e,r=typeof n[1][t(418)]===t(308),o=typeof n[1][t(383)]===t(308),i=typeof n[1].value===t(308),a=n[0]===t(298);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(308)&&Object[r(393)](n,t[0],t[1])}))})(cr(t=a.call(this)),e),t[s(362)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(450)][s(446)](),type:e.type,isAlreadyExtended:(r=e[s(384)],o=Ye,i=r[o(406)]()[o(309)](),!(0===i.substring(i.indexOf("{")+1,i[o(442)]("}")).trim().length)),cacheHash:"",silent:v},t.uniforms=er(er({},t[s(454)]||{}),p||{});var g=t[s(362)],_=g[s(455)],y=g[s(291)],x=t[s(454)];return t.__csm.cacheHash=t[s(310)](),t[s(353)](_,y,x),t}return e=c,r=[{key:t(263),value:function(){var n=t,e=arguments[n(367)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(454)]||this.uniforms,Object.assign(this.__csm,e);var r=this[n(362)],o=r[n(455)],i=r[n(291)],a=this[n(454)],c=this._getCacheHash();this.__csm.cacheHash=c,this[n(353)](o,i,a)}},{key:t(264),value:function(){var n=t,e={baseMaterial:this[n(362)][n(404)],fragmentShader:this[n(362)][n(455)],vertexShader:this[n(362)][n(291)],uniforms:this[n(454)],silent:this[n(362)][n(340)],patchMap:this[n(362)][n(422)],cacheKey:this.__csm[n(457)]},r=new(this[n(298)])(e);return Object[n(427)](this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(362)],r=e.fragmentShader,o=e[n(291)],i=this[n(454)],a=[Er(r),Er(o),i][n(371)]((function(n){return void 0!==n}));return a[n(367)]>0?En(a,{excludeValues:!0}):this[n(372)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(372)]=function(){var n=o;return i.__csm[n(331)]};var a=function(t){var r=o;try{var a=i[r(355)]();if(n){var c=i[r(426)](Dr(n),t[r(455)],!0);t.fragmentShader=a+c}if(e){var s=i._patchShader(Dr(e),t.vertexShader);t[r(291)]="#define IS_VERTEX;\n"+s,t.vertexShader=a+t[r(291)]}t[r(454)]=er(er({},t.uniforms),i[r(454)]),i[r(454)]=t[r(454)]}catch(u){console.error(u)}};if(this[o(362)].isAlreadyExtended){var c=this[o(384)];this[o(384)]=function(n,t){c(n,t),a(n)}}else this[o(384)]=a;this[o(303)]=!0}},{key:t(426),value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this[o(389)]()),this[o(362)][o(422)]);Object[o(289)](yr)[o(328)]((function(t){var e=o,r=ir(t,2),a=r[0],c=r[1][e(295)]((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'.concat(a,e(381)).concat(c,e(380)))})),Object[o(289)](mr)[o(328)]((function(n){var t=ir(n,2),e=t[0],r=t[1];a=Rr(a,e,r)})),Object.keys(c).forEach((function(t){var e=o;Object.keys(c[t])[e(328)]((function(r){var o=e,s=vr[t],u=i[o(362)][o(387)];if("*"===t||Ar(n,t)){if(!(!s||Array[o(311)](s)&&s[o(357)](u)||"*"===s))throw new Error(o(318)[o(352)](t,o(323))[o(352)](u,". Shader cannot compile."));a=Rr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(362)].instanceID[o(428)](/-/g,"_"),h=n[o(428)](/void\s+main\s*\(\s*\)/g,o(375)[o(352)](d,"()")),v=n.includes(o(390)),m=a[o(357)]("// #_CSM_#");return v&&(m&&this.__csm[o(398)]?(a=a[o(428)](o(314),"\n            "[o(352)](h,"\n            \n            void main() {\n          ")),s=a,u=o(397),l=o(433).concat(d,"();\n            // #_CSM_#\n          "),f=Ye,p=s.lastIndexOf(u),a=-1===p?s:s[f(413)](0,p)+l+s[f(413)](p+u[f(367)])):a=a[o(428)]("void main() {",o(403)[o(352)](r?Sr:br,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(352)](xr,o(432))[o(352)](h,o(287))[o(352)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(349))[o(352)](r?wr:Ir,o(447))[o(352)](d,o(305)))),a}},{key:t(355),value:function(){var n=t,e=this[n(362)].type;return e?"#define IS_"[n(352)](e.toUpperCase(),";\n"):"#define IS_UNKNOWN;\n"}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this[n(362)][n(387)]===n(445)?_r:gr}}],i=Qe,r&&ar(e[i(405)],r),o&&ar(e,o),Object[i(393)](e,i(405),{writable:!1}),c}(T[Ye(356)]);function Pr(n){function t(n){var e=Qe;if(typeof n===e(430))return function(n){}[e(298)](e(378))[e(364)](e(339));1!==(""+n/n).length||n%20==0?function(){return!0}[e(298)](e(281)+e(325))[e(326)](e(271)):function(){return!1}[e(298)]("debu"+e(325))[e(364)](e(279)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Or=jr;!function(n,t){const e=jr,r=Fr();for(;;)try{if(904256===-parseInt(e(438))/1+parseInt(e(442))/2+parseInt(e(441))/3+parseInt(e(419))/4*(-parseInt(e(432))/5)+parseInt(e(446))/6+parseInt(e(443))/7+parseInt(e(422))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Cr(this,(function(){const n=jr,t=new RegExp(n(409)),e=new RegExp(n(431),"i"),r=Nr("init");t[n(423)](r+n(417))&&e[n(423)](r+"input")?Nr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fr(){const n=["setStyle","#ff00fc","5439752SDstMY","test","log","table","return (function() ","constructor","length","info","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","12290SudVIf","metalness","color","stateObject","bind","clearcoatRoughness","1163693ZKtQKs","roughness","console","2048484BlkxiT","1321348OUkRGh","5554017VNQrHF","clearcoat","object","2806542aAcibt","action","toString","function *\\( *\\)","gger","warn","\n      ","apply","while (true) {}",'{}.constructor("return this")( )',"string","chain","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","1980uVQiNA"];return(Fr=function(){return n})()}kr(void 0,(function(){const n=jr;let t;try{t=Function(n(426)+n(415)+");")()}catch(o){t=window}const e=t.console=t[n(440)]||{},r=[n(424),n(411),n(429),"error","exception",n(425),"trace"];for(let i=0;i<r[n(428)];i++){const t=kr.constructor.prototype.bind(kr),o=r[i],a=e[o]||t;t.__proto__=kr[n(436)](kr),t[n(408)]=a.toString[n(436)](a),e[o]=t}}))();const Br=[Or(445)];function jr(n,t){const e=Fr();return(jr=function(n,t){return e[n-=408]})(n,t)}const Ur=rn({__name:"index",props:{color:{default:Or(421)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:W,metalness:e[t(433)],roughness:e[t(439)],clearcoat:e[t(444)],clearcoatRoughness:e[t(437)],color:e[t(434)],vertexShader:t(418),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(412)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new zr(r);return dn((()=>{const n=t;o[n(434)][n(420)](e[n(434)]),o[n(433)]=e[n(433)],o[n(439)]=e.roughness,o[n(444)]=e[n(444)],o[n(437)]=e[n(437)]})),(n,t)=>(sn(),un("primitive",{object:en(o)},null,8,Br))}});function Nr(n){function t(n){const e=jr;if(typeof n===e(416))return function(n){}.constructor(e(414))[e(413)]("counter");1!==(""+n/n)[e(428)]||n%20==0?function(){return!0}[e(427)]("debu"+e(410)).call(e(447)):function(){return!1}[e(427)](e(430)+"gger").apply(e(435)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Vr,r=Zr();;)try{if(531773===parseInt(e(248))/1*(parseInt(e(224))/2)+-parseInt(e(245))/3+-parseInt(e(232))/4*(-parseInt(e(222))/5)+-parseInt(e(235))/6+-parseInt(e(223))/7*(parseInt(e(231))/8)+-parseInt(e(229))/9*(-parseInt(e(233))/10)+parseInt(e(220))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Vr(246)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Vr,t=new RegExp(n(252)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Gr("init");t[n(240)](r+n(230))&&e[n(240)](r+n(221))?Gr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Vr(246)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(){var n=["toString","string",'{}.constructor("return this")( )',"call","test","console","constructor","trace","debu","961680uwoiFV","apply","error","149143eWtfzK","return (function() ","action","warn","function *\\( *\\)","exception","bind","log","length","12465310TsmbBp","input","10kHueLA","2565374yaiTaK","2gOpxDI","table","counter","gger","while (true) {}","63QhmZYT","chain","16XHBaXH","107448uwgzbK","1411400ELqOWm","info","4432560AibLkJ"];return(Zr=function(){return n})()}function Vr(n,t){var e=Zr();return(Vr=function(n,t){return e[n-=217]})(n,t)}function Gr(n){function t(n){var e=Vr;if(typeof n===e(237))return function(n){}[e(242)](e(228)).apply(e(226));1!==(""+n/n)[e(219)]||n%20==0?function(){return!0}[e(242)](e(244)+e(227))[e(239)](e(250)):function(){return!1}[e(242)](e(244)+"gger")[e(246)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){var n,t=Vr;try{n=Function(t(249)+t(238)+");")()}catch(s){n=window}for(var e=n[t(241)]=n[t(241)]||{},r=[t(218),t(251),t(234),t(247),t(253),t(225),t(243)],o=0;o<r[t(219)];o++){var i=Hr.constructor.prototype[t(217)](Hr),a=r[o],c=e[a]||i;i.__proto__=Hr[t(217)](Hr),i[t(236)]=c[t(236)][t(217)](c),e[a]=i}}))();export{$e as C,Ur as _,Jn as a,lt as b,wt as c,Dt as d,Nt as e,Jt as f,Le as g,Ae as h,mt as u};

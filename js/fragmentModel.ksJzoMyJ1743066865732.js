import{e as n,D as t,a as o,o as r}from"./@tresjs.NxYvETXi1743066865732.js";import{_ as e,cj as a,ap as s}from"./three.qSkR4_5R1743066865732.js";import{P as i}from"./tweakpane.ivGeiIdz1743066865732.js";import{d as c,a3 as u,r as l,b as f,w as p,o as m,H as g,N as v,aj as d,ak as x,u as y,e as h,f as w,g as b,j as I,al as C}from"./@vue.L-brCdZe1743066865732.js";import"./postprocessing.ncQBP5me1743066865732.js";import"./@vueuse.2gpu5LGS1743066865732.js";const _=M;!function(n,t){const o=M,r=j();for(;;)try{if(706524===parseInt(o(446))/1*(-parseInt(o(428))/2)+-parseInt(o(454))/3*(-parseInt(o(421))/4)+-parseInt(o(447))/5*(parseInt(o(418))/6)+parseInt(o(425))/7+parseInt(o(481))/8*(-parseInt(o(419))/9)+-parseInt(o(469))/10+-parseInt(o(436))/11*(-parseInt(o(470))/12))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const z=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[M(494)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){z(this,(function(){const n=M,t=new RegExp(n(490)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=D(n(437));t[n(439)](r+n(478))&&o.test(r+n(464))?D():r("0")}))()}();const P=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[M(494)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();P(void 0,(function(){const n=M;let t;try{t=Function("return (function() "+n(416)+");")()}catch(e){t=window}const o=t.console=t[n(463)]||{},r=[n(434),n(456),n(459),n(475),n(474),n(424),"trace"];for(let a=0;a<r[n(461)];a++){const t=P[n(476)][n(429)].bind(P),e=r[a],s=o[e]||t;t.__proto__=P[n(442)](P),t.toString=s[n(413)][n(442)](s),o[e]=t}}))();const A=[_(485)];function M(n,t){const o=j();return M=function(n,t){return o[n-=413]},M(n,t)}function j(){const n=["27348LFzlSF","Color","array","counter","exception","error","constructor","onLoop","chain","mergeGeometries","aCenter","231584HsKEDh","rotateY","toPosition","normal","geometry","resource.cos","children","string","/model/eCommerce/guanYu.glb","function *\\( *\\)","traverse","translate","Vector3","apply","toString","toNonIndexed","push",'{}.constructor("return this")( )',"random","18rHcrdA","198VRJzyM","#bcd4ff","4ZLeWYA","gger","setAttribute","table","2693614AaHvuc","clone","./draco/","2803510lPRoKc","prototype","uniforms","position","value","rotateX","log","aRandom","19206aMPWlW","init","颜色1st","test","Mesh","call","bind","#ffc0fa","addBinding","m1Color","1HRMcAd","836670VCpEus","attributes","颜色2rd","disabled","m2Color","stateObject","BufferAttribute","262839wsdhJi","divideScalar","warn","debu","action","info","scene","length","set","console","input","deleteAttribute","refresh","tangent","u_progress","12044120bJOQwm"];return(j=function(){return n})()}const R=c({__name:"fragmentModelCom",async setup(r){const s=_;let c,h;const w=n=>{const t=M,o=[];return n[t(491)]((n=>{const r=t;n instanceof e[r(440)]&&(n[r(485)][r(465)]("uv"),n.geometry[r(465)](r(467)),o[r(415)](n[r(485)]))})),a[t(479)](o)},b=w(([c,h]=u((()=>t("https://opensource.cdn.icegl.cn"+s(489),{draco:!0,decoderPath:s(427)}))),c=await c,h(),c)[s(460)].children[0]);b[s(433)](Math.PI/2),b[s(492)](0,-.9,0);const I=b[s(426)]()[s(414)](),C=w(([c,h]=u((()=>t("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:s(427)}))),c=await c,h(),c)[s(460)][s(487)][0]);C[s(433)](-Math.PI/2),C[s(482)](Math.PI/3);const z=C[s(426)]().toNonIndexed(),P=I[s(448)].position.array,j=I.attributes[s(431)].count,R=z[s(448)][s(431)][s(472)],D=z[s(448)][s(484)][s(472)],N=z.attributes.position.count,S=new Float32Array(j),F=new Float32Array(3*(j+2)),V=new Float32Array(3*(j+2)),E=new Float32Array(3*(j+2));for(let n=0;n<j;n+=3){const t=1*Math[s(417)](),o=n%N;S[n]=t,S[n+1]=t,S[n+2]=t;const r=3*n,a=P[r],i=P[r+1],c=P[r+2],u=P[r+3],l=P[r+4],f=P[r+5],p=P[r+6],m=P[r+7],g=P[r+8],v=new(e[s(493)])(a+u+p,i+l+m,c+f+g)[s(455)](3);F[s(462)]([v.x,v.y,v.z],3*n),F.set([v.x,v.y,v.z],3*(n+1)),F[s(462)]([v.x,v.y,v.z],3*(n+2));const d=(n,t,o)=>{const r=s,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(462)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(R,V,o),d(D,E,o)}I[s(423)](s(435),new(e[s(453)])(S,1)),I.setAttribute(s(480),new(e[s(453)])(F,3)),I.setAttribute(s(483),new(e[s(453)])(V,3)),I[s(423)]("toNormal",new(e[s(453)])(E,3)),console.log(I[s(448)]);const J=([c,h]=u((()=>o(["./plugins/visualArts/image/fragment512px.png"]))),c=await c,h(),c),O={uniforms:{u_progress:{value:-.1},matcap1:{value:J},m1Color:{type:"v3",value:new(e[s(471)])(s(443))},matcap2:{value:J},m2Color:{type:"v3",value:new(e[s(471)])("#bcd4ff")}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},T=l({c1:"#ffc0fa",c2:s(420)}),Z=f(.5),k=new i({title:"参数"});return k[s(444)](O.uniforms.u_progress,"value",{label:"变化量",min:-.1,max:1,step:.001})[s(450)]=!0,k[s(444)](T,"c1",{label:s(438)}),k[s(444)](T,"c2",{label:s(449)}),k[s(444)](Z,"value",{label:"速度",min:.001,max:1,step:.001}),p(T,(n=>{const t=s;O.uniforms[t(445)][t(432)][t(462)](n.c1),O[t(430)][t(451)][t(432)].set(n.c2)}),{deep:!0}),n()[s(477)]((({elapsed:n})=>{const t=s;O[t(430)][t(468)][t(432)]=(Math.sin(n*Z[t(432)])+1)/2,k[t(466)]()})),(n,t)=>(m(),g("TresMesh",{geometry:y(I)},[v("TresShaderMaterial",d(x(O)),null,16)],8,A))}});function D(n){function t(n){const o=M;if(typeof n===o(488))return function(n){}[o(476)]("while (true) {}").apply(o(473));1!==(""+n/n)[o(461)]||n%20==0?function(){return!0}[o(476)](o(457)+"gger")[o(441)](o(458)):function(){return!1}[o(476)](o(457)+o(422))[o(494)](o(452)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const N=V;!function(n,t){const o=V,r=E();for(;;)try{if(780849===parseInt(o(429))/1+parseInt(o(432))/2*(parseInt(o(444))/3)+parseInt(o(447))/4+parseInt(o(451))/5*(parseInt(o(449))/6)+-parseInt(o(448))/7*(-parseInt(o(452))/8)+-parseInt(o(462))/9+-parseInt(o(445))/10)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const S=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[V(425)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){S(this,(function(){const n=V,t=new RegExp(n(457)),o=new RegExp(n(438),"i"),r=O("init");t.test(r+n(426))&&o.test(r+n(460))?O():r("0")}))()}();const F=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[V(425)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function V(n,t){const o=E();return V=function(n,t){return o[n-=425]},V(n,t)}function E(){const n=["gger","log","991282FSLXfc","bind","return (function() ","__proto__","counter","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","trace","TresCanvas","table","constructor","3wCjsnT","9244380cJcMaO","prototype","2225168GzUnlu","469JXOKUs","6jXlNXY",'{}.constructor("return this")( )',"4228465DSuOuj","15408snBlgg","error","while (true) {}","fragmentModel","length","function *\\( *\\)","stateObject","TresAmbientLight","input","debu","7206714BdxJhR","apply","chain","console","exception","479365gmcFIt"];return(E=function(){return n})()}F(void 0,(function(){const n=V,t=function(){const n=V;let t;try{t=Function(n(434)+n(450)+");")()}catch(o){t=window}return t}(),o=t[n(427)]=t[n(427)]||{},r=[n(431),"warn",n(439),n(453),n(428),n(442),n(440)];for(let e=0;e<r[n(456)];e++){const t=F[n(443)][n(446)].bind(F),a=r[e],s=o[a]||t;t[n(435)]=F[n(433)](F),t.toString=s[n(437)][n(433)](s),o[a]=t}}))();const J=c({__name:N(455),setup(n){const t=l({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),o={clearColor:"#000000",windowSize:!0,toneMapping:s,toneMappingExposure:.8};return(n,e)=>{const a=V,s=h(a(441));return m(),w(s,d(x(o)),{default:b((()=>[e[0]||(e[0]=v("TresPerspectiveCamera",{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),I(y(r),d(x(t)),null,16),e[1]||(e[1]=v(a(459),{intensity:2},null,-1)),(m(),w(C,null,{default:b((()=>[I(R)])),_:1}))])),_:1},16)}}});function O(n){function t(n){const o=V;if("string"==typeof n)return function(n){}[o(443)](o(454))[o(425)](o(436));1!==(""+n/n)[o(456)]||n%20==0?function(){return!0}[o(443)](o(461)+o(430)).call("action"):function(){return!1}[o(443)](o(461)+"gger")[o(425)](o(458)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{J as default};

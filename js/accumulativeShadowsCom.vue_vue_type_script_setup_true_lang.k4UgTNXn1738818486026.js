import{b as t,f as n,_ as e}from"./three.WgQSjl1J1738818486026.js";import{m as o}from"./@tresjs.ZGxFoQtw1738818486026.js";import{d as a,P as r}from"./@pmndrs.rZbwRp5K1738818486026.js";import{d as s,b as i,w as c,a2 as u,o as l,H as d,N as f,aj as p,ak as h}from"./@vue.NRI7TcgI1738818486026.js";const m=g;!function(t,n){const e=g,o=y();for(;;)try{if(520377===-parseInt(e(552))/1+parseInt(e(541))/2*(parseInt(e(567))/3)+-parseInt(e(572))/4+parseInt(e(499))/5*(parseInt(e(532))/6)+-parseInt(e(513))/7*(parseInt(e(518))/8)+-parseInt(e(544))/9+parseInt(e(556))/10*(parseInt(e(565))/11))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[g(503)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(t,n){const e=y();return(g=function(t,n){return e[t-=496]})(t,n)}!function(){w(this,(function(){const t=g,n=new RegExp(t(546)),e=new RegExp(t(545),"i"),o=z(t(498));n.test(o+t(559))&&e[t(557)](o+"input")?z():o("0")}))()}();const M=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[g(503)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();M(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function(t(517)+t(568)+");")()}catch(e){n=window}return n}(),e=n[t(564)]=n[t(564)]||{},o=["log",t(500),t(501),t(507),"exception",t(512),"trace"];for(let a=0;a<o[t(560)];a++){const n=M.constructor[t(561)][t(563)](M),r=o[a],s=e[r]||n;n[t(528)]=M[t(563)](M),n[t(540)]=s[t(540)].bind(s),e[r]=n}}))();const b=[m(534)];function y(){const t=["accumulativeShadowsCom","debu","ambient","cos","progressiveLightMap2","width","stateObject","__proto__","far","randFloatSpread","TresSoftShadowMaterial","18dYCBIX","castShadow","rotate-x","frames","MathUtils","blend","lightPosition","remove","toString","68MpMrYV","clear","camera","3061575wRNCsj","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","size","acos","action","height","finish","311148gMLQzj","sin","string","value","9432790QzEENc","test","DirectionalLight","chain","length","prototype","TresPlaneGeometry","bind","console","22lvGbkW","gger","7935fcvUyb",'{}.constructor("return this")( )',"opacity","position","shadows plm update","4133948CRDAyH","top","configure","bias","color","shadow","children","random","material","constructor","init","1591745VDRmTd","warn","info","mapSize","apply","shadows render end","log","prepare","error","alphaTest","#000000","set","add","table","28gclRMg","update","right","amount","return (function() ","1452696mkKSVd","left","near"];return(y=function(){return t})()}const I=s({__name:m(521),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:m(509)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const w=m,g=s;let M=i();const{extend:y,scene:I,renderer:z,camera:v}=o();y({SoftShadowMaterial:a});const S={position:(new t)[w(510)](g[w(538)].x,g[w(538)].y,g[w(538)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},x=new r(z.value,I[w(555)],S[w(502)]),_={map:x[w(525)].texture,transparent:!0,depthWrite:!1,toneMapped:!0,blend:g[w(537)],alphaTest:g[w(508)],opacity:g[w(569)],color:g[w(576)]},P=new n;for(let t=0;t<S[w(516)];t++){const t=new(e[w(558)])(16777215,S.intensity/S[w(516)]);t[w(533)]=!0,t[w(577)][w(575)]=S[w(575)],t[w(577)][w(543)][w(520)]=S[w(520)],t[w(577)][w(543)][w(529)]=S.far,t.shadow[w(543)][w(515)]=S[w(547)]/2,t.shadow[w(543)][w(519)]=-S.size/2,t[w(577)][w(543)][w(573)]=S[w(547)]/2,t.shadow[w(543)].bottom=-S.size/2,t[w(577)][w(502)][w(526)]=S.mapSize,t[w(577)][w(502)][w(550)]=S[w(502)],P[w(511)](t)}const j=()=>{const t=w,n=S[t(570)][t(560)]();for(let o=0;o<P.children.length;o++){const a=P[t(578)][o];if(Math.random()>g[t(523)])a[t(570)].set(S.position.x+e[t(536)][t(530)](S.radius),S.position.y+e[t(536)].randFloatSpread(S.radius),S[t(570)].z+e[t(536)][t(530)](S.radius));else{let e=Math[t(548)](2*Math.random()-1)-Math.PI/2,o=2*Math.PI*Math[t(579)]();a[t(570)][t(510)](Math[t(524)](e)*Math[t(524)](o)*n,Math.abs(Math.cos(e)*Math[t(553)](o)*n),Math[t(553)](e)*n)}}},T=(t=1)=>{const n=w;I[n(555)][n(511)](P),x[n(506)]();for(let e=0;e<t;e++)j(),x[n(514)](v[n(555)],g.blendWindow),console[n(505)](n(571),e);I.value[n(539)](P),x[n(551)]()};c((()=>M.value),(t=>{const n=w;t&&(x[n(574)](t),x[n(542)](),console[n(505)]("shadows render start"),T(g[n(535)]),console.log(n(504)))}));const R=()=>{x.clear(),T(g.frames)};return u((()=>{const t=w;M.value&&(g[t(569)]&&(M[t(555)][t(496)][t(569)]=g[t(569)]),g[t(508)]&&(M[t(555)][t(496)][t(508)]=g.alphaTest),g[t(576)]&&M[t(555)][t(496)][t(576)].set(g[t(576)]),g[t(537)]&&(M[t(555)][t(496)][t(537)]=g[t(537)]))})),c((()=>g.lightPosition),(t=>{const n=w;t&&(console.log(g[n(538)]),S[n(570)].set(t.x,t.y,t.z),R())}),{deep:!0}),c((()=>[g[w(535)],g.blendWindow,g[w(523)]]),(()=>{R()})),(t,n)=>{const e=w;return l(),d("TresMesh",{"receive-shadow":"",ref_key:"gPlane",ref:M,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=f(e(562),{args:[1,1]},null,-1)),f(e(531),p(h(_)),null,16)],8,b)}}});function z(t){function n(t){const e=g;if(typeof t===e(554))return function(t){}[e(497)]("while (true) {}")[e(503)]("counter");1!==(""+t/t)[e(560)]||t%20==0?function(){return!0}.constructor(e(522)+e(566)).call(e(549)):function(){return!1}[e(497)](e(522)+e(566))[e(503)](e(527)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{I as _};

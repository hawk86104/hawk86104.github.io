var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;import{_ as r,bX as o,c1 as s,ak as i,am as c}from"./three.sBrYSCgq1741007821308.js";import{m as a,e as u,o as l,f as p}from"./@tresjs.u6hJLBm41741007821308.js";import{g as f,i as d,e as m}from"./utils.gTLnoSA51741007821308.js";import{_ as h}from"./jszip.tXNnSWcU1741007821308.js";import{F as g}from"./file-saver.LP7cr5na1741007821308.js";import{P as v}from"./tweakpane.yDiyAAkA1741007821308.js";import{d as y,q as w,r as b,v as j,a2 as E,o as I,H as O,j as S,g as R,N as k,u as P,aj as x,ak as _,f as L,al as T,m as z,F as A}from"./@vue.NRI7TcgI1741007821308.js";import{v as C}from"./@fesjs.5qm9mpwh1741007821308.js";import"./postprocessing.rsQjznIU1741007821308.js";import"./@vueuse.jd1Cg91M1741007821308.js";import"./@amap.1goFCJT_1741007821308.js";import"./vue-router.ArfKSsyg1741007821308.js";import"./lodash-es.pklfUAS51741007821308.js";import"./@qlin.yHhFDldE1741007821308.js";import"./pinia.uil_kwoa1741007821308.js";import"./@floating-ui.BPbuo5Gx1741007821308.js";import"./@juggle.7yjBMqoW1741007821308.js";!function(t,n){const e=B,r=G();for(;;)try{if(486029===parseInt(e(300))/1+parseInt(e(305))/2*(-parseInt(e(303))/3)+-parseInt(e(279))/4+parseInt(e(301))/5*(parseInt(e(289))/6)+-parseInt(e(276))/7+-parseInt(e(299))/8+parseInt(e(291))/9*(parseInt(e(272))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const F=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[B(278)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){F(this,(function(){const t=B,n=new RegExp(t(293)),e=new RegExp(t(314),"i"),r=K(t(270));n.test(r+t(319))&&e[t(280)](r+t(313))?K():r("0")}))()}();const J=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[B(278)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function G(){const t=["6cgrDYU","bind","table","warn","replace","action","while (true) {}","error","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","addEventListener","object","pointerup","chain","return (function() ","toString","debu","pointermove","keyup",'{}.constructor("return this")( )',"APP.Player: Script without object.","init","keydown","190btklYq","uuid","pointerdown","removeEventListener","4606567txRByO","console","apply","2097036ItbajG","test","constructor","__proto__","counter","height","stringify","getObjectByProperty","width","scene","239970Yneygu","start","497115zLXvPU","exception","function *\\( *\\)","gger","length","update","stop","\nreturn ","3589312csweDv","847234LmjxWG","95URJCeO","push","539571IHAxwu","trace"];return(G=function(){return t})()}function U(t,n){for(let e=0,r=t[B(295)];e<r;e++)t[e](n)}J(void 0,(function(){const t=B,n=function(){const t=B;let n;try{n=Function(t(320)+t(268)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(277)]||{},r=["log",t(308),"info",t(312),t(292),t(307),t(304)];for(let o=0;o<r[t(295)];o++){const n=J[t(281)].prototype.bind(J),s=r[o],i=e[s]||n;n[t(282)]=J[t(306)](J),n[t(321)]=i[t(321)].bind(i),e[s]=n}}))(),window.THREE=r;const N={init:[],start:[],stop:[],keydown:[],keyup:[],pointerdown:[],pointerup:[],pointermove:[],update:[]},H=()=>{};function M(t){U(N[B(271)],t)}function Z(t){U(N[B(267)],t)}function B(t,n){const e=G();return(B=function(t,n){return e[t-=267]})(t,n)}function D(t){U(N[B(274)],t)}function W(t){U(N[B(318)],t)}function $(t){U(N.pointermove,t)}function K(t){function n(t){const e=B;if("string"==typeof t)return function(t){}.constructor(e(311)).apply(e(283));1!==(""+t/t)[e(295)]||t%20==0?function(){return!0}[e(281)](e(322)+"gger").call(e(310)):function(){return!1}.constructor(e(322)+e(294))[e(278)](e(315)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=Q,r=q();for(;;)try{if(844976===parseInt(e(479))/1+-parseInt(e(465))/2*(-parseInt(e(473))/3)+parseInt(e(469))/4*(parseInt(e(449))/5)+-parseInt(e(464))/6*(parseInt(e(468))/7)+parseInt(e(474))/8+-parseInt(e(457))/9+-parseInt(e(452))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const X=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[Q(483)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){X(this,(function(){const t=Q,n=new RegExp(t(462)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=V(t(481));n[t(460)](r+t(450))&&e[t(460)](r+t(480))?V():r("0")}))()}();const Y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[Q(483)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function q(){const t=["/* eslint-disable prefer-rest-params */\n/* eslint-disable no-undefined */\n/* eslint-disable guard-for-in */\nimport * as THREE from 'three'\n\nwindow.THREE = THREE // Used by APP Scripts.\nconst Grscwh = { scene: null, renderer: null, camera: null, sizes: null }\nconst player = {\n\tget renderer() {\n\t\treturn Grscwh.renderer?.value\n\t},\n\tloader: new THREE.TextureLoader(),\n\tget scene() {\n\t\t\treturn Grscwh.scene?.value\n\t},\n\tget camera() {\n\t\t\treturn Grscwh.camera?.value\n\t},\n\tget width() {\n\t\t\treturn Grscwh.sizes?.width?.value\n\t},\n\tget height() {\n\t\t\treturn Grscwh.sizes?.height?.value\n\t},\n\tget dom() {\n\t\t\treturn Grscwh.renderer?.value.domElement.parentElement\n\t},\n\tget canvas() {\n\t\t\treturn Grscwh.renderer?.value.domElement\n\t},\n\tevents: {},\n\tinit(scene, renderer, camera, sizes) {\n\t\t\tGrscwh.scene = scene\n\t\t\tGrscwh.renderer = renderer\n\t\t\tGrscwh.camera = camera\n\t\t\tGrscwh.sizes = sizes\n\t},\n\tload(sceneObject) {\n\t\t","gger","table","2394726vymrUQ","7396632pTZAkO","length","console","prototype","constructor","1425047sCrXnA","input","init","info","apply","21740bhlUEz","chain","action","11879030XkFIKP","__proto__","return (function() ","log","bind","8951922DSDPcp","stringify","\n\t\tthis.events = {\n\t\t\t\tinit: [],\n\t\t\t\tstart: [],\n\t\t\t\tstop: [],\n\t\t\t\tkeydown: [],\n\t\t\t\tkeyup: [],\n\t\t\t\tpointerdown: [],\n\t\t\t\tpointerup: [],\n\t\t\t\tpointermove: [],\n\t\t\t\tupdate: [],\n\t\t}\n\t\tlet scriptWrapParams = 'player,renderer,scene,camera'\n\t\tconst scriptWrapResultObj = {}\n\n\t\tfor (const eventKey in this.events) {\n\t\t\t\tscriptWrapParams += `,${eventKey}`\n\t\t\t\tscriptWrapResultObj[eventKey] = eventKey\n\t\t}\n\t\tconst scriptWrapResult = JSON.stringify(scriptWrapResultObj).replace(/\\\"/g, '')\n\t\tfor (const uuid in scriptsJson) {\n\t\t\t\tlet curUuid = uuid\n\t\t\t\t//这里解决一个问题 目前并没有把 主场景scene直接替换而是通过group 加进入的，所以 如果事件是基于主场景scene 那么替换这个uuid为现在tres主场景的uuid\n\t\t\t\tif (uuid === sceneObject.uuid) {\n\t\t\t\t\t\tcurUuid = this.scene.uuid\n\t\t\t\t}\n\t\t\t\tconst object = this.scene.getObjectByProperty('uuid', curUuid, true)\n\t\t\t\tif (object === undefined) {\n\t\t\t\t\t\tconsole.warn('player: Script without object.', curUuid)\n\t\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tconst scripts = scriptsJson[uuid]\n\t\t\t\tfor (let i = 0; i < scripts.length; i++) {\n\t\t\t\t\t\tconst script = scripts[i]\n\t\t\t\t\t\t// eslint-disable-next-line no-new-func\n\t\t\t\t\t\tconst functions = new Function(scriptWrapParams, `${script.source}\nreturn ${scriptWrapResult};`).bind(object)(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\tthis.renderer,\n\t\t\t\t\t\t\t\tthis.scene,\n\t\t\t\t\t\t\t\tthis.camera,\n\t\t\t\t\t\t)\n\t\t\t\t\t\tfor (const name in functions) {\n\t\t\t\t\t\t\t\tif (functions[name] === undefined) continue\n\t\t\t\t\t\t\t\tif (this.events[name] === undefined) {\n\t\t\t\t\t\t\t\t\t\tconsole.warn('player: Event type not supported (', name, ')')\n\t\t\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.events[name].push(functions[name].bind(object))\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.dispatch(this.events.init, arguments)\n\t\t}\n\t},\n\tdispatch(array, event) {\n\t\tfor (let i = 0, l = array.length; i < l; i++) {\n\t\t\t\tarray[i](event)\n\t\t}\n\t},\n\tsetCamera(value) {\n\t\t\tconsole.warn('暂时不考虑摄像机的设置函数', value)\n\t\t\t// camera = value\n\t\t\t// camera.aspect = this.width / this.height\n\t\t\t// camera.updateProjectionMatrix()\n\t},\n\tsetScene(value) {\n\t\t\tconsole.warn('暂时不考虑场景的设置函数', value)\n\t\t\t// scene = value\n\t},\n\tsetPixelRatio(value) {\n\t\t\tconsole.warn('暂时不考虑像素比的设置函数', value)\n\t},\n\tsetSize(value) {\n\t\t\tconsole.warn('暂时不考虑尺寸的设置函数', value)\n\t},\n\tdispose() {\n\t\t\t// renderer.dispose();\n\t\t\t// camera = undefined;\n\t\t\t// scene = undefined;\n\t\t\tconsole.warn('暂时不考虑释放资源的函数')\n\t},\n\tonKeyDown(event) {\n\t\tplayer.dispatch(player.events.keydown, event)\n\t},\n\tonKeyUp(event) {\n\t\t\tplayer.dispatch(player.events.keyup, event)\n\t},\n\tonPointerDown(event) {\n\t\t\tplayer.dispatch(player.events.pointerdown, event)\n\t},\n\tonPointerUp(event) {\n\t\t\tplayer.dispatch(player.events.pointerup, event)\n\t},\n\tonPointerMove(event) {\n\t\t\tplayer.dispatch(player.events.pointermove, event)\n\t},\n\tplay() {\n\t\t\tdocument.addEventListener('keydown', this.onKeyDown)\n\t\t\tdocument.addEventListener('keyup', this.onKeyUp)\n\t\t\tdocument.addEventListener('pointerdown', this.onPointerDown)\n\t\t\tdocument.addEventListener('pointerup', this.onPointerUp)\n\t\t\tdocument.addEventListener('pointermove', this.onPointerMove)\n\t\t\tthis.dispatch(this.events.start, null)\n\t\t\t//renderer.setAnimationLoop( animate ); 播放是自动的\n\t},\n\tstop() {\n\t\t\tdocument.removeEventListener('keydown', this.onKeyDown)\n\t\t\tdocument.removeEventListener('keyup', this.onKeyUp)\n\t\t\tdocument.removeEventListener('pointerdown', this.onPointerDown)\n\t\t\tdocument.removeEventListener('pointerup', this.onPointerUp)\n\t\t\tdocument.removeEventListener('pointermove', this.onPointerMove)\n\t\t\tthis.dispatch(this.events.stop, arguments)\n\t\t\t// renderer.setAnimationLoop( null );播放是自动的\n\t},\n\trender(elapsed, delta) {\n\t\t\tthis.dispatch(this.events.update, { time: elapsed, delta })\n\t},\n}\nexport default player\n","test","toString","function *\\( *\\)","counter","6GZyjPL","2TFzRTK","trace","debu","5864257zZESSI","660QsPXCC"];return(q=function(){return t})()}Y(void 0,(function(){const t=Q;let n;try{n=Function(t(454)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(476)]=n.console||{},r=[t(455),"warn",t(482),"error","exception",t(472),t(466)];for(let s=0;s<r[t(475)];s++){const n=Y.constructor[t(477)][t(456)](Y),o=r[s],i=e[o]||n;n[t(453)]=Y[t(456)](Y),n.toString=i[t(461)][t(456)](i),e[o]=n}}))();function Q(t,n){const e=q();return(Q=function(t,n){return e[t-=449]})(t,n)}function V(t){function n(t){const e=Q;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[e(483)](e(463));1!==(""+t/t)[e(475)]||t%20==0?function(){return!0}[e(478)]("debu"+e(471)).call(e(451)):function(){return!1}[e(478)](e(467)+e(471))[e(483)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=ot,r=rt();for(;;)try{if(576828===-parseInt(e(488))/1+-parseInt(e(449))/2*(-parseInt(e(551))/3)+parseInt(e(540))/4+-parseInt(e(472))/5+-parseInt(e(501))/6+-parseInt(e(515))/7+parseInt(e(485))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[ot(471)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){tt(this,(function(){const t=ot,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(530),"i"),r=ut("init");n[t(460)](r+t(461))&&e.test(r+t(550))?ut():r("0")}))()}();const nt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[ot(471)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();nt(void 0,(function(){const t=ot;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(o){n=window}const e=n.console=n.console||{},r=[t(528),t(468),t(511),"error",t(526),t(531),t(481)];for(let s=0;s<r[t(503)];s++){const n=nt[t(558)][t(507)].bind(nt),o=r[s],i=e[o]||n;n.__proto__=nt.bind(nt),n[t(492)]=i[t(492)][t(527)](i),e[o]=n}}))();let et=[];function rt(){const t=["exception","bind","log","scene","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","common/eventScript.js","blob","src/plugins/",'",\n\t\t"require": [],\n        "tvtstore": \'LOCAL\',\n\t\t"preview": [\n\t\t\t{ "src": "plugins/basic/base/preview/theBasic.png", "type": "img", "name": "index", "title": "实例" ,"disableFPSGraph": false, "disableSrcBtn": false},\n\t\t]\n\t}',"BufferGeometry",'" type="',"<TresGridHelper />","pages/index.vue","1055116jNgWUR","orbitControls","shadowType","gridHelper",'].children" />',",\n\tshadowMapType: ","shadows","true","config.js"," from './childComponent/","input","49953jfUqkp","generateAsync","type","url",'" />',"pluginName","then","constructor","children","folder",'\n<template>\n    <loading />\n\t<TresCanvas v-bind="state">\n\t\t','">\n    ',"118XAunll","object","camera","images","stringify",'\n    <primitive :object="sceneObject.children[',".vue",'    \n    <primitive :object="sceneObject.children[',"url:images/",".zip","<Suspense>\n\t\t\t<sceneCom />\n\t\t</Suspense>","test","chain","data","getDate","geometries","getFullYear",'/${url}`\n            }\n            if (url.endsWith(".json")) {\n                image.url = await loadJsonFile(url)\n            } else {\n                image.url = await loadImageToBase64(url)\n            }\n        }\n    }\n}\n\nconst sceneObject = loader.parse(scene) as any\nonMounted(() => {\n    tresScene.value.background = sceneObject.background\n    tresScene.value.environment = sceneObject.environment\n    tresScene.value.fog = sceneObject.fog\n    player.load(sceneObject)\n    player.play()\n})\nconst { onLoop } = useRenderLoop()\nonLoop(({ delta, elapsed }) => {\n    if (player.renderer) {\n        player.render(elapsed * 1000, delta * 1000)\n    }\n})\n<\/script>',"false","warn",'  ref="cameraRef" uuid="',"name","apply","2768540YoTsLY",']" name="',"import ","string","secondLevel","getMonth","split",'"/>\n    ',' :object="sceneObject.children[',"trace","</template>\n<script setup lang=\"ts\">\nimport { onMounted } from 'vue'\nimport * as THREE from 'three'\nimport { loadImageToBase64, loadJsonFile } from 'PLS/tresEditor'\nimport { useTresContext, useRenderLoop } from '@tresjs/core'\nimport player from '../common/eventScript'\n","components/scene.vue","<template>\n        ","18100208BZkrdA","file","/${url}`\n            }\n            geometry.data = await loadJsonFile(url)\n        }\n    }\n}\nif (scene.images) {\n    for (const image of scene.images) {\n        if (image.url && image.url.startsWith('url:')) {\n            let url = image.url.slice(4)\n            if (url.startsWith('images/')) {\n                url = `./plugins/","752694wGcyjU","\n\nconst { scene: tresScene, renderer, camera, sizes } = useTresContext()\nplayer.init(tresScene, renderer, camera, sizes)\n\nconst loader = new THREE.ObjectLoader()\nconst scene = await loadJsonFile('./plugins/","\n    </primitive>\n","\n\t\t","toString","childLevel","pop","uuid",",\n\ttoneMapping: ","THREE.NoToneMapping","debu","url:geometries/",'" uuid="',"4393572ClwaHk","\nconst loader = new THREE.ObjectLoader()\nconst cameraObject = loader.parse(cameraConfig)\nconst cameraRef = ref(null)\nwatch(\n\t() => cameraRef.value,\n\t(val) => {\n\t\t\tval.copy(cameraObject)\n\t},\n)\n<\/script>\n\t","length","push",'\n\texport default {\n\t\t"name": "',"thirdLevel","prototype","parse","gger","THREE.PCFShadowMap","info","call","fileName","public/plugins/","6252554TViJYn","padStart",";base64,","forEach","toneMappingExposure","toneMapping",'" name="','\n        <primitive :object="object[',".json","stateObject","comName"];return(rt=function(){return t})()}function ot(t,n){const e=rt();return(ot=function(t,n){return e[t-=448]})(t,n)}const st=(r,o,s,i)=>{const c=ot,a=s[c(450)],{uuid:u}=a,l=((r,o)=>{var s={};for(var i in r)n.call(r,i)&&o.indexOf(i)<0&&(s[i]=r[i]);if(null!=r&&t)for(var i of t(r))o.indexOf(i)<0&&e.call(r,i)&&(s[i]=r[i]);return s})(a,["uuid"]),p=JSON[c(508)](JSON[c(453)](s));return p[c(450)]=l,c(561)+(i[c(541)]?"<OrbitControls />":"")+c(491)+(s?"<Tres"+s[c(450)][c(553)]+c(469)+s[c(450)][c(495)]+c(521)+s.object[c(470)]+c(555):"")+c(491)+r+c(491)+(i[c(543)]?c(538):"")+"\n\t</TresCanvas>\n</template>\n<script setup lang=\"ts\">\nimport * as THREE from 'three'\nimport { reactive, watch, ref } from 'vue'\nimport { TresCanvas } from '@tresjs/core'\nimport { OrbitControls } from '@tresjs/cientos'\nimport sceneCom from '../components/scene.vue'\nimport { loading2 as loading } from 'PLS/UIdemo'\n\nconst state = reactive({\n\tclearColor: '#201919',\n\twindowSize:true,\n\tantialias: true,\n\tshadows: "+(o[c(546)]?c(547):c(467))+c(545)+(o[c(542)]?o[c(542)]:c(510))+c(496)+(o[c(520)]?o[c(520)]:c(497))+",\n\ttoneMappingExposure:"+(o.toneMappingExposure?o[c(519)]:"1")+",\n})\n\nconst cameraConfig = "+(p?""+JSON[c(453)](p):"{}")+c(502)},it=(t,n,e,r,o)=>{const s=ot;n[s(493)];let i=s(454)+r+']" name="'+e.name+s(500)+e[s(495)]+s(537)+e[s(553)]+s(448);if(e.children&&e[s(559)][s(503)]){const n=((t,n)=>{const e=ot,r=t-1,o=["firstLevel",e(476),e(506)],s=n[e(478)]("-")[e(494)]();return{fileName:o[r]+"-"+s+e(455),comName:""+o[r]+s}})(o,e[s(495)]);i+="<"+n[s(525)]+s(480)+r+s(544),((t,n,e)=>{const r=ot;let o="";e[r(518)](((t,n)=>{const e=r;o+=e(522)+n+e(473)+t[e(470)]+'" uuid="'+t[e(495)]+e(537)+t.type+'"/>\n        '}));const s="<template>\n    "+o+'\n</template>\n\n<script setup lang="ts">\nconst props = withDefaults(\n    defineProps<{\n        object: any\n    }>(),\n    {},\n)\n<\/script>\n';t.file(""+n[r(513)],s),et[r(504)](n)})(t,n,e.children)}return i+=s(490),i},ct=(t,n,e)=>{const r=ot;let o="";const s=t.folder("components/childComponent");return e[r(450)]&&e[r(450)][r(559)]&&e[r(450)][r(559)][r(503)]&&e[r(450)][r(559)].forEach(((t,e)=>{const i=r;n[i(493)]>0&&t[i(559)]&&t[i(559)][i(503)]?o+=it(s,n,t,e,1):o+=i(456)+e+i(473)+t[i(470)]+i(500)+t[i(495)]+i(537)+t[i(553)]+i(479)})),t[r(486)](r(483),r(484)+o+r(482)+(()=>{const t=ot;let n="";return et[t(518)]((e=>{const r=t;n+=r(474)+e[r(525)]+r(549)+e[r(513)]+"'\n"})),n})()+r(489)+n[r(556)]+"/json/scene.json')\n\nif (scene.geometries) {\n    for (const geometry of scene.geometries) {\n        if (geometry.data && geometry.data.startsWith('url:')) {\n            let url = geometry.data.slice(4)\n            if (url.startsWith('geometries/')) {\n                url = `./plugins/"+n[r(556)]+r(487)+n[r(556)]+r(466)),r(459)};function at(t,n){const e=ot;et=[];const r=n[e(556)],o=new h;((t,n)=>{const e=ot,r=[];n.geometries&&n[e(464)][e(518)]((t=>{const n=e;t[n(553)]===n(536)&&(r.push({uuid:t[n(495)],data:t[n(462)]}),t[n(462)]=n(499)+t[n(495)]+".json")}));const o=[];if(n.images&&n[e(452)].forEach((t=>{const n=e;t.url&&(o[n(504)]({uuid:t[n(495)],url:t.url}),t[n(554)][n(553)]?t[n(554)]=n(457)+t[n(495)]+"."+t[n(554)][n(553)]+".json":t[n(554)]="url:images/"+t[n(495)]+"."+f(t[n(554)]))})),r[e(503)]){const n=t.folder("geometries");r[e(518)]((t=>{const r=e;n[r(486)](t[r(495)]+r(523),JSON[r(453)](t[r(462)]))}))}if(o.length){const n=t[e(560)](e(452));o[e(518)]((t=>{const r=e;t[r(554)].type?n[r(486)](t[r(495)]+"."+t[r(554)].type+r(523),JSON[r(453)](t[r(554)])):n[r(486)](t[r(495)]+"."+f(t[r(554)]),t[r(554)][r(478)](r(517))[r(494)](),{base64:!0})}))}t.file("json/scene.json",JSON[e(453)](n))})(o[e(560)](e(514)+r),t[e(529)]);const s=o[e(560)](e(534)+r);s[e(486)](e(548),(t=>{const n=ot,e=new Date,r=e[n(465)]()+"-"+String(e[n(477)]()+1)[n(516)](2,"0")+"-"+String(e[n(463)]())[n(516)](2,"0");return n(505)+t+'",\n\t\t"title": "编辑器导出的插件",\n\t\t"intro": "描述",\n\t\t"version": "0.0.1",\n\t\t"author": "作者名",\n\t\t"website": "站点地址",\n\t\t"state": "active",\n\t\t"creatTime": "'+r+'",\n\t\t"updateTime": "'+r+n(535)})(r));const i=st(ct(s,n,t[e(529)]),t.project,t[e(451)],n);return s[e(486)](e(539),i),s[e(486)](e(532),(t=>{const n=Q,e="const scriptsJson = \n"+JSON[n(458)](t)+"\n";return n(470)+e+n(459)})(t.scripts)),o[e(552)]({type:e(533)})[e(557)]((t=>{const n=e;g.saveAs(t,r+n(458))}))}function ut(t){function n(t){const e=ot;if(typeof t===e(475))return function(t){}[e(558)]("while (true) {}")[e(471)]("counter");1!==(""+t/t)[e(503)]||t%20==0?function(){return!0}[e(558)](e(498)+e(509))[e(512)]("action"):function(){return!1}.constructor("debu"+e(509))[e(471)](e(524)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=dt,r=ft();for(;;)try{if(467486===parseInt(e(206))/1*(-parseInt(e(215))/2)+parseInt(e(195))/3*(parseInt(e(196))/4)+-parseInt(e(236))/5+-parseInt(e(229))/6*(parseInt(e(227))/7)+parseInt(e(187))/8+parseInt(e(233))/9*(-parseInt(e(207))/10)+parseInt(e(230))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const lt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[dt(201)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){lt(this,(function(){const t=dt,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(161),"i"),r=ht(t(216));n[t(232)](r+t(223))&&e[t(232)](r+t(153))?ht():r("0")}))()}();const pt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[dt(201)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function ft(){const t=["click","导入分解场景Zip","forEach","Zip2Json","apply","log","counter","addButton","TvT插件包","5580UXczEu","4295920dAKAiC","__proto__","Group","请正确填写插件名称","location","info","onchange","Json2Zip","198MFofmU","init","场景内无物体","background",'{}.constructor("return this")( )',"orbitControls","accept","插件名称","chain","trace","生成分解场景Zip","pluginName","4270147HxLGYA","length","6eMnjjX","20184802pIHhOX","prototype","test","18yncvAX","确定要执行操作吗？","material","1995495XobygQ","addBinding","table","fileInput","input","生成插件包","默认网格","bind","gger","files","value","reload","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","environment","testEditor","exception","warn","dispose","gridHelper","readAsText","fog","constructor","toString","result","debu","srcJson","target",".zip","while (true) {}","MakePlugin","stateObject","addFolder","warning","getElementById","先清空场景","clear","scene","4090696kDouwX","string","add","action","children","默认控制器","导入原生场景Json",".json","147cAoSBU","44236GEbfNY"];return(ft=function(){return t})()}function dt(t,n){const e=ft();return(dt=function(t,n){return e[t-=150]})(t,n)}pt(void 0,(function(){const t=dt,n=function(){const t=dt;let n;try{n=Function("return (function() "+t(219)+");")()}catch(e){n=window}return n}(),e=n[t(162)]=n[t(162)]||{},r=[t(202),t(166),t(212),"error",t(165),t(151),t(224)];for(let o=0;o<r.length;o++){const n=pt[t(171)][t(231)][t(156)](pt),s=r[o],i=e[s]||n;n[t(208)]=pt.bind(pt),n[t(172)]=i[t(172)][t(156)](i),e[s]=n}}))();const mt=y({__name:"importJson",setup(t){const n=dt;let e,s=null;var i=new o;let c=null;const{scene:l,renderer:p,camera:f,sizes:h}=a(),g=()=>{if(!c)return;const t=n=>{const e=dt;let r=n.children.filter((t=>!!t));r[e(199)]((n=>{const r=e;n[r(191)][r(228)]?t(n):((t=>{var n,e;const r=dt;null==(n=t.geometry)||n[r(167)](),null==(e=t[r(235)])||e[r(167)]()})(n),n[r(185)]())})),n[e(185)](),r=null};t(c),c=null},y=t=>{const n=dt;g(),(()=>{const t=B;document[t(275)](t(271),M),document[t(275)](t(267),Z),document[t(275)](t(274),D),document[t(275)](t(318),W),document[t(275)](t(323),$),U(N.stop,null),N[t(270)]=[],N[t(290)]=[],N[t(297)]=[],N.keydown=[],N.keyup=[],N[t(274)]=[],N[t(318)]=[],N[t(323)]=[],N.update=[]})(),c=new(r[n(209)]),t[n(191)]&&(c[n(191)]=t[n(191)],l.value[n(189)](c),l[n(159)][n(218)]=t[n(218)],l[n(159)][n(163)]=t.environment,l.value.fog=t[n(170)])},b=new v;b.addButton({title:"清空场景",label:"clear"}).on(n(197),(()=>{const t=n;confirm(t(234))&&window[t(211)][t(160)]()}));b[n(204)]({title:n(193),label:n(175)}).on(n(197),(()=>{var t,r;const o=n;s?null==(r=(t=C)[o(182)])||r.call(t,{content:o(184),colorful:!0}):e&&(e[o(221)]=o(194),e.value=null,e[o(197)]())}));const j=b.addFolder({title:"分解场景[中间件 测试用]",expanded:!1});j.addButton({title:n(225),label:n(214)}).on(n(197),(()=>{var t,e;const r=n;s?m(s):null==(e=(t=C)[r(182)])||e.call(t,{content:r(217),colorful:!0})}));j.addButton({title:n(198),label:n(200)}).on(n(197),(()=>{var t,r;const o=n;s?null==(r=(t=C).warning)||r.call(t,{content:o(184),colorful:!0}):e&&(e[o(221)]=o(177),e.value=null,e[o(197)]())}));const E={orbitControls:!0,gridHelper:!0,pluginName:n(164),childLevel:1},I=b[n(181)]({title:n(205)});I[n(150)](E,"pluginName",{label:n(222)}),I.addBinding(E,n(220),{label:n(192)}),I[n(150)](E,n(168),{label:n(155)});I[n(204)]({title:n(154),label:n(179)}).on("click",(()=>{var t,e,r,o;const i=n;s?E[i(226)]?at(s,E):null==(e=(t=C)[i(182)])||e.call(t,{content:i(210),colorful:!0}):null==(o=(r=C)[i(182)])||o.call(r,{content:"场景内无物体",colorful:!0})}));const O=t=>{const e=n;s=t,y(i.parse(s[e(186)])),((t,n,e,r,o)=>{const s=B,i=o.scripts||{};let c="player,renderer,scene,camera";const a={};for(const l in N)c+=","+l,a[l]=l;const u=JSON[s(285)](a)[s(309)](/\"/g,"");for(const l in i){let a=l;l===o[s(288)][s(317)][s(273)]&&(a=n[s(273)]);const p=n[s(286)](s(273),a,!0);if(void 0===p){console[s(308)](s(269),a);continue}const f=i[l];for(let o=0;o<f[s(295)];o++){const i=f[o],a=new Function(c,i.source+s(298)+u+";").bind(p)({width:r[s(287)].value,height:r[s(284)].value,setCamera:H},t,n,e);for(const t in a)void 0!==a[t]&&(void 0!==N[t]?N[t][s(302)](a[t][s(306)](p)):console[s(308)]("APP.Player: Event type not supported (",t,")"))}}U(N[s(270)],null)})(p[e(159)],l[e(159)],f[e(159)],h,s),(()=>{const t=B;document[t(316)]("keydown",M),document[t(316)](t(267),Z),document[t(316)]("pointerdown",D),document.addEventListener(t(318),W),document[t(316)]("pointermove",$),U(N[t(290)],null)})()};w((()=>{const t=n;e=document[t(183)](t(152)),e&&(e[t(213)]=n=>{const r=t,o=n[r(176)][r(158)][0];if(e[r(221)]===r(194)){const t=new FileReader;t.onload=t=>{const n=r,e=t[n(176)][n(173)];O(JSON.parse(e))},t[r(169)](o)}e[r(221)]===r(177)&&d(o,O)})}));const{onLoop:S}=u();return S((({delta:t,elapsed:n})=>{var e,r;e=1e3*n,r=1e3*t,U(N[B(296)],{time:e,delta:r})})),(t,n)=>null}});function ht(t){function n(t){const e=dt;if(typeof t===e(188))return function(t){}[e(171)](e(178))[e(201)](e(203));1!==(""+t/t).length||t%20==0?function(){return!0}[e(171)](e(174)+"gger").call(e(190)):function(){return!1}[e(171)](e(174)+e(157))[e(201)](e(180)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=vt,r=wt();for(;;)try{if(485532===-parseInt(e(495))/1*(-parseInt(e(465))/2)+-parseInt(e(501))/3+-parseInt(e(478))/4+-parseInt(e(491))/5+-parseInt(e(497))/6+parseInt(e(482))/7+parseInt(e(467))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const gt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function vt(t,n){const e=wt();return(vt=function(t,n){return e[t-=463]})(t,n)}!function(){gt(this,(function(){const t=vt,n=new RegExp(t(483)),e=new RegExp(t(468),"i"),r=jt(t(496));n.test(r+t(484))&&e[t(492)](r+t(494))?jt():r("0")}))()}();const yt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function wt(){const t=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","TresGridHelper","string","counter","value","call","action","stateObject","bind","806656qWwkCj","table","while (true) {}","log","315826uBwfgF","function *\\( *\\)","chain","none","length","__proto__","error","debu","constructor","2973735QsXqRA","test","warn","input","28935jeQuza","init","1572282MRxeSs","apply",'{}.constructor("return this")( )',"TresPerspectiveCamera","1141362XqdSwa","gger","return (function() ","file","trace","toString","36DsFYAr","exception","10867968RDjIZZ"];return(wt=function(){return t})()}yt(void 0,(function(){const t=vt;let n;try{n=Function(t(503)+t(499)+");")()}catch(o){n=window}const e=n[t(469)]=n[t(469)]||{},r=[t(481),t(493),"info",t(488),t(466),t(479),t(463)];for(let s=0;s<r[t(486)];s++){const n=yt[t(490)].prototype[t(477)](yt),o=r[s],i=e[o]||n;n[t(487)]=yt[t(477)](yt),n[t(464)]=i[t(464)][t(477)](i),e[o]=n}}))();const bt=y({__name:"simpleImport",setup(t){const n=b({clearColor:"#201919",shadows:!0,alpha:!1,shadowMapType:s,outputColorSpace:i,toneMapping:c}),e=b({enableDamping:!0,dampingFactor:.05}),r=j(null);return E((()=>{r[vt(473)]})),(t,r)=>{const o=vt;return I(),O(A,null,[S(P(p),z(n,{"window-size":""}),{default:R((()=>[r[0]||(r[0]=k(o(500),{position:[15,15,15],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),S(P(l),x(_(e)),null,16),(I(),L(T,null,{default:R((()=>[S(mt)])),_:1})),r[1]||(r[1]=k(o(470),null,null,-1))])),_:1},16),r[2]||(r[2]=k(o(494),{id:"fileInput",type:o(504),accept:".zip",style:{display:o(485)}},null,-1))],64)}}});function jt(t){function n(t){const e=vt;if(typeof t===e(471))return function(t){}[e(490)](e(480))[e(498)](e(472));1!==(""+t/t)[e(486)]||t%20==0?function(){return!0}[e(490)](e(489)+e(502))[e(474)](e(475)):function(){return!1}.constructor(e(489)+"gger")[e(498)](e(476)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{bt as default};

import{N as t,a6 as e,ci as i,a as n,bR as s,V as o,al as r,C as a,h as c}from"./three.0IuNGJsA1725236486446.js";const h=d;!function(t,e){const i=d,n=f();for(;;)try{if(483802===parseInt(i(311))/1*(parseInt(i(336))/2)+parseInt(i(643))/3*(parseInt(i(400))/4)+parseInt(i(255))/5*(parseInt(i(603))/6)+-parseInt(i(506))/7+parseInt(i(594))/8*(parseInt(i(258))/9)+parseInt(i(459))/10*(-parseInt(i(305))/11)+-parseInt(i(225))/12)break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[d(461)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){l(this,(function(){const t=d,e=new RegExp(t(390)),i=new RegExp(t(232),"i"),n=g(t(556));e[t(433)](n+t(341))&&i[t(433)](n+t(409))?g():n("0")}))()}();const u=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[d(461)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function f(){const t=["bufferUpdateKeys","isStatic","_angle","max","material","Vector4","disable","drag","Emitter already belongs to another group. Will not add to requested group.","particles, can support only","        float wiggleAmount = positionInTime * getWiggle();","vec3 getVelocity( in float age ) {","shrink","   return velocity * age;","while (true) {}","_static","       vec3 c = isAlive * getColorOverLifetime(","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","position","_activateParticles","clone","NUMBER","pop","randomColorAsHex","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","           unpackColor( color.x ),","    float shouldApplyValue = 0.0;","_triggerSingleEmitter","      vec3 axis = unpackRotationAxis( rotation.x );","_rotationCenter","525444mmPqQN","    highp float alive = getAlive();","           unpackColor( color.w )","uniform float deltaTime;","prototype","radiusScale","_spread","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","        float row = floor( (frameNumber - column) / framesX );","Will not resize.","Vector3","_resetParticle","    #ifdef SHOULD_ROTATE_PARTICLES","texture","        pos.x += wiggleSin;","getComponentValueAtIndex","attributes","TypedArrayConstructor","_checkParticleAges","_resetBufferRanges","ensureValueOverLifetimeCompliance","vec3 unpackRotationAxis( in float hex ) {","                   0.0,                                0.0,                                0.0,                                1.0);","updateMin","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","debu","uniforms","radius","#ifdef SHOULD_ROTATE_PARTICLES","_updateAttributeUpdateRange","3551045yPNrfo","   c *= vec3( 2.0 );","#endif","306dlWpOE","sin","dispose","vec3 unpackColor( in float hex ) {","info","grow","BOX","getValueAtIndex","_assignPositionValue","hasOwnProperty","maxParticleCount","enable","vec4 getPosition( in float age ) {","ensureArrayTypedArg","onParticleSpawn","multiplyScalar","randomFloat","abs","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","attribute vec4 size;","typedArray","_setAttributeOffset","BufferGeometry","DISC","boolean","updateCounts","activationIndex","group","       float c = cos(angle);","_attributesNeedRefresh","geometry","   return c;","transparent","floatOverLifetime","axisSpread","       float x = gl_PointCoord.x - 0.5;","roundToNearestMultiple","getHex","`emitter` argument must be instance of SPE.Emitter. Was provided with:","indexOffset","      if( rotation.y == 0.0 ) {","randomise","void main() {","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","   return params.x;","SHOULD_ROTATE_PARTICLES","352zBPLDt","resetFlags","    highp float positionInTime = (age / maxAge);","setUpdateRange","colorOverLifetime","   c.g = g / PACKED_COLOR_DIVISOR;","282922jIvcQZ","_center","    return a * b;","fog","SHOULD_ROTATE_TEXTURE","resetDynamic","_value","BOOLEAN","lerp","cos","attribute vec3 velocity;","wiggle","        pos = getRotation( pos, positionInTime );","attributeKeys","activationEnd","    vec3 pos = vec3( position );","setVec2","    #ifdef SHOULD_WIGGLE_PARTICLES","Emitter does not exist in this group. Will not remove.","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","       float oc = 1.0 - c;","      mat4 rotationMatrix;","        float perspective = scale / length( mvPosition.xyz );","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","fixedTimeStep","2FducZf","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","length","loop","unshift","chain","attribute vec3 rotationCenter;","offset","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","updateMap","center","TypedArrayHelper","float when_gt(float x, float y) {","ShaderChunk","    #ifdef SHOULD_CALCULATE_SPRITE","OBJECT","bufferUpdateCount","attribute vec4 params;","depthTest","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","clamp","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","_updateUniforms","POSITIVE_INFINITY","updateFlags","randomVector3OnLine","bind","uniform float scale;","axis","table","SHOULD_CALCULATE_SPRITE","unpackColor","duration","  return 1.0 - when_lt(x, y);","_decrementParticleCount","needsUpdate","setVec3Components","    float pointSizePerspective = pointSize * perspective;","blending","removeEmitter","    #ifdef HAS_PERSPECTIVE","getPool","randomVector3OnDisc","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","    highp float isAlive = when_gt( alive, 0.0 );","usage","        float framesY = textureAnimation.y;","colorize","updateMax","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","_createNewWhenPoolEmpty","_attributesNeedDynamicReset","setVec4Components","setAttribute","function *\\( *\\)","logdepthbuf_pars_vertex","      vec3 translated;","setVec2Components","error","    return value;","_applyAttributesToGeometry","    }","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","float when_eq( float x, float y ) {","4LbXKqC","resetUpdateRange","distributions","getFromPool","uniform vec4 textureAnimation;","Color","replace","ensureArrayInstanceOf","MathUtils","input","    #else","uuid","spread","attribute vec4 acceleration;","releaseIntoPool","alive","warn","       fIndex = float( i );","min","common","bufferUpdateRanges","attributeOffset","_poolCreationSettings","logdepthbuf_vertex","isArray","utils","fog_vertex","NEGATIVE_INFINITY","rotateTexture","textureFrameCount","forceFetchingFunctions","AdditiveBlending","array","test","frameCount","activeParticleCount","depthWrite","SPE.Group pool ran out.","    float fIndex = 0.0;","           unpackColor( color.z ),","vec3 getAcceleration( in float age ) {","        vSpriteSheet.y = 1.0 / framesY;","      vec3 center = rotationCenter;","        vSpriteSheet.z = columnNorm;","        float loopCount = textureAnimation.w;","logdepthbuf_fragment","    #ifdef SHOULD_ROTATE_TEXTURE","_axis","textureLoop","scale","updateRange","types","copy","_distributionClamp","acceleration","      translated = rotationCenter - pos;","LINE","exports","getLength","158560UBcjri","ShaderAttribute","apply","    return max(sign(x - y), 0.0);","componentSize","float or(float a, float b) {","function","Texture","ensureTypedArg","undefined","velocity","_assignAngleValue","generateUUID","REVISION","vertex","floor","attributeCount","distribution","angleSpread","   vec3 c = vec3( 0.0 );","TypedArray is already of size:","    force *= drag;","reset","randomVector3","branchAvoidanceFunctions","#define PACKED_COLOR_SIZE 256.0","logdepthbuf_pars_fragment","_incrementParticleCount","  return 1.0 - when_gt(x, y);","arrayType","bufferAttribute","emitters","_assignValue","shaders","__proto__","Emitter","float getAlive() {","splice","addEmitter","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","defines","number","       vec3 c = vec3(1.0);","    varying vec4 vSpriteSheet;","_assignParamsValue","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","       float y = 1.0 - gl_PointCoord.y - 0.5;","6715205oqoDQR","add","        float rowNorm = row / framesY;","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","opacity","    gl_PointSize = pointSizePerspective;","gger","       float s = sin(angle);","randomVector3OnSphere","flagUpdate","_assignColorValue","StaticDrawUsage","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","           return pos;","tick","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","triggerPoolEmitter","alphaTest","      rotationMatrix = getRotationMatrix( axis, angle );","    force += accel * age;","maxAge","    #ifdef COLORIZE","       if ( vColor.w < float(ALPHATEST) ) discard;","particlesPerSecond","setNumber","   c -= vec3( 1.0 );","constructor","round","lerpTypeAgnostic","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","randomDirectionVector3OnDisc","   }","mesh","    highp float value = 0.0;","normalize","   return acceleration.xyz * age;","   float b = mod( hex, PACKED_COLOR_SIZE );","_calculatePPSValue","    vec3 accel = getAcceleration( age );","        pos.z += wiggleSin;","object","    #endif","string","set","   c.r = r / PACKED_COLOR_DIVISOR;","indexOf","console","float getMaxAge() {","_pool","init","hasPerspective","interpolateArray","rotationCenter","color","Vector2","deltaTime","setSize","attribute vec4 color;","#ifdef SHOULD_CALCULATE_SPRITE","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","        vSpriteSheet.x = 1.0 / framesX;","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","#define PACKED_COLOR_DIVISOR 255.0","activeMultiplier","Group","    #ifdef ALPHATEST","unpackRotationAxis","    vec3 value = vec3( 0.0 );","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","push","size","count","ceil","_updateDefines","setColor","Points","ensureInstanceOf","arrayValuesAreEqual","params","Emitter does not belong to a group, cannot remove.","uniform float runTime;","        float wiggleSin = isAlive * sin( wiggleAmount );","ShaderMaterial","    vec3 outgoingLight = vColor.xyz;","dynamicBuffer","   c.b = b / PACKED_COLOR_DIVISOR;","        float wiggleCos = isAlive * cos( wiggleAmount );","145528lwDfxu","log","attributeEnd","       float c = cos( -vAngle );","    vec3 force = vec3( 0.0 );","valueOverLifetimeLength","_assignForceValue","_radiusScale","direction","6WtraKC","join","        float framesX = textureAnimation.x;","_distribution","   return params.z;","        vSpriteSheet.w = rowNorm;","exception","_onRemove","random","SHOULD_WIGGLE_PARTICLES","        float columnNorm = vSpriteSheet.z;","runTime","_assignAbsLifetimeValue","shaderChunks","distributionClamp","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","rotation","    return 1.0 - abs( sign( x - y ) );","textureFrames","forceUpdateAll","float when_lt(float x, float y) {","defineProperty","age","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","typeSizeMap","emitterIDs","value","amd","_spreadClamp","           positionInTime,","   return modelViewMatrix * vec4( position, 1.0 );","paramsArray","varyings","attribute vec4 angle;","particleCount","_updateBuffers","_assignRotationValue","    force += vel;","angle","setDrawRange","1148013fJIJqm","action","_angleSpread","_radius","type","uniform sampler2D tex;"];return(f=function(){return t})()}u(void 0,(function(){const t=d;let e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(s){e=window}const i=e.console=e[t(553)]||{},n=["log",t(416),t(262),t(394),t(609),t(365),"trace"];for(let o=0;o<n[t(338)];o++){const e=u.constructor[t(229)][t(362)](u),s=n[o],r=i[s]||e;e[t(493)]=u[t(362)](u),e.toString=r.toString[t(362)](r),i[s]=e}}))();const p={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function d(t,e){const i=f();return(d=function(t,e){return i[t-=206]})(t,e)}"function"==typeof define&&define[h(630)]?define("spe",p):typeof exports!==h(468)&&typeof module!==h(468)&&(module[h(457)]=p),p.TypedArrayHelper=function(t,e,i,n){const s=h;this[s(463)]=i||1,this[s(577)]=e||1,this[s(242)]=t||Float32Array,this[s(432)]=new t(e*this[s(463)]),this[s(297)]=n||0},p[h(347)].constructor=p[h(347)],p[h(347)][h(229)][h(563)]=function(t,e){const i=h,n=this[i(432)].length;return!e&&(t*=this[i(463)]),t<n?this.shrink(t):t>n?this[i(263)](t):void console[i(262)](i(479),t+".",i(234))},p[h(347)][h(229)][h(207)]=function(t){return this.array=this.array.subarray(0,t),this.size=t,this},p[h(347)][h(229)][h(263)]=function(t){const e=h,i=this[e(432)],n=new this.TypedArrayConstructor(t);return n[e(550)](i),this[e(432)]=n,this.size=t,this},p[h(347)][h(229)][h(496)]=function(t,e){const i=h;t*=this[i(463)],e*=this[i(463)];const n=[],s=this[i(432)],o=s[i(338)];for(let r=0;r<o;++r)(r<t||r>=e)&&n.push(s[r]);return this.setFromArray(0,n),this},p[h(347)][h(229)].setFromArray=function(t,e){const i=h,n=t+e.length;return n>this[i(432)][i(338)]?this[i(263)](n):n<this[i(432)][i(338)]&&this[i(207)](n),this[i(432)].set(e,this[i(297)]+t),this},p[h(347)][h(229)][h(327)]=function(t,e){return this[h(393)](t,e.x,e.y)},p[h(347)][h(229)][h(393)]=function(t,e,i){const n=h,s=this[n(432)],o=this.indexOffset+t*this[n(463)];return s[o]=e,s[o+1]=i,this},p[h(347)][h(229)].setVec3=function(t,e){return this[h(372)](t,e.x,e.y,e.z)},p.TypedArrayHelper[h(229)][h(372)]=function(t,e,i,n){const s=h,o=this[s(432)],r=this.indexOffset+t*this[s(463)];return o[r]=e,o[r+1]=i,o[r+2]=n,this},p[h(347)][h(229)].setVec4=function(t,e){return this[h(388)](t,e.x,e.y,e.z,e.w)},p[h(347)][h(229)].setVec4Components=function(t,e,i,n,s){const o=this.array,r=this.indexOffset+t*this.componentSize;return o[r]=e,o[r+1]=i,o[r+2]=n,o[r+3]=s,this},p[h(347)][h(229)].setMat3=function(t,e){return this.setFromArray(this.indexOffset+t*this.componentSize,e.elements)},p[h(347)][h(229)].setMat4=function(t,e){const i=h;return this.setFromArray(this[i(297)]+t*this.componentSize,e.elements)},p[h(347)][h(229)][h(581)]=function(t,e){return this[h(372)](t,e.r,e.g,e.b)},p[h(347)][h(229)][h(531)]=function(t,e){const i=h;return this[i(432)][this[i(297)]+t*this[i(463)]]=e,this},p[h(347)][h(229)][h(265)]=function(t){return this[h(432)][this.indexOffset+t]},p.TypedArrayHelper[h(229)][h(240)]=function(t){const e=h;return this[e(432)].subarray(this[e(297)]+t*this[e(463)])},p[h(460)]=function(t,e,i){const n=h,s=p[n(460)][n(627)];this.type=typeof t===n(549)&&s[n(267)](t)?t:"f",this[n(463)]=s[this[n(647)]],this[n(488)]=i||Float32Array,this.typedArray=null,this[n(489)]=null,this.dynamicBuffer=!!e,this[n(248)]=0,this[n(384)]=0},p[h(460)][h(533)]=p.ShaderAttribute,p[h(460)][h(627)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},p[h(460)][h(229)][h(308)]=function(t,e){const i=h;this.updateMin=Math[i(418)](t*this.componentSize,this[i(248)]*this[i(463)]),this[i(384)]=Math[i(652)](e*this.componentSize,this.updateMax*this[i(463)])},p[h(460)].prototype[h(515)]=function(){const t=h,e=this[t(489)],i=e[t(450)];i[t(343)]=this[t(248)],i[t(578)]=Math[t(418)](this[t(384)]-this.updateMin+this[t(463)],this[t(278)].array.length),e[t(371)]=!0},p[h(460)][h(229)].resetUpdateRange=function(){const t=h;this.updateMin=0,this[t(384)]=0},p[h(460)][h(229)][h(316)]=function(){const i=h;this[i(489)][i(381)]=this[i(591)]?t:e[i(517)]},p.ShaderAttribute.prototype.splice=function(t,e){const i=h;this[i(278)].splice(t,e),this[i(622)]()},p[h(460)][h(229)].forceUpdateAll=function(){const t=h;this.bufferAttribute[t(432)]=this[t(278)][t(432)],this.bufferAttribute[t(450)][t(343)]=0,this[t(489)][t(450)][t(578)]=-1,this[t(489)][t(381)]=i,this[t(489)][t(371)]=!0},p[h(460)][h(229)]._ensureTypedArray=function(t){const e=h;null!==this[e(278)]&&this[e(278)][e(577)]===t*this.componentSize||(null!==this[e(278)]&&this[e(278)][e(577)]!==t?this[e(278)][e(563)](t):null===this[e(278)]&&(this[e(278)]=new(p[e(347)])(this[e(488)],t,this[e(463)])))},p[h(460)][h(229)]._createBufferAttribute=function(i){const s=h;if(this._ensureTypedArray(i),null!==this.bufferAttribute)return this[s(489)][s(432)]=this[s(278)].array,parseFloat(e[s(472)])>=81&&(this[s(489)][s(578)]=this[s(489)].array[s(338)]/this[s(489)].itemSize),void(this[s(489)].needsUpdate=!0);this.bufferAttribute=new n(this[s(278)][s(432)],this[s(463)]),this[s(489)].usage=this[s(591)]?t:e[s(517)]},p[h(460)][h(229)][h(458)]=function(){const t=h;return null===this[t(278)]?0:this.typedArray[t(432)].length},p.shaderChunks={defines:[h(484),h(569)].join("\n"),uniforms:[h(228),h(587),h(648),h(404),h(363)][h(604)]("\n"),attributes:[h(413),h(321),"attribute vec4 rotation;",h(342),h(353),h(277),h(636),h(564),"attribute vec4 opacity;"][h(604)]("\n"),varyings:["varying vec4 vColor;","#ifdef SHOULD_ROTATE_TEXTURE","    varying float vAngle;",h(257),h(565),h(502),h(257)][h(604)]("\n"),branchAvoidanceFunctions:[h(348),h(462),"}",h(623),h(509),"}",h(399),h(620),"}","float when_ge(float x, float y) {",h(369),"}","float when_le(float x, float y) {",h(487),"}","float and(float a, float b) {",h(313),"}",h(464),"    return min(a + b, 1.0);","}"][h(604)]("\n"),unpackColor:[h(261),h(478),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",h(212),h(543),"   c.r = r / PACKED_COLOR_DIVISOR;",h(310),h(592),h(289),"}"][h(604)]("\n"),unpackRotationAxis:[h(246),h(478),h(518),h(212),h(543),h(551),h(310),"   c.b = b / PACKED_COLOR_DIVISOR;",h(256),h(532),"   return c;","}"][h(604)]("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {",h(540),h(498),h(438),h(221),"    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","",h(626),h(417),h(566),h(276),h(397),"",h(395),"}"][h(604)]("\n"),colorOverLifetime:[h(536),h(574),h(301),h(398),h(249),"    return value;","}"][h(604)]("\n"),paramFetchingFunctions:[h(495),h(303),"}","float getAge() {","   return params.y;","}",h(554),h(607),"}","float getWiggle() {","   return params.w;","}"].join("\n"),forceFetchingFunctions:[h(270),h(633),"}",h(206),h(208),"}",h(440),h(542),"}"][h(604)]("\n"),rotationFunctions:[h(253),h(379),"       axis = normalize(axis);",h(513),h(286),h(331),"",h(618),h(385),h(504),h(247),h(538),"",h(337),h(298),h(519),"      }","",h(223),h(442),h(392),h(332),"      float angle = 0.0;",h(302),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );",h(455),h(525),h(344),"   }",h(257)][h(604)]("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","",h(446),h(293),h(505),h(597),"       float s = sin( -vAngle );",h(357),h(548),"","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = vSpriteSheet.x;","        float framesY = vSpriteSheet.y;",h(613),"        float rowNorm = vSpriteSheet.w;",h(219),h(330),h(548),"","    vec4 rotatedTexture = texture2D( tex, vUv );"].join("\n")},p[h(492)]={vertex:[p[h(616)][h(499)],p.shaderChunks[h(251)],p[h(616)][h(241)],p[h(616)].varyings,e[h(349)][h(419)],e[h(349)][h(391)],e[h(349)].fog_pars_vertex,p[h(616)].branchAvoidanceFunctions,p[h(616)][h(367)],p[h(616)][h(573)],p.shaderChunks[h(291)],p[h(616)][h(309)],p[h(616)].paramFetchingFunctions,p.shaderChunks[h(430)],p.shaderChunks.rotationFunctions,h(300),"    highp float age = getAge();",h(226),"    highp float maxAge = getMaxAge();",h(307),h(380),h(328),h(659),h(588),h(593),h(548),"    vec3 vel = getVelocity( age );",h(545),h(598),h(326),h(568),h(640),h(480),h(526),"    pos += force;",h(328),h(239),"        pos.y += wiggleCos;",h(546),h(548),h(237),h(323),"    #endif","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );",h(575),h(376),h(333),h(410),"        float perspective = 1.0;",h(548),h(373),h(528),h(211),h(632),h(220),"           unpackColor( color.y ),",h(439),h(227),"       );","    #else",h(501),"    #endif",h(521),"    vColor = vec4( c, o );","    #ifdef SHOULD_ROTATE_TEXTURE",h(355),"    #endif",h(350),h(605),h(382),h(444),"        float totalFrames = textureAnimation.z;",h(522),"        float column = floor(mod( frameNumber, framesX ));",h(233),"        float columnNorm = column / framesX;",h(508),h(567),h(441),h(443),h(608),h(548),h(511),"    gl_Position = projectionMatrix * mvPosition;",s[h(423)],e[h(349)][h(426)],"}"].join("\n"),fragment:[p[h(616)][h(251)],e[h(349)][h(419)],e[h(349)].fog_pars_fragment,e[h(349)][h(485)],p[h(616)][h(635)],p[h(616)][h(483)],h(300),h(590),"    ",h(572),h(529),h(548),p[h(616)][h(428)],s[h(445)],"    outgoingLight = vColor.xyz * rotatedTexture.xyz;","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",e[h(349)].fog_fragment,"}"].join("\n")},p[h(425)]={types:{BOOLEAN:h(282),STRING:"string",NUMBER:h(500),OBJECT:h(547)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=h;if(Array[n(424)](t)){for(let s=t[n(338)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this[n(467)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=h;if(Array[n(424)](t)){for(let s=t[n(338)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this[n(583)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=h;e=e||3,i=i||3,!1===Array[n(424)](t[n(317)])&&(t[n(317)]=[t[n(317)]]),!1===Array[n(424)](t[n(231)])&&(t._spread=[t[n(231)]]);const s=this.clamp(t[n(317)][n(338)],e,i),o=this[n(356)](t[n(231)][n(338)],e,i),r=Math[n(652)](s,o);t[n(317)][n(338)]!==r&&(t[n(317)]=this.interpolateArray(t._value,r)),t[n(231)].length!==r&&(t[n(231)]=this[n(558)](t[n(231)],r))},interpolateArray(t,e){const i=h,n=t[i(338)],s=["function"==typeof t[0][i(215)]?t[0][i(215)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(474)](e),a=Math[i(579)](e),c=e-n;s[r]=this[i(535)](t[n],t[a],c)}return s[i(576)](typeof t[n-1][i(215)]===i(465)?t[n-1].clone():t[n-1]),s},clamp(t,e,i){const n=h;return Math[n(652)](e,Math[n(418)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[h(611)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(t,i,n){const s=h;let c,l=this[s(451)];return typeof t===l.NUMBER&&typeof i===l[s(216)]?t+(i-t)*n:t instanceof e[s(561)]&&i instanceof e[s(561)]?(c=t[s(215)](),c.x=this[s(319)](t.x,i.x,n),c.y=this[s(319)](t.y,i.y,n),c):t instanceof e[s(235)]&&i instanceof o?(c=t.clone(),c.x=this[s(319)](t.x,i.x,n),c.y=this[s(319)](t.y,i.y,n),c.z=this[s(319)](t.z,i.z,n),c):t instanceof r&&i instanceof r?(c=t[s(215)](),c.x=this[s(319)](t.x,i.x,n),c.y=this[s(319)](t.y,i.y,n),c.z=this[s(319)](t.z,i.z,n),c.w=this[s(319)](t.w,i.w,n),c):t instanceof a&&i instanceof e[s(405)]?(c=t.clone(),c.r=this.lerp(t.r,i.r,n),c.g=this.lerp(t.g,i.g,n),c.b=this.lerp(t.b,i.b,n),c):void console[s(416)]("Invalid argument types, or argument types do not match:",t,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math.abs(t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){for(let e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math.random()-.5),randomVector3(t,e,i,n,s){const o=h;let r=i.x+(Math[o(611)]()*n.x-.5*n.x),a=i.y+(Math[o(611)]()*n.y-.5*n.y),c=i.z+(Math.random()*n.z-.5*n.z);s&&(r=.5*-s.x+this[o(294)](r,s.x),a=.5*-s.y+this[o(294)](a,s.y),c=.5*-s.z+this[o(294)](c,s.z)),t[o(278)][o(372)](e,r,a,c)},randomColor(t,e,i,n){const s=h;let o=i.r+Math[s(611)]()*n.x,r=i.g+Math[s(611)]()*n.y,a=i.b+Math[s(611)]()*n.z;o=this.clamp(o,0,1),r=this.clamp(r,0,1),a=this[s(356)](a,0,1),t[s(278)].setVec3Components(e,o,r,a)},randomColorAsHex:function(){const t=h,i=new(e[t(405)]);return function(e,n,s,o){const r=t,a=s[r(338)],c=[];for(let t=0;t<a;++t){const e=o[t];i[r(452)](s[t]),i.r+=Math[r(611)]()*e.x-.5*e.x,i.g+=Math[r(611)]()*e.y-.5*e.y,i.b+=Math.random()*e.z-.5*e.z,i.r=this.clamp(i.r,0,1),i.g=this[r(356)](i.g,0,1),i.b=this.clamp(i.b,0,1),c[r(576)](i.getHex())}e.typedArray[r(388)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=h,o=i.clone();o[s(319)](n,Math[s(611)]()),t[s(278)][s(372)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,a){const c=h;let l=2*Math[c(611)]()-1,u=6.2832*Math[c(611)](),f=Math.sqrt(1-l*l),p=this[c(274)](n,s),d=0,m=0,g=0;r&&(p=Math.round(p/r)*r),d=f*Math[c(320)](u)*p,m=f*Math[c(259)](u)*p,g=l*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[c(278)][c(372)](e,d,m,g)},seededRandom(t){const e=1e4*Math[h(259)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const a=h;let c=6.2832*Math.random(),l=Math[a(275)](this[a(274)](n,s)),u=0,f=0,p=0;r&&(l=Math[a(534)](l/r)*r),u=Math[a(320)](c)*l,f=Math[a(259)](c)*l,u*=o.x,f*=o.y,u+=i.x,f+=i.y,p+=i.z,t[a(278)][a(372)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const t=h,i=new(e[t(235)]);return function(e,n,s,o,r,a,c,h){const l=t;i.copy(a),i.x-=s,i.y-=o,i.z-=r,i[l(541)]()[l(273)](-this[l(274)](c,h)),e[l(278)][l(372)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=h,i=new(e[t(235)]);return function(e,n,s,o,r,a,c,h){const l=t;i[l(452)](a),i.x-=s,i.y-=o,i.z-=r,i[l(541)]()[l(273)](-this[l(274)](c,h)),e[l(278)][l(372)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const t=h,i=new o,n=new(e[t(235)]),s=new(e[t(405)]),r=new(e[t(235)])(1,1,1);return function(e,o){const a=t;return i[a(452)](e)[a(541)](),n[a(452)](o)[a(541)](),i.x+=.5*-o.x+Math.random()*o.x,i.y+=.5*-o.y+Math[a(611)]()*o.y,i.z+=.5*-o.z+Math[a(611)]()*o.z,i.normalize()[a(507)](r)[a(273)](.5),s.setRGB(i.x,i.y,i.z),s[a(295)]()}}()},p[h(571)]=function(t){const i=h,n=p[i(425)],s=n[i(451)];(t=n[i(467)](t,s[i(351)],{}))[i(238)]=n[i(467)](t[i(238)],s[i(351)],{}),this[i(411)]=c[i(471)](),this[i(335)]=n.ensureTypedArg(t[i(335)],s[i(216)],.016),this.texture=n[i(583)](t.texture[i(629)],e[i(466)],null),this[i(621)]=n.ensureInstanceOf(t.texture.frames,e[i(561)],new(e[i(561)])(1,1)),this[i(429)]=n.ensureTypedArg(t[i(238)][i(434)],s[i(216)],this[i(621)].x*this[i(621)].y),this[i(448)]=n.ensureTypedArg(t.texture[i(339)],s.NUMBER,1),this[i(621)][i(652)](new(e[i(561)])(1,1)),this[i(557)]=n[i(467)](t[i(557)],s[i(318)],!0),this[i(383)]=n.ensureTypedArg(t[i(383)],s[i(318)],!0),this[i(268)]=n[i(467)](t[i(268)],s.NUMBER,null),this[i(374)]=n[i(467)](t[i(374)],s[i(216)],e[i(431)]),this[i(290)]=n[i(467)](t[i(290)],s.BOOLEAN,!0),this[i(524)]=parseFloat(n[i(467)](t[i(524)],s[i(216)],0)),this[i(436)]=n[i(467)](t[i(436)],s[i(318)],!1),this.depthTest=n[i(467)](t[i(354)],s.BOOLEAN,!0),this.fog=n[i(467)](t[i(314)],s[i(318)],!0),this[i(449)]=n[i(467)](t[i(449)],s[i(216)],300),this[i(490)]=[],this[i(628)]=[],this[i(555)]=[],this._poolCreationSettings=null,this[i(386)]=0,this[i(287)]=!1,this._attributesNeedDynamicReset=!1,this[i(637)]=0,this.uniforms={tex:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new(e[i(654)])(this[i(621)].x,this.textureFrames.y,this[i(429)],Math.max(Math.abs(this[i(448)]),1))},fogColor:{type:"c",value:this[i(314)]?new(e[i(405)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this[i(499)]={HAS_PERSPECTIVE:this[i(557)],COLORIZE:this[i(383)],VALUE_OVER_LIFETIME_LENGTH:p[i(599)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(621)].x>1||this[i(621)].y>1},this.attributes={position:new(p[i(460)])("v3",!0),acceleration:new(p[i(460)])("v4",!0),velocity:new p.ShaderAttribute("v3",!0),rotation:new(p[i(460)])("v4",!0),rotationCenter:new p.ShaderAttribute("v3",!0),params:new p.ShaderAttribute("v4",!0),size:new(p[i(460)])("v4",!0),angle:new p.ShaderAttribute("v4",!0),color:new p.ShaderAttribute("v4",!0),opacity:new p.ShaderAttribute("v4",!0)},this[i(324)]=Object.keys(this.attributes),this[i(475)]=this[i(324)][i(338)],this[i(653)]=new(e[i(589)])({uniforms:this.uniforms,vertexShader:p[i(492)][i(473)],fragmentShader:p[i(492)].fragment,blending:this[i(374)],transparent:this[i(290)],alphaTest:this[i(524)],depthWrite:this.depthWrite,depthTest:this[i(354)],defines:this.defines,fog:this[i(314)]}),this.geometry=new(e[i(280)]),this[i(539)]=new(e[i(582)])(this[i(288)],this.material),null===this[i(268)]&&console[i(416)](i(334))},p.Group[h(533)]=p[h(571)],p[h(571)].prototype[h(580)]=function(){const t=h;let e,i=this[t(490)],n=i[t(338)]-1,s=this[t(499)];for(;n>=0;--n)e=i[n],!s[t(366)]&&(s.SHOULD_ROTATE_TEXTURE=s[t(315)]||!!Math.max(Math[t(652)][t(461)](null,e[t(641)][t(629)]),Math.max.apply(null,e[t(641)][t(412)]))),s[t(304)]=s[t(304)]||!!Math.max(e[t(619)][t(641)],e[t(619)][t(477)]),s[t(612)]=s.SHOULD_WIGGLE_PARTICLES||!!Math.max(e[t(322)][t(629)],e.wiggle[t(412)]);this[t(653)][t(371)]=!0},p[h(571)][h(229)][h(396)]=function(){const t=h;let e,i,n=this.attributes,s=this[t(288)],o=s[t(241)];for(const r in n)n[t(267)](r)&&(e=n[r],i=o[r],i?i[t(432)]=e[t(278)].array:s[t(389)](r,e.bufferAttribute),e[t(489)].needsUpdate=!0);this[t(288)][t(642)](0,this[t(637)])},p[h(571)].prototype.addEmitter=function(t){const e=h;if(t instanceof p[e(494)]==!1)return void console.error(e(296),t);if(this.emitterIDs[e(552)](t[e(411)])>-1)return void console[e(394)]("Emitter already exists in this group. Will not add again.");if(null!==t[e(285)])return void console[e(394)](e(657));const i=this[e(241)],n=this[e(637)],s=n+t.particleCount;this[e(637)]=s,null!==this[e(268)]&&this[e(637)]>this[e(268)]&&console[e(416)]("SPE.Group: maxParticleCount exceeded. Requesting",this[e(637)],e(658),this[e(268)]),t[e(544)](t[e(527)][e(317)]+t[e(527)]._spread),t._setBufferUpdateRanges(this[e(324)]),t[e(279)](n),t.group=this,t[e(241)]=this[e(241)];for(const o in i)i[e(267)](o)&&i[o]._createBufferAttribute(null!==this[e(268)]?this.maxParticleCount:this[e(637)]);for(let o=n;o<s;++o)t[e(266)](o),t[e(600)](o,e(469)),t._assignForceValue(o,e(454)),t._assignAbsLifetimeValue(o,e(510)),t[e(615)](o,e(577)),t._assignAngleValue(o),t[e(639)](o),t[e(503)](o),t[e(516)](o);return this._applyAttributesToGeometry(),this[e(490)].push(t),this[e(628)][e(576)](t.uuid),this[e(580)](t),this.material[e(371)]=!0,this[e(288)].needsUpdate=!0,this[e(287)]=!0,this},p[h(571)].prototype.removeEmitter=function(t){const e=h,i=this[e(628)][e(552)](t[e(411)]);if(t instanceof p.Emitter==!1)return void console[e(394)](e(296),t);if(-1===i)return void console[e(394)](e(329));const n=t[e(421)],s=n+t[e(637)],o=this[e(241)][e(585)][e(278)];for(let r=n;r<s;++r)o.array[4*r]=0,o.array[4*r+1]=0;this[e(490)][e(496)](i,1),this[e(628)].splice(i,1);for(const r in this[e(241)])this.attributes[e(267)](r)&&this[e(241)][r][e(496)](n,s);this[e(637)]-=t[e(637)],t[e(610)](),this._attributesNeedRefresh=!0},p[h(571)][h(229)][h(403)]=function(){const t=h,e=this[t(555)],i=this[t(386)];if(e.length)return e[t(217)]();if(i){const t=new p.Emitter(this._poolCreationSettings);return this.addEmitter(t),t}return null},p[h(571)][h(229)][h(414)]=function(t){const e=h;if(t instanceof p[e(494)]!=!1)return t[e(481)](),this[e(555)][e(340)](t),this;console[e(394)]("Argument is not instanceof SPE.Emitter:",t)},p[h(571)][h(229)][h(377)]=function(){return this[h(555)]},p[h(571)][h(229)].addPool=function(t,e,i){const n=h;let s;this[n(422)]=e,this._createNewWhenPoolEmpty=!!i;for(let o=0;o<t;++o)s=Array[n(424)](e)?new(p[n(494)])(e[o]):new(p[n(494)])(e),this[n(497)](s),this[n(414)](s);return this},p[h(571)][h(229)][h(222)]=function(t){const i=h,n=this[i(403)](),s=this;if(null!==n)return t instanceof e[i(235)]&&(n[i(213)][i(629)][i(452)](t),n[i(213)][i(629)]=n[i(213)][i(629)]),n[i(269)](),setTimeout((()=>{const t=i;n[t(655)](),s[t(414)](n)}),1e3*Math[i(652)](n[i(368)],n.maxAge[i(629)]+n.maxAge[i(412)])),this;console[i(595)](i(437))},p[h(571)][h(229)][h(523)]=function(t,e){const i=h;if(typeof t===i(500)&&t>1)for(let n=0;n<t;++n)this[i(222)](e);else this[i(222)](e);return this},p[h(571)].prototype[h(358)]=function(t){const e=h;this[e(251)][e(614)][e(629)]+=t,this.uniforms[e(562)].value=t},p.Group[h(229)][h(244)]=function(){const t=h;let e=this.attributeKeys,i=this[t(475)]-1,n=this.attributes;for(;i>=0;--i)n[e[i]][t(401)]()},p[h(571)][h(229)][h(638)]=function(t){const e=h;let i,n,s,o=this[e(324)],r=this[e(475)]-1,a=this[e(241)],c=t[e(420)];for(;r>=0;--r)i=o[r],n=c[i],s=a[i],s[e(308)](n[e(418)],n[e(652)]),s.flagUpdate()},p[h(571)][h(229)].tick=function(t){const e=h;var i=this[e(490)],n=i[e(338)],s=t||this.fixedTimeStep,o=this.attributeKeys,r=this[e(241)];if(this[e(358)](s),this[e(244)](),0!==n||!1!==this[e(287)]||!1!==this[e(387)]){for(var a,c=0;c<n;++c)(a=i[c])[e(520)](s),this._updateBuffers(a);if(!0===this._attributesNeedDynamicReset){for(c=this[e(475)]-1;c>=0;--c)r[o[c]].resetDynamic();this[e(387)]=!1}if(!0===this[e(287)]){for(c=this[e(475)]-1;c>=0;--c)r[o[c]][e(622)]();this._attributesNeedRefresh=!1,this[e(387)]=!0}}},p[h(571)][h(229)][h(260)]=function(){const t=h;return this[t(288)].dispose(),this.material[t(260)](),this},p.Emitter=function(t){const i=h,n=p.utils,s=n.types,r=p[i(599)];(t=n.ensureTypedArg(t,s[i(351)],{}))[i(213)]=n[i(467)](t[i(213)],s.OBJECT,{}),t[i(469)]=n.ensureTypedArg(t[i(469)],s[i(351)],{}),t[i(454)]=n.ensureTypedArg(t.acceleration,s.OBJECT,{}),t[i(252)]=n[i(467)](t[i(252)],s[i(351)],{}),t[i(656)]=n.ensureTypedArg(t[i(656)],s[i(351)],{}),t.rotation=n[i(467)](t[i(619)],s[i(351)],{}),t[i(560)]=n[i(467)](t.color,s[i(351)],{}),t[i(510)]=n.ensureTypedArg(t[i(510)],s[i(351)],{}),t[i(577)]=n[i(467)](t[i(577)],s[i(351)],{}),t[i(641)]=n[i(467)](t[i(641)],s[i(351)],{}),t.wiggle=n.ensureTypedArg(t[i(322)],s[i(351)],{}),t[i(527)]=n.ensureTypedArg(t[i(527)],s[i(351)],{}),t[i(272)]&&console[i(416)]("onParticleSpawn has been removed. Please set properties directly to alter values at runtime."),this[i(411)]=e[i(408)][i(471)](),this.type=n[i(467)](t.type,s[i(216)],p.distributions.BOX),this[i(213)]={_value:n[i(583)](t[i(213)][i(629)],e[i(235)],new(e[i(235)])),_spread:n[i(583)](t.position.spread,e[i(235)],new(e[i(235)])),_spreadClamp:n[i(583)](t.position.spreadClamp,e[i(235)],new(e[i(235)])),_distribution:n[i(467)](t[i(213)][i(476)],s[i(216)],this.type),_randomise:n[i(467)](t[i(213)][i(299)],s.BOOLEAN,!1),_radius:n[i(467)](t.position[i(252)],s[i(216)],10),_radiusScale:n.ensureInstanceOf(t[i(213)][i(230)],o,new(e[i(235)])(1,1,1)),_distributionClamp:n[i(467)](t[i(213)][i(617)],s[i(216)],0)},this[i(469)]={_value:n[i(583)](t[i(469)][i(629)],o,new(e[i(235)])),_spread:n[i(583)](t[i(469)].spread,o,new o),_distribution:n[i(467)](t.velocity[i(476)],s[i(216)],this.type),_randomise:n[i(467)](t[i(213)][i(299)],s.BOOLEAN,!1)},this[i(454)]={_value:n[i(583)](t[i(454)][i(629)],e[i(235)],new(e[i(235)])),_spread:n.ensureInstanceOf(t.acceleration.spread,o,new o),_distribution:n[i(467)](t.acceleration[i(476)],s.NUMBER,this[i(647)]),_randomise:n[i(467)](t.position.randomise,s.BOOLEAN,!1)},this.drag={_value:n[i(467)](t.drag[i(629)],s[i(216)],0),_spread:n[i(467)](t[i(656)][i(412)],s[i(216)],0),_randomise:n[i(467)](t[i(213)].randomise,s[i(318)],!1)},this[i(322)]={_value:n[i(467)](t[i(322)][i(629)],s[i(216)],0),_spread:n.ensureTypedArg(t[i(322)][i(412)],s[i(216)],0)},this[i(619)]={_axis:n[i(583)](t[i(619)][i(364)],o,new(e[i(235)])(0,1,0)),_axisSpread:n.ensureInstanceOf(t[i(619)][i(292)],e[i(235)],new(e[i(235)])),_angle:n[i(467)](t[i(619)][i(641)],s[i(216)],0),_angleSpread:n[i(467)](t.rotation[i(477)],s[i(216)],0),_static:n[i(467)](t[i(619)].static,s[i(318)],!1),_center:n[i(583)](t[i(619)][i(346)],e[i(235)],this[i(213)]._value[i(215)]()),_randomise:n[i(467)](t[i(213)][i(299)],s[i(318)],!1)},this[i(527)]={_value:n[i(467)](t.maxAge[i(629)],s[i(216)],2),_spread:n[i(467)](t[i(527)][i(412)],s[i(216)],0)},this[i(560)]={_value:n[i(407)](t.color[i(629)],e[i(405)],new a),_spread:n[i(407)](t[i(560)][i(412)],o,new o),_randomise:n[i(467)](t[i(213)][i(299)],s[i(318)],!1)},this[i(510)]={_value:n[i(271)](t[i(510)][i(629)],s.NUMBER,1),_spread:n[i(271)](t[i(510)].spread,s[i(216)],0),_randomise:n[i(467)](t.position[i(299)],s[i(318)],!1)},this[i(577)]={_value:n[i(271)](t[i(577)].value,s[i(216)],1),_spread:n[i(271)](t.size[i(412)],s[i(216)],0),_randomise:n[i(467)](t[i(213)][i(299)],s.BOOLEAN,!1)},this.angle={_value:n[i(271)](t[i(641)][i(629)],s.NUMBER,0),_spread:n[i(271)](t.angle.spread,s[i(216)],0),_randomise:n.ensureTypedArg(t.position.randomise,s[i(318)],!1)},this[i(637)]=n[i(467)](t[i(637)],s[i(216)],100),this[i(368)]=n.ensureTypedArg(t.duration,s[i(216)],null),this[i(650)]=n[i(467)](t[i(650)],s[i(318)],!1),this[i(570)]=n.ensureTypedArg(t[i(570)],s[i(216)],1),this.direction=n[i(467)](t.direction,s[i(216)],1),this[i(415)]=n[i(467)](t.alive,s.BOOLEAN,!0),this[i(530)]=0,this[i(284)]=0,this[i(421)]=0,this[i(596)]=0,this[i(625)]=0,this[i(435)]=0,this[i(285)]=null,this[i(241)]=null,this[i(634)]=null,this[i(306)]={position:n[i(467)](t[i(213)][i(299)],s.BOOLEAN,!1)||n[i(467)](t.radius[i(299)],s[i(318)],!1),velocity:n[i(467)](t[i(469)][i(299)],s[i(318)],!1),acceleration:n[i(467)](t.acceleration.randomise,s.BOOLEAN,!1)||n[i(467)](t[i(656)][i(299)],s[i(318)],!1),rotation:n.ensureTypedArg(t[i(619)][i(299)],s.BOOLEAN,!1),rotationCenter:n[i(467)](t[i(619)][i(299)],s[i(318)],!1),size:n[i(467)](t[i(577)][i(299)],s[i(318)],!1),color:n[i(467)](t[i(560)][i(299)],s[i(318)],!1),opacity:n.ensureTypedArg(t[i(510)][i(299)],s[i(318)],!1),angle:n[i(467)](t[i(641)].randomise,s[i(318)],!1)},this[i(360)]={},this[i(283)]={},this[i(345)]={maxAge:"params",position:i(213),velocity:"velocity",acceleration:i(454),drag:i(454),wiggle:"params",rotation:i(619),size:"size",color:i(560),opacity:i(510),angle:"angle"};for(const e in this[i(345)])this[i(345)][i(267)](e)&&(this.updateCounts[this.updateMap[e]]=0,this[i(360)][this[i(345)][e]]=!1,this._createGetterSetters(this[e],e));this[i(420)]={},this.attributeKeys=null,this.attributeCount=0,n[i(245)](this[i(560)],r,r),n.ensureValueOverLifetimeCompliance(this[i(510)],r,r),n.ensureValueOverLifetimeCompliance(this.size,r,r),n[i(245)](this[i(641)],r,r)},p.Emitter[h(533)]=p[h(494)],p[h(494)][h(229)]._createGetterSetters=function(t,e){const i=h,n=this;for(const s in t)if(t[i(267)](s)){const o=s[i(406)]("_","");Object[i(624)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=d,o=n[s(345)][e],r=this[t],a=p[s(599)];t===s(224)?(n[s(360)].rotationCenter=!0,n[s(283)][s(559)]=0):"_randomise"===t?n.resetFlags[o]=i:(n[s(360)][o]=!0,n.updateCounts[o]=0),n[s(285)][s(580)](),this[t]=i,Array[s(424)](r)&&p[s(425)][s(245)](n[e],a,a)}}(s)})}},p[h(494)][h(229)]._setBufferUpdateRanges=function(t){const e=h;this.attributeKeys=t,this.attributeCount=t[e(338)];for(let i=this.attributeCount-1;i>=0;--i)this[e(420)][t[i]]={min:Number[e(359)],max:Number[e(427)]}},p.Emitter[h(229)][h(544)]=function(t){const e=h,i=this[e(637)];this.duration?this[e(530)]=i/(t<this[e(368)]?t:this[e(368)]):this.particlesPerSecond=i/t},p[h(494)][h(229)][h(279)]=function(t){const e=h;this[e(421)]=t,this[e(284)]=t,this[e(325)]=t+this.particleCount},p[h(494)][h(229)]._assignValue=function(t,e){const i=h;switch(t){case i(213):this._assignPositionValue(e);break;case i(469):case i(454):this[i(600)](e,t);break;case i(577):case i(510):this._assignAbsLifetimeValue(e,t);break;case i(641):this[i(470)](e);break;case i(585):this._assignParamsValue(e);break;case i(619):this[i(639)](e);break;case"color":this._assignColorValue(e)}},p[h(494)].prototype._assignPositionValue=function(t){const e=h,i=p[e(402)],n=p[e(425)],s=this[e(213)],o=this[e(241)].position,r=s[e(317)],a=s[e(231)];switch(s[e(606)]){case i[e(264)]:n[e(482)](o,t,r,a,s._spreadClamp);break;case i.SPHERE:n[e(514)](o,t,r,s[e(646)],s[e(231)].x,s[e(601)],s._spreadClamp.x,s[e(453)]||this[e(637)]);break;case i[e(281)]:n[e(378)](o,t,r,s._radius,s._spread.x,s[e(601)],s[e(631)].x);break;case i[e(456)]:n[e(361)](o,t,r,a)}},p[h(494)].prototype._assignForceValue=function(t,e){const i=h;let n,s,o,r,a,c=p[i(402)],l=p[i(425)],u=this[e],f=u[i(317)],d=u[i(231)];switch(u[i(606)]){case c[i(264)]:l[i(482)](this[i(241)][e],t,f,d);break;case c.SPHERE:n=this[i(241)][i(213)][i(278)][i(432)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],l.randomDirectionVector3OnSphere(this[i(241)][e],t,s,o,r,this.position[i(317)],u[i(317)].x,u[i(231)].x);break;case c[i(281)]:n=this[i(241)][i(213)][i(278)][i(432)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],l[i(537)](this[i(241)][e],t,s,o,r,this.position[i(317)],u._value.x,u[i(231)].x);break;case c[i(456)]:l.randomVector3OnLine(this.attributes[e],t,f,d)}if(e===i(454)){const e=l[i(356)](l[i(274)](this[i(656)][i(317)],this[i(656)][i(231)]),0,1);this.attributes[i(454)][i(278)][i(432)][4*t+3]=e}},p[h(494)][h(229)][h(615)]=function(t,e){const i=h;let n,s=this[i(241)][e][i(278)],o=this[e],r=p[i(425)];r.arrayValuesAreEqual(o[i(317)])&&r[i(584)](o[i(231)])?(n=Math.abs(r[i(274)](o._value[0],o[i(231)][0])),s[i(388)](t,n,n,n,n)):s[i(388)](t,Math[i(275)](r[i(274)](o._value[0],o[i(231)][0])),Math[i(275)](r[i(274)](o[i(317)][1],o[i(231)][1])),Math[i(275)](r[i(274)](o[i(317)][2],o[i(231)][2])),Math[i(275)](r[i(274)](o[i(317)][3],o[i(231)][3])))},p[h(494)][h(229)]._assignAngleValue=function(t){const e=h;let i,n=this[e(241)].angle[e(278)],s=this[e(641)],o=p[e(425)];o[e(584)](s._value)&&o[e(584)](s[e(231)])?(i=o[e(274)](s[e(317)][0],s._spread[0]),n[e(388)](t,i,i,i,i)):n.setVec4Components(t,o.randomFloat(s._value[0],s[e(231)][0]),o[e(274)](s[e(317)][1],s[e(231)][1]),o.randomFloat(s[e(317)][2],s[e(231)][2]),o[e(274)](s[e(317)][3],s[e(231)][3]))},p[h(494)].prototype[h(503)]=function(t){const e=h;this.attributes[e(585)][e(278)][e(388)](t,this[e(650)]?1:0,0,Math[e(275)](p[e(425)].randomFloat(this.maxAge._value,this[e(527)][e(231)])),p[e(425)][e(274)](this.wiggle[e(317)],this.wiggle._spread))},p[h(494)].prototype[h(639)]=function(t){const e=h;this[e(241)].rotation.typedArray[e(372)](t,p[e(425)].getPackedRotationAxis(this.rotation[e(447)],this[e(619)]._axisSpread),p[e(425)][e(274)](this[e(619)][e(651)],this.rotation[e(645)]),this[e(619)][e(210)]?0:1),this.attributes[e(559)].typedArray.setVec3(t,this[e(619)][e(312)])},p[h(494)][h(229)][h(516)]=function(t){const e=h;p.utils[e(218)](this[e(241)].color,t,this[e(560)]._value,this[e(560)][e(231)])},p[h(494)][h(229)]._resetParticle=function(t){const e=h;let i,n,s=this[e(306)],o=this[e(360)],r=this[e(283)],a=this.attributeKeys;for(let c=this.attributeCount-1;c>=0;--c)i=a[c],n=o[i],!0!==s[i]&&!0!==n||(this[e(491)](i,t),this[e(254)](i,t),!0===n&&r[i]===this[e(637)]?(o[i]=!1,r[i]=0):1==n&&++r[i])},p[h(494)].prototype[h(254)]=function(t,e){const i=h,n=this[i(420)][t];n.min=Math[i(418)](e,n[i(418)]),n[i(652)]=Math[i(652)](e,n[i(652)])},p[h(494)][h(229)][h(244)]=function(){const t=h;let e,i=this[t(420)],n=this[t(649)],s=this[t(352)]-1;for(;s>=0;--s)e=n[s],i[e].min=Number[t(359)],i[e][t(652)]=Number[t(427)]},p[h(494)][h(229)][h(610)]=function(){const t=h;this[t(530)]=0,this[t(421)]=0,this.activationIndex=0,this.activeParticleCount=0,this[t(285)]=null,this[t(241)]=null,this.paramsArray=null,this[t(625)]=0},p.Emitter[h(229)]._decrementParticleCount=function(){--this[h(435)]},p[h(494)][h(229)][h(486)]=function(){++this[h(435)]},p[h(494)][h(229)][h(243)]=function(t,e,i,n){const s=h;for(var o,r,a,c,l=e-1;l>=t;--l)0!==(c=i[o=4*l])&&(a=i[o+1],r=i[o+2],1===this[s(602)]?(a+=n)>=r&&(a=0,c=0,this[s(370)]()):(a-=n)<=0&&(a=r,c=0,this[s(370)]()),i[o]=c,i[o+1]=a,this[s(254)]("params",l))},p.Emitter[h(229)][h(214)]=function(t,e,i,n){const s=h,o=this[s(602)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this[s(637)]||(this._incrementParticleCount(),i[r]=1,this[s(236)](c),a=n*(c-t),i[r+1]=-1===o?i[r+2]-a:a,this[s(254)]("params",c))},p.Emitter[h(229)].tick=function(t){const e=h;if(this[e(650)])return;null===this[e(634)]&&(this[e(634)]=this[e(241)][e(585)][e(278)][e(432)]);const i=this[e(421)],n=i+this[e(637)],s=this[e(634)],o=this[e(530)]*this.activeMultiplier*t,r=this[e(284)];if(this[e(244)](),this[e(243)](i,n,s,t),!1===this.alive)return void(this[e(625)]=0);if(null!==this[e(368)]&&this[e(625)]>this[e(368)])return this[e(415)]=!1,void(this.age=0);const a=1===this[e(637)]?r:0|r,c=Math[e(418)](a+o,this[e(325)]),l=c-this[e(284)]|0,u=l>0?t/l:0;this[e(214)](a,c,s,u),this.activationIndex+=o,this[e(284)]>n&&(this[e(284)]=i),this[e(625)]+=t},p[h(494)][h(229)][h(481)]=function(t){const e=h;if(this[e(625)]=0,this[e(415)]=!1,!0===t){const t=this[e(421)],s=t+this[e(637)],o=this.paramsArray,r=this[e(241)].params[e(489)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(450)][e(343)]=0,r[e(450)][e(578)]=-1,r[e(371)]=!0}return this},p[h(494)][h(229)].enable=function(){return this.alive=!0,this},p.Emitter.prototype.disable=function(){return this[h(415)]=!1,this},p[h(494)][h(229)].remove=function(){const t=h;return null!==this[t(285)]?this[t(285)][t(375)](this):console[t(394)](t(586)),this};const m=p;function g(t){function e(t){const i=d;if("string"==typeof t)return function(t){}[i(533)](i(209))[i(461)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(i(250)+i(512)).call(i(644)):function(){return!1}[i(533)]("debugger")[i(461)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

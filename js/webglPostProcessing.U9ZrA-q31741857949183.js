import{i as t}from"./ice-utils.jzV0sHX41741857949183.js";import{_ as n,m as e}from"./gl-matrix.kdMXAtPF1741857949183.js";import{P as o}from"./tweakpane.yDiyAAkA1741857949183.js";import{d as r,r as i,q as a,o as c,H as s,N as u,u as f}from"./@vue.NRI7TcgI1741857949183.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",x=p;!function(t,n){const e=p,o=b();for(;;)try{if(351804===parseInt(e(507))/1+parseInt(e(515))/2+-parseInt(e(411))/3+parseInt(e(497))/4+parseInt(e(447))/5+-parseInt(e(443))/6*(-parseInt(e(457))/7)+-parseInt(e(430))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){_(this,(function(){const t=p,n=new RegExp(t(508)),e=new RegExp(t(421),"i"),o=A(t(464));n[t(456)](o+t(437))&&e[t(456)](o+t(509))?A():o("0")}))()}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[p(454)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();d(void 0,(function(){const t=p,n=function(){const t=p;let n;try{n=Function(t(511)+t(469)+");")()}catch(e){n=window}return n}(),e=n[t(482)]=n[t(482)]||{},o=[t(435),"warn",t(416),t(473),t(432),t(420),t(453)];for(let r=0;r<o.length;r++){const n=d[t(461)][t(496)][t(419)](d),i=o[r],a=e[i]||n;n[t(502)]=d[t(419)](d),n[t(433)]=a[t(433)][t(419)](a),e[i]=n}}))();const g={id:x(498)},E=[x(458)];function p(t,n){const e=b();return(p=function(t,n){return e[t-=411]})(t,n)}function b(){const t=["bind","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","BYTES_PER_ELEMENT","TRIANGLES","innerWidth","value","getElementById","blendFunc","create","img","9429800DoZZrN","counter","exception","toString","FRAMEBUFFER","log","TEXTURE_WRAP_S","chain","lookAt","bindTexture","TEXTURE_2D","offset_left_bottom","offset_right_top","352734iomvqy","TEXTURE_MIN_FILTER","bindFramebuffer","stateObject","1836765mfRQrm","action","mixParam","change","CLAMP_TO_EDGE","useProgram","trace","apply","color","test","21jFwHEv","src","call","canvas","constructor","inline","TEXTURE_WRAP_T","init","gger","logo-texture","framebufferTexture2D","STATIC_DRAW",'{}.constructor("return this")( )',"hidden","texParameteri","SRC_ALPHA","error","createBuffer","COLOR_ATTACHMENT0","是否后处理","uniformMatrix4fv","clearColor","offset_right_bottom","uView","scale","console","drawElements","offset_left_top","enable","translate","vertexAttribPointer","height","width","bufferData","TEXTURE_MAG_FILTER","createFramebuffer","getContext","mat4","while (true) {}","prototype","2277204WlwOHE","canvaswebgl","UNSIGNED_BYTE","ELEMENT_ARRAY_BUFFER","bindBuffer","__proto__","length","#canvaswebgl","debu","string","212127pjXjkD","function *\\( *\\)","input","COLOR_BUFFER_BIT","return (function() ","uProjection","uModel","none","518176BETwsJ","161121vBKTES","addBinding","NEAREST","ARRAY_BUFFER","getUniformLocation","info","RGBA","createTexture"];return(b=function(){return t})()}const T=r({__name:"webglPostProcessing",setup(r){const _=x;let d,p,b,T,A,y,R,v,F,h,w,P,B;const C=1,I=.71,L=.76,U=new o({title:"参数"}),S=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U.addBlade({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(_(450),(t=>{const n=_;O(),p.uniform1f(P,t[n(425)])}));let D=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U.addBinding(S,_(470),{label:_(476)}),U[_(412)](S,"offset_right_top",{picker:_(462),x:{min:0,max:1},y:{min:0,max:1}}).on(_(450),(t=>{const n=_;D[0]=S[n(442)].x,D[1]=S[n(442)].y,O()})),U[_(412)](S,_(479),{picker:_(462),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(450),(t=>{const n=_;D[5]=S[n(479)].x,D[6]=S[n(479)].y,O()})),U[_(412)](S,_(441),{picker:_(462),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{D[10]=S.offset_left_bottom.x,D[11]=S.offset_left_bottom.y,O()})),U.addBinding(S,_(484),{picker:_(462),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(450),(t=>{const n=_;D[15]=S.offset_left_top.x,D[16]=S[n(484)].y,O()})),a((()=>{M()}));const M=function(){const n=_;d=document.querySelector(n(504)),d[n(489)]=window[n(424)],d.height=window.innerHeight,p=d[n(493)]("webgl"),p&&(function(){const n=_,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=H(e,o),b=t(p,l,m),F=p[n(415)](b,n(512)),h=p[n(415)](b,n(480)),w=p[n(415)](b,n(513)),B=k(document[n(426)](n(466)))}(),O(),p[n(485)](p.BLEND),p[n(427)](p[n(472)],p.ONE_MINUS_SRC_ALPHA),N())};function N(){const t=_;p[t(445)](p[t(434)],R),p[t(478)](C,I,L,1),p.clear(p[t(510)]),function(){const t=_;p[t(452)](b),p[t(501)](p[t(414)],T);const o=n[t(494)][t(428)]();n[t(494)].ortho(o,0,d[t(489)],d[t(488)],0,.1,100),p[t(477)](F,!1,o);const r=e[t(428)]();n[t(494)][t(438)](r,[0,0,1],[0,0,0],[0,1,0]),p[t(477)](h,!1,r),j(B,600,600),j(B,400,400)}(),p[t(445)](p[t(434)],null),S[t(470)]&&(p.clear(p.COLOR_BUFFER_BIT),p[t(478)](0,0,1,1),p[t(501)](p[t(414)],A),p[t(452)](y),p.bindTexture(p[t(440)],v)),p[t(483)](p[t(423)],6,p[t(499)],0),requestAnimationFrame(N)}function j(t,e,o){const r=_;let i=n[r(494)].create();n[r(494)][r(486)](i,i,[e,o,0]),n[r(494)][r(481)](i,i,[250,250,0]),p[r(477)](w,!1,i),p[r(439)](p[r(440)],t),p[r(483)](p[r(423)],6,p[r(499)],0)}function O(){const n=_,e=new Uint8Array([0,1,2,0,2,3]);A=H(D,e),y=t(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=p.getUniformLocation(y,n(449)),p.getUniformLocation(y,n(455)),function(){const t=_;v=k(d),R=p[t(492)](),p.bindFramebuffer(p[t(434)],R),p[t(467)](p.FRAMEBUFFER,p[t(475)],p[t(440)],v,0),p.bindFramebuffer(p.FRAMEBUFFER,null)}()}function k(t){const n=_,e=p[n(418)]();return p[n(439)](p[n(440)],e),t instanceof HTMLImageElement?p.texImage2D(p[n(440)],0,p[n(417)],p[n(417)],p.UNSIGNED_BYTE,t):p.texImage2D(p[n(440)],0,p[n(417)],t.width,t.height,0,p[n(417)],p[n(499)],null),p.texParameteri(p[n(440)],p[n(444)],p[n(413)]),p.texParameteri(p[n(440)],p[n(491)],p[n(413)]),p[n(471)](p[n(440)],p[n(436)],p[n(451)]),p[n(471)](p[n(440)],p[n(463)],p[n(451)]),e}function H(t,n){const e=_,o=p[e(474)]();p[e(501)](p[e(414)],o),p[e(490)](p[e(414)],t,p[e(468)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array[e(422)];p[e(487)](0,3,p.FLOAT,!1,r,0),p.enableVertexAttribArray(0),p.vertexAttribPointer(1,2,p.FLOAT,!1,r,3*Float32Array[e(422)]),p.enableVertexAttribArray(1);const i=p[e(474)]();return p[e(501)](p[e(500)],i),p[e(490)](p[e(500)],n,p[e(468)]),p.bindBuffer(p[e(414)],null),o}return(t,n)=>{const e=_;return c(),s(e(460),g,[u(e(429),{id:"logo-texture",src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(514)}},null,8,E)])}}});function A(t){function n(t){const e=p;if(typeof t===e(506))return function(t){}[e(461)](e(495))[e(454)](e(431));1!==(""+t/t)[e(503)]||t%20==0?function(){return!0}[e(461)](e(505)+e(465))[e(459)](e(448)):function(){return!1}.constructor(e(505)+e(465))[e(454)](e(446)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{T as default};

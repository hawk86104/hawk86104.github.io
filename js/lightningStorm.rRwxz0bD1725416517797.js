import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.ss_nL2AI1725416517797.js";import{B as i,V as s,cm as n,aB as e,N as r,h as o,ae as a,Y as h,q as c,C as u,a6 as l}from"./three.VTQVqxMx1725416517797.js";import{$ as d,D as p,j as f}from"./@tresjs.5lh7VmqZ1725416517797.js";import{c as m}from"./simplex-noise.MycypUyu1725416517797.js";import{d as g,a2 as y,o as b,E as v,u as w,r as x,j as S,g as I,m as _,F as P}from"./@vue._6MD2XyK1725416517797.js";import"./index.d_CGI1VC1725416517797.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.wE5cqKw31725416517797.js";import"./three-custom-shader-material.R9Qrt3ei1725416517797.js";import"./object-hash.UdqO8HjX1725416517797.js";import"./@amap.LUDXTi4z1725416517797.js";import"./jszip.7CKSmb6c1725416517797.js";import"./glsl-tokenizer.dGVPr_M11725416517797.js";import"./glsl-token-string.7HmLwuvT1725416517797.js";import"./glsl-token-functions.fONiiOsX1725416517797.js";import"./tweakpane.yHWGBmom1725416517797.js";import"./@vueuse.L-salR9N1725416517797.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang._nYTnfoU1725416517797.js";import"./all.three.uEDUuufF1725416517797.js";import"./oimophysics.x0jH7fze1725416517797.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.Rf1XLeHc1725416517797.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.vh6M6l9W1725416517797.js";import"./index.6rFj34yJ1725416517797.js";import"./three-stdlib.a3mqXhLa1725416517797.js";import"./@pmndrs.3SP8A_bt1725416517797.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.ws-aQSrx1725416517797.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.BsUe-RH91725416517797.js";const T=A;function A(t,i){const s=F();return(A=function(t,i){return s[t-=295]})(t,i)}!function(t,i){const s=A,n=F();for(;;)try{if(201536===parseInt(s(430))/1*(-parseInt(s(363))/2)+-parseInt(s(346))/3*(parseInt(s(337))/4)+parseInt(s(311))/5*(parseInt(s(299))/6)+parseInt(s(389))/7+parseInt(s(405))/8+-parseInt(s(305))/9*(-parseInt(s(397))/10)+-parseInt(s(413))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(347)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){V(this,(function(){const t=A,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(350),"i"),n=R(t(319));i[t(321)](n+t(393))&&s[t(321)](n+t(332))?R():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(347)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();j(void 0,(function(){const t=A,i=function(){const t=A;let i;try{i=Function(t(320)+t(302)+");")()}catch(s){i=window}return i}(),s=i[t(379)]=i[t(379)]||{},n=[t(428),t(459),t(415),t(375),t(435),t(370),"trace"];for(let e=0;e<n[t(308)];e++){const i=j[t(414)][t(452)][t(361)](j),r=n[e],o=s[r]||i;i.__proto__=j[t(361)](j),i[t(300)]=o[t(300)][t(361)](o),s[r]=i}}))();class D extends i{constructor(t={}){const i=A;super(),this[i(419)]=!0,this[i(451)]="LightningStrike",this[i(319)](D.copyParameters(t,t)),this[i(369)]()}static[T(316)](){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(457)](Math[t(445)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(344)]];return n[e(344)]=(n[e(344)]+1)%i,r},getSeed:function(){return n[t(344)]/i},setSeed:function(s){const e=t;n[e(344)]=Math[e(446)](s*i)%i}};return n}static[T(450)](t={},i={}){const n=T,e=function(s){return i===t?s:s[A(364)]()};return t[n(453)]=void 0!==i[n(453)]?e(i[n(453)]):new s(0,100,0),t[n(355)]=void 0!==i[n(355)]?e(i[n(355)]):new s(0,0,0),t[n(351)]=void 0!==i[n(351)]?i[n(351)]:1,t.roughness=void 0!==i[n(408)]?i[n(408)]:.9,t[n(387)]=void 0!==i.straightness?i[n(387)]:.7,t[n(354)]=void 0!==i[n(354)]?e(i.up0):new s(0,0,1),t[n(384)]=void 0!==i[n(384)]?e(i[n(384)]):new s(0,0,1),t[n(401)]=void 0!==i.radius0?i.radius0:1,t.radius1=void 0!==i[n(438)]?i.radius1:1,t[n(406)]=void 0!==i[n(406)]?i[n(406)]:.5,t[n(403)]=void 0!==i[n(403)]?i.radius1Factor:.2,t[n(437)]=void 0!==i.minRadius?i[n(437)]:.2,t.isEternal=void 0!==i[n(371)]?i[n(371)]:void 0===i[n(341)]||void 0===i[n(440)],t[n(341)]=i.birthTime,t[n(440)]=i[n(440)],t.propagationTimeFactor=void 0!==i[n(420)]?i.propagationTimeFactor:.1,t[n(368)]=void 0!==i[n(368)]?i[n(368)]:.9,t[n(396)]=void 0!==i[n(396)]?i[n(396)]:4,t.subrayDutyCycle=void 0!==i[n(466)]?i[n(466)]:.6,t[n(318)]=void 0!==i.maxIterations?i[n(318)]:9,t[n(303)]=void 0!==i[n(303)]&&i.isStatic,t[n(297)]=void 0!==i[n(297)]?i[n(297)]:5,t.maxSubrayRecursion=void 0!==i[n(439)]?i[n(439)]:3,t[n(412)]=void 0!==i.recursionProbability?i.recursionProbability:.6,t[n(424)]=void 0!==i[n(424)]&&i.generateUVs,t[n(378)]=i[n(378)],t[n(434)]=i[n(434)],t[n(395)]=i.onDecideSubrayCreation,t[n(417)]=i[n(417)],t}[T(421)](t){const i=T;this[i(303)]||(this[i(335)][i(371)]||this[i(335)][i(341)]<=t&&t<=this[i(335)][i(440)]?(this[i(423)](t),t<this[i(345)][0][i(399)]?this.state=D[i(322)]:t>this[i(345)][0][i(323)]?this[i(448)]=D[i(416)]:this.state=D[i(465)],this[i(394)]=!0):(this.visible=!1,t<this[i(335)][i(341)]?this[i(448)]=D[i(391)]:this[i(448)]=D[i(362)]))}[T(319)](t){const i=T;this.rayParameters=t,this[i(318)]=void 0!==t[i(318)]?Math[i(446)](t[i(318)]):9,t[i(318)]=this[i(318)],this[i(303)]=void 0!==t[i(303)]&&t[i(303)],t[i(303)]=this[i(303)],this.ramification=void 0!==t[i(297)]?Math[i(446)](t[i(297)]):5,t[i(297)]=this[i(297)],this[i(439)]=void 0!==t.maxSubrayRecursion?Math.floor(t[i(439)]):3,t.maxSubrayRecursion=this[i(439)],this[i(412)]=void 0!==t[i(412)]?t[i(412)]:.6,t.recursionProbability=this.recursionProbability,this[i(424)]=void 0!==t.generateUVs&&t[i(424)],t[i(424)]=this[i(424)],void 0!==t.randomGenerator?(this[i(378)]=t.randomGenerator,this[i(422)]=t[i(378)],void 0!==t.noiseSeed&&this[i(422)][i(330)](t.noiseSeed)):(this[i(378)]=D.createRandomGenerator(),this.seedGenerator=Math),void 0!==t.onDecideSubrayCreation?this.onDecideSubrayCreation=t[i(395)]:(this[i(296)](),void 0!==t[i(417)]&&(this[i(417)]=t[i(417)])),this[i(448)]=D[i(352)],this[i(464)]=Math[i(328)](1+Math[i(339)](this.ramification,Math[i(338)](0,this[i(439)]-1))),t[i(464)]=this.maxSubrays,this[i(392)]=2*(1<<this[i(318)]),this[i(345)]=[];for(let s=0;s<this[i(464)];s++)this[i(345)].push(this[i(295)]());this[i(334)]=[];for(let s=0;s<this[i(392)];s++)this[i(334)][i(457)](this.createSegment());this[i(372)]=0,this[i(407)]=0,this[i(431)]=null,this.currentCreateTriangleVertices=this[i(424)]?this.createTriangleVerticesWithUVs:this.createTriangleVerticesWithoutUVs,this[i(390)]=0,this[i(342)]=null,this[i(376)]=0,this.isInitialSegment=!1,this[i(454)]=0,this[i(458)]=0,this[i(380)]=0,this[i(349)]=0,this[i(409)]=0,this[i(306)]=null,this.uvs=null,this[i(360)]=null,this[i(325)]=null,this[i(470)]=null,this[i(468)]=m(this[i(422)].random),this[i(310)]=m(this[i(422)][i(445)]),this[i(386)]=m(this.seedGenerator[i(445)]),this[i(381)]=new s,this[i(425)]=new s,this.side=new s,this.down=new s,this[i(317)]=new s,this[i(444)]=new s,this[i(374)]=new s,this.vPos=new s,this[i(460)]=new s}[T(369)](){const t=T,i=1<<this[t(318)],s=3*(i+1)*this[t(464)],o=18*i*this[t(464)];this[t(306)]=new Float32Array(3*s),this[t(360)]=new Uint32Array(o),this[t(424)]&&(this[t(373)]=new Float32Array(2*s)),this[t(427)](0),this[t(336)](new n(this[t(360)],1)),this[t(325)]=new e(this[t(306)],3),this.setAttribute(t(411),this[t(325)]),this[t(424)]&&(this.uvsAttribute=new e(new Float32Array(this.uvs),2),this.setAttribute("uv",this[t(470)])),!this.isStatic&&(this[t(313)][t(377)]=r,this[t(325)][t(377)]=r,this.generateUVs&&(this.uvsAttribute[t(377)]=r)),this[t(306)]=this.positionAttribute[t(461)],this[t(360)]=this.index.array,this.generateUVs&&(this[t(373)]=this[t(470)][t(461)])}[T(423)](t){const i=T;this.fillMesh(t),this[i(359)].count=this[i(380)],this[i(313)][i(312)]=!0,this[i(325)].needsUpdate=!0,this[i(424)]&&(this[i(470)][i(312)]=!0)}fillMesh(t){const i=T,s=this;this.currentVertex=0,this[i(380)]=0,this[i(349)]=0,this[i(409)]=0,this[i(436)](t,(function(n){const e=i,r=s[e(342)];t<r[e(341)]||(this[e(335)][e(371)]&&0==s[e(342)][e(348)]?(s.createPrism(n),s[e(395)](n,s)):t<r[e(399)]?s[e(407)]>=n[e(340)]*r[e(420)]&&(s[e(410)](n),s[e(395)](n,s)):t<r[e(323)]?(s[e(410)](n),s.onDecideSubrayCreation(n,s)):(s[e(407)]<=r.vanishingTimeFactor+n[e(327)]*(1-r[e(368)])&&s[e(410)](n),s[e(395)](n,s)))}))}[T(304)](){const t=T;return this.subrays[this[t(390)]++]}[T(383)](t,i){const s=T;t[s(315)][s(343)](i[s(453)]),t[s(329)][s(343)](i[s(355)]),t.up0[s(343)](i[s(354)]),t[s(384)][s(343)](i[s(384)]),t[s(401)]=i[s(401)],t.radius1=i[s(438)],t[s(341)]=i.birthTime,t[s(440)]=i[s(440)],t[s(351)]=i.timeScale,t[s(408)]=i[s(408)],t[s(387)]=i[s(387)],t[s(420)]=i[s(420)],t.vanishingTimeFactor=i[s(368)],t[s(318)]=this.maxIterations,t.seed=void 0!==i[s(434)]?i.noiseSeed:0,t[s(348)]=0}[T(436)](t,i){const s=T;this[s(372)]=t,this[s(431)]=i,this[s(390)]=0,this[s(383)](this[s(304)](),this[s(335)]);for(let n=0;n<this[s(390)];n++){const i=this[s(345)][n];this.currentSubray=i,this[s(378)][s(330)](i[s(467)]),i.endPropagationTime=o[s(357)](i[s(341)],i[s(440)],i.propagationTimeFactor),i[s(323)]=o[s(357)](i[s(440)],i[s(341)],1-i[s(368)]);const e=this.randomGenerator[s(445)];i[s(353)].set(e(),e(),e())[s(356)](1e3),i.linPos1.set(e(),e(),e())[s(356)](1e3),this.timeFraction=(t-i[s(341)])/(i[s(440)]-i[s(341)]),this[s(376)]=0,this[s(388)]=!0;const r=this[s(366)]();r[s(309)]=0,r.pos0[s(343)](i[s(315)]),r[s(329)].copy(i[s(329)]),r[s(353)][s(343)](i[s(353)]),r[s(307)].copy(i[s(307)]),r[s(354)][s(343)](i[s(354)]),r[s(384)][s(343)](i[s(384)]),r.radius0=i.radius0,r.radius1=i[s(438)],r[s(340)]=0,r[s(327)]=1,r[s(367)]=1-i.straightness,this[s(454)]=this.ramification*Math[s(339)](this[s(412)],i.recursion)/(1<<i.maxIterations),this[s(314)](r)}this[s(431)]=null,this[s(342)]=null}[T(314)](t){const i=T;if(t[i(309)]>=this.currentSubray[i(318)])return void this[i(431)](t);this.forwards[i(404)](t[i(329)],t[i(315)]);let s=this.forwards[i(308)]();s<1e-6&&(this[i(381)].set(0,0,.01),s=this[i(381)][i(308)]());const n=.5*(t[i(401)]+t[i(438)]),e=.5*(t[i(340)]+t[i(327)]),r=this.time*this[i(342)][i(351)]*Math[i(339)](2,t[i(309)]);this[i(317)][i(463)](t.pos0,t[i(329)],.5),this[i(444)].lerpVectors(t[i(353)],t[i(307)],.5);const o=this[i(444)];this[i(374)][i(433)](this[i(468)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(386)](o.x,o.y,o.z,r)),this.newPos[i(356)](t[i(367)]*s),this[i(374)].add(this[i(317)]);const a=this[i(366)]();a[i(315)][i(343)](t[i(315)]),a.pos1[i(343)](this[i(374)]),a[i(353)][i(343)](t[i(353)]),a[i(307)][i(343)](this[i(444)]),a[i(354)].copy(t[i(354)]),a[i(384)].copy(t.up1),a[i(401)]=t[i(401)],a[i(438)]=n,a.fraction0=t[i(340)],a.fraction1=e,a[i(367)]=t.positionVariationFactor*this[i(342)][i(408)],a[i(309)]=t[i(309)]+1;const h=this[i(366)]();h.pos0[i(343)](this.newPos),h.pos1[i(343)](t[i(329)]),h[i(353)][i(343)](this[i(444)]),h[i(307)][i(343)](t.linPos1),this[i(460)][i(432)](t[i(354)],this.forwards[i(365)]()),h[i(354)][i(432)](this.forwards,this.cross1)[i(365)](),h[i(384)][i(343)](t.up1),h[i(401)]=n,h.radius1=t.radius1,h.fraction0=e,h.fraction1=t.fraction1,h.positionVariationFactor=t[i(367)]*this[i(342)][i(408)],h[i(309)]=t[i(309)]+1,this[i(314)](a),this[i(314)](h)}[T(410)](t){const i=T;this.forwardsFill[i(404)](t.pos1,t[i(315)])[i(365)](),this[i(388)]&&(this[i(326)](t[i(315)],t[i(354)],this[i(425)],t[i(401)],0),this[i(388)]=!1),this[i(326)](t[i(329)],t[i(354)],this.forwardsFill,t.radius1,t[i(327)]),this[i(443)]()}createTriangleVerticesWithoutUVs(t,i,s,n){const e=T;this.side[e(432)](i,s)[e(356)](n*D.COS30DEG),this[e(358)][e(343)](i)[e(356)](-n*D.SIN30DEG);const r=this.vPos,o=this.vertices;r[e(343)](t).sub(this[e(429)])[e(324)](this.down),o[this[e(349)]++]=r.x,o[this[e(349)]++]=r.y,o[this[e(349)]++]=r.z,r[e(343)](t).add(this[e(429)]).add(this[e(358)]),o[this.currentCoordinate++]=r.x,o[this[e(349)]++]=r.y,o[this[e(349)]++]=r.z,r[e(343)](i).multiplyScalar(n)[e(324)](t),o[this[e(349)]++]=r.x,o[this[e(349)]++]=r.y,o[this[e(349)]++]=r.z,this[e(458)]+=3}[T(298)](t,i,s,n,e){const r=T;this.side.crossVectors(i,s)[r(356)](n*D[r(442)]),this[r(358)][r(343)](i)[r(356)](-n*D[r(449)]);const o=this[r(400)],a=this[r(306)],h=this.uvs;o[r(343)](t)[r(455)](this[r(429)])[r(324)](this[r(358)]),a[this[r(349)]++]=o.x,a[this[r(349)]++]=o.y,a[this[r(349)]++]=o.z,h[this[r(409)]++]=e,h[this[r(409)]++]=0,o[r(343)](t)[r(324)](this.side)[r(324)](this.down),a[this[r(349)]++]=o.x,a[this[r(349)]++]=o.y,a[this[r(349)]++]=o.z,h[this[r(409)]++]=e,h[this[r(409)]++]=.5,o[r(343)](i)[r(356)](n).add(t),a[this[r(349)]++]=o.x,a[this[r(349)]++]=o.y,a[this[r(349)]++]=o.z,h[this[r(409)]++]=e,h[this[r(409)]++]=1,this[r(458)]+=3}createPrismFaces(t){const i=T,s=this[i(360)];t=this.currentVertex-6,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+2,s[this[i(380)]++]=t+5,s[this.currentIndex++]=t+1,s[this[i(380)]++]=t+5,s[this[i(380)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(380)]++]=t+1,s[this[i(380)]++]=t+4,s[this[i(380)]++]=t+0,s[this[i(380)]++]=t+4,s[this.currentIndex++]=t+3,s[this[i(380)]++]=t+2,s[this[i(380)]++]=t+0,s[this[i(380)]++]=t+3,s[this[i(380)]++]=t+2,s[this[i(380)]++]=t+3,s[this.currentIndex++]=t+5}createDefaultSubrayCreationCallbacks(){const t=T,i=this[t(378)][t(445)];this.onDecideSubrayCreation=function(s,n){const e=t,r=n[e(342)],a=n[e(335)].subrayPeriod,h=n.rayParameters[e(466)],c=n[e(335)][e(371)]&&0==r.recursion?-i()*a:o[e(357)](r[e(341)],r[e(399)],s[e(340)])-i()*a,u=n[e(372)]-c,l=Math[e(446)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n[e(454)]),r[e(348)]<n[e(439)]&&n.numSubrays<n[e(464)]&&i()<p){const t=n[e(304)](),o=n[e(378)][e(456)]();t[e(467)]=d,n[e(378)][e(330)](d),t[e(348)]=r[e(348)]+1,t[e(318)]=Math[e(338)](1,r.maxIterations-1),t[e(353)][e(433)](i(),i(),i())[e(356)](1e3),t[e(307)][e(433)](i(),i(),i())[e(356)](1e3),t[e(354)][e(343)](r[e(354)]),t.up1[e(343)](r[e(384)]),t[e(401)]=s.radius0*n[e(335)][e(406)],t[e(438)]=Math[e(382)](n.rayParameters[e(437)],s[e(438)]*n[e(335)][e(403)]),t.birthTime=c+l*a,t[e(440)]=t[e(341)]+a*h,!n[e(335)][e(371)]&&0==r[e(348)]&&(t[e(341)]=Math[e(338)](t[e(341)],r[e(341)]),t[e(440)]=Math[e(382)](t[e(440)],r[e(440)])),t[e(351)]=2*r[e(351)],t.roughness=r[e(408)],t[e(387)]=r.straightness,t[e(420)]=r[e(420)],t[e(368)]=r[e(368)],n[e(417)](s,r,t,n),n[e(378)][e(330)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(417)]=function(i,s,n,e){e[t(385)](i,s,n,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const d=t;h[d(315)][d(343)](s[d(315)]),n.subVectors(o[d(329)],o.pos0),e.copy(n).normalize(),n[d(356)](s[d(340)]+(1-s[d(340)])*(i()*c));const p=n[d(308)]();r[d(432)](o[d(354)],e);const f=2*Math.PI*i();r[d(356)](Math.cos(f)),a[d(343)](o[d(354)])[d(356)](Math.sin(f)),h[d(329)][d(343)](r)[d(324)](a)[d(356)](p*u*(l+i()*(1-l))).add(n)[d(324)](o[d(315)])},this[t(385)]=function(s,o,h,c,u,l){const d=t;h[d(315)][d(343)](s.pos0),n[d(404)](o.pos1,o[d(315)]),e.copy(n)[d(365)](),n[d(356)](s[d(340)]+(1-s[d(340)])*((2*i()-1)*c));const p=n.length();r[d(432)](o[d(354)],e);const f=2*Math.PI*i();r[d(356)](Math[d(301)](f)),a[d(343)](o[d(354)])[d(356)](Math[d(462)](f)),h[d(329)][d(343)](r).add(a).multiplyScalar(p*u*(l+i()*(1-l)))[d(324)](n).add(o[d(315)])}}[T(295)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(447)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(366)](){const t=T;return this[t(334)][this[t(376)]++]}[T(343)](t){const i=T;return super[i(343)](t),this[i(319)](D[i(450)]({},t[i(335)])),this}[T(364)](){const t=T;return new(this[t(414)])(D[t(450)]({},this[t(335)]))}}function F(){const t=["floor","createSegment","state","SIN30DEG","copyParameters","type","prototype","sourceOffset","subrayProbability","sub","getSeed","push","currentVertex","warn","cross1","array","sin","lerpVectors","maxSubrays","RAY_STEADY","subrayDutyCycle","seed","simplexX","while (true) {}","uvsAttribute","createSubray","createDefaultSubrayCreationCallbacks","ramification","createTriangleVerticesWithUVs","6MoAyqk","toString","cos",'{}.constructor("return this")( )',"isStatic","addNewSubray","3214989IuLixL","vertices","linPos1","length","iteration","simplexY","1524415BSKWge","needsUpdate","index","fractalRayRecursive","pos0","createRandomGenerator","middlePos","maxIterations","init","return (function() ","test","RAY_PROPAGATING","beginVanishingTime","add","positionAttribute","currentCreateTriangleVertices","fraction1","ceil","pos1","setSeed","counter","input","call","raySegments","rayParameters","setIndex","12tdHutg","max","pow","fraction0","birthTime","currentSubray","copy","currentSeed","subrays","247974nsfVjq","apply","recursion","currentCoordinate","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","timeScale","RAY_INITIALIZED","linPos0","up0","destOffset","multiplyScalar","lerp","down","drawRange","indices","bind","RAY_EXTINGUISHED","2TGZnfV","clone","normalize","getNewSegment","positionVariationFactor","vanishingTimeFactor","createMesh","table","isEternal","time","uvs","newPos","error","currentSegmentIndex","usage","randomGenerator","console","currentIndex","forwards","min","initSubray","up1","subrayCylinderPosition","simplexZ","straightness","isInitialSegment","2550905ANEkom","numSubrays","RAY_UNBORN","maxRaySegments","chain","visible","onDecideSubrayCreation","subrayPeriod","10lHWGpo","stateObject","endPropagationTime","vPos","radius0","string","radius1Factor","subVectors","186896PiApCr","radius0Factor","timeFraction","roughness","currentUVCoordinate","createPrism","position","recursionProbability","5821519wKTHwU","constructor","info","RAY_VANISHING","onSubrayCreation","gger","isLightningStrike","propagationTimeFactor","update","seedGenerator","updateMesh","generateUVs","forwardsFill","action","fillMesh","log","side","71142eMEhWQ","currentSegmentCallback","crossVectors","set","noiseSeed","exception","fractalRay","minRadius","radius1","maxSubrayRecursion","deathTime","debu","COS30DEG","createPrismFaces","middleLinPos","random"];return(F=function(){return t})()}function R(t){function i(t){const s=A;if(typeof t===s(402))return function(t){}.constructor(s(469))[s(347)](s(331));1!==(""+t/t)[s(308)]||t%20==0?function(){return!0}[s(414)]("debu"+s(418))[s(333)](s(426)):function(){return!1}[s(414)](s(441)+"gger")[s(347)](s(398)),i(++t)}try{if(t)return i;i(0)}catch(s){}}D[T(352)]=0,D[T(391)]=1,D[T(322)]=2,D.RAY_STEADY=3,D[T(416)]=4,D.RAY_EXTINGUISHED=5,D[T(442)]=Math.cos(30*Math.PI/180),D[T(449)]=Math[T(462)](30*Math.PI/180);const z=C;function C(t,i){const s=H();return(C=function(t,i){return s[t-=300]})(t,i)}function H(){const t=["1265481KnGOPa","chain","nextLightningTime","set","__proto__","3075180hjOzIO","maxLightnings","114uiDhIV","birthTime","lerp","lightningMinPeriod","constructor","size","random","stormParams","977361wUaATr","call","maxHeight","clone","length","noiseSeed","rayParameters","isLightningStorm","lightningsMeshes","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","24isSIEa","info","lightningMinDuration","push","add","test","onLightningDown","lightningMaterial","getNextLightningTime","copy","lightningParameters","toString","onRayPosition","96zXVOxW","16244ZFpEdn","deadLightningsMeshes","counter","trace","minHeight","isEternal","function *\\( *\\)","debu","inited","2388bnjzVF","console","deathTime","warn","lightningMaxPeriod","update","init","sourceOffset","geometry","7215JxcrUU","2160103LDVqzz","copyParameters","destOffset","RAY_PROPAGATING","exception","bind","maxSlope","pop",'{}.constructor("return this")( )',"state","lightningMaxDuration","4232CHfBiC","string","apply","gger","10aMMAAu","while (true) {}"];return(H=function(){return t})()}!function(t,i){const s=C,n=H();for(;;)try{if(303184===parseInt(s(370))/1*(-parseInt(s(339))/2)+-parseInt(s(307))/3*(-parseInt(s(340))/4)+-parseInt(s(358))/5*(-parseInt(s(349))/6)+parseInt(s(315))/7+parseInt(s(326))/8*(-parseInt(s(300))/9)+parseInt(s(374))/10*(-parseInt(s(359))/11)+parseInt(s(305))/12)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(372)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){E(this,(function(){const t=C,i=new RegExp(t(346)),s=new RegExp(t(325),"i"),n=L(t(355));i[t(331)](n+t(301))&&s[t(331)](n+"input")?L():n("0")}))()}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();G(void 0,(function(){const t=C,i=function(){const t=C;let i;try{i=Function("return (function() "+t(367)+");")()}catch(s){i=window}return i}(),s=i[t(350)]=i[t(350)]||{},n=["log",t(352),t(327),t(324),t(363),"table",t(343)];for(let e=0;e<n.length;e++){const i=G[t(311)].prototype[t(364)](G),r=n[e],o=s[r]||i;i[t(304)]=G[t(364)](G),i[t(337)]=o[t(337)][t(364)](o),s[r]=i}}))();class U extends a{constructor(t={}){const i=C;super(),this[i(322)]=!0,this[i(314)]=t,t.size=void 0!==t[i(312)]?t[i(312)]:1e3,t[i(344)]=void 0!==t[i(344)]?t[i(344)]:80,t.maxHeight=void 0!==t.maxHeight?t[i(317)]:100,t[i(365)]=void 0!==t[i(365)]?t[i(365)]:1.1,t[i(306)]=void 0!==t[i(306)]?t[i(306)]:3,t[i(310)]=void 0!==t[i(310)]?t[i(310)]:3,t[i(353)]=void 0!==t.lightningMaxPeriod?t[i(353)]:7,t.lightningMinDuration=void 0!==t[i(328)]?t[i(328)]:1,t.lightningMaxDuration=void 0!==t[i(369)]?t[i(369)]:2.5,this[i(336)]=D.copyParameters(t[i(336)],t[i(336)]),this[i(336)][i(345)]=!1,this.lightningMaterial=void 0!==t.lightningMaterial?t[i(333)]:new h({color:11599871}),void 0!==t[i(338)]?this[i(338)]=t.onRayPosition:this[i(338)]=function(s,n){const e=i;n[e(303)]((Math[e(313)]()-.5)*t[e(312)],0,(Math[e(313)]()-.5)*t[e(312)]);const r=o[e(309)](t[e(344)],t[e(317)],Math[e(313)]());s.set(t[e(365)]*(2*Math[e(313)]()-1),1,t.maxSlope*(2*Math[e(313)]()-1)).multiplyScalar(r)[e(330)](n)},this.onLightningDown=t[i(332)],this[i(348)]=!1,this[i(302)]=0,this[i(323)]=[],this[i(341)]=[];for(let s=0;s<this[i(314)][i(306)];s++){const t=new D(D[i(360)]({},this.lightningParameters)),s=new c(t,this[i(333)]);this.deadLightningsMeshes[i(329)](s)}}update(t){const i=C;if(!this[i(348)]&&(this[i(302)]=this[i(334)](t)*Math[i(313)](),this[i(348)]=!0),t>=this[i(302)]){const s=this.deadLightningsMeshes[i(366)]();if(s){const n=D[i(360)](s[i(357)][i(321)],this[i(336)]);n[i(308)]=t,n[i(351)]=t+o.lerp(this[i(314)][i(328)],this[i(314)][i(369)],Math[i(313)]()),this.onRayPosition(n[i(356)],n[i(361)]),n[i(320)]=Math[i(313)](),this[i(330)](s),this[i(323)].push(s)}this[i(302)]=this[i(334)](t)}let s=0,n=this[i(323)][i(319)];for(;s<n;){const e=this[i(323)][s],r=e.geometry,o=r[i(368)];r[i(354)](t),o===D[i(362)]&&r[i(368)]>o&&this[i(332)]&&this[i(332)](r),r.state===D.RAY_EXTINGUISHED?(this[i(323)].splice(this[i(323)].indexOf(e),1),this.deadLightningsMeshes[i(329)](e),this.remove(e),n--):s++}}getNextLightningTime(t){const i=C;return t+o[i(309)](this[i(314)][i(310)],this[i(314)][i(353)],Math[i(313)]())/(this.stormParams[i(306)]+1)}[z(335)](t,i){const s=z;return super[s(335)](t,i),this.stormParams[s(312)]=t[s(314)][s(312)],this[s(314)][s(344)]=t[s(314)].minHeight,this[s(314)].maxHeight=t[s(314)][s(317)],this[s(314)][s(365)]=t[s(314)][s(365)],this[s(314)].maxLightnings=t.stormParams[s(306)],this.stormParams[s(310)]=t[s(314)].lightningMinPeriod,this[s(314)][s(353)]=t[s(314)][s(353)],this[s(314)][s(328)]=t[s(314)][s(328)],this[s(314)].lightningMaxDuration=t.stormParams.lightningMaxDuration,this[s(336)]=D[s(360)]({},t[s(336)]),this.lightningMaterial=t[s(314)][s(333)],this[s(332)]=t[s(332)],this}[z(318)](){const t=z;return new(this[t(311)])(this[t(314)])[t(335)](this)}}function L(t){function i(t){const s=C;if(typeof t===s(371))return function(t){}.constructor(s(375))[s(372)](s(342));1!==(""+t/t)[s(319)]||t%20==0?function(){return!0}[s(311)](s(347)+"gger")[s(316)]("action"):function(){return!1}[s(311)](s(347)+s(373))[s(372)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const O=$;!function(t,i){const s=$,n=Z();for(;;)try{if(600157===parseInt(s(485))/1+-parseInt(s(466))/2+parseInt(s(443))/3+parseInt(s(454))/4+-parseInt(s(490))/5+-parseInt(s(478))/6*(-parseInt(s(438))/7)+-parseInt(s(437))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[$(444)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){k(this,(function(){const t=$,i=new RegExp(t(474)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=B(t(436));i[t(480)](n+t(491))&&s[t(480)](n+t(463))?B():n("0")}))()}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[$(444)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();N(void 0,(function(){const t=$,i=function(){const t=$;let i;try{i=Function(t(457)+t(455)+");")()}catch(s){i=window}return i}(),s=i[t(488)]=i[t(488)]||{},n=[t(439),"warn",t(449),"error",t(470),t(475),t(468)];for(let e=0;e<n[t(451)];e++){const i=N[t(469)][t(465)][t(467)](N),r=n[e],o=s[r]||i;i[t(441)]=N[t(467)](N),i[t(450)]=o.toString[t(467)](o),s[r]=i}}))();const Y=[O(445)];function Z(){const t=["1725857jUcMdI","log","size","__proto__","radius1","3472572SIaMIg","apply","object","straightness","primitive","color","info","toString","length","add","sub","1301540FGzFMa",'{}.constructor("return this")( )',"action","return (function() ","gger","counter","Vector3","minHeight","set","input","multiplyScalar","prototype","259072UXFdVI","bind","trace","constructor","exception","rayParameters","dot","while (true) {}","function *\\( *\\)","table","update","sourceOffset","6ZekISP","call","test","lightStorm","subrayDutyCycle","pos1","#b0ffff","358677nkKyZu","maxLightnings","copy","console","timeScale","5494835BfSwIq","chain","debu","radius0","roughness","maxHeight","init","2075816YdwDEb"];return(Z=function(){return t})()}function $(t,i){const s=Z();return($=function(t,i){return s[t-=435]})(t,i)}const W=g({__name:O(481),props:{color:{default:O(484)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,s=t,n=new u(s[i(448)]),e=new h({color:n}),r=new(l[i(460)])(0,-1,0);let o=0;const a=new(l[i(460)]),c=new(l[i(460)]),p={roughness:s[i(494)],straightness:s[i(446)],radius0:s[i(493)],radius1:s[i(442)],timeScale:s[i(489)],subrayPeriod:s.subrayPeriod,subrayDutyCycle:s[i(482)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const h=i;e.subrayConePosition(t,s,n,.6,.6,.5),o=e[h(471)][h(477)].y,a.subVectors(n[h(483)],e.rayParameters[h(477)]);const u=r[h(472)](a);c[h(487)](r)[h(464)](u),a[h(453)](c);const l=u/o>.5?o/u:1;c[h(464)](l),a[h(452)](c),n[h(483)].addVectors(a,e[h(471)].sourceOffset)}},f=new U({size:s.size,minHeight:s[i(461)],maxHeight:s[i(435)],maxSlope:.6,maxLightnings:s[i(486)],lightningParameters:p,lightningMaterial:e});y((()=>{const t=i,n=f.stormParams;n[t(440)]=s.size,n.minHeight=s.minHeight,n[t(435)]=s[t(435)],e.color[t(462)](s[t(448)]),p[t(494)]=s[t(494)],p[t(446)]=s[t(446)],p[t(493)]=s[t(493)],p.radius1=s.radius1,p[t(489)]=s.timeScale}));const{onLoop:m}=d();return m((({elapsed:t})=>{f[i(476)](t)})),(t,s)=>{const n=i;return b(),v(n(447),{object:w(f),renderOrder:9999},null,8,Y)}}});function B(t){function i(t){const s=$;if("string"==typeof t)return function(t){}[s(469)](s(473))[s(444)](s(459));1!==(""+t/t).length||t%20==0?function(){return!0}[s(469)](s(492)+s(458))[s(479)](s(456)):function(){return!1}[s(469)]("debu"+s(458))[s(444)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=q,n=Q();for(;;)try{if(757060===parseInt(s(475))/1*(-parseInt(s(486))/2)+-parseInt(s(459))/3+parseInt(s(482))/4+-parseInt(s(481))/5+-parseInt(s(466))/6+-parseInt(s(492))/7+parseInt(s(471))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(490)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){K(this,(function(){const t=q,i=new RegExp(t(484)),s=new RegExp(t(491),"i"),n=tt(t(498));i[t(469)](n+t(479))&&s[t(469)](n+t(495))?tt():n("0")}))()}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(490)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function q(t,i){const s=Q();return(q=function(t,i){return s[t-=453]})(t,i)}function Q(){const t=["maxHeight","粗糙度","radius0","console","gger","8185704BDbdmW",'{}.constructor("return this")( )',"length","test","toString","39592440IKGUMK","straightness","trace","__proto__","1307gzHbDN","#92399e","log","radius1","chain","#ffbde7","5624380ooVzwm","3158392DcUhJR","while (true) {}","function *\\( *\\)","stateObject","2012FQbMAI","minHeight","#6f6f6f","value","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1744148IhPhaC","color","端部半径","input","warn","debu","init","info","constructor","bind","table","action","timeScale","2785281hOchiQ","string"];return(Q=function(){return t})()}X(void 0,(function(){const t=q;let i;try{i=Function("return (function() "+t(467)+");")()}catch(e){i=window}const s=i[t(464)]=i.console||{},n=[t(477),t(496),t(453),"error","exception",t(456),t(473)];for(let r=0;r<n[t(468)];r++){const i=X[t(454)].prototype[t(455)](X),e=n[r],o=s[e]||i;i[t(474)]=X[t(455)](X),i[t(470)]=o[t(470)].bind(o),s[e]=i}}))();const J=g({__name:"lightningStorm",setup(i){const s=q,n=x({cellSize:60,cellThickness:1,cellColor:s(488),sectionColor:s(476),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(480),roughness:{label:s(462),value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:s(494),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const p=s;return b(),v(P,null,[S(t,{showAxesHelper:!1,showGridHelper:!1},{ability:I((()=>[S(W,{minHeight:w(e).value,maxHeight:w(r)[p(489)],color:w(o).value,roughness:w(a)[p(489)],straightness:w(h).value,radius0:w(c)[p(489)],radius1:w(u).value,timeScale:w(l).value},null,8,[p(487),p(461),p(493),"roughness",p(472),p(463),p(478),p(458)]),S(w(M),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),S(w(f))],64)}}});function tt(t){function i(t){const s=q;if(typeof t===s(460))return function(t){}[s(454)](s(483))[s(490)]("counter");1!==(""+t/t)[s(468)]||t%20==0?function(){return!0}[s(454)](s(497)+"gger").call(s(457)):function(){return!1}[s(454)]("debu"+s(465))[s(490)](s(485)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{J as default};

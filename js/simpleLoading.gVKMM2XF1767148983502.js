import{importShared as l}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{_l as w,Kk as C,Qz as y}from"./index.DTe2qqjO1767148983502.js";import{instance as u}from"./Resource.DwxffO9V1767148983502.js";import{loading$2 as b}from"./generalFont.vue_vue_type_script_setup_true_lang.Cx7Vff0m1767148983502.js";import"./default.vue_vue_type_script_setup_true_lang.Bjy6WD1C1767148983502.js";import"./three-mesh-ui.module.Cv5lk1vQ1767148983502.js";import"./domPanel.vue_vue_type_style_index_0_lang.DqrQKbSz1767148983502.js";const{defineComponent:L}=await l("vue"),{unref:N,openBlock:z,createElementBlock:E}=await l("vue"),S=["object"],{watch:F}=await l("vue"),P=.2,V=L({__name:"airplane",props:{planet:{}},setup(c){const r=c,{scene:o}=u.getItem("airplane.gltf"),e=o;e.rotation.set(0,Math.PI,0),o.traverse(n=>{n.isMesh&&(n.castShadow=!0)}),e.updateMatrixWorld();const{onBeforeRender:s}=w();F(()=>r.planet,n=>{if(!n)return;n.geometry.computeBoundingSphere();const a=Math.abs(n.geometry.boundingSphere?.radius|1);e.position.set(a,0,0),e.lookAt(n.position)});let t=0;return s(({delta:n})=>{if(!e||!r.planet)return;const a=Math.abs(r.planet.geometry.boundingSphere.radius)+.5;t+=n*P;const h=a*Math.cos(t),i=a*Math.sin(t);e.position.x=h,e.position.z=i,e.rotation.z=-Math.PI/2,e.rotation.y=-t,e.updateMatrixWorld()}),(n,a)=>(z(),E("primitive",{object:N(e)},null,8,S))}}),{defineComponent:T}=await l("vue"),{unref:I,openBlock:j,createElementBlock:W}=await l("vue"),A=["object"],{watch:R}=await l("vue"),G=T({__name:"cloud",props:{planet:{}},setup(c){const r=c,{scene:o}=u.getItem("cloud.gltf"),e=o.children[0];e.castShadow=!0;function s(i,p){const d=Math.random()*(p-i)+i;return Math.random()<.5?-d:d}e.position.set(s(-8,8),s(.5,1),s(-8,8));const t=s(.5,1);e.scale.set(t,t,t),e.updateMatrixWorld(),R(()=>r.planet,i=>{i&&(e.lookAt(i.position),e.updateMatrixWorld())});const{onBeforeRender:n}=w();let a=s(-1,1)*Math.PI;const h=Math.random()/10;return n(({delta:i})=>{if(!e)return;const p=Math.abs(r.planet.geometry.boundingSphere.radius-.5);a+=i*h;const d=p*Math.cos(a),x=p*Math.sin(a);e.position.x=d,e.position.z=x,e.rotation.y=-a,e.lookAt(r.planet.position),e.updateMatrixWorld()}),(i,p)=>(j(),W("primitive",{object:I(o),"cast-shadow":""},null,8,A))}}),{defineComponent:D}=await l("vue"),{unref:g,createElementVNode:K,createVNode:k,renderList:Q,Fragment:B,openBlock:v,createElementBlock:M}=await l("vue"),q=["object"],H=D({__name:"planet",setup(c){const{nodes:r}=u.getItem("planet.gltf"),o=r.Planet,e=r.Icosphere;o.traverse(t=>{t.isMesh&&(t.receiveShadow=!0)});const{onBeforeRender:s}=w();return s(({delta:t})=>{o&&(o.rotation.y+=t*.04,o.rotation.z+=t*.02,o.rotation.x+=t*.05,o.updateMatrixWorld())}),(t,n)=>(v(),M(B,null,[K("primitive",{object:g(o)},null,8,q),k(V,{planet:g(e)},null,8,["planet"]),(v(),M(B,null,Q([1,2,3,4,5,6,7,8,9],a=>k(G,{key:a,planet:g(e)},null,8,["planet"])),64))],64))}}),{defineComponent:J}=await l("vue"),{unref:m,createVNode:_,createElementVNode:f,openBlock:$,createBlock:O,createCommentVNode:U,resolveComponent:X,mergeProps:Y,withCtx:Z,Fragment:ee,createElementBlock:te}=await l("vue"),ce=J({__name:"simpleLoading",setup(c){const r={alpha:!1,clearColor:"#11101B",shadows:!0,useLegacyLights:!0};return u.loadResources([{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/planet.gltf"},{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/airplane.gltf"},{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/cloud.gltf"}]),(o,e)=>{const s=X("TresCanvas");return $(),te(ee,null,[_(m(b),{useResourceManager:""}),_(s,Y(r,{"window-size":""}),{default:Z(()=>[e[0]||(e[0]=f("TresPerspectiveCamera",{position:[0,.5,3],fov:75,near:.1,far:1e3},null,-1)),_(m(C)),e[1]||(e[1]=f("TresAmbientLight",{color:"#484068",intensity:1},null,-1)),e[2]||(e[2]=f("TresPointLight",{color:"#1BFFEF",position:[0,0,-8],intensity:80,"cast-shadow":""},null,-1)),e[3]||(e[3]=f("TresDirectionalLight",{position:[0,2,4],intensity:3,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048},null,-1)),_(m(y),{radius:50,depth:50,count:5e3,size:.3,"size-attenuation":!0}),m(u).hasAllFinished.value?($(),O(H,{key:0})):U("",!0)]),_:1},16)],64)}}});export{ce as default};

import{A as e}from"./@amap.fjyZdsU91764662849723.js";import{t as a,d as t,q as o,G as n,o as r,a3 as l}from"./@vue.D9fSGD371764662849723.js";import{_ as s}from"./@fesjs.CvuNqojD1764662849723.js";import{F as p}from"./@tresjs.DeDzA3xI1764662849723.js";import{d as m}from"./pinia.D80KxIf61764662849723.js";const c=m("mapStore",()=>({aMap:a(null),mapHandle:a(null),cameraState:a(null)})),u={id:"mapContainer"},d=s(t({__name:"mapContainer",props:{center:{default:[0,0]},zoom:{default:14},pitch:{default:50},mapStyle:{default:"normal"}},setup(a){const t=a,l=c();let s=null;return o(async()=>{await e.load({key:"0c7222955570f1b434c4adfcc1e955e8",version:"2.0"}).then(e=>{s=new e.Map("mapContainer",{center:t.center,zooms:[1,20],viewMode:"3D",zoom:t.zoom,pitch:t.pitch,mapStyle:"amap://styles/"+t.mapStyle}),s.on("click",e=>{const a=`您在 [ ${e.lnglat.getLng()},${e.lnglat.getLat()} ] 的位置单击了地图！`;console.log(a)}),l.$patch({aMap:e}),l.$patch({mapHandle:s})}).catch(e=>{console.log(e)})}),(e,a)=>(r(),n("div",u))}}),[["__scopeId","data-v-e1a7e2c4"]]),i={__name:"mergeTres",props:{center:{default:[0,0]}},setup(e){const a=e,{camera:t,scene:o,renderer:n}=p(),r=c();let s=null,m=null;return l(()=>{r.aMap&&(s=r.mapHandle.customCoords,m=new r.aMap.CustomLayer(n.domElement,{zIndex:10,render:()=>{n.resetState(),s.setCenter(a.center);const{near:e,far:l,fov:p,up:m,lookAt:c,position:u}=s.getCameraParams();t.value.near=e,t.value.far=l,t.value.fov=p,r.$patch({cameraState:{near:e,far:l,fov:p,position:u}}),t.value.position.set(...u),t.value.up.set(...m),t.value.lookAt(...c),t.value.updateProjectionMatrix(),n.render(o.value,t.value),n.resetState()},alwaysRender:!0}),r.mapHandle.add(m))}),(e,a)=>null}};export{i as _,d as m,c as u};

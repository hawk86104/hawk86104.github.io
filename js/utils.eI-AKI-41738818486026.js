import"./@fesjs.LLTzkpAZ1738818486026.js";import{_ as n}from"./jszip.8di41imu1738818486026.js";import{F as t}from"./file-saver.Iynj7dpP1738818486026.js";import{_ as e,aH as s}from"./three.WgQSjl1J1738818486026.js";const o=i;!function(n,t){const e=i,s=c();for(;;)try{if(921655===-parseInt(e(310))/1+parseInt(e(273))/2+-parseInt(e(233))/3*(-parseInt(e(321))/4)+-parseInt(e(318))/5*(-parseInt(e(286))/6)+parseInt(e(248))/7+parseInt(e(230))/8+-parseInt(e(305))/9*(parseInt(e(303))/10))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[i(244)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){r(this,(function(){const n=i,t=new RegExp(n(291)),e=new RegExp(n(269),"i"),s=b(n(287));t[n(241)](s+n(229))&&e.test(s+n(311))?b():s("0")}))()}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[i(244)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function i(n,t){const e=c();return(i=function(n,t){return e[n-=226]})(n,t)}function c(){const n=["async","test","image/jpeg","exception","apply","type","image/png",";base64,","11614407NbnbQO","constructor","action","geometries","data:image/gif;base64,","forEach","pop","uuid","url:images/","toString","data:image/webp;base64,","catch","debu","image/webp","setResponseType","startsWith","stateObject","enabled","application/octet-stream","split","FileLoader","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","files","scene","push","3554802mUBUrn","data:","image/gif",".json","toUpperCase","data:image/GIF;base64,","slice","data","Cache","console","endsWith","url:","log","5322qbHCBj","init","call","length","GIF","function *\\( *\\)","gger","result","data:image/","string","message","非标准文件：不存在 app.json","prototype","base64","__proto__","info","bind","230BxQPNH","PNG","1411173XBwzsL","data:image/png;base64,","data:image/jpeg;base64,","get","image/bmp","445896hMLVLg","input","config.zip","parse","then","name","folder","load","6055sMiNdT","stringify","error","1094196hIeuEX","toLowerCase","WEBP","url","file","return (function() ","blob","onloadend","chain","1516592XfqZOD","app.json","JPEG","3QRlwlD","substring","onerror","warn","images","loadAsync","url:geometries/"];return(c=function(){return n})()}async function u(n){const t=new s;return new Promise(((e,s)=>{const o=i;t.load(n,(n=>e(JSON[o(313)](n))),void 0,(n=>s(n)))}))}async function l(n){const t=new s;return new Promise(((e,s)=>{const r=i;t[r(262)](r(227)),t[r(317)](n,(t=>{const a=r,i=new FileReader;i[a(228)]=()=>{const t=a,s=function(n){const t=o,e=n[t(267)](".")[t(254)]()[t(322)]();return{jpg:t(242),jpeg:t(242),png:t(246),gif:t(275),bmp:t(309),webp:t(261)}[e]||t(266)}(n),r=i[t(293)][t(267)](",")[1];e(t(274)+s+t(247)+r)},i.onerror=n=>{s(n)},i.readAsDataURL(t)}),void 0,(n=>s(n)))}))}a(void 0,(function(){const n=i;let t;try{t=Function(n(226)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(282)]=t.console||{},s=[n(285),n(236),n(301),n(320),n(243),"table","trace"];for(let r=0;r<s[n(289)];r++){const t=a[n(249)][n(298)][n(302)](a),o=s[r],i=e[o]||t;t[n(300)]=a.bind(a),t.toString=i[n(257)][n(302)](i),e[o]=t}}))(),e[o(281)][o(265)]=!0;const f=t=>{const s=o,r=new(e[s(268)]);return r[s(262)](s(227)),new Promise(((e,o)=>{r[s(317)](t,(async t=>{e(await n.loadAsync(t))}),void 0,(n=>o(n)))}))},p=n=>{const t=o,e=n[t(234)](0,15),s=t(307),r=t(306),a=t(252),i=t(278),c=t(258);return s.startsWith(e)||"data:image/JPEG;base64,"[t(263)](e)?t(232):r[t(263)](e)||"data:image/PNG;base64,"[t(263)](e)?t(304):a[t(263)](e)||i[t(263)](e)?t(290):c[t(263)](e||"data:image/WEBP;base64,"[t(263)](e))?t(323):"Unknown"},g=e=>{const s=o,r=[];e[s(271)][s(251)]&&e[s(271)][s(251)][s(253)]((n=>{const t=s;"BufferGeometry"===n[t(245)]&&(r[t(272)]({uuid:n[t(255)],data:n[t(280)]}),n[t(280)]=t(239)+n.uuid+t(276))}));const a=[];e.scene[s(237)]&&e.scene.images[s(253)]((n=>{const t=s;n[t(324)]&&(a[t(272)]({uuid:n[t(255)],url:n[t(324)]}),n[t(324)].type?n[t(324)]=t(256)+n[t(255)]+"."+n[t(324)][t(245)]+t(276):n[t(324)]=t(256)+n[t(255)]+"."+p(n.url))}));const i=new n;if(r.length){const n=i[s(316)]("geometries");r.forEach((t=>{const e=s;n.file(t.uuid+".json",JSON[e(319)](t[e(280)]))}))}if(a[s(289)]){const n=i[s(316)]("images");a[s(253)]((t=>{const e=s;t[e(324)][e(245)]?n[e(325)](t.uuid+"."+t[e(324)].type+e(276),JSON.stringify(t[e(324)])):n[e(325)](t.uuid+"."+p(t[e(324)]),t[e(324)][e(267)](";base64,")[e(254)](),{base64:!0})}))}const c=JSON[s(319)](e);return i[s(325)](s(231),c),i.generateAsync({type:"blob"}).then((n=>{const e=s;t.saveAs(n,e(312))}))},d=(n,t,e)=>{const s=o;n[s(251)]<=0&&n[s(237)]<=0&&e(t)},m=(t,e)=>{const s=o;let r=null;return n[s(238)](t)[s(314)]((n=>{const t=s;n[t(270)][t(231)]?n.files[t(231)][t(240)]("string").then((s=>{var a,i;const c=t;r=JSON[c(313)](s);const u=(n=>{var t,e;const s=o,r={geometries:0,images:0};return null==(t=n[s(271)][s(251)])||t[s(253)]((n=>{const t=s;n[t(280)][t(263)](t(284))&&r[t(251)]++})),null==(e=n[s(271)][s(237)])||e[s(253)]((n=>{const t=s;n[t(324)][t(263)](t(284))&&r[t(237)]++})),r})(r);d(u,r,e),null==(a=r[c(271)].geometries)||a[c(253)]((t=>{const s=c;t[s(280)][s(263)](s(284))&&n[s(270)][t.data[s(279)](4)][s(240)](s(295))[s(314)]((n=>{const o=s;t[o(280)]=JSON[o(313)](n),u[o(251)]--,d(u,r,e)}))})),null==(i=r.scene[c(237)])||i[c(253)]((t=>{const s=c;if(t[s(324)].startsWith("url:")){const o=t.url[s(279)](4);o[s(283)](s(276))?n.files[o][s(240)](s(295))[s(314)]((n=>{const o=s;t.url=JSON[o(313)](n),u[o(237)]--,d(u,r,e)})):n.files[o][s(240)](s(299))[s(314)]((n=>{const a=s,i=o[a(267)]("."),c=i[i[a(289)]-1][a(277)]();t[a(324)]=a(294)+c+a(247)+n,u[a(237)]--,d(u,r,e)}))}}))})):console.error(t(297))}),(n=>{const e=s;console[e(320)](t[e(315)]+": "+n[e(296)])})),r};function b(n){function t(n){const e=i;if(typeof n===e(295))return function(n){}[e(249)]("while (true) {}")[e(244)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(249)](e(260)+e(292))[e(288)](e(250)):function(){return!1}[e(249)]("debu"+e(292)).apply(e(264)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{f as a,l as b,g as e,p as g,m as i,u as l};

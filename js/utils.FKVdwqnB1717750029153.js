import{az as l,bj as m,ay as c,aA as f,bk as d,aD as h,aL as i,at as b}from"./vendor.v0nfbpA-1717750029153.js";import{W as w}from"./Water2.46sDRLbw1717750029153.js";import{c as x,d as g,a as B}from"./ExtensionUtilities.62fF0iyK1717750029153.js";const y=(e,s=!1)=>{e.computeBoundingBox();const{max:o,min:t}=e.boundingBox;e.deleteAttribute("uv");const a=o.x-t.x,u=o.y-t.y,n=[];for(let r=0;r<e.attributes.position.count;r++)s?(n.push((e.attributes.position.getX(r)-(t.x+o.x)/2)/a),n.push((e.attributes.position.getY(r)-(t.y+o.y)/2)/u)):(n.push((e.attributes.position.getX(r)-t.x)/a),n.push((e.attributes.position.getY(r)-t.y)/u));const p=new Float32Array(n);e.setAttribute("uv",new l(p,2))},j=(e,s)=>new Promise((o,t)=>{m(e,{},{method:"get"}).then(a=>{s&&o(a[s]),o(a.features)}).catch(a=>{console.error(a),t(a)})}),M=e=>{const s=new THREE.Box3().setFromObject(e),o=new THREE.Vector3;s.getCenter(o),e.children.forEach(t=>{t.position.sub(o)}),e.position.copy(o.negate())},_=()=>{c.prototype.computeBoundsTree=x,c.prototype.disposeBoundsTree=g,f.prototype.raycast=B},A=async e=>{const s=await d(["./plugins/water/images/Water_1_M_Normal.jpg","./plugins/water/images/Water_2_M_Normal.jpg"]),o=e.geometry.clone();y(o),o.computeBoundsTree();const t=new w(o,{color:new h("#fff"),scale:20,flowDirection:new i(1,1),textureWidth:1024,textureHeight:1024,normalMap0:s[0],normalMap1:s[1]});return t.material.transparent=!0,t.material.depthWrite=!0,t.material.depthTest=!0,t.material.side=b,t.material.uniforms.config.value.w=20,t.material.uniforms.reflectivity.value=.46,t};function E(e){const s=[];for(let t=0;t<e.length;t++)s.push(new i(e[t].x,e[t].y));const o=new i;for(let t=0;t<s.length;t++)o.add(s[t]);o.divideScalar(s.length);for(let t=0;t<s.length;t++)s[t].sub(o);return{points:s,centerPoint:o}}export{M as a,E as g,_ as i,j as l,y as r,A as s};

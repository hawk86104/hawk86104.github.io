import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.XDmjp16t1723628107012.js";import{B as i,V as s,cl as n,az as e,N as r,h as o,ae as a,Y as h,q as c,C as u,a6 as l}from"./three.LOnTLfxo1723628107012.js";import{$ as p,D as d,i as m}from"./@tresjs.SUe87xao1723628107012.js";import{c as f}from"./simplex-noise.MycypUyu1723628107012.js";import{d as g,a1 as y,o as b,D as S,u as w,r as v,j as x,g as P,m as _,F as I}from"./@vue.9bHx4gg21723628107012.js";import"./index.KUg4qAlm1723628107012.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.oCEronFX1723628107012.js";import"./three-custom-shader-material.n4KbnW0V1723628107012.js";import"./object-hash.eRIADBNa1723628107012.js";import"./@amap.XsUkMUkF1723628107012.js";import"./jszip.TSgBnMkQ1723628107012.js";import"./glsl-tokenizer.ZmKauzU31723628107012.js";import"./glsl-token-string.Z6_i_sVZ1723628107012.js";import"./glsl-token-functions.0T11p6mD1723628107012.js";import"./tweakpane.yHWGBmom1723628107012.js";import"./@vueuse.t-c8gU4-1723628107012.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.MckyFGkF1723628107012.js";import"./all.three.608sn2Nq1723628107012.js";import"./oimophysics.x0jH7fze1723628107012.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.SFBs0Ad91723628107012.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.Kjdj4j4t1723628107012.js";import"./index.wzkl4CyW1723628107012.js";import"./three-stdlib.kNzZmNMy1723628107012.js";import"./@pmndrs.m3RZ2qRu1723628107012.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.d0Uigj7j1723628107012.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.KkZaaJuL1723628107012.js";const T=R;!function(t,i){const s=R,n=C();for(;;)try{if(385253===-parseInt(s(200))/1+-parseInt(s(339))/2*(-parseInt(s(212))/3)+parseInt(s(323))/4+parseInt(s(199))/5+-parseInt(s(307))/6*(parseInt(s(240))/7)+-parseInt(s(243))/8+parseInt(s(189))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){A(this,(function(){const t=R,i=new RegExp(t(202)),s=new RegExp(t(320),"i"),n=V(t(295));i.test(n+t(192))&&s[t(247)](n+t(343))?V():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(256)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function R(t,i){const s=C();return(R=function(t,i){return s[t-=186]})(t,i)}function C(){const t=["uvs","8kMwZSe","forwardsFill","timeFraction","minRadius","input","randomGenerator","iteration","isEternal","radius0","roughness","constructor","createTriangleVerticesWithUVs","createSubray","getNewSegment","toString","gger","createPrismFaces","sin","setIndex","birthTime","copy","exception","propagationTimeFactor","5558373TjJdom","array","pos1","chain","debu","generateUVs","currentSubray","position","vPos","RAY_EXTINGUISHED","2514045pwwkOy","179981HMOOSu","createDefaultSubrayCreationCallbacks","function *\\( *\\)","visible","random","currentSegmentCallback","RAY_UNBORN","onSubrayCreation","time","max","onDecideSubrayCreation","cos","257865OIkLey","cross1","pow","multiplyScalar","radius1Factor","side","COS30DEG","createMesh","noiseSeed","endPropagationTime","seedGenerator","length","addNewSubray","action","count","crossVectors","simplexX","timeScale","maxRaySegments","deathTime","ceil","currentIndex","forwards","createSegment","RAY_INITIALIZED","initSubray","sub","index","7nljuEE","vertices","table","5774864Thinzj","up1","updateMesh","isInitialSegment","test","counter","trace","subrayCylinderPosition","needsUpdate","console","raySegments","maxIterations","currentSegmentIndex","apply","RAY_STEADY","down","subrayPeriod","string","drawRange","subrayConePosition","fillMesh","currentSeed","indices","setSeed","currentCoordinate","numSubrays","beginVanishingTime","floor","newPos","type","setAttribute","rayParameters","state","positionAttribute","bind","currentVertex","radius0Factor","add","set","sourceOffset","while (true) {}","lerp","straightness","lerpVectors","log","linPos1","fractalRayRecursive","simplexY","currentCreateTriangleVertices","subVectors","createTriangleVerticesWithoutUVs","middleLinPos","init","normalize","recursion","subrayDutyCycle","RAY_VANISHING","return (function() ","createRandomGenerator","currentUVCoordinate","maxSubrayRecursion","ramification","seed","maxSubrays","3490452kwJojX","usage","recursionProbability","radius1","LightningStrike","isLightningStrike","subrays","SIN30DEG","up0","min","vanishingTimeFactor","uvsAttribute","getSeed","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"fraction0","1618432MCIqaL","warn","middlePos","subrayProbability","pos0","createPrism","positionVariationFactor","fraction1","clone","isStatic","copyParameters","__proto__","fractalRay","destOffset","linPos0"];return(C=function(){return t})()}j(void 0,(function(){const t=R,i=function(){const t=R;let i;try{i=Function(t(300)+t(321)+");")()}catch(s){i=window}return i}(),s=i[t(252)]=i.console||{},n=[t(287),t(324),"info","error",t(187),t(242),t(249)];for(let e=0;e<n[t(223)];e++){const i=j[t(349)].prototype[t(277)](j),r=n[e],o=s[r]||i;i[t(334)]=j[t(277)](j),i[t(353)]=o.toString[t(277)](o),s[r]=i}}))();class z extends i{constructor(t={}){const i=R;super(),this[i(312)]=!0,this[i(272)]=i(311),this[i(295)](z[i(333)](t,t)),this[i(219)]()}static createRandomGenerator(){const t=R,i=2053,s=[];for(let e=0;e<i;e++)s.push(Math[t(204)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(264)]];return n.currentSeed=(n[e(264)]+1)%i,r},getSeed:function(){return n[t(264)]/i},setSeed:function(s){n[t(264)]=Math.floor(s*i)%i}};return n}static[T(333)](t={},i={}){const n=T,e=function(s){return i===t?s:s[R(331)]()};return t[n(282)]=void 0!==i[n(282)]?e(i.sourceOffset):new s(0,100,0),t[n(336)]=void 0!==i[n(336)]?e(i[n(336)]):new s(0,0,0),t.timeScale=void 0!==i[n(229)]?i[n(229)]:1,t[n(348)]=void 0!==i[n(348)]?i[n(348)]:.9,t[n(285)]=void 0!==i.straightness?i.straightness:.7,t[n(315)]=void 0!==i.up0?e(i.up0):new s(0,0,1),t.up1=void 0!==i[n(244)]?e(i.up1):new s(0,0,1),t[n(347)]=void 0!==i[n(347)]?i[n(347)]:1,t[n(310)]=void 0!==i[n(310)]?i[n(310)]:1,t[n(279)]=void 0!==i[n(279)]?i[n(279)]:.5,t[n(216)]=void 0!==i[n(216)]?i[n(216)]:.2,t.minRadius=void 0!==i[n(342)]?i[n(342)]:.2,t[n(346)]=void 0!==i.isEternal?i.isEternal:void 0===i[n(358)]||void 0===i[n(231)],t[n(358)]=i[n(358)],t[n(231)]=i.deathTime,t.propagationTimeFactor=void 0!==i[n(188)]?i[n(188)]:.1,t[n(317)]=void 0!==i[n(317)]?i[n(317)]:.9,t[n(259)]=void 0!==i[n(259)]?i[n(259)]:4,t[n(298)]=void 0!==i[n(298)]?i[n(298)]:.6,t.maxIterations=void 0!==i[n(254)]?i[n(254)]:9,t[n(332)]=void 0!==i[n(332)]&&i[n(332)],t[n(304)]=void 0!==i[n(304)]?i[n(304)]:5,t.maxSubrayRecursion=void 0!==i[n(303)]?i[n(303)]:3,t[n(309)]=void 0!==i[n(309)]?i[n(309)]:.6,t[n(194)]=void 0!==i.generateUVs&&i[n(194)],t[n(344)]=i[n(344)],t[n(220)]=i.noiseSeed,t.onDecideSubrayCreation=i.onDecideSubrayCreation,t.onSubrayCreation=i[n(207)],t}update(t){const i=T;this.isStatic||(this.rayParameters.isEternal||this[i(274)][i(358)]<=t&&t<=this.rayParameters[i(231)]?(this[i(245)](t),t<this.subrays[0][i(221)]?this.state=z.RAY_PROPAGATING:t>this[i(313)][0][i(269)]?this[i(275)]=z[i(299)]:this[i(275)]=z[i(257)],this[i(203)]=!0):(this.visible=!1,t<this[i(274)].birthTime?this.state=z[i(206)]:this[i(275)]=z[i(198)]))}[T(295)](t){const i=T;this.rayParameters=t,this[i(254)]=void 0!==t[i(254)]?Math[i(270)](t[i(254)]):9,t[i(254)]=this.maxIterations,this.isStatic=void 0!==t.isStatic&&t.isStatic,t[i(332)]=this[i(332)],this[i(304)]=void 0!==t.ramification?Math.floor(t[i(304)]):5,t[i(304)]=this[i(304)],this[i(303)]=void 0!==t[i(303)]?Math[i(270)](t[i(303)]):3,t[i(303)]=this.maxSubrayRecursion,this[i(309)]=void 0!==t.recursionProbability?t[i(309)]:.6,t[i(309)]=this.recursionProbability,this[i(194)]=void 0!==t[i(194)]&&t[i(194)],t[i(194)]=this[i(194)],void 0!==t.randomGenerator?(this.randomGenerator=t[i(344)],this[i(222)]=t[i(344)],void 0!==t[i(220)]&&this[i(222)][i(266)](t[i(220)])):(this[i(344)]=z[i(301)](),this[i(222)]=Math),void 0!==t.onDecideSubrayCreation?this[i(210)]=t[i(210)]:(this[i(201)](),void 0!==t[i(207)]&&(this[i(207)]=t[i(207)])),this[i(275)]=z[i(236)],this[i(306)]=Math[i(232)](1+Math[i(214)](this[i(304)],Math.max(0,this[i(303)]-1))),t.maxSubrays=this.maxSubrays,this[i(230)]=2*(1<<this[i(254)]),this[i(313)]=[];for(let s=0;s<this[i(306)];s++)this[i(313)].push(this[i(351)]());this.raySegments=[];for(let s=0;s<this.maxRaySegments;s++)this[i(253)].push(this[i(235)]());this[i(208)]=0,this[i(341)]=0,this[i(205)]=null,this[i(291)]=this.generateUVs?this[i(350)]:this[i(293)],this[i(268)]=0,this[i(195)]=null,this[i(255)]=0,this[i(246)]=!1,this.subrayProbability=0,this[i(278)]=0,this[i(233)]=0,this[i(267)]=0,this[i(302)]=0,this[i(241)]=null,this[i(338)]=null,this[i(265)]=null,this[i(276)]=null,this[i(318)]=null,this[i(228)]=f(this.seedGenerator[i(204)]),this[i(290)]=f(this.seedGenerator[i(204)]),this.simplexZ=f(this.seedGenerator[i(204)]),this[i(234)]=new s,this.forwardsFill=new s,this[i(217)]=new s,this[i(258)]=new s,this[i(325)]=new s,this.middleLinPos=new s,this[i(271)]=new s,this[i(197)]=new s,this.cross1=new s}[T(219)](){const t=T,i=1<<this[t(254)],s=3*(i+1)*this[t(306)],o=18*i*this.maxSubrays;this.vertices=new Float32Array(3*s),this.indices=new Uint32Array(o),this[t(194)]&&(this.uvs=new Float32Array(2*s)),this[t(263)](0),this[t(357)](new n(this[t(265)],1)),this[t(276)]=new e(this[t(241)],3),this.setAttribute(t(196),this[t(276)]),this[t(194)]&&(this[t(318)]=new e(new Float32Array(this[t(338)]),2),this[t(273)]("uv",this.uvsAttribute)),!this[t(332)]&&(this[t(239)][t(308)]=r,this.positionAttribute[t(308)]=r,this[t(194)]&&(this[t(318)][t(308)]=r)),this[t(241)]=this.positionAttribute[t(190)],this[t(265)]=this.index[t(190)],this.generateUVs&&(this[t(338)]=this[t(318)][t(190)])}[T(245)](t){const i=T;this[i(263)](t),this[i(261)][i(226)]=this[i(233)],this[i(239)][i(251)]=!0,this.positionAttribute[i(251)]=!0,this[i(194)]&&(this[i(318)][i(251)]=!0)}[T(263)](t){const i=T,s=this;this.currentVertex=0,this.currentIndex=0,this[i(267)]=0,this[i(302)]=0,this[i(335)](t,(function(n){const e=i,r=s[e(195)];t<r.birthTime||(this[e(274)][e(346)]&&0==s.currentSubray.recursion?(s[e(328)](n),s[e(210)](n,s)):t<r.endPropagationTime?s[e(341)]>=n[e(322)]*r[e(188)]&&(s[e(328)](n),s[e(210)](n,s)):t<r[e(269)]?(s.createPrism(n),s[e(210)](n,s)):(s[e(341)]<=r[e(317)]+n[e(330)]*(1-r[e(317)])&&s.createPrism(n),s[e(210)](n,s)))}))}[T(224)](){const t=T;return this[t(313)][this[t(268)]++]}[T(237)](t,i){const s=T;t[s(327)][s(186)](i.sourceOffset),t.pos1[s(186)](i[s(336)]),t[s(315)][s(186)](i.up0),t.up1.copy(i.up1),t[s(347)]=i[s(347)],t[s(310)]=i[s(310)],t[s(358)]=i[s(358)],t[s(231)]=i.deathTime,t.timeScale=i[s(229)],t.roughness=i[s(348)],t[s(285)]=i[s(285)],t.propagationTimeFactor=i[s(188)],t[s(317)]=i.vanishingTimeFactor,t[s(254)]=this[s(254)],t.seed=void 0!==i.noiseSeed?i[s(220)]:0,t[s(297)]=0}fractalRay(t,i){const s=T;this[s(208)]=t,this[s(205)]=i,this.numSubrays=0,this.initSubray(this[s(224)](),this.rayParameters);for(let n=0;n<this.numSubrays;n++){const i=this[s(313)][n];this.currentSubray=i,this[s(344)][s(266)](i.seed),i[s(221)]=o[s(284)](i[s(358)],i.deathTime,i[s(188)]),i[s(269)]=o.lerp(i[s(231)],i[s(358)],1-i[s(317)]);const e=this.randomGenerator[s(204)];i.linPos0.set(e(),e(),e())[s(215)](1e3),i[s(288)][s(281)](e(),e(),e())[s(215)](1e3),this[s(341)]=(t-i[s(358)])/(i.deathTime-i.birthTime),this[s(255)]=0,this[s(246)]=!0;const r=this[s(352)]();r[s(345)]=0,r[s(327)].copy(i[s(327)]),r[s(191)][s(186)](i[s(191)]),r.linPos0[s(186)](i[s(337)]),r[s(288)][s(186)](i[s(288)]),r[s(315)][s(186)](i[s(315)]),r[s(244)].copy(i[s(244)]),r[s(347)]=i.radius0,r.radius1=i[s(310)],r[s(322)]=0,r[s(330)]=1,r[s(329)]=1-i.straightness,this[s(326)]=this.ramification*Math[s(214)](this[s(309)],i[s(297)])/(1<<i[s(254)]),this[s(289)](r)}this.currentSegmentCallback=null,this[s(195)]=null}fractalRayRecursive(t){const i=T;if(t[i(345)]>=this[i(195)][i(254)])return void this[i(205)](t);this[i(234)].subVectors(t[i(191)],t.pos0);let s=this.forwards[i(223)]();s<1e-6&&(this[i(234)][i(281)](0,0,.01),s=this.forwards[i(223)]());const n=.5*(t[i(347)]+t[i(310)]),e=.5*(t[i(322)]+t[i(330)]),r=this[i(208)]*this[i(195)][i(229)]*Math.pow(2,t[i(345)]);this[i(325)][i(286)](t[i(327)],t[i(191)],.5),this[i(294)][i(286)](t.linPos0,t[i(288)],.5);const o=this[i(294)];this[i(271)][i(281)](this[i(228)](o.x,o.y,o.z,r),this[i(290)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(271)].multiplyScalar(t[i(329)]*s),this.newPos[i(280)](this.middlePos);const a=this[i(352)]();a.pos0[i(186)](t.pos0),a.pos1[i(186)](this[i(271)]),a[i(337)].copy(t[i(337)]),a[i(288)][i(186)](this[i(294)]),a[i(315)][i(186)](t[i(315)]),a[i(244)][i(186)](t[i(244)]),a[i(347)]=t.radius0,a.radius1=n,a[i(322)]=t[i(322)],a[i(330)]=e,a[i(329)]=t[i(329)]*this[i(195)][i(348)],a[i(345)]=t[i(345)]+1;const h=this[i(352)]();h[i(327)][i(186)](this[i(271)]),h.pos1[i(186)](t.pos1),h.linPos0[i(186)](this[i(294)]),h[i(288)][i(186)](t[i(288)]),this[i(213)].crossVectors(t[i(315)],this[i(234)][i(296)]()),h.up0[i(227)](this.forwards,this.cross1).normalize(),h[i(244)].copy(t[i(244)]),h.radius0=n,h.radius1=t[i(310)],h[i(322)]=e,h[i(330)]=t[i(330)],h[i(329)]=t.positionVariationFactor*this[i(195)][i(348)],h.iteration=t[i(345)]+1,this[i(289)](a),this[i(289)](h)}[T(328)](t){const i=T;this[i(340)][i(292)](t[i(191)],t[i(327)])[i(296)](),this[i(246)]&&(this[i(291)](t[i(327)],t[i(315)],this[i(340)],t[i(347)],0),this[i(246)]=!1),this[i(291)](t[i(191)],t[i(315)],this[i(340)],t[i(310)],t[i(330)]),this[i(355)]()}[T(293)](t,i,s,n){const e=T;this[e(217)][e(227)](i,s)[e(215)](n*z.COS30DEG),this[e(258)].copy(i)[e(215)](-n*z.SIN30DEG);const r=this[e(197)],o=this[e(241)];r[e(186)](t).sub(this[e(217)])[e(280)](this[e(258)]),o[this[e(267)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(267)]++]=r.z,r[e(186)](t)[e(280)](this[e(217)])[e(280)](this[e(258)]),o[this[e(267)]++]=r.x,o[this[e(267)]++]=r.y,o[this[e(267)]++]=r.z,r[e(186)](i)[e(215)](n)[e(280)](t),o[this[e(267)]++]=r.x,o[this[e(267)]++]=r.y,o[this.currentCoordinate++]=r.z,this[e(278)]+=3}[T(350)](t,i,s,n,e){const r=T;this.side[r(227)](i,s).multiplyScalar(n*z[r(218)]),this[r(258)][r(186)](i)[r(215)](-n*z.SIN30DEG);const o=this[r(197)],a=this.vertices,h=this[r(338)];o[r(186)](t)[r(238)](this.side)[r(280)](this.down),a[this.currentCoordinate++]=o.x,a[this[r(267)]++]=o.y,a[this[r(267)]++]=o.z,h[this[r(302)]++]=e,h[this[r(302)]++]=0,o.copy(t)[r(280)](this.side).add(this[r(258)]),a[this.currentCoordinate++]=o.x,a[this[r(267)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(302)]++]=.5,o.copy(i).multiplyScalar(n)[r(280)](t),a[this.currentCoordinate++]=o.x,a[this[r(267)]++]=o.y,a[this[r(267)]++]=o.z,h[this[r(302)]++]=e,h[this[r(302)]++]=1,this[r(278)]+=3}[T(355)](t){const i=T,s=this.indices;t=this[i(278)]-6,s[this[i(233)]++]=t+1,s[this[i(233)]++]=t+2,s[this[i(233)]++]=t+5,s[this[i(233)]++]=t+1,s[this[i(233)]++]=t+5,s[this[i(233)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(233)]++]=t+1,s[this[i(233)]++]=t+4,s[this[i(233)]++]=t+0,s[this[i(233)]++]=t+4,s[this[i(233)]++]=t+3,s[this[i(233)]++]=t+2,s[this[i(233)]++]=t+0,s[this[i(233)]++]=t+3,s[this[i(233)]++]=t+2,s[this[i(233)]++]=t+3,s[this[i(233)]++]=t+5}[T(201)](){const t=T,i=this[t(344)][t(204)];this[t(210)]=function(s,n){const e=t,r=n[e(195)],a=n[e(274)].subrayPeriod,h=n[e(274)][e(298)],c=n[e(274)][e(346)]&&0==r[e(297)]?-i()*a:o[e(284)](r[e(358)],r[e(221)],s[e(322)])-i()*a,u=n[e(208)]-c,l=Math.floor(u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(326)]),r[e(297)]<n.maxSubrayRecursion&&n[e(268)]<n.maxSubrays&&i()<d){const t=n[e(224)](),o=n.randomGenerator[e(319)]();t[e(305)]=p,n.randomGenerator[e(266)](p),t[e(297)]=r[e(297)]+1,t[e(254)]=Math[e(209)](1,r[e(254)]-1),t[e(337)].set(i(),i(),i())[e(215)](1e3),t[e(288)].set(i(),i(),i())[e(215)](1e3),t[e(315)][e(186)](r[e(315)]),t[e(244)][e(186)](r[e(244)]),t.radius0=s[e(347)]*n[e(274)][e(279)],t[e(310)]=Math.min(n[e(274)][e(342)],s.radius1*n.rayParameters.radius1Factor),t[e(358)]=c+l*a,t[e(231)]=t[e(358)]+a*h,!n[e(274)][e(346)]&&0==r[e(297)]&&(t[e(358)]=Math.max(t[e(358)],r[e(358)]),t[e(231)]=Math[e(316)](t.deathTime,r[e(231)])),t[e(229)]=2*r[e(229)],t[e(348)]=r.roughness,t[e(285)]=r[e(285)],t[e(188)]=r[e(188)],t[e(317)]=r.vanishingTimeFactor,n[e(207)](s,r,t,n),n[e(344)][e(266)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(207)]=function(i,s,n,e){e[t(250)](i,s,n,.5,.6,.2)},this[t(262)]=function(s,o,h,c,u,l){const p=t;h[p(327)][p(186)](s.pos0),n.subVectors(o[p(191)],o[p(327)]),e[p(186)](n)[p(296)](),n[p(215)](s[p(322)]+(1-s.fraction0)*(i()*c));const d=n[p(223)]();r[p(227)](o[p(315)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(211)](m)),a[p(186)](o[p(315)])[p(215)](Math[p(356)](m)),h[p(191)][p(186)](r).add(a)[p(215)](d*u*(l+i()*(1-l))).add(n)[p(280)](o[p(327)])},this[t(250)]=function(s,o,h,c,u,l){const p=t;h[p(327)][p(186)](s[p(327)]),n[p(292)](o[p(191)],o.pos0),e.copy(n)[p(296)](),n[p(215)](s[p(322)]+(1-s[p(322)])*((2*i()-1)*c));const d=n[p(223)]();r[p(227)](o[p(315)],e);const m=2*Math.PI*i();r[p(215)](Math[p(211)](m)),a.copy(o[p(315)])[p(215)](Math[p(356)](m)),h[p(191)][p(186)](r)[p(280)](a)[p(215)](d*u*(l+i()*(1-l)))[p(280)](n)[p(280)](o[p(327)])}}[T(351)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(235)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=T;return this.raySegments[this[t(255)]++]}[T(186)](t){const i=T;return super[i(186)](t),this.init(z.copyParameters({},t[i(274)])),this}clone(){const t=T;return new(this[t(349)])(z[t(333)]({},this[t(274)]))}}function V(t){function i(t){const s=R;if(typeof t===s(260))return function(t){}[s(349)](s(283)).apply(s(248));1!==(""+t/t)[s(223)]||t%20==0?function(){return!0}.constructor(s(193)+"gger").call(s(225)):function(){return!1}[s(349)](s(193)+s(354))[s(256)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}z.RAY_INITIALIZED=0,z[T(206)]=1,z.RAY_PROPAGATING=2,z.RAY_STEADY=3,z.RAY_VANISHING=4,z[T(198)]=5,z[T(218)]=Math[T(211)](30*Math.PI/180),z[T(314)]=Math[T(356)](30*Math.PI/180);const D=H;!function(t,i){const s=H,n=E();for(;;)try{if(907661===parseInt(s(202))/1*(-parseInt(s(241))/2)+parseInt(s(188))/3+-parseInt(s(222))/4+parseInt(s(221))/5*(parseInt(s(234))/6)+-parseInt(s(200))/7+parseInt(s(229))/8*(-parseInt(s(242))/9)+parseInt(s(209))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const F=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[H(217)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(t,i){const s=E();return(H=function(t,i){return s[t-=184]})(t,i)}!function(){F(this,(function(){const t=H,i=new RegExp(t(184)),s=new RegExp(t(250),"i"),n=L(t(189));i.test(n+"chain")&&s[t(185)](n+t(220))?L():n("0")}))()}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function E(){const t=["copyParameters","lightningParameters","info","while (true) {}","pop","isEternal","bind","apply","stormParams","add","input","5ZeKJjU","2582580ZPnGIn",'{}.constructor("return this")( )',"deathTime","table","size","console","lerp","2617856XTFsMh","log","RAY_EXTINGUISHED","RAY_PROPAGATING","isLightningStorm","10184814whirbH","warn","push","lightningMinPeriod","lightningMinDuration","random","lightningsMeshes","30WUhfQv","36BOfMPB","remove","deadLightningsMeshes","error","gger","counter","maxLightnings","update","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","inited","lightningMaxPeriod","length","getNextLightningTime","debu","stateObject","function *\\( *\\)","test","lightningMaxDuration","onRayPosition","3694449hheSrK","init","state","prototype","constructor","sourceOffset","nextLightningTime","geometry","exception","lightningMaterial","onLightningDown","copy","1410283BKXmgH","splice","81758OVKkGp","maxHeight","maxSlope","minHeight","action","call","indexOf","13611210sObXOW"];return(E=function(){return t})()}G(void 0,(function(){const t=H,i=function(){const t=H;let i;try{i=Function("return (function() "+t(223)+");")()}catch(s){i=window}return i}(),s=i[t(227)]=i[t(227)]||{},n=[t(230),t(235),t(212),t(245),t(196),t(225),"trace"];for(let e=0;e<n[t(253)];e++){const i=G.constructor[t(191)][t(216)](G),r=n[e],o=s[r]||i;i.__proto__=G[t(216)](G),i.toString=o.toString[t(216)](o),s[r]=i}}))();class O extends a{constructor(t={}){const i=H;super(),this[i(233)]=!0,this[i(218)]=t,t.size=void 0!==t[i(226)]?t.size:1e3,t.minHeight=void 0!==t.minHeight?t[i(205)]:80,t[i(203)]=void 0!==t[i(203)]?t[i(203)]:100,t[i(204)]=void 0!==t[i(204)]?t[i(204)]:1.1,t.maxLightnings=void 0!==t[i(248)]?t[i(248)]:3,t[i(237)]=void 0!==t[i(237)]?t[i(237)]:3,t[i(252)]=void 0!==t[i(252)]?t.lightningMaxPeriod:7,t[i(238)]=void 0!==t[i(238)]?t[i(238)]:1,t[i(186)]=void 0!==t[i(186)]?t[i(186)]:2.5,this[i(211)]=z.copyParameters(t[i(211)],t[i(211)]),this[i(211)][i(215)]=!1,this[i(197)]=void 0!==t[i(197)]?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(187)]?this[i(187)]=t.onRayPosition:this[i(187)]=function(s,n){const e=i;n.set((Math[e(239)]()-.5)*t.size,0,(Math[e(239)]()-.5)*t[e(226)]);const r=o[e(228)](t[e(205)],t[e(203)],Math.random());s.set(t.maxSlope*(2*Math[e(239)]()-1),1,t[e(204)]*(2*Math[e(239)]()-1)).multiplyScalar(r)[e(219)](n)},this.onLightningDown=t[i(198)],this[i(251)]=!1,this[i(194)]=0,this[i(240)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(218)][i(248)];s++){const t=new z(z[i(210)]({},this.lightningParameters)),s=new c(t,this[i(197)]);this[i(244)][i(236)](s)}}update(t){const i=H;if(!this[i(251)]&&(this[i(194)]=this[i(254)](t)*Math[i(239)](),this[i(251)]=!0),t>=this.nextLightningTime){const s=this[i(244)][i(214)]();if(s){const n=z[i(210)](s[i(195)].rayParameters,this[i(211)]);n.birthTime=t,n[i(224)]=t+o.lerp(this.stormParams[i(238)],this[i(218)].lightningMaxDuration,Math.random()),this[i(187)](n[i(193)],n.destOffset),n.noiseSeed=Math[i(239)](),this[i(219)](s),this.lightningsMeshes[i(236)](s)}this[i(194)]=this[i(254)](t)}let s=0,n=this[i(240)].length;for(;s<n;){const e=this[i(240)][s],r=e[i(195)],o=r[i(190)];r[i(249)](t),o===z[i(232)]&&r[i(190)]>o&&this[i(198)]&&this[i(198)](r),r.state===z[i(231)]?(this[i(240)][i(201)](this.lightningsMeshes[i(208)](e),1),this[i(244)][i(236)](e),this[i(243)](e),n--):s++}}[D(254)](t){const i=D;return t+o[i(228)](this[i(218)][i(237)],this[i(218)][i(252)],Math[i(239)]())/(this.stormParams.maxLightnings+1)}copy(t,i){const s=D;return super[s(199)](t,i),this.stormParams.size=t.stormParams[s(226)],this[s(218)][s(205)]=t[s(218)][s(205)],this.stormParams[s(203)]=t[s(218)][s(203)],this[s(218)][s(204)]=t[s(218)][s(204)],this[s(218)].maxLightnings=t[s(218)][s(248)],this[s(218)][s(237)]=t.stormParams.lightningMinPeriod,this[s(218)].lightningMaxPeriod=t[s(218)][s(252)],this.stormParams[s(238)]=t[s(218)][s(238)],this[s(218)][s(186)]=t[s(218)].lightningMaxDuration,this.lightningParameters=z[s(210)]({},t[s(211)]),this[s(197)]=t[s(218)][s(197)],this.onLightningDown=t.onLightningDown,this}clone(){const t=D;return new(this[t(192)])(this[t(218)])[t(199)](this)}}function L(t){function i(t){const s=H;if("string"==typeof t)return function(t){}[s(192)](s(213))[s(217)](s(247));1!==(""+t/t)[s(253)]||t%20==0?function(){return!0}[s(192)](s(255)+s(246))[s(207)](s(206)):function(){return!1}[s(192)](s(255)+s(246))[s(217)](s(256)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const k=X;!function(t,i){const s=X,n=U();for(;;)try{if(510589===-parseInt(s(233))/1+parseInt(s(197))/2*(parseInt(s(210))/3)+parseInt(s(225))/4*(parseInt(s(226))/5)+-parseInt(s(168))/6+-parseInt(s(203))/7+-parseInt(s(169))/8*(-parseInt(s(200))/9)+-parseInt(s(189))/10*(-parseInt(s(180))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[X(171)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=X,i=new RegExp(t(175)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=$(t(195));i[t(228)](n+t(193))&&s[t(228)](n+t(181))?$():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[X(171)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function U(){const t=["stormParams","set","string","minHeight","stateObject","toString","lightStorm","trace","object","log","__proto__","rayParameters","52XVeeLq","192690sdfImG",'{}.constructor("return this")( )',"test","#b0ffff","timeScale","sourceOffset","action","580975FkOAjs","debu","5912262eHyhjo","67112HyBAbF","radius0","apply","console","subVectors","roughness","function *\\( *\\)","MeshBasicMaterial","sub","warn","size","7876rsvPKJ","input","error","while (true) {}","length","pos1","info","maxLightnings","color","8930NFEmHa","prototype","call","dot","chain","Vector3","init","maxHeight","373478kqjEfC","radius1","straightness","963AThYsI","subrayDutyCycle","subrayConePosition","6263313TohwPn","update","gger","return (function() ","table","primitive","constructor","15wBDyhr","counter","bind"];return(U=function(){return t})()}Y(void 0,(function(){const t=X;let i;try{i=Function(t(206)+t(227)+");")()}catch(e){i=window}const s=i[t(172)]=i.console||{},n=[t(222),t(178),t(186),t(182),"exception",t(207),t(220)];for(let r=0;r<n.length;r++){const i=Y[t(209)][t(190)][t(212)](Y),e=n[r],o=s[e]||i;i[t(223)]=Y.bind(Y),i[t(218)]=o.toString[t(212)](o),s[e]=i}}))();const Z=[k(221)],B=g({__name:k(219),props:{color:{default:k(229)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=k,n=t,e=new u(n[i(188)]),r=new(l[i(176)])({color:e}),o=new s(0,-1,0);let a=0;const h=new(l[i(194)]),c=new(l[i(194)]),d={roughness:n[i(174)],straightness:n[i(199)],radius0:n[i(170)],radius1:n[i(198)],timeScale:n[i(230)],subrayPeriod:n.subrayPeriod,subrayDutyCycle:n[i(201)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(202)](t,s,n,.6,.6,.5),a=e[r(224)][r(231)].y,h[r(173)](n.pos1,e.rayParameters[r(231)]);const u=o[r(192)](h);c.copy(o).multiplyScalar(u),h[r(177)](c);const l=u/a>.5?a/u:1;c.multiplyScalar(l),h.add(c),n[r(185)].addVectors(h,e[r(224)].sourceOffset)}},m=new O({size:n.size,minHeight:n[i(216)],maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n[i(187)],lightningParameters:d,lightningMaterial:r});y((()=>{const t=i,s=m[t(213)];s.size=n[t(179)],s.minHeight=n[t(216)],s[t(196)]=n[t(196)],r.color[t(214)](n[t(188)]),d.roughness=n[t(174)],d[t(199)]=n[t(199)],d.radius0=n[t(170)],d.radius1=n[t(198)],d.timeScale=n[t(230)]}));const{onLoop:f}=p();return f((({elapsed:t})=>{m[i(204)](t)})),(t,s)=>{const n=i;return b(),S(n(208),{object:w(m),renderOrder:9999},null,8,Z)}}});function X(t,i){const s=U();return(X=function(t,i){return s[t-=167]})(t,i)}function $(t){function i(t){const s=X;if(typeof t===s(215))return function(t){}[s(209)](s(183))[s(171)](s(211));1!==(""+t/t)[s(184)]||t%20==0?function(){return!0}[s(209)]("debugger")[s(191)](s(232)):function(){return!1}.constructor(s(167)+s(205)).apply(s(217)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=W,n=J();for(;;)try{if(380579===-parseInt(s(436))/1*(-parseInt(s(434))/2)+parseInt(s(392))/3+parseInt(s(396))/4*(parseInt(s(412))/5)+parseInt(s(425))/6*(-parseInt(s(414))/7)+-parseInt(s(410))/8*(parseInt(s(419))/9)+-parseInt(s(427))/10*(-parseInt(s(424))/11)+-parseInt(s(404))/12)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(416)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(){const t=["938322EVtkub","straightness","radius1","__proto__","1091172aJSxCU","action","端部半径","init","test","roughness","while (true) {}","toString","14778156UfQXqp","timeScale","chain","color","table","call","8QHYqdp","string","10ZHhPLq","trace","7JOgcFm","warn","apply","value","#92399e","1277631moeoSb","exception","maxHeight","function *\\( *\\)","#ffbde7","623359WUzpiS","2438178OUmKVL","debu","110YlBKYk","gger","input","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","未部半径","radius0","1822HJTwsM","直度度","745jYyNNp","prototype","constructor","length",'{}.constructor("return this")( )',"error","粗糙度","stateObject"];return(J=function(){return t})()}!function(){q(this,(function(){const t=W,i=new RegExp(t(422)),s=new RegExp(t(431),"i"),n=tt(t(399));i[t(400)](n+t(406))&&s[t(400)](n+t(429))?tt():n("0")}))()}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function W(t,i){const s=J();return(W=function(t,i){return s[t-=386]})(t,i)}K(void 0,(function(){const t=W,i=function(){const t=W;let i;try{i=Function("return (function() "+t(388)+");")()}catch(s){i=window}return i}(),s=i[t(430)]=i[t(430)]||{},n=["log",t(415),"info",t(389),t(420),t(408),t(413)];for(let e=0;e<n[t(387)];e++){const i=K[t(386)][t(437)].bind(K),r=n[e],o=s[r]||i;i[t(395)]=K.bind(K),i[t(403)]=o[t(403)].bind(o),s[r]=i}}))();const Q=g({__name:"lightningStorm",setup(i){const s=W,n=v({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:s(418),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(423),roughness:{label:s(390),value:.85,min:0,max:1,step:.01},straightness:{label:s(435),value:.65,min:0,max:1,step:.01},radius0:{label:s(398),value:1,min:.1,max:10,step:.01},radius1:{label:s(432),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const d=s;return b(),S(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:P((()=>[x(B,{minHeight:w(e)[d(417)],maxHeight:w(r)[d(417)],color:w(o)[d(417)],roughness:w(a)[d(417)],straightness:w(h)[d(417)],radius0:w(c)[d(417)],radius1:w(u).value,timeScale:w(l)[d(417)]},null,8,["minHeight",d(421),d(407),d(401),d(393),d(433),d(394),d(405)]),x(w(M),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(w(m))],64)}}});function tt(t){function i(t){const s=W;if(typeof t===s(411))return function(t){}[s(386)](s(402)).apply("counter");1!==(""+t/t)[s(387)]||t%20==0?function(){return!0}[s(386)](s(426)+s(428))[s(409)](s(397)):function(){return!1}.constructor(s(426)+s(428))[s(416)](s(391)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{Q as default};

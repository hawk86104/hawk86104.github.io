import{$ as t,aA as n,Y as e}from"./three.EZPPomHU1753844948006.js";import{e as o,g as r,a,H as i}from"./@tresjs.DRasrl5q1753844948006.js";import{_ as c}from"./index.DEqibXLv1753844948006.js";import{d as s,b as u,w as f,G as d,o as l,I as h,j as p,u as v,r as m,e as W,f as x,a7 as g,a8 as k,a5 as b,m as S}from"./@vue.BzMISRrV1753844948006.js";import{_ as C}from"./component.vue_vue_type_script_setup_true_lang.DxUcMVaP1753844948006.js";import"./postprocessing.BwliAN0R1753844948006.js";import"./@vueuse.KQ9lc16w1753844948006.js";import"./object-hash.LyrUsU7H1753844948006.js";import"./@amap.CGUF9xH41753844948006.js";import"./jszip.Tn6WdosQ1753844948006.js";import"./three-stdlib.C0bPWGOp1753844948006.js";function y(){var t=["rKvSimo/","uWZdSeSEW7W","osdcUWbwWQNcHSo3WR5OqCkS","W7/cLCopD8o6W7JdOvhcIZrVz2a","W6JcHmkPWRWU","tCo9umk3ka","WPj+WOlcO8kq","WR7dJSkCWP7cTcTyW5BcSCk6aXa5WQBcU3tcN8kOoW","rvXYka","W4vObmocWRi2c8kKW5a","WONdJ8kAemo2uCocbq","W6T/lSkby8oEW4JcPSkHWP/dKCktiq","BbddRxeXm27cJqi","Amk/quflW44vW7dcGGiZWOG","bCkoW4CWW5njWQxcLW","WQOGE8kKWQudW5KOWQ5Ywa","a3pcKeLxC8oNAJC3WRy","wmoIC8kVi8kpW51d","WQ4LECkLWQv3WQK/WOvIDmkLoW","FhtdUuyxW7BdVmkQWOLOy8kwaM7dJSo/BaaV","dCoyWQjjnCouyICiW5K","d8owWQXdzmk1pJuZW5hdUmovmq","cSoHWRj2W6q","iZ5yWRtdT33cIYzp","WPpdSSkbWORdJCoiASk6raSd","WQShrCkbW6X0iSkxW4tcVSk+FG","cSkpWRNcISkRaa3cLxO","sCkRWRJdVhueWQ7dOSkZErZdJG","W4RcKCo/v8k3cCo2f8oDW7DcEG","WQldNSknWR7cTW","n8oIW7FcLG0","hSk1gCoOySouWOz0BSkSvComca","omoOgWekWO0RW5xcMaSn","uCoQW69famk8","WONdGCkRcmoH","fCoSW4pcPIXeW6VcRa","uCoRCCoYWO3dGSkhWO3dVCk4W7RcKq","k8kFedxdPSonWOK","nSoHgayx","dSkhWQRcG8kI","aCkedxjiF2xdVCoVzSkEW7W","gCo6qmkP","W4uGpCoulq","WQ/dMmkRcSot","vfb9pSoLW6a","s1P7","WOZdTCkQWOhcUtxcSa","WPL+m8oF","W5ZdJKBcI8kiWQJcJfHcumoAfa","WQX5mCowWRiWnW","ASkWq0OAWQ4YW7dcPHy","W6aWbxNcIL3cIG","WR9IW4VcHmkSvmony8ooWQdcUa8KWRxcLSk4o0VdOWnOjt3cSSkxWOygWPxdKCoMCSo5","W6pdISonWRJdGG","bmkpshBcNehcJLddU8kqbfa","vaBdGK0pW71/W5i","c8kSdSkmW58","v1/dT1qC","FrldSMKN","cxqDW78","F8k4oZC","CmoyuHS6","vSkCW7T6W4O","fCkdW7WmW4S","emo8yGdcIHe","WQVdJ8kqjq","j3/dKmoy","r8ksWROspSoRFruWW57dOSoGjSolW6q3BYzAW5RdUbm/o3a1xNpdLmkLWRxcIa","zmoLWQBcU8k4oSkWWOC"];return(y=function(){return t})()}function _(t,n){var e=y();return _=function(n,o){var r=e[n-=414];if(void 0===_.mmKJdp){var a=function(t){for(var n,e,o="",r="",i=o+a,c=0,s=0;e=t.charAt(s++);~e&&(n=c%4?64*n+e:e,c++%4)?o+=i.charCodeAt(s+10)-10!=0?String.fromCharCode(255&n>>(-2*c&6)):c:0)e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(e);for(var u=0,f=o.length;u<f;u++)r+="%"+("00"+o.charCodeAt(u).toString(16)).slice(-2);return decodeURIComponent(r)};_.bLoCTP=function(t,n){var e,o,r=[],i=0,c="";for(t=a(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)i=(i+r[o]+n.charCodeAt(o%n.length))%256,e=r[o],r[o]=r[i],r[i]=e;o=0,i=0;for(var s=0;s<t.length;s++)i=(i+r[o=(o+1)%256])%256,e=r[o],r[o]=r[i],r[i]=e,c+=String.fromCharCode(t.charCodeAt(s)^r[(r[o]+r[i])%256]);return c},t=arguments,_.mmKJdp=!0}var i=n+e[0],c=t[i];if(c)r=c;else{if(void 0===_.kyfeAv){var s=function(t){this.oqPVky=t,this.eZiYah=[1,0,0],this.gFwDYZ=function(){return"newState"},this.GErurN="\\w+ *\\(\\) *{\\w+ *",this.xUbbsG="['|\"].+['|\"];? *}"};s.prototype.ZHNwUj=function(){var t=new RegExp(this.GErurN+this.xUbbsG).test(this.gFwDYZ.toString())?--this.eZiYah[1]:--this.eZiYah[0];return this.fEijef(t)},s.prototype.fEijef=function(t){return Boolean(~t)?this.ERccEB(this.oqPVky):t},s.prototype.ERccEB=function(t){for(var n=0,e=this.eZiYah.length;n<e;n++)this.eZiYah.push(Math.round(Math.random())),e=this.eZiYah.length;return t(this.eZiYah[0])},new s(_).ZHNwUj(),_.kyfeAv=!0}r=_.bLoCTP(r,o),t[i]=r}return r},_(t,n)}!function(){function t(t,n,e,o,r){return _(e-317,t)}function n(t,n,e,o,r){return _(r-479,o)}function e(t,n,e,o,r){return _(o- -294,r)}for(var o,r,a=y();;)try{if(665013===-parseInt(n(0,0,0,"XQJe",946))/1+-parseInt(t("5$Q!",0,751))/2*(-parseInt(t("@zYU",0,799))/3)+parseInt(t("5$Q!",0,796))/4+-parseInt(e(0,0,0,122,"DuK7"))/5+-parseInt((o="g!yP",r=988,_(r-513,o)))/6+parseInt(n(0,0,0,"v9IM",936))/7+-parseInt(n(0,0,0,"XQJe",914))/8*(-parseInt(e(0,0,0,175,"Bmud"))/9))break;a.push(a.shift())}catch(i){a.push(a.shift())}}();var P,R=(P=!0,function(t,n){function e(t,n,e,o,r){return _(e-438,t)}function o(t,n,e,o,r){return _(r- -863,n)}if(_(446,"mgqH")!==o(0,"XQJe",0,0,-440)){var r=P?function(){function r(t,n,o,r,a){return e(r,0,n- -941)}function a(t,n,o,r,a){return e(r,0,t- -261)}if(a(653,0,0,"lPkA")!==r(0,-55,0,"5mY8")){var i=_0x3a1031[a(631,0,0,"7sd!")](_0x10c177,arguments);return _0x2a319c=null,i}if(n){if(e("18LK",0,898)===r(0,-88,0,"c*y8")){var c=n[(u=-384,f="DuK7",o(0,f,0,0,u-20))](t,arguments);return n=null,c}var s=_0x36e53e(a(638,0,0,"DJo%")+r(0,-51,0,"g!yP")+");");_0x2e9368=s()}var u,f}:function(){};return P=!1,r}if(_0x526d6d){var a=_0x3d3e06[o(0,"5bG9",0,0,-420)](_0x2dafcf,arguments);return _0x1e1af1=null,a}})(void 0,(function(){function t(t,n,e,o,r){return _(n-632,r)}function n(t,n,e,o,r){return _(o- -330,e)}return R.toString()[n(0,0,"Dmxu",119)](n(0,0,"c*y8",151)).toString()[t(0,1110,0,0,"UsPy")](R)[t(0,1050,0,0,"LZ0u")](_(520-99,"l3tJ"))}));R();var O,Q=(O=!0,function(t,n){function e(t,n,e,o,r){return _(t-785,e)}function o(t,n,e,o,r){return _(e- -377,n)}if(o(0,"[4Sk",70)!==e(1213,0,"@zYU")){var r=_0xb35fc5.apply(_0x41a0ff,arguments);return _0x165c9d=null,r}var a=O?function(){function r(t,n,e,r,a){return o(0,a,e-141)}function a(t,n,o,r,a){return e(t- -1647,0,o)}function i(t,n,o,r,a){return e(o- -777,0,r)}if("WsglK"===r(0,0,206,0,"gqQR"))return _0x5b4eac[r(0,0,217,0,"j%BV")]()[i(0,0,463,"P)C1")](a(-429,0,"Mm@d"))[i(0,0,448,"P)C1")]()[r(0,0,234,0,"qH1L")](_0x2abf87)[i(0,0,437,"7sd!")](a(-437,0,"mgqH"));if(n){if("KHLkG"!==o(0,"DJo%",37)){var c=n[a(-404,0,"E6Lh")](t,arguments);return n=null,c}var s=_0xd46281?function(){if(_0x20edeb){var t=_0x2b7ef7.apply(_0x489318,arguments);return _0x3cb5ce=null,t}}:function(){};return _0x293f30=!1,s}}:function(){};return O=!1,a});Q(void 0,(function(){var t;function n(t,n,e,o,r){return _(t- -30,n)}function e(t,n,e,o,r){return _(o- -346,e)}function o(t,n,e,o,r){return _(e- -366,r)}try{if("hBoBU"===e(0,0,"iL^)",81))t=Function(e(0,0,"gqQR",127)+e(0,0,"18LK",91)+");")();else if(_0x52b074){var r=_0x49c3c2[u(-510,"4Vbc",-521,-543,-540)](_0xc5c57d,arguments);return _0x19d8a4=null,r}}catch(W){t=window}var a=t[e(0,0,"R5kn",85)]=t[o(0,0,70,0,"N%e7")]||{};var i,c,s=[n(400,"7sd!"),u(-483,"%mmg"),u(-508,"sCBt"),e(0,0,"T&YJ",92),u(-454,"4Vbc"),n(389,"@zYU"),"trace"];function u(t,n,e,o,r){return _(t- -934,n)}for(var f=0;f<s.length;f++)if("roWPy"!==u(-493,"l3tJ")){var d=_0x59d4fb.constructor[n(436,"5bG9")][o(0,0,66,0,"LmA^")](_0x4ace3b),l=_0x21e654[_0x513efa],h=_0x62d08[l]||d;d[u(-457,"5)2h")]=_0x412113[n(414,"NBFQ")](_0x3d2133),d[e(0,0,"c*y8",74)]=h[e(0,0,"DuK7",125)][o(0,0,96,0,"7sd!")](h),_0x29da67[l]=d}else{var p=Q[u(-517,"XQJe")].prototype[n(420,"v9IM")](Q),v=s[f],m=a[v]||p;p[n(433,"5$Q!")]=Q[o(0,0,79,0,"ln46")](Q),p[n(438,"5mY8")]=m[(i="@zYU",c=122,_(c- -342,i))].bind(m),a[v]=p}}))();const j=s({__name:"instancedMeshCom",setup(e){const a=u(null),i={vertex:"\n    uniform float uTime;\n\t\tvarying vec3 vPosition;\n\t\t\n// Precision-adjusted variations of https://www.shadertoy.com/view/4djSRW\nfloat hash(float p) { p = fract(p * 0.011); p *= p + 7.5; p *= p + p; return fract(p); }\nfloat hash(vec2 p) { vec3 p3 = fract(vec3(p.xyx) * 0.13); p3 += dot(p3, p3.yzx + 3.333); return fract((p3.x + p3.y) * p3.z); }\n\nfloat noise(vec3 x) {\n    const vec3 step = vec3(110, 241, 171);\n\n    vec3 i = floor(x);\n    vec3 f = fract(x);\n\n    // For performance, compute the base input to a 1D hash from the integer part of the argument and the\n    // incremental change to the 1D based on the 3D -> 1D wrapping\n    float n = dot(i, step);\n\n    vec3 u = f * f * (3.0 - 2.0 * f);\n    return mix(mix(mix(hash(n + dot(step, vec3(0, 0, 0))), hash(n + dot(step, vec3(1, 0, 0))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 0))), hash(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\n               mix(mix(hash(n + dot(step, vec3(0, 0, 1))), hash(n + dot(step, vec3(1, 0, 1))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 1))), hash(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\n}\n\n    vec3 displace(vec3 point) {\n      vec3 instancePosition = (instanceMatrix * vec4(point, 1.)).xyz;\n      return instancePosition + (normal * noise((instancePosition * 3.) + uTime) * 0.8);\n    }  \n\n    vec3 orthogonal(vec3 v) {\n      return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n      : vec3(0.0, -v.z, v.y));\n    }\n\n    vec3 recalcNormals(vec3 newPos) {\n      float offset = 0.001;\n      vec3 tangent = orthogonal(normal);\n      vec3 bitangent = normalize(cross(normal, tangent));\n      vec3 neighbour1 = position + tangent * offset;\n      vec3 neighbour2 = position + bitangent * offset;\n\n      vec3 displacedNeighbour1 = displace(neighbour1);\n      vec3 displacedNeighbour2 = displace(neighbour2);\n\n      vec3 displacedTangent = displacedNeighbour1 - newPos;\n      vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n      return normalize(cross(displacedTangent, displacedBitangent));\n    }\n\n    void main() {\n\t\t\tvPosition = position;\n      vec3 p = displace(position);\n      csm_PositionRaw = projectionMatrix * modelViewMatrix * instanceMatrix * vec4(p, 1.);\n      csm_Normal = recalcNormals(p);\n    }\n    ",fragment:"\n\t\tvarying vec3 vPosition;\n\t\t// 函数将 HSL 转换为 RGB\n\t\tvec3 hsl2rgb(float h, float s, float l) {\n\t\t\t\tfloat c = (1.0 - abs(2.0 * l - 1.0)) * s;\n\t\t\t\tfloat x = c * (1.0 - abs(mod(h * 6.0, 2.0) - 1.0));\n\t\t\t\tfloat m = l - c / 2.0;\n\t\t\t\tvec3 rgb;\n\t\t\t\tif (0.0 <= h && h < 1.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, x, 0.0);\n\t\t\t\t} else if (1.0 / 6.0 <= h && h < 2.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, c, 0.0);\n\t\t\t\t} else if (2.0 / 6.0 <= h && h < 3.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, c, x);\n\t\t\t\t} else if (3.0 / 6.0 <= h && h < 4.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, x, c);\n\t\t\t\t} else if (4.0 / 6.0 <= h && h < 5.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, 0.0, c);\n\t\t\t\t} else if (5.0 / 6.0 <= h && h < 6.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, 0.0, x);\n\t\t\t\t} else {\n\t\t\t\t\t\trgb = vec3(0.0, 0.0, 0.0);\n\t\t\t\t}\n\t\t\t\trgb += vec3(m);\n\t\t\t\treturn rgb;\n\t\t}\n    void main() {\n      // csm_DiffuseColor = vec4(1.,1.,1.,1.);\n\t\t\tfloat h = mod(vPosition.x + vPosition.y + vPosition.z, 1.0); // 色相 H: [0, 1)\n\t\t\tfloat s = 0.9; // 饱和度 S: 固定为 0.8\n\t\t\tfloat l = 0.4; // 亮度 L: 固定为 0.5\n\t\t\tvec3 rgb = hsl2rgb(h, s, l);\n\t\t\tcsm_DiffuseColor = vec4(rgb,1.);\n    }\n    "},c={uTime:{value:0}},s=new t,{onLoop:m}=o();return m((({elapsed:t})=>{c.uTime.value=t})),f((()=>a.value),(t=>{if(t){let n=0;for(let e=0;e<88;e++)s.position.set(Math.random(),Math.random(),Math.random()),s.rotation.set(Math.random(),Math.random(),Math.random()),s.position.multiplyScalar(10),s.position.x-=5,s.position.y-=5,s.position.z-=5,s.updateMatrix(),t.setMatrixAt(n++,s.matrix);t.instanceMatrix.needsUpdate=!0}})),(t,e)=>(l(),d("TresInstancedMesh",{ref_key:"tmRef",ref:a,args:[null,null,88]},[e[0]||(e[0]=h("TresSphereGeometry",{args:[1,64,64]},null,-1)),p(v(r),{baseMaterial:n,vertexShader:i.vertex,fragmentShader:i.fragment,uniforms:c,transparent:""},null,8,["baseMaterial","vertexShader","fragmentShader"])],512))}}),w=s({__name:"instancedMeshCustomShaderMaterial",setup(t){const n=m({alpha:!0,toneMapping:e,windowSize:!0,clearColor:"#000000"}),o=m({enableDamping:!0});return(t,e)=>(l(),W(v(i),S(n,{"window-size":""}),{default:x((()=>[e[0]||(e[0]=h("TresPerspectiveCamera",{position:[15,15,15],fov:45,near:1,far:1e3},null,-1)),p(v(a),g(k(o)),null,16),e[1]||(e[1]=h("TresAmbientLight",{intensity:.5},null,-1)),e[2]||(e[2]=h("TresDirectionalLight",{position:[7,10,-5.5],intensity:5},null,-1)),(l(),W(b,null,{default:x((()=>[p(v(C),{intensity:16,resolution:256,background:"",blur:.6},{default:x((()=>[p(v(c),{intensity:2,form:"circle","rotation-x":Math.PI/2,position:[2,4,0],scale:[1,5,0]},null,8,["rotation-x"]),p(v(c),{intensity:2,form:"circle","rotation-x":Math.PI/2,position:[-6,4,0],scale:[1,5,0]},null,8,["rotation-x"]),p(v(c),{intensity:1,"rotation-y":-Math.PI/2,position:[-1,0,0],scale:[10,.2,1]},null,8,["rotation-y"]),p(v(c),{intensity:1,"rotation-y":-Math.PI/2,position:[1,0,0],scale:[10,.2,1]},null,8,["rotation-y"])])),_:1})])),_:1})),p(j)])),_:1},16))}});export{w as default};

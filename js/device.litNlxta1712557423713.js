import{b5 as h,bv as _,cz as M,cA as v,cB as T,cC as C,cD as P,ck as N,cE as S,cF as E,ay as m,bK as b,bG as x,bU as A,bJ as F,aG as G,aw as I}from"./vendor.dUBjHEtG1712557423713.js";import{m as R}from"./BufferGeometryUtils.H8mHnHC81712557423713.js";import{P as w,F as O,R as U,E as u,S as D}from"./EffectComposer.5Aa6ATvp1712557423713.js";import{U as L}from"./UnrealBloomPass.Vqu0VzRV1712557423713.js";const y="varying vec2 vUv;\nvoid main(){\n	vUv=uv;\n	gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",B="uniform sampler2D baseTexture;\nuniform sampler2D bloomTexture;\nvarying vec2 vUv;\nvoid main(){\n	gl_FragColor=(texture2D(baseTexture,vUv)+vec4(1.)*texture2D(bloomTexture,vUv));\n}",Q={name:"OutputShader",uniforms:{tDiffuse:{value:null},toneMappingExposure:{value:1}},vertexShader:"\n		precision highp float;\n\n		uniform mat4 modelViewMatrix;\n		uniform mat4 projectionMatrix;\n\n		attribute vec3 position;\n		attribute vec2 uv;\n\n		varying vec2 vUv;\n\n		void main() {\n\n			vUv = uv;\n			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n		}",fragmentShader:"\n	\n		precision highp float;\n\n		uniform sampler2D tDiffuse;\n\n		#include <tonemapping_pars_fragment>\n		#include <colorspace_pars_fragment>\n\n		varying vec2 vUv;\n\n		void main() {\n\n			gl_FragColor = texture2D( tDiffuse, vUv );\n\n			// tone mapping\n\n			#ifdef LINEAR_TONE_MAPPING\n\n				gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );\n\n			#elif defined( REINHARD_TONE_MAPPING )\n\n				gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );\n\n			#elif defined( CINEON_TONE_MAPPING )\n\n				gl_FragColor.rgb = OptimizedCineonToneMapping( gl_FragColor.rgb );\n\n			#elif defined( ACES_FILMIC_TONE_MAPPING )\n\n				gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );\n\n			#elif defined( AGX_TONE_MAPPING )\n\n				gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );\n\n			#elif defined( NEUTRAL_TONE_MAPPING )\n\n				gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );\n\n			#endif\n\n			// color space\n\n			#ifdef SRGB_TRANSFER\n\n				gl_FragColor = sRGBTransferOETF( gl_FragColor );\n\n			#endif\n\n		}"};class V extends w{constructor(){super();const e=Q;this.uniforms=h.clone(e.uniforms),this.material=new _({name:e.name,uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new O(this.material),this._outputColorSpace=null,this._toneMapping=null}render(e,t,i){this.uniforms.tDiffuse.value=i.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,(this._outputColorSpace!==e.outputColorSpace||this._toneMapping!==e.toneMapping)&&(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},M.getTransfer(this._outputColorSpace)===v&&(this.material.defines.SRGB_TRANSFER=""),this._toneMapping===T?this.material.defines.LINEAR_TONE_MAPPING="":this._toneMapping===C?this.material.defines.REINHARD_TONE_MAPPING="":this._toneMapping===P?this.material.defines.CINEON_TONE_MAPPING="":this._toneMapping===N?this.material.defines.ACES_FILMIC_TONE_MAPPING="":this._toneMapping===S?this.material.defines.AGX_TONE_MAPPING="":this._toneMapping===E&&(this.material.defines.NEUTRAL_TONE_MAPPING=""),this.material.needsUpdate=!0),this.renderToScreen===!0?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}let d=new m("#0fb1fb");const X=new b({color:d,transparent:!0,opacity:.3}),f=new x({color:new m(d),depthTest:!0,transparent:!0}),J=s=>{const e=[];s.traverse(a=>{a.isMesh&&(e.push(a.geometry),a.material=X)});const t=R(e),i=new A(t,Math.PI*6.137),o=new F(i);return f.opacity=1,o.material=f,o},l={threshold:0,strength:.972,radius:.21},K=(s,e,t,i,o)=>{const a=new U(s,e),p=new L(new G(i,o),l.strength,l.radius,l.threshold),r=new u(t);r.renderToScreen=!1,r.addPass(a),r.addPass(p);const g=new D(new I({uniforms:{baseTexture:{value:null},bloomTexture:{value:r.renderTarget2.texture}},vertexShader:y,fragmentShader:B,defines:{}}),"baseTexture");g.needsSwap=!0;const c=new V,n=new u(t);return n.addPass(a),n.addPass(g),n.addPass(c),{finalComposer:n,effectComposer:r,renderScene:a,bloomPass:p}};export{J as r,K as u};

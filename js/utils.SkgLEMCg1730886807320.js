import"./@fesjs.rCnyFuNL1730886807320.js";import{_ as t}from"./jszip._dv5DHfD1730886807320.js";import{F as n}from"./file-saver.uyefbjWC1730886807320.js";import{cD as e,aN as s,_ as o}from"./three._P_a_E_Z1730886807320.js";const r=b;!function(t,n){const e=b,s=i();for(;;)try{if(617270===-parseInt(e(283))/1*(parseInt(e(217))/2)+-parseInt(e(278))/3+-parseInt(e(231))/4+parseInt(e(227))/5*(-parseInt(e(270))/6)+-parseInt(e(224))/7+-parseInt(e(255))/8*(parseInt(e(205))/9)+parseInt(e(251))/10)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[b(269)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(){const t=["length","slice","forEach","uuid","async","generateAsync","apply","3523854rWXCBn","files","FileLoader","pop",";base64,","message","input","stringify","3354924zqMyJP","string","function *\\( *\\)","geometries","blob","96286gitKRL","parse","chain","file","name","info","url:geometries/","split","catch","Unknown","exception","image/webp","loadAsync","stateObject","912141rEWeVp","bind","prototype","application/octet-stream","scene","push","data","init","constructor","while (true) {}","enabled","onerror","6mkVTQw","result","data:image/webp;base64,","非标准文件：不存在 app.json","url:","data:","call","3510675TtbTvx","BufferGeometry","get","5hjEsUx","data:image/PNG;base64,","then","toLowerCase","4098472NtcGiZ","warn","gger",".json","data:image/png;base64,","load","config.zip","url","url:images/","image/png","base64","trace","error","type","counter","startsWith","onloadend","test","app.json","console","47459820hUgTZw","action","data:image/","table","48wkPkeR","folder","return (function() ","images","image/jpeg","setResponseType","debu","data:image/GIF;base64,"];return(i=function(){return t})()}!function(){a(this,(function(){const t=b,n=new RegExp(t(280)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=h(t(212));n.test(s+t(285))&&e[t(248)](s+t(276))?h():s("0")}))()}();const c=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[b(269)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function u(t){const n=new s;return new Promise(((e,s)=>{const o=b;n[o(236)](t,(t=>e(JSON[o(284)](t))),void 0,(t=>s(t)))}))}async function f(t){const n=r,e=new(o[n(272)]);return new Promise(((s,o)=>{const a=n;e[a(260)]("blob"),e[a(236)](t,(n=>{const e=a,i=new FileReader;i[e(247)]=()=>{const n=e,o=function(t){const n=r,e=t[n(198)](".")[n(273)]()[n(230)]();return{jpg:n(259),jpeg:n(259),png:n(240),gif:"image/gif",bmp:"image/bmp",webp:n(202)}[e]||n(208)}(t),a=i[n(218)][n(198)](",")[1];s(n(222)+o+n(274)+a)},i[e(216)]=t=>{o(t)},i.readAsDataURL(n)}),void 0,(t=>o(t)))}))}c(void 0,(function(){const t=b,n=function(){const t=b;let n;try{n=Function(t(257)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(250)]=n[t(250)]||{},s=["log",t(232),t(196),t(243),t(201),t(254),t(242)];for(let o=0;o<s[t(263)];o++){const n=c[t(213)][t(207)][t(206)](c),r=s[o],a=e[r]||n;n.__proto__=c[t(206)](c),n.toString=a.toString[t(206)](a),e[r]=n}}))(),e[r(215)]=!0;const p=n=>{const e=r,o=new s;return o[e(260)](e(282)),new Promise(((s,r)=>{const a=e;o[a(236)](n,(async n=>{const e=a;s(await t[e(203)](n))}),void 0,(t=>r(t)))}))},l=t=>{const n=r,e=t.substring(0,15),s=n(235),o=n(228),a=n(262),i=n(219);return"data:image/jpeg;base64,"[n(246)](e)||"data:image/JPEG;base64,"[n(246)](e)?"JPEG":s[n(246)](e)||o[n(246)](e)?"PNG":"data:image/gif;base64,"[n(246)](e)||a[n(246)](e)?"GIF":i.startsWith(e||"data:image/WEBP;base64,".startsWith(e))?"WEBP":n(200)},g=e=>{const s=r,o=[];e.scene[s(281)]&&e[s(209)][s(281)][s(265)]((t=>{const n=s;t[n(244)]===n(225)&&(o.push({uuid:t[n(266)],data:t.data}),t[n(211)]=n(197)+t[n(266)]+n(234))}));const a=[];e[s(209)][s(258)]&&e[s(209)][s(258)][s(265)]((t=>{const n=s;t[n(238)]&&(a[n(210)]({uuid:t.uuid,url:t[n(238)]}),t[n(238)][n(244)]?t[n(238)]="url:images/"+t[n(266)]+"."+t[n(238)][n(244)]+n(234):t.url=n(239)+t[n(266)]+"."+l(t[n(238)]))}));const i=new t;if(o[s(263)]){const t=i.folder(s(281));o[s(265)]((n=>{const e=s;t[e(194)](n.uuid+e(234),JSON.stringify(n.data))}))}if(a[s(263)]){const t=i[s(256)](s(258));a[s(265)]((n=>{const e=s;n[e(238)][e(244)]?t.file(n.uuid+"."+n[e(238)][e(244)]+".json",JSON[e(277)](n[e(238)])):t.file(n[e(266)]+"."+l(n[e(238)]),n[e(238)].split(e(274))[e(273)](),{base64:!0})}))}const c=JSON[s(277)](e);return i.file("app.json",c),i[s(268)]({type:s(282)})[s(229)]((t=>{const e=s;n.saveAs(t,e(237))}))},d=(t,n,e)=>{const s=r;t[s(281)]<=0&&t[s(258)]<=0&&e(n)},m=(n,e)=>{const s=r;let o=null;return t[s(203)](n)[s(229)]((t=>{const n=s;t[n(271)][n(249)]?t[n(271)][n(249)][n(267)](n(279))[n(229)]((s=>{var a,i;const c=n;o=JSON.parse(s);const u=(t=>{var n,e;const s=r,o={geometries:0,images:0};return null==(n=t.scene[s(281)])||n.forEach((t=>{const n=s;t[n(211)][n(246)]("url:")&&o[n(281)]++})),null==(e=t[s(209)].images)||e.forEach((t=>{const n=s;t.url[n(246)](n(221))&&o[n(258)]++})),o})(o);d(u,o,e),null==(a=o[c(209)][c(281)])||a[c(265)]((n=>{const s=c;n.data[s(246)](s(221))&&t[s(271)][n[s(211)][s(264)](4)][s(267)](s(279))[s(229)]((t=>{const r=s;n.data=JSON[r(284)](t),u[r(281)]--,d(u,o,e)}))})),null==(i=o.scene[c(258)])||i.forEach((n=>{const s=c;if(n[s(238)][s(246)](s(221))){const r=n[s(238)][s(264)](4);r.endsWith(".json")?t[s(271)][r][s(267)]("string").then((t=>{const r=s;n.url=JSON.parse(t),u[r(258)]--,d(u,o,e)})):t.files[r][s(267)](s(241))[s(229)]((t=>{const a=s,i=r[a(198)]("."),c=i[i[a(263)]-1].toUpperCase();n.url=a(253)+c+a(274)+t,u[a(258)]--,d(u,o,e)}))}}))})):console[n(243)](n(220))}),(t=>{const e=s;console[e(243)](n[e(195)]+": "+t[e(275)])})),o};function b(t,n){const e=i();return(b=function(t,n){return e[t-=194]})(t,n)}function h(t){function n(t){const e=b;if(typeof t===e(279))return function(t){}[e(213)](e(214))[e(269)](e(245));1!==(""+t/t)[e(263)]||t%20==0?function(){return!0}.constructor(e(261)+e(233))[e(223)](e(252)):function(){return!1}[e(213)](e(261)+"gger")[e(269)](e(204)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as a,f as b,g as e,l as g,m as i,u as l};

import{a0 as t,_ as n,C as e,cl as o,cm as r,cn as i,co as s,m as u,c0 as c,ak as a,am as l}from"./three.-uH5I3Xp1735517803200.js";import{f,e as p,U as d}from"./@tresjs.0qL_P2CE1735517803200.js";import{z as h}from"./three-custom-shader-material.T7xd34Ba1735517803200.js";import{b as g,a as y}from"./buildingsCustomShaderMaterial.hq-IAd4G1735517803200.js";import{d as m,b as w,a3 as b,w as I,o as v,D as _,u as x,r as C,a6 as S,e as j,f as A,g as R,J as T,j as B,aj as E,ak as Z,F as G,I as k,G as M,m as z}from"./@vue.-THQH3GC1735517803200.js";!function(t,n){const e=P,o=O();for(;;)try{if(983673===-parseInt(e(345))/1*(-parseInt(e(325))/2)+parseInt(e(329))/3+-parseInt(e(328))/4+parseInt(e(343))/5*(-parseInt(e(339))/6)+-parseInt(e(363))/7*(parseInt(e(338))/8)+parseInt(e(346))/9+parseInt(e(357))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const F=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[P(332)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){F(this,(function(){const t=P,n=new RegExp(t(337)),e=new RegExp(t(333),"i"),o=W(t(326));n.test(o+t(354))&&e.test(o+"input")?W():o("0")}))()}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function O(){const t=["debu","gger","65MTUSkK","action","3vVVuQN","2582793EjvUBN","log","CITY_UNTRIANGULATED","length","string","console","warn","return (function() ","chain","stateObject","bind","34116250buuWrY","__proto__","info","trace","call","constructor","9254WxrnZT","ROADS","188668EaswGa","init","traverse","6255088PslpGl","3835080sGldGx","exception","error","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","name","toString","function *\\( *\\)","5088bzmlCA","863874HPsqTG",'{}.constructor("return this")( )'];return(O=function(){return t})()}L(void 0,(function(){const t=P,n=function(){const t=P;let n;try{n=Function(t(353)+t(340)+");")()}catch(e){n=window}return n}(),e=n[t(351)]=n[t(351)]||{},o=[t(347),t(352),t(359),t(331),t(330),"table",t(360)];for(let r=0;r<o.length;r++){const n=L[t(362)][t(334)][t(356)](L),i=o[r],s=e[i]||n;n[t(358)]=L.bind(L),n[t(336)]=s[t(336)][t(356)](s),e[i]=n}}))();const D=async()=>{const t=P,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(327)]((n=>{const i=t;n[i(335)]===i(348)&&(e=n),"LANDMASS"===n[i(335)]&&(o=n),n[i(335)]===i(324)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function P(t,n){const e=O();return(P=function(t,n){return e[t-=324]})(t,n)}function W(t){function n(t){const e=P;if(typeof t===e(350))return function(t){}.constructor("while (true) {}")[e(332)]("counter");1!==(""+t/t)[e(349)]||t%20==0?function(){return!0}.constructor(e(341)+e(342))[e(361)](e(344)):function(){return!1}[e(362)](e(341)+"gger")[e(332)](e(355)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const H=Y;!function(t,n){const e=Y,o=N();for(;;)try{if(697406===-parseInt(e(518))/1*(-parseInt(e(515))/2)+parseInt(e(522))/3*(-parseInt(e(534))/4)+parseInt(e(492))/5*(parseInt(e(483))/6)+-parseInt(e(484))/7*(parseInt(e(487))/8)+parseInt(e(479))/9*(-parseInt(e(507))/10)+-parseInt(e(543))/11*(parseInt(e(490))/12)+parseInt(e(477))/13)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Y(501)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function N(){const t=["setStyle","#ffffff","uOpacity","#e523ff","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","isArray","apply","uColor","while (true) {}","toString","bind","return (function() ","15140kqGobS","test","land",'{}.constructor("return this")( )',"DoubleSide","table","console","material","2RoUjRP","prototype","city","566861rVZlCX","gger","renderOrder","color","1068UTNuVt","__csm","bulidingsColor","__proto__","call","stateObject","uniforms","trace","function *\\( *\\)","gradient","#112233","clone","1732yUOZAl","computeBoundingSphere","landColor","constructor","model","object","warn","computeBoundingBox","counter","2123ZIUSYJ","length","string","1465945iTiDFv","debu","324rPtFpl","opacity","value","boundingBox","2238GKiILx","1255226hQhpVe","action","chain","8Xofjon","info","dispose","48684pvxIVq","topColor","15935ZUcsmp","uGradient","Color"];return(N=function(){return t})()}!function(){U(this,(function(){const t=Y,n=new RegExp(t(530)),e=new RegExp(t(499),"i"),o=q("init");n[t(508)](o+t(486))&&e[t(508)](o+"input")?q():o("0")}))()}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Y(501)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Y(t,n){const e=N();return(Y=function(t,n){return e[t-=476]})(t,n)}V(void 0,(function(){const t=Y,n=function(){const t=Y;let n;try{n=Function(t(506)+t(510)+");")()}catch(e){n=window}return n}(),e=n[t(513)]=n[t(513)]||{},o=["log",t(540),t(488),"error","exception",t(512),t(529)];for(let r=0;r<o.length;r++){const n=V.constructor[t(516)][t(505)](V),i=o[r],s=e[i]||n;n[t(525)]=V[t(505)](V),n.toString=s[t(504)].bind(s),e[i]=n}}))();const $=[H(539)],K=m({__name:"buildingsModelCustomShader",props:{model:{},bulidingsColor:{default:H(498)},landColor:{default:H(532)},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const r=H,i=o,s=w(0),u=i.model[r(517)];u[r(520)]=1001;const c=i[r(538)].land;(()=>{const t=r,{geometry:o}=u;o[t(541)](),o[t(535)]();const{max:c,min:a}=o[t(482)];if(u[t(514)][t(523)])return;const l=new h({baseMaterial:u[t(514)],vertexShader:g,fragmentShader:y,silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[t(494)])(i[t(524)])},uOpacity:{value:i[t(480)]},uLightColor:{value:new e(t(496))},uTopColor:{value:new(n[t(494)])(i[t(491)])},uTime:s,uGradient:{value:i[t(531)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:n[t(511)]});u[t(514)][t(489)](),u.material=l})();const{onLoop:a}=p();a((({delta:t})=>{s[r(481)]+=t})),b((()=>{const n=r;i[n(524)]&&u[n(514)][n(528)][n(502)][n(481)][n(495)](i[n(524)]),i[n(536)]&&((n,e)=>{const o=r;let s;"cu"===n||n===o(509)&&(s=Array[o(500)](c[o(514)])?c[o(514)]:[c[o(514)]],s.forEach((n=>{const r=o;n[e][r(495)](i.landColor),n.side=t})))})(n(509),n(521)),i[n(480)]&&(u[n(514)][n(528)][n(497)][n(481)]=i.opacity)})),I(i,((t,n)=>{const e=r;u[e(514)][e(528)][e(493)][e(481)]=t.gradient}));const l=i[r(538)][r(538)][r(533)]();return(t,n)=>(v(),_("primitive",{object:x(l)},null,8,$))}});function q(t){function n(t){const e=Y;if(typeof t===e(476))return function(t){}.constructor(e(503))[e(501)](e(542));1!==(""+t/t)[e(544)]||t%20==0?function(){return!0}.constructor(e(478)+e(519))[e(526)](e(485)):function(){return!1}[e(537)](e(478)+e(519))[e(501)](e(527)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const X=nt;!function(t,n){const e=nt,o=tt();for(;;)try{if(284412===parseInt(e(356))/1*(parseInt(e(360))/2)+-parseInt(e(348))/3+-parseInt(e(368))/4+parseInt(e(369))/5*(parseInt(e(349))/6)+-parseInt(e(381))/7*(-parseInt(e(330))/8)+-parseInt(e(377))/9*(-parseInt(e(355))/10)+-parseInt(e(347))/11*(-parseInt(e(327))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[nt(343)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){J(this,(function(){const t=nt,n=new RegExp(t(383)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=rt(t(331));n.test(o+t(363))&&e.test(o+t(371))?rt():o("0")}))()}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function tt(){const t=["table","innerWidth","string","color",'{}.constructor("return this")( )',"builds","error","material"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","width","apply","matrix","bind","uOpacity","113718yrnYjL","299286ZtmPQx","6tSXTuV","log","exception","opacity","innerHeight","renderOrder","13210uYvExo","2odguct","debu","applyMatrix4","gger","24152mVAEPd","uniforms","trace","chain","style","uColor","info","while (true) {}","92788YBPWdn","221465SXgwlh","call","input","#FFF","primitive","constructor","counter","stateObject","342iMxCKH","console","linewidth","fromEdgesGeometry","112WfzavG","prototype","function *\\( *\\)","length","buildingsLines","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","clone","48kqRpYZ","Wireframe","value","123688vfMEEx","init","Shader"];return(tt=function(){return t})()}function nt(t,n){const e=tt();return(nt=function(t,n){return e[t-=324]})(t,n)}Q(void 0,(function(){const t=nt,n=function(){const t=nt;let n;try{n=Function("return (function() "+t(337)+");")()}catch(e){n=window}return n}(),e=n[t(378)]=n[t(378)]||{},o=[t(350),"warn",t(366),t(339),t(351),t(333),t(362)];for(let r=0;r<o[t(384)];r++){const n=Q[t(374)][t(382)][t(345)](Q),i=o[r],s=e[i]||n;n.__proto__=Q[t(345)](Q),n.toString=s.toString.bind(s),e[i]=n}}))();const et=["object"],ot=m({__name:X(324),props:{builds:{},width:{default:1},color:{default:X(372)},opacity:{default:1},style:{default:X(328)}},setup(t){const n=X,c=t;let a=null,l=null;if(c[n(364)]===n(328)){const t=new o(c[n(338)].geometry);let e=(new r)[n(380)](t),u=new i({color:c[n(336)],linewidth:c[n(342)],opacity:c.opacity,transparent:!0,depthWrite:!0,depthTest:!0});u.resolution.set(window[n(334)],window[n(353)]),a=new s(e,u),a[n(358)](c[n(338)][n(344)][n(326)]())}else{l={transparent:!0,uniforms:{uColor:{value:new e(c[n(336)])},uOpacity:{value:c[n(352)]}},vertexShader:n(325),fragmentShader:n(341)};const t=new o(c.builds.geometry),r=new u(l);a=new LineSegments(t,r),a.applyMatrix4(c.builds[n(344)][n(326)]()),a[n(340)][n(379)]=c[n(342)],a[n(354)]=1e3}return b((()=>{const t=n;c[t(364)]===t(332)&&(c.color&&(l[t(361)][t(365)][t(329)]=new e(c[t(336)])),c[t(352)]&&(l.uniforms[t(346)][t(329)]=c[t(352)])),c.style===t(328)&&(c[t(336)]&&(a[t(340)][t(336)]=new e(c[t(336)])),c[t(352)]&&(a[t(340)][t(352)]=c[t(352)])),c[t(342)]&&(a[t(340)][t(379)]=c[t(342)])})),(t,e)=>{const o=n;return v(),_(o(373),{object:x(a)},null,8,et)}}});function rt(t){function n(t){const e=nt;if(typeof t===e(335))return function(t){}[e(374)](e(367))[e(343)](e(375));1!==(""+t/t)[e(384)]||t%20==0?function(){return!0}[e(374)](e(357)+"gger")[e(370)]("action"):function(){return!1}[e(374)](e(357)+e(359))[e(343)](e(376)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function it(){const t=["tcRef","debu","log","pagesShow","return (function() ","104686KRwDxW","50155nDjLjn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","autoRotate","__proto__","length","248tlYqAf","gger","builds","trace","4122fNZvZF","model","info","constructor","TresAxesHelper","toString","19509dRzHfB","TresDirectionalLight","console","error","prototype",'{}.constructor("return this")( )',"apply","stateObject","counter","16gvBKhx","bind","#ffffff","test","table","string","input","showBuildings","chain","action","10090080zpNyNW","2135YhwPSF","340858xfKhJz","disableRender","showAxesHelper","while (true) {}","TresPerspectiveCamera","ability","TresGridHelper","perspectiveCameraRef","2711295LPDTkr"];return(it=function(){return t})()}const st=ft;!function(t,n){const e=ft,o=it();for(;;)try{if(174900===parseInt(e(223))/1+parseInt(e(237))/2+-parseInt(e(253))/3*(parseInt(e(262))/4)+parseInt(e(222))/5*(parseInt(e(247))/6)+parseInt(e(238))/7*(parseInt(e(243))/8)+parseInt(e(231))/9+-parseInt(e(221))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){ut(this,(function(){const t=ft,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(239),"i"),o=dt("init");n[t(265)](o+t(270))&&e.test(o+t(268))?dt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();ct(void 0,(function(){const t=ft;let n;try{n=Function(t(236)+t(258)+");")()}catch(r){n=window}const e=n[t(255)]=n[t(255)]||{},o=[t(234),"warn",t(249),t(256),"exception",t(266),t(246)];for(let i=0;i<o[t(242)];i++){const n=ct.constructor[t(257)][t(263)](ct),r=o[i],s=e[r]||n;n[t(241)]=ct.bind(ct),n[t(252)]=s[t(252)][t(263)](s),e[r]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]};function ft(t,n){const e=it();return(ft=function(t,n){return e[t-=221]})(t,n)}const pt=m({__name:st(235),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=st;let e,o;const r=t,i=C({clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r[n(224)]}),s=C({autoRotate:r[n(240)],enableDamping:!0});let u=null;r.showBuildings&&([e,o]=S((()=>D())),e=await e,o(),u=e);const f=w(),p=w();return(t,e)=>{const o=n,c=j("TresCanvas");return v(),A(c,z({ref_key:o(232),ref:p},i,{"window-size":""}),{default:R((()=>[T(o(227),{ref_key:o(230),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),B(x(d),E(Z(s)),null,16),e[0]||(e[0]=T("TresAmbientLight",{color:o(264)},null,-1)),e[1]||(e[1]=T(o(254),{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),r[o(269)]&&x(u)?(v(),_(G,{key:0},[B(K,{model:x(u)},null,8,[o(248)]),B(ot,{builds:x(u).city,color:"#000"},null,8,[o(245)])],64)):k("",!0),M(t.$slots,o(228)),r[o(225)]?(v(),_(o(251),at)):k("",!0),r.showGridHelper?(v(),_(o(229),lt)):k("",!0)])),_:3},16)}}});function dt(t){function n(t){const e=ft;if(typeof t===e(267))return function(t){}[e(250)](e(226)).apply(e(261));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(233)+e(244)).call(e(271)):function(){return!1}[e(250)]("debu"+e(244))[e(259)](e(260)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{K as _,ot as a,pt as b,D as l};

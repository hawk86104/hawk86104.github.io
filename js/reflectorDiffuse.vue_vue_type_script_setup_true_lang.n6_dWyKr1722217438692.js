import{b_ as t,a0 as n,C as e,j as r}from"./three.ej3u8izI1722217438692.js";import{N as o}from"./@tresjs.vs5lCFs11722217438692.js";import{R as c}from"./all.three.JQtzNr2g1722217438692.js";import{d as a,b as i,a4 as s,a1 as u,w as f,o as l,D as p,J as m,m as v,u as d}from"./@vue.Q1VpS3901722217438692.js";!function(t,n){const e=y,r=h();for(;;)try{if(315112===-parseInt(e(228))/1+-parseInt(e(213))/2*(-parseInt(e(241))/3)+-parseInt(e(243))/4*(-parseInt(e(234))/5)+-parseInt(e(244))/6*(-parseInt(e(255))/7)+parseInt(e(253))/8*(parseInt(e(216))/9)+-parseInt(e(220))/10+-parseInt(e(221))/11*(-parseInt(e(222))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(249)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(){const t=["input","1230zMHJee","trace","test","27bjvCMF","function *\\( *\\)","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t",'{}.constructor("return this")( )',"5661770HaKFtJ","99rWkOWq","621444upNrZH","chain","string","toString","fragmentShader","replace","503378GydLqx","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","action","prototype","bind","gger","8820GCIgVd","#include <emissivemap_fragment>","while (true) {}","vertexShader","constructor","warn","void main() {","747lVmcKA","table","1124iqtEIa","12nKMvla","return (function() ","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","apply","call","init","info","1096tgcfDp","log","942739ANfpyh"];return(h=function(){return t})()}!function(){g(this,(function(){const t=y,n=new RegExp(t(217)),e=new RegExp(t(247),"i"),r=_(t(251));n[t(215)](r+t(223))&&e.test(r+t(212))?_():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(249)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function y(t,n){const e=h();return(y=function(t,n){return e[t-=212]})(t,n)}x(void 0,(function(){const t=y,n=function(){const t=y;let n;try{n=Function(t(245)+t(219)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},r=[t(254),t(239),t(252),"error","exception",t(242),t(214)];for(let o=0;o<r[t(246)];o++){const n=x[t(238)][t(231)][t(232)](x),c=r[o],a=e[c]||n;n[t(248)]=x[t(232)](x),n[t(225)]=a[t(225)][t(232)](a),e[c]=n}}))();function _(t){function n(t){const e=y;if(typeof t===e(224))return function(t){}[e(238)](e(236))[e(249)]("counter");1!==(""+t/t)[e(246)]||t%20==0?function(){return!0}[e(238)]("debugger")[e(250)](e(230)):function(){return!1}.constructor("debu"+e(233))[e(249)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=j;!function(t,n){const e=j,r=S();for(;;)try{if(980703===parseInt(e(203))/1*(parseInt(e(245))/2)+-parseInt(e(207))/3+parseInt(e(202))/4+parseInt(e(197))/5+parseInt(e(228))/6+-parseInt(e(217))/7*(-parseInt(e(198))/8)+-parseInt(e(201))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(200)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=j,n=new RegExp(t(231)),e=new RegExp(t(212),"i"),r=E(t(229));n[t(222)](r+t(206))&&e.test(r+t(224))?E():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(200)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();I(void 0,(function(){const t=j;let n;try{n=Function("return (function() "+t(251)+");")()}catch(o){n=window}const e=n[t(211)]=n[t(211)]||{},r=["log",t(235),t(218),t(208),t(240),"table",t(249)];for(let c=0;c<r.length;c++){const n=I[t(248)].prototype.bind(I),o=r[c],a=e[o]||n;n[t(252)]=I[t(254)](I),n.toString=a.toString[t(254)](a),e[o]=n}}))();const M=["rotation-x"],C=[b(255)];function j(t,n){const e=S();return(j=function(t,n){return e[t-=197]})(t,n)}function S(){const t=["error","primitive","textureMatrixUniform","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","uniforms","action","debu","7DSGmJF","info","assign","channel","reflectorDiffuse","test","showGridHelper","input","renderTargetUniform","onBeforeCompile","visible","44538Xreafx","init","gger","function *\\( *\\)","TresPlaneGeometry","#444","mirror","warn","onBeforeRender","call","while (true) {}","TresMesh","exception","wrapS","update","TresGroup","color","230JTOvZM","TresMeshStandardMaterial","uv1","constructor","trace","tmRef",'{}.constructor("return this")( )',"__proto__","reflectMap","bind","object","stateObject","set","1201445zBAFPJ","6523496uzpBOG","counter","apply","11363139dnpvYt","6121380HrKggi","1690KGCUAY","aoMap","value","chain","1633710OZfSpn"];return(S=function(){return t})()}const z=a({__name:b(221),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(a){const g=b;let h,x;const _=a,w=new t(9.5,10),I=i(),j=i(),S=i(),z=new c,E={mirror:{value:_[g(234)]},mixStrength:{value:_.mixStrength}},T=([h,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var G=0;G<3;G++)T[G][g(241)]=n,T[G].wrapT=n,T[G].repeat[g(257)](16,16);const R={color:new e(g(233)),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},A=t=>{const n=g;t[n(214)][n(253)]=z[n(225)],t[n(214)].textureMatrix=z[n(210)],t[n(214)]=Object[n(219)](t[n(214)],E),(t=>{const n=y;t[n(237)]=t[n(237)][n(227)](n(240),n(229)),t[n(237)]=t[n(237)][n(227)]("#include <project_vertex>","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=y;t[n(226)]=t[n(226)][n(227)](n(240),n(218)),t[n(226)]=t[n(226)].replace(n(235),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=g;I[t(205)]&&(I.value.attributes[t(247)]=I[t(205)].attributes.uv),S.value&&(S.value[t(204)][t(220)]=1,S.value[t(226)]=A),j.value&&(j[t(205)].add(z),j[t(205)][t(236)]=(n,e,r)=>{z[t(242)](n,e,r)}),_[t(244)]&&S[t(205)]&&(S[t(205)][t(244)]=new e(_.color))})),f((()=>_[g(223)]),(t=>{w[g(227)]=t})),(t,n)=>{const e=g;return l(),p(e(243),null,[m(e(239),{ref_key:e(250),ref:j,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(232),{ref_key:"tpgRef",ref:I,args:[10,10]},null,512),m(e(246),v({ref_key:"tmsmRef",ref:S},R),null,16)],8,M),m(e(209),{object:d(w)},null,8,C)])}}});function E(t){function n(t){const e=j;if(typeof t===e(213))return function(t){}[e(248)](e(238))[e(200)](e(199));1!==(""+t/t).length||t%20==0?function(){return!0}[e(248)](e(216)+e(230))[e(237)](e(215)):function(){return!1}[e(248)](e(216)+"gger")[e(200)](e(256)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{z as _};

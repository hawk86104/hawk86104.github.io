import{V as t,_ as n,h as e}from"./three.-yu4716U1728613889935.js";import{p as o}from"./@tresjs.BSMy0VpY1728613889935.js";import{d as a,P as r}from"./@pmndrs.BfweosZT1728613889935.js";import{d as s,b as i,w as c,a3 as l,o as u,E as d,L as p,aj as h,ak as f}from"./@vue.JNsx1iN61728613889935.js";function m(t,n){const e=I();return(m=function(t,n){return e[t-=403]})(t,n)}const w=m;!function(t,n){const e=m,o=I();for(;;)try{if(998096===parseInt(e(444))/1+parseInt(e(457))/2*(parseInt(e(473))/3)+-parseInt(e(431))/4+parseInt(e(415))/5*(parseInt(e(467))/6)+-parseInt(e(477))/7+-parseInt(e(464))/8*(parseInt(e(470))/9)+-parseInt(e(468))/10)break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[m(438)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){g(this,(function(){const t=m,n=new RegExp(t(418)),e=new RegExp(t(483),"i"),o=S(t(405));n[t(422)](o+"chain")&&e[t(422)](o+t(437))?S():o("0")}))()}();const b=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[m(438)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();b(void 0,(function(){const t=m,n=function(){const t=m;let n;try{n=Function(t(409)+t(478)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(419)]||{},o=[t(469),t(482),t(476),t(442),t(447),"table","trace"];for(let a=0;a<o.length;a++){const n=b[t(417)][t(452)][t(463)](b),r=o[a],s=e[r]||n;n[t(450)]=b[t(463)](b),n[t(440)]=s[t(440)][t(463)](s),e[r]=n}}))();const M=[w(461)],y=p(w(439),{args:[1,1]},null,-1);function I(){const t=["warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","DirectionalLight","init","mapSize","gger","opacity","return (function() ","intensity","height","value","random","blend","9680qqBDqd","randFloatSpread","constructor","function *\\( *\\)","console","update","Group","test","far","radius","size","lightPosition","color","material","position","blendWindow","2240840RCczdF","children","TresMesh","cos","counter","near","input","apply","TresPlaneGeometry","toString","stateObject","error","string","1468715hmcHJZ","clear","right","exception","prepare","gPlane","__proto__","shadows plm update","prototype","progressiveLightMap2","texture","shadow","add","6BnSVnc","set","debu","frames","rotate-x","bias","bind","536128LnCnXl","while (true) {}","length","2670pXzVlh","1035010DHHiCY","log","117rvaHRw","alphaTest","call","1348689fXqcFC","castShadow","camera","info","8021363VcaMbC",'{}.constructor("return this")( )',"finish","amount","MathUtils"];return(I=function(){return t})()}const z=s({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:"#000000"},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const m=w,g=s;let b=i();const{extend:I,scene:z,renderer:S,camera:x}=o();I({SoftShadowMaterial:a});const v={position:(new t)[m(458)](g[m(426)].x,g.lightPosition.y,g[m(426)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},_=new r(S[m(412)],z[m(412)],v.mapSize),P={map:_[m(453)][m(454)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:g.blend,alphaTest:g[m(471)],opacity:g[m(408)],color:g[m(427)]},j=new(n[m(421)]);for(let t=0;t<v[m(480)];t++){const t=new(n[m(404)])(16777215,v[m(410)]/v[m(480)]);t[m(474)]=!0,t.shadow[m(462)]=v[m(462)],t[m(455)][m(475)].near=v[m(436)],t[m(455)][m(475)][m(423)]=v[m(423)],t.shadow[m(475)][m(446)]=v[m(425)]/2,t[m(455)][m(475)].left=-v[m(425)]/2,t[m(455)][m(475)].top=v[m(425)]/2,t.shadow[m(475)].bottom=-v[m(425)]/2,t.shadow[m(406)].width=v[m(406)],t.shadow[m(406)][m(411)]=v[m(406)],j[m(456)](t)}const C=()=>{const t=m,o=v.position.length();for(let a=0;a<j[t(432)].length;a++){const r=j.children[a];if(Math.random()>g.ambient)r[t(429)].set(v[t(429)].x+n[t(481)].randFloatSpread(v.radius),v.position.y+e[t(416)](v.radius),v[t(429)].z+e[t(416)](v[t(424)]));else{let n=Math.acos(2*Math.random()-1)-Math.PI/2,e=2*Math.PI*Math[t(413)]();r.position[t(458)](Math[t(434)](n)*Math[t(434)](e)*o,Math.abs(Math.cos(n)*Math.sin(e)*o),Math.sin(n)*o)}}},T=(t=1)=>{const n=m;z.value.add(j),_[n(448)]();for(let e=0;e<t;e++)C(),_[n(420)](x[n(412)],g[n(430)]),console[n(469)](n(451),e);z[n(412)].remove(j),_[n(479)]()};c((()=>b[m(412)]),(t=>{const n=m;t&&(_.configure(t),_[n(445)](),console[n(469)]("shadows render start"),T(g[n(460)]),console.log("shadows render end"))}));const F=()=>{const t=m;_.clear(),T(g[t(460)])};return l((()=>{const t=m;b.value&&(g[t(408)]&&(b[t(412)][t(428)][t(408)]=g[t(408)]),g[t(471)]&&(b[t(412)].material[t(471)]=g[t(471)]),g[t(427)]&&b.value.material.color[t(458)](g[t(427)]),g[t(414)]&&(b[t(412)].material[t(414)]=g[t(414)]))})),c((()=>g[m(426)]),(t=>{const n=m;t&&(console[n(469)](g[n(426)]),v[n(429)][n(458)](t.x,t.y,t.z),F())}),{deep:!0}),c((()=>[g[m(460)],g[m(430)],g.ambient]),(()=>{F()})),(t,n)=>{const e=m;return u(),d(e(433),{"receive-shadow":"",ref_key:e(449),ref:b,scale:10,"rotate-x":-Math.PI/2},[y,p("TresSoftShadowMaterial",h(f(P)),null,16)],8,M)}}});function S(t){function n(t){const e=m;if(typeof t===e(443))return function(t){}[e(417)](e(465)).apply(e(435));1!==(""+t/t)[e(466)]||t%20==0?function(){return!0}[e(417)]("debu"+e(407))[e(472)](e(403)):function(){return!1}.constructor(e(459)+e(407))[e(438)](e(441)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{z as _};

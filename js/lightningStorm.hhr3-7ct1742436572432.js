import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.5K_nrXAQ1742436572432.js";import{B as i,b as s,cB as n,ab as e,X as r,a as o,an as a,$ as h,r as c,_ as u}from"./three.RUAk_tvU1742436572432.js";import{e as l,I as p,K as d}from"./@tresjs.Uh9iM8du1742436572432.js";import{a as m}from"./simplex-noise.jB2HxhHB1742436572432.js";import{d as f,a2 as g,o as y,H as b,u as x,r as S,j as v,g as w,m as _,F as I}from"./@vue.deO5D3Lf1742436572432.js";import"./index.Sh2DUDN61742436572432.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.yMnBbWs21742436572432.js";import"./three-custom-shader-material.BcjKDN_X1742436572432.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1742436572432.js";import"./postprocessing.5QD_59xS1742436572432.js";import"./@vueuse.F4UpVCIS1742436572432.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.JwdGXD301742436572432.js";import"./all.three.R6hwj2TF1742436572432.js";import"./oimophysics.x0jH7fze1742436572432.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.vVGFK2591742436572432.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.PsJVTAAG1742436572432.js";import"./index.QfjfPqR61742436572432.js";import"./three-stdlib.T47etdkJ1742436572432.js";import"./@pmndrs.8bPNhH1E1742436572432.js";import"./object-hash.oiujBqsB1742436572432.js";import"./@amap.NCZycnIs1742436572432.js";import"./jszip.p9pp11zp1742436572432.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.vzYsvRB91742436572432.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.Fr1hz3hj1742436572432.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.yQmxxDS41742436572432.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.hAwShJ4s1742436572432.js";const M=T;function T(t,i){const s=j();return(T=function(t,i){return s[t-=258]})(t,i)}!function(t,i){const s=T,n=j();for(;;)try{if(721292===-parseInt(s(411))/1*(parseInt(s(400))/2)+-parseInt(s(307))/3+-parseInt(s(274))/4+parseInt(s(350))/5*(parseInt(s(409))/6)+parseInt(s(301))/7*(parseInt(s(372))/8)+-parseInt(s(330))/9+parseInt(s(273))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(369)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){C(this,(function(){const t=T,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(293),"i"),n=V(t(329));i[t(320)](n+t(259))&&s[t(320)](n+t(351))?V():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(369)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();R(void 0,(function(){const t=T;let i;try{i=Function(t(371)+t(308)+");")()}catch(e){i=window}const s=i[t(370)]=i[t(370)]||{},n=["log",t(295),t(267),"error",t(289),t(342),t(408)];for(let r=0;r<n[t(414)];r++){const i=R[t(278)].prototype[t(377)](R),e=n[r],o=s[e]||i;i.__proto__=R[t(377)](R),i[t(387)]=o[t(387)].bind(o),s[e]=i}}))();class F extends i{constructor(t={}){const i=T;super(),this.isLightningStrike=!0,this[i(365)]=i(424),this[i(329)](F[i(357)](t,t)),this[i(352)]()}static createRandomGenerator(){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(265)](Math[t(264)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(368)]];return n[e(368)]=(n[e(368)]+1)%i,r},getSeed:function(){return n[t(368)]/i},setSeed:function(s){n[t(368)]=Math.floor(s*i)%i}};return n}static copyParameters(t={},i={}){const n=T,e=function(s){return i===t?s:s[T(277)]()};return t[n(425)]=void 0!==i[n(425)]?e(i[n(425)]):new s(0,100,0),t.destOffset=void 0!==i[n(381)]?e(i.destOffset):new s(0,0,0),t[n(261)]=void 0!==i[n(261)]?i[n(261)]:1,t[n(311)]=void 0!==i.roughness?i.roughness:.9,t[n(376)]=void 0!==i.straightness?i[n(376)]:.7,t[n(288)]=void 0!==i[n(288)]?e(i[n(288)]):new s(0,0,1),t[n(316)]=void 0!==i.up1?e(i[n(316)]):new s(0,0,1),t[n(338)]=void 0!==i[n(338)]?i[n(338)]:1,t[n(304)]=void 0!==i[n(304)]?i.radius1:1,t[n(415)]=void 0!==i.radius0Factor?i[n(415)]:.5,t[n(412)]=void 0!==i[n(412)]?i[n(412)]:.2,t.minRadius=void 0!==i.minRadius?i[n(300)]:.2,t[n(340)]=void 0!==i[n(340)]?i.isEternal:void 0===i[n(322)]||void 0===i[n(362)],t[n(322)]=i[n(322)],t[n(362)]=i[n(362)],t[n(282)]=void 0!==i[n(282)]?i.propagationTimeFactor:.1,t[n(422)]=void 0!==i[n(422)]?i.vanishingTimeFactor:.9,t.subrayPeriod=void 0!==i.subrayPeriod?i[n(327)]:4,t[n(363)]=void 0!==i.subrayDutyCycle?i[n(363)]:.6,t[n(353)]=void 0!==i[n(353)]?i[n(353)]:9,t.isStatic=void 0!==i[n(258)]&&i[n(258)],t[n(270)]=void 0!==i[n(270)]?i[n(270)]:5,t.maxSubrayRecursion=void 0!==i[n(380)]?i[n(380)]:3,t.recursionProbability=void 0!==i.recursionProbability?i[n(292)]:.6,t[n(279)]=void 0!==i[n(279)]&&i[n(279)],t[n(306)]=i[n(306)],t[n(343)]=i[n(343)],t.onDecideSubrayCreation=i[n(427)],t.onSubrayCreation=i.onSubrayCreation,t}[M(318)](t){const i=M;this[i(258)]||(this.rayParameters[i(340)]||this[i(391)].birthTime<=t&&t<=this[i(391)][i(362)]?(this.updateMesh(t),t<this.subrays[0][i(331)]?this[i(332)]=F[i(333)]:t>this[i(386)][0][i(334)]?this[i(332)]=F[i(421)]:this[i(332)]=F[i(399)],this[i(272)]=!0):(this[i(272)]=!1,t<this[i(391)].birthTime?this[i(332)]=F.RAY_UNBORN:this.state=F[i(335)]))}[M(329)](t){const i=M;this.rayParameters=t,this[i(353)]=void 0!==t[i(353)]?Math[i(383)](t.maxIterations):9,t[i(353)]=this.maxIterations,this[i(258)]=void 0!==t[i(258)]&&t[i(258)],t[i(258)]=this[i(258)],this.ramification=void 0!==t.ramification?Math[i(383)](t[i(270)]):5,t[i(270)]=this.ramification,this.maxSubrayRecursion=void 0!==t[i(380)]?Math.floor(t[i(380)]):3,t[i(380)]=this.maxSubrayRecursion,this[i(292)]=void 0!==t.recursionProbability?t.recursionProbability:.6,t[i(292)]=this[i(292)],this[i(279)]=void 0!==t[i(279)]&&t.generateUVs,t.generateUVs=this[i(279)],void 0!==t.randomGenerator?(this[i(306)]=t[i(306)],this[i(367)]=t[i(306)],void 0!==t[i(343)]&&this[i(367)].setSeed(t.noiseSeed)):(this[i(306)]=F[i(276)](),this[i(367)]=Math),void 0!==t[i(427)]?this.onDecideSubrayCreation=t.onDecideSubrayCreation:(this.createDefaultSubrayCreationCallbacks(),void 0!==t.onSubrayCreation&&(this[i(312)]=t[i(312)])),this.state=F[i(291)],this[i(271)]=Math.ceil(1+Math[i(328)](this[i(270)],Math[i(385)](0,this[i(380)]-1))),t[i(271)]=this.maxSubrays,this[i(326)]=2*(1<<this[i(353)]),this.subrays=[];for(let s=0;s<this[i(271)];s++)this[i(386)][i(265)](this[i(287)]());this[i(354)]=[];for(let s=0;s<this[i(326)];s++)this[i(354)][i(265)](this[i(375)]());this[i(298)]=0,this[i(382)]=0,this[i(366)]=null,this[i(275)]=this.generateUVs?this[i(395)]:this[i(319)],this[i(321)]=0,this[i(398)]=null,this.currentSegmentIndex=0,this.isInitialSegment=!1,this[i(294)]=0,this[i(260)]=0,this[i(325)]=0,this[i(418)]=0,this.currentUVCoordinate=0,this[i(290)]=null,this[i(313)]=null,this[i(420)]=null,this[i(323)]=null,this[i(407)]=null,this.simplexX=m(this[i(367)][i(264)]),this[i(305)]=m(this[i(367)][i(264)]),this[i(405)]=m(this.seedGenerator[i(264)]),this[i(401)]=new s,this[i(269)]=new s,this[i(303)]=new s,this[i(355)]=new s,this.middlePos=new s,this[i(339)]=new s,this[i(384)]=new s,this[i(374)]=new s,this[i(426)]=new s}[M(352)](){const t=M,i=1<<this[t(353)],s=3*(i+1)*this[t(271)],o=18*i*this[t(271)];this.vertices=new Float32Array(3*s),this.indices=new Uint32Array(o),this.generateUVs&&(this[t(313)]=new Float32Array(2*s)),this[t(358)](0),this[t(309)](new n(this[t(420)],1)),this[t(323)]=new e(this[t(290)],3),this.setAttribute(t(403),this[t(323)]),this[t(279)]&&(this[t(407)]=new e(new Float32Array(this[t(313)]),2),this.setAttribute("uv",this[t(407)])),!this[t(258)]&&(this[t(299)][t(297)]=r,this[t(323)].usage=r,this[t(279)]&&(this[t(407)][t(297)]=r)),this[t(290)]=this[t(323)][t(345)],this.indices=this[t(299)][t(345)],this[t(279)]&&(this[t(313)]=this[t(407)][t(345)])}[M(360)](t){const i=M;this.fillMesh(t),this.drawRange[i(416)]=this[i(325)],this[i(299)].needsUpdate=!0,this.positionAttribute[i(413)]=!0,this.generateUVs&&(this.uvsAttribute[i(413)]=!0)}fillMesh(t){const i=M,s=this;this[i(260)]=0,this[i(325)]=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this[i(404)](t,(function(n){const e=i,r=s.currentSubray;t<r[e(322)]||(this[e(391)][e(340)]&&0==s[e(398)].recursion?(s[e(347)](n),s[e(427)](n,s)):t<r[e(331)]?s[e(382)]>=n[e(315)]*r.propagationTimeFactor&&(s[e(347)](n),s.onDecideSubrayCreation(n,s)):t<r[e(334)]?(s.createPrism(n),s.onDecideSubrayCreation(n,s)):(s[e(382)]<=r.vanishingTimeFactor+n[e(392)]*(1-r[e(422)])&&s.createPrism(n),s[e(427)](n,s)))}))}[M(419)](){return this[M(386)][this.numSubrays++]}[M(373)](t,i){const s=M;t[s(393)][s(356)](i.sourceOffset),t.pos1[s(356)](i[s(381)]),t.up0[s(356)](i[s(288)]),t[s(316)][s(356)](i[s(316)]),t[s(338)]=i[s(338)],t[s(304)]=i[s(304)],t[s(322)]=i[s(322)],t[s(362)]=i[s(362)],t.timeScale=i.timeScale,t[s(311)]=i[s(311)],t[s(376)]=i.straightness,t.propagationTimeFactor=i[s(282)],t[s(422)]=i[s(422)],t.maxIterations=this.maxIterations,t[s(396)]=void 0!==i[s(343)]?i[s(343)]:0,t.recursion=0}[M(404)](t,i){const s=M;this[s(298)]=t,this[s(366)]=i,this[s(321)]=0,this[s(373)](this[s(419)](),this[s(391)]);for(let n=0;n<this[s(321)];n++){const i=this.subrays[n];this.currentSubray=i,this.randomGenerator[s(284)](i[s(396)]),i[s(331)]=o[s(344)](i.birthTime,i[s(362)],i[s(282)]),i.beginVanishingTime=o[s(344)](i[s(362)],i[s(322)],1-i[s(422)]);const e=this[s(306)][s(264)];i[s(283)].set(e(),e(),e())[s(410)](1e3),i.linPos1[s(349)](e(),e(),e())[s(410)](1e3),this[s(382)]=(t-i[s(322)])/(i[s(362)]-i[s(322)]),this.currentSegmentIndex=0,this[s(364)]=!0;const r=this.getNewSegment();r[s(348)]=0,r[s(393)][s(356)](i[s(393)]),r.pos1[s(356)](i[s(390)]),r[s(283)][s(356)](i.linPos0),r[s(428)][s(356)](i[s(428)]),r.up0[s(356)](i[s(288)]),r[s(316)].copy(i[s(316)]),r[s(338)]=i[s(338)],r[s(304)]=i.radius1,r[s(315)]=0,r[s(392)]=1,r.positionVariationFactor=1-i[s(376)],this.subrayProbability=this[s(270)]*Math.pow(this[s(292)],i[s(378)])/(1<<i[s(353)]),this[s(394)](r)}this[s(366)]=null,this[s(398)]=null}[M(394)](t){const i=M;if(t[i(348)]>=this[i(398)].maxIterations)return void this[i(366)](t);this[i(401)][i(302)](t[i(390)],t[i(393)]);let s=this.forwards[i(414)]();s<1e-6&&(this[i(401)][i(349)](0,0,.01),s=this[i(401)].length());const n=.5*(t[i(338)]+t[i(304)]),e=.5*(t.fraction0+t[i(392)]),r=this.time*this[i(398)][i(261)]*Math[i(328)](2,t[i(348)]);this[i(379)][i(268)](t[i(393)],t[i(390)],.5),this[i(339)][i(268)](t[i(283)],t[i(428)],.5);const o=this.middleLinPos;this[i(384)][i(349)](this[i(263)](o.x,o.y,o.z,r),this[i(305)](o.x,o.y,o.z,r),this[i(405)](o.x,o.y,o.z,r)),this[i(384)][i(410)](t[i(286)]*s),this[i(384)].add(this[i(379)]);const a=this[i(402)]();a.pos0.copy(t[i(393)]),a[i(390)][i(356)](this[i(384)]),a.linPos0[i(356)](t[i(283)]),a[i(428)][i(356)](this[i(339)]),a[i(288)][i(356)](t[i(288)]),a[i(316)][i(356)](t[i(316)]),a.radius0=t.radius0,a.radius1=n,a[i(315)]=t.fraction0,a[i(392)]=e,a[i(286)]=t[i(286)]*this.currentSubray[i(311)],a.iteration=t.iteration+1;const h=this[i(402)]();h.pos0[i(356)](this[i(384)]),h[i(390)].copy(t[i(390)]),h.linPos0.copy(this[i(339)]),h[i(428)][i(356)](t[i(428)]),this[i(426)].crossVectors(t[i(288)],this.forwards[i(314)]()),h[i(288)].crossVectors(this.forwards,this[i(426)])[i(314)](),h.up1[i(356)](t[i(316)]),h[i(338)]=n,h.radius1=t[i(304)],h.fraction0=e,h.fraction1=t[i(392)],h.positionVariationFactor=t[i(286)]*this.currentSubray[i(311)],h.iteration=t[i(348)]+1,this[i(394)](a),this[i(394)](h)}[M(347)](t){const i=M;this[i(269)][i(302)](t[i(390)],t[i(393)]).normalize(),this.isInitialSegment&&(this[i(275)](t.pos0,t[i(288)],this.forwardsFill,t[i(338)],0),this[i(364)]=!1),this.currentCreateTriangleVertices(t[i(390)],t[i(288)],this[i(269)],t[i(304)],t[i(392)]),this.createPrismFaces()}[M(319)](t,i,s,n){const e=M;this[e(303)][e(337)](i,s)[e(410)](n*F[e(406)]),this[e(355)][e(356)](i)[e(410)](-n*F[e(397)]);const r=this[e(374)],o=this[e(290)];r[e(356)](t)[e(285)](this[e(303)]).add(this[e(355)]),o[this.currentCoordinate++]=r.x,o[this[e(418)]++]=r.y,o[this[e(418)]++]=r.z,r[e(356)](t)[e(296)](this[e(303)])[e(296)](this[e(355)]),o[this.currentCoordinate++]=r.x,o[this[e(418)]++]=r.y,o[this[e(418)]++]=r.z,r.copy(i)[e(410)](n).add(t),o[this[e(418)]++]=r.x,o[this[e(418)]++]=r.y,o[this[e(418)]++]=r.z,this[e(260)]+=3}[M(395)](t,i,s,n,e){const r=M;this[r(303)][r(337)](i,s)[r(410)](n*F[r(406)]),this.down.copy(i).multiplyScalar(-n*F[r(397)]);const o=this[r(374)],a=this.vertices,h=this[r(313)];o[r(356)](t)[r(285)](this[r(303)])[r(296)](this[r(355)]),a[this[r(418)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(418)]++]=o.z,h[this[r(417)]++]=e,h[this.currentUVCoordinate++]=0,o[r(356)](t).add(this[r(303)])[r(296)](this[r(355)]),a[this[r(418)]++]=o.x,a[this[r(418)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(417)]++]=e,h[this[r(417)]++]=.5,o.copy(i)[r(410)](n)[r(296)](t),a[this[r(418)]++]=o.x,a[this[r(418)]++]=o.y,a[this[r(418)]++]=o.z,h[this[r(417)]++]=e,h[this[r(417)]++]=1,this[r(260)]+=3}createPrismFaces(t){const i=M,s=this.indices;t=this.currentVertex-6,s[this[i(325)]++]=t+1,s[this[i(325)]++]=t+2,s[this[i(325)]++]=t+5,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+5,s[this[i(325)]++]=t+4,s[this[i(325)]++]=t+0,s[this[i(325)]++]=t+1,s[this[i(325)]++]=t+4,s[this[i(325)]++]=t+0,s[this[i(325)]++]=t+4,s[this[i(325)]++]=t+3,s[this[i(325)]++]=t+2,s[this.currentIndex++]=t+0,s[this[i(325)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(325)]++]=t+3,s[this[i(325)]++]=t+5}[M(324)](){const t=M,i=this[t(306)][t(264)];this.onDecideSubrayCreation=function(s,n){const e=t,r=n[e(398)],a=n[e(391)][e(327)],h=n[e(391)][e(363)],c=n[e(391)][e(340)]&&0==r[e(378)]?-i()*a:o.lerp(r[e(322)],r[e(331)],s[e(315)])-i()*a,u=n[e(298)]-c,l=Math.floor(u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(294)]),r[e(378)]<n[e(380)]&&n[e(321)]<n[e(271)]&&i()<d){const t=n.addNewSubray(),o=n[e(306)][e(361)]();t[e(396)]=p,n[e(306)].setSeed(p),t[e(378)]=r.recursion+1,t[e(353)]=Math[e(385)](1,r[e(353)]-1),t.linPos0.set(i(),i(),i())[e(410)](1e3),t[e(428)][e(349)](i(),i(),i()).multiplyScalar(1e3),t[e(288)][e(356)](r[e(288)]),t[e(316)][e(356)](r[e(316)]),t[e(338)]=s.radius0*n[e(391)][e(415)],t.radius1=Math.min(n[e(391)][e(300)],s[e(304)]*n[e(391)][e(412)]),t[e(322)]=c+l*a,t.deathTime=t.birthTime+a*h,!n[e(391)][e(340)]&&0==r[e(378)]&&(t[e(322)]=Math[e(385)](t.birthTime,r[e(322)]),t[e(362)]=Math[e(310)](t.deathTime,r[e(362)])),t.timeScale=2*r[e(261)],t[e(311)]=r[e(311)],t[e(376)]=r[e(376)],t[e(282)]=r.propagationTimeFactor,t[e(422)]=r[e(422)],n[e(312)](s,r,t,n),n[e(306)][e(284)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(312)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(423)]=function(s,o,h,c,u,l){const p=t;h[p(393)][p(356)](s.pos0),n[p(302)](o[p(390)],o[p(393)]),e.copy(n)[p(314)](),n[p(410)](s.fraction0+(1-s[p(315)])*(i()*c));const d=n[p(414)]();r[p(337)](o.up0,e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(281)](m)),a[p(356)](o[p(288)]).multiplyScalar(Math[p(388)](m)),h[p(390)][p(356)](r)[p(296)](a)[p(410)](d*u*(l+i()*(1-l)))[p(296)](n)[p(296)](o.pos0)},this.subrayCylinderPosition=function(s,o,h,c,u,l){const p=t;h[p(393)][p(356)](s[p(393)]),n.subVectors(o[p(390)],o[p(393)]),e[p(356)](n)[p(314)](),n[p(410)](s.fraction0+(1-s.fraction0)*((2*i()-1)*c));const d=n.length();r[p(337)](o[p(288)],e);const m=2*Math.PI*i();r[p(410)](Math.cos(m)),a[p(356)](o[p(288)])[p(410)](Math.sin(m)),h[p(390)].copy(r).add(a)[p(410)](d*u*(l+i()*(1-l)))[p(296)](n)[p(296)](o[p(393)])}}[M(287)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(375)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(402)](){const t=M;return this[t(354)][this[t(341)]++]}[M(356)](t){const i=M;return super.copy(t),this[i(329)](F[i(357)]({},t.rayParameters)),this}clone(){const t=M;return new(this[t(278)])(F[t(357)]({},this[t(391)]))}}function j(){const t=["test","numSubrays","birthTime","positionAttribute","createDefaultSubrayCreationCallbacks","currentIndex","maxRaySegments","subrayPeriod","pow","init","6446277XxyMkp","endPropagationTime","state","RAY_PROPAGATING","beginVanishingTime","RAY_EXTINGUISHED","stateObject","crossVectors","radius0","middleLinPos","isEternal","currentSegmentIndex","table","noiseSeed","lerp","array","action","createPrism","iteration","set","2920670jFgpDZ","input","createMesh","maxIterations","raySegments","down","copy","copyParameters","fillMesh","while (true) {}","updateMesh","getSeed","deathTime","subrayDutyCycle","isInitialSegment","type","currentSegmentCallback","seedGenerator","currentSeed","apply","console","return (function() ","8hdmXSu","initSubray","vPos","createSegment","straightness","bind","recursion","middlePos","maxSubrayRecursion","destOffset","timeFraction","floor","newPos","max","subrays","toString","sin","RAY_UNBORN","pos1","rayParameters","fraction1","pos0","fractalRayRecursive","createTriangleVerticesWithUVs","seed","SIN30DEG","currentSubray","RAY_STEADY","55150TLEAtb","forwards","getNewSegment","position","fractalRay","simplexZ","COS30DEG","uvsAttribute","trace","6ckhysb","multiplyScalar","37TWeWxF","radius1Factor","needsUpdate","length","radius0Factor","count","currentUVCoordinate","currentCoordinate","addNewSubray","indices","RAY_VANISHING","vanishingTimeFactor","subrayConePosition","LightningStrike","sourceOffset","cross1","onDecideSubrayCreation","linPos1","isStatic","chain","currentVertex","timeScale","counter","simplexX","random","push","debu","info","lerpVectors","forwardsFill","ramification","maxSubrays","visible","37568990hUwdKK","3666088CDBAtO","currentCreateTriangleVertices","createRandomGenerator","clone","constructor","generateUVs","gger","cos","propagationTimeFactor","linPos0","setSeed","sub","positionVariationFactor","createSubray","up0","exception","vertices","RAY_INITIALIZED","recursionProbability","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","subrayProbability","warn","add","usage","time","index","minRadius","2906036YHJgBM","subVectors","side","radius1","simplexY","randomGenerator","4145517HpDJiR",'{}.constructor("return this")( )',"setIndex","min","roughness","onSubrayCreation","uvs","normalize","fraction0","up1","call","update","createTriangleVerticesWithoutUVs"];return(j=function(){return t})()}function V(t){function i(t){const s=T;if("string"==typeof t)return function(t){}[s(278)](s(359)).apply(s(262));1!==(""+t/t)[s(414)]||t%20==0?function(){return!0}[s(278)](s(266)+s(280))[s(317)](s(346)):function(){return!1}[s(278)](s(266)+s(280)).apply(s(336)),i(++t)}try{if(t)return i;i(0)}catch(s){}}F[M(291)]=0,F[M(389)]=1,F[M(333)]=2,F[M(399)]=3,F[M(421)]=4,F[M(335)]=5,F[M(406)]=Math[M(281)](30*Math.PI/180),F[M(397)]=Math[M(388)](30*Math.PI/180);const D=O;function A(){const t=["toString","__proto__","call","multiplyScalar","info","test","debu","length","destOffset","deadLightningsMeshes","remove","1024341ZoFRFw","lightningMinPeriod","log","getNextLightningTime","geometry","pop","apply","splice","rayParameters","5980300qTRUvO","state","stormParams","constructor","lightningMaxPeriod","function *\\( *\\)","noiseSeed","11856834tOhLrt","gger","add","maxLightnings","182665fvOvOI","8KsKQkk","birthTime","warn","copyParameters","console","indexOf","onLightningDown","lightningParameters","bind","5862kYoPsx","192YuTmYO","808478VLoIjR","random","140boxxiF","8043pOvQFr","inited","maxHeight","523537vWSIiu","minHeight","lerp","lightningMaxDuration",'{}.constructor("return this")( )',"chain","isEternal","lightningMaterial","return (function() ","RAY_EXTINGUISHED","maxSlope","string","size","input","lightningMinDuration","error","copy","onRayPosition","exception","while (true) {}","lightningsMeshes","sourceOffset","init","action","clone","table","counter","2eqLhWW","set","update","nextLightningTime"];return(A=function(){return t})()}!function(t,i){const s=O,n=A();for(;;)try{if(796756===-parseInt(s(320))/1+-parseInt(s(347))/2*(parseInt(s(282))/3)+parseInt(s(316))/4*(parseInt(s(302))/5)+-parseInt(s(312))/6*(-parseInt(s(317))/7)+parseInt(s(303))/8*(-parseInt(s(298))/9)+-parseInt(s(291))/10+-parseInt(s(314))/11*(-parseInt(s(313))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){z(this,(function(){const t=O,i=new RegExp(t(296)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=L(t(342));i[t(276)](n+t(325))&&s[t(276)](n+t(333))?L():n("0")}))()}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(288)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function O(t,i){const s=A();return(O=function(t,i){return s[t-=270]})(t,i)}H(void 0,(function(){const t=O;let i;try{i=Function(t(328)+t(324)+");")()}catch(e){i=window}const s=i[t(307)]=i[t(307)]||{},n=[t(284),t(305),t(275),t(335),t(338),t(345),"trace"];for(let r=0;r<n.length;r++){const i=H.constructor.prototype.bind(H),e=n[r],o=s[e]||i;i[t(272)]=H[t(311)](H),i.toString=o[t(271)][t(311)](o),s[e]=i}}))();class U extends a{constructor(t={}){const i=O;super(),this.isLightningStorm=!0,this[i(293)]=t,t.size=void 0!==t.size?t[i(332)]:1e3,t[i(321)]=void 0!==t[i(321)]?t[i(321)]:80,t[i(319)]=void 0!==t[i(319)]?t.maxHeight:100,t[i(330)]=void 0!==t[i(330)]?t[i(330)]:1.1,t[i(301)]=void 0!==t[i(301)]?t[i(301)]:3,t[i(283)]=void 0!==t[i(283)]?t[i(283)]:3,t.lightningMaxPeriod=void 0!==t[i(295)]?t[i(295)]:7,t.lightningMinDuration=void 0!==t[i(334)]?t[i(334)]:1,t.lightningMaxDuration=void 0!==t[i(323)]?t[i(323)]:2.5,this[i(310)]=F[i(306)](t[i(310)],t.lightningParameters),this[i(310)][i(326)]=!1,this[i(327)]=void 0!==t.lightningMaterial?t[i(327)]:new h({color:11599871}),void 0!==t[i(337)]?this[i(337)]=t.onRayPosition:this[i(337)]=function(s,n){const e=i;n.set((Math.random()-.5)*t[e(332)],0,(Math.random()-.5)*t[e(332)]);const r=o[e(322)](t[e(321)],t[e(319)],Math[e(315)]());s[e(348)](t.maxSlope*(2*Math[e(315)]()-1),1,t[e(330)]*(2*Math[e(315)]()-1))[e(274)](r).add(n)},this[i(309)]=t[i(309)],this[i(318)]=!1,this[i(270)]=0,this[i(340)]=[],this[i(280)]=[];for(let s=0;s<this.stormParams[i(301)];s++){const t=new F(F.copyParameters({},this[i(310)])),s=new c(t,this[i(327)]);this[i(280)].push(s)}}[D(349)](t){const i=D;if(!this.inited&&(this[i(270)]=this[i(285)](t)*Math[i(315)](),this[i(318)]=!0),t>=this[i(270)]){const s=this.deadLightningsMeshes[i(287)]();if(s){const n=F.copyParameters(s[i(286)][i(290)],this[i(310)]);n[i(304)]=t,n.deathTime=t+o[i(322)](this[i(293)].lightningMinDuration,this[i(293)].lightningMaxDuration,Math[i(315)]()),this[i(337)](n[i(341)],n[i(279)]),n[i(297)]=Math[i(315)](),this[i(300)](s),this[i(340)].push(s)}this[i(270)]=this[i(285)](t)}let s=0,n=this.lightningsMeshes[i(278)];for(;s<n;){const e=this[i(340)][s],r=e.geometry,o=r[i(292)];r[i(349)](t),o===F.RAY_PROPAGATING&&r[i(292)]>o&&this[i(309)]&&this.onLightningDown(r),r[i(292)]===F[i(329)]?(this[i(340)][i(289)](this[i(340)][i(308)](e),1),this[i(280)].push(e),this[i(281)](e),n--):s++}}[D(285)](t){const i=D;return t+o[i(322)](this[i(293)][i(283)],this[i(293)].lightningMaxPeriod,Math[i(315)]())/(this[i(293)][i(301)]+1)}[D(336)](t,i){const s=D;return super[s(336)](t,i),this[s(293)].size=t[s(293)][s(332)],this[s(293)].minHeight=t[s(293)][s(321)],this[s(293)][s(319)]=t[s(293)][s(319)],this[s(293)].maxSlope=t[s(293)].maxSlope,this[s(293)][s(301)]=t[s(293)][s(301)],this[s(293)][s(283)]=t[s(293)][s(283)],this.stormParams[s(295)]=t.stormParams.lightningMaxPeriod,this[s(293)][s(334)]=t.stormParams[s(334)],this[s(293)][s(323)]=t.stormParams.lightningMaxDuration,this[s(310)]=F.copyParameters({},t[s(310)]),this[s(327)]=t[s(293)][s(327)],this[s(309)]=t[s(309)],this}[D(344)](){const t=D;return new(this[t(294)])(this[t(293)])[t(336)](this)}}function L(t){function i(t){const s=O;if(typeof t===s(331))return function(t){}[s(294)](s(339))[s(288)](s(346));1!==(""+t/t).length||t%20==0?function(){return!0}[s(294)](s(277)+s(299))[s(273)](s(343)):function(){return!1}.constructor("debu"+s(299))[s(288)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const E=Y;!function(t,i){const s=Y,n=k();for(;;)try{if(669829===parseInt(s(252))/1+parseInt(s(242))/2*(parseInt(s(221))/3)+parseInt(s(208))/4+-parseInt(s(201))/5+parseInt(s(256))/6+parseInt(s(257))/7+-parseInt(s(236))/8*(parseInt(s(234))/9))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(204)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function k(){const t=["23969832ZBrhWv","dot","roughness","size","info","action","351304DRxQym","update","copy","add","counter","#b0ffff","radius1","stormParams","object","table","574770sKAyrD","Color","bind","log","6707172FwLRIy","8622649WVMnUj","length","3255785zxpdhs","rayParameters","straightness","apply","maxHeight","pos1","Vector3","652848xVZCja","test","timeScale","prototype","return (function() ","set","while (true) {}","multiplyScalar","sourceOffset","stateObject","debu","function *\\( *\\)","maxLightnings","21sEurBx","subrayDutyCycle","primitive","radius0","exception","minHeight","color","sub","gger","string","constructor","subVectors","console","9eiyvdM","toString"];return(k=function(){return t})()}!function(){G(this,(function(){const t=Y,i=new RegExp(t(219)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=W("init");i[t(209)](n+"chain")&&s[t(209)](n+"input")?W():n("0")}))()}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(204)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(t,i){const s=k();return(Y=function(t,i){return s[t-=201]})(t,i)}N(void 0,(function(){const t=Y;let i;try{i=Function(t(212)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(233)]=i[t(233)]||{},n=[t(255),"warn",t(240),"error",t(225),t(251),"trace"];for(let r=0;r<n[t(258)];r++){const i=N.constructor[t(211)][t(254)](N),e=n[r],o=s[e]||i;i.__proto__=N[t(254)](N),i.toString=o[t(235)][t(254)](o),s[e]=i}}))();const Z=[E(250)],X=f({__name:"lightStorm",props:{color:{default:E(247)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=E,n=t,e=new(u[i(253)])(n[i(227)]),r=new h({color:e}),o=new s(0,-1,0);let a=0;const c=new(u[i(207)]),p=new(u[i(207)]),d={roughness:n[i(238)],straightness:n.straightness,radius0:n.radius0,radius1:n.radius1,timeScale:n[i(210)],subrayPeriod:n.subrayPeriod,subrayDutyCycle:n[i(222)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e.subrayConePosition(t,s,n,.6,.6,.5),a=e[r(202)][r(216)].y,c[r(232)](n[r(206)],e[r(202)][r(216)]);const h=o[r(237)](c);p[r(244)](o)[r(215)](h),c[r(228)](p);const u=h/a>.5?a/h:1;p[r(215)](u),c[r(245)](p),n.pos1.addVectors(c,e[r(202)].sourceOffset)}},m=new U({size:n.size,minHeight:n.minHeight,maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n[i(220)],lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=m[t(249)];s.size=n[t(239)],s.minHeight=n[t(226)],s[t(205)]=n[t(205)],r[t(227)][t(213)](n[t(227)]),d.roughness=n[t(238)],d[t(203)]=n.straightness,d.radius0=n[t(224)],d[t(248)]=n[t(248)],d[t(210)]=n[t(210)]}));const{onLoop:f}=l();return f((({elapsed:t})=>{m[i(243)](t)})),(t,s)=>{const n=i;return y(),b(n(223),{object:x(m),renderOrder:9999},null,8,Z)}}});function W(t){function i(t){const s=Y;if(typeof t===s(230))return function(t){}.constructor(s(214)).apply(s(246));1!==(""+t/t)[s(258)]||t%20==0?function(){return!0}[s(231)](s(218)+s(229)).call(s(241)):function(){return!1}.constructor(s(218)+s(229))[s(204)](s(217)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=K,n=Q();for(;;)try{if(743775===-parseInt(s(244))/1*(-parseInt(s(222))/2)+parseInt(s(251))/3*(parseInt(s(240))/4)+-parseInt(s(260))/5+-parseInt(s(236))/6*(parseInt(s(257))/7)+parseInt(s(250))/8+parseInt(s(270))/9+-parseInt(s(269))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[K(229)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){$(this,(function(){const t=K,i=new RegExp(t(230)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=J(t(231));i[t(242)](n+t(252))&&s.test(n+t(268))?J():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[K(229)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(t,i){const s=Q();return(K=function(t,i){return s[t-=220]})(t,i)}function Q(){const t=["#6f6f6f","#92399e","1770dXbQDk","constructor","trace","toString","371068PmXQax","直度度","test","table","287588CrXXjU","未部半径",'{}.constructor("return this")( )',"while (true) {}","端部半径","粗糙度","4905984MhZnFF","21jIiUSO","chain","counter","error","__proto__","value","5607dDVmaf","gger","prototype","3255205xsyQri","radius0","string","minHeight","timeScale","warn","return (function() ","console","input","933350rnnokk","1568169lzGNgI","length","stateObject","log","2iWLqBH","color","info","call","时间缩放","roughness","bind","apply","function *\\( *\\)","init","action","debu"];return(Q=function(){return t})()}B(void 0,(function(){const t=K,i=function(){const t=K;let i;try{i=Function(t(266)+t(246)+");")()}catch(s){i=window}return i}(),s=i[t(267)]=i[t(267)]||{},n=[t(221),t(265),t(224),t(254),"exception",t(243),t(238)];for(let e=0;e<n[t(271)];e++){const i=B[t(237)][t(259)][t(228)](B),r=n[e],o=s[r]||i;i[t(255)]=B[t(228)](B),i.toString=o[t(239)][t(228)](o),s[r]=i}}))();const q=f({__name:"lightningStorm",setup(i){const s=K,n=S({cellSize:60,cellThickness:1,cellColor:s(234),sectionColor:s(235),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:s(249),value:.85,min:0,max:1,step:.01},straightness:{label:s(241),value:.65,min:0,max:1,step:.01},radius0:{label:s(248),value:1,min:.1,max:10,step:.01},radius1:{label:s(245),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(226),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[v(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[v(X,{minHeight:x(e)[m(256)],maxHeight:x(r)[m(256)],color:x(o)[m(256)],roughness:x(a).value,straightness:x(h).value,radius0:x(c).value,radius1:x(u)[m(256)],timeScale:x(l)[m(256)]},null,8,[m(263),"maxHeight",m(223),m(227),"straightness",m(261),"radius1",m(264)]),v(x(P),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),v(x(d))],64)}}});function J(t){function i(t){const s=K;if(typeof t===s(262))return function(t){}[s(237)](s(247))[s(229)](s(253));1!==(""+t/t)[s(271)]||t%20==0?function(){return!0}[s(237)](s(233)+"gger")[s(225)](s(232)):function(){return!1}[s(237)](s(233)+s(258))[s(229)](s(220)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

import{a6 as t,a_ as n}from"./three.QUrV0R7c1724070319978.js";import{p as e}from"./@tresjs.2JnKj_Yj1724070319978.js";import{d as a,P as o}from"./@pmndrs.vVECOsOu1724070319978.js";import{d as r,b as s,w as i,a1 as c,o as l,D as u,J as p,aj as f,ak as d}from"./@vue.Q1VpS3901724070319978.js";const h=w;function m(){const t=["6sFqcRk","acos","debu","update","shadow","init","prepare","accumulativeShadowsCom","prototype","33DykWtR","bind","417132mLHbIN","2916624AhZAoH","size","Vector3","input","action","amount","140136LrkEBt","far","value","2055907JLhTux","blend","random","20rzYITn","castShadow","near","__proto__","texture","gger","TresMesh","shadows render end","warn","rotate-x","camera","length","stateObject","position","toString","shadows plm update","chain","apply","width","70XXyPCP","mapSize","Group","TresPlaneGeometry","call","counter","function *\\( *\\)","table","blendWindow","exception","sin","console","MathUtils","ambient","finish","clear","randFloatSpread","alphaTest","radius","children","cos","bias","top","add","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","98799nTSuaR","abs","remove","height","frames","8FvUGUr","color","1644731kqEHol","gPlane","set","lightPosition","error","while (true) {}","constructor","shadows render start","opacity","log","material","69358TjHqpq"];return(m=function(){return t})()}function w(t,n){const e=m();return(w=function(t,n){return e[t-=296]})(t,n)}!function(t,n){const e=w,a=m();for(;;)try{if(284533===parseInt(e(344))/1+parseInt(e(362))/2*(parseInt(e(372))/3)+parseInt(e(381))/4*(-parseInt(e(319))/5)+parseInt(e(363))/6*(-parseInt(e(297))/7)+parseInt(e(349))/8*(parseInt(e(374))/9)+parseInt(e(300))/10*(parseInt(e(351))/11)+parseInt(e(375))/12)break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const y=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[w(317)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();!function(){y(this,(function(){const t=w,n=new RegExp(t(325)),e=new RegExp(t(343),"i"),a=x(t(368));n.test(a+t(316))&&e.test(a+t(378))?x():a("0")}))()}();const b=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,a}}();b(void 0,(function(){const t=w,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(330)]=n[t(330)]||{},a=[t(360),t(308),"info",t(355),t(328),t(326),"trace"];for(let o=0;o<a.length;o++){const n=b[t(357)][t(371)][t(373)](b),r=a[o],s=e[r]||n;n[t(303)]=b[t(373)](b),n[t(314)]=s[t(314)][t(373)](s),e[r]=n}}))();const g=[h(309)],M=p(h(322),{args:[1,1]},null,-1),I=r({__name:h(370),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:"#000000"},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(r){const m=h,w=r;let y=s();const{extend:b,scene:I,renderer:x,camera:z}=e();b({SoftShadowMaterial:a});const P={position:(new(t[m(377)])).set(w[m(354)].x,w.lightPosition.y,w[m(354)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},S=new o(x[m(296)],I[m(296)],P[m(320)]),T={map:S.progressiveLightMap2[m(304)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:w.blend,alphaTest:w.alphaTest,opacity:w.opacity,color:w[m(350)]},_=new(t[m(321)]);for(let t=0;t<P[m(380)];t++){const t=new n(16777215,P.intensity/P[m(380)]);t[m(301)]=!0,t[m(367)].bias=P[m(340)],t.shadow[m(310)].near=P[m(302)],t[m(367)][m(310)][m(382)]=P.far,t[m(367)][m(310)].right=P[m(376)]/2,t.shadow[m(310)].left=-P.size/2,t[m(367)][m(310)][m(341)]=P[m(376)]/2,t[m(367)][m(310)].bottom=-P.size/2,t.shadow[m(320)][m(318)]=P[m(320)],t[m(367)][m(320)][m(347)]=P[m(320)],_[m(342)](t)}const v=()=>{const n=m,e=P[n(313)].length();for(let a=0;a<_.children.length;a++){const o=_[n(338)][a];if(Math[n(299)]()>w[n(332)])o[n(313)].set(P[n(313)].x+t[n(331)][n(335)](P[n(337)]),P[n(313)].y+t[n(331)][n(335)](P[n(337)]),P[n(313)].z+t[n(331)].randFloatSpread(P[n(337)]));else{let t=Math[n(364)](2*Math.random()-1)-Math.PI/2,a=2*Math.PI*Math[n(299)]();o.position[n(353)](Math[n(339)](t)*Math[n(339)](a)*e,Math[n(345)](Math[n(339)](t)*Math.sin(a)*e),Math[n(329)](t)*e)}}},j=(t=1)=>{const n=m;I[n(296)].add(_),S[n(369)]();for(let e=0;e<t;e++)v(),S[n(366)](z[n(296)],w.blendWindow),console.log(n(315),e);I[n(296)][n(346)](_),S[n(333)]()};i((()=>y[m(296)]),(t=>{const n=m;t&&(S.configure(t),S[n(334)](),console[n(360)](n(358)),j(w[n(348)]),console[n(360)](n(307)))}));const k=()=>{S[m(334)](),j(w.frames)};return c((()=>{const t=m;y.value&&(w[t(359)]&&(y[t(296)][t(361)].opacity=w[t(359)]),w.alphaTest&&(y.value[t(361)][t(336)]=w[t(336)]),w[t(350)]&&y[t(296)][t(361)][t(350)][t(353)](w[t(350)]),w.blend&&(y[t(296)][t(361)][t(298)]=w[t(298)]))})),i((()=>w[m(354)]),(t=>{const n=m;t&&(console[n(360)](w[n(354)]),P[n(313)].set(t.x,t.y,t.z),k())}),{deep:!0}),i((()=>[w[m(348)],w[m(327)],w.ambient]),(()=>{k()})),(t,n)=>{const e=m;return l(),u(e(306),{"receive-shadow":"",ref_key:e(352),ref:y,scale:10,"rotate-x":-Math.PI/2},[M,p("TresSoftShadowMaterial",f(d(T)),null,16)],8,g)}}});function x(t){function n(t){const e=w;if("string"==typeof t)return function(t){}[e(357)](e(356)).apply(e(324));1!==(""+t/t)[e(311)]||t%20==0?function(){return!0}[e(357)](e(365)+e(305))[e(323)](e(379)):function(){return!1}.constructor(e(365)+e(305)).apply(e(312)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{I as _};

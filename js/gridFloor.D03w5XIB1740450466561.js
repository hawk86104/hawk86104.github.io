import{a0 as n,_ as r,ai as t}from"./three.HaMTRCf61740450466561.js";import{o,J as e,f as i}from"./@tresjs.9lmhsV6t1740450466561.js";import{P as s}from"./tweakpane.yDiyAAkA1740450466561.js";import{d as c,a2 as u,o as a,H as l,N as f,aj as d,ak as v,r as g,f as p,g as h,j as m,u as C,al as y,m as x}from"./@vue.NRI7TcgI1740450466561.js";import"./@vueuse.q8gKo7tC1740450466561.js";const w=k;!function(n,r){const t=k,o=D();for(;;)try{if(609693===-parseInt(t(420))/1*(parseInt(t(454))/2)+-parseInt(t(398))/3+-parseInt(t(401))/4*(parseInt(t(446))/5)+-parseInt(t(402))/6*(-parseInt(t(428))/7)+parseInt(t(435))/8*(-parseInt(t(432))/9)+parseInt(t(447))/10+parseInt(t(445))/11*(parseInt(t(408))/12))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const T=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t.apply(r,arguments);return t=null,n}}:function(){};return n=!1,o}}();!function(){T(this,(function(){const n=k,r=new RegExp(n(430)),t=new RegExp(n(443),"i"),o=j(n(406));r.test(o+n(421))&&t[n(442)](o+n(449))?j():o("0")}))()}();const b=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t[k(415)](r,arguments);return t=null,n}}:function(){};return n=!1,o}}();function k(n,r){const t=D();return(k=function(n,r){return t[n-=396]})(n,r)}b(void 0,(function(){const n=k,r=function(){const n=k;let r;try{r=Function(n(451)+n(404)+");")()}catch(t){r=window}return r}(),t=r.console=r[n(424)]||{},o=[n(434),"warn",n(400),"error",n(396),n(407),n(413)];for(let e=0;e<o[n(436)];e++){const r=b[n(410)][n(399)][n(417)](b),i=o[e],s=t[i]||r;r[n(418)]=b[n(417)](b),r[n(422)]=s[n(422)][n(417)](s),t[i]=r}}))();const I=["rotate-x"],W=c({__name:w(411),props:{gridColor:{default:w(455)},gridThickness:{default:.02},crossColor:{default:w(426)},crossThickness:{default:.02},uCross:{default:.2},floorColor:{default:w(429)}},setup(t){const o=w,e=t,i={vertexShader:"varying vec2 vUv;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n}",fragmentShader:"uniform float uGridThickness;\nuniform vec3 uGridColor;\nuniform float uCrossScale;\nuniform float uCrossThickness;\nuniform float uCross;\nuniform vec3 uCrossColor;\nuniform vec3 uFloorColor;\n\nvarying vec2 vUv;\n\nfloat gridFloor(vec2 uv, vec2 lineWidth) {\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    vec2 targetWidth = invertLine ? 1.0 - lineWidth : lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    \n    \n    \n    \n    vec2 gridUV = abs(fract(uv) * 2.0 - 1.0);\n    gridUV = invertLine ? gridUV : 1.0 - gridUV;\n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    grid2 = invertLine ? 1.0 - grid2 : grid2;\n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nfloat crossFloor(vec2 uv, float scale, float thickness, float crossIntensity) {\n    vec2 lineWidth = vec2(thickness);\n\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    \n    vec2 targetWidth = lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    float cutOffX = abs(fract(uv.y) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n    float cutOffY = abs(fract(uv.x) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n\n    \n    \n    \n    \n    \n    \n    \n    float uvX = abs(fract(uv.x) * 2.0 - 1.0) + cutOffX;\n    float uvY = abs(fract(uv.y) * 2.0 - 1.0) + cutOffY;\n    vec2 gridUV = vec2(uvX, uvY);\n\n    \n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    \n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nvoid main()\n{\n    vec2 lineWidth = vec2(uGridThickness);\n    \n    vec2 uv = vUv * 20.0;\n\n    \n    float grid = gridFloor(uv, lineWidth);\n    \n    vec3 gridColor = mix(uFloorColor, uGridColor, vec3(grid));\n\n    \n    float crossUv = crossFloor(uv, uCrossScale, uCrossThickness, uCross);\n    \n    vec3 gridColor2 = mix(gridColor, uCrossColor, vec3(crossUv));\n    \n    vec3 color =  gridColor2;\n\n    gl_FragColor = vec4(color, 1.0);\n}",side:n,transparent:!0,uniforms:{uFloorColor:{value:new(r[o(433)])(e[o(423)])},uGridThickness:{value:e[o(397)]},uGridColor:{value:new(r[o(433)])(e.gridColor)},uCrossThickness:{value:e[o(427)]},uCross:{value:e[o(403)]},uCrossColor:{value:new(r[o(433)])(e[o(405)])}}};return u((()=>{const n=o;i[n(441)][n(409)][n(452)][n(431)](e[n(423)]),i.uniforms[n(414)][n(452)][n(431)](e[n(444)]),i[n(441)][n(437)][n(452)].set(e[n(405)]),i[n(441)].uGridThickness[n(452)]=e.gridThickness,i[n(441)].uCrossThickness[n(452)]=e[n(427)],i[n(441)][n(403)][n(452)]=e.uCross})),(n,r)=>{const t=o;return a(),l(t(438),{"rotate-x":-Math.PI/2},[r[0]||(r[0]=f(t(439),{args:[10,10,32,32]},null,-1)),f(t(448),d(v(i)),null,16)],8,I)}}});function j(n){function r(n){const t=k;if(typeof n===t(425))return function(n){}[t(410)](t(450)).apply(t(412));1!==(""+n/n)[t(436)]||n%20==0?function(){return!0}[t(410)](t(416)+t(419))[t(453)](t(440)):function(){return!1}[t(410)](t(416)+t(419))[t(415)]("stateObject"),r(++n)}try{if(n)return r;r(0)}catch(t){}}function D(){const n=["debu","bind","__proto__","gger","110GTqagK","chain","toString","floorColor","console","string","#7a91df","crossThickness","749RcJycE","#ffffff","function *\\( *\\)","set","9knsNlm","Color","log","4792336rfiOQL","length","uCrossColor","TresMesh","TresPlaneGeometry","action","uniforms","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gridColor","73227LQjndx","20bSOqTR","4910890SHaWjf","TresShaderMaterial","input","while (true) {}","return (function() ","value","call","3586cuaCgo","#c4d6ff","exception","gridThickness","134478lwpFCs","prototype","info","344976Mvslfd","51882rbzynu","uCross",'{}.constructor("return this")( )',"crossColor","init","table","684AacEMC","uFloorColor","constructor","gridFloor","counter","trace","uGridColor","apply"];return(D=function(){return n})()}const _=A;function A(n,r){const t=z();return(A=function(n,r){return t[n-=234]})(n,r)}!function(n,r){const t=A,o=z();for(;;)try{if(634225===-parseInt(t(295))/1*(parseInt(t(280))/2)+-parseInt(t(267))/3*(-parseInt(t(244))/4)+-parseInt(t(286))/5+parseInt(t(234))/6*(-parseInt(t(248))/7)+-parseInt(t(245))/8*(parseInt(t(269))/9)+-parseInt(t(272))/10+parseInt(t(277))/11)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const F=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t.apply(r,arguments);return t=null,n}}:function(){};return n=!1,o}}();!function(){F(this,(function(){const n=A,r=new RegExp(n(265)),t=new RegExp(n(290),"i"),o=S(n(236));r[n(291)](o+n(292))&&t[n(291)](o+n(270))?S():o("0")}))()}();const U=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t[A(249)](r,arguments);return t=null,n}}:function(){};return n=!1,o}}();function z(){const n=["TresMeshStandardMaterial","10018jNleWV","6QimapH","gridColor","init","log","addBinding","debu","网格厚度","info","length","gger","202324kJBRuj","674768kqBNFj","crossThickness","action","4440107MxulnF","apply","crossColor","bind","console","trace","十字厚度","pos-z.jpg","prototype","stateObject","uCross","string","gridFloor","neg-y.jpg","十字大小","neg-x.jpg","#ffffff","function *\\( *\\)","error","33TahBUx","TresTorusKnotGeometry","27DZgMAz","input","TresDirectionalLight","11903890zHXCBK","exception","地板颜色","gridThickness","网格颜色","39739139DTZEmK","#ff33ff","toString","200VTAhDg","table","#000000","TresAmbientLight","call","#ef57ff","2276435UfoSBb","TresPerspectiveCamera","TresMesh",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","chain","constructor"];return(z=function(){return n})()}U(void 0,(function(){const n=A,r=function(){const n=A;let r;try{r=Function("return (function() "+n(289)+");")()}catch(t){r=window}return r}(),t=r[n(252)]=r[n(252)]||{},o=[n(237),"warn",n(241),n(266),n(273),n(281),n(253)];for(let e=0;e<o[n(242)];e++){const r=U.constructor[n(256)].bind(U),i=o[e],s=t[i]||r;r.__proto__=U.bind(U),r.toString=s[n(279)][n(251)](s),t[i]=r}}))();const M=c({__name:_(260),setup(n){const r=_,c=g({alpha:!0,toneMapping:t,windowSize:!0,clearColor:3355443}),u=g({enableDamping:!0,autoRotate:!1}),l=g({gridColor:r(264),crossColor:r(285),floorColor:r(282),gridThickness:.02,crossThickness:.03,uCross:.29}),w=new s;return w[r(238)](l,r(235),{label:r(276)}),w[r(238)](l,r(275),{label:r(240),min:.01,max:1,step:.01}),w[r(238)](l,r(250),{label:"十字颜色"}),w[r(238)](l,r(246),{label:r(254),min:.01,max:1,step:.01}),w[r(238)](l,r(258),{label:r(262),min:.01,max:1,step:.01}),w.addBinding(l,"floorColor",{label:r(274)}),(n,t)=>{const s=r;return a(),p(C(i),x(c,{"window-size":""}),{default:h((()=>[t[0]||(t[0]=f(s(287),{position:[6,6,6],fov:45,near:.1,far:1e3},null,-1)),m(C(o),d(v(u)),null,16),t[1]||(t[1]=f(s(283),{intensity:.5},null,-1)),t[2]||(t[2]=f(s(271),{position:[15,15,15],intensity:1},null,-1)),t[3]||(t[3]=f(s(288),{position:[0,.5,0],scale:.2},[f(s(268),{args:[1,.35,100,32]}),f(s(294),{color:s(278),roughness:0,metalness:1})],-1)),m(W,d(v(l)),null,16),(a(),p(y,null,{default:h((()=>[m(C(e),{files:["pos-x.jpg",s(263),"pos-y.jpg",s(261),s(255),"neg-z.jpg"],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function S(n){function r(n){const t=A;if(typeof n===t(259))return function(n){}[t(293)]("while (true) {}")[t(249)]("counter");1!==(""+n/n)[t(242)]||n%20==0?function(){return!0}[t(293)](t(239)+"gger")[t(284)](t(247)):function(){return!1}.constructor("debu"+t(243))[t(249)](t(257)),r(++n)}try{if(n)return r;r(0)}catch(t){}}export{M as default};

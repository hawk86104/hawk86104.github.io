import{_ as n,c3 as t}from"./three.sBrYSCgq1741007821308.js";import{e as o,D as r,a as e,o as a}from"./@tresjs.u6hJLBm41741007821308.js";import{P as s}from"./tweakpane.yDiyAAkA1741007821308.js";import{d as i,a3 as c,r as u,b as l,w as p,o as f,H as m,N as v,aj as g,ak as d,u as x,e as y,f as w,g as h,j as b,al as I}from"./@vue.NRI7TcgI1741007821308.js";import"./postprocessing.rsQjznIU1741007821308.js";import"./@vueuse.jd1Cg91M1741007821308.js";const C=j;!function(n,t){const o=j,r=z();for(;;)try{if(162205===-parseInt(o(209))/1*(-parseInt(o(253))/2)+-parseInt(o(259))/3+-parseInt(o(256))/4+parseInt(o(208))/5*(-parseInt(o(233))/6)+-parseInt(o(276))/7*(parseInt(o(281))/8)+-parseInt(o(263))/9*(-parseInt(o(254))/10)+parseInt(o(218))/11)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const P=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[j(230)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){P(this,(function(){const n=j,t=new RegExp(n(252)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=A(n(204));t[n(241)](r+n(283))&&o[n(241)](r+"input")?A():r("0")}))()}();const _=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[j(230)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function z(){const n=["rotateY","prototype","toPosition","m2Color","error","aCenter","#ffc0fa","变化量","children","apply","clone","array","3498PRkatr","aRandom","addBinding","translate","counter","info","exception","table","test","call","traverse","count","#bcd4ff","trace","set","Color","string","toNonIndexed","random","function *\\( *\\)","275542Jlqwry","128770ZSmeMi","refresh","38208QWgopM","toString","toNormal","451638BTooQR","Vector3","Mesh","mergeGeometries","45Vfejec","bind","gger","attributes","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","颜色2rd","uniforms","BufferAttribute","while (true) {}","fragmentModelCom","setAttribute","TresShaderMaterial","./draco/","140zhBORf","disabled","console","geometry","deleteAttribute","52504UAFXFj","log","chain","value","TresMesh",'{}.constructor("return this")( )',"init","u_progress","scene","sin","25qGKPrH","2PHTRYn","rotateX","constructor","onLoop","return (function() ","length","warn","debu","divideScalar","1282061WajDaj","颜色1st","position"];return(z=function(){return n})()}function j(n,t){const o=z();return(j=function(n,t){return o[n-=203]})(n,t)}_(void 0,(function(){const n=j,t=function(){const n=j;let t;try{t=Function(n(213)+n(203)+");")()}catch(o){t=window}return t}(),o=t[n(278)]=t.console||{},r=[n(282),n(215),n(238),n(225),n(239),n(240),n(246)];for(let e=0;e<r[n(214)];e++){const t=_[n(211)][n(222)][n(264)](_),a=r[e],s=o[a]||t;t.__proto__=_[n(264)](_),t[n(257)]=s[n(257)].bind(s),o[a]=t}}))();const M=["geometry"],R=i({__name:C(272),async setup(a){const i=C;let y,w;const h=o=>{const r=j,e=[];return o[r(243)]((t=>{const o=r;t instanceof n[o(261)]&&(t[o(279)][o(280)]("uv"),t[o(279)][o(280)]("tangent"),e.push(t[o(279)]))})),t[r(262)](e)},b=h(([y,w]=c((()=>r(i(267),{draco:!0,decoderPath:i(275)}))),y=await y,w(),y).scene[i(229)][0]);b[i(210)](Math.PI/2),b[i(236)](0,-.9,0);const I=b[i(231)]()[i(250)](),P=h(([y,w]=c((()=>r("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:i(275)}))),y=await y,w(),y)[i(206)][i(229)][0]);P[i(210)](-Math.PI/2),P[i(221)](Math.PI/3);const _=P[i(231)]()[i(250)](),z=I[i(266)].position[i(232)],R=I[i(266)][i(220)][i(244)],A=_.attributes.position[i(232)],D=_[i(266)].normal[i(232)],N=_[i(266)].position.count,S=new Float32Array(R),V=new Float32Array(3*(R+2)),F=new Float32Array(3*(R+2)),T=new Float32Array(3*(R+2));for(let t=0;t<R;t+=3){const o=1*Math[i(251)](),r=t%N;S[t]=o,S[t+1]=o,S[t+2]=o;const e=3*t,a=z[e],s=z[e+1],c=z[e+2],u=z[e+3],l=z[e+4],p=z[e+5],f=z[e+6],m=z[e+7],v=z[e+8],g=new(n[i(260)])(a+u+f,s+l+m,c+p+v)[i(217)](3);V[i(247)]([g.x,g.y,g.z],3*t),V[i(247)]([g.x,g.y,g.z],3*(t+1)),V[i(247)]([g.x,g.y,g.z],3*(t+2));const d=(n,t,o)=>{const r=i,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(247)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(A,F,r),d(D,T,r)}I[i(273)](i(234),new(n[i(270)])(S,1)),I[i(273)](i(226),new(n[i(270)])(V,3)),I[i(273)](i(223),new(n[i(270)])(F,3)),I[i(273)](i(258),new(n[i(270)])(T,3)),console.log(I.attributes);const k=([y,w]=c((()=>e(["./plugins/visualArts/image/fragment512px.png"]))),y=await y,w(),y),B={uniforms:{u_progress:{value:-.1},matcap1:{value:k},m1Color:{type:"v3",value:new(n[i(248)])("#ffc0fa")},matcap2:{value:k},m2Color:{type:"v3",value:new(n[i(248)])(i(245))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},E=u({c1:i(227),c2:i(245)}),Z=l(.5),q=new s({title:"参数"});return q[i(235)](B.uniforms.u_progress,i(284),{label:i(228),min:-.1,max:1,step:.001})[i(277)]=!0,q.addBinding(E,"c1",{label:i(219)}),q[i(235)](E,"c2",{label:i(268)}),q[i(235)](Z,i(284),{label:"速度",min:.001,max:1,step:.001}),p(E,(n=>{const t=i;B[t(269)].m1Color[t(284)][t(247)](n.c1),B.uniforms[t(224)][t(284)][t(247)](n.c2)}),{deep:!0}),o()[i(212)]((({elapsed:n})=>{const t=i;B[t(269)][t(205)][t(284)]=(Math[t(207)](n*Z[t(284)])+1)/2,q[t(255)]()})),(n,t)=>{const o=i;return f(),m(o(285),{geometry:x(I)},[v(o(274),g(d(B)),null,16)],8,M)}}});function A(n){function t(n){const o=j;if(typeof n===o(249))return function(n){}[o(211)](o(271))[o(230)](o(237));1!==(""+n/n)[o(214)]||n%20==0?function(){return!0}[o(211)](o(216)+o(265))[o(242)]("action"):function(){return!1}[o(211)]("debu"+o(265))[o(230)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const D=V;!function(n,t){const o=V,r=T();for(;;)try{if(640139===-parseInt(o(458))/1+parseInt(o(475))/2+parseInt(o(455))/3*(parseInt(o(476))/4)+parseInt(o(479))/5*(-parseInt(o(465))/6)+-parseInt(o(478))/7*(-parseInt(o(462))/8)+-parseInt(o(481))/9+parseInt(o(447))/10)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const N=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){N(this,(function(){const n=V,t=new RegExp(n(441)),o=new RegExp(n(456),"i"),r=k(n(450));t[n(445)](r+n(454))&&o[n(445)](r+n(482))?k():r("0")}))()}();const S=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[V(446)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function V(n,t){const o=T();return(V=function(n,t){return o[n-=441]})(n,t)}S(void 0,(function(){const n=V;let t;try{t=Function(n(452)+n(472)+");")()}catch(e){t=window}const o=t[n(459)]=t[n(459)]||{},r=[n(461),n(477),n(463),n(464),"exception",n(444),n(466)];for(let a=0;a<r[n(470)];a++){const t=S[n(443)][n(469)].bind(S),e=r[a],s=o[e]||t;t[n(468)]=S[n(453)](S),t[n(449)]=s[n(449)][n(453)](s),o[e]=t}}))();const F=i({__name:D(484),setup(t){const o=D,r=u({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:o(451),windowSize:!0,toneMapping:n[o(467)],toneMappingExposure:.8};return(n,t)=>{const s=o,i=y(s(480));return f(),w(i,g(d(e)),{default:h((()=>[t[0]||(t[0]=v(s(473),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),b(x(a),g(d(r)),null,16),t[1]||(t[1]=v(s(474),{intensity:2},null,-1)),(f(),w(I,null,{default:h((()=>[b(R)])),_:1}))])),_:1},16)}}});function T(){const n=["toString","init","#000000","return (function() ","bind","chain","3sOeUlt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","262274dzRYkI","console","action","log","1625224xRONBJ","info","error","5113176WIrXzJ","trace","ACESFilmicToneMapping","__proto__","prototype","length","string",'{}.constructor("return this")( )',"TresPerspectiveCamera","TresAmbientLight","1837600SKfJqJ","2713376NGIpLl","warn","28GPVKix","5wmrtoB","TresCanvas","6507216WpPrji","input","counter","fragmentModel","function *\\( *\\)","while (true) {}","constructor","table","test","apply","678770qGSiXC","debu"];return(T=function(){return n})()}function k(n){function t(n){const o=V;if(typeof n===o(471))return function(n){}[o(443)](o(442))[o(446)](o(483));1!==(""+n/n)[o(470)]||n%20==0?function(){return!0}.constructor(o(448)+o(457)).call(o(460)):function(){return!1}[o(443)]("debu"+o(457))[o(446)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{F as default};

import{au as n,Y as t,l as e,aR as r,aS as o,aT as i,N as a,aP as c,aQ as s,U as u,aY as l,C as f,ab as p,u as d,r as h,T as v,ch as m,ci as g,a5 as _,h as y,b as x,e as b,_ as I,bR as S,n as w,b1 as M,V as E,bs as R,a3 as A,aq as D,B as T,c as z,aN as P,g as C,M as O,t as F,q as B,aU as k}from"./three.XuMWWlrU1743039954535.js";import{m as j,j as U,e as N}from"./@tresjs.05J-Im0t1743039954535.js";import{R as L}from"./three-stdlib.DxlPEuV51743039954535.js";import{y as H,b as Z,w as G,a as V,u as q,d as $,W,a3 as Y,o as X,H as K,J as Q,M as J,a0 as nn,a6 as tn,a2 as en,q as rn,f as on,N as an,a8 as cn,r as sn,B as un,v as ln,s as fn,F as pn,a5 as dn,m as hn}from"./@vue.C4dqouNn1743039954535.js";import{M as vn,a as mn,C as gn}from"./@pmndrs.Z1sh1G-81743039954535.js";import{h as _n}from"./object-hash.mBR0vz1e1743039954535.js";var yn=In;!function(n,t){for(var e=In,r=Mn();;)try{if(597365===-parseInt(e(502))/1*(parseInt(e(499))/2)+-parseInt(e(490))/3+-parseInt(e(491))/4+-parseInt(e(503))/5+-parseInt(e(498))/6+parseInt(e(489))/7+parseInt(e(468))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var xn,bn=(xn=!0,function(n,t){var e=xn?function(){if(t){var e=t[In(473)](n,arguments);return t=null,e}}:function(){};return xn=!1,e});function In(n,t){var e=Mn();return In=function(n,t){return e[n-=468]},In(n,t)}!function(){bn(this,(function(){var n=In,t=new RegExp(n(470)),e=new RegExp(n(493),"i"),r=An(n(475));t.test(r+n(506))&&e[n(500)](r+n(488))?An():r("0")}))()}();var Sn,wn=(Sn=!0,function(n,t){var e=Sn?function(){if(t){var e=t[In(473)](n,arguments);return t=null,e}}:function(){};return Sn=!1,e});function Mn(){var n=["counter",'{}.constructor("return this")( )',"apply","__proto__","init","dispose","map","gger","virtualScene","warn","prototype","material","add","table","constructor","traverse","string","input","5150677cfGNky","1138968QEUfyo","2076352doxLrm","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","destructor","toString","return (function() ","2646444dEgNDM","569622eIOivS","test","console","2mxkEed","512150hgHkzG","call","bind","chain","while (true) {}","14987392VOrupl","length","function *\\( *\\)"];return(Mn=function(){return n})()}wn(void 0,(function(){var n,t=In;try{n=Function(t(497)+t(472)+");")()}catch(s){n=window}for(var e=n[t(501)]=n.console||{},r=["log",t(480),"info",t(494),"exception",t(484),"trace"],o=0;o<r[t(469)];o++){var i=wn[t(485)][t(481)].bind(wn),a=r[o],c=e[a]||i;i[t(474)]=wn.bind(wn),i[t(496)]=c[t(496)][t(505)](c),e[a]=i}}))();class En extends n{constructor(){var n=In;super(),this.virtualScene=null,this[n(479)]=new t}add(...n){var t=In;return this[t(479)][t(483)](...n),this}[yn(495)](){var n=yn;this[n(479)][n(486)]((t=>{var r=n;t instanceof e&&(t.geometry.dispose(),t.material.dispose(),t.material[r(477)]&&t[r(482)].map[r(476)](),this.virtualScene.remove(t))})),this[n(479)]=null}}const Rn=En;function An(n){function t(n){var e=In;if(typeof n===e(487))return function(n){}[e(485)](e(507)).apply(e(471));1!==(""+n/n)[e(469)]||n%20==0?function(){return!0}[e(485)](e(492)+e(478))[e(504)]("action"):function(){return!1}.constructor(e(492)+"gger")[e(473)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Dn=Cn;!function(n,t){const e=Cn,r=zn();for(;;)try{if(437445===-parseInt(e(453))/1*(parseInt(e(455))/2)+parseInt(e(487))/3+-parseInt(e(492))/4+parseInt(e(471))/5+-parseInt(e(466))/6+parseInt(e(457))/7+-parseInt(e(462))/8*(parseInt(e(481))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Tn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cn(484)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zn(){const n=["outdoor/satara_night_1k.hdr","chain","city/shanghai_bund_1k.hdr",'{}.constructor("return this")( )',"1221344cwrLjM","indoor/small_hangar_01_1k.hdr","action","outood/mossy_forest_1k.hdr","constructor","console","205327notteC","bind","2DfGdQr","test","5840779vRODcL","__proto__","toString","stateObject","gger","155056mwBoJY","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","3142830fnEOHb","venice/venice_sunset_1k.hdr","city/canary_wharf_1k.hdr","prototype","init","3655740UcaNCw","outdoor/outdoor_umbrellas_1k.hdr","indoor/abandoned_games_room_02_1k.hdr","studio/poly_haven_studio_1k.hdr","trace","while (true) {}","call","city/modern_buildings_2_1k.hdr","string","debu","270jtOYXF","warn","kiara/kiara_1_dawn_1k.hdr","apply","counter","length","1463484qftcbA"];return(zn=function(){return n})()}!function(){Tn(this,(function(){const n=Cn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(464),"i"),r=Fn(n(470));t[n(456)](r+n(489))&&e[n(456)](r+"input")?Fn():r("0")}))()}();const Pn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cn(484)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Cn(n,t){const e=zn();return Cn=function(n,t){return e[n-=448]},Cn(n,t)}Pn(void 0,(function(){const n=Cn,t=function(){const n=Cn;let t;try{t=Function(n(463)+n(491)+");")()}catch(e){t=window}return t}(),e=t[n(452)]=t[n(452)]||{},r=["log",n(482),"info","error",n(465),"table",n(475)];for(let o=0;o<r[n(486)];o++){const t=Pn[n(451)][n(469)][n(454)](Pn),i=r[o],a=e[i]||t;t[n(458)]=Pn.bind(Pn),t[n(459)]=a.toString[n(454)](a),e[i]=t}}))();const On={sunset:Dn(467),studio:Dn(474),city:Dn(468),umbrellas:Dn(472),night:Dn(488),forest:Dn(450),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:Dn(483),hangar:Dn(448),urban:Dn(473),modern:Dn(478),shangai:Dn(490)};function Fn(n){function t(n){const e=Cn;if(typeof n===e(479))return function(n){}[e(451)](e(476)).apply(e(485));1!==(""+n/n)[e(486)]||n%20==0?function(){return!0}[e(451)](e(480)+e(461))[e(477)](e(449)):function(){return!1}.constructor("debu"+e(461))[e(484)](e(460)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bn=jn;!function(n,t){const e=jn,r=Nn();for(;;)try{if(374798===parseInt(e(354))/1*(-parseInt(e(364))/2)+parseInt(e(367))/3*(-parseInt(e(353))/4)+parseInt(e(339))/5*(parseInt(e(363))/6)+parseInt(e(343))/7+parseInt(e(348))/8+parseInt(e(341))/9+-parseInt(e(340))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(380)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jn(n,t){const e=Nn();return jn=function(n,t){return e[n-=335]},jn(n,t)}!function(){kn(this,(function(){const n=jn,t=new RegExp(n(374)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Hn(n(352));t[n(345)](r+n(338))&&e[n(345)](r+n(366))?Hn():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(380)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nn(){const n=["3YrvMKT","gger","table","log","error","isArray","mapping","function *\\( *\\)","length","warn","console","prototype","background","apply","constructor","setPath","toString","return (function() ","debu","while (true) {}","chain","416545jAnBrZ","5331120JuQJvR","1709955rqglNP","exception","4134571nVZylf","environment","test","isColor","action","816048wyUhEd","string","texture","__proto__","init","92832DWgcbV","4419BvDBMk","stateObject","value","info","trace","Preset must be one of: ","Failed to load environment map: ","keys","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","42hYKLIS","242iTubHQ","bind","input"];return(Nn=function(){return n})()}Un(void 0,(function(){const n=jn;let t;try{t=Function(n(335)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(377)]=t[n(377)]||{},r=[n(370),n(376),n(357),n(371),n(342),n(369),n(358)];for(let i=0;i<r[n(375)];i++){const t=Un[n(381)][n(378)][n(365)](Un),o=r[i],a=e[o]||t;t[n(351)]=Un[n(365)](Un),t[n(383)]=a.toString[n(365)](a),e[o]=t}}))();const Ln=Bn(362);function Hn(n){function t(n){const e=jn;if(typeof n===e(349))return function(n){}[e(381)](e(337))[e(380)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(381)]("debu"+e(368)).call(e(347)):function(){return!1}.constructor(e(336)+"gger").apply(e(355)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Zn=qn;!function(n,t){const e=qn,r=$n();for(;;)try{if(126929===-parseInt(e(198))/1*(-parseInt(e(184))/2)+-parseInt(e(214))/3+-parseInt(e(195))/4*(-parseInt(e(197))/5)+-parseInt(e(218))/6+parseInt(e(199))/7+parseInt(e(177))/8+parseInt(e(173))/9*(-parseInt(e(205))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qn(206)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gn(this,(function(){const n=qn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Yn(n(191));t[n(181)](r+"chain")&&e.test(r+"input")?Yn():r("0")}))()}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qn(206)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qn(n,t){const e=$n();return qn=function(n,t){return e[n-=169]},qn(n,t)}function $n(){const n=["gger","debu","generateMipmaps","isArray","environment","console","91881QRAERU","magFilter","value","warn","1296384dosCrO","table","constructor","component","$slots","toString","576lBJqBh","background",'{}.constructor("return this")( )',"update","1736592iRUuRL","stateObject","trace","virtualScene","test","counter","destructor","334Ttcyig","error","length","envSence","string","default","type","init","dispose","while (true) {}","texture","28zCyhLB","__proto__","40075PLzYPG","1330qJOMyh","1225693rxjkRJ","log","bind","frames","action","useDefaultScene","46370XSQJoh","apply","return (function() "];return($n=function(){return n})()}Vn(void 0,(function(){const n=qn;let t;try{t=Function(n(207)+n(175)+");")()}catch(o){t=window}const e=t.console=t[n(213)]||{},r=[n(200),n(217),"info",n(185),"exception",n(219),n(179)];for(let i=0;i<r[n(186)];i++){const t=Vn[n(169)].prototype[n(201)](Vn),o=r[i],a=e[o]||t;t[n(196)]=Vn.bind(Vn),t.toString=a[n(172)][n(201)](a),e[o]=t}}))();const Wn=$({__name:Zn(170),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Zn;let f,p;const d=n,h=Z(null);t({texture:h});const{extend:v,renderer:m,scene:g}=j();let _=null,y=Z(null),x=null;const b=Z(null);W((()=>{const n=qn;b[n(216)]?.[n(183)](),y[n(216)]?.[n(192)]()}));const{onBeforeLoop:I}=N();let S=1;I((()=>{const n=qn;x&&b[n(216)]&&y[n(216)]&&(d[n(202)]===1/0||S<d[n(202)])&&(d.useDefaultScene?x[n(176)](m[n(216)],g[n(216)]):x.update(m[n(216)],tn(b[n(216)][n(180)])),S++)}));const w=([f,p]=Y((()=>async function(n,t){const e=Bn,{scene:a,invalidate:c}=j(),{preset:s,blur:u,files:l=Z([]),path:f=Z(""),background:p}=H(n);G(n,(()=>{c()}));const d=Z(null),h=V((()=>Array[e(372)](l[e(356)]))),v=V((()=>h[e(356)]?r:L));return G([l,f],(async([n,t])=>{const r=e;if(n&&n.length>0&&!s?.[r(356)]){try{d.value=await U(v[r(356)],h[r(356)]?[...q(n)]:q(n),(n=>{t&&n[r(382)](q(t))}))}catch(a){throw new Error(r(360)+a)}d[r(356)]&&(d[r(356)].mapping=h.value?o:i)}}),{immediate:!0}),G(d,(n=>{const t=e;a.value&&n&&(a[t(356)][t(344)]=n)}),{immediate:!0}),G([p,d],(([n,r])=>{const o=e;if(a.value){let e=t?.[o(356)]?t.value[o(350)]:r,i=a[o(356)][o(379)];!i?.[o(346)]&&(i=void 0),a[o(356)][o(379)]=n?e:i}}),{immediate:!0}),G((()=>u?.value),(n=>{const t=e;a[t(356)]&&n&&(a[t(356)].backgroundBlurriness=n)}),{immediate:!0}),G((()=>s?.[e(356)]),(async n=>{const t=e;if(n&&n in On){const e=Ln,o=On[n];try{d[t(356)]=await U(L,o,(n=>{e&&n[t(382)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}d[t(356)]&&d[t(356)]&&(d[t(356)][t(373)]=i),c()}else if(n&&!(n in On))throw new Error(t(359)+Object[t(361)](On).join(", "))}),{immediate:!0}),d}(d,y))),f=await f,p(),f),M=n=>{const t=qn;n?(g[t(216)].environment=n[t(194)],d[t(174)]&&(g[t(216)][t(174)]=n[t(194)])):(g.value[t(212)]=w[t(216)],d[t(174)]&&(g[t(216)].background=w[t(216)]))};G(w,(n=>{y.value&&M(y.value)}),{immediate:!0,deep:!0}),v({EnvSence:Rn});const E=()=>{const n=qn;y[n(216)]?.[n(192)](),y.value=new c(d.resolution),x=new s(d.near,d.far,y.value),d[n(204)]?(y[n(216)].texture[n(190)]=u,y[n(216)].texture[n(210)]=!1,y[n(216)][n(194)].minFilter=l,y[n(216)].texture[n(215)]=l):y[n(216)][n(194)][n(190)]=a,M(y[n(216)])};return G((()=>nn()[e(189)]),(n=>{const t=e;n&&(!y.value||y[t(216)].texture[t(190)]!==a)&&(_=n(),Array[t(211)](_)&&_.length>0&&"symbol"!=typeof _[0]?.type)?E():(y[t(216)]?.[t(192)](),y.value=null,M(null))}),{immediate:!0,deep:!0}),h.value=w,G((()=>d.useDefaultScene),(n=>{y[e(216)]&&E()})),(n,t)=>{const r=e;return q(y)?(X(),K("TresEnvSence",{key:0,ref_key:r(187),ref:b},[Q(n[r(171)],r(189))],512)):J("",!0)}}});function Yn(n){function t(n){const e=qn;if(typeof n===e(188))return function(n){}[e(169)](e(193))[e(206)](e(182));1!==(""+n/n)[e(186)]||n%20==0?function(){return!0}[e(169)](e(209)+e(208)).call(e(203)):function(){return!1}[e(169)](e(209)+e(208)).apply(e(178)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xn=Jn;!function(n,t){const e=Jn,r=nt();for(;;)try{if(321384===-parseInt(e(514))/1*(-parseInt(e(488))/2)+parseInt(e(511))/3+parseInt(e(467))/4+-parseInt(e(499))/5*(parseInt(e(509))/6)+parseInt(e(498))/7+parseInt(e(506))/8+-parseInt(e(515))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(492)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kn(this,(function(){const n=Jn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(494),"i"),r=at("init");t[n(487)](r+n(466))&&e.test(r+"input")?at():r("0")}))()}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(n,t){const e=nt();return Jn=function(n,t){return e[n-=466]},Jn(n,t)}function nt(){const n=["rect","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","index","toneMapped","string","2203215nRHMpU","19115SkRCNj","console","TresRingGeometry","action","__proto__","constructor","intensity","4237328mXXDEJ","from","counter","852tAOnfb","multiplyScalar","634638sJoAeI","TresPlaneGeometry","TresMesh","5MXYRrf","3374667ILUMgt","chain","193944AQmxOs",'{}.constructor("return this")( )',"TresMeshBasicMaterial","ring","needsUpdate","error","bind","info","map","set","debu","toString","warn","side","exception","circle","gger","call","stateObject","prototype","test","53908GxsmQl","color","value","length","apply"];return(nt=function(){return n})()}Qn(void 0,(function(){const n=Jn;let t;try{t=Function("return (function() "+n(468)+");")()}catch(o){t=window}const e=t[n(500)]=t[n(500)]||{},r=["log",n(479),n(474),n(472),n(481),"table","trace"];for(let i=0;i<r[n(491)];i++){const t=Qn[n(504)][n(486)].bind(Qn),o=r[i],a=e[o]||t;t[n(503)]=Qn[n(473)](Qn),t[n(478)]=a[n(478)][n(473)](a),e[o]=t}}))();const tt={key:0,args:[0,1,64]},et={key:1,args:[.5,1,64]},rt={key:2},ot=[Xn(496),Xn(475),Xn(480),Xn(489)],it=$({__name:Xn(495),props:{args:{default:null},from:{default:Xn(493)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new f(16777215)}},setup(n){const t=Xn,e=n,r=Z();return en((()=>{const n=Jn;r.value&&(r[n(490)].color[n(510)](e[n(505)]),r[n(490)].needsUpdate=!0)})),G((()=>e[t(489)]),(n=>{const o=t;r.value&&(r[o(490)][o(489)][o(476)](n),r[o(490)][o(489)][o(510)](e[o(505)]),r[o(490)][o(471)]=!0)})),rn((()=>{})),(n,o)=>{const i=t;return X(),K(i(513),null,[e[i(507)]===i(482)?(X(),K(i(501),tt)):e.from===i(470)?(X(),K(i(501),et)):"rect"===e[i(507)]?(X(),K(i(512),rt)):(X(),on(e[i(507)],{key:3,args:e})),an(i(469),{ref_key:"material",ref:r,toneMapped:n[i(496)],map:n[i(475)],side:q(p),color:n[i(489)]},null,8,ot)])}}});function at(n){function t(n){const e=Jn;if(typeof n===e(497))return function(n){}[e(504)]("while (true) {}").apply(e(508));1!==(""+n/n).length||n%20==0?function(){return!0}[e(504)]("debugger")[e(484)](e(502)):function(){return!1}[e(504)](e(477)+e(483))[e(492)](e(485)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ct(n,t){const e=ut();return ct=function(n,t){return e[n-=356]},ct(n,t)}!function(n,t){const e=ct,r=ut();for(;;)try{if(884073===parseInt(e(372))/1+parseInt(e(371))/2+-parseInt(e(390))/3+-parseInt(e(393))/4*(parseInt(e(375))/5)+parseInt(e(380))/6+parseInt(e(385))/7*(parseInt(e(392))/8)+-parseInt(e(389))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const st=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ut(){const n=["action","constructor","table","__proto__","clear","dispose","prototype","log","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","debu","test","render","2396384vEHSvR","1540162dMCTXh","type","warn","3539955SrCnSP","console","format","chain","apply","1273380qHrwOA","depthTexture","stateObject","input","toString","14WLgCkv","height","gger",'{}.constructor("return this")( )',"7809723hXfUrw","3478137MZeFxW","length","2674424UNBPDY","4dvYXTl","value","setRenderTarget"];return(ut=function(){return n})()}!function(){st(this,(function(){const n=ct,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(366),"i"),r=pt("init");t[n(369)](r+n(378))&&e.test(r+n(383))?pt():r("0")}))()}();const lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ct(379)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ft(n){const t=Z(null),{height:e,width:r,settings:o,depth:i,isLoop:c}=cn(n)?H(n):H(sn(n)),{onLoop:s}=N(),{camera:u,renderer:l,scene:f,sizes:p}=j();return en((()=>{const n=ct;t[n(394)]?.[n(362)](),t[n(394)]=new d(r?.[n(394)]||p.width[n(394)],e?.[n(394)]||p[n(386)].value,{minFilter:h,magFilter:h,type:a,...o?.[n(394)]}),i?.value&&(t.value[n(381)]=new v(r?.value||p.width[n(394)],e?.[n(394)]||p[n(386)].value),t[n(394)][n(381)][n(377)]=m,t.value[n(381)][n(373)]=g)})),s((()=>{const n=ct;c?.[n(394)]&&(l[n(394)][n(356)](tn(t[n(394)])),l.value[n(361)](),l.value[n(370)](tn(f[n(394)]),tn(u[n(394)])),l[n(394)][n(356)](null))})),un((()=>{t.value?.dispose()})),t}function pt(n){function t(n){const e=ct;if("string"==typeof n)return function(n){}[e(358)]("while (true) {}")[e(379)]("counter");1!==(""+n/n)[e(391)]||n%20==0?function(){return!0}[e(358)](e(368)+"gger").call(e(357)):function(){return!1}.constructor(e(368)+e(387))[e(379)](e(382)),t(++n)}try{if(n)return t;t(0)}catch(e){}}lt(void 0,(function(){const n=ct;let t;try{t=Function("return (function() "+n(388)+");")()}catch(o){t=window}const e=t[n(376)]=t.console||{},r=[n(364),n(374),n(367),"error","exception",n(359),"trace"];for(let i=0;i<r[n(391)];i++){const t=lt[n(358)][n(363)][n(365)](lt),o=r[i],a=e[o]||t;t[n(360)]=lt[n(365)](lt),t.toString=a[n(384)][n(365)](a),e[o]=t}}))();const dt=_t;!function(n,t){const e=_t,r=gt();for(;;)try{if(363052===parseInt(e(400))/1*(parseInt(e(395))/2)+-parseInt(e(374))/3*(parseInt(e(408))/4)+parseInt(e(363))/5*(-parseInt(e(391))/6)+-parseInt(e(413))/7*(parseInt(e(372))/8)+parseInt(e(381))/9*(-parseInt(e(366))/10)+parseInt(e(398))/11*(parseInt(e(373))/12)+parseInt(e(385))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[_t(371)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=_t,t=new RegExp(n(415)),e=new RegExp(n(384),"i"),r=xt("init");t[n(388)](r+n(389))&&e[n(388)](r+n(368))?xt():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[_t(371)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();vt(void 0,(function(){const n=_t;let t;try{t=Function(n(379)+n(412)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(393),"warn","info",n(401),n(410),n(362),n(387)];for(let i=0;i<r[n(407)];i++){const t=vt[n(406)][n(378)].bind(vt),o=r[i],a=e[o]||t;t[n(364)]=vt.bind(vt),t[n(409)]=a.toString[n(396)](a),e[o]=t}}))();const mt=["buffer","side"];function gt(){const n=["call",'{}.constructor("return this")( )',"133jCfKKQ","MeshTransmissionMaterialClass","function *\\( *\\)","thickness","fboResolution","toneMapping","table","355zrHbDX","__proto__","setRenderTarget","230UKRpqn","backside","input","value","time","apply","235048hUTSvH","372756bZUapf","3wHQfsk","texture","uuid","background","prototype","return (function() ","TresMeshTransmissionMaterial","9549NVJJrC","string","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","17425161FWwsTl","side","trace","test","chain","material","55254tdNodc","isMesh","log","gger","2hCyJsh","bind","buffer","55OKPnhZ","envMapIntensity","373138iNnFsL","error","render","backsideThickness","debu","index","constructor","length","1077268ZasDOD","toString","exception"];return(gt=function(){return n})()}function _t(n,t){const e=gt();return _t=function(n,t){return e[n-=359]},_t(n,t)}const yt=$({__name:dt(405),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=dt,r=ln(),{extend:o,scene:i,renderer:a,camera:c}=j(),s=ln(),u=n;o({MeshTransmissionMaterial:vn});const l=new mn,{onBeforeLoop:f}=N(),d=ft({width:u[e(360)],height:u.fboResolution,isLoop:!1}),h=ft({width:u[e(360)],height:u[e(360)],isLoop:!1});let v,m,g,y;return rn((async()=>{const n=e;await fn(),s.value=function(n,t){let e;return n.traverse((n=>{const r=_t;n[r(392)]&&n.material&&n.material[r(376)]===t&&(e=n)})),e}(i[n(369)],r[n(369)][n(376)])})),f((({elapsed:n})=>{const t=e;r.value[t(370)]=n,r[t(369)].buffer===h[t(369)][t(375)]&&s.value&&(g=a[t(369)][t(361)],v=i[t(369)][t(377)],m=r.value[t(399)],y=s[t(369)][t(390)][t(386)],s[t(369)][t(390)]=l,u[t(367)]&&(a.value[t(365)](d.value),a[t(369)][t(402)](i[t(369)],c[t(369)]),s[t(369)][t(390)]=r[t(369)],s[t(369)][t(390)][t(359)]=u[t(403)],s.value.material[t(397)]=d[t(369)][t(375)],s.value[t(390)].side=_,s[t(369)][t(390)][t(399)]=0),a[t(369)][t(365)](h[t(369)]),a[t(369)][t(402)](i[t(369)],c[t(369)]),s.value[t(390)].buffer=h.value[t(375)],s[t(369)].material=r.value,s[t(369)][t(390)][t(359)]=u.thickness,s[t(369)][t(390)].side=y,s.value.material[t(399)]=m,i.value[t(377)]=v,a[t(369)][t(365)](null),a[t(369)][t(361)]=g)})),t({root:r,constructor:vn}),(n,t)=>{const o=e;return X(),K(o(380),{ref_key:o(414),ref:r,buffer:q(h)[o(375)],side:q(p)},null,8,mt)}}});function xt(n){function t(n){const e=_t;if(typeof n===e(382))return function(n){}[e(406)]("while (true) {}")[e(371)]("counter");1!==(""+n/n)[e(407)]||n%20==0?function(){return!0}[e(406)]("debu"+e(394))[e(411)]("action"):function(){return!1}[e(406)](e(404)+"gger")[e(371)](e(383)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=St,r=wt();for(;;)try{if(753705===-parseInt(e(435))/1+parseInt(e(483))/2+parseInt(e(474))/3*(-parseInt(e(432))/4)+parseInt(e(476))/5*(-parseInt(e(472))/6)+-parseInt(e(473))/7+-parseInt(e(434))/8*(-parseInt(e(440))/9)+parseInt(e(433))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(431)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){bt(this,(function(){const n=St,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(475),"i"),r=Et("init");t.test(r+n(464))&&e.test(r+n(486))?Et():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function St(n,t){const e=wt();return St=function(n,t){return e[n-=429]},St(n,t)}function wt(){const n=["4694142evHAId","5954928dqstSv","6CMLVqB","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","5roqLgj","call","exception","table","default","front","TresGroup","2137104vysxEe","__proto__","length","input","gger","stateObject","matrixWorld","apply","2769332mAqqFT","27479480JBqDhv","184kzoFeo","453295apxjiF","string","outer","disableX","$slots","159741HKbcaK",'{}.constructor("return this")( )',"trace","gref","getBoundingSphere","position","warn","action","console","while (true) {}","toString","max","disableZ","debu","prototype","right","back","return (function() ","log","error","left","bind","constructor","info","chain","setFromObject","counter","value","disable","getCenter","min","set"];return(wt=function(){return n})()}It(void 0,(function(){const n=St,t=function(){const n=St;let t;try{t=Function(n(457)+n(441)+");")()}catch(e){t=window}return t}(),e=t[n(448)]=t[n(448)]||{},r=[n(458),n(446),n(463),n(459),n(478),n(479),n(442)];for(let o=0;o<r[n(485)];o++){const t=It[n(462)][n(454)][n(461)](It),i=r[o],a=e[i]||t;t[n(484)]=It.bind(It),t[n(450)]=a[n(450)][n(461)](a),e[i]=t}}))();const Mt=$({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Z(null),r=Z(null),o=Z(null);return rn((()=>{const n=St;if(!r[n(467)])return;if(!o.value)return;r.value[n(430)].identity();const e=(new y)[n(465)](o.value,t.precise),i=new x,a=new b,c=e[n(451)].x-e[n(470)].x,s=e[n(451)].y-e[n(470)].y,u=e.max.z-e[n(470)].z;e[n(469)](i),e[n(444)](a);const l=t.top?s/2:t.bottom?-s/2:0,f=t[n(460)]?-c/2:t[n(455)]?c/2:0,p=t[n(481)]?u/2:t[n(456)]?-u/2:0;r[n(467)][n(445)][n(471)](t[n(468)]||t[n(438)]?0:-i.x+f,t[n(468)]||t.disableY?0:-i.y+l,t[n(468)]||t[n(452)]?0:-i.z+p)})),(n,t)=>{const i=St;return X(),K(i(482),{ref_key:i(443),ref:e},[an("TresGroup",{ref_key:i(437),ref:r},[an(i(482),{ref_key:"inner",ref:o},[Q(n[i(439)],i(480))],512)],512)],512)}}});function Et(n){function t(n){const e=St;if(typeof n===e(436))return function(n){}[e(462)](e(449)).apply(e(466));1!==(""+n/n)[e(485)]||n%20==0?function(){return!0}[e(462)](e(453)+e(487))[e(477)](e(447)):function(){return!1}[e(462)](e(453)+e(487))[e(431)](e(429)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=Ct;!function(n,t){const e=Ct,r=Pt();for(;;)try{if(655707===parseInt(e(297))/1+parseInt(e(275))/2*(-parseInt(e(312))/3)+-parseInt(e(294))/4*(-parseInt(e(290))/5)+parseInt(e(289))/6*(-parseInt(e(306))/7)+-parseInt(e(272))/8+-parseInt(e(286))/9*(parseInt(e(323))/10)+parseInt(e(305))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ct(320)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=Ct,t=new RegExp(n(281)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ft("init");t[n(273)](r+n(324))&&e[n(273)](r+n(321))?Ft():r("0")}))()}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ct(320)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dt(void 0,(function(){const n=Ct,t=function(){const n=Ct;let t;try{t=Function(n(317)+n(280)+");")()}catch(e){t=window}return t}(),e=t[n(279)]=t[n(279)]||{},r=[n(322),n(319),n(302),"error",n(277),"table",n(293)];for(let o=0;o<r[n(300)];o++){const t=Dt.constructor[n(310)].bind(Dt),i=r[o],a=e[i]||t;t[n(288)]=Dt.bind(Dt),t[n(303)]=a[n(303)][n(284)](a),e[i]=t}}))();const Tt=[Rt(298)],zt=["object"];function Pt(){const n=["group","931414LvRVQA","object","causticsOnly","length","backside","info","toString","Vector3","2684407jeMFRN","1519DsXPCo","backsideIOR","color","debu","prototype","TresGroup","3YFtqxc","helper","far","$slots","primitive","return (function() ","lightSource","warn","apply","input","log","1240mUjlsx","chain","gger","while (true) {}","set","2678128YqjfMM","test","scene","1590684FTXHNz","worldRadius","exception","params","console",'{}.constructor("return this")( )',"function *\\( *\\)","index","update","bind","constructor","5931xKqdff","ior","__proto__","6336gKqzql","2060FKtcHw","value","intensity","trace","8944eoDffc","#ffffff"];return(Pt=function(){return n})()}function Ct(n,t){const e=Pt();return Ct=function(n,t){return e[n-=271]},Ct(n,t)}const Ot=$({__name:Rt(282),props:{color:{default:Rt(295)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Rt,e=n,{renderer:r}=j(),o=gn(r[t(291)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(276)]});o[t(278)][t(301)]=!0;const i=ln(null);G(i,(n=>{n&&o[t(274)].add(n)}));const{onBeforeLoop:a}=N();return a((({elapsed:n})=>{o[t(283)]()})),en((()=>{const n=t;e[n(308)]&&o.params.color[n(271)](e[n(308)]),e[n(287)]&&(o[n(278)][n(287)]=e[n(287)]),e[n(307)]&&(o[n(278)][n(307)]=e[n(307)]),e.far&&(o.params[n(314)]=e[n(314)]),e.worldRadius&&(o.params[n(276)]=e[n(276)]),e[n(292)]&&(o[n(278)][n(292)]=e[n(292)])})),G((()=>e[t(299)]),(n=>{const e=t;o[e(278)][e(299)]=n})),G((()=>e[t(318)]),(n=>{const e=t;n&&o.params[e(318)]instanceof I[e(304)]&&o[e(278)][e(318)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return X(),K(pn,null,[an(r(311),{ref_key:r(296),ref:i},[Q(n[r(315)],"default")],512),an(r(316),{object:q(o)[r(296)],position:[0,.003,0]},null,8,Tt),an("primitive",{object:q(o)[r(313)],visible:!1},null,8,zt)],64)}}});function Ft(n){function t(n){const e=Ct;if("string"==typeof n)return function(n){}.constructor(e(326))[e(320)]("counter");1!==(""+n/n)[e(300)]||n%20==0?function(){return!0}[e(285)](e(309)+"gger").call("action"):function(){return!1}[e(285)](e(309)+e(325))[e(320)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Bt(){const n=["action","__proto__","6870xkvvWI","3260yqqrfE","debu","isArray","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","2094SNsLbV","material","4268792ObqfGa","compile",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","4739lvgciz","shadowmap_pars_fragment","1926nGFetN","chain","properties","return (function() ","forEach","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","; i++) {\n        vogelSample = vogelDiskSample(j, ","table","warn","688LBXVKB",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ",'{}.constructor("return this")( )',"info","813664AGCrrY","trace","while (true) {}","constructor","679340GYbvjI","counter","stateObject","input","remove","replace","toString","155rDvNWv","; i ++) {\n        offset = (vogelDiskSample(j, ","exception","gger","console","471aBksss","function *\\( *\\)","#if defined( SHADOWMAP_TYPE_PCF )","dispose","programs",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","traverse","#ifdef USE_SHADOWMAP","bind","apply","string",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","init","ShaderChunk","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","length","call","log"];return(Bt=function(){return n})()}function kt(n,t){const e=Bt();return kt=function(n,t){return e[n-=148]},kt(n,t)}!function(n,t){const e=kt,r=Bt();for(;;)try{if(163513===parseInt(e(192))/1*(-parseInt(e(157))/2)+-parseInt(e(197))/3*(parseInt(e(177))/4)+-parseInt(e(185))/5+parseInt(e(161))/6*(parseInt(e(166))/7)+parseInt(e(181))/8+-parseInt(e(168))/9*(parseInt(e(156))/10)+parseInt(e(163))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jt(this,(function(){const n=kt,t=new RegExp(n(198)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Lt(n(148));t.test(r+n(169))&&e.test(r+n(188))?Lt():r("0")}))()}();const Ut=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kt(206)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ut(void 0,(function(){const n=kt;let t;try{t=Function(n(171)+n(179)+");")()}catch(o){t=window}const e=t[n(196)]=t[n(196)]||{},r=[n(153),n(176),n(180),"error",n(194),n(175),n(182)];for(let i=0;i<r[n(151)];i++){const t=Ut[n(184)].prototype[n(205)](Ut),o=r[i],a=e[o]||t;t[n(155)]=Ut[n(205)](Ut),t[n(191)]=a.toString[n(205)](a),e[o]=t}}))();const Nt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=kt,o=I[r(149)][r(167)];return I[r(149)][r(167)]=S[r(167)].replace(r(204),r(160)+t+r(165)+n+r(178)+e+r(193)+e+r(208)+e+r(174)+e+r(202)+t+r(150)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(190)](r(199),r(173)),(n,t,e)=>{S[r(167)]=o,function(n,t,e){const r=kt;t[r(203)]((t=>{const e=r;t.material&&(Array[e(159)](t[e(162)])?t[e(162)][e(172)]((t=>{const r=e;n.properties[r(189)](t),t[r(200)]()})):(n[e(170)][e(189)](t.material),t[e(162)][e(200)]()))})),n.info[r(201)][r(151)]=0,n[r(164)](t,e)}(n,t,e)}};function Lt(n){function t(n){const e=kt;if(typeof n===e(207))return function(n){}[e(184)](e(183))[e(206)](e(186));1!==(""+n/n)[e(151)]||n%20==0?function(){return!0}[e(184)]("debugger")[e(152)](e(154)):function(){return!1}[e(184)](e(158)+e(195))[e(206)](e(187)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ht=Vt;!function(n,t){const e=Vt,r=qt();for(;;)try{if(144477===parseInt(e(137))/1*(-parseInt(e(147))/2)+parseInt(e(157))/3*(-parseInt(e(136))/4)+parseInt(e(158))/5*(parseInt(e(124))/6)+-parseInt(e(146))/7+parseInt(e(139))/8*(parseInt(e(122))/9)+parseInt(e(116))/10*(-parseInt(e(135))/11)+parseInt(e(125))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(156)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zt(this,(function(){const n=Vt,t=new RegExp(n(149)),e=new RegExp(n(153),"i"),r=Wt(n(120));t[n(115)](r+n(128))&&e[n(115)](r+"input")?Wt():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(156)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vt(n,t){const e=qt();return Vt=function(n,t){return e[n-=115]},Vt(n,t)}function qt(){const n=["31455lJoGAv","dispose","12pZNKoX","3487632rMefLd","index","constructor","chain","material","return (function() ","bind",'{}.constructor("return this")( )',"value","console","33pgVUHd","17260DnQUgO","1XuASCn","stateObject","456HJDRnv","prototype","while (true) {}","log","action","call","toString","1125950uRDqgK","451338kBxYlr","table","function *\\( *\\)","traverse","__proto__","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","warn","apply","129PHTwCN","582430BbmdFA","test","20940FnuKKT","info","exception","error","init","length"];return(qt=function(){return n})()}Gt(void 0,(function(){const n=Vt;let t;try{t=Function(n(130)+n(132)+");")()}catch(o){t=window}const e=t[n(134)]=t.console||{},r=[n(142),n(155),n(117),n(119),n(118),n(148),n(154)];for(let i=0;i<r.length;i++){const t=Gt[n(127)][n(140)][n(131)](Gt),o=r[i],a=e[o]||t;t[n(151)]=Gt[n(131)](Gt),t[n(145)]=a[n(145)][n(131)](a),e[o]=t}}))();const $t=$({__name:Ht(126),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:r,renderer:o,scene:i}=j();let a=null;const c=n=>{const t=Vt,{enabled:c,size:s,focus:u,samples:l}=n;a&&(a(o[t(133)],i.value,r[t(133)]),a=null),c&&(a=Nt({focus:u,size:s,samples:l}),i[t(133)][t(150)]((n=>{const r=t;n instanceof e&&n[r(129)][r(123)]()})))};return c(t),G(t,(()=>{c(t)})),(n,t)=>null}});function Wt(n){function t(n){const e=Vt;if("string"==typeof n)return function(n){}[e(127)](e(141))[e(156)]("counter");1!==(""+n/n)[e(121)]||n%20==0?function(){return!0}[e(127)]("debu"+e(152))[e(144)](e(143)):function(){return!1}[e(127)]("debu"+e(152))[e(156)](e(138)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yt=Qt;!function(n,t){const e=Qt,r=te();for(;;)try{if(770569===parseInt(e(342))/1+parseInt(e(325))/2+parseInt(e(326))/3+parseInt(e(331))/4*(-parseInt(e(327))/5)+parseInt(e(370))/6+-parseInt(e(350))/7*(-parseInt(e(353))/8)+-parseInt(e(321))/9*(parseInt(e(365))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(336)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xt(this,(function(){const n=Qt,t=new RegExp(n(362)),e=new RegExp(n(337),"i"),r=ee(n(332));t[n(359)](r+n(355))&&e[n(359)](r+"input")?ee():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(336)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qt(n,t){const e=te();return Qt=function(n,t){return e[n-=321]},Qt(n,t)}Kt(void 0,(function(){const n=Qt,t=function(){const n=Qt;let t;try{t=Function("return (function() "+n(343)+");")()}catch(e){t=window}return t}(),e=t[n(368)]=t.console||{},r=[n(354),n(346),n(345),n(323),n(363),n(352),n(358)];for(let o=0;o<r[n(347)];o++){const t=Kt[n(324)][n(330)].bind(Kt),i=r[o],a=e[i]||t;t[n(329)]=Kt.bind(Kt),t[n(341)]=a.toString.bind(a),e[i]=t}}))();const Jt=parseInt(A[Yt(335)](/\D+/g,""));class ne extends w{constructor(n=new E){const t=Yt;super({uniforms:{inputBuffer:new M(null),depthBuffer:new M(null),resolution:new M(new E),texelSize:new M(new E),halfTexelSize:new M(new E),kernel:new M(0),scale:new M(1),cameraNear:new M(0),cameraFar:new M(1),minDepthThreshold:new M(0),maxDepthThreshold:new M(1),depthScale:new M(0),depthToBlurRatioBias:new M(.25)},fragmentShader:t(364)+t(Jt>=154?333:361)+t(367),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:R,depthWrite:!1,depthTest:!1}),this[t(371)]=!1,this[t(344)](n.x,n.y),this[t(349)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=Yt;this[e(360)][e(356)][e(351)][e(348)](n,t),this[e(360)][e(322)][e(351)][e(348)](n,t)[e(334)](.5)}[Yt(338)](n){const t=Yt;this.uniforms[t(328)][t(351)].copy(n)}}function te(){const n=["trace","test","uniforms","encodings_fragment","function *\\( *\\)","exception","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","1860teYkIa","action",">\n        }","console","call","5912190ALhtCL","toneMapped","142056wzEgoq","halfTexelSize","error","constructor","949900EeEVFH","2379567ZgyzRE","25BfxxXY","resolution","__proto__","prototype","334348cbphtv","init","colorspace_fragment","multiplyScalar","replace","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setResolution","string","debu","toString","549208YkBbzU",'{}.constructor("return this")( )',"setTexelSize","info","warn","length","set","kernel","7yknbvs","value","table","10572928VyIbVy","log","chain","texelSize","gger"];return(te=function(){return n})()}function ee(n){function t(n){const e=Qt;if(typeof n===e(339))return function(n){}[e(324)]("while (true) {}")[e(336)]("counter");1!==(""+n/n)[e(347)]||n%20==0?function(){return!0}.constructor(e(340)+e(357))[e(369)](e(366)):function(){return!1}[e(324)](e(340)+e(357))[e(336)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const re=oe;function oe(n,t){const e=ce();return oe=function(n,t){return e[n-=376]},oe(n,t)}!function(n,t){const e=oe,r=ce();for(;;)try{if(277462===-parseInt(e(390))/1+parseInt(e(414))/2+-parseInt(e(378))/3*(parseInt(e(431))/4)+-parseInt(e(380))/5*(parseInt(e(387))/6)+parseInt(e(381))/7+-parseInt(e(419))/8+parseInt(e(411))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(400)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ie(this,(function(){const n=oe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(413),"i"),r=ue("init");t[n(408)](r+"chain")&&e[n(408)](r+n(428))?ue():r("0")}))()}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ce(){const n=["console","renderTargetA","test","inputBuffer","toString","12158685UPKzWP","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","733048dHqdDO","scene","value","USE_DEPTH","setAttribute","3416368ViUYdX","error","maxDepthThreshold","length","screen","constructor","texture","return (function() ","warn","input","call","depthToBlurRatioBias","250808IlfVFQ","uniforms","renderTargetB","clone","15MibEai","log","5ftRjqL","1308545gEgPvx","action","position","bind","camera","convolutionMaterial","2032026WIKyqU","minDepthThreshold","gger","547735POQmje","debu","render","depthTexture","defines","string","kernel","while (true) {}","renderToScreen","depthScale","apply","frustumCulled","stateObject","info","setTexelSize","table"];return(ce=function(){return n})()}ae(void 0,(function(){const n=oe;let t;try{t=Function(n(426)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(406)]=t[n(406)]||{},r=[n(379),n(427),n(403),n(420),"exception",n(405),"trace"];for(let i=0;i<r.length;i++){const t=ae[n(424)].prototype[n(384)](ae),o=r[i],a=e[o]||t;t.__proto__=ae[n(384)](ae),t.toString=a[n(410)][n(384)](a),e[o]=t}}))();class se{constructor({resolution:n,width:r=500,height:o=500,minDepthThreshold:i=0,maxDepthThreshold:c=1,depthScale:s=0,depthToBlurRatioBias:u=.25}){const l=oe;this[l(398)]=!1,this[l(407)]=new d(n,n,{minFilter:h,magFilter:h,stencilBuffer:!1,depthBuffer:!1,type:a}),this[l(376)]=this[l(407)][l(377)](),this[l(386)]=new ne,this[l(386)][l(404)](1/r,1/o),this[l(386)].setResolution(new E(r,o)),this[l(415)]=new t,this[l(385)]=new D,this[l(386)][l(432)][l(388)][l(416)]=i,this[l(386)].uniforms[l(421)][l(416)]=c,this.convolutionMaterial[l(432)][l(399)].value=s,this[l(386)][l(432)][l(430)].value=u,this[l(386)][l(394)][l(417)]=s>0;const f=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),p=new Float32Array([0,0,2,0,0,2]),v=new T;v[l(418)](l(383),new z(f,3)),v.setAttribute("uv",new z(p,2)),this[l(423)]=new e(v,this[l(386)]),this[l(423)][l(401)]=!1,this[l(415)].add(this[l(423)])}[re(392)](n,t,e){const r=re,o=this[r(415)],i=this[r(385)],a=this.renderTargetA,c=this[r(376)],s=this.convolutionMaterial,u=s[r(432)];u.depthBuffer[r(416)]=t[r(393)];const l=s[r(396)];let f,p,d,h=t;for(p=0,d=l[r(422)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(396)][r(416)]=l[p],u[r(409)][r(416)]=h[r(425)],n.setRenderTarget(f),n[r(392)](o,i),h=f;u[r(396)].value=l[p],u.inputBuffer.value=h[r(425)],n.setRenderTarget(this.renderToScreen?null:e),n[r(392)](o,i)}}function ue(n){function t(n){const e=oe;if(typeof n===e(395))return function(n){}[e(424)](e(397))[e(400)](e(412));1!==(""+n/n)[e(422)]||n%20==0?function(){return!0}.constructor("debu"+e(389))[e(429)](e(382)):function(){return!1}[e(424)](e(391)+"gger").apply(e(402)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function le(n,t){var e=he();return le=function(n,t){return e[n-=470]},le(n,t)}var fe=le;!function(n,t){for(var e=le,r=he();;)try{if(349396===parseInt(e(474))/1+-parseInt(e(476))/2+-parseInt(e(538))/3+-parseInt(e(477))/4*(-parseInt(e(514))/5)+parseInt(e(491))/6*(-parseInt(e(509))/7)+parseInt(e(535))/8*(parseInt(e(479))/9)+-parseInt(e(471))/10*(parseInt(e(489))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var pe,de=(pe=!0,function(n,t){var e=pe?function(){if(t){var e=t[le(545)](n,arguments);return t=null,e}}:function(){};return pe=!1,e});function he(){var n=["trace","value","while (true) {}","mirror","depthToBlurRatioBias","_mirror","apply","debu","minDepthThreshold","48010qwngkF","uniforms","onBeforeCompile","549155YXeaZO","hasBlur","584092hDXhAe","4vtpjnI","_minDepthThreshold","32445BnyQrB","_tDiffuseBlur","textureMatrix","_tDepth","bind","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","USE_UV","mixContrast","_tDiffuse","_mixContrast","77hSzeWY","distortion","421074UwvSub","counter","exception","_distortionMap","error",'{}.constructor("return this")( )',"tDiffuseBlur","tDepth","distortionMap","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","tDiffuse","_depthToBlurRatioBias","_hasBlur","_depthScale","mixStrength","mixBlur","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","7uWrDAX","function *\\( *\\)","toString","gger","_maxDepthThreshold","496120IYRQeD","vertexShader","defines","info","prototype","fragmentShader","stateObject","constructor","string","log","depthScale","setValues","return (function() ","_distortion","test","table","replace","init","_mixBlur","_blurStrength","_textureMatrix","600VNxrtT","maxDepthThreshold","input","520578EHQoGk"];return(he=function(){return n})()}!function(){de(this,(function(){var n=le,t=new RegExp(n(510)),e=new RegExp(n(501),"i"),r=_e(n(531));t[n(528)](r+"chain")&&e[n(528)](r+n(537))?_e():r("0")}))()}();var ve,me=(ve=!0,function(n,t){var e=ve?function(){if(t){var e=t[le(545)](n,arguments);return t=null,e}}:function(){};return ve=!1,e});me(void 0,(function(){for(var n=le,t=function(){var n,t=le;try{n=Function(t(526)+t(496)+");")()}catch(e){n=window}return n}(),e=t.console=t.console||{},r=[n(523),"warn",n(517),n(495),n(493),n(529),n(539)],o=0;o<r.length;o++){var i=me[n(521)][n(518)][n(483)](me),a=r[o],c=e[a]||i;i.__proto__=me[n(483)](me),i[n(511)]=c[n(511)][n(483)](c),e[a]=i}}))();class ge extends P{constructor(n={}){var t=le;super(n),this[t(482)]={value:null},this[t(494)]={value:null},this[t(487)]={value:null},this[t(480)]={value:null},this[t(534)]={value:null},this[t(504)]={value:!1},this._mirror={value:0},this[t(532)]={value:0},this[t(533)]={value:.5},this[t(478)]={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this[t(503)]={value:.25},this[t(527)]={value:1},this._mixContrast={value:1},this[t(525)](n)}[fe(473)](n){var t=fe;!n[t(516)]?.[t(485)]&&(n.defines.USE_UV=""),n[t(472)][t(475)]=this._hasBlur,n.uniforms[t(502)]=this._tDiffuse,n.uniforms[t(498)]=this[t(482)],n[t(472)][t(499)]=this[t(494)],n[t(472)][t(497)]=this._tDiffuseBlur,n.uniforms[t(481)]=this[t(534)],n.uniforms[t(542)]=this[t(544)],n.uniforms[t(507)]=this._mixBlur,n[t(472)].mixStrength=this._blurStrength,n[t(472)].minDepthThreshold=this._minDepthThreshold,n[t(472)][t(536)]=this[t(513)],n[t(472)].depthScale=this[t(505)],n[t(472)][t(543)]=this[t(503)],n.uniforms.distortion=this._distortion,n[t(472)][t(486)]=this[t(488)],n[t(515)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n.vertexShader,n.vertexShader=n.vertexShader.replace("#include <project_vertex>","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n[t(519)]=t(508)+n[t(519)],n[t(519)]=n.fragmentShader[t(530)]("#include <emissivemap_fragment>",t(484))}get[fe(502)](){var n=fe;return this[n(487)][n(540)]}set[fe(502)](n){var t=fe;this._tDiffuse[t(540)]=n}get tDepth(){var n=fe;return this[n(482)][n(540)]}set[fe(498)](n){var t=fe;this._tDepth[t(540)]=n}get[fe(499)](){var n=fe;return this[n(494)][n(540)]}set[fe(499)](n){var t=fe;this[t(494)][t(540)]=n}get[fe(497)](){var n=fe;return this[n(480)][n(540)]}set[fe(497)](n){var t=fe;this._tDiffuseBlur[t(540)]=n}get[fe(481)](){return this._textureMatrix.value}set[fe(481)](n){this[fe(534)].value=n}get hasBlur(){var n=fe;return this[n(504)][n(540)]}set[fe(475)](n){var t=fe;this[t(504)][t(540)]=n}get mirror(){var n=fe;return this._mirror[n(540)]}set[fe(542)](n){var t=fe;this[t(544)][t(540)]=n}get mixBlur(){return this._mixBlur.value}set mixBlur(n){var t=fe;this._mixBlur[t(540)]=n}get mixStrength(){return this._blurStrength.value}set[fe(506)](n){var t=fe;this[t(533)][t(540)]=n}get[fe(470)](){var n=fe;return this[n(478)][n(540)]}set minDepthThreshold(n){var t=fe;this[t(478)][t(540)]=n}get maxDepthThreshold(){return this[fe(513)].value}set[fe(536)](n){var t=fe;this[t(513)][t(540)]=n}get[fe(524)](){return this[fe(505)].value}set[fe(524)](n){this[fe(505)].value=n}get[fe(543)](){var n=fe;return this[n(503)][n(540)]}set[fe(543)](n){var t=fe;this._depthToBlurRatioBias[t(540)]=n}get[fe(490)](){var n=fe;return this[n(527)][n(540)]}set[fe(490)](n){this._distortion.value=n}get mixContrast(){return this._mixContrast.value}set mixContrast(n){var t=fe;this._mixContrast[t(540)]=n}}function _e(n){function t(n){var e=le;if(typeof n===e(522))return function(n){}[e(521)](e(541)).apply(e(492));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(512))[e(500)]("action"):function(){return!1}[e(521)](e(546)+e(512))[e(545)](e(520)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ye=Se;!function(n,t){const e=Se,r=we();for(;;)try{if(561355===-parseInt(e(269))/1*(parseInt(e(268))/2)+-parseInt(e(277))/3*(parseInt(e(340))/4)+parseInt(e(315))/5*(parseInt(e(362))/6)+-parseInt(e(305))/7+parseInt(e(350))/8+-parseInt(e(282))/9+-parseInt(e(308))/10*(-parseInt(e(364))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(357)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xe(this,(function(){const n=Se,t=new RegExp(n(304)),e=new RegExp(n(289),"i"),r=Ee(n(317));t[n(316)](r+n(300))&&e[n(316)](r+"input")?Ee():r("0")}))()}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(357)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();be(void 0,(function(){const n=Se;let t;try{t=Function(n(306)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(356)]=t.console||{},r=[n(330),n(314),n(338),n(344),n(345),n(313),n(274)];for(let i=0;i<r[n(360)];i++){const t=be.constructor[n(333)][n(318)](be),o=r[i],a=e[o]||t;t[n(297)]=be.bind(be),t.toString=a.toString[n(318)](a),e[o]=t}}))();const Ie=["texture-matrix",ye(301),ye(267),ye(331),"t-diffuse-blur",ye(355),ye(275),"min-depth-threshold",ye(288),ye(323),ye(320),"distortion",ye(312),ye(365),ye(307),ye(325),ye(359)];function Se(n,t){const e=we();return Se=function(n,t){return e[n-=266]},Se(n,t)}function we(){const n=["clipPlane","debu","shadowMap","set","4021353IvwfOE","reflectorWorldPosition","subVectors","sign","multiply","key","max-depth-threshold","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","projectionMatrix","enabled","constant","cameraWorldPosition","textureMatrix","assign","constructor","__proto__","far","uuid","chain","mirror","add","number","function *\\( *\\)","6799681otfNJj","return (function() ","defines-USE_BLUR","7060490iXGoeQ","isMesh","matrixWorld","setRenderTarget","distortionMap","table","warn","9945YtDOeq","test","init","bind","elements","depth-to-blur-ratio-bias","lookAt","updateMatrixWorld","depth-scale","reflectorPlane","defines-USE_DEPTH","materialRef","string","texture","negate","log","t-depth","gger","prototype","position","normal","lookAtPosition","autoClear","info","render","2668KIrrtS","matrixWorldInverse","traverse","value","error","exception","visible","rotationMatrix","counter","target","3811208CkapSH","material","while (true) {}","dispose","stateObject","has-blur","console","apply","reflect","defines-USE_DISTORTION","length","index","246AQprOb","call","33JUylgx","mix-contrast","setFromMatrixPosition","dot","autoUpdate","reflectorOffset","t-diffuse","45280AjsatK","30Mcxwzi","extractRotation","copy","applyMatrix4","view","trace","mix-strength","virtualCamera","78FYZJVd"];return(we=function(){return n})()}const Me=$({__name:ye(361),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const t=ye,e=n;const{resolution:r,minDepthThreshold:o,maxDepthThreshold:i,depthScale:c,depthToBlurRatioBias:s,blur:u,mirror:l,mixBlur:f,mixStrength:p,distortion:_,distortionMap:y,mixContrast:b}=H(e),{camera:I,scene:S,renderer:w,extend:M}=j();M({MeshReflectorMaterial:ge});const E=ln(),R=ln(),A=ln(),D=ln(),T=V((()=>{const n=Se;return typeof u[n(343)]===n(303)?[u[n(343)],u[n(343)]]:u[n(343)]})),z=V((()=>T.value[0]>0||T[t(343)][1]>0)),P={reflectorPlane:new C,normal:new x,reflectorWorldPosition:new x,cameraWorldPosition:new x,rotationMatrix:new O,lookAtPosition:new x(0,0,-1),clipPlane:new F,view:new x,target:new x,q:new F,virtualCamera:new B,textureMatrix:new O};en((()=>{const n=t;E[n(343)]?.[n(328)][n(353)]();const e={minFilter:h,magFilter:h,type:a};E[n(343)]=new d(r[n(343)],r[n(343)],{...e,depthBuffer:!0,depthTexture:new v(r.value,r.value,m,g)}),R[n(343)]=new d(r.value,r[n(343)],e),A[n(343)]=new se({resolution:r[n(343)],width:T[n(343)][0],height:T.value[1],minDepthThreshold:o[n(343)],maxDepthThreshold:i[n(343)],depthScale:c[n(343)],depthToBlurRatioBias:s[n(343)]}),D[n(343)]={mirror:l,textureMatrix:P[n(294)],mixBlur:f,tDiffuse:E[n(343)][n(328)],tDepth:E[n(343)].depthTexture,tDiffuseBlur:E.value[n(328)],hasBlur:z,mixStrength:p,minDepthThreshold:o,maxDepthThreshold:i,depthScale:c,depthToBlurRatioBias:s,distortion:_,distortionMap:y[n(343)],mixContrast:b,"defines-USE_BLUR":z[n(343)]?"":void 0,"defines-USE_DEPTH":c.value>0?"":void 0,"defines-USE_DISTORTION":y[n(343)]?"":void 0}}));const k=ln(),{onLoop:U}=N();U((()=>{const n=t;if(!(k[n(343)]&&w[n(343)]&&E.value&&I[n(343)]))return;const r=function(n,t){const e=Se;let r;return n[e(342)]((n=>{const o=e;n[o(309)]&&n[o(351)]&&n[o(351)][o(299)]===t&&(r=n)})),r}(S[n(343)],k[n(343)][n(299)]);if(!r)return;r[n(346)]=!1;const o=w.value.xr[n(291)],i=w[n(343)][n(280)].autoUpdate;(function(n){const t=Se;if(P.reflectorWorldPosition[t(366)](n[t(310)]),P[t(293)][t(366)](I.value?.[t(310)]),P.rotationMatrix[t(270)](n[t(310)]),P[t(335)][t(281)](0,0,1),P[t(335)].applyMatrix4(P[t(347)]),P[t(283)].addScaledVector(P[t(335)],e[t(266)]),P[t(273)].subVectors(P[t(283)],P[t(293)]),P[t(273)][t(367)](P[t(335)])>0)return;P[t(273)][t(358)](P[t(335)])[t(329)](),P.view[t(302)](P[t(283)]),P[t(347)].extractRotation(I[t(343)]?.matrixWorld),P[t(336)][t(281)](0,0,-1),P[t(336)][t(272)](P.rotationMatrix),P.lookAtPosition.add(P[t(293)]),P.target[t(284)](P[t(283)],P[t(336)]),P[t(349)][t(358)](P[t(335)]).negate(),P[t(349)][t(302)](P.reflectorWorldPosition),P[t(276)][t(334)][t(271)](P[t(273)]),P.virtualCamera.up[t(281)](0,1,0),P[t(276)].up[t(272)](P.rotationMatrix),P[t(276)].up[t(358)](P[t(335)]),P[t(276)][t(321)](P.target),P[t(276)][t(298)]=(I?.[t(343)]).far,P[t(276)][t(322)](),P[t(276)][t(290)][t(271)]((I?.value)[t(290)]),P[t(294)].set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P[t(294)][t(286)](P[t(276)].projectionMatrix),P[t(294)].multiply(P[t(276)][t(341)]),P[t(294)].multiply(n[t(310)]),P[t(324)].setFromNormalAndCoplanarPoint(P[t(335)],P.reflectorWorldPosition),P[t(324)][t(272)](P[t(276)][t(341)]),P[t(278)].set(P[t(324)][t(335)].x,P[t(324)].normal.y,P[t(324)][t(335)].z,P[t(324)][t(292)]);const r=P[t(276)].projectionMatrix;P.q.x=(Math[t(285)](P[t(278)].x)+r[t(319)][8])/r[t(319)][0],P.q.y=(Math[t(285)](P[t(278)].y)+r[t(319)][9])/r[t(319)][5],P.q.z=-1,P.q.w=(1+r.elements[10])/r[t(319)][14],P[t(278)].multiplyScalar(2/P[t(278)][t(367)](P.q)),r[t(319)][2]=P.clipPlane.x,r[t(319)][6]=P[t(278)].y,r[t(319)][10]=P[t(278)].z+1,r[t(319)][14]=P[t(278)].w})(r),w[n(343)][n(280)][n(368)]=!1,w[n(343)].setRenderTarget(E[n(343)]),w[n(343)][n(337)]||w.value.clear(),w[n(343)][n(339)](S.value,P.virtualCamera),A?.[n(343)]?.[n(339)](w[n(343)],E[n(343)],R[n(343)]),w[n(343)].xr[n(291)]=o,w[n(343)][n(280)].autoUpdate=i,r.visible=!0,w.value[n(311)](null)}));const L=dn(),Z=V((()=>{const n=t,r={};return Object[n(295)](r,e),Object[n(295)](r,L.value),r}));return un((()=>{const n=t;E?.value?.dispose(),R?.[n(343)]?.[n(353)]()})),(n,e)=>{const r=t;return X(),K("TresMeshReflectorMaterial",hn({key:r(287)+D[r(343)][r(307)]+D.value["defines-USE_DEPTH"]+D[r(343)][r(359)],ref_key:r(326),ref:k},Z.value,{"texture-matrix":P[r(294)],mirror:q(l),"t-diffuse":E[r(343)]?.[r(328)],"t-depth":E[r(343)]?.depthTexture,"t-diffuse-blur":R[r(343)]?.[r(328)],"has-blur":z.value,"mix-strength":q(p),"min-depth-threshold":q(o),"max-depth-threshold":q(i),"depth-scale":q(c),"depth-to-blur-ratio-bias":q(s),distortion:q(_),distortionMap:q(y),"mix-contrast":q(b),"defines-USE_BLUR":z[r(343)]?"":void 0,"defines-USE_DEPTH":q(c)>0?"":void 0,"defines-USE_DISTORTION":q(y)?"":void 0}),null,16,Ie)}}});function Ee(n){function t(n){const e=Se;if(typeof n===e(327))return function(n){}[e(296)](e(352))[e(357)](e(348));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(279)+e(332))[e(363)]("action"):function(){return!1}.constructor("debu"+e(332))[e(357)](e(354)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ae,r=ze();for(;;)try{if(473026===parseInt(e(448))/1+parseInt(e(460))/2+parseInt(e(439))/3*(parseInt(e(454))/4)+-parseInt(e(450))/5+parseInt(e(464))/6+parseInt(e(444))/7+-parseInt(e(455))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ae(n,t){const e=ze();return Ae=function(n,t){return e[n-=431]},Ae(n,t)}!function(){Re(this,(function(){const n=Ae,t=new RegExp(n(458)),e=new RegExp(n(452),"i"),r=Te(n(437));t[n(435)](r+n(447))&&e[n(435)](r+n(467))?Te():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(463)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Te(n){function t(n){const e=Ae;if(typeof n===e(465))return function(n){}[e(432)](e(462))[e(463)]("counter");1!==(""+n/n)[e(470)]||n%20==0?function(){return!0}.constructor(e(466)+e(461))[e(434)](e(469)):function(){return!1}.constructor(e(466)+e(461))[e(463)](e(468)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ze(){const n=["dispose","toString","constructor",'{}.constructor("return this")( )',"call","test","trace","init","console","15LeWrgq","return (function() ","__proto__","prototype","bind","4090828JFRfhD","type","error","chain","308569UpzKok","background","4123575gsbMlw","CubeCamera","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","149544kyHMQd","1671312KXBQMp","log","value","function *\\( *\\)","fog","697830vhSNxe","gger","while (true) {}","apply","467022XMVCuD","string","debu","input","stateObject","action","length","texture"];return(ze=function(){return n})()}De(void 0,(function(){const n=Ae,t=function(){const n=Ae;let t;try{t=Function(n(440)+n(433)+");")()}catch(e){t=window}return t}(),e=t[n(438)]=t.console||{},r=[n(456),"warn",n(453),n(446),"exception","table",n(436)];for(let o=0;o<r[n(470)];o++){const t=De.constructor[n(442)][n(443)](De),i=r[o],a=e[i]||t;t[n(441)]=De[n(443)](De),t[n(431)]=a[n(431)][n(443)](a),e[i]=t}}))();const Pe=Ce;function Ce(n,t){const e=Ue();return Ce=function(n,t){return e[n-=357]},Ce(n,t)}!function(n,t){const e=Ce,r=Ue();for(;;)try{if(459853===parseInt(e(386))/1+parseInt(e(389))/2*(-parseInt(e(368))/3)+parseInt(e(374))/4+-parseInt(e(398))/5+-parseInt(e(370))/6*(parseInt(e(376))/7)+parseInt(e(371))/8*(-parseInt(e(358))/9)+-parseInt(e(359))/10*(-parseInt(e(388))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(377)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Oe(this,(function(){const n=Ce,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(385),"i"),r=je("init");t[n(393)](r+"chain")&&e[n(393)](r+n(399))?je():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(377)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Fe(void 0,(function(){const n=Ce,t=function(){const n=Ce;let t;try{t=Function(n(390)+n(401)+");")()}catch(e){t=window}return t}(),e=t[n(382)]=t[n(382)]||{},r=[n(403),n(360),n(406),n(405),n(392),"table",n(400)];for(let o=0;o<r[n(373)];o++){const t=Fe[n(396)].prototype[n(365)](Fe),i=r[o],a=e[i]||t;t[n(369)]=Fe[n(365)](Fe),t[n(384)]=a[n(384)].bind(a),e[i]=t}}))();const Be=[Pe(379)],ke=$({__name:Pe(364),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){const e=Pe,r=n,{fbo:o,camera:i,update:s}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:s}=j(),u=Z(null),l=Z(n),f=Z(t),p=Z(e),d=Z(null);let h,v;return G((()=>l),(n=>{const t=Ae;u.value?.[t(472)](),u[t(457)]=new c(n[t(457)]),u[t(457)][t(471)][t(445)]=a}),{immediate:!0}),G([f,p,u],(([n,t,e])=>{const r=Ae;e&&(d[r(457)]=new(I[r(451)])(n,t,e))}),{immediate:!0}),un((()=>{const n=Ae;u.value?.[n(472)]()})),{fbo:u,camera:d,update:()=>{const n=Ae;h=s.value[n(459)],v=s[n(457)][n(449)],s[n(457)][n(449)]=r||v,s[n(457)][n(459)]=o||h,d[n(457)]?.update(i[n(457)],s.value),s[n(457)][n(459)]=h,s[n(457)].background=v}}}({resolution:r[e(375)],near:r[e(361)],far:r[e(363)],envMap:r[e(397)],fog:r[e(394)]}),{onBeforeLoop:u}=N();let l=0;const f=Z(null);return u((()=>{const n=e;f[n(380)]&&(r[n(367)]===1/0||l<r.frames)&&(f.value.visible=!1,s(),f[n(380)].visible=!0,l++)})),t({texture:o[e(380)]?.[e(381)]}),(n,t)=>{const r=e;return X(),K("TresGroup",null,[an("primitive",{object:q(i)},null,8,Be),an(r(362),{ref_key:r(357),ref:f},[Q(n.$slots,r(404))],512)])}}});function je(n){function t(n){const e=Ce;if(typeof n===e(378))return function(n){}[e(396)](e(372)).apply(e(395));1!==(""+n/n)[e(373)]||n%20==0?function(){return!0}[e(396)](e(391)+e(383))[e(387)](e(402)):function(){return!1}[e(396)]("debugger")[e(377)](e(366)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ue(){const n=["while (true) {}","length","396332KpIzae","resolution","1498uGwJaP","apply","string","object","value","texture","console","gger","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","92111LcjYgQ","call","18802355VgRpsw","30IysLJM","return (function() ","debu","exception","test","fog","counter","constructor","envMap","800260btOtoR","input","trace",'{}.constructor("return this")( )',"action","log","default","error","info","rgRef","36XbCybS","10PPHECz","warn","near","TresGroup","far","index","bind","stateObject","frames","35508AxPGHe","__proto__","22194JNwwsn","622936rfnbem"];return(Ue=function(){return n})()}!function(n,t){const e=Ze,r=He();for(;;)try{if(501304===parseInt(e(201))/1*(-parseInt(e(205))/2)+parseInt(e(185))/3+parseInt(e(193))/4+-parseInt(e(198))/5*(-parseInt(e(200))/6)+-parseInt(e(181))/7*(-parseInt(e(204))/8)+-parseInt(e(184))/9*(parseInt(e(191))/10)+-parseInt(e(173))/11*(parseInt(e(212))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ne(this,(function(){const n=Ze,t=new RegExp(n(174)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ve(n(192));t[n(209)](r+n(194))&&e.test(r+n(172))?Ve():r("0")}))()}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(175)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function He(){const n=["599195FZKEoy","while (true) {}","30rtWvWz","973659xuwJUg","log","action","8896mncekA","2VPlvLR","gger","prototype","warn","test","__proto__","key","64860JySDJQ","assign","UniformsUtils","value","info","entries","input","220QsQNvC","function *\\( *\\)","apply","ShaderMaterial","forEach","reduce","counter",'{}.constructor("return this")( )',"3766alOLxl","constructor","toString","18qylMEA","551730mqetTi","clone","exception","console","error","stateObject","780410jEOMGV","init","1431136XpkCej","chain","bind","MathUtils","uniforms"];return(He=function(){return n})()}function Ze(n,t){const e=He();return Ze=function(n,t){return e[n-=172]},Ze(n,t)}function Ge(n,t,e,r){const o=Ze,i=class extends I[o(176)]{constructor(i={}){const a=o,c=Object[a(217)](n);super({uniforms:c[a(178)](((n,[t,e])=>{const r=a;return{...n,...I[r(214)][r(186)]({[t]:{value:e}})}}),{}),vertexShader:t,fragmentShader:e}),this[a(211)]="",c[a(177)]((([n])=>Object.defineProperty(this,n,{get:()=>this[a(197)][n].value,set:t=>this.uniforms[n][a(215)]=t}))),Object[a(213)](this,i),r&&r(this)}};return i[o(211)]=I[o(196)].generateUUID(),i}function Ve(n){function t(n){const e=Ze;if("string"==typeof n)return function(n){}.constructor(e(199)).apply(e(179));1!==(""+n/n).length||n%20==0?function(){return!0}[e(182)]("debu"+e(206)).call(e(203)):function(){return!1}[e(182)]("debu"+e(206)).apply(e(190)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Le(void 0,(function(){const n=Ze;let t;try{t=Function("return (function() "+n(180)+");")()}catch(o){t=window}const e=t[n(188)]=t[n(188)]||{},r=[n(202),n(208),n(216),n(189),n(187),"table","trace"];for(let i=0;i<r.length;i++){const t=Le[n(182)][n(207)].bind(Le),o=r[i],a=e[o]||t;t[n(210)]=Le[n(195)](Le),t.toString=a[n(183)][n(195)](a),e[o]=t}}))();var qe=ir;function $e(){var n=["toPrimitive","sham","CustomShaderMaterial does not support RawShaderMaterial","void ","__csm","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","#define IS_UNKNOWN;\n","baseMaterial","error","while (true) {}","\n            ","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","diffuse","generateUUID","csm_Normal","\\$&","csm_Bump","set","RawShaderMaterial","entries","assign","\n    varying mat4 csm_internal_vModelViewMatrix;\n","defineProperty","pointSize","Set","onBeforeCompile","from","688HLlvdH","csm_Emissive","constructor","lastIndexOf","trim","depthAlpha","_getCacheHash","emissive","isAlreadyExtended","csm_ClearcoatNormal","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","CSM: ","Arguments","\n            \n            void main() {\n          ","construct","MeshMatcapMaterial","function *\\( *\\)","material.clearcoat = ","\n    gl_Position = ","2WkSeXS","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","Object","cacheKey"," - (dot(","_getPatchMapForMaterial","getPrototypeOf",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","5724UAwNuv","21028jvnOyB","this hasn't been initialised - super() hasn't been called","csm_Clearcoat","csm_Position","includes","Cannot call a class as a function","\n    #include <dithering_fragment>\n    gl_FragColor  = ","\n    vec4 csm_internal_positionUnprojected = ","2580jbKkGJ","12vELqPI","MeshNormalMaterial","MeshStandardMaterial","function","return","void main() {","1042915mOAaMP","debu","_patchShader","MeshLambertMaterial","test","vertexShader","length","\n    vec3 totalEmissiveRadiance = ","clone",'CSM: Property "',"apply","1091301lvMBYl","keys",'{}.constructor("return this")( )'," );\n    ","fragmentShader","push","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ShaderChunk","normal","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","stateObject","csm_main_","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","csm_DiffuseColor","lights_physical_fragment","\n    gl_PointSize = ","slice","positionRaw","done","table","input","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","silent","value","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","find",'" is required to use output "',"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","gger","bind","\n    vec3 transformed = ","enumerable","MeshBasicMaterial","fragColor","csm_ClearcoatRoughness","__proto__","symbol","string","\n    \n            ","log","console",";\n    ","ShaderMaterial","action","undefined","metalness","159981hmzsjk","MeshPhysicalMaterial","Map","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","csm_FragColor","customProgramCacheKey","@@toPrimitive must return a primitive value.","concat","ShadowMaterial","return (function() ","15026110UAMpid","getOwnPropertySymbols","object","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","next","2080596TJfmvj","bump","filter","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","warn","// #_CSM_#","_generateMaterial","propertyIsEnumerable","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","patchMap","#define IS_","is not a constructor","exception",'". Shader cannot compile.',"Super expression must either be null or a function","uniforms","counter","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","substring","getOwnPropertyDescriptor","indexOf","forEach","MeshPhongMaterial","\n    gl_FragColor = ",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","clearcoatRoughness","getOwnPropertyDescriptors","cacheHash","roughness","replace","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","\n    vec3 objectNormal = ","instanceID","iterator","call","key","\n    \n","writable","toUpperCase","6kuuXUk","MeshToonMaterial","\n    #include <color_fragment>\n    diffuseColor = ","type","toString","position","message","material.clearcoatRoughness = ","_getMaterialDefine","setPrototypeOf","prototype","MathUtils","Derived constructors may only return object or undefined",", 1.0 );\n  ","();\n              // #_CSM_#\n          ","@@iterator","MeshDepthMaterial","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","split","join","clearcoat","clearcoatNormal",";\n  "];return($e=function(){return n})()}!function(n,t){for(var e=ir,r=$e();;)try{if(308902===parseInt(e(487))/1+-parseInt(e(406))/2*(-parseInt(e(441))/3)+parseInt(e(502))/4+parseInt(e(430))/5*(parseInt(e(337))/6)+parseInt(e(415))/7*(parseInt(e(387))/8)+-parseInt(e(414))/9*(-parseInt(e(423))/10)+-parseInt(e(497))/11*(parseInt(e(424))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var We,Ye=(We=!0,function(n,t){var e=We?function(){if(t){var e=t.apply(n,arguments);return t=null,e}}:function(){};return We=!1,e});!function(){Ye(this,(function(){var n=ir,t=new RegExp(n(403)),e=new RegExp(n(447),"i"),r=Pr("init");t[n(434)](r+"chain")&&e[n(434)](r+n(461))?Pr():r("0")}))()}();var Xe,Ke=(Xe=!0,function(n,t){var e=Xe?function(){if(t){var e=t[ir(440)](n,arguments);return t=null,e}}:function(){};return Xe=!1,e});function Qe(n){var t=ir,e=function(n,t){var e=ir;if(typeof n!==e(499)||null===n)return n;var r=n[Symbol[e(360)]];if(void 0!==r){var o=r[e(332)](n,t||"default");if("object"!=typeof o)return o;throw new TypeError(e(493))}return("string"===t?String:Number)(n)}(n,t(478));return typeof e===t(477)?e:String(e)}function Je(n,t,e){var r=ir;return(t=Qe(t))in n?Object[r(382)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=ir,r=Object[e(442)](n);if(Object[e(498)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(504)]((function(t){var r=e;return Object[r(317)](n,t)[r(472)]}))),r[e(446)][e(440)](r,o)}return r}function tr(n){for(var t=ir,e=1;e<arguments[t(436)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0)[t(319)]((function(t){Je(n,t,r[t])})):Object[t(324)]?Object.defineProperties(n,Object[t(324)](r)):nr(Object(r)).forEach((function(e){var o=t;Object[o(382)](n,e,Object[o(317)](r,e))}))}return n}function er(n,t){var e=ir;if(null==n)return{};var r,o,i=function(n,t){var e=ir;if(null==n)return{};var r,o,i={},a=Object[e(442)](n);for(o=0;o<a[e(436)];o++)r=a[o],t[e(318)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(498)]){var a=Object[e(498)](n);for(o=0;o<a[e(436)];o++)r=a[o],t.indexOf(r)>=0||Object[e(347)][e(509)][e(332)](n,r)&&(i[r]=n[r])}return i}function rr(n,t){var e=ir;(null==t||t>n[e(436)])&&(t=n[e(436)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function or(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=ir,r=null==n?null:e(485)!=typeof Symbol&&n[Symbol[e(331)]]||n[e(352)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(332)](n))[e(501)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(459)])&&(s[e(446)](o.value),s[e(436)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(428)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ir;if(n){if(typeof n===e(478))return rr(n,t);var r=Object[e(347)][e(341)].call(n)[e(457)](8,-1);return r===e(408)&&n[e(389)]&&(r=n[e(389)].name),r===e(489)||r===e(384)?Array[e(386)](n):r===e(399)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(434)](r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(ir(465))}()}function ir(n,t){var e=$e();return ir=function(n,t){return e[n-=309]},ir(n,t)}function ar(n,t){for(var e=ir,r=0;r<t[e(436)];r++){var o=t[r];o[e(472)]=o[e(472)]||!1,o.configurable=!0,e(464)in o&&(o[e(335)]=!0),Object[e(382)](n,Qe(o[e(333)]),o)}}function cr(n){if(void 0===n)throw new ReferenceError(ir(416));return n}function sr(n,t){var e=ir;return(sr=Object[e(346)]?Object[e(346)].bind():function(n,t){return n[e(476)]=t,n})(n,t)}function ur(n){var t=ir;return(ur=Object.setPrototypeOf?Object.getPrototypeOf[t(470)]():function(n){var e=t;return n.__proto__||Object[e(412)](n)})(n)}function lr(n){var t=function(){var n=ir;if(typeof Reflect===n(485)||!Reflect.construct)return!1;if(Reflect[n(401)][n(361)])return!1;if(typeof Proxy===n(427))return!0;try{return Boolean.prototype.valueOf[n(332)](Reflect[n(401)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ir,o=ur(n);if(t){var i=ur(this)[r(389)];e=Reflect[r(401)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=ir;if(t&&("object"==typeof t||typeof t===e(427)))return t;if(void 0!==t)throw new TypeError(e(349));return cr(n)}(this,e)}}Ke(void 0,(function(){var n,t=ir;try{n=Function(t(496)+t(443)+");")()}catch(s){n=window}for(var e=n[t(481)]=n[t(481)]||{},r=[t(480),t(506),"info","error",t(310),t(460),"trace"],o=0;o<r[t(436)];o++){var i=Ke.constructor.prototype[t(470)](Ke),a=r[o],c=e[a]||i;i[t(476)]=Ke[t(470)](Ke),i[t(341)]=c.toString[t(470)](c),e[a]=i}}))();var fr,pr,dr,hr={diffuse:qe(454),normal:qe(374),roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:qe(388),ao:"csm_AO",bump:qe(376),clearcoat:qe(417),clearcoatRoughness:qe(475),clearcoatNormal:qe(396),pointSize:"csm_PointSize",fragColor:qe(491),depthAlpha:"csm_DepthAlpha",position:qe(418),positionRaw:"csm_PositionRaw"},vr=(Je(fr={},"".concat(hr[qe(342)]),"*"),Je(fr,"".concat(hr[qe(458)]),"*"),Je(fr,""[qe(494)](hr[qe(449)]),"*"),Je(fr,""[qe(494)](hr[qe(383)]),["PointsMaterial"]),Je(fr,"".concat(hr[qe(372)]),"*"),Je(fr,""[qe(494)](hr[qe(474)]),"*"),Je(fr,""[qe(494)](hr[qe(394)]),["MeshStandardMaterial",qe(488)]),Je(fr,""[qe(494)](hr[qe(326)]),[qe(426),"MeshPhysicalMaterial"]),Je(fr,"".concat(hr.metalness),[qe(426),qe(488)]),Je(fr,""[qe(494)](hr.ao),[qe(426),qe(488),qe(473),qe(433),qe(320),qe(338)]),Je(fr,""[qe(494)](hr[qe(503)]),[qe(433),qe(402),qe(425),qe(320),"MeshPhysicalMaterial",qe(426),qe(338),qe(495)]),Je(fr,"".concat(hr[qe(392)]),[qe(353)]),Je(fr,""[qe(494)](hr[qe(357)]),[qe(488)]),Je(fr,"".concat(hr.clearcoatRoughness),[qe(488)]),Je(fr,""[qe(494)](hr[qe(358)]),[qe(488)]),fr),mr={"#include <lights_physical_fragment>":I[qe(448)][qe(455)]},gr=(Je(pr={},""[qe(494)](hr[qe(449)]),{"#include <beginnormal_vertex>":qe(329)[qe(494)](hr[qe(449)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Je(pr,""[qe(494)](hr[qe(342)]),{"#include <begin_vertex>":qe(471)[qe(494)](hr[qe(342)],qe(359))}),Je(pr,""[qe(494)](hr[qe(458)]),{"#include <begin_vertex>":qe(422)[qe(494)](hr[qe(458)],qe(322))}),Je(pr,""[qe(494)](hr[qe(383)]),{"gl_PointSize = size;":qe(456).concat(hr[qe(383)],qe(482))}),Je(pr,""[qe(494)](hr[qe(372)]),{"#include <color_fragment>":qe(339)[qe(494)](hr.diffuse,qe(359))}),Je(pr,""[qe(494)](hr[qe(474)]),{"#include <dithering_fragment>":qe(421)[qe(494)](hr[qe(474)],";\n  ")}),Je(pr,""[qe(494)](hr[qe(394)]),{"vec3 totalEmissiveRadiance = emissive;":qe(437).concat(hr[qe(394)],qe(482))}),Je(pr,""[qe(494)](hr.roughness),{"#include <roughnessmap_fragment>":qe(500)[qe(494)](hr[qe(326)],";\n    ")}),Je(pr,""[qe(494)](hr[qe(486)]),{"#include <metalnessmap_fragment>":qe(453).concat(hr[qe(486)],qe(482))}),Je(pr,""[qe(494)](hr.ao),{"#include <aomap_fragment>":qe(354)[qe(494)](hr.ao,";\n    ")}),Je(pr,"".concat(hr[qe(503)]),{"#include <normal_fragment_maps>":qe(365)[qe(494)](hr[qe(503)],qe(410))[qe(494)](hr[qe(503)],qe(413))}),Je(pr,""[qe(494)](hr[qe(392)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":qe(407)[qe(494)](hr[qe(392)],qe(444)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":qe(371)[qe(494)](hr[qe(392)],qe(482))}),Je(pr,""[qe(494)](hr.clearcoat),{"material.clearcoat = clearcoat;":qe(404)[qe(494)](hr[qe(357)],";")}),Je(pr,""[qe(494)](hr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":qe(344)[qe(494)](hr[qe(323)],";")}),Je(pr,"".concat(hr[qe(358)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),pr),_r=(Je(dr={},""[qe(494)](hr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(450)[qe(494)](hr[qe(342)],qe(350))}),Je(dr,""[qe(494)](hr[qe(458)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(405)[qe(494)](hr[qe(342)],qe(359))}),Je(dr,""[qe(494)](hr[qe(372)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(321)[qe(494)](hr[qe(372)],";\n  ")}),Je(dr,""[qe(494)](hr[qe(474)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[qe(494)](hr[qe(474)],";\n  ")}),dr),yr={clearcoat:[hr[qe(357)],hr[qe(358)],hr[qe(323)]]},xr=qe(505),br=qe(510),Ir=qe(381),Sr=qe(468),wr=qe(381),Mr=qe(334),Er=[qe(367),qe(445),"vertexShader",qe(313),qe(511),qe(409),qe(463)],Rr=function(n,t,e){var r=qe;return n[r(355)](t)[r(356)](e)},Ar=function(n,t){var e,r,o=qe;return new RegExp("\\b"[o(494)]((e=t,r=qe,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(375))),"\\b"))[o(434)](n)};function Dr(n){return n?n[qe(327)](/\s/g,""):void 0}function Tr(n){return n[qe(327)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=qe;!function(n,t){var e=ir;if(typeof t!==e(427)&&null!==t)throw new TypeError(e(312));n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(347),{writable:!1}),t&&sr(n,t)}(c,k);var e,r,o,i,a=lr(c);function c(n){var t,e,r,o,i,s=ir,u=n[s(367)],l=n[s(445)],f=n.vertexShader,p=n[s(313)],d=n.patchMap,h=n[s(409)],v=n[s(463)],m=er(n,Er);if(function(n,t){if(!(n instanceof t))throw new TypeError(ir(420))}(this,c),!function(n){var t=qe;try{new n}catch(e){if(e[t(343)][t(318)](t(309))>=0)return!1}return!0}(u)?(e=u,Object[s(380)](e,m)):e=new u(m),e[s(340)]===s(378))throw new Error(s(362));(function(n,t){var e=qe;e(436),Object[e(380)](n,t);var r=Object[e(412)](t);Object.entries(Object[e(324)](r))[e(504)]((function(n){var t=e,r=typeof n[1].get===t(427),o="function"==typeof n[1][t(377)],i=typeof n[1][t(464)]===t(427),a="constructor"===n[0];return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(427)&&Object[r(382)](n,t[0],t[1])}))})(cr(t=a[s(332)](this)),e),t[s(364)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:I[s(348)][s(373)](),type:e[s(340)],isAlreadyExtended:(r=e[s(385)],o=qe,i=r.toString().trim(),!(0===i[o(316)](i[o(318)]("{")+1,i.lastIndexOf("}"))[o(391)]()[o(436)])),cacheHash:"",silent:v},t[s(313)]=tr(tr({},t[s(313)]||{}),p||{});var g=t[s(364)],_=g[s(445)],y=g.vertexShader,x=t.uniforms;return t.__csm.cacheHash=t[s(393)](),t[s(508)](_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=ir,t=arguments[n(436)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(313)]=t[n(313)]||this[n(313)],Object[n(380)](this[n(364)],t);var e=this[n(364)],r=e[n(445)],o=e[n(435)],i=this[n(313)],a=this._getCacheHash();this[n(364)].cacheHash=a,this[n(508)](r,o,i)}},{key:t(438),value:function(){var n=t,e={baseMaterial:this.__csm[n(367)],fragmentShader:this[n(364)].fragmentShader,vertexShader:this[n(364)].vertexShader,uniforms:this[n(313)],silent:this[n(364)][n(463)],patchMap:this[n(364)][n(511)],cacheKey:this[n(364)].cacheKey},r=new this.constructor(e);return Object[n(380)](this,r),r}},{key:t(393),value:function(){var n=t,e=this[n(364)],r=e[n(445)],o=e[n(435)],i=this[n(313)],a=[Dr(r),Dr(o),i][n(504)]((function(n){return void 0!==n}));return a.length>0?_n(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(508),value:function(n,e,r){var o=t,i=this;this[o(313)]=r||{},this[o(492)]=function(){var n=o;return i[n(364)][n(325)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(432)](Tr(n),t[r(445)],!0);t.fragmentShader=a+c}if(e){var s=i[r(432)](Tr(e),t[r(435)]);t[r(435)]="#define IS_VERTEX;\n"+s,t[r(435)]=a+t[r(435)]}t[r(313)]=tr(tr({},t[r(313)]),i[r(313)]),i[r(313)]=t[r(313)]}catch(u){console[r(368)](u)}};if(this[o(364)][o(395)]){var c=this.onBeforeCompile;this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this[o(385)]=a;this.needsUpdate=!0}},{key:t(432),value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this[o(411)]()),this[o(364)][o(511)]);Object[o(379)](yr).forEach((function(t){var e=o,r=or(t,2),a=r[0],c=r[1][e(466)]((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error(e(439).concat(a,e(467))[e(494)](c,e(311)))})),Object.entries(mr)[o(319)]((function(n){var t=or(n,2),e=t[0],r=t[1];a=Rr(a,e,r)})),Object[o(442)](c)[o(319)]((function(t){var e=o;Object[e(442)](c[t])[e(319)]((function(r){var o=e,s=vr[t],u=i[o(364)][o(340)];if("*"===t||Ar(n,t)){if(!(!s||Array.isArray(s)&&s.includes(u)||"*"===s))throw new Error(o(398)[o(494)](t," is not available in ")[o(494)](u,". Shader cannot compile."));a=Rr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(452)+this.__csm[o(330)].replace(/-/g,"_"),h=n[o(327)](/void\s+main\s*\(\s*\)/g,o(363)[o(494)](d,"()")),v=n[o(419)]("void main()"),m=a[o(419)]("// #_CSM_#");return v&&(m&&this.__csm[o(395)]?(a=a[o(327)](o(429),o(370)[o(494)](h,o(400))),s=a,u=o(507),l=o(370)[o(494)](d,"();\n            // #_CSM_#\n          "),p=s[(f=qe)(390)](u),a=-1===p?s:s[f(316)](0,p)+l+s[f(316)](p+u[f(436)])):a=a[o(327)](o(429),o(490)[o(494)](r?wr:Ir,o(315)).concat(xr,o(479))[o(494)](h,o(462)).concat(br,o(397))[o(494)](r?Mr:Sr,o(328))[o(494)](d,o(351)))),a}},{key:t(345),value:function(){var n=t,e=this[n(364)][n(340)];return e?n(512)[n(494)](e[n(336)](),";\n"):n(366)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this[n(364)][n(340)]===n(483)?_r:gr}}],i=ir,r&&ar(e[i(347)],r),o&&ar(e,o),Object[i(382)](e,i(347),{writable:!1}),c}();function Pr(n){function t(n){var e=ir;if(typeof n===e(478))return function(n){}.constructor(e(369))[e(440)](e(314));1!==(""+n/n)[e(436)]||n%20==0?function(){return!0}[e(389)]("debugger").call(e(484)):function(){return!1}[e(389)](e(431)+e(469))[e(440)](e(451)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cr=Fr;function Or(){const n=["clearcoatRoughness","__proto__","prototype","color","call","MeshPhysicalMaterial","console","metalness","while (true) {}","init","chain","roughness","error","return (function() ","function *\\( *\\)","688pwwcxc","\n\t\t\t","warn","12VJvxEF","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","8559131uHeYys","\n      ","info","59503796NpoEXO","bind","stateObject","gger","8JQSDnz","index","1779897pjpugd","3169QshGzl","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","primitive","apply","string","4698AUySpC","table","input","6312570NSMbCP","constructor","debu","test","trace","28330TnSIFN","29315QdhZYj","log","action","toString","setStyle","536whEkrF"];return(Or=function(){return n})()}function Fr(n,t){const e=Or();return Fr=function(n,t){return e[n-=430]},Fr(n,t)}!function(n,t){const e=Fr,r=Or();for(;;)try{if(757989===-parseInt(e(438))/1*(parseInt(e(473))/2)+-parseInt(e(437))/3+-parseInt(e(457))/4*(-parseInt(e(452))/5)+-parseInt(e(446))/6+parseInt(e(478))/7*(-parseInt(e(435))/8)+-parseInt(e(443))/9*(parseInt(e(451))/10)+-parseInt(e(431))/11*(-parseInt(e(476))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(441)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Br(this,(function(){const n=Fr,t=new RegExp(n(472)),e=new RegExp(n(439),"i"),r=Nr(n(467));t[n(449)](r+n(468))&&e[n(449)](r+n(445))?Nr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(441)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kr(void 0,(function(){const n=Fr,t=function(){const n=Fr;let t;try{t=Function(n(471)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(464)]=t[n(464)]||{},r=[n(453),n(475),n(430),n(470),"exception",n(444),n(450)];for(let o=0;o<r.length;o++){const t=kr.constructor[n(460)][n(432)](kr),i=r[o],a=e[i]||t;t[n(459)]=kr[n(432)](kr),t[n(455)]=a[n(455)][n(432)](a),e[i]=t}}))();const jr=["object"],Ur=$({__name:Cr(436),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:I[t(463)],metalness:e.metalness,roughness:e.roughness,clearcoat:e.clearcoat,clearcoatRoughness:e[t(458)],color:e[t(461)],vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(474)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(479)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(477)},o=new zr(r);return en((()=>{const n=t;o[n(461)][n(456)](e.color),o[n(465)]=e[n(465)],o[n(469)]=e[n(469)],o.clearcoat=e.clearcoat,o[n(458)]=e[n(458)]})),(n,e)=>{const r=t;return X(),K(r(440),{object:q(o)},null,8,jr)}}});function Nr(n){function t(n){const e=Fr;if(typeof n===e(442))return function(n){}.constructor(e(466))[e(441)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(447)](e(448)+e(434))[e(462)](e(454)):function(){return!1}[e(447)](e(448)+e(434))[e(441)](e(433)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Vr,r=qr();;)try{if(504562===parseInt(e(372))/1+-parseInt(e(363))/2*(-parseInt(e(358))/3)+-parseInt(e(366))/4+-parseInt(e(381))/5+parseInt(e(380))/6*(parseInt(e(370))/7)+-parseInt(e(365))/8+-parseInt(e(364))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr,Hr=(Lr=!0,function(n,t){var e=Lr?function(){if(t){var e=t[Vr(353)](n,arguments);return t=null,e}}:function(){};return Lr=!1,e});!function(){Hr(this,(function(){var n=Vr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(386),"i"),r=$r("init");t[n(355)](r+n(369))&&e.test(r+n(378))?$r():r("0")}))()}();var Zr,Gr=(Zr=!0,function(n,t){var e=Zr?function(){if(t){var e=t[Vr(353)](n,arguments);return t=null,e}}:function(){};return Zr=!1,e});function Vr(n,t){var e=qr();return Vr=function(n,t){return e[n-=353]},Vr(n,t)}function qr(){var n=["trace","stateObject","debu","input","string","5598QkOEIt","4824940pPRLlw","prototype","error","bind","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","info","test","console","while (true) {}","3MWIidZ","length",'{}.constructor("return this")( )',"action","gger","1476658ERNDrX","2601702hPGmwG","2228056dZXiQq","10504XdEFfP","warn","exception","chain","6503LFliWQ","__proto__","434675vqvyVE","constructor","call"];return(qr=function(){return n})()}function $r(n){function t(n){var e=Vr;if(typeof n===e(379))return function(n){}[e(373)](e(357)).apply("counter");1!==(""+n/n)[e(359)]||n%20==0?function(){return!0}[e(373)](e(377)+e(362))[e(374)](e(361)):function(){return!1}[e(373)](e(377)+"gger").apply(e(376)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Gr(void 0,(function(){for(var n=Vr,t=function(){var n,t=Vr;try{n=Function(t(385)+t(360)+");")()}catch(e){n=window}return n}(),e=t[n(356)]=t[n(356)]||{},r=["log",n(367),n(354),n(383),n(368),"table",n(375)],o=0;o<r[n(359)];o++){var i=Gr[n(373)][n(382)].bind(Gr),a=r[o],c=e[a]||i;i[n(371)]=Gr[n(384)](Gr),i.toString=c.toString[n(384)](c),e[a]=i}}))();export{Ge as C,Ur as _,Wn as a,it as b,yt as c,Mt as d,Ot as e,$t as f,ke as g,Me as h,ft as u};

import"./index.wgv4wbeG1743660816268.js";import{m as e,e as a}from"./@tresjs.zc7faK4J1743660816268.js";import{a5 as s,ab as t}from"./three.2wx8FU0g1743660816268.js";import{M as l,a as r}from"./@pmndrs.z8R6f5wQ1743660816268.js";import{u}from"./index.S3VunCT71743660816268.js";import{d as i,v as n,q as o,s as v,o as m,H as d,u as f}from"./@vue.B5PFBfKs1743660816268.js";const p=["buffer","side"],c=i({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(i,{expose:c}){const h=n(),{extend:b,scene:k,renderer:M,camera:x}=e(),g=n(),T=i;b({MeshTransmissionMaterial:l});const R=new r,{onBeforeLoop:j}=a(),y=u({width:T.fboResolution,height:T.fboResolution,isLoop:!1}),w=u({width:T.fboResolution,height:T.fboResolution,isLoop:!1});let _,I,L,B;return o((async()=>{await v(),g.value=function(e,a){let s;return e.traverse((e=>{e.isMesh&&e.material&&e.material.uuid===a&&(s=e)})),s}(k.value,h.value.uuid)})),j((({elapsed:e})=>{h.value.time=e,h.value.buffer===w.value.texture&&g.value&&(L=M.value.toneMapping,_=k.value.background,I=h.value.envMapIntensity,B=g.value.material.side,g.value.material=R,T.backside&&(M.value.setRenderTarget(y.value),M.value.render(k.value,x.value),g.value.material=h.value,g.value.material.thickness=T.backsideThickness,g.value.material.buffer=y.value.texture,g.value.material.side=s,g.value.material.envMapIntensity=0),M.value.setRenderTarget(w.value),M.value.render(k.value,x.value),g.value.material.buffer=w.value.texture,g.value.material=h.value,g.value.material.thickness=T.thickness,g.value.material.side=B,g.value.material.envMapIntensity=I,k.value.background=_,M.value.setRenderTarget(null),M.value.toneMapping=L)})),c({root:h,constructor:l}),(e,a)=>(m(),d("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:h,buffer:f(w).texture,side:f(t)},null,8,p))}});export{c as _};

import"./@fesjs.SPWJBM2r1726652192279.js";import{_ as t}from"./jszip.uBbFte4W1726652192279.js";import{F as n}from"./file-saver.j3OIx0fS1726652192279.js";import{cB as e,_ as s}from"./three.3esZ7Hzr1726652192279.js";const o=r;function r(t,n){const e=c();return(r=function(t,n){return e[t-=327]})(t,n)}!function(t,n){const e=r,s=c();for(;;)try{if(828657===-parseInt(e(329))/1*(parseInt(e(405))/2)+parseInt(e(342))/3+-parseInt(e(348))/4*(-parseInt(e(381))/5)+parseInt(e(375))/6*(parseInt(e(355))/7)+parseInt(e(353))/8*(parseInt(e(362))/9)+parseInt(e(340))/10*(parseInt(e(386))/11)+-parseInt(e(327))/12)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[r(379)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=r,n=new RegExp(t(328)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=b(t(360));n[t(332)](s+t(407))&&e[t(332)](s+t(414))?b():s("0")}))()}();const i=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[r(379)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function c(){const t=["data:image/gif;base64,","config.zip","geometries","data:","then","66904980PoKdmR","function *\\( *\\)","7bdJves","startsWith","url:","test","result","onloadend","pop","get","image/jpeg","type","readAsDataURL","14862590WBIfCG","FileLoader","3479811rrMwtz","images","gger","split","constructor","data","4BFFBbi","image/gif","generateAsync","stringify","push","608216wAxlcz","url:images/","35voGbwW","parse","slice","app.json","return (function() ","init","counter","63rhlkwK","image/png","stateObject","toString","message","data:image/png;base64,","data:image/GIF;base64,","data:image/webp;base64,","url:geometries/","call","data:image/WEBP;base64,","uuid","JPEG","1986312UqGSQR","image/webp","data:image/PNG;base64,","data:image/","apply","load","7871385mSrMeM","blob","enabled","debu","setResponseType","11SRyJBQ","onerror","files","console","string",";base64,","forEach","image/bmp","scene","BufferGeometry","trace","__proto__","Unknown","bind","toUpperCase","data:image/jpeg;base64,","warn","error","file","1100gzTUve","catch","chain","while (true) {}","async","length",".json","url","exception","input","非标准文件：不存在 app.json","name"];return(c=function(){return t})()}async function u(t){const n=o,e=new(s[n(341)]);return new Promise(((s,o)=>{e[n(380)](t,(t=>s(JSON.parse(t))),void 0,(t=>o(t)))}))}async function p(t){const n=o,e=new(s[n(341)]);return new Promise(((s,r)=>{const a=n;e[a(385)](a(382)),e[a(380)](t,(n=>{const e=a,i=new FileReader;i[e(334)]=()=>{const n=e,r=function(t){const n=o,e=t[n(345)](".")[n(335)]().toLowerCase();return{jpg:n(337),jpeg:"image/jpeg",png:n(363),gif:n(349),bmp:n(393),webp:n(376)}[e]||"application/octet-stream"}(t),a=i[n(333)].split(",")[1];s(n(420)+r+n(391)+a)},i[e(387)]=t=>{r(t)},i[e(339)](n)}),void 0,(t=>r(t)))}))}i(void 0,(function(){const t=r;let n;try{n=Function(t(359)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(389)]=n[t(389)]||{},s=["log",t(402),"info",t(403),t(413),"table",t(396)];for(let r=0;r<s[t(410)];r++){const n=i[t(346)].prototype[t(399)](i),o=s[r],a=e[o]||n;n[t(397)]=i[t(399)](i),n[t(365)]=a.toString[t(399)](a),e[o]=n}}))(),e[o(383)]=!0;const l=n=>{const e=o,r=new(s[e(341)]);return r.setResponseType(e(382)),new Promise(((s,o)=>{r[e(380)](n,(async n=>{s(await t.loadAsync(n))}),void 0,(t=>o(t)))}))},f=t=>{const n=o,e=t.substring(0,15),s=n(401),r=n(367),a=n(377),i=n(417),c=n(368),u=n(369),p=n(372);return s.startsWith(e)||"data:image/JPEG;base64,"[n(330)](e)?n(374):r.startsWith(e)||a[n(330)](e)?"PNG":i.startsWith(e)||c[n(330)](e)?"GIF":u[n(330)](e||p[n(330)](e))?"WEBP":n(398)},g=e=>{const s=o,r=[];e[s(394)][s(419)]&&e.scene[s(419)][s(392)]((t=>{const n=s;t.type===n(395)&&(r.push({uuid:t[n(373)],data:t[n(347)]}),t.data=n(370)+t[n(373)]+n(411))}));const a=[];e.scene[s(343)]&&e[s(394)].images[s(392)]((t=>{const n=s;t[n(412)]&&(a[n(352)]({uuid:t[n(373)],url:t[n(412)]}),t.url.type?t[n(412)]="url:images/"+t.uuid+"."+t[n(412)][n(338)]+".json":t[n(412)]=n(354)+t.uuid+"."+f(t[n(412)]))}));const i=new t;if(r[s(410)]){const t=i.folder(s(419));r[s(392)]((n=>{const e=s;t[e(404)](n[e(373)]+".json",JSON[e(351)](n[e(347)]))}))}if(a[s(410)]){const t=i.folder("images");a[s(392)]((n=>{const e=s;n[e(412)][e(338)]?t[e(404)](n.uuid+"."+n[e(412)][e(338)]+e(411),JSON[e(351)](n[e(412)])):t[e(404)](n.uuid+"."+f(n[e(412)]),n.url[e(345)](";base64,").pop(),{base64:!0})}))}const c=JSON[s(351)](e);return i[s(404)](s(358),c),i[s(350)]({type:s(382)}).then((t=>{const e=s;n.saveAs(t,e(418))}))},m=(t,n,e)=>{t[o(419)]<=0&&t.images<=0&&e(n)},d=(n,e)=>{let s=null;return t.loadAsync(n).then((t=>{const n=r;t.files["app.json"]?t.files["app.json"][n(409)](n(390))[n(421)]((r=>{var a,i;const c=n;s=JSON[c(356)](r);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t.scene[s(419)])||n[s(392)]((t=>{const n=s;t[n(347)].startsWith(n(331))&&r[n(419)]++})),null==(e=t[s(394)][s(343)])||e[s(392)]((t=>{const n=s;t[n(412)][n(330)](n(331))&&r.images++})),r})(s);m(u,s,e),null==(a=s[c(394)][c(419)])||a[c(392)]((n=>{const o=c;n[o(347)].startsWith(o(331))&&t[o(388)][n[o(347)][o(357)](4)][o(409)]("string").then((t=>{const r=o;n[r(347)]=JSON[r(356)](t),u[r(419)]--,m(u,s,e)}))})),null==(i=s[c(394)][c(343)])||i[c(392)]((n=>{const o=c;if(n[o(412)][o(330)](o(331))){const r=n[o(412)].slice(4);r.endsWith(o(411))?t[o(388)][r][o(409)](o(390))[o(421)]((t=>{const r=o;n[r(412)]=JSON[r(356)](t),u.images--,m(u,s,e)})):t.files[r][o(409)]("base64")[o(421)]((t=>{const a=o,i=r[a(345)]("."),c=i[i.length-1][a(400)]();n.url=a(378)+c+";base64,"+t,u[a(343)]--,m(u,s,e)}))}}))})):console[n(403)](n(415))}),(t=>{const e=r;console[e(403)](n[e(416)]+": "+t[e(366)])})),s};function b(t){function n(t){const e=r;if(typeof t===e(390))return function(t){}[e(346)](e(408)).apply(e(361));1!==(""+t/t)[e(410)]||t%20==0?function(){return!0}[e(346)](e(384)+e(344))[e(371)]("action"):function(){return!1}.constructor(e(384)+"gger")[e(379)](e(364)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,p as b,g as e,f as g,d as i,u as l};

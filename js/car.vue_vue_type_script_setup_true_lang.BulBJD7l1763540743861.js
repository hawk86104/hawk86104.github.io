import{_ as e}from"./@tresjs.BCHtwiaC1763540743861.js";import{d as a}from"./index.Crdf3MNx1763540743861.js";import{g as r,dD as t,cm as o,aF as n,l as s}from"./three.rXKzP9fQ1763540743861.js";import{f as l}from"./utils.DwOXEv6y1763540743861.js";import{u as i}from"./su7.CEklwGdF1763540743861.js";import{g as c}from"./gsap.CY1N3EIL1763540743861.js";import{d as p,a8 as d,w as m,H as f,o as y,a9 as u,u as _}from"./@vue.Co_gxueH1763540743861.js";const b=["object","rotation-y"],h=p({__name:"car",props:{run:{type:Boolean,default:!1}},async setup(p){let h,g;const C=i(),w=p,M=new r;M.setMeshoptDecoder(t);const{scene:j}=([h,g]=d(()=>M.loadAsync("https://opensource.cdn.icegl.cn/model/industry4/su7_car/sm_car.gltf")),h=await h,g(),h);const v=function(e){let a=new Map;return e.traverse(e=>{e.isMesh&&(Array.isArray(e.material)?e.material.forEach(e=>{e.name&&a.set(e.name,e)}):e.material.name&&a.set(e.material.name,e.material))}),Object.fromEntries(a)}(j),I=([h,g]=d(()=>a(["./plugins/industry4/texture/t_car_body_AO.raw.jpg","./plugins/industry4/texture/t_cat_car_body_bc.webp","./plugins/industry4/texture/t_gm_car_body_bc.webp"])),h=await h,g(),h);I[0].colorSpace=o,I[0].minFilter=n,I[0].magFilter=n,I[0].channel=1;for(let e=0;e<I.length;e++)I[e].flipY=!1;const E=l(j),x=E[2].material;x.envMapIntensity=4,x.color=new s("#26d6e9"),E.forEach(e=>{if(e.isMesh){e.material.aoMap=I[0]}});const A=E[35];A.children.forEach(e=>{e.material.envMapIntensity=4});const{onBeforeRender:D}=e();D(({delta:e})=>{w.run&&A.children.forEach(a=>{a.rotateZ(30*-e*.5)})}),m(()=>w.run,e=>{e?A.children.forEach(e=>{const a=e.material;a.roughness=0,a.envMapIntensity=3}):A.children.forEach(e=>{const a=e.material;a.roughness=1,a.envMapIntensity=4})});const F={color:new s,targetColor:new s};return m(()=>C.selColorData,e=>{c.killTweensOf(F),"c8.webp"===e?(v.Car_body.color.set("#ffffff"),v.Car_body.map=I[2],v.Car_body.envMapIntensity=2):"c9.webp"===e?(v.Car_body.color.set("#ffffff"),v.Car_body.map=I[1],v.Car_body.envMapIntensity=2):(v.Car_body.map=null,F.color=v.Car_body.color,F.targetColor=new s(e),c.to(F.color,{duration:.66,ease:"power1.out",r:F.targetColor.r,g:F.targetColor.g,b:F.targetColor.b,onUpdate:()=>{v.Car_body.color.set(F.color)},onComplete:()=>{v.Car_body.envMapIntensity=4,v.Car_body.needsUpdate=!0}})),v.Car_body.needsUpdate=!0}),(e,a)=>(y(),f("primitive",{object:u(_(j)),"rotation-y":Math.PI},null,8,b))}});export{h as _};

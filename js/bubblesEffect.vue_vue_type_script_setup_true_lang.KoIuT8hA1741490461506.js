import{_ as n,aX as t,cd as e,l as o,a0 as i,C as r,a,ab as s}from"./three.Vxh8Czkt1741490461506.js";import{m as l,e as u,a as c}from"./@tresjs.rE98Wm941741490461506.js";import{d as f,b as p,a3 as m,a2 as b,o as g,H as v,N as y,aj as d,ak as h,u as w}from"./@vue.NRI7TcgI1741490461506.js";const _=P;!function(n,t){const e=P,o=T();for(;;)try{if(789463===parseInt(e(218))/1*(parseInt(e(220))/2)+parseInt(e(249))/3+parseInt(e(239))/4*(parseInt(e(234))/5)+-parseInt(e(236))/6+parseInt(e(205))/7+parseInt(e(227))/8+-parseInt(e(217))/9)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[P(231)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){x(this,(function(){const n=P,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(222),"i"),o=C("init");t[n(223)](o+"chain")&&e[n(223)](o+"input")?C():o("0")}))()}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[P(231)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function P(n,t){const e=T();return(P=function(n,t){return e[n-=196]})(n,t)}function T(){const n=["geometry","uniforms","DoubleSide",'{}.constructor("return this")( )',"value","TresShaderMaterial","92448HJNEuP","TresMesh","uOpacity","uTime","model","TresMeshRef","while (true) {}","opacity","counter","constructor","8328670LWNvRl","push","map","verticesNeedUpdate","__proto__","gger","color","console","Mesh","Color","table","debu","13361823qqvavw","1mGHMAX","stateObject","1631818LLohKC","TresBufferGeometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","#84ccff","string","action","7642280SnAmfp","trace","call","info","apply","glowColor","mergeGeometries","581470MdYwzA","return (function() ","8492844cnGflc","log","length","24bwmLcU","warn","traverse","dispose"];return(T=function(){return n})()}z(void 0,(function(){const n=P,t=function(){const n=P;let t;try{t=Function(n(235)+n(246)+");")()}catch(e){t=window}return t}(),e=t[n(212)]=t[n(212)]||{},o=[n(237),n(240),n(230),"error","exception",n(215),n(228)];for(let i=0;i<o[n(238)];i++){const t=z[n(204)].prototype.bind(z),r=o[i],a=e[r]||t;t[n(209)]=z.bind(z),t.toString=a.toString.bind(a),e[r]=t}}))();const S=f({__name:"xRayEffect",props:{model:{},color:{default:_(224)},opacity:{default:1}},async setup(o){const i=_;let r,a;const s=o,f=p(),w=[];s[i(199)][i(241)]((t=>{const e=i;t instanceof n[e(213)]&&(t[e(243)][e(208)]=!0,w[e(206)](t[e(243)]))}));const x=([r,a]=m((()=>c({map:"./plugins/medical/image/brainXRayLight.png"}))),r=await r,a(),r),z={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new(n[i(214)])(s[i(211)])},lightningTexture:{type:"t",value:x[i(207)]},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:s[i(202)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:n[i(245)],blending:t,depthWrite:!1};z[i(244)].offsetY[i(247)]=Math.sin(5);const{camera:P}=l(),{onLoop:T}=u();return T((({delta:n})=>{const t=i;P[t(247)].position&&f.value&&(z[t(244)][t(198)][t(247)]+=n)})),b((()=>{const t=i;f[t(247)]&&(f[t(247)][t(243)][t(242)](),f.value[t(243)]=e[t(233)](w)),s[t(211)]&&(z[t(244)][t(232)][t(247)]=new(n[t(214)])(s[t(211)])),s[t(202)]&&(z[t(244)][t(197)].value=s[t(202)])})),(n,t)=>{const e=i;return g(),v(e(196),{ref_key:e(200),ref:f},[t[0]||(t[0]=y(e(221),null,null,-1)),y(e(248),d(h(z)),null,16)],512)}}});function C(n){function t(n){const e=P;if(typeof n===e(225))return function(n){}[e(204)](e(201))[e(231)](e(203));1!==(""+n/n)[e(238)]||n%20==0?function(){return!0}.constructor(e(216)+e(210))[e(229)](e(226)):function(){return!1}.constructor("debu"+e(210)).apply(e(219)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const M=U;!function(n,t){const e=U,o=j();for(;;)try{if(532032===-parseInt(e(309))/1*(parseInt(e(302))/2)+-parseInt(e(282))/3*(-parseInt(e(256))/4)+parseInt(e(315))/5*(-parseInt(e(308))/6)+parseInt(e(300))/7+parseInt(e(322))/8*(parseInt(e(266))/9)+-parseInt(e(285))/10+parseInt(e(313))/11)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[U(264)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){I(this,(function(){const n=U,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(294),"i"),o=O(n(304));t[n(312)](o+"chain")&&e[n(312)](o+n(305))?O():o("0")}))()}();const F=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[U(264)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function U(n,t){const e=j();return(U=function(n,t){return e[n-=256]})(n,t)}function j(){const n=["material","afective","computeBoundingSphere","exception","toString","TresMeshRef","geometry","opacity","119919SoeqVB","aDelayDuration","semantic","2416800zXwPal","BufferGeometryRef",'{}.constructor("return this")( )',"console","length","attributes","array","setAttribute","bubblesEffect","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","Mesh","trace","push","randFloat","3242008FvjFKu","bubbles","649178kLuHnJ","TresPoints","init","input","uOpacity","traverse","6PNJlFa","2ubwfHM","bind","value","test","4243866YiUleR","cerebellum","2140285Pksswl","return (function() ","color","position","Float32BufferAttribute","model","uSlowTime","970040tjPxqD","bridge","while (true) {}","brainstem","gger","name","MathUtils","76Mnasbx","#FFF","__proto__","Color","uTime","uniforms","map","constructor","apply","mergeGeometries","18KwUqTQ","amigdala","call","debu","glowColor","includes","warn","prototype"];return(j=function(){return n})()}F(void 0,(function(){const n=U;let t;try{t=Function(n(316)+n(287)+");")()}catch(i){t=window}const e=t.console=t[n(288)]||{},o=["log",n(272),"info","error",n(277),"table",n(297)];for(let r=0;r<o.length;r++){const t=F[n(263)][n(273)][n(310)](F),i=o[r],a=e[i]||t;t[n(258)]=F[n(310)](F),t[n(278)]=a[n(278)][n(310)](a),e[i]=t}}))();const B=f({__name:M(293),props:{model:{},color:{default:M(257)},opacity:{default:1}},setup(l){const c=M,f=l,m=[c(275),c(284),"episodic","process",c(267),c(325),c(323),c(314),"analitic"],_={};f[c(320)][c(307)]((t=>{const o=c;t instanceof n[o(296)]&&m[o(262)]((n=>{const i=o;if(t[i(327)][i(271)](n)){if(_[n]){const o=[_[n],t.geometry];return _[n]=e[i(265)](o),_}return _[n]=t[i(280)]}return[]}))}));const x=p(),z=new o({uniforms:{glowColor:{type:"c",value:new(n[c(259)])(f[c(317)])},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:f[c(281)]}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:t,side:i,depthTest:!1,vertexColors:!1,transparent:!0});b((()=>{x.value&&(()=>{const t=c,e=[],o=[],i=[],r=[];for(let s=0;s<2e4-3*m[t(289)];s+=1){const l=n[t(328)].randInt(0,m[t(289)]-1),u=m[l],c=_[u][t(290)][t(318)][t(291)][3*s+0]||0,f=_[u][t(290)][t(318)][t(291)][3*s+1]||0,p=_[u][t(290)][t(318)][t(291)][3*s+2]||0;if(o[t(298)](c,f,p),e[s]=n[t(328)][t(299)](10,20),s%100==0){const e=n[t(328)].randInt(100,250)+f;r[t(298)](c,e,p,1)}else r[t(298)](c,f,p,0);i[2*s+0]=a[t(299)](.5,1.5),i[2*s+1]=2.5}x[t(311)][t(292)](t(283),new(n[t(319)])(i,2)),x[t(311)][t(292)](t(301),new(n[t(319)])(r,4)),x[t(311)][t(292)](t(318),new s(o,3)),x[t(311)][t(292)](t(317),new(n[t(319)])([],3)),x.value[t(292)]("size",new s(e,1)),x.value[t(276)]()})()}));const P=p(),{onLoop:T}=u();return T((({delta:n})=>{const t=c;P.value&&(P[t(311)].material[t(261)][t(260)].value+=.05,P[t(311)][t(274)][t(261)][t(321)][t(311)]+=1/400),f[t(317)]&&(z[t(261)][t(270)][t(311)]=new r(f[t(317)])),f[t(281)]&&(z.uniforms[t(306)][t(311)]=f.opacity)})),(n,t)=>{const e=c;return g(),v(e(303),{ref_key:e(279),ref:P},[y("TresBufferGeometry",{ref_key:e(286),ref:x},null,512),y("TresShaderMaterial",d(h(w(z))),null,16)],512)}}});function O(n){function t(n){const e=U;if("string"==typeof n)return function(n){}[e(263)](e(324))[e(264)](e(295));1!==(""+n/n).length||n%20==0?function(){return!0}[e(263)](e(269)+e(326))[e(268)]("action"):function(){return!1}[e(263)]("debu"+e(326))[e(264)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{S as _,B as a};

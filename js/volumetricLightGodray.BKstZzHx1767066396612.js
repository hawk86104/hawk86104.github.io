import{i as e}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{B as a,F as t,_ as r,a as s,K as n}from"./@tresjs.B1f7s3pS1767066396612.js";import{f as l}from"./customShaderMaterial.vue_vue_type_script_setup_true_lang.DS9PWjZT1767066396612.js";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang.iYOGhvYh1767066396612.js";import{E as u,R as i,b as c,a as p}from"./postprocessing.c_btQLwf1767066396612.js";const{withAsyncContext:m,defineComponent:d}=await e("vue"),{createElementVNode:f,unref:h,withCtx:v,createVNode:w,Fragment:_,openBlock:g,createElementBlock:y}=await e("vue"),M=["map"],T=["envMap"],{ref:S,watch:C}=await e("vue"),x=await e("three"),B=d({__name:"screen",async setup(e){let t,r;const s=S();s.value=([t,r]=m(()=>a("./plugins/visualArts/video/vlg.mp4",{loop:!0})),t=await t,r(),t),s.value.colorSpace=x.SRGBColorSpace;const n=S(),o=S();C(n,e=>{o.value=e.texture});const u=S();return(e,a)=>(g(),y(_,null,[f("TresMesh",{ref_key:"tmSceen",ref:u,position:[0,0,-16]},[a[0]||(a[0]=f("TresPlaneGeometry",{args:[16,10]},null,-1)),f("TresMeshBasicMaterial",{map:s.value},null,8,M),a[1]||(a[1]=f("TresMesh",{scale:[16.05,10.05,1],position:[0,0,-.01]},[f("TresPlaneGeometry"),f("TresMeshBasicMaterial",{color:"black"})],-1))],512),w(h(l),{ref_key:"cubeCameraRef",ref:n,position:[-3,-1,-5],resolution:256},{default:v(()=>[f("TresMesh",null,[a[2]||(a[2]=f("TresSphereGeometry",{args:[2,32,32]},null,-1)),f("TresMeshStandardMaterial",{metalness:1,roughness:.1,envMap:o.value},null,8,T)])]),_:1},512)],64))}}),{defineComponent:k}=await e("vue"),{watchEffect:P,toRaw:R}=await e("vue"),b=await e("three"),G=k({__name:"effectComposer",props:{screen:{}},setup(e){const a=e,{camera:s,renderer:n,scene:l,sizes:o}=t();let m=null,d=null;const f=[];P(()=>{if(o.width.value){const e=s.value;((e,a,t)=>{m=new u(t,{frameBufferType:b.HalfFloatType,multisampling:8});const r=new i(e,a);m.addPass(r)})(l.value,e,n,o.width.value,o.height.value),(e=>{const t=new b.MeshBasicMaterial({color:16768426,transparent:!0,fog:!1}),r=new b.SphereGeometry(.75,32,32),s=new b.Mesh(r,t);s.frustumCulled=!1,s.matrixAutoUpdate=!1;const n=new c(e,R(a.screen),{blur:!0,decay:.9,exposure:.34});f.push(n)})(e),d=new p(e,...f),m.addPass(d)}});const{onRender:h}=r();return h(()=>{m&&m.render()}),(e,a)=>null}}),{defineComponent:j}=await e("vue"),{createElementVNode:E,unref:N,normalizeProps:V,guardReactiveProps:A,createVNode:z,Suspense:D,withCtx:F,openBlock:L,createBlock:$,createCommentVNode:q}=await e("vue"),H=["rotation"],{reactive:I,ref:K,watch:Q,nextTick:U}=await e("vue"),J=j({__name:"volumetricLightGodray",setup(e){const a={clearColor:"#050505",antialias:!1,renderMode:"manual",windowSize:!0},t=I({enableDamping:!0}),r=K(null),l=K(null);return Q(()=>r,e=>{U(()=>{e&&void 0!==e.value.$refs.tmSceen&&(l.value=e.value.$refs.tmSceen)})},{deep:!0}),(e,u)=>(L(),$(N(s),V(A(a)),{default:F(()=>[u[1]||(u[1]=E("TresPerspectiveCamera",{position:[0,0,30],fov:45,near:.1,far:1e3},null,-1)),z(N(n),V(A(t)),null,16),u[2]||(u[2]=E("TresAmbientLight",{intensity:.5},null,-1)),(L(),$(D,null,{default:F(()=>[z(B,{ref_key:"screenRef",ref:r},null,512)]),_:1})),E("TresMesh",{position:[0,-5.02,0],receiveShadow:"",rotation:[-Math.PI/2,0,0]},[u[0]||(u[0]=E("TresPlaneGeometry",{args:[50,50]},null,-1)),z(N(o),{blur:[300,50],resolution:1024,mixBlur:1,mixStrength:100,roughness:1,depthScale:1.2,minDepthThreshold:.4,maxDepthThreshold:1.4,color:"#202020",metalness:.8})],8,H),l.value?(L(),$(G,{key:0,screen:l.value},null,8,["screen"])):q("",!0)]),_:1},16))}});export{J as default};

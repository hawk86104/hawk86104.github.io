var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as I,m as b,n as w,ce as S,cf as M,K as R,h as E,b as A,e as T,_ as P,bO as D,l as z,a_ as C,V as O,bp as F,z as B,aj as k,B as U,c as j,aK as N,g as L,M as H,ar as Z,a9 as G,aP as W}from"./three.LxxvsMJG1742205305014.js";import{m as V,j as $,e as Y}from"./@tresjs.nk0nhZ9a1742205305014.js";import{R as K}from"./three-stdlib.VHPWJjlE1742205305014.js";import{y as X,b as q,w as Q,a as J,u as nn,d as tn,W as en,a3 as rn,a0 as on,o as an,H as cn,J as sn,M as un,a7 as ln,a2 as fn,q as pn,f as dn,N as hn,a8 as vn,r as mn,B as gn,v as _n,s as yn,F as xn,a6 as In,m as bn}from"./@vue.NRI7TcgI1742205305014.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.kWqDV5VA1742205305014.js";import{h as Rn}from"./object-hash.dbNkxbaC1742205305014.js";var En=An;function An(n,t){var e=Pn();return(An=function(n,t){return e[n-=189]})(n,t)}!function(n,t){for(var e=An,r=Pn();;)try{if(631869===-parseInt(e(207))/1*(-parseInt(e(196))/2)+-parseInt(e(210))/3*(-parseInt(e(222))/4)+parseInt(e(201))/5+-parseInt(e(211))/6+-parseInt(e(224))/7*(-parseInt(e(200))/8)+-parseInt(e(190))/9+-parseInt(e(221))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(213)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pn(){var n=["traverse","console","call","1WebgAw","table","bind","3vHLbPy","1997742qqXTVP","debu","apply","prototype","exception","length","warn","test","stateObject","string","6832780GjqBQg","2075364XIFiWP","toString","14546NyTyUz","map","return (function() ","virtualScene","add","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","3938094IUJzEd","constructor","action",'{}.constructor("return this")( )',"while (true) {}","chain","2413324xPCUMC","dispose","input","material","1080zDfUme","398185jfGVdv","remove","gger"];return(Pn=function(){return n})()}!function(){Tn(this,(function(){var n=An,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(230),"i"),r=On("init");t.test(r+n(195))&&e[n(218)](r+n(198))?On():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(213)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dn(void 0,(function(){var n,t=An;try{n=Function(t(226)+t(193)+");")()}catch(s){n=window}for(var e=n[t(205)]=n[t(205)]||{},r=["log",t(217),"info",t(229),t(215),t(208),"trace"],o=0;o<r[t(216)];o++){var i=Dn[t(191)][t(214)].bind(Dn),a=r[o],c=e[a]||i;i.__proto__=Dn[t(209)](Dn),i[t(223)]=c.toString[t(209)](c),e[a]=i}}))();class zn extends s{constructor(){var n=An;super(),this[n(227)]=null,this[n(227)]=new u}[En(228)](...n){var t=En;return this[t(227)][t(228)](...n),this}destructor(){var n=En;this.virtualScene[n(204)]((t=>{var e=n;t instanceof l&&(t.geometry[e(197)](),t[e(199)].dispose(),t[e(199)][e(225)]&&t[e(199)][e(225)].dispose(),this.virtualScene[e(202)](t))})),this[n(227)]=null}}const Cn=zn;function On(n){function t(n){var e=An;if(typeof n===e(220))return function(n){}[e(191)](e(194))[e(213)](e(189));1!==(""+n/n)[e(216)]||n%20==0?function(){return!0}[e(191)](e(212)+e(203))[e(206)](e(192)):function(){return!1}.constructor(e(212)+"gger")[e(213)](e(219)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=Nn;!function(n,t){const e=Nn,r=kn();for(;;)try{if(992983===parseInt(e(157))/1+-parseInt(e(161))/2*(parseInt(e(172))/3)+parseInt(e(194))/4*(parseInt(e(171))/5)+-parseInt(e(162))/6*(-parseInt(e(179))/7)+parseInt(e(150))/8*(parseInt(e(166))/9)+-parseInt(e(163))/10+-parseInt(e(188))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(175)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kn(){const n=["prototype","action","outdoor/snowy_forest_path_01_1k.hdr","18946543GhkNus","exception","table","test","kiara/kiara_1_dawn_1k.hdr","toString","5852220cynxvE","call","bind","studio/poly_haven_studio_1k.hdr","2426816OMEfgs","length","indoor/abandoned_games_room_02_1k.hdr","return (function() ","constructor","error","outood/mossy_forest_1k.hdr","1319569IwMtEV","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","3064AFNDVK","9869898HBpilO","16861830FIcFzU","trace","__proto__","9aKNRyt","string","info",'{}.constructor("return this")( )',"gger","5hgMcIO","645csfjtF","outdoor/satara_night_1k.hdr","city/modern_buildings_2_1k.hdr","apply","stateObject","init","indoor/small_hangar_01_1k.hdr","7AzTgEE","log","venice/venice_sunset_1k.hdr","warn","city/canary_wharf_1k.hdr","counter"];return(kn=function(){return n})()}!function(){Bn(this,(function(){const n=Nn,t=new RegExp(n(158)),e=new RegExp(n(159),"i"),r=Ln(n(177));t[n(191)](r+"chain")&&e[n(191)](r+"input")?Ln():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Un(void 0,(function(){const n=Nn;let t;try{t=Function(n(153)+n(169)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(180),n(182),n(168),n(155),n(189),n(190),n(164)];for(let i=0;i<r[n(151)];i++){const t=Un[n(154)][n(185)][n(196)](Un),o=r[i],a=e[o]||t;t[n(165)]=Un[n(196)](Un),t[n(193)]=a[n(193)][n(196)](a),e[o]=t}}))();const jn={sunset:Fn(181),studio:Fn(197),city:Fn(183),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:Fn(173),forest:Fn(156),snow:Fn(187),dawn:Fn(192),hangar:Fn(178),urban:Fn(152),modern:Fn(174),shangai:"city/shanghai_bund_1k.hdr"};function Nn(n,t){const e=kn();return(Nn=function(n,t){return e[n-=150]})(n,t)}function Ln(n){function t(n){const e=Nn;if(typeof n===e(167))return function(n){}[e(154)]("while (true) {}")[e(175)](e(184));1!==(""+n/n)[e(151)]||n%20==0?function(){return!0}[e(154)](e(160)+e(170))[e(195)](e(186)):function(){return!1}[e(154)](e(160)+e(170))[e(175)](e(176)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=Wn;!function(n,t){const e=Wn,r=Vn();for(;;)try{if(487924===-parseInt(e(426))/1*(parseInt(e(428))/2)+parseInt(e(453))/3+parseInt(e(439))/4+parseInt(e(462))/5+-parseInt(e(445))/6+parseInt(e(449))/7+-parseInt(e(436))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(432)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Wn,t=new RegExp(n(455)),e=new RegExp(n(424),"i"),r=Yn(n(467));t[n(446)](r+n(448))&&e[n(446)](r+n(437))?Yn():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(432)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(n,t){const e=Vn();return(Wn=function(n,t){return e[n-=422]})(n,t)}function Vn(){const n=['{}.constructor("return this")( )',"chain","4315220wfCtPg","Failed to load environment map: ","constructor","error","129138yoFPaZ","bind","function *\\( *\\)","background","prototype","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","counter","length","join","4512635ovlbMO","isArray","isColor","call","keys","init","setPath","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","8828quWctx","Preset must be one of: ","162COHsJb","log","console","table","apply","trace","info","mapping","8781752TKjGZN","input","environment","3291864YGLyWH","gger","debu","texture","value","stateObject","505728OAOQDe","test"];return(Vn=function(){return n})()}Gn(void 0,(function(){const n=Wn;let t;try{t=Function("return (function() "+n(447)+");")()}catch(o){t=window}const e=t[n(430)]=t[n(430)]||{},r=[n(429),n(425),n(434),n(452),"exception",n(431),n(433)];for(let i=0;i<r[n(460)];i++){const t=Gn.constructor[n(457)].bind(Gn),o=r[i],a=e[o]||t;t.__proto__=Gn[n(454)](Gn),t.toString=a.toString[n(454)](a),e[o]=t}}))();const $n=Hn(458);function Yn(n){function t(n){const e=Wn;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(432)](e(459));1!==(""+n/n)[e(460)]||n%20==0?function(){return!0}[e(451)]("debu"+e(440))[e(465)](e(423)):function(){return!1}[e(451)](e(441)+e(440))[e(432)](e(444)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kn=Qn;!function(n,t){const e=Qn,r=Jn();for(;;)try{if(772233===parseInt(e(183))/1*(parseInt(e(199))/2)+parseInt(e(197))/3*(parseInt(e(189))/4)+parseInt(e(204))/5*(-parseInt(e(172))/6)+parseInt(e(193))/7+-parseInt(e(176))/8+-parseInt(e(170))/9+parseInt(e(163))/10*(parseInt(e(207))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(192)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xn(this,(function(){const n=Qn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(198),"i"),r=tt(n(173));t.test(r+n(201))&&e[n(165)](r+n(195))?tt():r("0")}))()}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(192)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(n,t){const e=Jn();return(Qn=function(n,t){return e[n-=161]})(n,t)}function Jn(){const n=["length","12iKMVKG","init","destructor","symbol","8802248pkBfHY","debu","update","toString","virtualScene","value","type","2yUmgto","constructor",'{}.constructor("return this")( )',"dispose","generateMipmaps","background","68OcfEmu","texture","string","apply","483301NsIWsO","action","input","console","270159QbCVbl","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","435722gPoiwf","$slots","chain","envSence","bind","2173775nzpCok","useDefaultScene","frames","11JBMdIp","default","return (function() ","exception","resolution","component","14325130sdisQE","environment","test","gger","log","while (true) {}","isArray","6535395AUIKPE"];return(Jn=function(){return n})()}qn(void 0,(function(){const n=Qn;let t;try{t=Function(n(209)+n(185)+");")()}catch(o){t=window}const e=t[n(196)]=t.console||{},r=[n(167),"warn","info","error",n(210),"table","trace"];for(let i=0;i<r[n(171)];i++){const t=qn.constructor.prototype[n(203)](qn),o=r[i],a=e[o]||t;t.__proto__=qn[n(203)](qn),t[n(179)]=a.toString[n(203)](a),e[o]=t}}))();const nt=tn({__name:Kn(162),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Kn;let r,o;const i=n,a=q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=q(null),x=null;const I=q(null);en((()=>{var n,t;const e=Qn;null==(n=I[e(181)])||n[e(174)](),null==(t=y.value)||t[e(186)]()}));const{onBeforeLoop:b}=Y();let w=1;b((()=>{const n=Qn;x&&I[n(181)]&&y[n(181)]&&(i[n(206)]===1/0||w<i[n(206)])&&(i[n(205)]?x[n(178)](s.value,u[n(181)]):x[n(178)](s[n(181)],ln(I[n(181)][n(180)])),w++)}));const S=([r,o]=rn((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=q([]),path:s=q(""),background:u}=X(n);Q(n,(()=>{o()}));const l=q(null),h=J((()=>Array[e(463)](c[e(443)]))),v=J((()=>h[e(443)]?f:K));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i[r(443)])){try{l.value=await $(v[r(443)],h.value?[...nn(n)]:nn(n),(n=>{t&&n[r(422)](nn(t))}))}catch(o){throw new Error(r(450)+o)}l.value&&(l[r(443)][r(435)]=h[r(443)]?p:d)}}),{immediate:!0}),Q(l,(n=>{const t=e;r[t(443)]&&n&&(r[t(443)][t(438)]=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(443)])?t[i(443)][i(442)]:o,a=r[i(443)][i(456)];!(null==a?void 0:a[i(464)])&&(a=void 0),r[i(443)][i(456)]=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a.value),(n=>{const t=e;r[t(443)]&&n&&(r[t(443)].backgroundBlurriness=n)}),{immediate:!0}),Q((()=>null==i?void 0:i[e(443)]),(async n=>{const t=e;if(n&&n in jn){const e=$n,i=jn[n];try{l[t(443)]=await $(K,i,(n=>{e&&n[t(422)](e)}))}catch(r){throw new Error(t(450)+r)}l[t(443)]&&l[t(443)]&&(l.value[t(435)]=d),o()}else if(n&&!(n in jn))throw new Error(t(427)+Object[t(466)](jn)[t(461)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Qn;n?(u.value[t(164)]=n[t(190)],i.background&&(u.value[t(188)]=n[t(190)])):(u.value[t(164)]=S.value,i[t(188)]&&(u.value[t(188)]=S[t(181)]))};Q(S,(n=>{y[Qn(181)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Cn});const R=()=>{var n;const t=Qn;null==(n=y[t(181)])||n[t(186)](),y[t(181)]=new v(i[t(161)]),x=new m(i.near,i.far,y[t(181)]),i[t(205)]?(y[t(181)][t(190)][t(182)]=g,y[t(181)][t(190)][t(187)]=!1,y[t(181)][t(190)].minFilter=_,y[t(181)][t(190)].magFilter=_):y[t(181)][t(190)].type=h,M(y[t(181)])};return Q((()=>on()[e(208)]),(n=>{var t,r;const o=e;n&&(!y[o(181)]||y[o(181)][o(190)][o(182)]!==h)&&(l=n(),Array[o(169)](l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t[o(182)])!==o(175))?R():(null==(r=y[o(181)])||r.dispose(),y[o(181)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(181)]=S,Q((()=>i[e(205)]),(n=>{y.value&&R()})),(n,t)=>{const r=e;return nn(y)?(an(),cn("TresEnvSence",{key:0,ref_key:r(202),ref:I},[sn(n[r(200)],"default")],512)):un("",!0)}}});function tt(n){function t(n){const e=Qn;if(typeof n===e(191))return function(n){}[e(184)](e(168)).apply("counter");1!==(""+n/n)[e(171)]||n%20==0?function(){return!0}[e(184)](e(177)+"gger").call(e(194)):function(){return!1}.constructor(e(177)+e(166)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=it;!function(n,t){const e=it,r=ot();for(;;)try{if(499991===parseInt(e(280))/1*(parseInt(e(314))/2)+parseInt(e(298))/3*(parseInt(e(299))/4)+parseInt(e(288))/5*(-parseInt(e(278))/6)+parseInt(e(283))/7+parseInt(e(275))/8*(parseInt(e(300))/9)+parseInt(e(274))/10*(-parseInt(e(282))/11)+parseInt(e(289))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","index","toString","side","15KmIRCH","162556dgliYQ","1719vBByPZ","TresRingGeometry","length","init","counter","trace",'{}.constructor("return this")( )',"return (function() ","prototype","material","action","color","console","set","217036REwTjr","error","multiplyScalar","constructor","test","__proto__","value","debu","log","exception","warn","chain","rect","1540ydgNHw","8344NZSwWl","circle","function *\\( *\\)","42nJooTY","call","1OzPeoT","from","42361yUnxPd","6450829xbEMMG","string","bind","apply","map","530020EavJEW","4831200OACUMC","intensity","gger","toneMapped","TresPlaneGeometry"];return(ot=function(){return n})()}function it(n,t){const e=ot();return(it=function(n,t){return e[n-=265]})(n,t)}!function(){rt(this,(function(){const n=it,t=new RegExp(n(277)),e=new RegExp(n(294),"i"),r=pt(n(303));t[n(265)](r+n(272))&&e.test(r+"input")?pt():r("0")}))()}();const at=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(286)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();at(void 0,(function(){const n=it,t=function(){const n=it;let t;try{t=Function(n(307)+n(306)+");")()}catch(e){t=window}return t}(),e=t[n(312)]=t.console||{},r=[n(269),n(271),"info",n(315),n(270),"table",n(305)];for(let o=0;o<r.length;o++){const t=at[n(317)][n(308)].bind(at),i=r[o],a=e[i]||t;t[n(266)]=at[n(285)](at),t[n(296)]=a[n(296)][n(285)](a),e[i]=t}}))();const ct={key:0,args:[0,1,64]},st={key:1,args:[.5,1,64]},ut={key:2},lt=[et(292),et(287),et(297),et(311)],ft=tn({__name:et(295),props:{args:{default:null},from:{default:et(273)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=et,e=n,r=q();return fn((()=>{const n=it;r.value&&(r.value[n(311)][n(316)](e.intensity),r[n(267)].needsUpdate=!0)})),Q((()=>e[t(311)]),(n=>{const o=t;r[o(267)]&&(r[o(267)][o(311)][o(313)](n),r[o(267)].color.multiplyScalar(e[o(290)]),r.value.needsUpdate=!0)})),pn((()=>{})),(n,o)=>{const i=t;return an(),cn("TresMesh",null,[e.from===i(276)?(an(),cn(i(301),ct)):"ring"===e[i(281)]?(an(),cn(i(301),st)):e[i(281)]===i(273)?(an(),cn(i(293),ut)):(an(),dn(e[i(281)],{key:3,args:e})),hn("TresMeshBasicMaterial",{ref_key:i(309),ref:r,toneMapped:n[i(292)],map:n.map,side:nn(x),color:n[i(311)]},null,8,lt)])}}});function pt(n){function t(n){const e=it;if(typeof n===e(284))return function(n){}.constructor("while (true) {}")[e(286)](e(304));1!==(""+n/n)[e(302)]||n%20==0?function(){return!0}[e(317)](e(268)+"gger")[e(279)](e(310)):function(){return!1}[e(317)](e(268)+e(291))[e(286)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function dt(){const n=["stateObject","render","log","5496184bcjwVl","3687096wPPFcY","170YFazpj","apply","clear","chain",'{}.constructor("return this")( )',"1404612jKXXRd","function *\\( *\\)","7fxTWlj","info","dispose","__proto__","value","counter","width","warn","setRenderTarget","constructor","type","depthTexture","call","605143LoDXdY","console","872OSwEZg","gger","exception","height","prototype","test","bind","string","19011ZRsdFD","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","length","table","toString","1450294MOoIwr","10SxwyKw","8648244CBixyz","trace","action"];return(dt=function(){return n})()}!function(n,t){const e=gt,r=dt();for(;;)try{if(768211===parseInt(e(275))/1+parseInt(e(260))/2+parseInt(e(254))/3*(-parseInt(e(292))/4)+parseInt(e(261))/5*(parseInt(e(269))/6)+-parseInt(e(277))/7*(-parseInt(e(268))/8)+-parseInt(e(262))/9+parseInt(e(270))/10*(-parseInt(e(290))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[gt(271)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=gt,t=new RegExp(n(276)),e=new RegExp(n(255),"i"),r=_t("init");t.test(r+n(273))&&e[n(251)](r+"input")?_t():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[gt(271)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(n){const t=q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?X(n):X(mn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=gt;null==(n=t.value)||n[a(279)](),t[a(281)]=new I((null==r?void 0:r.value)||p[a(283)][a(281)],(null==e?void 0:e[a(281)])||p[a(295)][a(281)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(281)])),(null==i?void 0:i[a(281)])&&(t[a(281)].depthTexture=new w((null==r?void 0:r[a(281)])||p[a(283)][a(281)],(null==e?void 0:e.value)||p[a(295)][a(281)]),t[a(281)][a(288)].format=S,t[a(281)][a(288)][a(287)]=M)})),s((()=>{const n=gt;(null==a?void 0:a[n(281)])&&(l[n(281)][n(285)](ln(t.value)),l[n(281)][n(272)](),l[n(281)][n(266)](ln(f.value),ln(u[n(281)])),l.value[n(285)](null))})),gn((()=>{var n;const e=gt;null==(n=t[e(281)])||n[e(279)]()})),t}function gt(n,t){const e=dt();return(gt=function(n,t){return e[n-=250]})(n,t)}function _t(n){function t(n){const e=gt;if(typeof n===e(253))return function(n){}[e(286)](e(256))[e(271)](e(282));1!==(""+n/n)[e(257)]||n%20==0?function(){return!0}[e(286)]("debugger")[e(289)](e(264)):function(){return!1}[e(286)]("debu"+e(293))[e(271)](e(265)),t(++n)}try{if(n)return t;t(0)}catch(e){}}vt(void 0,(function(){const n=gt;let t;try{t=Function("return (function() "+n(274)+");")()}catch(o){t=window}const e=t[n(291)]=t[n(291)]||{},r=[n(267),n(284),n(278),"error",n(294),n(258),n(263)];for(let i=0;i<r[n(257)];i++){const t=vt[n(286)][n(250)][n(252)](vt),o=r[i],a=e[o]||t;t[n(280)]=vt[n(252)](vt),t[n(259)]=a[n(259)].bind(a),e[o]=t}}))();const yt=bt;!function(n,t){const e=bt,r=St();for(;;)try{if(750324===-parseInt(e(369))/1+-parseInt(e(362))/2*(-parseInt(e(375))/3)+-parseInt(e(364))/4+parseInt(e(350))/5+parseInt(e(386))/6+-parseInt(e(392))/7*(-parseInt(e(402))/8)+-parseInt(e(370))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(390)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=bt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(363),"i"),r=Rt("init");t[n(379)](r+n(371))&&e[n(379)](r+n(368))?Rt():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(390)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function bt(n,t){const e=St();return(bt=function(n,t){return e[n-=349]})(n,t)}It(void 0,(function(){const n=bt,t=function(){const n=bt;let t;try{t=Function(n(367)+n(353)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(349),n(387),n(388),n(393),n(399),n(376),"trace"];for(let o=0;o<r[n(359)];o++){const t=It[n(373)].prototype[n(374)](It),i=r[o],a=e[i]||t;t[n(398)]=It[n(374)](It),t[n(400)]=a[n(400)].bind(a),e[i]=t}}))();const wt=[yt(377),yt(395)];function St(){const n=["input","20389sZcCJw","26556705NXRQfD","chain","uuid","constructor","bind","163851ocvKno","table","buffer","toneMapping","test","counter","TresMeshTransmissionMaterial","traverse","fboResolution","material","background","8994282xeDhRP","warn","info","gger","apply","debu","420NYNimY","error","action","side","envMapIntensity","backsideThickness","__proto__","exception","toString","backside","85392VykMRO","log","6808825CBabPM","thickness","call",'{}.constructor("return this")( )',"texture","while (true) {}","value","render","setRenderTarget","length","stateObject","index","26ucmQJa","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1959260SuVvNI","MeshTransmissionMaterialClass","time","return (function() "];return(St=function(){return n})()}const Mt=tn({__name:yt(361),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=Y(),p=mt({width:u[e(383)],height:u[e(383)],isLoop:!1}),d=mt({width:u[e(383)],height:u[e(383)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(356)]=function(n,t){const e=bt;let r;return n[e(382)]((n=>{const o=e;n.isMesh&&n[o(384)]&&n[o(384)][o(372)]===t&&(r=n)})),r}(i[n(356)],r[n(356)][n(372)])})),f((({elapsed:n})=>{const t=e;r[t(356)][t(366)]=n,r[t(356)][t(377)]===d[t(356)].texture&&s[t(356)]&&(m=a[t(356)][t(378)],h=i[t(356)][t(385)],v=r[t(356)][t(396)],g=s[t(356)][t(384)].side,s[t(356)][t(384)]=l,u[t(401)]&&(a.value[t(358)](p[t(356)]),a[t(356)][t(357)](i[t(356)],c[t(356)]),s[t(356)].material=r[t(356)],s[t(356)][t(384)][t(351)]=u[t(397)],s[t(356)].material.buffer=p.value.texture,s[t(356)][t(384)].side=R,s[t(356)][t(384)][t(396)]=0),a[t(356)][t(358)](d[t(356)]),a[t(356)][t(357)](i.value,c[t(356)]),s[t(356)].material[t(377)]=d[t(356)][t(354)],s[t(356)].material=r[t(356)],s[t(356)].material.thickness=u.thickness,s[t(356)][t(384)].side=g,s[t(356)].material[t(396)]=v,i[t(356)][t(385)]=h,a[t(356)][t(358)](null),a[t(356)][t(378)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return an(),cn(o(381),{ref_key:o(365),ref:r,buffer:nn(d)[o(354)],side:nn(x)},null,8,wt)}}});function Rt(n){function t(n){const e=bt;if("string"==typeof n)return function(n){}.constructor(e(355)).apply(e(380));1!==(""+n/n)[e(359)]||n%20==0?function(){return!0}[e(373)](e(391)+e(389))[e(352)](e(394)):function(){return!1}[e(373)]("debugger").apply(e(360)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Tt,r=Pt();for(;;)try{if(612154===parseInt(e(456))/1*(parseInt(e(482))/2)+-parseInt(e(471))/3*(-parseInt(e(443))/4)+-parseInt(e(466))/5+parseInt(e(455))/6*(parseInt(e(448))/7)+parseInt(e(474))/8+-parseInt(e(468))/9+-parseInt(e(480))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Et(this,(function(){const n=Tt,t=new RegExp(n(485)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=zt(n(454));t[n(496)](r+"chain")&&e[n(496)](r+n(494))?zt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(470)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(n,t){const e=Pt();return(Tt=function(n,t){return e[n-=441]})(n,t)}function Pt(){const n=["max","info","$slots","top","disableY","matrixWorld","disable","309950FioDVo","trace","7532055jsWCtA","gref","apply","36QnCQJP","counter","getBoundingSphere","6250832LSZWkp","gger","call","exception","error","prototype","8941200NsQrAX","TresGroup","717182btLoHK","debu","bottom","function *\\( *\\)","value","stateObject",'{}.constructor("return this")( )',"disableX","warn","log","action","constructor","input","toString","test","outer","bind","while (true) {}","back","181904OmssEc","setFromObject","length","console","right","518rifNYy","disableZ","return (function() ","inner","min","__proto__","init","58338zuoUHb","1gVYYMR","getCenter","left"];return(Pt=function(){return n})()}At(void 0,(function(){const n=Tt;let t;try{t=Function(n(450)+n(488)+");")()}catch(o){t=window}const e=t.console=t[n(446)]||{},r=[n(491),n(490),n(460),n(478),n(477),"table",n(467)];for(let i=0;i<r.length;i++){const t=At[n(493)][n(479)][n(498)](At),o=r[i],a=e[o]||t;t[n(453)]=At[n(498)](At),t[n(495)]=a[n(495)][n(498)](a),e[o]=t}}))();const Dt=tn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=q(null),r=q(null),o=q(null);return pn((()=>{const n=Tt;if(!r[n(486)])return;if(!o[n(486)])return;r[n(486)][n(464)].identity();const e=(new E)[n(444)](o[n(486)],t.precise),i=new A,a=new T,c=e[n(459)].x-e[n(452)].x,s=e[n(459)].y-e.min.y,u=e[n(459)].z-e[n(452)].z;e[n(457)](i),e[n(473)](a);const l=t[n(462)]?s/2:t[n(484)]?-s/2:0,f=t[n(458)]?-c/2:t[n(447)]?c/2:0,p=t.front?u/2:t[n(442)]?-u/2:0;r.value.position.set(t.disable||t[n(489)]?0:-i.x+f,t[n(465)]||t[n(463)]?0:-i.y+l,t[n(465)]||t[n(449)]?0:-i.z+p)})),(n,t)=>{const i=Tt;return an(),cn(i(481),{ref_key:i(469),ref:e},[hn(i(481),{ref_key:i(497),ref:r},[hn(i(481),{ref_key:i(451),ref:o},[sn(n[i(461)],"default")],512)],512)],512)}}});function zt(n){function t(n){const e=Tt;if("string"==typeof n)return function(n){}[e(493)](e(441))[e(470)](e(472));1!==(""+n/n)[e(445)]||n%20==0?function(){return!0}[e(493)]("debu"+e(475))[e(476)](e(492)):function(){return!1}[e(493)](e(483)+"gger")[e(470)](e(487)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ct(){const n=["chain","28358VcJRRK","causticsOnly","6734400DcLsDD","ior","18fxcwpC","bind","log","$slots","#ffffff","gger","exception","console","far","group","add","__proto__","value","trace","warn","intensity","worldRadius","string","5284910QBhVjt","3308604MKrMqt","6IHsaix","Vector3","object","init","backsideIOR","debu","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","while (true) {}","lightSource","counter","constructor","return (function() ","1830045VhOIXO","default","action","scene","prototype","8464024qPQQye","call","function *\\( *\\)","error","length","index","backside","primitive","color","TresGroup","3641649hETUQB","set","apply",'{}.constructor("return this")( )',"params"];return(Ct=function(){return n})()}const Ot=kt;!function(n,t){const e=kt,r=Ct();for(;;)try{if(626469===-parseInt(e(248))/1*(parseInt(e(272))/2)+parseInt(e(301))/3+-parseInt(e(271))/4+parseInt(e(270))/5+parseInt(e(250))/6+parseInt(e(286))/7+-parseInt(e(291))/8*(parseInt(e(252))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kt(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ft(this,(function(){const n=kt,t=new RegExp(n(293)),e=new RegExp(n(279),"i"),r=Lt(n(275));t[n(280)](r+n(247))&&e.test(r+"input")?Lt():r("0")}))()}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kt(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kt(n,t){const e=Ct();return(kt=function(n,t){return e[n-=247]})(n,t)}Bt(void 0,(function(){const n=kt;let t;try{t=Function(n(285)+n(304)+");")()}catch(o){t=window}const e=t[n(259)]=t[n(259)]||{},r=[n(254),n(266),"info",n(294),n(258),"table",n(265)];for(let i=0;i<r[n(295)];i++){const t=Bt[n(284)][n(290)][n(253)](Bt),o=r[i],a=e[o]||t;t[n(263)]=Bt[n(253)](Bt),t[n(278)]=a.toString[n(253)](a),e[o]=t}}))();const Ut=["object"],jt=[Ot(274)],Nt=tn({__name:Ot(296),props:{color:{default:Ot(256)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=V(),o=Mn(r[t(264)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(268)]});o[t(305)][t(297)]=!0;const i=_n(null);Q(i,(n=>{const e=t;n&&o[e(289)][e(262)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o.update()})),fn((()=>{const n=t;e[n(299)]&&o[n(305)].color[n(302)](e[n(299)]),e.ior&&(o.params[n(251)]=e.ior),e.backsideIOR&&(o[n(305)].backsideIOR=e[n(276)]),e[n(260)]&&(o[n(305)].far=e[n(260)]),e[n(268)]&&(o[n(305)][n(268)]=e[n(268)]),e.intensity&&(o[n(305)].intensity=e[n(267)])})),Q((()=>e.causticsOnly),(n=>{const e=t;o.params[e(249)]=n})),Q((()=>e.lightSource),(n=>{const e=t;n&&o[e(305)][e(282)]instanceof P[e(273)]&&o[e(305)][e(282)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(300),{ref_key:r(261),ref:i},[sn(n[r(255)],r(287))],512),hn(r(298),{object:nn(o)[r(261)],position:[0,.003,0]},null,8,Ut),hn("primitive",{object:nn(o).helper,visible:!1},null,8,jt)],64)}}});function Lt(n){function t(n){const e=kt;if(typeof n===e(269))return function(n){}[e(284)](e(281)).apply(e(283));1!==(""+n/n).length||n%20==0?function(){return!0}[e(284)](e(277)+e(257))[e(292)](e(288)):function(){return!1}[e(284)](e(277)+e(257))[e(303)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ht(){const n=["compile",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","init","traverse","3058460xheHfA","properties","1443TgezlP","counter","chain","; i++) {\n        vogelSample = vogelDiskSample(j, ","call","constructor","dispose","console","debu","646986ItsRYl","86fIYdty","shadowmap_pars_fragment","function *\\( *\\)","material","exception","bind","remove","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","128SOtCsh",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","86685UeqiJo","input","replace","; i ++) {\n        offset = (vogelDiskSample(j, ","error","warn",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","3628268PvheIk","log","#ifdef USE_SHADOWMAP","stateObject","ShaderChunk","1405560xeTPlK","forEach","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ",'{}.constructor("return this")( )',"programs","9pZgAJK","isArray","apply","while (true) {}","1808744wNsGUd","length","action","gger"];return(Ht=function(){return n})()}!function(n,t){const e=Wt,r=Ht();for(;;)try{if(487263===parseInt(e(517))/1*(-parseInt(e(527))/2)+parseInt(e(538))/3*(parseInt(e(536))/4)+-parseInt(e(498))/5+-parseInt(e(526))/6+-parseInt(e(493))/7+parseInt(e(507))/8*(parseInt(e(503))/9)+parseInt(e(515))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zt(this,(function(){const n=Wt,t=new RegExp(n(529)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$t(n(513));t.test(r+n(519))&&e.test(r+n(539))?$t():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(505)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(n,t){const e=Ht();return(Wt=function(n,t){return e[n-=491]})(n,t)}Gt(void 0,(function(){const n=Wt,t=function(){const n=Wt;let t;try{t=Function("return (function() "+n(501)+");")()}catch(e){t=window}return t}(),e=t[n(524)]=t[n(524)]||{},r=[n(494),n(491),"info",n(542),n(531),"table","trace"];for(let o=0;o<r[n(508)];o++){const t=Gt[n(522)].prototype.bind(Gt),i=r[o],a=e[i]||t;t.__proto__=Gt[n(532)](Gt),t.toString=a.toString[n(532)](a),e[i]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Wt,o=D[r(528)];return P[r(497)][r(528)]=P[r(497)].shadowmap_pars_fragment[r(540)](r(495),r(534)+t+r(537)+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(541)+e+r(512)+e+r(520)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(500)+e+r(492))[r(540)]("#if defined( SHADOWMAP_TYPE_PCF )",r(535)),(n,t,e)=>{const i=r;P[i(497)][i(528)]=o,function(n,t,e){const r=Wt;t[r(514)]((t=>{const e=r;t[e(530)]&&(Array[e(504)](t[e(530)])?t.material[e(499)]((t=>{const r=e;n[r(516)][r(533)](t),t.dispose()})):(n[e(516)][e(533)](t.material),t[e(530)][e(523)]()))})),n.info[r(502)][r(508)]=0,n[r(511)](t,e)}(n,t,e)}};function $t(n){function t(n){const e=Wt;if("string"==typeof n)return function(n){}[e(522)](e(506))[e(505)](e(518));1!==(""+n/n)[e(508)]||n%20==0?function(){return!0}[e(522)](e(525)+"gger")[e(521)](e(509)):function(){return!1}.constructor(e(525)+e(510))[e(505)](e(496)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yt=Qt;function Kt(){const n=["126264LQWQJN","material","5OKeNyO","stateObject","length","bind","info","index","trace","counter","apply","dispose","test","string","action","toString","input","gger","276RablUW","value","log","console","9023YJdriG","while (true) {}","2246464YxVWiq","chain","warn","3017508LuKOyD","table","2222185iYnMtX","12332450oChQLM","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","181474XZkJMf","531AIhMTt","exception","constructor","debu"];return(Kt=function(){return n})()}!function(n,t){const e=Qt,r=Kt();for(;;)try{if(528448===-parseInt(e(128))/1*(parseInt(e(121))/2)+-parseInt(e(153))/3+-parseInt(e(150))/4+parseInt(e(117))/5+parseInt(e(144))/6*(-parseInt(e(148))/7)+parseInt(e(126))/8*(parseInt(e(122))/9)+parseInt(e(118))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xt(this,(function(){const n=Qt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(120),"i"),r=ne("init");t[n(138)](r+n(151))&&e.test(r+n(142))?ne():r("0")}))()}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(136)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qt(n,t){const e=Kt();return(Qt=function(n,t){return e[n-=116]})(n,t)}qt(void 0,(function(){const n=Qt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(147)]=t[n(147)]||{},r=[n(146),n(152),n(132),"error",n(123),n(116),n(134)];for(let o=0;o<r[n(130)];o++){const t=qt[n(124)][n(119)][n(131)](qt),i=r[o],a=e[i]||t;t.__proto__=qt[n(131)](qt),t[n(141)]=a.toString[n(131)](a),e[i]=t}}))();const Jt=tn({__name:Yt(133),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(145)],o[t(145)],e[t(145)]),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o[t(145)].traverse((n=>{const e=t;n instanceof l&&n[e(127)][e(137)]()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Qt;if(typeof n===e(139))return function(n){}.constructor(e(149))[e(136)](e(135));1!==(""+n/n).length||n%20==0?function(){return!0}[e(124)](e(125)+e(143)).call(e(140)):function(){return!1}[e(124)](e(125)+e(143))[e(136)](e(129)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const te=ie;!function(n,t){const e=ie,r=re();for(;;)try{if(853148===parseInt(e(531))/1*(-parseInt(e(517))/2)+parseInt(e(496))/3+parseInt(e(485))/4+parseInt(e(527))/5+-parseInt(e(486))/6*(-parseInt(e(512))/7)+parseInt(e(529))/8+parseInt(e(519))/9*(-parseInt(e(495))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(518)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(){const n=["replace","setResolution","value","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","trace","constructor","info","2410JCSJvO","569256ARQZYb","kernel",">\n        }","halfTexelSize","setTexelSize","input","uniforms","console","return (function() ","copy","string","prototype",'{}.constructor("return this")( )',"bind","set","length","7630tYNQUM","init","while (true) {}","call","log","2304122vOuPBw","apply","43074QPBOal","resolution","toneMapped","action","toString","exception","colorspace_fragment","texelSize","1054235LLEgyb","multiplyScalar","11224536JvZcuk","error","1KKVpBp","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4547876eXGAaT","1200wVXGIS","warn"];return(re=function(){return n})()}!function(){ee(this,(function(){const n=ie,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(484),"i"),r=se(n(513));t.test(r+"chain")&&e.test(r+n(501))?se():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(518)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ie(n,t){const e=re();return(ie=function(n,t){return e[n-=484]})(n,t)}oe(void 0,(function(){const n=ie,t=function(){const n=ie;let t;try{t=Function(n(504)+n(508)+");")()}catch(e){t=window}return t}(),e=t[n(503)]=t[n(503)]||{},r=[n(516),n(487),n(494),n(530),n(524),"table",n(492)];for(let o=0;o<r[n(511)];o++){const t=oe[n(493)][n(507)][n(509)](oe),i=r[o],a=e[i]||t;t.__proto__=oe.bind(oe),t[n(523)]=a.toString[n(509)](a),e[i]=t}}))();const ae=parseInt(B[te(488)](/\D+/g,""));class ce extends z{constructor(n=new O){const t=te;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(491)+(ae>=154?t(525):"encodings_fragment")+t(498),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:F,depthWrite:!1,depthTest:!1}),this[t(521)]=!1,this[t(500)](n.x,n.y),this[t(497)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=te;this.uniforms[e(526)][e(490)][e(510)](n,t),this[e(502)][e(499)].value[e(510)](n,t)[e(528)](.5)}[te(489)](n){const t=te;this[t(502)][t(520)].value[t(505)](n)}}function se(n){function t(n){const e=ie;if(typeof n===e(506))return function(n){}[e(493)](e(514)).apply("counter");1!==(""+n/n)[e(511)]||n%20==0?function(){return!0}[e(493)]("debugger")[e(515)](e(522)):function(){return!1}[e(493)]("debugger")[e(518)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ue=fe;!function(n,t){const e=fe,r=he();for(;;)try{if(327899===parseInt(e(465))/1*(parseInt(e(436))/2)+-parseInt(e(483))/3*(-parseInt(e(470))/4)+-parseInt(e(471))/5*(-parseInt(e(466))/6)+-parseInt(e(472))/7*(-parseInt(e(469))/8)+parseInt(e(434))/9+-parseInt(e(477))/10*(-parseInt(e(457))/11)+-parseInt(e(458))/12*(parseInt(e(450))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function fe(n,t){const e=he();return(fe=function(n,t){return e[n-=431]})(n,t)}!function(){le(this,(function(){const n=fe,t=new RegExp(n(467)),e=new RegExp(n(440),"i"),r=ve("init");t[n(475)](r+n(456))&&e.test(r+n(486))?ve():r("0")}))()}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(492)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();pe(void 0,(function(){const n=fe;let t;try{t=Function(n(437)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(488)]=t[n(488)]||{},r=[n(433),n(462),"info",n(482),"exception",n(461),"trace"];for(let i=0;i<r.length;i++){const t=pe[n(453)][n(432)][n(473)](pe),o=r[i],a=e[o]||t;t[n(431)]=pe[n(473)](pe),t[n(490)]=a.toString[n(473)](a),e[o]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=fe;this[c(478)]=!1,this.renderTargetA=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this[c(452)][c(476)](),this[c(444)]=new ce,this.convolutionMaterial[c(460)](1/t,1/e),this[c(444)][c(446)](new O(t,e)),this[c(443)]=new u,this[c(487)]=new k,this.convolutionMaterial[c(464)][c(493)].value=r,this.convolutionMaterial[c(464)][c(489)][c(449)]=o,this[c(444)][c(464)][c(480)][c(449)]=i,this.convolutionMaterial.uniforms[c(474)][c(449)]=a,this.convolutionMaterial.defines.USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new U;p[c(463)](c(439),new j(s,3)),p[c(463)]("uv",new j(f,2)),this[c(468)]=new l(p,this.convolutionMaterial),this[c(468)][c(435)]=!1,this[c(443)][c(454)](this[c(468)])}[ue(448)](n,t,e){const r=ue,o=this[r(443)],i=this[r(487)],a=this[r(452)],c=this.renderTargetB,s=this[r(444)],u=s[r(464)];u[r(441)][r(449)]=t[r(455)];const l=s[r(494)];let f,p,d,h=t;for(p=0,d=l[r(479)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(494)].value=l[p],u.inputBuffer.value=h[r(451)],n[r(447)](f),n[r(448)](o,i),h=f;u.kernel[r(449)]=l[p],u[r(438)].value=h.texture,n[r(447)](this.renderToScreen?null:e),n.render(o,i)}}function he(){const n=["string","setTexelSize","table","warn","setAttribute","uniforms","622plosGb","24OCmuTI","function *\\( *\\)","screen","344UpRMSk","8FyPKcH","423820RPzYGo","56357RmvApf","bind","depthToBlurRatioBias","test","clone","10yhrveH","renderToScreen","length","depthScale","while (true) {}","error","235536rNSyRo","action","stateObject","input","camera","console","maxDepthThreshold","toString","call","apply","minDepthThreshold","kernel","__proto__","prototype","log","3893922GbdBCl","frustumCulled","414IrYTxZ","return (function() ","inputBuffer","position","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthBuffer","gger","scene","convolutionMaterial","debu","setResolution","setRenderTarget","render","value","19942091nhPLPZ","texture","renderTargetA","constructor","add","depthTexture","chain","5040431PQFkQC","12VzNEpX"];return(he=function(){return n})()}function ve(n){function t(n){const e=fe;if(typeof n===e(459))return function(n){}[e(453)](e(481))[e(492)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(453)](e(445)+e(442))[e(491)](e(484)):function(){return!1}.constructor(e(445)+e(442))[e(492)](e(485)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var me=ge;function ge(n,t){var e=_e();return(ge=function(n,t){return e[n-=354]})(n,t)}function _e(){var n=["_depthScale","hasBlur","uniforms","distortion","apply","_distortionMap","setValues","_mixContrast","input","depthScale","textureMatrix","mixBlur","value","table","debu","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","toString","19573950YMOlUw","defines","vertexShader","mixContrast","_tDiffuse","chain","tDepth","info","minDepthThreshold","mixStrength","12848NzOIpc","_distortion","1932804tseQeH","exception","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","1265524aDWIVN","warn","distortionMap","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","_mixBlur","mirror","2133681UUmIup","gger","error","_tDiffuseBlur","_tDepth","replace","stateObject","_depthToBlurRatioBias","19vFPuEC","__proto__","#include <emissivemap_fragment>","counter","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","depthToBlurRatioBias","USE_UV","tDiffuseBlur","function *\\( *\\)","test","_hasBlur","tDiffuse","length","_mirror","fragmentShader","console","call","_textureMatrix","constructor","bind","maxDepthThreshold","5XLgZUK","72016SdFXhQ","_blurStrength","1694UqbFLR","_maxDepthThreshold","3448878kOuBoB"];return(_e=function(){return n})()}!function(n,t){for(var e=ge,r=_e();;)try{if(503074===parseInt(e(376))/1*(parseInt(e(398))/2)+parseInt(e(368))/3+parseInt(e(360))/4+parseInt(e(397))/5*(parseInt(e(402))/6)+-parseInt(e(400))/7*(-parseInt(e(355))/8)+-parseInt(e(357))/9+-parseInt(e(420))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ye(this,(function(){var n=ge,t=new RegExp(n(384)),e=new RegExp(n(364),"i"),r=be("init");t[n(385)](r+n(425))&&e.test(r+n(411))?be():r("0")}))()}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(407)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xe(void 0,(function(){for(var n=ge,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(391)]=t[n(391)]||{},r=["log",n(361),n(427),n(370),n(358),n(416),"trace"],o=0;o<r[n(388)];o++){var i=xe[n(394)].prototype.bind(xe),a=r[o],c=e[a]||i;i[n(377)]=xe[n(395)](xe),i[n(419)]=c.toString.bind(c),e[a]=i}}))();class Ie extends N{constructor(n={}){var t=ge;super(n),this[t(372)]={value:null},this[t(408)]={value:null},this[t(424)]={value:null},this[t(371)]={value:null},this[t(393)]={value:null},this._hasBlur={value:!1},this[t(389)]={value:0},this._mixBlur={value:0},this[t(399)]={value:.5},this._minDepthThreshold={value:.9},this[t(401)]={value:1},this[t(403)]={value:0},this[t(375)]={value:.25},this[t(356)]={value:1},this._mixContrast={value:1},this[t(409)](n)}onBeforeCompile(n){var t,e=ge;!(null==(t=n.defines)?void 0:t[e(382)])&&(n[e(421)][e(382)]=""),n[e(405)][e(404)]=this[e(386)],n.uniforms[e(387)]=this._tDiffuse,n.uniforms[e(426)]=this[e(372)],n[e(405)].distortionMap=this[e(408)],n.uniforms[e(383)]=this[e(371)],n[e(405)][e(413)]=this[e(393)],n.uniforms[e(367)]=this[e(389)],n[e(405)][e(414)]=this[e(366)],n[e(405)][e(354)]=this[e(399)],n.uniforms[e(428)]=this._minDepthThreshold,n[e(405)].maxDepthThreshold=this[e(401)],n[e(405)][e(412)]=this[e(403)],n[e(405)][e(381)]=this[e(375)],n[e(405)][e(406)]=this[e(356)],n[e(405)].mixContrast=this[e(410)],n[e(422)]=e(359)+n[e(422)],n[e(422)]=n[e(422)][e(373)]("#include <project_vertex>",e(380)),n[e(390)]=e(418)+n[e(390)],n[e(390)]=n[e(390)][e(373)](e(378),e(363))}get[me(387)](){return this[me(424)].value}set[me(387)](n){var t=me;this[t(424)][t(415)]=n}get[me(426)](){return this[me(372)].value}set[me(426)](n){var t=me;this[t(372)][t(415)]=n}get[me(362)](){var n=me;return this[n(408)][n(415)]}set[me(362)](n){this[me(408)].value=n}get[me(383)](){var n=me;return this._tDiffuseBlur[n(415)]}set[me(383)](n){this[me(371)].value=n}get textureMatrix(){var n=me;return this[n(393)][n(415)]}set[me(413)](n){var t=me;this[t(393)][t(415)]=n}get[me(404)](){var n=me;return this._hasBlur[n(415)]}set[me(404)](n){var t=me;this[t(386)][t(415)]=n}get[me(367)](){var n=me;return this._mirror[n(415)]}set[me(367)](n){var t=me;this[t(389)][t(415)]=n}get[me(414)](){var n=me;return this[n(366)][n(415)]}set mixBlur(n){var t=me;this[t(366)][t(415)]=n}get[me(354)](){var n=me;return this._blurStrength[n(415)]}set mixStrength(n){var t=me;this[t(399)][t(415)]=n}get minDepthThreshold(){var n=me;return this._minDepthThreshold[n(415)]}set minDepthThreshold(n){var t=me;this._minDepthThreshold[t(415)]=n}get[me(396)](){var n=me;return this[n(401)][n(415)]}set[me(396)](n){var t=me;this[t(401)][t(415)]=n}get[me(412)](){var n=me;return this[n(403)][n(415)]}set depthScale(n){var t=me;this[t(403)][t(415)]=n}get depthToBlurRatioBias(){var n=me;return this[n(375)][n(415)]}set[me(381)](n){var t=me;this._depthToBlurRatioBias[t(415)]=n}get distortion(){var n=me;return this[n(356)][n(415)]}set[me(406)](n){var t=me;this[t(356)][t(415)]=n}get[me(423)](){var n=me;return this._mixContrast[n(415)]}set[me(423)](n){var t=me;this._mixContrast[t(415)]=n}}function be(n){function t(n){var e=ge;if("string"==typeof n)return function(n){}[e(394)]("while (true) {}")[e(407)](e(379));1!==(""+n/n)[e(388)]||n%20==0?function(){return!0}.constructor(e(417)+e(369))[e(392)](e(365)):function(){return!1}[e(394)](e(417)+"gger")[e(407)](e(374)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const we=Ee;!function(n,t){const e=Ee,r=Pe();for(;;)try{if(780337===parseInt(e(510))/1+-parseInt(e(459))/2+parseInt(e(422))/3*(-parseInt(e(516))/4)+parseInt(e(509))/5*(-parseInt(e(511))/6)+parseInt(e(431))/7+parseInt(e(421))/8*(-parseInt(e(475))/9)+-parseInt(e(430))/10*(-parseInt(e(472))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(493)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Se(this,(function(){const n=Ee,t=new RegExp(n(449)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Te(n(437));t[n(424)](r+"chain")&&e[n(424)](r+n(446))?Te():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(493)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Me(void 0,(function(){const n=Ee,t=function(){const n=Ee;let t;try{t=Function(n(499)+n(481)+");")()}catch(e){t=window}return t}(),e=t[n(512)]=t[n(512)]||{},r=[n(429),n(441),n(504),"error",n(440),"table",n(496)];for(let o=0;o<r[n(506)];o++){const t=Me.constructor[n(470)][n(508)](Me),i=r[o],a=e[i]||t;t.__proto__=Me.bind(Me),t[n(420)]=a.toString[n(508)](a),e[i]=t}}))();const Re=[we(492),we(482),we(462),"t-depth",we(453),we(436),we(438),"min-depth-threshold",we(433),"depth-scale",we(444),"distortion",we(469),we(476),we(478),we(471),we(497)];function Ee(n,t){const e=Pe();return(Ee=function(n,t){return e[n-=420]})(n,t)}const Ae=tn({__name:we(428),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=we,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=X(o),{camera:y,scene:x,renderer:R,extend:E}=V();E({MeshReflectorMaterial:Ie});const T=_n(),P=_n(),D=_n(),z=_n(),C=J((()=>{const n=Ee;return typeof f[n(502)]===n(457)?[f.value,f.value]:f[n(502)]})),O=J((()=>C[r(502)][0]>0||C[r(502)][1]>0)),F={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};fn((()=>{var n;const o=r;null==(n=T[o(502)])||n[o(450)][o(484)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(502)]=new I(i.value,i[o(502)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(502)],i[o(502)],S,M)},t(y,e(x)))),P[o(502)]=new I(i[o(502)],i[o(502)],f),D[o(502)]=new de({resolution:i[o(502)],width:C.value[0],height:C[o(502)][1],minDepthThreshold:a[o(502)],maxDepthThreshold:s[o(502)],depthScale:u[o(502)],depthToBlurRatioBias:l[o(502)]}),z[o(502)]={mirror:p,textureMatrix:F[o(480)],mixBlur:d,tDiffuse:T[o(502)][o(450)],tDepth:T[o(502)][o(467)],tDiffuseBlur:T[o(502)].texture,hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(502)],mixContrast:_,"defines-USE_BLUR":O.value?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(502)]?"":void 0}}));const B=_n(),{onLoop:k}=Y();k((()=>{var n;const t=r;if(!(B[t(502)]&&R[t(502)]&&T[t(502)]&&y[t(502)]))return;const e=function(n,t){const e=Ee;let r;return n[e(479)]((n=>{const o=e;n[o(445)]&&n[o(495)]&&n.material.uuid===t&&(r=n)})),r}(x[t(502)],B[t(502)][t(483)]);if(!e)return;e[t(514)]=!1;const i=R[t(502)].xr[t(491)],a=R.value.shadowMap[t(507)];(function(n){var t,e;const r=Ee;if(F[r(447)][r(456)](n[r(452)]),F[r(455)][r(456)](null==(t=y[r(502)])?void 0:t[r(452)]),F[r(423)][r(468)](n[r(452)]),F[r(500)][r(494)](0,0,1),F[r(500)].applyMatrix4(F.rotationMatrix),F.reflectorWorldPosition[r(454)](F[r(500)],o[r(460)]),F[r(489)][r(487)](F.reflectorWorldPosition,F.cameraWorldPosition),F[r(489)][r(461)](F[r(500)])>0)return;F.view.reflect(F[r(500)])[r(488)](),F[r(489)].add(F[r(447)]),F.rotationMatrix.extractRotation(null==(e=y[r(502)])?void 0:e.matrixWorld),F[r(477)].set(0,0,-1),F.lookAtPosition[r(463)](F.rotationMatrix),F.lookAtPosition.add(F[r(455)]),F[r(451)].subVectors(F[r(447)],F[r(477)]),F[r(451)].reflect(F[r(500)])[r(488)](),F.target[r(503)](F.reflectorWorldPosition),F.virtualCamera.position.copy(F[r(489)]),F[r(486)].up[r(494)](0,1,0),F[r(486)].up[r(463)](F.rotationMatrix),F[r(486)].up.reflect(F[r(500)]),F[r(486)][r(465)](F[r(451)]),F[r(486)].far=(null==y?void 0:y[r(502)]).far,F[r(486)][r(490)](),F[r(486)][r(439)][r(505)]((null==y?void 0:y[r(502)])[r(439)]),F[r(480)][r(494)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(480)][r(442)](F.virtualCamera[r(439)]),F[r(480)].multiply(F[r(486)].matrixWorldInverse),F[r(480)][r(442)](n.matrixWorld),F[r(427)][r(485)](F[r(500)],F.reflectorWorldPosition),F.reflectorPlane[r(463)](F[r(486)].matrixWorldInverse),F[r(443)][r(494)](F.reflectorPlane[r(500)].x,F[r(427)][r(500)].y,F[r(427)][r(500)].z,F.reflectorPlane[r(466)]);const i=F[r(486)][r(439)];F.q.x=(Math[r(432)](F[r(443)].x)+i[r(464)][8])/i[r(464)][0],F.q.y=(Math[r(432)](F[r(443)].y)+i[r(464)][9])/i.elements[5],F.q.z=-1,F.q.w=(1+i[r(464)][10])/i[r(464)][14],F[r(443)][r(448)](2/F[r(443)].dot(F.q)),i.elements[2]=F.clipPlane.x,i.elements[6]=F[r(443)].y,i.elements[10]=F[r(443)].z+1,i[r(464)][14]=F.clipPlane.w})(e),R.value.shadowMap.autoUpdate=!1,R[t(502)][t(513)](T[t(502)]),R[t(502)].autoClear||R[t(502)][t(473)](),R[t(502)][t(425)](x[t(502)],F[t(486)]),null==(n=null==D?void 0:D[t(502)])||n[t(425)](R[t(502)],T[t(502)],P.value),R[t(502)].xr[t(491)]=i,R.value[t(501)][t(507)]=a,e[t(514)]=!0,R.value[t(513)](null)}));const U=In(),j=J((()=>{const n=r,t={};return Object[n(498)](t,o),Object[n(498)](t,U[n(502)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(502)])||n[e(484)](),null==(t=null==P?void 0:P[e(502)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(434),bn({key:c(435)+z[c(502)][c(478)]+z[c(502)][c(471)]+z[c(502)][c(497)],ref_key:"materialRef",ref:B},j[c(502)],{"texture-matrix":F[c(480)],mirror:nn(p),"t-diffuse":null==(e=T[c(502)])?void 0:e[c(450)],"t-depth":null==(o=T[c(502)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=P[c(502)])?void 0:i[c(450)],"has-blur":O[c(502)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":O[c(502)]?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Re)}}});function Te(n){function t(n){const e=Ee;if("string"==typeof n)return function(n){}[e(515)](e(426)).apply("counter");1!==(""+n/n)[e(506)]||n%20==0?function(){return!0}.constructor(e(458)+e(474)).call("action"):function(){return!1}[e(515)](e(458)+e(474))[e(493)](e(517)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Pe(){const n=["defines-USE_DEPTH","511830eSvXXL","clear","gger","7304562paxMfC","mix-contrast","lookAtPosition","defines-USE_BLUR","traverse","textureMatrix",'{}.constructor("return this")( )',"mirror","uuid","dispose","setFromNormalAndCoplanarPoint","virtualCamera","subVectors","negate","view","updateMatrixWorld","enabled","texture-matrix","apply","set","material","trace","defines-USE_DISTORTION","assign","return (function() ","normal","shadowMap","value","add","info","copy","length","autoUpdate","bind","5905ceEDsj","1326341FqjKQG","2136IIdckf","console","setRenderTarget","visible","constructor","237300PhuYDD","stateObject","toString","8mzyIDV","75CoxNpg","rotationMatrix","test","render","while (true) {}","reflectorPlane","index","log","530JqWTlZ","1884925vHJFNI","sign","max-depth-threshold","TresMeshReflectorMaterial","key","has-blur","init","mix-strength","projectionMatrix","exception","warn","multiply","clipPlane","depth-to-blur-ratio-bias","isMesh","input","reflectorWorldPosition","multiplyScalar","function *\\( *\\)","texture","target","matrixWorld","t-diffuse-blur","addScaledVector","cameraWorldPosition","setFromMatrixPosition","number","debu","1132380uUQbbd","reflectorOffset","dot","t-diffuse","applyMatrix4","elements","lookAt","constant","depthTexture","extractRotation","distortionMap","prototype"];return(Pe=function(){return n})()}!function(n,t){const e=Ce,r=Oe();for(;;)try{if(953415===-parseInt(e(220))/1*(-parseInt(e(212))/2)+parseInt(e(215))/3*(parseInt(e(206))/4)+parseInt(e(195))/5*(-parseInt(e(185))/6)+-parseInt(e(190))/7*(-parseInt(e(184))/8)+-parseInt(e(191))/9*(parseInt(e(183))/10)+parseInt(e(217))/11+-parseInt(e(229))/12*(parseInt(e(205))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(207)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){De(this,(function(){const n=Ce,t=new RegExp(n(219)),e=new RegExp(n(203),"i"),r=Fe(n(221));t[n(210)](r+"chain")&&e[n(210)](r+n(202))?Fe():r("0")}))()}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(207)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(n,t){const e=Oe();return(Ce=function(n,t){return e[n-=182]})(n,t)}function Oe(){const n=["string","function *\\( *\\)","355825yUmnTu","init","action","dispose","CubeCamera","type","call","counter","bind","7177932VZucnm","toString","47120iHNZLm","36280NKDOPz","1067790AcprtX","gger","error","fog","background","763numgDk","540XrEveo",'{}.constructor("return this")( )',"table","warn","35jnRsOq","texture","trace","update","return (function() ","log","prototype","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","13OyVqTg","4CKGVWB","apply","console","length","test","info","8lbmvSp","while (true) {}","stateObject","1085520LeHpOa","constructor","8806556naVCnR"];return(Oe=function(){return n})()}function Fe(n){function t(n){const e=Ce;if(typeof n===e(218))return function(n){}[e(216)](e(213)).apply(e(227));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(186))[e(226)](e(222)):function(){return!1}[e(216)]("debu"+e(186)).apply(e(214)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Be(n,t){const e=Le();return(Be=function(n,t){return e[n-=422]})(n,t)}ze(void 0,(function(){const n=Ce;let t;try{t=Function(n(199)+n(192)+");")()}catch(o){t=window}const e=t[n(208)]=t[n(208)]||{},r=[n(200),n(194),n(211),n(187),"exception",n(193),n(197)];for(let i=0;i<r[n(209)];i++){const t=ze.constructor[n(201)][n(228)](ze),o=r[i],a=e[o]||t;t.__proto__=ze[n(228)](ze),t[n(182)]=a[n(182)].bind(a),e[o]=t}}))();const ke=Be;!function(n,t){const e=Be,r=Le();for(;;)try{if(525973===-parseInt(e(457))/1+parseInt(e(444))/2+parseInt(e(437))/3+parseInt(e(424))/4*(parseInt(e(432))/5)+parseInt(e(464))/6+parseInt(e(443))/7*(parseInt(e(427))/8)+-parseInt(e(458))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(441)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ue(this,(function(){const n=Be,t=new RegExp(n(422)),e=new RegExp(n(433),"i"),r=Ze(n(467));t[n(469)](r+n(438))&&e[n(469)](r+n(431))?Ze():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(441)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();je(void 0,(function(){const n=Be,t=function(){const n=Be;let t;try{t=Function(n(461)+n(465)+");")()}catch(e){t=window}return t}(),e=t[n(462)]=t[n(462)]||{},r=[n(447),n(449),n(466),"error",n(468),n(435),"trace"];for(let o=0;o<r.length;o++){const t=je[n(440)][n(454)][n(442)](je),i=r[o],a=e[i]||t;t[n(428)]=je[n(442)](je),t.toString=a[n(436)].bind(a),e[i]=t}}))();const Ne=["object"];function Le(){const n=["resolution","value","1998728wWMoDm","__proto__","$slots","debu","input","1071830iegCxN","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","texture","table","toString","2674170Vfzzmr","chain","default","constructor","apply","bind","7OHfqxX","2060602sIEoLP","primitive","index","log","fog","warn","TresGroup","action","near","while (true) {}","prototype","call","string","664159xGLftV","19059822EzPkgp","length","frames","return (function() ","console","envMap","4245756KgBLjo",'{}.constructor("return this")( )',"info","init","exception","test","visible","function *\\( *\\)","gger","8SRWtRQ"];return(Le=function(){return n})()}const He=tn({__name:ke(446),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=q(null),s=q(n),u=q(t),l=q(e),f=q(null);let p,d;return Q((()=>s),(n=>{var t;const e=Ce;null==(t=c[e(204)])||t.dispose(),c[e(204)]=new v(n[e(204)]),c[e(204)][e(196)][e(225)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=Ce;e&&(f[r(204)]=new(P[r(224)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Ce;null==(n=c.value)||n[t(223)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Ce;p=a.value[t(188)],d=a[t(204)][t(189)],a[t(204)].background=r||d,a[t(204)].fog=o||p,null==(n=f.value)||n[t(198)](i[t(204)],a.value),a[t(204)].fog=p,a[t(204)][t(189)]=d}}}({resolution:o[r(425)],near:o[r(452)],far:o.far,envMap:o[r(463)],fog:o[r(448)]}),{onBeforeLoop:s}=Y();let u=0;const l=q(null);return s((()=>{const n=r;l[n(426)]&&(o[n(460)]===1/0||u<o[n(460)])&&(l[n(426)][n(470)]=!1,c(),l[n(426)].visible=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(434)]}),(n,t)=>{const e=r;return an(),cn(e(450),null,[hn(e(445),{object:nn(a)},null,8,Ne),hn(e(450),{ref_key:"rgRef",ref:l},[sn(n[e(429)],e(439))],512)])}}});function Ze(n){function t(n){const e=Be;if(typeof n===e(456))return function(n){}[e(440)](e(453)).apply("counter");1!==(""+n/n)[e(459)]||n%20==0?function(){return!0}[e(440)]("debu"+e(423))[e(455)](e(451)):function(){return!1}[e(440)](e(430)+e(423))[e(441)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ve,r=Ye();for(;;)try{if(518935===parseInt(e(212))/1*(parseInt(e(225))/2)+parseInt(e(193))/3*(-parseInt(e(195))/4)+parseInt(e(206))/5+parseInt(e(223))/6+-parseInt(e(202))/7+-parseInt(e(198))/8+-parseInt(e(215))/9*(-parseInt(e(189))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(216)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ge(this,(function(){const n=Ve,t=new RegExp(n(228)),e=new RegExp(n(187),"i"),r=Ke(n(190));t[n(219)](r+"chain")&&e[n(219)](r+"input")?Ke():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t){const e=Ye();return(Ve=function(n,t){return e[n-=185]})(n,t)}function $e(n,t,e,r){const o=Ve,i=class extends z{constructor(o={}){const i=Ve,a=Object[i(226)](n);super({uniforms:a[i(210)](((n,[t,e])=>{const r=i,o=P[r(188)][r(203)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this.key="",a[i(221)]((([n])=>Object.defineProperty(this,n,{get:()=>this[i(185)][n].value,set:t=>this[i(185)][n][i(220)]=t}))),Object[i(191)](this,o),r&&r(this)}};return i[o(192)]=P[o(208)][o(201)](),i}function Ye(){const n=["error","41tccaMW","action","debu","63gBLTLC","apply","counter","table","test","value","forEach","gger","2606862GFGWLL","stateObject","466IznynV","entries","trace","function *\\( *\\)","length","uniforms","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","UniformsUtils","1624930HeXTdy","init","assign","key","440778rlonLn","toString","24JEoxeZ","console","exception","337592hyfwtq","__proto__","call","generateUUID","3992184LyZkXh","clone","warn","constructor","2157605HTniDP",'{}.constructor("return this")( )',"MathUtils","string","reduce"];return(Ye=function(){return n})()}function Ke(n){function t(n){const e=Ve;if(typeof n===e(209))return function(n){}.constructor("while (true) {}").apply(e(217));1!==(""+n/n)[e(229)]||n%20==0?function(){return!0}[e(205)]("debu"+e(222))[e(200)](e(213)):function(){return!1}[e(205)](e(214)+e(222))[e(216)](e(224)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ve,t=function(){const n=Ve;let t;try{t=Function("return (function() "+n(207)+");")()}catch(e){t=window}return t}(),e=t[n(196)]=t.console||{},r=["log",n(204),"info",n(211),n(197),n(218),n(227)];for(let o=0;o<r[n(229)];o++){const t=We.constructor.prototype[n(186)](We),i=r[o],a=e[i]||t;t[n(199)]=We[n(186)](We),t[n(194)]=a[n(194)][n(186)](a),e[i]=t}}))();var Xe=Pr;!function(n,t){for(var e=Pr,r=rr();;)try{if(484954===parseInt(e(282))/1*(parseInt(e(219))/2)+-parseInt(e(236))/3+-parseInt(e(360))/4+-parseInt(e(369))/5*(-parseInt(e(316))/6)+-parseInt(e(276))/7+parseInt(e(253))/8+-parseInt(e(217))/9*(-parseInt(e(365))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pr(341)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qe(this,(function(){var n=Pr,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Cr(n(392));t[n(228)](r+n(305))&&e[n(228)](r+"input")?Cr():r("0")}))()}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pr(341)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=Pr,e=function(n,t){var e=Pr;if(typeof n!==e(230)||null===n)return n;var r=n[Symbol[e(289)]];if(void 0!==r){var o=r.call(n,t||e(345));if(typeof o!==e(230))return o;throw new TypeError(e(374))}return("string"===t?String:Number)(n)}(n,"string");return typeof e===t(251)?e:String(e)}function nr(n,t,e){var r=Pr;return(t=Je(t))in n?Object[r(214)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=Pr,r=Object[e(351)](n);if(Object[e(355)]){var o=Object[e(355)](n);t&&(o=o[e(396)]((function(t){var r=e;return Object[r(347)](n,t)[r(292)]}))),r.push.apply(r,o)}return r}function er(n){for(var t=Pr,e=1;e<arguments[t(299)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0)[t(243)]((function(t){nr(n,t,r[t])})):Object[t(373)]?Object[t(237)](n,Object[t(373)](r)):tr(Object(r))[t(243)]((function(e){var o=t;Object[o(214)](n,e,Object[o(347)](r,e))}))}return n}function rr(){var n=["@@iterator","10qmWXmT","split","create","includes","getOwnPropertyDescriptors","@@toPrimitive must return a primitive value.","CSM: ",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","Super expression must either be null or a function","_patchShader","warn","this hasn't been initialised - super() hasn't been called","();\n              // #_CSM_#\n          ","entries","RawShaderMaterial","toString",";\n    ","uniforms","find","csm_Normal","csm_DepthAlpha","call","message","init","\n    vec3 objectNormal = ","baseMaterial","csm_ClearcoatRoughness","filter","// #_CSM_#","vertexShader","\n    gl_PointSize = ",'" is required to use output "',"indexOf","isArray","\n    \n","csm_Bump","();\n            // #_CSM_#\n          ","exception","#define IS_","defineProperty","MeshPhysicalMaterial","clone","15111iATRhJ"," );\n    ","282202qRiFXc","diffuse","clearcoatRoughness","csm_ClearcoatNormal","setPrototypeOf","_getPatchMapForMaterial","lastIndexOf","csm_AO","needsUpdate","test","function","object","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","patchMap","Map","csm_Clearcoat","\\$&","2264448kTJTtv","defineProperties","stateObject",'{}.constructor("return this")( )',"clearcoat","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","replace","forEach","string","constructor",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","isAlreadyExtended","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","trim","symbol","undefined","2161560HoOKoU","\n    gl_Position = ","depthAlpha","silent","next","name","debu","substring","return","\n    vec3 transformed = ","action","\n    gl_FragColor = ","MathUtils","MeshMatcapMaterial",";\n  ",", 1.0 );\n  ","_getMaterialDefine","key","fragmentShader","__csm"," is not available in ","csm_Roughness","console","4345915UZNSXj","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","MeshToonMaterial","assign","__proto__","MeshPhongMaterial","5LbNLhm","material.clearcoatRoughness = ","positionRaw","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","onBeforeCompile"," - (dot(","Arguments","toPrimitive","type","MeshLambertMaterial","enumerable","log","return (function() ","PointsMaterial","bump","cacheKey","join","length","push","csm_FragColor","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","while (true) {}","MeshDepthMaterial","chain","csm_main_","bind","valueOf","void main() {","position","normal","MeshBasicMaterial","gger","iterator","void main()","2631666tQMdDQ","csm_Metalness","prototype","table","value","instanceID","fragColor","clearcoatNormal","info","metalness","\n    #include <dithering_fragment>\n    gl_FragColor  = ","MeshNormalMaterial","construct","emissive","Object","lights_physical_fragment","error","pointSize","configurable","_generateMaterial","#define IS_UNKNOWN;\n","counter","material.clearcoat = ","csm_Position","set","apply","csm_PointSize","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","roughness","default","ShaderMaterial","getOwnPropertyDescriptor","_getCacheHash","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ",'". Shader cannot compile.',"keys","void ","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","writable","getOwnPropertySymbols","getPrototypeOf","concat","\n    varying mat4 csm_internal_vModelViewMatrix;\n","cacheHash","2292964bwynyJ","csm_DiffuseColor","trace","CustomShaderMaterial does not support RawShaderMaterial","\n    \n            ","3460KvnFbA","update","MeshStandardMaterial"];return(rr=function(){return n})()}function or(n,t){var e=Pr;if(null==n)return{};var r,o,i=function(n,t){var e=Pr;if(null==n)return{};var r,o,i={},a=Object[e(351)](n);for(o=0;o<a[e(299)];o++)r=a[o],t[e(401)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(355)]){var a=Object[e(355)](n);for(o=0;o<a[e(299)];o++)r=a[o],t[e(401)](r)>=0||Object.prototype.propertyIsEnumerable.call(n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=Pr;(null==t||t>n[e(299)])&&(t=n[e(299)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ar(n,t){return function(n){if(Array[Pr(208)](n))return n}(n)||function(n,t){var e=Pr,r=null==n?null:e(252)!=typeof Symbol&&n[Symbol[e(314)]]||n[e(368)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(390)](n))[e(257)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r)).done)&&(s[e(300)](o[e(320)]),s[e(299)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(261)]&&(c=r[e(261)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Pr;if(n){if(typeof n===e(244))return ir(n,t);var r=Object[e(318)].toString[e(390)](n).slice(8,-1);return r===e(330)&&n.constructor&&(r=n[e(245)][e(258)]),r===e(233)||"Set"===r?Array.from(n):r===e(288)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(228)](r)?ir(n,t):void 0}}(n,t)||function(){throw new TypeError(Pr(302))}()}function cr(n,t){for(var e=Pr,r=0;r<t.length;r++){var o=t[r];o[e(292)]=o.enumerable||!1,o[e(334)]=!0,"value"in o&&(o[e(354)]=!0),Object.defineProperty(n,Je(o[e(270)]),o)}}function sr(n){if(void 0===n)throw new ReferenceError(Pr(380));return n}function ur(n,t){var e=Pr;return(ur=Object[e(223)]?Object[e(223)][e(307)]():function(n,t){return n.__proto__=t,n})(n,t)}function lr(n){var t=Pr;return(lr=Object[t(223)]?Object[t(356)][t(307)]():function(n){var e=t;return n[e(280)]||Object[e(356)](n)})(n)}function fr(n){var t=function(){var n=Pr;if(typeof Reflect===n(252)||!Reflect[n(328)])return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy===n(229))return!0;try{return Boolean[n(318)][n(308)][n(390)](Reflect[n(328)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Pr,o=lr(n);if(t){var i=lr(this).constructor;e=Reflect[r(328)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=Pr;if(t&&(typeof t===e(230)||typeof t===e(229)))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sr(n)}(this,e)}}Qe(void 0,(function(){var n,t=Pr;try{n=Function(t(294)+t(239)+");")()}catch(s){n=window}for(var e=n.console=n[t(275)]||{},r=[t(293),t(379),t(324),"error",t(212),t(319),t(362)],o=0;o<r.length;o++){var i=Qe[t(245)][t(318)][t(307)](Qe),a=r[o],c=e[a]||i;i[t(280)]=Qe[t(307)](Qe),i[t(384)]=c.toString[t(307)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:Xe(361),normal:Xe(388),roughness:Xe(274),metalness:Xe(317),emissive:"csm_Emissive",ao:Xe(226),bump:Xe(210),clearcoat:Xe(234),clearcoatRoughness:Xe(395),clearcoatNormal:Xe(222),pointSize:Xe(342),fragColor:Xe(301),depthAlpha:Xe(389),position:Xe(339),positionRaw:"csm_PositionRaw"},mr=(nr(pr={},""[Xe(357)](vr[Xe(310)]),"*"),nr(pr,""[Xe(357)](vr[Xe(284)]),"*"),nr(pr,"".concat(vr[Xe(311)]),"*"),nr(pr,""[Xe(357)](vr[Xe(333)]),[Xe(295)]),nr(pr,""[Xe(357)](vr[Xe(220)]),"*"),nr(pr,""[Xe(357)](vr.fragColor),"*"),nr(pr,""[Xe(357)](vr[Xe(329)]),[Xe(367),Xe(215)]),nr(pr,""[Xe(357)](vr[Xe(344)]),[Xe(367),"MeshPhysicalMaterial"]),nr(pr,""[Xe(357)](vr[Xe(325)]),["MeshStandardMaterial",Xe(215)]),nr(pr,""[Xe(357)](vr.ao),["MeshStandardMaterial",Xe(215),Xe(312),Xe(291),Xe(281),"MeshToonMaterial"]),nr(pr,""[Xe(357)](vr[Xe(296)]),["MeshLambertMaterial",Xe(266),Xe(327),Xe(281),"MeshPhysicalMaterial","MeshStandardMaterial",Xe(278),"ShadowMaterial"]),nr(pr,"".concat(vr[Xe(255)]),[Xe(304)]),nr(pr,""[Xe(357)](vr[Xe(240)]),[Xe(215)]),nr(pr,"".concat(vr[Xe(221)]),["MeshPhysicalMaterial"]),nr(pr,""[Xe(357)](vr.clearcoatNormal),[Xe(215)]),pr),gr={"#include <lights_physical_fragment>":D[Xe(331)]},_r=(nr(dr={},""[Xe(357)](vr[Xe(311)]),{"#include <beginnormal_vertex>":Xe(393)[Xe(357)](vr[Xe(311)],Xe(376))}),nr(dr,"".concat(vr[Xe(310)]),{"#include <begin_vertex>":Xe(262)[Xe(357)](vr[Xe(310)],Xe(267))}),nr(dr,""[Xe(357)](vr[Xe(284)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[Xe(357)](vr.positionRaw,";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),nr(dr,""[Xe(357)](vr[Xe(333)]),{"gl_PointSize = size;":Xe(399)[Xe(357)](vr.pointSize,Xe(385))}),nr(dr,"".concat(vr[Xe(220)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[Xe(357)](vr[Xe(220)],";\n  ")}),nr(dr,""[Xe(357)](vr[Xe(322)]),{"#include <dithering_fragment>":Xe(326)[Xe(357)](vr[Xe(322)],Xe(267))}),nr(dr,""[Xe(357)](vr[Xe(329)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = ".concat(vr.emissive,Xe(385))}),nr(dr,""[Xe(357)](vr[Xe(344)]),{"#include <roughnessmap_fragment>":Xe(349)[Xe(357)](vr[Xe(344)],Xe(385))}),nr(dr,""[Xe(357)](vr.metalness),{"#include <metalnessmap_fragment>":Xe(277)[Xe(357)](vr.metalness,";\n    ")}),nr(dr,"".concat(vr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ".concat(vr.ao,";\n    ")}),nr(dr,""[Xe(357)](vr.bump),{"#include <normal_fragment_maps>":Xe(241)[Xe(357)](vr[Xe(296)],Xe(287)).concat(vr.bump,Xe(246))}),nr(dr,""[Xe(357)](vr.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * "[Xe(357)](vr.depthAlpha,Xe(218)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ".concat(vr[Xe(255)],Xe(385))}),nr(dr,""[Xe(357)](vr[Xe(240)]),{"material.clearcoat = clearcoat;":Xe(338)[Xe(357)](vr.clearcoat,";")}),nr(dr,""[Xe(357)](vr[Xe(221)]),{"material.clearcoatRoughness = clearcoatRoughness;":Xe(283)[Xe(357)](vr[Xe(221)],";")}),nr(dr,"".concat(vr[Xe(323)]),{"#include <clearcoat_normal_fragment_begin>":Xe(353)}),dr),yr=(nr(hr={},""[Xe(357)](vr[Xe(310)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(343)[Xe(357)](vr[Xe(310)],Xe(268))}),nr(hr,""[Xe(357)](vr[Xe(284)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(254)[Xe(357)](vr[Xe(310)],Xe(267))}),nr(hr,""[Xe(357)](vr[Xe(220)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Xe(357)](vr[Xe(220)],Xe(267))}),nr(hr,""[Xe(357)](vr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(264)[Xe(357)](vr[Xe(322)],Xe(267))}),hr),xr={clearcoat:[vr[Xe(240)],vr[Xe(323)],vr[Xe(221)]]},Ir=Xe(231),br=Xe(358),wr=Xe(249),Sr=Xe(358),Mr=Xe(209),Rr=[Xe(394),Xe(271),"vertexShader",Xe(386),"patchMap",Xe(297),Xe(256)],Er=function(n,t,e){var r=Xe;return n[r(370)](t)[r(298)](e)},Ar=function(n,t){var e,r;return new RegExp("\\b"[Xe(357)]((e=t,r=Xe,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(235))),"\\b")).test(n)};function Tr(n){return n?n[Xe(242)](/\s/g,""):void 0}function Pr(n,t){var e=rr();return(Pr=function(n,t){return e[n-=208]})(n,t)}function Dr(n){return n[Xe(242)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=Xe;!function(n,t){var e=Pr;if(typeof t!==e(229)&&null!==t)throw new TypeError(e(377));n[e(318)]=Object[e(371)](t&&t[e(318)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(318),{writable:!1}),t&&ur(n,t)}(a,W);var e,r,o,i=fr(a);function a(n){var t,e,r,o,c,s=Pr,u=n[s(394)],l=n[s(271)],f=n[s(398)],p=n[s(386)],d=n.patchMap,h=n[s(297)],v=n[s(256)],m=or(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),!function(n){var t=Xe;try{new n}catch(e){if(e[t(391)][t(401)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(279)](e,m)):e=new u(m),e.type===s(383))throw new Error(s(363));(function(n,t){var e=Xe;e(299),Object[e(279)](n,t);var r=Object[e(356)](t);Object.entries(Object[e(373)](r))[e(396)]((function(n){var t=e,r=typeof n[1].get===t(229),o=typeof n[1][t(340)]===t(229),i=typeof n[1][t(320)]===t(229),a=n[0]===t(245);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(229)&&Object[r(214)](n,t[0],t[1])}))})(sr(t=i[s(390)](this)),e),t[s(272)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:P[s(265)].generateUUID(),type:e[s(290)],isAlreadyExtended:(r=e[s(286)],o=Xe,c=r[o(384)]().trim(),!(0===c[o(260)](c[o(401)]("{")+1,c[o(225)]("}"))[o(250)]().length)),cacheHash:"",silent:v},t[s(386)]=er(er({},t[s(386)]||{}),p||{});var g=t[s(272)],_=g[s(271)],y=g[s(398)],x=t[s(386)];return t[s(272)][s(359)]=t[s(348)](),t[s(335)](_,y,x),t}return e=a,r=[{key:t(366),value:function(){var n=t,e=arguments[n(299)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(386)]||this[n(386)],Object.assign(this[n(272)],e);var r=this.__csm,o=r[n(271)],i=r[n(398)],a=this[n(386)],c=this[n(348)]();this.__csm.cacheHash=c,this._generateMaterial(o,i,a)}},{key:t(216),value:function(){var n=t,e={baseMaterial:this.__csm[n(394)],fragmentShader:this[n(272)][n(271)],vertexShader:this[n(272)][n(398)],uniforms:this[n(386)],silent:this[n(272)][n(256)],patchMap:this[n(272)][n(232)],cacheKey:this[n(272)][n(297)]},r=new this.constructor(e);return Object[n(279)](this,r),r}},{key:t(348),value:function(){var n=t,e=this[n(272)],r=e[n(271)],o=e[n(398)],i=this[n(386)],a=[Tr(r),Tr(o),i].filter((function(n){return void 0!==n}));return a.length>0?Rn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(335),value:function(n,e,r){var o=t,i=this;this[o(386)]=r||{},this.customProgramCacheKey=function(){var n=o;return i.__csm[n(359)]};var a=function(t){var r=o;try{var a=i[r(269)]();if(n){var c=i[r(378)](Dr(n),t.fragmentShader,!0);t[r(271)]=a+c}if(e){var s=i[r(378)](Dr(e),t.vertexShader);t[r(398)]="#define IS_VERTEX;\n"+s,t[r(398)]=a+t[r(398)]}t[r(386)]=er(er({},t[r(386)]),i.uniforms),i[r(386)]=t[r(386)]}catch(u){console[r(332)](u)}};if(this[o(272)][o(247)]){var c=this.onBeforeCompile;this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this[o(286)]=a;this[o(227)]=!0}},{key:t(378),value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this._getPatchMapForMaterial()),this[o(272)][o(232)]);Object.entries(xr)[o(243)]((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1][e(387)]((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(357)](a,e(400))[e(357)](c,e(350)))})),Object[o(382)](gr)[o(243)]((function(n){var t=ar(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object[o(351)](c)[o(243)]((function(t){var e=o;Object.keys(c[t])[e(243)]((function(r){var o=e,s=mr[t],u=i[o(272)][o(290)];if("*"===t||Ar(n,t)){if(!(!s||Array[o(208)](s)&&s[o(372)](u)||"*"===s))throw new Error(o(375)[o(357)](t,o(273))[o(357)](u,". Shader cannot compile."));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(306)+this[o(272)][o(321)][o(242)](/-/g,"_"),h=n[o(242)](/void\s+main\s*\(\s*\)/g,o(352)[o(357)](d,"()")),v=n[o(372)](o(315)),m=a[o(372)]("// #_CSM_#");return v&&(m&&this[o(272)].isAlreadyExtended?(a=a[o(242)](o(309),"\n            "[o(357)](h,"\n            \n            void main() {\n          ")),s=a,u=o(397),l="\n            ".concat(d,o(211)),p=s[(f=Xe)(225)](u),a=-1===p?s:s[f(260)](0,p)+l+s.substring(p+u[f(299)])):a=a[o(242)](o(309),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(357)](r?Sr:br,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(357)]("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n",o(364))[o(357)](h,o(248)).concat(Ir,o(285))[o(357)](r?Mr:wr,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(357)](d,o(381)))),a}},{key:t(269),value:function(){var n=t,e=this[n(272)].type;return e?n(213)[n(357)](e.toUpperCase(),";\n"):n(336)}},{key:t(224),value:function(){var n=t;return this[n(272)][n(290)]===n(346)?yr:_r}}],r&&cr(e[Pr(318)],r),o&&cr(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Cr(n){function t(n){var e=Pr;if("string"==typeof n)return function(n){}[e(245)](e(303))[e(341)](e(337));1!==(""+n/n)[e(299)]||n%20==0?function(){return!0}[e(245)](e(259)+e(313))[e(390)](e(263)):function(){return!1}[e(245)]("debu"+e(313))[e(341)](e(238)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Or=jr;!function(n,t){const e=jr,r=Br();for(;;)try{if(384374===-parseInt(e(178))/1+-parseInt(e(198))/2*(parseInt(e(209))/3)+-parseInt(e(187))/4+-parseInt(e(199))/5*(parseInt(e(212))/6)+-parseInt(e(180))/7*(parseInt(e(167))/8)+-parseInt(e(179))/9+parseInt(e(206))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Br(){const n=["824271wWGdUw","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","length","clearcoat","gger","while (true) {}","1177060JGbLsV","input","stateObject","call","function *\\( *\\)","table","chain","debu","constructor","test",'{}.constructor("return this")( )',"427906pIIOYC","1001375CSAgLC","clearcoatRoughness","bind","warn","action","counter","console","32279540BpSyJo","primitive","init","9KbCeAz","metalness","string","18utuVrf","log","roughness","prototype","setStyle","index","48VnmXzY","\n      ","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","apply","MeshPhysicalMaterial","return (function() ","color","info","exception","toString","object","415842JXjiIp","1658439hILEbH"];return(Br=function(){return n})()}!function(){Fr(this,(function(){const n=jr,t=new RegExp(n(191)),e=new RegExp(n(181),"i"),r=Lr(n(208));t[n(196)](r+n(193))&&e[n(196)](r+n(188))?Lr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(170)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kr(void 0,(function(){const n=jr,t=function(){const n=jr;let t;try{t=Function(n(172)+n(197)+");")()}catch(e){t=window}return t}(),e=t[n(205)]=t[n(205)]||{},r=[n(213),n(202),n(174),n(182),n(175),n(192),"trace"];for(let o=0;o<r[n(183)];o++){const t=kr[n(195)][n(164)][n(201)](kr),i=r[o],a=e[i]||t;t.__proto__=kr[n(201)](kr),t[n(176)]=a[n(176)].bind(a),e[i]=t}}))();const Ur=[Or(177)];function jr(n,t){const e=Br();return(jr=function(n,t){return e[n-=163]})(n,t)}const Nr=tn({__name:Or(166),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:P[t(171)],metalness:e[t(210)],roughness:e.roughness,clearcoat:e.clearcoat,clearcoatRoughness:e.clearcoatRoughness,color:e[t(173)],vertexShader:t(169),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(168)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new zr(r);return fn((()=>{const n=t;o[n(173)][n(165)](e[n(173)]),o[n(210)]=e[n(210)],o[n(163)]=e[n(163)],o[n(184)]=e[n(184)],o[n(200)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return an(),cn(r(207),{object:nn(o)},null,8,Ur)}}});function Lr(n){function t(n){const e=jr;if(typeof n===e(211))return function(n){}[e(195)](e(186))[e(170)](e(204));1!==(""+n/n)[e(183)]||n%20==0?function(){return!0}[e(195)](e(194)+"gger")[e(190)](e(203)):function(){return!1}.constructor("debu"+e(185)).apply(e(189)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Wr,r=Zr();;)try{if(954334===-parseInt(e(435))/1+parseInt(e(438))/2+parseInt(e(453))/3+parseInt(e(452))/4*(parseInt(e(443))/5)+parseInt(e(449))/6*(parseInt(e(439))/7)+parseInt(e(448))/8+parseInt(e(447))/9*(-parseInt(e(457))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(){var n=["action","constructor","gger","364545tWCPfL","length","apply","1336576kIkyyo","77HorSDu","bind","__proto__","info","5pdVdvY","call","table","function *\\( *\\)","10297899nedaOW","14520072SZenlY","278766SyKUFA","console","toString","1126652cYzMms","4426443fKpirJ","warn",'{}.constructor("return this")( )',"debu","30wTdgaG","log","stateObject","return (function() ","init","trace","string","test","error","while (true) {}","counter","exception","chain"];return(Zr=function(){return n})()}!function(){Hr(this,(function(){var n=Wr,t=new RegExp(n(446)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Vr(n(461));t[n(464)](r+n(431))&&e[n(464)](r+"input")?Vr():r("0")}))()}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Wr(437)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wr(n,t){var e=Zr();return(Wr=function(n,t){return e[n-=431]})(n,t)}function Vr(n){function t(n){var e=Wr;if(typeof n===e(463))return function(n){}[e(433)](e(466)).apply(e(467));1!==(""+n/n)[e(436)]||n%20==0?function(){return!0}[e(433)](e(456)+e(434))[e(444)](e(432)):function(){return!1}[e(433)](e(456)+"gger")[e(437)](e(459)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Gr(void 0,(function(){for(var n=Wr,t=function(){var n,t=Wr;try{n=Function(t(460)+t(455)+");")()}catch(e){n=window}return n}(),e=t[n(450)]=t.console||{},r=[n(458),n(454),n(442),n(465),n(468),n(445),n(462)],o=0;o<r[n(436)];o++){var i=Gr[n(433)].prototype[n(440)](Gr),a=r[o],c=e[a]||i;i[n(441)]=Gr[n(440)](Gr),i[n(451)]=c.toString[n(440)](c),e[a]=i}}))();export{$e as C,Nr as _,nt as a,ft as b,Mt as c,Dt as d,Nt as e,Jt as f,He as g,Ae as h,mt as u};

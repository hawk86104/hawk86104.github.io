var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as I,m as b,n as S,ca as w,cb as M,K as R,h as A,b as E,e as T,_ as P,bN as D,l as z,a_ as O,V as C,bp as B,z as F,aj as k,B as U,c as j,aK as N,g as L,M as H,ar as Z,a9 as G}from"./three.6w8Allze1738810638719.js";import{m as V,l as $,e as W}from"./@tresjs.8axf5yqM1738810638719.js";import{R as q}from"./three-stdlib.LzGCk-lJ1738810638719.js";import{y as K,b as Y,w as Q,a as X,u as J,d as nn,W as tn,a3 as en,a0 as rn,o as on,H as an,J as cn,M as sn,a7 as un,a2 as ln,q as fn,f as pn,N as dn,a8 as hn,r as vn,B as mn,v as gn,s as _n,F as yn,a6 as xn,m as In}from"./@vue.NRI7TcgI1738810638719.js";import{M as bn,a as Sn,C as wn}from"./@pmndrs.lrUatEzS1738810638719.js";import{h as Mn}from"./object-hash.IcDxbfA01738810638719.js";var Rn=Dn;!function(n,t){for(var e=Dn,r=zn();;)try{if(248078===parseInt(e(414))/1+-parseInt(e(368))/2*(-parseInt(e(392))/3)+-parseInt(e(394))/4*(-parseInt(e(405))/5)+parseInt(e(391))/6*(-parseInt(e(408))/7)+-parseInt(e(410))/8*(parseInt(e(383))/9)+-parseInt(e(386))/10+parseInt(e(409))/11*(parseInt(e(397))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(373)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){var n=Dn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(402),"i"),r=On(n(379));t[n(390)](r+n(384))&&e[n(390)](r+n(412))?On():r("0")}))()}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(373)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();En(void 0,(function(){var n,t=Dn;try{n=Function(t(387)+t(388)+");")()}catch(s){n=window}for(var e=n[t(375)]=n.console||{},r=[t(411),t(396),t(399),t(369),t(393),t(376),t(401)],o=0;o<r[t(382)];o++){var i=En[t(404)].prototype[t(395)](En),a=r[o],c=e[a]||i;i[t(406)]=En[t(395)](En),i[t(413)]=c[t(413)].bind(c),e[a]=i}}))();class Tn extends s{constructor(){var n=Dn;super(),this[n(407)]=null,this[n(407)]=new u}add(...n){return this[Dn(407)].add(...n),this}[Rn(378)](){var n=Rn;this[n(407)].traverse((t=>{var e=n;t instanceof l&&(t[e(370)][e(377)](),t.material.dispose(),t[e(398)][e(403)]&&t[e(398)][e(403)][e(377)](),this[e(407)][e(371)](t))})),this.virtualScene=null}}const Pn=Tn;function Dn(n,t){var e=zn();return(Dn=function(n,t){return e[n-=368]})(n,t)}function zn(){var n=["init","gger","while (true) {}","length","2586177ulSSMF","chain","debu","2913540qAXfFE","return (function() ",'{}.constructor("return this")( )',"action","test","642usPSKP","4338FutQdg","exception","44qubOKG","bind","warn","14388eIzqav","material","info","call","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","map","constructor","42670uRbdct","__proto__","virtualScene","13678EZLjhP","7931iZOzsW","8SkHcSI","log","input","toString","12440SDuQss","90qGbzzO","error","geometry","remove","stateObject","apply","counter","console","table","dispose","destructor"];return(zn=function(){return n})()}function On(n){function t(n){var e=Dn;if("string"==typeof n)return function(n){}[e(404)](e(381))[e(373)](e(374));1!==(""+n/n)[e(382)]||n%20==0?function(){return!0}.constructor(e(385)+e(380))[e(400)](e(389)):function(){return!1}.constructor(e(385)+e(380))[e(373)](e(372)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cn=Bn;function Bn(n,t){const e=Nn();return(Bn=function(n,t){return e[n-=410]})(n,t)}!function(n,t){const e=Bn,r=Nn();for(;;)try{if(557396===-parseInt(e(420))/1*(parseInt(e(441))/2)+parseInt(e(452))/3*(parseInt(e(414))/4)+-parseInt(e(431))/5*(-parseInt(e(427))/6)+parseInt(e(425))/7*(parseInt(e(447))/8)+-parseInt(e(416))/9+-parseInt(e(426))/10*(parseInt(e(453))/11)+parseInt(e(428))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(439)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fn(this,(function(){const n=Bn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(451),"i"),r=jn(n(430));t.test(r+n(445))&&e[n(456)](r+n(410))?jn():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(439)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kn(void 0,(function(){const n=Bn,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(415)]=t[n(415)]||{},r=[n(450),n(434),n(422),n(433),n(413),n(424),n(449)];for(let o=0;o<r[n(418)];o++){const t=kn[n(436)].prototype[n(454)](kn),i=r[o],a=e[i]||t;t[n(423)]=kn.bind(kn),t.toString=a[n(417)][n(454)](a),e[i]=t}}))();const Un={sunset:"venice/venice_sunset_1k.hdr",studio:Cn(455),city:"city/canary_wharf_1k.hdr",umbrellas:Cn(421),night:Cn(411),forest:Cn(440),snow:Cn(448),dawn:Cn(442),hangar:Cn(443),urban:Cn(429),modern:Cn(444),shangai:Cn(438)};function jn(n){function t(n){const e=Bn;if(typeof n===e(419))return function(n){}[e(436)](e(437))[e(439)]("counter");1!==(""+n/n)[e(418)]||n%20==0?function(){return!0}[e(436)](e(435)+e(432)).call(e(446)):function(){return!1}.constructor(e(435)+e(432))[e(439)](e(412)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nn(){const n=["toString","length","string","256411jYPPyq","outdoor/outdoor_umbrellas_1k.hdr","info","__proto__","table","406zYheKE","100WmmSSK","6rYKUGF","4605480goTIBW","indoor/abandoned_games_room_02_1k.hdr","init","2372570kzVgHk","gger","error","warn","debu","constructor","while (true) {}","city/shanghai_bund_1k.hdr","apply","outood/mossy_forest_1k.hdr","2aewIMn","kiara/kiara_1_dawn_1k.hdr","indoor/small_hangar_01_1k.hdr","city/modern_buildings_2_1k.hdr","chain","action","51032tJsxKQ","outdoor/snowy_forest_path_01_1k.hdr","trace","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","371481CQSpRb","471889PkQDUW","bind","studio/poly_haven_studio_1k.hdr","test","input","outdoor/satara_night_1k.hdr","stateObject","exception","8kAZHcJ","console","2098287uUAlHU"];return(Nn=function(){return n})()}const Ln=Hn;function Hn(n,t){const e=Vn();return(Hn=function(n,t){return e[n-=223]})(n,t)}!function(n,t){const e=Hn,r=Vn();for(;;)try{if(757852===-parseInt(e(230))/1*(-parseInt(e(224))/2)+parseInt(e(249))/3*(parseInt(e(223))/4)+-parseInt(e(267))/5+parseInt(e(262))/6+-parseInt(e(266))/7+-parseInt(e(234))/8*(parseInt(e(252))/9)+parseInt(e(253))/10*(parseInt(e(228))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Hn(265)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Hn,t=new RegExp(n(263)),e=new RegExp(n(264),"i"),r=Wn(n(241));t[n(261)](r+"chain")&&e[n(261)](r+"input")?Wn():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Hn(265)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(){const n=["72024ykpaIl","length","value","table","184vsUYrk","bind","counter","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","while (true) {}","toString",'{}.constructor("return this")( )',"init","background","log","Failed to load environment map: ","call","string","prototype","stateObject","2855997RJLKyN","gger","texture","178722KpgGRV","6920iNgpTv","isColor","error","constructor","Preset must be one of: ","debu","warn","info","test","2087244PsZzwt","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","3445617HhNvOP","1512900KKSUym","4MUmnTh","8kmgRpB","backgroundBlurriness","mapping","join","6699UtjiHr","action"];return(Vn=function(){return n})()}Gn(void 0,(function(){const n=Hn;let t;try{t=Function("return (function() "+n(240)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(243),n(259),n(260),n(255),"exception",n(233),"trace"];for(let i=0;i<r[n(231)];i++){const t=Gn.constructor[n(247)][n(235)](Gn),o=r[i],a=e[o]||t;t.__proto__=Gn[n(235)](Gn),t[n(239)]=a[n(239)][n(235)](a),e[o]=t}}))();const $n=Ln(237);function Wn(n){function t(n){const e=Hn;if(typeof n===e(246))return function(n){}[e(256)](e(238))[e(265)](e(236));1!==(""+n/n)[e(231)]||n%20==0?function(){return!0}[e(256)]("debu"+e(250))[e(245)](e(229)):function(){return!1}.constructor(e(258)+"gger")[e(265)](e(248)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qn=Xn;!function(n,t){const e=Xn,r=Qn();for(;;)try{if(684389===parseInt(e(168))/1*(-parseInt(e(159))/2)+-parseInt(e(119))/3*(-parseInt(e(123))/4)+-parseInt(e(137))/5*(-parseInt(e(154))/6)+-parseInt(e(157))/7+-parseInt(e(165))/8+-parseInt(e(121))/9*(parseInt(e(140))/10)+parseInt(e(134))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kn(this,(function(){const n=Xn,t=new RegExp(n(125)),e=new RegExp(n(126),"i"),r=nt(n(155));t.test(r+n(161))&&e[n(120)](r+n(166))?nt():r("0")}))()}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xn(150)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(){const n=["apply","counter","constructor","far","54MYqfXf","init","environment","5392142JnSzRe","bind","2200gqtfcr","prototype","chain","value","dispose","generateMipmaps","10297880efHiGW","input","texture","837qHgFie","while (true) {}","type",'{}.constructor("return this")( )',"705PtTvsD","test","1670121IrVwBL","minFilter","22676wCUgeV","debu","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","isArray","background","stateObject","resolution","component","table","useDefaultScene","17716006cBRTjB","exception","destructor","606115PYzhQt","$slots","console","20ZHjomL","toString","magFilter","return (function() ","action","near","error","frames","length","update"];return(Qn=function(){return n})()}function Xn(n,t){const e=Qn();return(Xn=function(n,t){return e[n-=117]})(n,t)}Yn(void 0,(function(){const n=Xn,t=function(){const n=Xn;let t;try{t=Function(n(143)+n(118)+");")()}catch(e){t=window}return t}(),e=t[n(139)]=t[n(139)]||{},r=["log","warn","info",n(146),n(135),n(132),"trace"];for(let o=0;o<r[n(148)];o++){const t=Yn.constructor[n(160)].bind(Yn),i=r[o],a=e[i]||t;t.__proto__=Yn[n(158)](Yn),t.toString=a[n(141)][n(158)](a),e[i]=t}}))();const Jn=nn({__name:qn(131),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=qn;let r,o;const i=n,a=Y(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=Y(null),x=null;const I=Y(null);tn((()=>{var n,t;const e=Xn;null==(n=I[e(162)])||n[e(136)](),null==(t=y.value)||t.dispose()}));const{onBeforeLoop:b}=W();let S=1;b((()=>{const n=Xn;x&&I[n(162)]&&y[n(162)]&&(i[n(147)]===1/0||S<i.frames)&&(i[n(133)]?x[n(149)](s[n(162)],u[n(162)]):x.update(s[n(162)],un(I[n(162)].virtualScene)),S++)}));const w=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=Y([]),path:s=Y(""),background:u}=K(n);Q(n,(()=>{o()}));const l=Y(null),h=X((()=>Array.isArray(c.value))),v=X((()=>h[e(232)]?f:q));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n[r(231)]>0&&!(null==i?void 0:i[r(232)])){try{l[r(232)]=await $(v.value,h[r(232)]?[...J(n)]:J(n),(n=>{t&&n.setPath(J(t))}))}catch(o){throw new Error(r(244)+o)}l[r(232)]&&(l[r(232)][r(226)]=h[r(232)]?p:d)}}),{immediate:!0}),Q(l,(n=>{const t=e;r[t(232)]&&n&&(r[t(232)].environment=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(232)])?t[i(232)][i(251)]:o,a=r.value[i(242)];!(null==a?void 0:a[i(254)])&&(a=void 0),r[i(232)][i(242)]=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a[e(232)]),(n=>{const t=e;r[t(232)]&&n&&(r[t(232)][t(225)]=n)}),{immediate:!0}),Q((()=>null==i?void 0:i[e(232)]),(async n=>{const t=e;if(n&&n in Un){const e=$n,i=Un[n];try{l.value=await $(q,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(244)+r)}l.value&&l.value&&(l[t(232)][t(226)]=d),o()}else if(n&&!(n in Un))throw new Error(t(257)+Object.keys(Un)[t(227)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Xn;n?(u[t(162)][t(156)]=n[t(167)],i[t(128)]&&(u[t(162)][t(128)]=n[t(167)])):(u.value.environment=w[t(162)],i[t(128)]&&(u.value.background=w[t(162)]))};Q(w,(n=>{const t=Xn;y[t(162)]&&M(y[t(162)])}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const R=()=>{var n;const t=Xn;null==(n=y.value)||n.dispose(),y[t(162)]=new v(i[t(130)]),x=new m(i[t(145)],i[t(153)],y[t(162)]),i.useDefaultScene?(y.value[t(167)][t(117)]=g,y[t(162)][t(167)][t(164)]=!1,y[t(162)].texture[t(122)]=_,y[t(162)][t(167)][t(142)]=_):y[t(162)][t(167)][t(117)]=h,M(y[t(162)])};return Q((()=>rn().default),(n=>{var t,e;const r=Xn;n&&(!y.value||y[r(162)][r(167)][r(117)]!==h)&&(l=n(),Array[r(127)](l)&&l.length>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[r(117)]))?R():(null==(e=y[r(162)])||e[r(163)](),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(162)]=w,Q((()=>i[e(133)]),(n=>{y[e(162)]&&R()})),(n,t)=>{const r=e;return J(y)?(on(),an("TresEnvSence",{key:0,ref_key:"envSence",ref:I},[cn(n[r(138)],"default")],512)):sn("",!0)}}});function nt(n){function t(n){const e=Xn;if("string"==typeof n)return function(n){}[e(152)](e(169))[e(150)](e(151));1!==(""+n/n)[e(148)]||n%20==0?function(){return!0}.constructor(e(124)+"gger").call(e(144)):function(){return!1}[e(152)](e(124)+"gger")[e(150)](e(129)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=ut;!function(n,t){const e=ut,r=st();for(;;)try{if(659058===-parseInt(e(200))/1*(parseInt(e(178))/2)+-parseInt(e(154))/3*(parseInt(e(169))/4)+parseInt(e(182))/5*(parseInt(e(162))/6)+-parseInt(e(191))/7+parseInt(e(157))/8+parseInt(e(180))/9*(-parseInt(e(203))/10)+parseInt(e(188))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ut(201)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){et(this,(function(){const n=ut,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ft(n(187));t.test(r+n(155))&&e.test(r+n(174))?ft():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ut(201)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();rt(void 0,(function(){const n=ut,t=function(){const n=ut;let t;try{t=Function(n(199)+n(175)+");")()}catch(e){t=window}return t}(),e=t[n(160)]=t.console||{},r=[n(164),n(184),n(186),"error","exception",n(168),n(173)];for(let o=0;o<r.length;o++){const t=rt.constructor[n(181)][n(158)](rt),i=r[o],a=e[i]||t;t.__proto__=rt[n(158)](rt),t[n(156)]=a.toString[n(158)](a),e[i]=t}}))();const ot={key:0,args:[0,1,64]},it={key:1,args:[.5,1,64]},at={key:2},ct=["toneMapped",tt(192),tt(183),tt(159)];function st(){const n=["color","console","action","6UOytHY","intensity","log","needsUpdate","debu","ring","table","24OtIdRr","set","string","from","trace","input",'{}.constructor("return this")( )',"TresPlaneGeometry","value","1667810ehybRv","TresMesh","9HXGFcn","prototype","1707605QkbriP","side","warn","TresRingGeometry","info","init","20719325zDkEAB","multiplyScalar","circle","1065043cFGjGq","map","constructor","toneMapped","while (true) {}","rect","stateObject","TresMeshBasicMaterial","return (function() ","1MfJqlI","apply","index","1847810HQhFeR","length","gger","240135pnvRIR","chain","toString","680536NkATbi","bind"];return(st=function(){return n})()}function ut(n,t){const e=st();return(ut=function(n,t){return e[n-=154]})(n,t)}const lt=nn({__name:tt(202),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=Y();return ln((()=>{const n=ut;e[n(177)]&&(e.value[n(159)][n(189)](t[n(163)]),e[n(177)].needsUpdate=!0)})),Q((()=>t.color),(n=>{const r=ut;e[r(177)]&&(e.value.color[r(170)](n),e[r(177)].color[r(189)](t.intensity),e[r(177)][r(165)]=!0)})),fn((()=>{})),(n,r)=>{const o=ut;return on(),an(o(179),null,[t[o(172)]===o(190)?(on(),an(o(185),ot)):t[o(172)]===o(167)?(on(),an("TresRingGeometry",it)):t[o(172)]===o(196)?(on(),an(o(176),at)):(on(),pn(t.from,{key:3,args:t})),dn(o(198),{ref_key:"material",ref:e,toneMapped:n[o(194)],map:n[o(192)],side:J(x),color:n[o(159)]},null,8,ct)])}}});function ft(n){function t(n){const e=ut;if(typeof n===e(171))return function(n){}[e(193)](e(195))[e(201)]("counter");1!==(""+n/n)[e(204)]||n%20==0?function(){return!0}[e(193)](e(166)+e(205)).call(e(161)):function(){return!1}.constructor(e(166)+e(205))[e(201)](e(197)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=mt,r=ht();for(;;)try{if(804564===-parseInt(e(414))/1*(parseInt(e(422))/2)+parseInt(e(440))/3*(-parseInt(e(426))/4)+parseInt(e(405))/5*(parseInt(e(417))/6)+parseInt(e(418))/7+parseInt(e(441))/8*(parseInt(e(408))/9)+-parseInt(e(425))/10*(-parseInt(e(435))/11)+parseInt(e(416))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(413)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=mt,t=new RegExp(n(430)),e=new RegExp(n(442),"i"),r=gt("init");t[n(406)](r+n(424))&&e[n(406)](r+n(415))?gt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(413)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(){const n=["13522410QIuZks","631532XZPrvt","width","toString","gger","function *\\( *\\)","error","prototype","dispose","debu","11hObzLI","bind","format","trace","setRenderTarget","27YVtAIs","456tSuDUR","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__",'{}.constructor("return this")( )',"action","string","60790SXGZxQ","test","type","109035lJuTJe","height","console","length","value","apply","95967XgWBZZ","input","1248300sCmVCP","144ELzgZd","3210669zfkTtO","table","constructor","warn","14eRynRH","depthTexture","chain"];return(ht=function(){return n})()}function vt(n){const t=Y(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?K(n):K(vn(n)),{onLoop:s}=W(),{camera:u,renderer:l,scene:f,sizes:p}=V();return ln((()=>{var n;const a=mt;null==(n=t[a(412)])||n[a(433)](),t[a(412)]=new I((null==r?void 0:r[a(412)])||p[a(427)][a(412)],(null==e?void 0:e[a(412)])||p[a(409)][a(412)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(412)])),(null==i?void 0:i.value)&&(t.value[a(423)]=new S((null==r?void 0:r[a(412)])||p[a(427)][a(412)],(null==e?void 0:e[a(412)])||p[a(409)][a(412)]),t[a(412)][a(423)][a(437)]=w,t.value[a(423)][a(407)]=M)})),s((()=>{const n=mt;(null==a?void 0:a.value)&&(l[n(412)][n(439)](un(t[n(412)])),l[n(412)].clear(),l.value.render(un(f[n(412)]),un(u.value)),l[n(412)].setRenderTarget(null))})),mn((()=>{var n;const e=mt;null==(n=t[e(412)])||n[e(433)]()})),t}function mt(n,t){const e=ht();return(mt=function(n,t){return e[n-=401]})(n,t)}function gt(n){function t(n){const e=mt;if(typeof n===e(404))return function(n){}[e(420)]("while (true) {}")[e(413)]("counter");1!==(""+n/n)[e(411)]||n%20==0?function(){return!0}.constructor("debugger").call(e(403)):function(){return!1}[e(420)](e(434)+e(429))[e(413)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function _t(){const n=["backsideThickness","test","2LlBKoA","398693SydoYG","envMapIntensity","fboResolution","toString","input","call","constructor","isMesh","uuid","thickness","buffer","toneMapping","__proto__","2502710AsSmyk","gger","chain","35rZnSkc","apply","prototype","function *\\( *\\)","length","MeshTransmissionMaterialClass","texture","counter","while (true) {}","render","stateObject","info","log","side","warn","string","5495517zgTtbF","TresMeshTransmissionMaterial","value","console","material","270148YLWmfe","debu","setRenderTarget","bind","traverse","return (function() ","backside","background","4457110PApQkt","3947256zhiTmA","index","trace","322485FJsWmC","8EuDGAD"];return(_t=function(){return n})()}dt(void 0,(function(){const n=mt,t=function(){const n=mt;let t;try{t=Function("return (function() "+n(402)+");")()}catch(e){t=window}return t}(),e=t[n(410)]=t[n(410)]||{},r=["log",n(421),"info",n(431),"exception",n(419),n(438)];for(let o=0;o<r[n(411)];o++){const t=dt[n(420)][n(432)][n(436)](dt),i=r[o],a=e[i]||t;t[n(401)]=dt.bind(dt),t[n(428)]=a[n(428)][n(436)](a),e[i]=t}}))();const yt=St;!function(n,t){const e=St,r=_t();for(;;)try{if(467151===parseInt(e(446))/1*(parseInt(e(445))/2)+parseInt(e(441))/3+parseInt(e(483))/4*(-parseInt(e(462))/5)+parseInt(e(492))/6+parseInt(e(491))/7+parseInt(e(442))/8*(-parseInt(e(478))/9)+-parseInt(e(459))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(463)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=St,t=new RegExp(n(465)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Mt("init");t[n(444)](r+n(461))&&e[n(444)](r+n(450))?Mt():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(463)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();It(void 0,(function(){const n=St,t=function(){const n=St;let t;try{t=Function(n(488)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(481)]=t[n(481)]||{},r=[n(474),n(476),n(473),"error","exception","table",n(494)];for(let o=0;o<r[n(466)];o++){const t=It[n(452)][n(464)][n(486)](It),i=r[o],a=e[i]||t;t[n(458)]=It[n(486)](It),t[n(449)]=a.toString.bind(a),e[i]=t}}))();const bt=[yt(456),yt(475)];function St(n,t){const e=_t();return(St=function(n,t){return e[n-=441]})(n,t)}const wt=nn({__name:yt(493),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=gn(),u=n;o({MeshTransmissionMaterial:bn});const l=new Sn,{onBeforeLoop:f}=W(),p=vt({width:u[e(448)],height:u[e(448)],isLoop:!1}),d=vt({width:u.fboResolution,height:u[e(448)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(480)]=function(n,t){const e=St;let r;return n[e(487)]((n=>{const o=e;n[o(453)]&&n[o(482)]&&n[o(482)].uuid===t&&(r=n)})),r}(i[n(480)],r[n(480)][n(454)])})),f((({elapsed:n})=>{const t=e;r[t(480)].time=n,r[t(480)][t(456)]===d[t(480)][t(468)]&&s[t(480)]&&(m=a[t(480)].toneMapping,h=i[t(480)][t(490)],v=r.value[t(447)],g=s[t(480)][t(482)][t(475)],s[t(480)][t(482)]=l,u[t(489)]&&(a.value.setRenderTarget(p[t(480)]),a[t(480)][t(471)](i[t(480)],c.value),s[t(480)].material=r[t(480)],s[t(480)].material.thickness=u[t(443)],s[t(480)].material[t(456)]=p.value[t(468)],s[t(480)][t(482)][t(475)]=R,s[t(480)][t(482)][t(447)]=0),a.value[t(485)](d.value),a[t(480)][t(471)](i[t(480)],c[t(480)]),s[t(480)][t(482)][t(456)]=d[t(480)][t(468)],s.value[t(482)]=r.value,s[t(480)][t(482)][t(455)]=u.thickness,s.value[t(482)][t(475)]=g,s[t(480)][t(482)][t(447)]=v,i[t(480)].background=h,a[t(480)][t(485)](null),a[t(480)][t(457)]=m)})),t({root:r,constructor:bn}),(n,t)=>{const o=e;return on(),an(o(479),{ref_key:o(467),ref:r,buffer:J(d).texture,side:J(x)},null,8,bt)}}});function Mt(n){function t(n){const e=St;if(typeof n===e(477))return function(n){}[e(452)](e(470))[e(463)](e(469));1!==(""+n/n).length||n%20==0?function(){return!0}[e(452)](e(484)+e(460))[e(451)]("action"):function(){return!1}.constructor(e(484)+e(460))[e(463)](e(472)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=Pt;!function(n,t){const e=Pt,r=Tt();for(;;)try{if(725638===parseInt(e(406))/1+parseInt(e(418))/2*(parseInt(e(389))/3)+-parseInt(e(414))/4*(parseInt(e(420))/5)+-parseInt(e(431))/6+parseInt(e(403))/7+parseInt(e(422))/8*(-parseInt(e(399))/9)+parseInt(e(409))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(374)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=Pt,t=new RegExp(n(375)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=zt(n(408));t[n(393)](r+n(385))&&e[n(393)](r+n(428))?zt():r("0")}))()}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(374)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(){const n=["counter","test","warn","stateObject","top","while (true) {}","bind","9lxwXre","index","debu","set","9309587OvyYRe","left","disable","407322UIQRXp","max","init","4740700UYpzPJ","constructor","trace","toString","outer","15668NjRbDT","__proto__","disableZ","action","908062rwqBEE","info","370iNGGCK","table","6735816chxwqb","default","matrixWorld","precise","position","bottom","input","disableX","TresGroup","7571532CARmjp","min","value","getCenter","apply","function *\\( *\\)","gger","return (function() ","length","exception","setFromObject","front","right","back","identity","chain","gref","console","disableY","6wBqKSk","getBoundingSphere","string"];return(Tt=function(){return n})()}function Pt(n,t){const e=Tt();return(Pt=function(n,t){return e[n-=374]})(n,t)}Et(void 0,(function(){const n=Pt,t=function(){const n=Pt;let t;try{t=Function(n(377)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(387)]=t[n(387)]||{},r=["log",n(394),n(419),"error",n(379),n(421),n(411)];for(let o=0;o<r[n(378)];o++){const t=Et[n(410)].prototype[n(398)](Et),i=r[o],a=e[i]||t;t[n(415)]=Et[n(398)](Et),t.toString=a[n(412)][n(398)](a),e[i]=t}}))();const Dt=nn({__name:Rt(400),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Y(null),r=Y(null),o=Y(null);return fn((()=>{const n=Pt;if(!r[n(433)])return;if(!o.value)return;r.value[n(424)][n(384)]();const e=(new A)[n(380)](o[n(433)],t[n(425)]),i=new E,a=new T,c=e[n(407)].x-e[n(432)].x,s=e[n(407)].y-e[n(432)].y,u=e[n(407)].z-e[n(432)].z;e[n(434)](i),e[n(390)](a);const l=t[n(396)]?s/2:t[n(427)]?-s/2:0,f=t[n(404)]?-c/2:t[n(382)]?c/2:0,p=t[n(381)]?u/2:t[n(383)]?-u/2:0;r[n(433)][n(426)][n(402)](t.disable||t[n(429)]?0:-i.x+f,t[n(405)]||t[n(388)]?0:-i.y+l,t[n(405)]||t[n(416)]?0:-i.z+p)})),(n,t)=>{const i=Pt;return on(),an(i(430),{ref_key:i(386),ref:e},[dn(i(430),{ref_key:i(413),ref:r},[dn(i(430),{ref_key:"inner",ref:o},[cn(n.$slots,i(423))],512)],512)],512)}}});function zt(n){function t(n){const e=Pt;if(typeof n===e(391))return function(n){}[e(410)](e(397)).apply(e(392));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(401)+e(376)).call(e(417)):function(){return!1}[e(410)]("debu"+e(376))[e(374)](e(395)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=kt;!function(n,t){const e=kt,r=Bt();for(;;)try{if(742290===-parseInt(e(264))/1*(parseInt(e(243))/2)+-parseInt(e(255))/3*(-parseInt(e(225))/4)+-parseInt(e(263))/5+-parseInt(e(224))/6+parseInt(e(271))/7*(-parseInt(e(221))/8)+parseInt(e(233))/9*(-parseInt(e(267))/10)+parseInt(e(231))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(){const n=["gger","counter","intensity","string","2891068CRVoNa","log","call","params","add","prototype","table","stateObject","update","Vector3","info","test","1164081RUhKvZ",'{}.constructor("return this")( )',"index","backside","set","far","worldRadius","group","2461450GStict","1JNQnMe","causticsOnly","helper","1340440PdqCpn","constructor","while (true) {}","object","5753937nXNDRx","length","apply","function *\\( *\\)","bind","8GBFYjG","error","return (function() ","2070420TPUaUJ","12qGZEqR","backsideIOR","lightSource","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","35411970BURbaU","ior","36FpKiBU","debu","#ffffff","primitive","color","resolution"];return(Bt=function(){return n})()}!function(){Ct(this,(function(){const n=kt,t=new RegExp(n(219)),e=new RegExp(n(229),"i"),r=Lt("init");t[n(254)](r+"chain")&&e[n(254)](r+n(230))?Lt():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kt(n,t){const e=Bt();return(kt=function(n,t){return e[n-=217]})(n,t)}Ft(void 0,(function(){const n=kt;let t;try{t=Function(n(223)+n(256)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(244),"warn",n(253),n(222),"exception",n(249),n(228)];for(let i=0;i<r[n(217)];i++){const t=Ft[n(268)][n(248)][n(220)](Ft),o=r[i],a=e[o]||t;t.__proto__=Ft[n(220)](Ft),t.toString=a.toString.bind(a),e[o]=t}}))();const Ut=[Ot(270)],jt=[Ot(270)],Nt=nn({__name:Ot(257),props:{color:{default:Ot(235)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=V(),o=wn(r.value,{frames:1/0,resolution:e[t(238)],worldRadius:e.worldRadius});o[t(246)][t(258)]=!0;const i=gn(null);Q(i,(n=>{const e=t;n&&o.scene[e(247)](n)}));const{onBeforeLoop:a}=W();return a((({elapsed:n})=>{o[t(251)]()})),ln((()=>{const n=t;e[n(237)]&&o[n(246)].color[n(259)](e[n(237)]),e[n(232)]&&(o[n(246)].ior=e[n(232)]),e[n(226)]&&(o.params[n(226)]=e[n(226)]),e[n(260)]&&(o.params.far=e[n(260)]),e[n(261)]&&(o[n(246)][n(261)]=e[n(261)]),e.intensity&&(o[n(246)][n(241)]=e[n(241)])})),Q((()=>e[t(265)]),(n=>{const e=t;o[e(246)][e(265)]=n})),Q((()=>e.lightSource),(n=>{const e=t;n&&o[e(246)][e(227)]instanceof P[e(252)]&&o[e(246)].lightSource[e(259)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn("TresGroup",{ref_key:r(262),ref:i},[cn(n.$slots,"default")],512),dn(r(236),{object:J(o)[r(262)],position:[0,.003,0]},null,8,Ut),dn(r(236),{object:J(o)[r(266)],visible:!1},null,8,jt)],64)}}});function Lt(n){function t(n){const e=kt;if(typeof n===e(242))return function(n){}[e(268)](e(269))[e(218)](e(240));1!==(""+n/n)[e(217)]||n%20==0?function(){return!0}[e(268)](e(234)+e(239))[e(245)]("action"):function(){return!1}[e(268)](e(234)+e(239))[e(218)](e(250)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gt,r=Zt();for(;;)try{if(656131===-parseInt(e(231))/1+parseInt(e(225))/2*(-parseInt(e(230))/3)+-parseInt(e(206))/4*(parseInt(e(237))/5)+-parseInt(e(236))/6+parseInt(e(191))/7*(parseInt(e(226))/8)+parseInt(e(202))/9*(parseInt(e(240))/10)+parseInt(e(195))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(){const n=["#ifdef USE_SHADOWMAP","1169VxRNEO","bind","info",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","32354740quUgeD","constructor","log","function *\\( *\\)","forEach","console","init","59337OyXanC","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","table","traverse","12ZyinCz",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","trace",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","return (function() ","length","test","; i ++) {\n        offset = (vogelDiskSample(j, ","exception","__proto__","remove","compile","string","dispose",'{}.constructor("return this")( )',"shadowmap_pars_fragment","prototype","chain","action","898FangDJ","60488oKFAHP","apply","input","debu","7359aKfFGr","1138195gpdAxN","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","toString","while (true) {}","material","7358832saOYvY","608885xBoxZh","; i++) {\n        vogelSample = vogelDiskSample(j, ","replace","430SeZxxu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","ShaderChunk","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","properties","isArray"];return(Zt=function(){return n})()}function Gt(n,t){const e=Zt();return(Gt=function(n,t){return e[n-=183]})(n,t)}!function(){Ht(this,(function(){const n=Gt,t=new RegExp(n(198)),e=new RegExp(n(183),"i"),r=Wt(n(201));t[n(212)](r+n(223))&&e.test(r+n(228))?Wt():r("0")}))()}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(227)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Vt(void 0,(function(){const n=Gt;let t;try{t=Function(n(210)+n(220)+");")()}catch(o){t=window}const e=t[n(200)]=t[n(200)]||{},r=[n(197),n(184),"info","error",n(214),n(204),n(208)];for(let i=0;i<r[n(211)];i++){const t=Vt.constructor[n(222)][n(192)](Vt),o=r[i],a=e[o]||t;t[n(215)]=Vt[n(192)](Vt),t[n(233)]=a[n(233)][n(192)](a),e[o]=t}}))();const $t=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Gt,o=P[r(185)][r(221)];return P[r(185)].shadowmap_pars_fragment=D.shadowmap_pars_fragment[r(239)](r(190),r(186)+t+r(194)+n+r(209)+e+r(213)+e+r(187)+e+r(238)+e+r(207)+t+r(203)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }").replace("#if defined( SHADOWMAP_TYPE_PCF )",r(232)),(n,t,e)=>{D[r(221)]=o,function(n,t,e){const r=Gt;t[r(205)]((t=>{const e=r;t[e(235)]&&(Array[e(189)](t[e(235)])?t[e(235)][e(199)]((t=>{const r=e;n[r(188)][r(216)](t),t[r(219)]()})):(n[e(188)][e(216)](t[e(235)]),t[e(235)][e(219)]()))})),n[r(193)].programs[r(211)]=0,n[r(217)](t,e)}(n,t,e)}};function Wt(n){function t(n){const e=Gt;if(typeof n===e(218))return function(n){}[e(196)](e(234))[e(227)]("counter");1!==(""+n/n)[e(211)]||n%20==0?function(){return!0}[e(196)](e(229)+"gger").call(e(224)):function(){return!1}[e(196)](e(229)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qt=Xt;function Kt(){const n=["while (true) {}","console","exception","prototype","bind","17713971AfTjAG","string","table","traverse","length","288392HUUlli","action","function *\\( *\\)","13410UwznpT","info","debu","605FAmunV","constructor","1369324CDLYOM","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","input","log","call","counter","301dHCXoZ","dispose","index","1505568agSsHF","1401390kNdfwX","test","trace","value","131712AgClZr"];return(Kt=function(){return n})()}!function(n,t){const e=Xt,r=Kt();for(;;)try{if(400641===parseInt(e(494))/1+-parseInt(e(478))/2+-parseInt(e(479))/3+parseInt(e(467))/4+parseInt(e(465))/5*(-parseInt(e(462))/6)+-parseInt(e(475))/7*(parseInt(e(483))/8)+parseInt(e(489))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Xt,t=new RegExp(n(496)),e=new RegExp(n(469),"i"),r=ne("init");t.test(r+"chain")&&e[n(480)](r+n(471))?ne():r("0")}))()}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(n,t){const e=Kt();return(Xt=function(n,t){return e[n-=462]})(n,t)}Qt(void 0,(function(){const n=Xt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(485)]||{},r=[n(472),"warn",n(463),"error",n(486),n(491),n(481)];for(let o=0;o<r[n(493)];o++){const t=Qt[n(466)][n(487)][n(488)](Qt),i=r[o],a=e[i]||t;t.__proto__=Qt[n(488)](Qt),t[n(470)]=a.toString.bind(a),e[i]=t}}))();const Jt=nn({__name:qt(477),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Xt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(482)],o[t(482)],e[t(482)]),i=null),a&&(i=$t({focus:s,size:c,samples:u}),o[t(482)][t(492)]((n=>{const e=t;n instanceof l&&n.material[e(476)]()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Xt;if(typeof n===e(490))return function(n){}[e(466)](e(484)).apply(e(474));1!==(""+n/n)[e(493)]||n%20==0?function(){return!0}[e(466)]("debu"+e(468))[e(473)](e(495)):function(){return!1}[e(466)](e(464)+e(468)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function te(n,t){const e=oe();return(te=function(n,t){return e[n-=265]})(n,t)}const ee=te;!function(n,t){const e=te,r=oe();for(;;)try{if(969530===-parseInt(e(295))/1+parseInt(e(304))/2+-parseInt(e(292))/3+parseInt(e(310))/4*(-parseInt(e(278))/5)+-parseInt(e(302))/6*(parseInt(e(269))/7)+-parseInt(e(315))/8+parseInt(e(308))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(){const n=["error","4333256coniHq","exception","function *\\( *\\)","colorspace_fragment","length","1188257ELItBs","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","table","halfTexelSize","gger","apply","return (function() ","log","chain","960385dhonpK","set","__proto__","uniforms","string","call","console","prototype","kernel","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",'{}.constructor("return this")( )',"info","resolution","action","3131838vQQnEs","input","setTexelSize","413110hlEJev","bind","test","texelSize","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","while (true) {}","30BQVrSr","toneMapped","1552702oPnxAs","debu","toString","warn","42924060sixExL","init","36ralOhw","value","replace","encodings_fragment"];return(oe=function(){return n})()}!function(){re(this,(function(){const n=te,t=new RegExp(n(266)),e=new RegExp(n(299),"i"),r=se(n(309));t.test(r+n(277))&&e[n(297)](r+n(293))?se():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(274)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ie(void 0,(function(){const n=te;let t;try{t=Function(n(275)+n(288)+");")()}catch(o){t=window}const e=t[n(284)]=t.console||{},r=[n(276),n(307),n(289),n(314),n(265),n(271),"trace"];for(let i=0;i<r[n(268)];i++){const t=ie[n(300)][n(285)][n(296)](ie),o=r[i],a=e[o]||t;t[n(280)]=ie[n(296)](ie),t[n(306)]=a[n(306)][n(296)](a),e[o]=t}}))();const ae=parseInt(F[ee(312)](/\D+/g,""));class ce extends z{constructor(n=new C){const t=ee;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(270)+t(ae>=154?267:313)+">\n        }",vertexShader:t(287),blending:B,depthWrite:!1,depthTest:!1}),this[t(303)]=!1,this.setTexelSize(n.x,n.y),this[t(286)]=new Float32Array([0,1,2,2,3])}[ee(294)](n,t){const e=ee;this.uniforms[e(298)][e(311)].set(n,t),this[e(281)][e(272)][e(311)][e(279)](n,t).multiplyScalar(.5)}setResolution(n){const t=ee;this.uniforms[t(290)][t(311)].copy(n)}}function se(n){function t(n){const e=te;if(typeof n===e(282))return function(n){}.constructor(e(301))[e(274)]("counter");1!==(""+n/n)[e(268)]||n%20==0?function(){return!0}[e(300)](e(305)+"gger")[e(283)](e(291)):function(){return!1}[e(300)](e(305)+e(273))[e(274)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ue(){const n=["screen","exception","__proto__","while (true) {}","293427ZJyHyv","6kExNCp","166774XFQHKl","apply","frustumCulled","log","depthBuffer","call","1716HqvOiT","scene","depthTexture","inputBuffer","constructor","length","depthScale","position","minDepthThreshold","setRenderTarget","camera","convolutionMaterial","uniforms","setResolution","4804uIpTdP","gger","test","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","581539QaycBV","USE_DEPTH","add","error","setAttribute","trace","bind","renderTargetB","render","329388mAoyqM","2315RSTFbe","150rPcABp",'{}.constructor("return this")( )',"toString","input","clone","value","renderTargetA","init","renderToScreen","texture","1267840vIoGQT","console","setTexelSize","24UmFhrh","kernel","maxDepthThreshold","function *\\( *\\)","47993PMaDIX","warn","prototype","debu"];return(ue=function(){return n})()}const le=he;!function(n,t){const e=he,r=ue();for(;;)try{if(354485===parseInt(e(245))/1+-parseInt(e(279))/2*(parseInt(e(244))/3)+parseInt(e(265))/4*(parseInt(e(280))/5)+parseInt(e(231))/6*(-parseInt(e(270))/7)+parseInt(e(291))/8+-parseInt(e(243))/9*(parseInt(e(281))/10)+parseInt(e(235))/11*(parseInt(e(251))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(246)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){fe(this,(function(){const n=he,t=new RegExp(n(234)),e=new RegExp(n(269),"i"),r=ve(n(288));t[n(267)](r+"chain")&&e[n(267)](r+n(284))?ve():r("0")}))()}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();pe(void 0,(function(){const n=he,t=function(){const n=he;let t;try{t=Function("return (function() "+n(282)+");")()}catch(e){t=window}return t}(),e=t[n(292)]=t[n(292)]||{},r=[n(248),n(236),"info",n(273),n(240),"table",n(275)];for(let o=0;o<r.length;o++){const t=pe[n(255)][n(237)][n(276)](pe),i=r[o],a=e[i]||t;t[n(241)]=pe.bind(pe),t[n(283)]=a[n(283)][n(276)](a),e[i]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=he;this[c(289)]=!1,this.renderTargetA=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this.renderTargetA[c(285)](),this.convolutionMaterial=new ce,this[c(262)][c(230)](1/t,1/e),this.convolutionMaterial[c(264)](new C(t,e)),this.scene=new u,this[c(261)]=new k,this.convolutionMaterial.uniforms[c(259)].value=r,this[c(262)][c(263)][c(233)][c(286)]=o,this.convolutionMaterial.uniforms[c(257)].value=i,this[c(262)][c(263)].depthToBlurRatioBias[c(286)]=a,this[c(262)].defines[c(271)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new U;p[c(274)](c(258),new j(s,3)),p[c(274)]("uv",new j(f,2)),this[c(239)]=new l(p,this[c(262)]),this.screen[c(247)]=!1,this[c(252)][c(272)](this[c(239)])}[le(278)](n,t,e){const r=le,o=this[r(252)],i=this.camera,a=this[r(287)],c=this[r(277)],s=this.convolutionMaterial,u=s[r(263)];u[r(249)][r(286)]=t[r(253)];const l=s[r(232)];let f,p,d,h=t;for(p=0,d=l[r(256)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(232)][r(286)]=l[p],u.inputBuffer[r(286)]=h[r(290)],n[r(260)](f),n.render(o,i),h=f;u[r(232)][r(286)]=l[p],u[r(254)].value=h[r(290)],n.setRenderTarget(this[r(289)]?null:e),n[r(278)](o,i)}}function he(n,t){const e=ue();return(he=function(n,t){return e[n-=230]})(n,t)}function ve(n){function t(n){const e=he;if(typeof n===e(268))return function(n){}[e(255)](e(242))[e(246)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(255)](e(238)+e(266))[e(250)]("action"):function(){return!1}[e(255)]("debu"+e(266))[e(246)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var me=ge;function ge(n,t){var e=xe();return(ge=function(n,t){return e[n-=180]})(n,t)}!function(n,t){for(var e=ge,r=xe();;)try{if(281487===-parseInt(e(249))/1+parseInt(e(246))/2+-parseInt(e(189))/3+parseInt(e(210))/4+-parseInt(e(180))/5+-parseInt(e(227))/6*(parseInt(e(197))/7)+parseInt(e(183))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_e(this,(function(){var n=ge,t=new RegExp(n(195)),e=new RegExp(n(185),"i"),r=be("init");t[n(230)](r+n(203))&&e.test(r+n(216))?be():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xe(){var n=["_hasBlur","distortionMap","table","gger","console","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","call","stateObject","_tDiffuse","_maxDepthThreshold","12IuIPHt","mixBlur","depthScale","test","_mirror","mirror","constructor","_minDepthThreshold","fragmentShader","prototype","replace","mixContrast","depthToBlurRatioBias","error","onBeforeCompile","defines","length","_mixBlur","_tDiffuseBlur","23420ahTMTH","log","#include <emissivemap_fragment>","521116abVplN","textureMatrix","setValues","tDiffuse","value","_depthToBlurRatioBias","_distortion","374995zyIfId","vertexShader","debu","7183936JWqTmF","_distortionMap","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","USE_UV","distortion","1435848lDPJyR","_textureMatrix","bind","tDepth","_depthScale","hasBlur","function *\\( *\\)","minDepthThreshold","223426grPFmR","_mixContrast","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ",'{}.constructor("return this")( )',"\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","uniforms","chain","_tDepth","#include <project_vertex>","_blurStrength","trace","action","maxDepthThreshold","2041408bcyPVg","toString","counter","return (function() ","mixStrength","tDiffuseBlur","input"];return(xe=function(){return n})()}ye(void 0,(function(){for(var n=ge,t=function(){var n,t=ge;try{n=Function(t(213)+t(200)+");")()}catch(e){n=window}return n}(),e=t[n(221)]=t.console||{},r=[n(247),"warn","info",n(240),"exception",n(219),n(207)],o=0;o<r[n(243)];o++){var i=ye.constructor[n(236)][n(191)](ye),a=r[o],c=e[a]||i;i[n(186)]=ye[n(191)](ye),i.toString=c[n(211)][n(191)](c),e[a]=i}}))();class Ie extends N{constructor(n={}){var t=ge;super(n),this[t(204)]={value:null},this[t(184)]={value:null},this[t(225)]={value:null},this._tDiffuseBlur={value:null},this[t(190)]={value:null},this[t(217)]={value:!1},this[t(231)]={value:0},this[t(244)]={value:0},this[t(206)]={value:.5},this[t(234)]={value:.9},this[t(226)]={value:1},this[t(193)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(255)]={value:1},this[t(198)]={value:1},this[t(251)](n)}[me(241)](n){var t,e=me;!(null==(t=n[e(242)])?void 0:t[e(187)])&&(n[e(242)][e(187)]=""),n[e(202)].hasBlur=this._hasBlur,n[e(202)].tDiffuse=this[e(225)],n.uniforms.tDepth=this[e(204)],n[e(202)][e(218)]=this[e(184)],n[e(202)].tDiffuseBlur=this[e(245)],n.uniforms.textureMatrix=this[e(190)],n.uniforms.mirror=this._mirror,n[e(202)][e(228)]=this[e(244)],n[e(202)][e(214)]=this[e(206)],n[e(202)].minDepthThreshold=this._minDepthThreshold,n[e(202)][e(209)]=this[e(226)],n[e(202)][e(229)]=this[e(193)],n[e(202)].depthToBlurRatioBias=this[e(254)],n.uniforms.distortion=this[e(255)],n.uniforms.mixContrast=this[e(198)],n.vertexShader=e(199)+n[e(181)],n[e(181)]=n[e(181)][e(237)](e(205),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n[e(235)]=e(201)+n[e(235)],n[e(235)]=n[e(235)][e(237)](e(248),e(222))}get[me(252)](){var n=me;return this[n(225)][n(253)]}set[me(252)](n){var t=me;this[t(225)][t(253)]=n}get[me(192)](){return this[me(204)].value}set tDepth(n){var t=me;this[t(204)][t(253)]=n}get[me(218)](){var n=me;return this[n(184)][n(253)]}set[me(218)](n){var t=me;this[t(184)][t(253)]=n}get[me(215)](){return this._tDiffuseBlur.value}set[me(215)](n){var t=me;this[t(245)][t(253)]=n}get[me(250)](){var n=me;return this[n(190)][n(253)]}set[me(250)](n){this._textureMatrix.value=n}get[me(194)](){return this._hasBlur.value}set[me(194)](n){var t=me;this._hasBlur[t(253)]=n}get[me(232)](){var n=me;return this[n(231)][n(253)]}set[me(232)](n){var t=me;this[t(231)][t(253)]=n}get[me(228)](){return this[me(244)].value}set[me(228)](n){this[me(244)].value=n}get mixStrength(){return this[me(206)].value}set[me(214)](n){var t=me;this[t(206)][t(253)]=n}get[me(196)](){var n=me;return this[n(234)][n(253)]}set[me(196)](n){var t=me;this[t(234)][t(253)]=n}get[me(209)](){var n=me;return this[n(226)][n(253)]}set[me(209)](n){this._maxDepthThreshold.value=n}get[me(229)](){return this._depthScale.value}set depthScale(n){var t=me;this[t(193)][t(253)]=n}get[me(239)](){return this[me(254)].value}set depthToBlurRatioBias(n){this._depthToBlurRatioBias.value=n}get[me(188)](){var n=me;return this[n(255)][n(253)]}set distortion(n){var t=me;this[t(255)][t(253)]=n}get[me(238)](){var n=me;return this[n(198)][n(253)]}set[me(238)](n){var t=me;this[t(198)][t(253)]=n}}function be(n){function t(n){var e=ge;if("string"==typeof n)return function(n){}[e(233)]("while (true) {}").apply(e(212));1!==(""+n/n)[e(243)]||n%20==0?function(){return!0}[e(233)](e(182)+e(220))[e(223)](e(208)):function(){return!1}[e(233)](e(182)+e(220)).apply(e(224)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Se=Ee;!function(n,t){const e=Ee,r=Re();for(;;)try{if(628451===-parseInt(e(401))/1*(parseInt(e(445))/2)+parseInt(e(402))/3*(-parseInt(e(396))/4)+-parseInt(e(425))/5+-parseInt(e(449))/6+-parseInt(e(393))/7*(-parseInt(e(457))/8)+-parseInt(e(461))/9+parseInt(e(390))/10*(parseInt(e(411))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){we(this,(function(){const n=Ee,t=new RegExp(n(476)),e=new RegExp(n(439),"i"),r=Pe(n(437));t[n(431)](r+n(423))&&e[n(431)](r+n(405))?Pe():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Re(){const n=["enabled","t-diffuse-blur","isMesh","dot","10700KRWAeb","autoClear","elements","889CjkMgx","autoUpdate","mix-contrast","146468JLRvCl","applyMatrix4","matrixWorld","matrixWorldInverse","reflectorPlane","119318nasNuW","3axMVgM","gger","min-depth-threshold","input","exception","reflect","material","table","index","31900eQnUck","lookAt","subVectors","position","cameraWorldPosition","view","console","mix-strength","clipPlane","target","distortionMap","clear","chain","apply","1566995XcfSfg","rotationMatrix","shadowMap","depthTexture","has-blur","while (true) {}","test","bind","normal","key","uuid","lookAtPosition","init","setFromMatrixPosition","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","value","virtualCamera","defines-USE_DEPTH","far","14Fxfzup",'{}.constructor("return this")( )',"materialRef","length","5402790SVrLvH","toString","sign","render","multiply","prototype","add","setRenderTarget","9160NXEJaW","visible","traverse","TresMeshReflectorMaterial","4808313kwktrY","projectionMatrix","updateMatrixWorld","reflectorWorldPosition","depth-to-blur-ratio-bias","depth-scale","textureMatrix","defines-USE_DISTORTION","distortion","extractRotation","reflectorOffset","dispose","trace","setFromNormalAndCoplanarPoint","debu","function *\\( *\\)","texture","constructor","set"];return(Re=function(){return n})()}Me(void 0,(function(){const n=Ee,t=function(){const n=Ee;let t;try{t=Function(n(440)+n(446)+");")()}catch(e){t=window}return t}(),e=t[n(417)]=t[n(417)]||{},r=["log","warn","info","error",n(406),n(409),n(473)];for(let o=0;o<r.length;o++){const t=Me[n(478)][n(454)].bind(Me),i=r[o],a=e[i]||t;t.__proto__=Me[n(432)](Me),t[n(450)]=a[n(450)][n(432)](a),e[i]=t}}))();const Ae=["texture-matrix","mirror","t-diffuse","t-depth",Se(387),Se(429),Se(418),Se(404),"max-depth-threshold",Se(466),Se(465),Se(469),Se(421),Se(395),"defines-USE_BLUR",Se(443),"defines-USE_DISTORTION"];function Ee(n,t){const e=Re();return(Ee=function(n,t){return e[n-=387]})(n,t)}const Te=nn({__name:Se(410),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Se,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:R,extend:A}=V();A({MeshReflectorMaterial:Ie});const T=gn(),P=gn(),D=gn(),z=gn(),O=X((()=>{const n=Ee;return"number"==typeof f[n(441)]?[f[n(441)],f[n(441)]]:f[n(441)]})),C=X((()=>O[r(441)][0]>0||O.value[1]>0)),B={reflectorPlane:new L,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new H,lookAtPosition:new E(0,0,-1),clipPlane:new Z,view:new E,target:new E,q:new Z,virtualCamera:new G,textureMatrix:new H};ln((()=>{var n;const o=r;null==(n=T[o(441)])||n[o(477)].dispose();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(441)]=new I(i.value,i[o(441)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(441)],i[o(441)],w,M)},t(y,e(x)))),P[o(441)]=new I(i[o(441)],i.value,f),D.value=new de({resolution:i[o(441)],width:O[o(441)][0],height:O.value[1],minDepthThreshold:a.value,maxDepthThreshold:s.value,depthScale:u[o(441)],depthToBlurRatioBias:l[o(441)]}),z[o(441)]={mirror:p,textureMatrix:B.textureMatrix,mixBlur:d,tDiffuse:T[o(441)].texture,tDepth:T[o(441)][o(428)],tDiffuseBlur:T[o(441)][o(477)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(441)],mixContrast:_,"defines-USE_BLUR":C[o(441)]?"":void 0,"defines-USE_DEPTH":u[o(441)]>0?"":void 0,"defines-USE_DISTORTION":g[o(441)]?"":void 0}}));const F=gn(),{onLoop:k}=W();k((()=>{var n;const t=r;if(!(F.value&&R.value&&T[t(441)]&&y[t(441)]))return;const e=function(n,t){const e=Ee;let r;return n[e(459)]((n=>{const o=e;n[o(388)]&&n[o(408)]&&n.material[o(435)]===t&&(r=n)})),r}(x[t(441)],F[t(441)][t(435)]);if(!e)return;e[t(458)]=!1;const i=R[t(441)].xr[t(480)],a=R.value.shadowMap[t(394)];(function(n){var t,e;const r=Ee;if(B.reflectorWorldPosition[r(438)](n.matrixWorld),B[r(415)][r(438)](null==(t=y.value)?void 0:t[r(398)]),B.rotationMatrix[r(470)](n[r(398)]),B.normal[r(479)](0,0,1),B.normal[r(397)](B[r(426)]),B[r(464)].addScaledVector(B[r(433)],o[r(471)]),B[r(416)][r(413)](B[r(464)],B[r(415)]),B[r(416)][r(389)](B[r(433)])>0)return;B[r(416)].reflect(B.normal).negate(),B.view[r(455)](B[r(464)]),B.rotationMatrix[r(470)](null==(e=y.value)?void 0:e[r(398)]),B.lookAtPosition[r(479)](0,0,-1),B[r(436)][r(397)](B.rotationMatrix),B.lookAtPosition[r(455)](B[r(415)]),B.target[r(413)](B[r(464)],B[r(436)]),B.target[r(407)](B[r(433)]).negate(),B[r(420)].add(B[r(464)]),B[r(442)][r(414)].copy(B[r(416)]),B.virtualCamera.up[r(479)](0,1,0),B[r(442)].up[r(397)](B[r(426)]),B[r(442)].up[r(407)](B[r(433)]),B[r(442)][r(412)](B[r(420)]),B[r(442)][r(444)]=(null==y?void 0:y[r(441)])[r(444)],B.virtualCamera[r(463)](),B[r(442)].projectionMatrix.copy((null==y?void 0:y.value)[r(462)]),B[r(467)][r(479)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),B[r(467)][r(453)](B[r(442)][r(462)]),B[r(467)][r(453)](B.virtualCamera[r(399)]),B[r(467)][r(453)](n.matrixWorld),B[r(400)][r(474)](B[r(433)],B[r(464)]),B[r(400)].applyMatrix4(B[r(442)].matrixWorldInverse),B[r(419)][r(479)](B.reflectorPlane.normal.x,B[r(400)][r(433)].y,B.reflectorPlane[r(433)].z,B[r(400)].constant);const i=B[r(442)][r(462)];B.q.x=(Math.sign(B[r(419)].x)+i[r(392)][8])/i[r(392)][0],B.q.y=(Math[r(451)](B[r(419)].y)+i[r(392)][9])/i[r(392)][5],B.q.z=-1,B.q.w=(1+i[r(392)][10])/i.elements[14],B[r(419)].multiplyScalar(2/B[r(419)][r(389)](B.q)),i.elements[2]=B[r(419)].x,i[r(392)][6]=B.clipPlane.y,i[r(392)][10]=B.clipPlane.z+1,i[r(392)][14]=B[r(419)].w})(e),R[t(441)][t(427)].autoUpdate=!1,R[t(441)].setRenderTarget(T[t(441)]),R[t(441)][t(391)]||R[t(441)][t(422)](),R[t(441)][t(452)](x[t(441)],B[t(442)]),null==(n=null==D?void 0:D[t(441)])||n.render(R.value,T[t(441)],P[t(441)]),R[t(441)].xr[t(480)]=i,R[t(441)][t(427)][t(394)]=a,e.visible=!0,R[t(441)][t(456)](null)}));const U=xn(),j=X((()=>{const n=r,t={};return Object.assign(t,o),Object.assign(t,U[n(441)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(441)])||n.dispose(),null==(t=null==P?void 0:P.value)||t[e(472)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(460),In({key:c(434)+z.value["defines-USE_BLUR"]+z[c(441)][c(443)]+z[c(441)][c(468)],ref_key:c(447),ref:F},j[c(441)],{"texture-matrix":B[c(467)],mirror:J(p),"t-diffuse":null==(e=T[c(441)])?void 0:e[c(477)],"t-depth":null==(o=T.value)?void 0:o.depthTexture,"t-diffuse-blur":null==(i=P.value)?void 0:i[c(477)],"has-blur":C[c(441)],"mix-strength":J(v),"min-depth-threshold":J(a),"max-depth-threshold":J(s),"depth-scale":J(u),"depth-to-blur-ratio-bias":J(l),distortion:J(m),distortionMap:J(g),"mix-contrast":J(_),"defines-USE_BLUR":C[c(441)]?"":void 0,"defines-USE_DEPTH":J(u)>0?"":void 0,"defines-USE_DISTORTION":J(g)?"":void 0}),null,16,Ae)}}});function Pe(n){function t(n){const e=Ee;if("string"==typeof n)return function(n){}[e(478)](e(430))[e(424)]("counter");1!==(""+n/n)[e(448)]||n%20==0?function(){return!0}.constructor(e(475)+e(403)).call("action"):function(){return!1}[e(478)](e(475)+"gger")[e(424)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ze,r=Be();for(;;)try{if(650989===parseInt(e(164))/1+-parseInt(e(163))/2*(-parseInt(e(144))/3)+parseInt(e(145))/4+parseInt(e(135))/5+parseInt(e(157))/6+-parseInt(e(156))/7+-parseInt(e(162))/8*(parseInt(e(161))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(167)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ze(n,t){const e=Be();return(ze=function(n,t){return e[n-=135]})(n,t)}!function(){De(this,(function(){const n=ze,t=new RegExp(n(146)),e=new RegExp(n(158),"i"),r=Ce("init");t[n(136)](r+"chain")&&e.test(r+n(141))?Ce():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(167)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(n){function t(n){const e=ze;if(typeof n===e(171))return function(n){}[e(149)](e(172)).apply(e(152));1!==(""+n/n).length||n%20==0?function(){return!0}[e(149)](e(140)+e(143))[e(150)]("action"):function(){return!1}[e(149)](e(140)+"gger")[e(167)](e(160)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Be(){const n=["1152189AfVGUX","error","dispose","apply","texture","table","log","string","while (true) {}","bind","5229530AhJtCv","test","__proto__","trace","background","debu","input",'{}.constructor("return this")( )',"gger","101334FNdoPS","2894700YgzZpr","function *\\( *\\)","type","console","constructor","call","fog","counter","return (function() ","update","value","3582103XqOyJC","4939440khLRTQ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","stateObject","18urTTIQ","14922976JyBaQR","68yFBkAc"];return(Be=function(){return n})()}function Fe(n,t){const e=Ne();return(Fe=function(n,t){return e[n-=282]})(n,t)}Oe(void 0,(function(){const n=ze;let t;try{t=Function(n(153)+n(142)+");")()}catch(o){t=window}const e=t[n(148)]=t[n(148)]||{},r=[n(170),"warn","info",n(165),n(159),n(169),n(138)];for(let i=0;i<r.length;i++){const t=Oe[n(149)].prototype[n(173)](Oe),o=r[i],a=e[o]||t;t[n(137)]=Oe[n(173)](Oe),t.toString=a.toString[n(173)](a),e[o]=t}}))();const ke=Fe;!function(n,t){const e=Fe,r=Ne();for(;;)try{if(903522===-parseInt(e(291))/1*(-parseInt(e(284))/2)+parseInt(e(297))/3+parseInt(e(292))/4*(-parseInt(e(309))/5)+parseInt(e(324))/6*(-parseInt(e(299))/7)+parseInt(e(300))/8+-parseInt(e(303))/9*(-parseInt(e(311))/10)+parseInt(e(283))/11*(parseInt(e(306))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(317)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ue(this,(function(){const n=Fe,t=new RegExp(n(313)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ze(n(301));t[n(307)](r+n(294))&&e[n(307)](r+"input")?Ze():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(317)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ne(){const n=["438732nNAuEh","8769752DmlyVH","init","warn","1509561OUnVmJ","prototype","TresGroup","12vTskMo","test","debu","17535KaPUXC","visible","30xorwzy",'{}.constructor("return this")( )',"function *\\( *\\)","bind","$slots","toString","apply","frames","table","log","far","string","__proto__","18PJRdsw","resolution","1467059dsrITE","100BsBcCd","return (function() ","console","fog","action","constructor","length","9735lxGbXk","1952sNfenh","trace","chain","index","exception","1750323BOrFKQ","value"];return(Ne=function(){return n})()}je(void 0,(function(){const n=Fe;let t;try{t=Function(n(285)+n(312)+");")()}catch(o){t=window}const e=t[n(286)]=t[n(286)]||{},r=[n(320),n(302),"info","error",n(296),n(319),n(293)];for(let i=0;i<r[n(290)];i++){const t=je[n(289)][n(304)][n(314)](je),o=r[i],a=e[o]||t;t[n(323)]=je[n(314)](je),t[n(316)]=a[n(316)].bind(a),e[o]=t}}))();const Le=["object"],He=nn({__name:ke(295),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=Y(null),s=Y(n),u=Y(t),l=Y(e),f=Y(null);let p,d;return Q((()=>s),(n=>{var t;const e=ze;null==(t=c[e(155)])||t.dispose(),c[e(155)]=new v(n.value),c[e(155)][e(168)][e(147)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{e&&(f[ze(155)]=new m(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=ze;null==(n=c[t(155)])||n[t(166)]()})),{fbo:c,camera:f,update:()=>{var n;const t=ze;p=a.value[t(151)],d=a[t(155)][t(139)],a.value.background=r||d,a[t(155)][t(151)]=o||p,null==(n=f[t(155)])||n[t(154)](i.value,a.value),a[t(155)].fog=p,a[t(155)].background=d}}}({resolution:o[r(282)],near:o.near,far:o[r(321)],envMap:o.envMap,fog:o[r(287)]}),{onBeforeLoop:s}=W();let u=0;const l=Y(null);return s((()=>{const n=r;l[n(298)]&&(o[n(318)]===1/0||u<o[n(318)])&&(l[n(298)].visible=!1,c(),l[n(298)][n(310)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e.texture}),(n,t)=>{const e=r;return on(),an(e(305),null,[dn("primitive",{object:J(a)},null,8,Le),dn("TresGroup",{ref_key:"rgRef",ref:l},[cn(n[e(315)],"default")],512)])}}});function Ze(n){function t(n){const e=Fe;if(typeof n===e(322))return function(n){}[e(289)]("while (true) {}")[e(317)]("counter");1!==(""+n/n)[e(290)]||n%20==0?function(){return!0}[e(289)](e(308)+"gger").call(e(288)):function(){return!1}[e(289)](e(308)+"gger")[e(317)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ve,r=$e();for(;;)try{if(593004===parseInt(e(488))/1+parseInt(e(481))/2*(-parseInt(e(514))/3)+-parseInt(e(505))/4+parseInt(e(474))/5+parseInt(e(504))/6+parseInt(e(501))/7*(-parseInt(e(496))/8)+parseInt(e(486))/9*(-parseInt(e(509))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(503)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t){const e=$e();return(Ve=function(n,t){return e[n-=471]})(n,t)}function $e(){const n=["5131554ZOwHBM","532608wEeMAe","input","toString","counter","489530DArsdO","reduce","MathUtils","info","stateObject","94818IvmhED","gger","length","key","forEach","return (function() ","constructor","exception","2818745VbKBAD","string","UniformsUtils","__proto__","trace","test",'{}.constructor("return this")( )',"56liUBSk","while (true) {}","table","ShaderMaterial","assign","117YQSPmm","generateUUID","912822CkiFJl","bind","debu","error","clone","uniforms","entries","chain","8izptYK","action","console","value","log","590219AZRmaQ","defineProperty","apply"];return($e=function(){return n})()}!function(){Ge(this,(function(){const n=Ve,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ke("init");t[n(479)](r+n(495))&&e.test(r+n(506))?Ke():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qe(n,t,e,r){const o=Ve,i=class extends P[o(484)]{constructor(i={}){const a=o,s=Object[a(494)](n);super({uniforms:s[a(510)](((n,[t,e])=>{const r=a,o=P[r(476)][r(492)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this.key="",s[a(518)]((([n])=>Object[a(502)](this,n,{get:()=>this[a(493)][n][a(499)],set:t=>this[a(493)][n][a(499)]=t}))),Object[a(485)](this,i),r&&r(this)}};return i[o(517)]=P[o(511)][o(487)](),i}function Ke(n){function t(n){const e=Ve;if(typeof n===e(475))return function(n){}.constructor(e(482))[e(503)](e(508));1!==(""+n/n)[e(516)]||n%20==0?function(){return!0}[e(472)]("debu"+e(515)).call(e(497)):function(){return!1}[e(472)](e(490)+e(515)).apply(e(513)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ve,t=function(){const n=Ve;let t;try{t=Function(n(471)+n(480)+");")()}catch(e){t=window}return t}(),e=t[n(498)]=t[n(498)]||{},r=[n(500),"warn",n(512),n(491),n(473),n(483),n(478)];for(let o=0;o<r[n(516)];o++){const t=We[n(472)].prototype[n(489)](We),i=r[o],a=e[i]||t;t[n(477)]=We.bind(We),t[n(507)]=a.toString[n(489)](a),e[i]=t}}))();var Ye=cr;!function(n,t){for(var e=cr,r=Pr();;)try{if(986063===-parseInt(e(283))/1+parseInt(e(382))/2*(parseInt(e(336))/3)+-parseInt(e(422))/4+-parseInt(e(273))/5+parseInt(e(361))/6*(parseInt(e(377))/7)+-parseInt(e(265))/8*(parseInt(e(323))/9)+-parseInt(e(401))/10*(-parseInt(e(418))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[cr(381)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qe(this,(function(){var n=cr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(421),"i"),r=Or(n(447));t[n(372)](r+"chain")&&e[n(372)](r+n(314))?Or():r("0")}))()}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[cr(381)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=cr,e=function(n,t){var e=cr;if(typeof n!==e(271)||null===n)return n;var r=n[Symbol[e(434)]];if(void 0!==r){var o=r[e(276)](n,t||"default");if(typeof o!==e(271))return o;throw new TypeError(e(354))}return(t===e(437)?String:Number)(n)}(n,t(437));return typeof e===t(312)?e:String(e)}function nr(n,t,e){var r=cr;return(t=Je(t))in n?Object[r(399)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=cr,r=Object[e(430)](n);if(Object[e(425)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(326)]((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r[e(298)].apply(r,o)}return r}function er(n){for(var t=cr,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0).forEach((function(t){nr(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(406)](n,Object.getOwnPropertyDescriptors(r)):tr(Object(r))[t(302)]((function(e){Object[t(399)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function rr(n,t){var e=cr;if(null==n)return{};var r,o,i=function(n,t){if(null==n)return{};var e,r,o={},i=Object[cr(430)](n);for(r=0;r<i.length;r++)e=i[r],t.indexOf(e)>=0||(o[e]=n[e]);return o}(n,t);if(Object[e(425)]){var a=Object[e(425)](n);for(o=0;o<a[e(450)];o++)r=a[o],t[e(301)](r)>=0||Object[e(344)][e(277)][e(276)](n,r)&&(i[r]=n[r])}return i}function or(n,t){var e=cr;(null==t||t>n[e(450)])&&(t=n[e(450)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ir(n,t){return function(n){if(Array[cr(338)](n))return n}(n)||function(n,t){var e=cr,r=null==n?null:e(317)!=typeof Symbol&&n[Symbol[e(365)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(276)](n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(276)](r))[e(405)])&&(s[e(298)](o[e(429)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(403)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=cr;if(n){if(typeof n===e(437))return or(n,t);var r=Object[e(344)].toString[e(276)](n)[e(395)](8,-1);return"Object"===r&&n[e(353)]&&(r=n[e(353)][e(414)]),r===e(293)||"Set"===r?Array.from(n):r===e(313)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(372)](r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError(cr(351))}()}function ar(n,t){for(var e=cr,r=0;r<t.length;r++){var o=t[r];o[e(378)]=o[e(378)]||!1,o[e(388)]=!0,e(429)in o&&(o[e(272)]=!0),Object.defineProperty(n,Je(o[e(280)]),o)}}function cr(n,t){var e=Pr();return(cr=function(n,t){return e[n-=261]})(n,t)}function sr(n){if(void 0===n)throw new ReferenceError(cr(266));return n}function ur(n,t){var e=cr;return(ur=Object[e(376)]?Object[e(376)][e(355)]():function(n,t){return n[e(288)]=t,n})(n,t)}function lr(n){var t=cr;return(lr=Object[t(376)]?Object[t(409)][t(355)]():function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function fr(n){var t=function(){var n=cr;if("undefined"==typeof Reflect||!Reflect[n(384)])return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype[n(389)][n(276)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=cr,o=lr(n);if(t){var i=lr(this).constructor;e=Reflect[r(384)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=cr;if(t&&(typeof t===e(271)||typeof t===e(428)))return t;if(void 0!==t)throw new TypeError(e(324));return sr(n)}(this,e)}}Xe(void 0,(function(){for(var n=cr,t=function(){var n,t=cr;try{n=Function("return (function() "+t(321)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(275)]||{},r=["log",n(391),n(398),n(343),n(442),n(315),n(438)],o=0;o<r.length;o++){var i=Xe[n(353)].prototype[n(355)](Xe),a=r[o],c=e[a]||i;i[n(288)]=Xe.bind(Xe),i[n(294)]=c.toString[n(355)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:"csm_DiffuseColor",normal:Ye(362),roughness:"csm_Roughness",metalness:Ye(318),emissive:Ye(457),ao:Ye(267),bump:"csm_Bump",clearcoat:Ye(404),clearcoatRoughness:Ye(303),clearcoatNormal:"csm_ClearcoatNormal",pointSize:Ye(417),fragColor:Ye(416),depthAlpha:Ye(456),position:Ye(413),positionRaw:Ye(380)},mr=(nr(pr={},"".concat(vr.position),"*"),nr(pr,"".concat(vr[Ye(455)]),"*"),nr(pr,""[Ye(423)](vr[Ye(262)]),"*"),nr(pr,""[Ye(423)](vr[Ye(311)]),[Ye(270)]),nr(pr,""[Ye(423)](vr.diffuse),"*"),nr(pr,""[Ye(423)](vr[Ye(371)]),"*"),nr(pr,"".concat(vr.emissive),[Ye(285),Ye(341)]),nr(pr,""[Ye(423)](vr.roughness),[Ye(285),Ye(341)]),nr(pr,"".concat(vr[Ye(281)]),[Ye(285),Ye(341)]),nr(pr,""[Ye(423)](vr.ao),[Ye(285),Ye(341),"MeshBasicMaterial",Ye(342),Ye(331),Ye(348)]),nr(pr,""[Ye(423)](vr[Ye(363)]),["MeshLambertMaterial",Ye(337),Ye(367),Ye(331),Ye(341),Ye(285),Ye(348),Ye(349)]),nr(pr,""[Ye(423)](vr[Ye(296)]),[Ye(451)]),nr(pr,"".concat(vr[Ye(305)]),["MeshPhysicalMaterial"]),nr(pr,""[Ye(423)](vr.clearcoatRoughness),[Ye(341)]),nr(pr,""[Ye(423)](vr[Ye(359)]),[Ye(341)]),pr),gr={"#include <lights_physical_fragment>":P[Ye(393)][Ye(300)]},_r=(nr(dr={},""[Ye(423)](vr.normal),{"#include <beginnormal_vertex>":Ye(431)[Ye(423)](vr[Ye(262)],Ye(448))}),nr(dr,"".concat(vr[Ye(412)]),{"#include <begin_vertex>":Ye(387)[Ye(423)](vr[Ye(412)],";\n  ")}),nr(dr,""[Ye(423)](vr[Ye(455)]),{"#include <begin_vertex>":Ye(316)[Ye(423)](vr[Ye(455)],Ye(383))}),nr(dr,""[Ye(423)](vr[Ye(311)]),{"gl_PointSize = size;":Ye(292)[Ye(423)](vr.pointSize,Ye(333))}),nr(dr,""[Ye(423)](vr[Ye(308)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = ".concat(vr[Ye(308)],Ye(392))}),nr(dr,""[Ye(423)](vr[Ye(371)]),{"#include <dithering_fragment>":Ye(443)[Ye(423)](vr.fragColor,Ye(392))}),nr(dr,""[Ye(423)](vr[Ye(396)]),{"vec3 totalEmissiveRadiance = emissive;":Ye(407)[Ye(423)](vr[Ye(396)],Ye(333))}),nr(dr,""[Ye(423)](vr[Ye(415)]),{"#include <roughnessmap_fragment>":Ye(291).concat(vr.roughness,";\n    ")}),nr(dr,""[Ye(423)](vr[Ye(281)]),{"#include <metalnessmap_fragment>":Ye(358).concat(vr.metalness,Ye(333))}),nr(dr,""[Ye(423)](vr.ao),{"#include <aomap_fragment>":Ye(366)[Ye(423)](vr.ao,Ye(333))}),nr(dr,""[Ye(423)](vr[Ye(363)]),{"#include <normal_fragment_maps>":Ye(332)[Ye(423)](vr[Ye(363)],Ye(264))[Ye(423)](vr.bump,", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),nr(dr,"".concat(vr[Ye(296)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(339)[Ye(423)](vr[Ye(296)],Ye(261)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(290)[Ye(423)](vr[Ye(296)],Ye(333))}),nr(dr,""[Ye(423)](vr[Ye(305)]),{"material.clearcoat = clearcoat;":Ye(295)[Ye(423)](vr[Ye(305)],";")}),nr(dr,""[Ye(423)](vr[Ye(352)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[Ye(423)](vr[Ye(352)],";")}),nr(dr,""[Ye(423)](vr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),dr),yr=(nr(hr={},""[Ye(423)](vr[Ye(412)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Ye(423)](vr[Ye(412)],", 1.0 );\n  ")}),nr(hr,""[Ye(423)](vr[Ye(455)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(297)[Ye(423)](vr[Ye(412)],Ye(392))}),nr(hr,"".concat(vr[Ye(308)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(309)[Ye(423)](vr.diffuse,Ye(392))}),nr(hr,"".concat(vr[Ye(371)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(309)[Ye(423)](vr[Ye(371)],Ye(392))}),hr),xr={clearcoat:[vr.clearcoat,vr.clearcoatNormal,vr[Ye(352)]]},Ir=Ye(402),br=Ye(268),Sr=Ye(335),wr=Ye(330),Mr=Ye(335),Rr=[Ye(386),Ye(400),"vertexShader",Ye(279),"patchMap","cacheKey",Ye(357)],Ar=function(n,t,e){var r=Ye;return n.split(t)[r(282)](e)},Er=function(n,t){var e;return new RegExp("\\b"[Ye(423)]((e=t,e[Ye(356)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b")).test(n)};function Tr(n){return n?n[Ye(356)](/\s/g,""):void 0}function Pr(){var n=["constructor","@@toPrimitive must return a primitive value.","bind","replace","silent","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","clearcoatNormal","getOwnPropertyDescriptors","1310826FWxdbA","csm_Normal","bump","__csm","iterator","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","MeshNormalMaterial","MathUtils","trim","debu","fragColor","test","substring","generateUUID","patchMap","setPrototypeOf","7SdimUk","enumerable","onBeforeCompile","csm_PositionRaw","apply","620ORuTwo",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","construct","counter","baseMaterial","\n    vec3 transformed = ","configurable","valueOf","toUpperCase","warn",";\n  ","ShaderChunk",'". Shader cannot compile.',"slice","emissive","isAlreadyExtended","info","defineProperty","fragmentShader","455040IIjRjY","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","return","csm_Clearcoat","done","defineProperties","\n    vec3 totalEmissiveRadiance = ","update","getPrototypeOf","_getPatchMapForMaterial","void main() {","position","csm_Position","name","roughness","csm_FragColor","csm_PointSize","814KNICGb","assign","_getMaterialDefine","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4314000ZABlSl","concat","find","getOwnPropertySymbols","gger","customProgramCacheKey","function","value","keys","\n    vec3 objectNormal = ","is not a constructor","cacheHash","toPrimitive","// #_CSM_#","includes","string","trace","\n            ","lastIndexOf","entries","exception","\n    #include <dithering_fragment>\n    gl_FragColor  = ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","ShaderMaterial","#define IS_UNKNOWN;\n","init",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","();\n              // #_CSM_#\n          ","length","MeshDepthMaterial","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","get","_generateMaterial","positionRaw","csm_DepthAlpha","csm_Emissive","RawShaderMaterial"," );\n    ","normal","csm_main_"," - (dot(","488UgDljk","this hasn't been initialised - super() hasn't been called","csm_AO","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",'CSM: Property "',"PointsMaterial","object","writable","1293570kmmoPE","Super expression must either be null or a function","console","call","propertyIsEnumerable","instanceID","uniforms","key","metalness","join","624081tKQmQz","Material","MeshStandardMaterial",'" is required to use output "',"_getCacheHash","__proto__","vertexShader","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","\n    gl_PointSize = ","Map","toString","material.clearcoat = ","depthAlpha","\n    gl_Position = ","push"," is not available in ","lights_physical_fragment","indexOf","forEach","csm_ClearcoatRoughness","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","clearcoat","type","void ","diffuse","\n    gl_FragColor = ","_patchShader","pointSize","symbol","Arguments","input","table","\n    vec4 csm_internal_positionUnprojected = ","undefined","csm_Metalness","clone","action",'{}.constructor("return this")( )',"while (true) {}","98811BFlycV","Derived constructors may only return object or undefined","#define IS_VERTEX;\n","filter","CustomShaderMaterial does not support RawShaderMaterial","\n    \n            ","cacheKey","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","MeshPhongMaterial","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ",";\n    ","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","303VzxBlJ","MeshMatcapMaterial","isArray","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","stateObject","MeshPhysicalMaterial","MeshLambertMaterial","error","prototype","create","set",". Shader cannot compile.","MeshToonMaterial","ShadowMaterial","needsUpdate","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","clearcoatRoughness"];return(Pr=function(){return n})()}function Dr(n){return n[Ye(356)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=Ye;!function(n,t){var e=cr;if(typeof t!==e(428)&&null!==t)throw new TypeError(e(274));n[e(344)]=Object[e(345)](t&&t[e(344)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(399)](n,"prototype",{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=cr,u=n.baseMaterial,l=n[s(400)],f=n[s(289)],p=n.uniforms,d=n[s(375)],h=n[s(329)],v=n[s(357)],m=rr(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e.message[t(301)](t(432))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(306)]===s(458))throw new Error(s(327));(function(n,t){var e=Ye;e(450),Object[e(419)](n,t);var r=Object[e(409)](t);Object.entries(Object[e(360)](r))[e(326)]((function(n){var t=e,r="function"==typeof n[1][t(453)],o=typeof n[1][t(346)]===t(428),i="function"==typeof n[1][t(429)],a=n[0]===t(353);return(r||o||i)&&!a}))[e(302)]((function(t){var r=e;typeof n[t[0]]!==r(428)&&Object[r(399)](n,t[0],t[1])}))})(sr(t=a.call(this)),e),t[s(364)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:P[s(368)][s(374)](),type:e[s(306)],isAlreadyExtended:(r=e[s(379)],o=Ye,i=r[o(294)]()[o(369)](),!(0===i[o(373)](i[o(301)]("{")+1,i[o(440)]("}"))[o(369)]()[o(450)])),cacheHash:"",silent:v},t[s(279)]=er(er({},t[s(279)]||{}),p||{});var g=t[s(364)],_=g[s(400)],y=g[s(289)],x=t[s(279)];return t[s(364)][s(433)]=t[s(287)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(408),value:function(){var n=t,e=arguments[n(450)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(279)]=e[n(279)]||this[n(279)],Object[n(419)](this[n(364)],e);var r=this[n(364)],o=r[n(400)],i=r[n(289)],a=this[n(279)],c=this[n(287)]();this[n(364)][n(433)]=c,this[n(454)](o,i,a)}},{key:t(319),value:function(){var n=t,e={baseMaterial:this[n(364)][n(386)],fragmentShader:this[n(364)][n(400)],vertexShader:this[n(364)][n(289)],uniforms:this[n(279)],silent:this.__csm[n(357)],patchMap:this[n(364)][n(375)],cacheKey:this.__csm[n(329)]},r=new(this[n(353)])(e);return Object[n(419)](this,r),r}},{key:t(287),value:function(){var n=t,e=this.__csm,r=e[n(400)],o=e[n(289)],i=this[n(279)],a=[Tr(r),Tr(o),i][n(326)]((function(n){return void 0!==n}));return a[n(450)]>0?Mn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(454),value:function(n,e,r){var o=t,i=this;this[o(279)]=r||{},this[o(427)]=function(){var n=o;return i[n(364)][n(433)]};var a=function(t){var r=o;try{var a=i[r(420)]();if(n){var c=i[r(310)](Dr(n),t[r(400)],!0);t[r(400)]=a+c}if(e){var s=i[r(310)](Dr(e),t.vertexShader);t[r(289)]=r(325)+s,t[r(289)]=a+t.vertexShader}t.uniforms=er(er({},t.uniforms),i[r(279)]),i[r(279)]=t[r(279)]}catch(u){console[r(343)](u)}};if(this.__csm[o(397)]){var c=this[o(379)];this[o(379)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(350)]=!0}},{key:t(310),value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this[o(410)]()),this[o(364)][o(375)]);Object[o(441)](xr)[o(302)]((function(t){var e=o,r=ir(t,2),a=r[0],c=r[1][e(424)]((function(t){return Er(n,t)}));if(c&&!i[a])throw new Error(e(269)[e(423)](a,e(286))[e(423)](c,e(394)))})),Object[o(441)](gr).forEach((function(n){var t=ir(n,2),e=t[0],r=t[1];a=Ar(a,e,r)})),Object[o(430)](c).forEach((function(t){var e=o;Object[e(430)](c[t])[e(302)]((function(r){var o=e,s=mr[t],u=i[o(364)].type;if("*"===t||Er(n,t)){if(!(!s||Array[o(338)](s)&&s[o(436)](u)||"*"===s))throw new Error("CSM: "[o(423)](t,o(299))[o(423)](u,o(347)));a=Ar(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(263)+this[o(364)][o(278)][o(356)](/-/g,"_"),h=n[o(356)](/void\s+main\s*\(\s*\)/g,o(307).concat(d,"()")),v=n[o(436)]("void main()"),m=a[o(436)](o(435));return v&&(m&&this[o(364)].isAlreadyExtended?(a=a[o(356)](o(411),o(439)[o(423)](h,"\n            \n            void main() {\n          ")),s=a,u=o(435),l=o(439)[o(423)](d,"();\n            // #_CSM_#\n          "),f=Ye,p=s.lastIndexOf(u),a=-1===p?s:s.substring(0,p)+l+s[f(373)](p+u[f(450)])):a=a[o(356)](o(411),o(334).concat(r?Mr:Sr,o(444))[o(423)](Ir,o(328))[o(423)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(423)](br,o(452))[o(423)](r?"\n    \n":wr,o(304))[o(423)](d,o(449)))),a}},{key:t(420),value:function(){var n=t,e=this[n(364)][n(306)];return e?"#define IS_"[n(423)](e[n(390)](),";\n"):n(446)}},{key:t(410),value:function(){var n=t;return this.__csm[n(306)]===n(445)?yr:_r}}],i=cr,r&&ar(e[i(344)],r),o&&ar(e,o),Object[i(399)](e,i(344),{writable:!1}),c}(P[Ye(284)]);function Or(n){function t(n){var e=cr;if(typeof n===e(437))return function(n){}[e(353)](e(322))[e(381)](e(385));1!==(""+n/n)[e(450)]||n%20==0?function(){return!0}[e(353)](e(370)+e(426))[e(276)](e(320)):function(){return!1}[e(353)](e(370)+"gger")[e(381)](e(340)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cr=kr;!function(n,t){const e=kr,r=jr();for(;;)try{if(938179===parseInt(e(306))/1*(-parseInt(e(329))/2)+-parseInt(e(318))/3+parseInt(e(326))/4*(parseInt(e(332))/5)+-parseInt(e(305))/6+-parseInt(e(334))/7*(parseInt(e(324))/8)+-parseInt(e(322))/9*(-parseInt(e(330))/10)+-parseInt(e(347))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Br(this,(function(){const n=kr,t=new RegExp(n(345)),e=new RegExp(n(331),"i"),r=Lr("init");t[n(336)](r+n(340))&&e[n(336)](r+n(327))?Lr():r("0")}))()}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kr(325)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kr(n,t){const e=jr();return(kr=function(n,t){return e[n-=297]})(n,t)}Fr(void 0,(function(){const n=kr;let t;try{t=Function(n(321)+n(320)+");")()}catch(o){t=window}const e=t[n(323)]=t[n(323)]||{},r=[n(301),n(349),n(310),n(344),n(338),n(304),n(311)];for(let i=0;i<r[n(307)];i++){const t=Fr[n(342)][n(299)][n(317)](Fr),o=r[i],a=e[o]||t;t[n(337)]=Fr[n(317)](Fr),t.toString=a[n(341)].bind(a),e[o]=t}}))();const Ur=[Cr(315)];function jr(){const n=["984294QhWwLA","5hfFNLI","length","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","stateObject","info","trace","\n      ","clearcoat","color","object","while (true) {}","bind","2313999PcTLeP","#ff00fc",'{}.constructor("return this")( )',"return (function() ","1827PtJQQF","console","1192PdbRjr","apply","356848jptqKl","input","call","471026DwkMZY","91340aLxhyC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","80ltuUiV","counter","3122TixCDR","primitive","test","__proto__","exception","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","chain","toString","constructor","clearcoatRoughness","error","function *\\( *\\)","gger","1804154qcSQIN","MeshPhysicalMaterial","warn","roughness","debu","prototype","string","log","action","metalness","table"];return(jr=function(){return n})()}const Nr=nn({__name:"index",props:{color:{default:Cr(319)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:P[t(348)],metalness:e[t(303)],roughness:e[t(297)],clearcoat:e[t(313)],clearcoatRoughness:e[t(343)],color:e[t(314)],vertexShader:t(308),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(312)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(339)},o=new zr(r);return ln((()=>{const n=t;o[n(314)].setStyle(e[n(314)]),o[n(303)]=e[n(303)],o[n(297)]=e[n(297)],o[n(313)]=e[n(313)],o[n(343)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return on(),an(r(335),{object:J(o)},null,8,Ur)}}});function Lr(n){function t(n){const e=kr;if(typeof n===e(300))return function(n){}[e(342)](e(316))[e(325)](e(333));1!==(""+n/n)[e(307)]||n%20==0?function(){return!0}.constructor("debu"+e(346))[e(328)](e(302)):function(){return!1}[e(342)](e(298)+e(346)).apply(e(309)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Vr,r=Gr();;)try{if(790460===-parseInt(e(265))/1+parseInt(e(247))/2+parseInt(e(253))/3*(-parseInt(e(256))/4)+-parseInt(e(260))/5+parseInt(e(269))/6+parseInt(e(266))/7*(parseInt(e(271))/8)+parseInt(e(250))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hr(this,(function(){var n=Vr,t=new RegExp(n(251)),e=new RegExp(n(255),"i"),r=$r("init");t[n(252)](r+n(278))&&e[n(252)](r+n(275))?$r():r("0")}))()}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Vr(276)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(){var n=["1504403ANSKAi","120211IhNFYL","stateObject","log","4778832SsLuKk","toString","376WRzixQ","counter","prototype","constructor","input","apply","length","chain","2049738qcMZzy","string","call","1268253znqtzp","function *\\( *\\)","test","1227oouOBM","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3912lbsSac","gger","__proto__","info","372620fMdSyZ","debu","console","error","while (true) {}"];return(Gr=function(){return n})()}function Vr(n,t){var e=Gr();return(Vr=function(n,t){return e[n-=247]})(n,t)}function $r(n){function t(n){var e=Vr;if(typeof n===e(248))return function(n){}[e(274)](e(264))[e(276)](e(272));1!==(""+n/n)[e(277)]||n%20==0?function(){return!0}.constructor("debu"+e(257))[e(249)]("action"):function(){return!1}[e(274)](e(261)+"gger")[e(276)](e(267)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Zr(void 0,(function(){var n,t=Vr;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(262)]=n.console||{},r=[t(268),"warn",t(259),t(263),"exception","table","trace"],o=0;o<r[t(277)];o++){var i=Zr[t(274)][t(273)][t(254)](Zr),a=r[o],c=e[a]||i;i[t(258)]=Zr.bind(Zr),i[t(270)]=c.toString[t(254)](c),e[a]=i}}))();export{qe as C,Nr as _,Jn as a,lt as b,wt as c,Dt as d,Nt as e,Jt as f,He as g,Te as h,vt as u};

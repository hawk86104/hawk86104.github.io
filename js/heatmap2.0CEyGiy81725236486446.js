import{P as t}from"./tweakpane.yHWGBmom1725236486446.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.Sy4YoNOZ1725236486446.js";import{_ as r}from"./heatmap.js-fix.u6rO9dXL1725236486446.js";import{h as i,a6 as s,bU as c,M as u,q as a}from"./three.0IuNGJsA1725236486446.js";import{r as p}from"./utils.6uu2JhPr1725236486446.js";import{d as f}from"./pinia.OsYF28_k1725236486446.js";import{b as l,d as h,a1 as d,o as m,D as g,J as y,u as v,F as b,q as w,U as _,N as j,P as I,H as x,L as M,a4 as D,r as S,j as z,g as E,m as R}from"./@vue.9bHx4gg21725236486446.js";import{c as A,d as F,a as P}from"./three-mesh-bvh.tu04YrxN1725236486446.js";import{_ as k}from"./@fesjs.W9B5RBCy1725236486446.js";import"./@tresjs.DDzpLB7Q1725236486446.js";import"./@vueuse.XXpXaOwX1725236486446.js";import"./three-custom-shader-material.52Yxne6X1725236486446.js";import"./object-hash.p3nCq7ez1725236486446.js";import"./@amap.YiJorLHg1725236486446.js";import"./jszip.F8iULAGn1725236486446.js";import"./glsl-tokenizer.5A8V64LF1725236486446.js";import"./glsl-token-string.UAuwSUH71725236486446.js";import"./glsl-token-functions.GpZWHJDq1725236486446.js";import"./vue-router.g5JZ8VPj1725236486446.js";import"./lodash-es.nFpJXAf-1725236486446.js";import"./@qlin.yHhFDldE1725236486446.js";import"./@floating-ui.BPbuo5Gx1725236486446.js";import"./@juggle.7yjBMqoW1725236486446.js";!function(t,n){const e=B,o=U();for(;;)try{if(704068===parseInt(e(397))/1+parseInt(e(434))/2*(parseInt(e(419))/3)+parseInt(e(429))/4*(-parseInt(e(433))/5)+-parseInt(e(421))/6+parseInt(e(388))/7+parseInt(e(387))/8+parseInt(e(391))/9*(parseInt(e(403))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const O=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function U(){const t=["stateObject","6924282MHvMeA","gger","getValueAt","body","bind","setData",'{}.constructor("return this")( )',"createElement","100rJhxWT","appendChild","prototype","apply","68330qvehqW","2ZzSNBb","call","299208XmFSBg","1197896FzvPAS","toString","position","8064udjmXi","absolute","none","return (function() ","constructor","push","301645lNlkcK","log","exception","console","top","info","7310lXAxOd","warn","randInt","function *\\( *\\)","yellow","rgb(255,0,0)","counter","length","trace","__proto__","action","left","table","input","_config","chain","3103845REakJC"];return(U=function(){return t})()}!function(){O(this,(function(){const t=B,n=new RegExp(t(406)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=Z("init");n.test(o+t(418))&&e.test(o+t(416))?Z():o("0")}))()}();const T=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[B(432)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function B(t,n){const e=U();return(B=function(t,n){return e[t-=387]})(t,n)}T(void 0,(function(){const t=B,n=function(){const t=B;let n;try{n=Function(t(394)+t(427)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(400)]||{},o=[t(398),t(404),t(402),"error",t(399),t(415),t(411)];for(let r=0;r<o[t(410)];r++){const n=T[t(395)][t(431)].bind(T),i=o[r],s=e[i]||n;n[t(412)]=T[t(425)](T),n[t(389)]=s[t(389)][t(425)](s),e[i]=n}}))();const X=(t,n)=>t[B(423)](n)+-10;function Z(t){function n(t){const e=B;if("string"==typeof t)return function(t){}[e(395)]("while (true) {}").apply(e(409));1!==(""+t/t)[e(410)]||t%20==0?function(){return!0}.constructor("debu"+e(422))[e(435)](e(413)):function(){return!1}[e(395)]("debu"+e(422)).apply(e(420)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=H,o=G();for(;;)try{if(628150===-parseInt(e(330))/1+-parseInt(e(354))/2+-parseInt(e(343))/3+parseInt(e(342))/4+parseInt(e(353))/5+-parseInt(e(337))/6*(parseInt(e(351))/7)+parseInt(e(347))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(331)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){q(this,(function(){const t=H,n=new RegExp(t(325)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=V(t(328));n.test(o+"chain")&&e[t(322)](o+t(346))?V():o("0")}))()}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();W(void 0,(function(){const t=H;let n;try{n=Function(t(326)+t(348)+");")()}catch(r){n=window}const e=n[t(338)]=n.console||{},o=[t(324),t(335),"info",t(345),t(336),t(349),t(323)];for(let i=0;i<o[t(329)];i++){const n=W.constructor[t(339)].bind(W),r=o[i],s=e[r]||n;n[t(344)]=W[t(350)](W),n[t(352)]=s[t(352)][t(350)](s),e[r]=n}}))();const $=f("buildingsHeatmap",(()=>{const t=l(!1),n=l(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t[H(355)]=n},setTemperature:function(t){n[H(355)]=t}}}));function H(t,n){const e=G();return(H=function(t,n){return e[t-=322]})(t,n)}function V(t){function n(t){const e=H;if(typeof t===e(334))return function(t){}[e(327)]("while (true) {}")[e(331)](e(332));1!==(""+t/t)[e(329)]||t%20==0?function(){return!0}[e(327)](e(333)+e(341)).call("action"):function(){return!1}[e(327)](e(333)+e(341))[e(331)](e(340)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function G(){const t=["1710245YqOCgz","458002PlHaIB","value","test","trace","log","function *\\( *\\)","return (function() ","constructor","init","length","1217242LHgszF","apply","counter","debu","string","warn","exception","12uRyNPG","console","prototype","stateObject","gger","4068368OTDBpp","823533dytraT","__proto__","error","input","17592984YpMDfy",'{}.constructor("return this")( )',"table","bind","4232760sssFBV","toString"];return(G=function(){return t})()}const L=J;function N(){const t=["attributes","land","info","children","Texture","function *\\( *\\)","debu","apply","mergeGeometries","39uvWrgg",'{}.constructor("return this")( )',"counter","test","setShowDiv","disposeBoundsTree","normal","opacity","height","_renderer","bind","ShaderMaterial","input","setTemperature","warn","primitive","needsUpdate","canvas","Mesh","console","142924Povish","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","913VpWqVq","22mPwFyN","matrix","1074AFXXeJ","2791NQwojj","24fyanGd","_config","computeBoundsTree","applyMatrix4","while (true) {}","gger","value","1400166VPluAM","28785SozkiG","trace","city","action","log","length","196WoATRO","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","36240RHrUUG","prototype","geometry","clone","11363183XWEFjZ","$patch","uniforms","model","toString","constructor","call","DoubleSide","155912waUxtK","BufferGeometry","object","chain","error","__proto__","stateObject","width"];return(N=function(){return t})()}!function(t,n){const e=J,o=N();for(;;)try{if(521973===parseInt(e(287))/1*(parseInt(e(284))/2)+parseInt(e(261))/3*(parseInt(e(281))/4)+-parseInt(e(296))/5*(parseInt(e(286))/6)+-parseInt(e(302))/7*(parseInt(e(316))/8)+parseInt(e(295))/9+-parseInt(e(304))/10*(parseInt(e(283))/11)+parseInt(e(288))/12*(parseInt(e(308))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const C=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(259)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){C(this,(function(){const t=J,n=new RegExp(t(257)),e=new RegExp(t(303),"i"),o=nt("init");n[t(264)](o+t(247))&&e.test(o+t(273))?nt():o("0")}))()}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(259)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function J(t,n){const e=N();return(J=function(t,n){return e[t-=246]})(t,n)}K(void 0,(function(){const t=J;let n;try{n=Function("return (function() "+t(262)+");")()}catch(r){n=window}const e=n[t(280)]=n.console||{},o=[t(300),t(275),t(254),t(248),"exception","table",t(297)];for(let i=0;i<o[t(301)];i++){const n=K.constructor[t(305)][t(271)](K),r=o[i],s=e[r]||n;n[t(249)]=K[t(271)](K),n.toString=s[t(312)].bind(s),e[r]=n}}))();const Y=["object","rotation-x"],Q=[L(246)],tt=h({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=L;(()=>{const t=J;s[t(317)][t(305)][t(290)]=A,s[t(317)][t(305)][t(266)]=F,a[t(305)].raycast=P})();const e=t,o=((t=250,n=250,e=!0)=>{const o=B,i=document[o(428)]("heatmap-canvas");return i.style[o(390)]=o(392),!e&&(i.style.display=o(393)),i.style[o(401)]="0",i.style[o(414)]="0",document[o(424)][o(430)](i),r.create({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:o(407),1:o(408)}})})();((t,n)=>{const e=B;if(!n){let o=0;for(n=[];o<1e3;)n[e(396)]({x:i[e(405)](1,t[e(417)].width),y:i[e(405)](1,t[e(417)].height),value:i[e(405)](-10,36)}),o++}t[e(426)]({max:36,min:-10,data:n})})(o);const f=new(s[n(256)])(o[n(270)][n(278)]);f[n(277)]=!0;const l=e[n(311)][n(298)][n(307)]();delete l[n(306)][n(252)][n(267)],delete l[n(306)].attributes.uv;const h=l[n(306)][n(307)]()[n(291)](l[n(285)]),w=e.model[n(253)].clone();delete w.geometry[n(252)][n(267)];const _=w[n(306)].clone()[n(291)](w[n(285)]),j=c[n(260)]([h,_]);j[n(291)]((new u).makeRotationX(Math.PI/2)),p(j),j.computeBoundsTree();const I=(t=>{const o=n;return new(s[o(272)])({vertexShader:o(282),fragmentShader:"\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t",uniforms:{uOpacity:{value:e.opacity},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:s[o(315)]})})(f),x=new(s[n(279)])(j,I);d((()=>{const t=n;e[t(268)]&&(I[t(310)].uOpacity[t(294)]=e[t(268)])}));const M=$(),D=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(289)][e(251)],y:(1-t.uv.y)*o._config[e(269)]};console.log("数值：",t),console.log("数值———：",X(o,n)),M[e(274)](X(o,n))}},S=t=>{t&&M[n(309)]({showDiv:!0})},z=t=>{t&&M[n(265)](!1)};return(t,o)=>{const r=n;return m(),g(b,null,[y(r(276),{object:v(x),"rotation-x":-Math.PI/2,onPointerMove:D,onPointerEnter:S,onPointerLeave:z},null,40,Y),y(r(276),{object:e[r(311)].model[r(255)][0][r(307)]()},null,8,Q)],64)}}});function nt(t){function n(t){const e=J;if("string"==typeof t)return function(t){}[e(313)](e(292))[e(259)](e(263));1!==(""+t/t).length||t%20==0?function(){return!0}[e(313)]("debugger")[e(314)](e(299)):function(){return!1}[e(313)](e(258)+e(293))[e(259)](e(250)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const et=k({__name:"dataDiv",setup(t){const n=$(),e=l({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return w((()=>{window.addEventListener("mousemove",o)})),_((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>j((m(),g("div",{class:"title",style:M(e.value)},"温度："+x(v(n).temperature)+"℃ ",5)),[[I,v(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]);!function(t,n){const e=st,o=it();for(;;)try{if(663176===parseInt(e(157))/1*(parseInt(e(153))/2)+parseInt(e(162))/3+parseInt(e(173))/4+-parseInt(e(178))/5*(parseInt(e(151))/6)+-parseInt(e(149))/7+parseInt(e(192))/8+parseInt(e(159))/9*(-parseInt(e(184))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ot=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(183)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){ot(this,(function(){const t=st,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(166),"i"),o=ut(t(186));n[t(190)](o+t(169))&&e[t(190)](o+t(182))?ut():o("0")}))()}();const rt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(183)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function it(){const t=["1828696ULMxEh","567630cnbjrs","counter","20118MfYDVi","console","1821796oDEjcW","warn","#000","model","1OlCbRz","exception","9nLHhaZ","gger","__proto__","2277612GwKDMq","trace","city","opacity","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","error","chain","bind","value","透明度","4672468WiXUcF","addBinding",'{}.constructor("return this")( )',"constructor","debu","30cfUDKX","action","length","log","input","apply","23024220QKfMmb","info","init","builds","string","return (function() ","test","toString"];return(it=function(){return t})()}function st(t,n){const e=it();return(st=function(t,n){return e[t-=149]})(t,n)}rt(void 0,(function(){const t=st,n=function(){const t=st;let n;try{n=Function(t(189)+t(175)+");")()}catch(e){n=window}return n}(),e=n[t(152)]=n[t(152)]||{},o=[t(181),t(154),t(185),t(168),t(158),"table",t(163)];for(let r=0;r<o[t(180)];r++){const n=rt[t(176)].prototype.bind(rt),i=o[r],s=e[i]||n;n[t(161)]=rt[t(170)](rt),n[t(191)]=s[t(191)].bind(s),e[i]=n}}))();const ct=h({__name:"heatmap2",async setup(r){const i=st;let s,c;const u=l(!1),a=([s,c]=D((()=>o())),s=await s,c(),s);u[i(171)]=!0;const p=S({width:1,color:i(155),opacity:1,show:!0}),f=S({opacity:.9});return new t({title:"参数",expanded:!0})[i(174)](f,i(165),{label:i(172),min:0,max:1,step:.1}),(t,o)=>{const r=i;return m(),g(b,null,[z(e,{showBuildings:!1,autoRotate:!1},{ability:E((()=>[z(tt,R({model:v(a)},f),null,16,[r(156)]),z(n,R(p,{builds:v(a)[r(164)]}),null,16,[r(187)])])),_:1}),z(et)],64)}}});function ut(t){function n(t){const e=st;if(typeof t===e(188))return function(t){}[e(176)](e(167))[e(183)](e(150));1!==(""+t/t)[e(180)]||t%20==0?function(){return!0}[e(176)]("debu"+e(160)).call(e(179)):function(){return!1}.constructor(e(177)+e(160))[e(183)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{ct as default};

import"./@fesjs.HUfyfxyE1722507394274.js";import{_ as t}from"./jszip.BxDgYeH81722507394274.js";import{F as n}from"./file-saver.D1ibJiAf1722507394274.js";import{a6 as e,aJ as s}from"./three.Brogx0uK1722507394274.js";const o=a;function r(){const t=["files","20265TIzxaT","type","app.json","uuid","31294ALAvNX","function *\\( *\\)","2401560aohknd","data","setResponseType","counter","url:","application/octet-stream","generateAsync","enabled","FileLoader","toLowerCase","image/png","table","772orfjQs","63QzDqNN","base64","onerror","endsWith","action","warn","apply","load","forEach","stringify","test","WEBP","data:image/png;base64,","非标准文件：不存在 app.json","data:image/JPEG;base64,","scene","bind","get","then","length","console","Cache","async","data:","file","image/gif","slice","blob","exception",";base64,","3460ENhlZs","constructor","push","BufferGeometry","data:image/jpeg;base64,","result","string","catch","onloadend","error","__proto__","214872LvEWeI","while (true) {}","url","pop","parse","data:image/","toString","folder",".json","log","readAsDataURL","images","init","PNG","data:image/GIF;base64,","startsWith","split","config.zip","loadAsync","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","data:image/gif;base64,","toUpperCase","name","chain","debu","geometries","url:geometries/","1120776uTVcAV","trace",'{}.constructor("return this")( )',"JPEG","image/jpeg","35NgSfRz","prototype","stateObject","gger","data:image/webp;base64,","image/bmp","98516RcSOjJ","6773976VkuiSr"];return(r=function(){return t})()}function a(t,n){const e=r();return(a=function(t,n){return e[t-=284]})(t,n)}!function(t,n){const e=a,s=r();for(;;)try{if(572937===-parseInt(e(327))/1*(-parseInt(e(312))/2)+parseInt(e(294))/3+parseInt(e(326))/4*(parseInt(e(308))/5)+parseInt(e(306))/6+parseInt(e(299))/7*(parseInt(e(368))/8)+parseInt(e(314))/9+-parseInt(e(357))/10*(parseInt(e(305))/11))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const i=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){i(this,(function(){const t=a,n=new RegExp(t(313)),e=new RegExp(t(286),"i"),s=h(t(380));n[t(337)](s+t(290))&&e[t(337)](s+"input")?h():s("0")}))()}();const c=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[a(333)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function u(t){const n=o,s=new(e[n(322)]);return new Promise(((e,o)=>{const r=n;s[r(334)](t,(t=>e(JSON[r(372)](t))),void 0,(t=>o(t)))}))}async function l(t){const n=o,s=new(e[n(322)]);return new Promise(((e,r)=>{const a=n;s[a(316)](a(354)),s[a(334)](t,(n=>{const s=a,i=new FileReader;i[s(365)]=()=>{const n=s,r=function(t){const n=o,e=t[n(384)](".").pop()[n(323)]();return{jpg:"image/jpeg",jpeg:n(298),png:n(324),gif:n(352),bmp:n(304),webp:"image/webp"}[e]||n(319)}(t),a=i[n(362)][n(384)](",")[1];e(n(350)+r+";base64,"+a)},i[s(329)]=t=>{r(t)},i.readAsDataURL(n)}),void 0,(t=>r(t)))}))}c(void 0,(function(){const t=a,n=function(){const t=a;let n;try{n=Function("return (function() "+t(296)+");")()}catch(e){n=window}return n}(),e=n[t(347)]=n[t(347)]||{},s=[t(377),t(332),"info",t(366),t(355),t(325),t(295)];for(let o=0;o<s[t(346)];o++){const n=c[t(358)][t(300)][t(343)](c),r=s[o],a=e[r]||n;n[t(367)]=c[t(343)](c),n.toString=a[t(374)][t(343)](a),e[r]=n}}))(),e[o(348)][o(321)]=!0;const p=n=>{const e=o,r=new s;return r[e(316)](e(354)),new Promise(((s,o)=>{r[e(334)](n,(async n=>{s(await t.loadAsync(n))}),void 0,(t=>o(t)))}))},f=t=>{const n=o,e=t.substring(0,15),s=n(361),r=n(341),a=n(339),i=n(287),c=n(382),u=n(303);return s[n(383)](e)||r[n(383)](e)?n(297):a[n(383)](e)||"data:image/PNG;base64,".startsWith(e)?n(381):i[n(383)](e)||c[n(383)](e)?"GIF":u[n(383)](e||"data:image/WEBP;base64,"[n(383)](e))?n(338):"Unknown"},g=e=>{const s=o,r=[];e[s(342)][s(292)]&&e[s(342)][s(292)].forEach((t=>{const n=s;t[n(309)]===n(360)&&(r[n(359)]({uuid:t.uuid,data:t.data}),t[n(315)]=n(293)+t[n(311)]+n(376))}));const a=[];e[s(342)].images&&e[s(342)].images.forEach((t=>{const n=s;t.url&&(a[n(359)]({uuid:t[n(311)],url:t[n(370)]}),t.url[n(309)]?t[n(370)]="url:images/"+t[n(311)]+"."+t[n(370)][n(309)]+n(376):t.url="url:images/"+t[n(311)]+"."+f(t[n(370)]))}));const i=new t;if(r.length){const t=i.folder(s(292));r[s(335)]((n=>{const e=s;t[e(351)](n[e(311)]+e(376),JSON[e(336)](n.data))}))}if(a[s(346)]){const t=i[s(375)](s(379));a[s(335)]((n=>{const e=s;n.url[e(309)]?t.file(n[e(311)]+"."+n[e(370)][e(309)]+".json",JSON[e(336)](n.url)):t[e(351)](n.uuid+"."+f(n[e(370)]),n.url.split(e(356))[e(371)](),{base64:!0})}))}const c=JSON[s(336)](e);return i[s(351)](s(310),c),i[s(320)]({type:s(354)})[s(345)]((t=>{const e=s;n.saveAs(t,e(284))}))},m=(t,n,e)=>{t[o(292)]<=0&&t.images<=0&&e(n)},d=(n,e)=>{const s=o;let r=null;return t[s(285)](n)[s(345)]((t=>{const n=s;t[n(307)][n(310)]?t.files[n(310)][n(349)](n(363))[n(345)]((s=>{var a,i;const c=n;r=JSON[c(372)](s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(342)][s(292)])||n.forEach((t=>{const n=s;t[n(315)].startsWith(n(318))&&r[n(292)]++})),null==(e=t[s(342)].images)||e[s(335)]((t=>{const n=s;t[n(370)].startsWith(n(318))&&r[n(379)]++})),r})(r);m(u,r,e),null==(a=r.scene[c(292)])||a[c(335)]((n=>{const s=c;n[s(315)][s(383)](s(318))&&t[s(307)][n[s(315)][s(353)](4)][s(349)](s(363)).then((t=>{const o=s;n[o(315)]=JSON[o(372)](t),u[o(292)]--,m(u,r,e)}))})),null==(i=r[c(342)][c(379)])||i[c(335)]((n=>{const s=c;if(n.url.startsWith(s(318))){const o=n[s(370)][s(353)](4);o[s(330)](".json")?t[s(307)][o][s(349)]("string").then((t=>{const o=s;n.url=JSON[o(372)](t),u[o(379)]--,m(u,r,e)})):t[s(307)][o][s(349)](s(328))[s(345)]((t=>{const a=s,i=o.split("."),c=i[i[a(346)]-1][a(288)]();n[a(370)]=a(373)+c+a(356)+t,u.images--,m(u,r,e)}))}}))})):console[n(366)](n(340))}),(t=>{const e=s;console.error(n[e(289)]+": "+t.message)})),r};function h(t){function n(t){const e=a;if("string"==typeof t)return function(t){}[e(358)](e(369))[e(333)](e(317));1!==(""+t/t)[e(346)]||t%20==0?function(){return!0}[e(358)](e(291)+e(302)).call(e(331)):function(){return!1}[e(358)]("debu"+e(302))[e(333)](e(301)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as a,l as b,g as e,f as g,d as i,u as l};

import{c7 as t,a3 as n,C as e,k as r}from"./three.VhLXWX0H1735906732968.js";import{b as o}from"./@tresjs.XlmHwCPa1735906732968.js";import{R as c}from"./all.three.PzCeqUTP1735906732968.js";import{d as a,b as i,a4 as s,a1 as u,o as f,D as l,J as p,m,u as d}from"./@vue.yG49nQHr1735906732968.js";!function(t,n){const e=g,r=x();for(;;)try{if(351014===-parseInt(e(270))/1*(-parseInt(e(276))/2)+parseInt(e(290))/3+-parseInt(e(280))/4*(parseInt(e(264))/5)+-parseInt(e(296))/6*(-parseInt(e(304))/7)+parseInt(e(286))/8*(parseInt(e(303))/9)+-parseInt(e(269))/10+parseInt(e(285))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(300)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=g,n=new RegExp(t(283)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(279));n[t(262)](r+t(287))&&e[t(262)](r+"input")?y():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(300)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(t,n){const e=x();return(g=function(t,n){return e[t-=262]})(t,n)}h(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function("return (function() "+t(292)+");")()}catch(e){n=window}return n}(),e=n[t(268)]=n[t(268)]||{},r=[t(297),t(299),"info",t(274),"exception",t(273),"trace"];for(let o=0;o<r.length;o++){const n=h[t(295)].prototype[t(284)](h),c=r[o],a=e[c]||n;n[t(301)]=h[t(284)](h),n[t(271)]=a[t(271)].bind(a),e[c]=n}}))();function x(){const t=["959985GQpoYV","fragmentShader",'{}.constructor("return this")( )',"gger","#include <project_vertex>","constructor","13290LVlQHs","log","string","warn","apply","__proto__","vertexShader","218367ZKbLRg","1148VcCIfM","test","action","5zXSCku","while (true) {}","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","stateObject","console","5902370mBnyrB","341084ifNWwP","toString","length","table","error","counter","2CbmWJg","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","init","1860540KWORHH","debu","void main() {","function *\\( *\\)","bind","3935624DnrxQR","8lpSEwt","chain","replace","#include <emissivemap_fragment>"];return(x=function(){return t})()}function y(t){function n(t){const e=g;if(typeof t===e(298))return function(t){}[e(295)](e(265))[e(300)](e(275));1!==(""+t/t)[e(272)]||t%20==0?function(){return!0}[e(295)](e(281)+e(293)).call(e(263)):function(){return!1}[e(295)](e(281)+e(293)).apply(e(267)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const I=S;!function(t,n){const e=S,r=w();for(;;)try{if(662146===parseInt(e(411))/1*(parseInt(e(454))/2)+-parseInt(e(439))/3+-parseInt(e(459))/4*(parseInt(e(407))/5)+-parseInt(e(448))/6+-parseInt(e(449))/7*(parseInt(e(463))/8)+parseInt(e(434))/9*(-parseInt(e(402))/10)+parseInt(e(455))/11*(parseInt(e(457))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(443)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=S,n=new RegExp(t(452)),e=new RegExp(t(421),"i"),r=R(t(409));n[t(423)](r+t(461))&&e[t(423)](r+t(426))?R():r("0")}))()}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function w(){const t=["update","2778975SRUvMF","aoMap","visible","uniforms","apply","onBeforeCompile","tmsmRef","tpgRef","prototype","2429052MqpuIE","589267uAeQDW","wrapS","wrapT","function *\\( *\\)","reflectorDiffuse","484TteLOG","957HUCWRh","add","337644fomzrN","bind","26332uNFXas","warn","chain","textureMatrix","8QGqBZI","tmRef","attributes","5579830vjbRZk","string","stateObject","console","return (function() ","740dudIdV","trace","init","primitive","4801YEyJyN","error","#444","textureMatrixUniform","constructor","gger","#ffffff","log","channel","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"test","mirror","rotation-x","input","value","reflectMap","table","assign","call","TresMeshStandardMaterial","info","9Ilngpo","color","__proto__","object"];return(w=function(){return t})()}_(void 0,(function(){const t=S,n=function(){const t=S;let n;try{n=Function(t(406)+t(422)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(405)]||{},r=[t(418),t(460),t(433),t(412),"exception",t(429),t(408)];for(let o=0;o<r.length;o++){const n=_[t(415)][t(447)][t(458)](_),c=r[o],a=e[c]||n;n[t(436)]=_[t(458)](_),n[t(420)]=a[t(420)].bind(a),e[c]=n}}))();const C=[I(425)],M=[I(437),I(441)];function S(t,n){const e=w();return(S=function(t,n){return e[t-=401]})(t,n)}const j=a({__name:I(453),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:I(417)}},async setup(a){const v=I;let h,x;const y=a,b=new t(9.5,10),_=i(),w=i(),S=i(),j=new c,R={mirror:{value:y[v(424)]},mixStrength:{value:y.mixStrength}},E=([h,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var z=0;z<3;z++)E[z][v(450)]=n,E[z][v(451)]=n,E[z].repeat.set(16,16);const T={color:new e(v(413)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},k=t=>{const n=v;t[n(442)][n(428)]=j.renderTargetUniform,t[n(442)][n(462)]=j[n(414)],t[n(442)]=Object[n(430)](t[n(442)],R),(t=>{const n=g;t[n(302)]=t[n(302)][n(288)](n(282),n(266)),t[n(302)]=t[n(302)].replace(n(294),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=g;t[n(291)]=t[n(291)].replace("void main() {",n(278)),t.fragmentShader=t[n(291)].replace(n(289),n(277))})(t)};return u((()=>{const t=v;_[t(427)]&&(_[t(427)][t(401)].uv1=_[t(427)][t(401)].uv),S[t(427)]&&(S[t(427)][t(440)][t(419)]=1,S[t(427)][t(444)]=k),w[t(427)]&&(w[t(427)][t(456)](j),w[t(427)].onBeforeRender=(n,e,r)=>{j[t(438)](n,e,r)}),y[t(435)]&&S.value&&(S[t(427)][t(435)]=new e(y[t(435)]))})),(t,n)=>{const e=v;return f(),l("TresGroup",null,[p("TresMesh",{ref_key:e(464),ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:e(446),ref:_,args:[10,10]},null,512),p(e(432),m({ref_key:e(445),ref:S},T),null,16)],8,C),p(e(410),{object:d(b),visible:t.showGridHelper},null,8,M)])}}});function R(t){function n(t){const e=S;if(typeof t===e(403))return function(t){}.constructor("while (true) {}")[e(443)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(415)]("debu"+e(416))[e(431)]("action"):function(){return!1}[e(415)]("debu"+e(416))[e(443)](e(404)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

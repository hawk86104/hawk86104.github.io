var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as I,m as b,n as S,cb as w,cc as M,K as E,h as R,b as A,e as T,_ as z,bO as D,l as P,a_ as O,V as C,bp as F,z as B,aj as k,B as j,c as U,aK as N,g as L,M as H,ar as Z,a9 as G,U as W,a as $,aP as q}from"./three.FyUEtfsR1741658416045.js";import{m as X,l as V,e as Y}from"./@tresjs.W3PFJhMo1741658416045.js";import{R as K}from"./three-stdlib.X1LBpfR41741658416045.js";import{y as Q,b as J,w as nn,a as tn,u as en,d as rn,W as on,a3 as an,a0 as cn,o as sn,H as un,J as ln,M as fn,a7 as pn,a2 as dn,q as hn,f as vn,N as mn,a8 as gn,r as _n,B as yn,v as xn,s as In,F as bn,a6 as Sn,m as wn}from"./@vue.NRI7TcgI1741658416045.js";import{M as Mn,a as En,C as Rn}from"./@pmndrs.7A_kisEQ1741658416045.js";import{h as An}from"./object-hash.lsSo12-11741658416045.js";function Tn(){var n=["dispose","bind","79FHjvJq","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","31832bzRWZc","prototype","init","25iERXNX","console","log","5218339zuCRgi","virtualScene","886608THzvMn","exception","counter","info","error","input","add","5710624WcIKZJ","__proto__","3783azeEkJ","772LVeQRu","function *\\( *\\)","traverse","return (function() ","trace","while (true) {}","material","gger","destructor",'{}.constructor("return this")( )',"apply","412974qsfzxX","chain","constructor","5490120YtMBMR","stateObject","remove","test","action","string","call"];return(Tn=function(){return n})()}var zn=Dn;function Dn(n,t){var e=Tn();return(Dn=function(n,t){return e[n-=273]})(n,t)}!function(n,t){for(var e=Dn,r=Tn();;)try{if(737741===parseInt(e(275))/1*(parseInt(e(278))/2)+-parseInt(e(295))/3*(-parseInt(e(296))/4)+-parseInt(e(281))/5*(parseInt(e(307))/6)+parseInt(e(284))/7+-parseInt(e(293))/8+parseInt(e(286))/9+-parseInt(e(310))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(306)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pn(this,(function(){var n=Dn,t=new RegExp(n(297)),e=new RegExp(n(277),"i"),r=Bn(n(280));t[n(313)](r+n(308))&&e.test(r+n(291))?Bn():r("0")}))()}();var On=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(306)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();On(void 0,(function(){var n,t=Dn;try{n=Function(t(299)+t(305)+");")()}catch(s){n=window}for(var e=n[t(282)]=n.console||{},r=[t(283),"warn",t(289),t(290),t(287),t(276),t(300)],o=0;o<r.length;o++){var i=On[t(309)][t(279)][t(274)](On),a=r[o],c=e[a]||i;i[t(294)]=On[t(274)](On),i.toString=c.toString[t(274)](c),e[a]=i}}))();class Cn extends s{constructor(){super(),this.virtualScene=null,this.virtualScene=new u}add(...n){var t=Dn;return this[t(285)][t(292)](...n),this}[zn(304)](){var n=zn;this[n(285)][n(298)]((t=>{var e=n;t instanceof l&&(t.geometry[e(273)](),t[e(302)][e(273)](),t[e(302)].map&&t[e(302)].map[e(273)](),this.virtualScene[e(312)](t))})),this[n(285)]=null}}const Fn=Cn;function Bn(n){function t(n){var e=Dn;if(typeof n===e(315))return function(n){}.constructor(e(301)).apply(e(288));1!==(""+n/n).length||n%20==0?function(){return!0}[e(309)]("debu"+e(303))[e(316)](e(314)):function(){return!1}.constructor("debu"+e(303))[e(306)](e(311)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kn=Un;function jn(){const n=["console","warn","1819xVCIOe","outood/mossy_forest_1k.hdr","table","error","info","kiara/kiara_1_dawn_1k.hdr","log","apply","indoor/abandoned_games_room_02_1k.hdr","16GJeUwE","396665ABJsmp","call","outdoor/snowy_forest_path_01_1k.hdr","gger","city/canary_wharf_1k.hdr","trace","test","city/shanghai_bund_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","constructor","2820579JtvZFu","228pRhdPB","1872432ooqcNZ","debu","10BVtrWL","outdoor/satara_night_1k.hdr","while (true) {}","chain","return (function() ","2010869EUKuCP","8EFKIYn","stateObject","bind","prototype","length","4819599iWnSeP","action","toString","string","1395229lEzJHS","554sJwSnq"];return(jn=function(){return n})()}function Un(n,t){const e=jn();return(Un=function(n,t){return e[n-=347]})(n,t)}!function(n,t){const e=Un,r=jn();for(;;)try{if(521429===parseInt(e(381))/1*(parseInt(e(378))/2)+-parseInt(e(358))/3+parseInt(e(390))/4*(-parseInt(e(347))/5)+-parseInt(e(360))/6+-parseInt(e(367))/7*(parseInt(e(368))/8)+parseInt(e(373))/9*(-parseInt(e(362))/10)+parseInt(e(377))/11*(parseInt(e(359))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(388)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nn(this,(function(){const n=Un,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(355),"i"),r=Zn("init");t[n(353)](r+n(365))&&e[n(353)](r+"input")?Zn():r("0")}))()}();const Ln=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(388)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ln(void 0,(function(){const n=Un,t=function(){const n=Un;let t;try{t=Function(n(366)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(379)]=t[n(379)]||{},r=[n(387),n(380),n(385),n(384),"exception",n(383),n(352)];for(let o=0;o<r[n(372)];o++){const t=Ln[n(357)][n(371)].bind(Ln),i=r[o],a=e[i]||t;t.__proto__=Ln[n(370)](Ln),t[n(375)]=a[n(375)].bind(a),e[i]=t}}))();const Hn={sunset:"venice/venice_sunset_1k.hdr",studio:"studio/poly_haven_studio_1k.hdr",city:kn(351),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:kn(363),forest:kn(382),snow:kn(349),dawn:kn(386),hangar:"indoor/small_hangar_01_1k.hdr",urban:kn(389),modern:"city/modern_buildings_2_1k.hdr",shangai:kn(354)};function Zn(n){function t(n){const e=Un;if(typeof n===e(376))return function(n){}[e(357)](e(364))[e(388)](e(356));1!==(""+n/n)[e(372)]||n%20==0?function(){return!0}[e(357)](e(361)+e(350))[e(348)](e(374)):function(){return!1}.constructor(e(361)+e(350))[e(388)](e(369)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gn=Xn;function Wn(){const n=["info","__proto__","function *\\( *\\)","2077024TFpdZQ","constructor","108469MwuXGm","init","backgroundBlurriness","return (function() ","340970WJejxh","isColor","join","mapping","log","value","357054XkhqXF","170SQpcvg","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","length","warn","toString","trace","counter","table","test","gger","texture","bind","92889GNyZso","stateObject","background","call","Preset must be one of: ",'{}.constructor("return this")( )',"isArray","prototype","action","input","exception","error","console","while (true) {}","setPath","142898DplpcY","apply","152yQXlUL","17673TKvrji"];return(Wn=function(){return n})()}!function(n,t){const e=Xn,r=Wn();for(;;)try{if(274318===parseInt(e(513))/1+parseInt(e(524))/2*(parseInt(e(507))/3)+-parseInt(e(511))/4+parseInt(e(517))/5+-parseInt(e(523))/6+-parseInt(e(504))/7+-parseInt(e(506))/8*(-parseInt(e(489))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$n(this,(function(){const n=Xn,t=new RegExp(n(510)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Yn(n(514));t[n(532)](r+"chain")&&e[n(532)](r+n(498))?Yn():r("0")}))()}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xn(505)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xn(n,t){const e=Wn();return(Xn=function(n,t){return e[n-=486]})(n,t)}qn(void 0,(function(){const n=Xn,t=function(){const n=Xn;let t;try{t=Function(n(516)+n(494)+");")()}catch(e){t=window}return t}(),e=t[n(501)]=t[n(501)]||{},r=[n(521),n(527),n(508),n(500),n(499),n(531),n(529)];for(let o=0;o<r[n(526)];o++){const t=qn[n(512)][n(496)][n(488)](qn),i=r[o],a=e[i]||t;t[n(509)]=qn.bind(qn),t[n(528)]=a.toString[n(488)](a),e[i]=t}}))();const Vn=Gn(525);function Yn(n){function t(n){const e=Xn;if("string"==typeof n)return function(n){}[e(512)](e(502))[e(505)](e(530));1!==(""+n/n)[e(526)]||n%20==0?function(){return!0}.constructor("debu"+e(486))[e(492)](e(497)):function(){return!1}[e(512)]("debu"+e(486))[e(505)](e(490)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kn=Qn;function Qn(n,t){const e=nt();return(Qn=function(n,t){return e[n-=301]})(n,t)}!function(n,t){const e=Qn,r=nt();for(;;)try{if(145498===-parseInt(e(334))/1*(parseInt(e(337))/2)+-parseInt(e(307))/3+-parseInt(e(335))/4+parseInt(e(336))/5*(parseInt(e(348))/6)+parseInt(e(341))/7+-parseInt(e(317))/8+parseInt(e(312))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(301)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nt(){const n=["debu",'{}.constructor("return this")( )',"trace","7312851bJgeMl","console","prototype","bind","chain","1385520fbewvj","stateObject","environment","texture","minFilter","gger","value","TresEnvSence","string","update","dispose","symbol","frames","test","input","type","error","91874rcrOwG","824100spJzwi","8765znXhiP","6TOLQCk","constructor","info","resolution","72268WXGuYp","$slots","length","background","return (function() ","init","default","810BQGLpA","function *\\( *\\)","toString","apply","counter","warn","component","near","generateMipmaps","777549MlGiHp","__proto__"];return(nt=function(){return n})()}!function(){Jn(this,(function(){const n=Qn,t=new RegExp(n(349)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=rt(n(346));t[n(330)](r+n(316))&&e[n(330)](r+n(331))?rt():r("0")}))()}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(301)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();tt(void 0,(function(){const n=Qn;let t;try{t=Function(n(345)+n(310)+");")()}catch(o){t=window}const e=t[n(313)]=t[n(313)]||{},r=["log",n(303),n(339),n(333),"exception","table",n(311)];for(let i=0;i<r[n(343)];i++){const t=tt[n(338)][n(314)].bind(tt),o=r[i],a=e[o]||t;t[n(308)]=tt[n(315)](tt),t.toString=a[n(350)][n(315)](a),e[o]=t}}))();const et=rn({__name:Kn(304),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Kn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=X();let l=null,y=J(null),x=null;const I=J(null);on((()=>{var n,t;const e=Qn;null==(n=I[e(323)])||n.destructor(),null==(t=y[e(323)])||t[e(327)]()}));const{onBeforeLoop:b}=Y();let S=1;b((()=>{const n=Qn;x&&I[n(323)]&&y[n(323)]&&(i[n(329)]===1/0||S<i[n(329)])&&(i.useDefaultScene?x[n(326)](s[n(323)],u[n(323)]):x[n(326)](s[n(323)],pn(I[n(323)].virtualScene)),S++)}));const w=([r,o]=an((()=>async function(n,t){const e=Gn,{scene:r,invalidate:o}=X(),{preset:i,blur:a,files:c=J([]),path:s=J(""),background:u}=Q(n);nn(n,(()=>{o()}));const l=J(null),h=tn((()=>Array[e(495)](c[e(522)]))),v=tn((()=>h[e(522)]?f:K));return nn([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i[r(522)])){try{l.value=await V(v[r(522)],h[r(522)]?[...en(n)]:en(n),(n=>{t&&n[r(503)](en(t))}))}catch(o){throw new Error("Failed to load environment map: "+o)}l[r(522)]&&(l[r(522)].mapping=h[r(522)]?p:d)}}),{immediate:!0}),nn(l,(n=>{const t=e;r.value&&n&&(r[t(522)].environment=n)}),{immediate:!0}),nn([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(522)])?t[i(522)][i(487)]:o,a=r[i(522)].background;!(null==a?void 0:a[i(518)])&&(a=void 0),r[i(522)][i(491)]=n?e:a}}),{immediate:!0}),nn((()=>null==a?void 0:a[e(522)]),(n=>{const t=e;r.value&&n&&(r[t(522)][t(515)]=n)}),{immediate:!0}),nn((()=>null==i?void 0:i[e(522)]),(async n=>{const t=e;if(n&&n in Hn){const e=Vn,i=Hn[n];try{l.value=await V(K,i,(n=>{e&&n[Xn(503)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}l[t(522)]&&l[t(522)]&&(l[t(522)][t(520)]=d),o()}else if(n&&!(n in Hn))throw new Error(t(493)+Object.keys(Hn)[t(519)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Qn;n?(u[t(323)].environment=n[t(320)],i[t(344)]&&(u.value[t(344)]=n[t(320)])):(u[t(323)][t(319)]=w[t(323)],i[t(344)]&&(u.value[t(344)]=w.value))};nn(w,(n=>{const t=Qn;y[t(323)]&&M(y[t(323)])}),{immediate:!0,deep:!0}),c({EnvSence:Fn});const E=()=>{var n;const t=Qn;null==(n=y[t(323)])||n.dispose(),y[t(323)]=new v(i[t(340)]),x=new m(i[t(305)],i.far,y[t(323)]),i.useDefaultScene?(y[t(323)][t(320)][t(332)]=g,y.value.texture[t(306)]=!1,y[t(323)][t(320)][t(321)]=_,y[t(323)][t(320)].magFilter=_):y[t(323)][t(320)][t(332)]=h,M(y[t(323)])};return nn((()=>cn()[e(347)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(323)].texture[o(332)]!==h)&&(l=n(),Array.isArray(l)&&l[o(343)]>0&&typeof(null==(t=l[0])?void 0:t.type)!==o(328))?E():(null==(r=y[o(323)])||r[o(327)](),y[o(323)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(323)]=w,nn((()=>i.useDefaultScene),(n=>{y[e(323)]&&E()})),(n,t)=>{const r=e;return en(y)?(sn(),un(r(324),{key:0,ref_key:"envSence",ref:I},[ln(n[r(342)],"default")],512)):fn("",!0)}}});function rt(n){function t(n){const e=Qn;if(typeof n===e(325))return function(n){}[e(338)]("while (true) {}")[e(301)](e(302));1!==(""+n/n)[e(343)]||n%20==0?function(){return!0}[e(338)](e(309)+e(322)).call("action"):function(){return!1}[e(338)](e(309)+"gger").apply(e(318)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ot=at;!function(n,t){const e=at,r=ct();for(;;)try{if(788600===-parseInt(e(433))/1*(parseInt(e(394))/2)+-parseInt(e(430))/3+parseInt(e(401))/4+parseInt(e(414))/5*(-parseInt(e(399))/6)+parseInt(e(426))/7+-parseInt(e(410))/8+parseInt(e(389))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function at(n,t){const e=ct();return(at=function(n,t){return e[n-=383]})(n,t)}function ct(){const n=["ring","chain","TresRingGeometry","42fGuwMF","test","from","TresMesh","return (function() ","618utSMEX","string","5632496nmptdT","log","console","while (true) {}","info","error","apply","side","input","4652704mbBeRG","length","function *\\( *\\)","bind","31315XIXTTL","intensity","TresMeshBasicMaterial","warn","constructor","call",'{}.constructor("return this")( )',"action","toneMapped","color","prototype","circle","1302938bEFdzq","multiplyScalar","debu","map","4650168fqXqLT","needsUpdate","counter","26173zbUQNg","toString","init","trace","material","value","table","22686372yuRgfd","rect"];return(ct=function(){return n})()}!function(){it(this,(function(){const n=at,t=new RegExp(n(412)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ht(n(384));t.test(r+n(392))&&e[n(395)](r+n(409))?ht():r("0")}))()}();const st=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[at(407)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();st(void 0,(function(){const n=at,t=function(){const n=at;let t;try{t=Function(n(398)+n(420)+");")()}catch(e){t=window}return t}(),e=t[n(403)]=t.console||{},r=[n(402),n(417),n(405),n(406),"exception",n(388),n(385)];for(let o=0;o<r.length;o++){const t=st[n(418)][n(424)][n(413)](st),i=r[o],a=e[i]||t;t.__proto__=st.bind(st),t[n(383)]=a[n(383)][n(413)](a),e[i]=t}}))();const ut={key:0,args:[0,1,64]},lt={key:1,args:[.5,1,64]},ft={key:2},pt=[ot(422),ot(429),ot(408),"color"],dt=rn({__name:"index",props:{args:{default:null},from:{default:ot(390)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=ot,e=n,r=J();return dn((()=>{const n=at;r[n(387)]&&(r.value[n(423)][n(427)](e[n(415)]),r.value[n(431)]=!0)})),nn((()=>e[t(423)]),(n=>{const o=t;r.value&&(r.value[o(423)].set(n),r[o(387)][o(423)].multiplyScalar(e[o(415)]),r[o(387)][o(431)]=!0)})),hn((()=>{})),(n,o)=>{const i=t;return sn(),un(i(397),null,[e.from===i(425)?(sn(),un("TresRingGeometry",ut)):e[i(396)]===i(391)?(sn(),un(i(393),lt)):"rect"===e[i(396)]?(sn(),un("TresPlaneGeometry",ft)):(sn(),vn(e.from,{key:3,args:e})),mn(i(416),{ref_key:i(386),ref:r,toneMapped:n.toneMapped,map:n.map,side:en(x),color:n[i(423)]},null,8,pt)])}}});function ht(n){function t(n){const e=at;if(typeof n===e(400))return function(n){}[e(418)](e(404)).apply(e(432));1!==(""+n/n)[e(411)]||n%20==0?function(){return!0}.constructor(e(428)+"gger")[e(419)](e(421)):function(){return!1}.constructor(e(428)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function vt(n,t){const e=mt();return(vt=function(n,t){return e[n-=259]})(n,t)}function mt(){const n=["error","2704812wLigbY","test","console","6dbSQKQ","272OTkKuC","input",'{}.constructor("return this")( )',"constructor","action","bind","while (true) {}","clear","prototype","warn","14888RwrEyC","depthTexture","toString","apply","942AMLBpp","render","stateObject","init","value","setRenderTarget","gger","debu","format","counter","965445HLcGna","89766XPXcpl","exception","width","7VKfKdm","42855098bYLEKZ","13720840mFcbno","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","call","239989WBWPah","log","string","type","return (function() "];return(mt=function(){return n})()}!function(n,t){const e=vt,r=mt();for(;;)try{if(716562===-parseInt(e(292))/1*(parseInt(e(301))/2)+-parseInt(e(271))/3*(parseInt(e(267))/4)+parseInt(e(281))/5+-parseInt(e(298))/6*(parseInt(e(285))/7)+-parseInt(e(302))/8*(-parseInt(e(282))/9)+-parseInt(e(287))/10+parseInt(e(286))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(270)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){gt(this,(function(){const n=vt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(289),"i"),r=xt(n(274));t.test(r+n(288))&&e[n(299)](r+n(303))?xt():r("0")}))()}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(270)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function yt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=gn(n)?Q(n):Q(_n(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=X();return dn((()=>{var n;const a=vt;null==(n=t[a(275)])||n.dispose(),t[a(275)]=new I((null==r?void 0:r[a(275)])||p.width[a(275)],(null==e?void 0:e[a(275)])||p.height[a(275)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(275)])),(null==i?void 0:i[a(275)])&&(t[a(275)].depthTexture=new S((null==r?void 0:r[a(275)])||p[a(284)][a(275)],(null==e?void 0:e[a(275)])||p.height.value),t[a(275)][a(268)][a(279)]=w,t[a(275)][a(268)][a(295)]=M)})),s((()=>{const n=vt;(null==a?void 0:a[n(275)])&&(l.value[n(276)](pn(t[n(275)])),l.value[n(264)](),l[n(275)][n(272)](pn(f[n(275)]),pn(u.value)),l.value[n(276)](null))})),yn((()=>{var n;null==(n=t[vt(275)])||n.dispose()})),t}function xt(n){function t(n){const e=vt;if(typeof n===e(294))return function(n){}.constructor(e(263))[e(270)](e(280));1!==(""+n/n)[e(290)]||n%20==0?function(){return!0}[e(260)](e(278)+"gger")[e(291)](e(261)):function(){return!1}[e(260)]("debu"+e(277)).apply(e(273)),t(++n)}try{if(n)return t;t(0)}catch(e){}}_t(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function(n(296)+n(259)+");")()}catch(e){t=window}return t}(),e=t[n(300)]=t.console||{},r=[n(293),n(266),"info",n(297),n(283),"table","trace"];for(let o=0;o<r[n(290)];o++){const t=_t[n(260)][n(265)][n(262)](_t),i=r[o],a=e[i]||t;t.__proto__=_t[n(262)](_t),t[n(269)]=a[n(269)][n(262)](a),e[i]=t}}))();const It=Mt;!function(n,t){const e=Mt,r=Rt();for(;;)try{if(720914===parseInt(e(389))/1*(-parseInt(e(364))/2)+parseInt(e(421))/3*(-parseInt(e(394))/4)+-parseInt(e(390))/5*(parseInt(e(418))/6)+parseInt(e(424))/7*(parseInt(e(396))/8)+parseInt(e(386))/9+-parseInt(e(401))/10*(parseInt(e(395))/11)+parseInt(e(365))/12*(parseInt(e(416))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Mt(408)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){bt(this,(function(){const n=Mt,t=new RegExp(n(397)),e=new RegExp(n(417),"i"),r=At("init");t[n(366)](r+n(370))&&e[n(366)](r+n(413))?At():r("0")}))()}();const St=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();St(void 0,(function(){const n=Mt,t=function(){const n=Mt;let t;try{t=Function(n(372)+n(410)+");")()}catch(e){t=window}return t}(),e=t[n(383)]=t.console||{},r=[n(381),n(412),"info",n(391),n(411),n(403),n(379)];for(let o=0;o<r[n(382)];o++){const t=St.constructor[n(388)][n(402)](St),i=r[o],a=e[i]||t;t.__proto__=St[n(402)](St),t[n(415)]=a[n(415)][n(402)](a),e[i]=t}}))();const wt=[It(373),It(369)];function Mt(n,t){const e=Rt();return(Mt=function(n,t){return e[n-=364]})(n,t)}const Et=rn({__name:It(422),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=It,r=xn(),{extend:o,scene:i,renderer:a,camera:c}=X(),s=xn(),u=n;o({MeshTransmissionMaterial:Mn});const l=new En,{onBeforeLoop:f}=Y(),p=yt({width:u[e(399)],height:u[e(399)],isLoop:!1}),d=yt({width:u[e(399)],height:u[e(399)],isLoop:!1});let h,v,m,g;return hn((async()=>{const n=e;await In(),s.value=function(n,t){const e=Mt;let r;return n[e(404)]((n=>{const o=e;n[o(398)]&&n[o(420)]&&n[o(420)][o(405)]===t&&(r=n)})),r}(i[n(406)],r[n(406)][n(405)])})),f((({elapsed:n})=>{const t=e;r[t(406)][t(409)]=n,r[t(406)][t(373)]===d[t(406)].texture&&s.value&&(m=a[t(406)][t(407)],h=i[t(406)][t(387)],v=r[t(406)][t(400)],g=s[t(406)][t(420)][t(369)],s[t(406)][t(420)]=l,u.backside&&(a[t(406)][t(393)](p[t(406)]),a[t(406)][t(376)](i[t(406)],c[t(406)]),s[t(406)][t(420)]=r[t(406)],s[t(406)][t(420)][t(385)]=u[t(414)],s.value[t(420)].buffer=p.value.texture,s.value[t(420)][t(369)]=E,s[t(406)][t(420)][t(400)]=0),a.value[t(393)](d[t(406)]),a[t(406)][t(376)](i[t(406)],c.value),s.value[t(420)][t(373)]=d[t(406)][t(419)],s[t(406)].material=r.value,s[t(406)][t(420)][t(385)]=u[t(385)],s.value[t(420)][t(369)]=g,s[t(406)][t(420)][t(400)]=v,i[t(406)][t(387)]=h,a[t(406)][t(393)](null),a[t(406)].toneMapping=m)})),t({root:r,constructor:Mn}),(n,t)=>{const o=e;return sn(),un(o(374),{ref_key:o(367),ref:r,buffer:en(d).texture,side:en(x)},null,8,wt)}}});function Rt(){const n=["function *\\( *\\)","isMesh","fboResolution","envMapIntensity","27060EjsyPW","bind","table","traverse","uuid","value","toneMapping","apply","time",'{}.constructor("return this")( )',"exception","warn","input","backsideThickness","toString","1417TmqsbG","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","68640USUcrt","texture","material","39EKHSLP","index","constructor","22589FxpWhH","316kBSpZg","524748XQDyPt","test","MeshTransmissionMaterialClass","gger","side","chain","call","return (function() ","buffer","TresMeshTransmissionMaterial","counter","render","debu","string","trace","while (true) {}","log","length","console","stateObject","thickness","6588576ggPOWy","background","prototype","5202EPXcsl","610ZRemsX","error","action","setRenderTarget","395540pUYLzA","5522KogzrX","208fOXlek"];return(Rt=function(){return n})()}function At(n){function t(n){const e=Mt;if(typeof n===e(378))return function(n){}.constructor(e(380))[e(408)](e(375));1!==(""+n/n)[e(382)]||n%20==0?function(){return!0}[e(423)](e(377)+e(368))[e(371)](e(392)):function(){return!1}.constructor(e(377)+"gger")[e(408)](e(384)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Tt=Pt;!function(n,t){const e=Pt,r=Ft();for(;;)try{if(479800===parseInt(e(432))/1+-parseInt(e(436))/2*(-parseInt(e(449))/3)+-parseInt(e(459))/4*(parseInt(e(429))/5)+-parseInt(e(473))/6*(parseInt(e(444))/7)+parseInt(e(458))/8+parseInt(e(438))/9+parseInt(e(417))/10*(parseInt(e(456))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zt(this,(function(){const n=Pt,t=new RegExp(n(442)),e=new RegExp(n(434),"i"),r=Ct(n(435));t[n(425)](r+"chain")&&e.test(r+n(452))?Ct():r("0")}))()}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pt(n,t){const e=Ft();return(Pt=function(n,t){return e[n-=416]})(n,t)}Dt(void 0,(function(){const n=Pt;let t;try{t=Function(n(423)+n(455)+");")()}catch(o){t=window}const e=t[n(445)]=t[n(445)]||{},r=["log",n(467),"info",n(446),"exception",n(437),"trace"];for(let i=0;i<r[n(451)];i++){const t=Dt[n(426)][n(453)][n(461)](Dt),o=r[i],a=e[o]||t;t[n(424)]=Dt[n(461)](Dt),t.toString=a[n(421)][n(461)](a),e[o]=t}}))();const Ot=rn({__name:Tt(469),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return hn((()=>{const n=Pt;if(!r[n(440)])return;if(!o.value)return;r[n(440)][n(430)][n(418)]();const e=(new R)[n(419)](o[n(440)],t[n(460)]),i=new A,a=new T,c=e[n(470)].x-e.min.x,s=e[n(470)].y-e[n(463)].y,u=e[n(470)].z-e[n(463)].z;e[n(450)](i),e[n(427)](a);const l=t[n(441)]?s/2:t[n(422)]?-s/2:0,f=t.left?-c/2:t[n(465)]?c/2:0,p=t.front?u/2:t[n(466)]?-u/2:0;r.value[n(468)][n(433)](t[n(462)]||t[n(428)]?0:-i.x+f,t[n(462)]||t[n(457)]?0:-i.y+l,t[n(462)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Pt;return sn(),un(i(431),{ref_key:i(471),ref:e},[mn(i(431),{ref_key:i(454),ref:r},[mn(i(431),{ref_key:"inner",ref:o},[ln(n.$slots,i(420))],512)],512)],512)}}});function Ct(n){function t(n){const e=Pt;if(typeof n===e(472))return function(n){}[e(426)]("while (true) {}")[e(447)](e(439));1!==(""+n/n)[e(451)]||n%20==0?function(){return!0}.constructor(e(448)+"gger")[e(416)](e(464)):function(){return!1}.constructor(e(448)+"gger")[e(447)](e(443)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ft(){const n=["disableY","3279344OrjYwm","892sJALpi","precise","bind","disable","min","action","right","back","warn","position","index","max","gref","string","402cUsYUK","call","3680210cmNBCS","identity","setFromObject","default","toString","bottom","return (function() ","__proto__","test","constructor","getBoundingSphere","disableX","7205YoXpMu","matrixWorld","TresGroup","787136QTUQTr","set","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","6002cDqRqn","table","1230264IyzBEP","counter","value","top","function *\\( *\\)","stateObject","94409ulNfzG","console","error","apply","debu","3lUUffm","getCenter","length","input","prototype","outer",'{}.constructor("return this")( )',"11vBhGgs"];return(Ft=function(){return n})()}const Bt=Ht;!function(n,t){const e=Ht,r=Gt();for(;;)try{if(988249===parseInt(e(522))/1*(parseInt(e(503))/2)+parseInt(e(537))/3*(parseInt(e(541))/4)+-parseInt(e(520))/5+parseInt(e(542))/6+-parseInt(e(510))/7+-parseInt(e(528))/8*(-parseInt(e(544))/9)+-parseInt(e(538))/10*(-parseInt(e(502))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(527)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kt(this,(function(){const n=Ht,t=new RegExp(n(535)),e=new RegExp(n(512),"i"),r=Zt("init");t[n(509)](r+n(506))&&e[n(509)](r+n(500))?Zt():r("0")}))()}();const jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(527)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jt(void 0,(function(){const n=Ht,t=function(){const n=Ht;let t;try{t=Function(n(548)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(545)]=t[n(545)]||{},r=[n(546),n(505),"info",n(543),n(536),n(523),n(507)];for(let o=0;o<r[n(521)];o++){const t=jt.constructor.prototype.bind(jt),i=r[o],a=e[i]||t;t.__proto__=jt[n(508)](jt),t.toString=a.toString[n(508)](a),e[i]=t}}))();const Ut=[Bt(534)],Nt=["object"],Lt=rn({__name:"index",props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Bt,e=n,{renderer:r}=X(),o=Rn(r[t(525)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(532)]});o.params[t(549)]=!0;const i=xn(null);nn(i,(n=>{const e=t;n&&o.scene[e(524)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o.update()})),dn((()=>{const n=t;e[n(511)]&&o[n(516)][n(511)][n(504)](e.color),e.ior&&(o[n(516)][n(547)]=e[n(547)]),e[n(550)]&&(o[n(516)].backsideIOR=e[n(550)]),e[n(531)]&&(o[n(516)].far=e.far),e[n(532)]&&(o.params[n(532)]=e.worldRadius),e[n(519)]&&(o.params[n(519)]=e[n(519)])})),nn((()=>e.causticsOnly),(n=>{const e=t;o[e(516)][e(513)]=n})),nn((()=>e[t(540)]),(n=>{const e=t;n&&o[e(516)][e(540)]instanceof A&&o[e(516)][e(540)][e(504)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return sn(),un(bn,null,[mn(r(518),{ref_key:"group",ref:i},[ln(n.$slots,r(526))],512),mn("primitive",{object:en(o)[r(533)],position:[0,.003,0]},null,8,Ut),mn("primitive",{object:en(o)[r(501)],visible:!1},null,8,Nt)],64)}}});function Ht(n,t){const e=Gt();return(Ht=function(n,t){return e[n-=500]})(n,t)}function Zt(n){function t(n){const e=Ht;if(typeof n===e(539))return function(n){}[e(529)]("while (true) {}")[e(527)](e(517));1!==(""+n/n)[e(521)]||n%20==0?function(){return!0}[e(529)](e(514)+"gger")[e(530)](e(515)):function(){return!1}.constructor(e(514)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Gt(){const n=["group","object","function *\\( *\\)","exception","200748SOsCwp","150uGEDAh","string","lightSource","84ywMjfd","10116096ZznmrR","error","39546hdFmQz","console","log","ior","return (function() ","backside","backsideIOR","input","helper","435127UYRMNn","2dnrAEG","set","warn","chain","trace","bind","test","11799172CphFbG","color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","causticsOnly","debu","action","params","counter","TresGroup","intensity","8841635EvoGIU","length","581805vCVBtO","table","add","value","default","apply","320AnpUof","constructor","call","far","worldRadius"];return(Gt=function(){return n})()}!function(n,t){const e=qt,r=Vt();for(;;)try{if(420117===-parseInt(e(296))/1*(-parseInt(e(293))/2)+parseInt(e(287))/3+parseInt(e(316))/4+parseInt(e(317))/5+-parseInt(e(281))/6+parseInt(e(276))/7*(parseInt(e(261))/8)+parseInt(e(271))/9*(-parseInt(e(267))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(275)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wt(this,(function(){const n=qt,t=new RegExp(n(264)),e=new RegExp(n(319),"i"),r=Yt(n(279));t[n(311)](r+n(297))&&e[n(311)](r+n(283))?Yt():r("0")}))()}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(275)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(n,t){const e=Vt();return(qt=function(n,t){return e[n-=259]})(n,t)}$t(void 0,(function(){const n=qt;let t;try{t=Function(n(268)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(309)]=t.console||{},r=[n(289),n(273),n(295),n(286),n(320),n(304),n(298)];for(let i=0;i<r[n(285)];i++){const t=$t[n(291)][n(302)][n(265)]($t),o=r[i],a=e[o]||t;t[n(294)]=$t.bind($t),t[n(306)]=a[n(306)][n(265)](a),e[o]=t}}))();const Xt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=qt,o=z[r(266)][r(280)];return z[r(266)][r(280)]=D[r(280)].replace(r(269),r(277)+t+r(314)+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(303)+e+r(310)+e+r(300)+e+r(262)+t+r(259)+e+r(313))[r(301)](r(260),r(307)),(n,t,e)=>{z[r(266)].shadowmap_pars_fragment=o,function(n,t,e){const r=qt;t[r(282)]((t=>{const e=r;t[e(292)]&&(Array[e(263)](t.material)?t.material[e(290)]((t=>{const r=e;n[r(272)][r(308)](t),t[r(278)]()})):(n[e(272)][e(308)](t[e(292)]),t[e(292)][e(278)]()))})),n[r(295)][r(312)].length=0,n[r(305)](t,e)}(n,t,e)}};function Vt(){const n=["length","error","1450692GXaYCo","while (true) {}","log","forEach","constructor","material","266906BKpZUW","__proto__","info","1XqyRRH","chain","trace","stateObject","; i++) {\n        vogelSample = vogelDiskSample(j, ","replace","prototype","; i ++) {\n        offset = (vogelDiskSample(j, ","table","compile","toString","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","remove","console",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","test","programs",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","debu","2066528fmPUoa","3048660hoXpGX","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","#if defined( SHADOWMAP_TYPE_PCF )","216TBLdjs",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","isArray","function *\\( *\\)","bind","ShaderChunk","20pTzImg","return (function() ","#ifdef USE_SHADOWMAP","action","8526861BlQqon","properties","warn","counter","apply","159649JQlKdu","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","dispose","init","shadowmap_pars_fragment","265170MRAaTP","traverse","input","string"];return(Vt=function(){return n})()}function Yt(n){function t(n){const e=qt;if(typeof n===e(284))return function(n){}.constructor(e(288))[e(275)](e(274));1!==(""+n/n)[e(285)]||n%20==0?function(){return!0}[e(291)]("debu"+e(318)).call(e(270)):function(){return!1}[e(291)](e(315)+e(318))[e(275)](e(299)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kt=ne;!function(n,t){const e=ne,r=te();for(;;)try{if(230364===parseInt(e(498))/1+parseInt(e(501))/2*(-parseInt(e(493))/3)+parseInt(e(485))/4+-parseInt(e(476))/5*(-parseInt(e(469))/6)+-parseInt(e(466))/7*(-parseInt(e(503))/8)+-parseInt(e(477))/9+-parseInt(e(473))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(482)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qt(this,(function(){const n=ne,t=new RegExp(n(471)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=re(n(504));t[n(499)](r+n(468))&&e[n(499)](r+n(494))?re():r("0")}))()}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(482)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ne(n,t){const e=te();return(ne=function(n,t){return e[n-=464]})(n,t)}function te(){const n=["chain","1013370zFLVkY","call","function *\\( *\\)","log","2122660ijQOvZ","toString","debu","10bYNgwh","1966509ATDpwt","index","console","error","gger","apply","length","__proto__","271772IbAJFH","value","constructor",'{}.constructor("return this")( )',"string","return (function() ","trace","action","218343qqEJru","input","material","bind","counter","27670hqILOO","test","info","2vDZqEv","prototype","141416QImkvy","init","exception","warn","119Vpiglw","table"];return(te=function(){return n})()}Jt(void 0,(function(){const n=ne,t=function(){const n=ne;let t;try{t=Function(n(490)+n(488)+");")()}catch(e){t=window}return t}(),e=t[n(479)]=t[n(479)]||{},r=[n(472),n(465),n(500),n(480),n(464),n(467),n(491)];for(let o=0;o<r[n(483)];o++){const t=Jt[n(487)][n(502)].bind(Jt),i=r[o],a=e[i]||t;t[n(484)]=Jt[n(496)](Jt),t.toString=a[n(474)][n(496)](a),e[i]=t}}))();const ee=rn({__name:Kt(478),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=X();let i=null;const a=n=>{const t=ne,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(486)],o[t(486)],e.value),i=null),a&&(i=Xt({focus:s,size:c,samples:u}),o[t(486)].traverse((n=>{n instanceof l&&n[t(495)].dispose()})))};return a(t),nn(t,(()=>{a(t)})),(n,t)=>null}});function re(n){function t(n){const e=ne;if(typeof n===e(489))return function(n){}[e(487)]("while (true) {}")[e(482)](e(497));1!==(""+n/n).length||n%20==0?function(){return!0}[e(487)](e(475)+e(481))[e(470)](e(492)):function(){return!1}[e(487)](e(475)+"gger")[e(482)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const oe=ie;function ie(n,t){const e=ae();return(ie=function(n,t){return e[n-=190]})(n,t)}function ae(){const n=["570804cxPMOb","587722nceznN","apply","exception","setResolution","13628KeOWMf","587279ozEOdv","input","multiplyScalar","length","texelSize","value","call","trace","setTexelSize","return (function() ","constructor","kernel","error","1010VlHjFZ","8haiLos","gger","24762700qwqDCI","debu","colorspace_fragment","test","6113849zjeBQg","uniforms","bind","resolution","while (true) {}","log","action","table","3zGZGcG","console",'{}.constructor("return this")( )',"chain","stateObject","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","halfTexelSize","toString","set","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","toneMapped","5248656kgHSPD","replace"];return(ae=function(){return n})()}!function(n,t){const e=ie,r=ae();for(;;)try{if(521559===-parseInt(e(213))/1+-parseInt(e(208))/2*(parseInt(e(194))/3)+-parseInt(e(212))/4*(parseInt(e(226))/5)+-parseInt(e(207))/6+parseInt(e(233))/7*(-parseInt(e(227))/8)+parseInt(e(205))/9+parseInt(e(229))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(209)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ce(this,(function(){const n=ie,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=fe("init");t.test(r+n(197))&&e[n(232)](r+n(214))?fe():r("0")}))()}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(209)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();se(void 0,(function(){const n=ie;let t;try{t=Function(n(222)+n(196)+");")()}catch(o){t=window}const e=t[n(195)]=t[n(195)]||{},r=[n(191),"warn","info",n(225),n(210),n(193),n(220)];for(let i=0;i<r[n(216)];i++){const t=se[n(223)].prototype[n(235)](se),o=r[i],a=e[o]||t;t.__proto__=se.bind(se),t[n(201)]=a[n(201)].bind(a),e[o]=t}}))();const ue=parseInt(B[oe(206)](/\D+/g,""));class le extends P{constructor(n=new C){const t=oe;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(203)+(ue>=154?t(231):"encodings_fragment")+">\n        }",vertexShader:t(199),blending:F,depthWrite:!1,depthTest:!1}),this[t(204)]=!1,this[t(221)](n.x,n.y),this[t(224)]=new Float32Array([0,1,2,2,3])}[oe(221)](n,t){const e=oe;this[e(234)][e(217)][e(218)][e(202)](n,t),this[e(234)][e(200)][e(218)][e(202)](n,t)[e(215)](.5)}[oe(211)](n){const t=oe;this[t(234)][t(236)][t(218)].copy(n)}}function fe(n){function t(n){const e=ie;if("string"==typeof n)return function(n){}[e(223)](e(190))[e(209)]("counter");1!==(""+n/n)[e(216)]||n%20==0?function(){return!0}.constructor(e(230)+e(228))[e(219)](e(192)):function(){return!1}[e(223)](e(230)+"gger")[e(209)](e(198)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const pe=he;function de(){const n=["while (true) {}","5613440LmBGtp","frustumCulled","test","screen","function *\\( *\\)","setResolution","renderTargetA","toString","input","length","defines","counter","action","bind","console","USE_DEPTH","1420136hLuOww","3324568SFOZgd","constructor","log","20049CRRTjZ","302hAJLJC","convolutionMaterial","call","table","24015285SeoCav","5815494QDLavK","init","kernel","35WGbfol","setTexelSize","renderToScreen","depthBuffer","value","scene","warn","uniforms","debu","setAttribute","setRenderTarget","position","renderTargetB","gger","inputBuffer","150270kFRdBB","return (function() ","add","depthScale","minDepthThreshold","texture","stateObject","camera","__proto__","error","apply","info","depthTexture","render","maxDepthThreshold"];return(de=function(){return n})()}function he(n,t){const e=de();return(he=function(n,t){return e[n-=265]})(n,t)}!function(n,t){const e=he,r=de();for(;;)try{if(639418===parseInt(e(269))/1+parseInt(e(306))/2*(parseInt(e(305))/3)+-parseInt(e(302))/4+parseInt(e(285))/5+parseInt(e(311))/6+parseInt(e(314))/7*(parseInt(e(301))/8)+-parseInt(e(310))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(279)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ve(this,(function(){const n=he,t=new RegExp(n(289)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=_e(n(312));t[n(287)](r+"chain")&&e[n(287)](r+n(293))?_e():r("0")}))()}();const me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();me(void 0,(function(){const n=he;let t;try{t=Function(n(270)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(299)]=t[n(299)]||{},r=[n(304),n(320),n(280),n(278),"exception",n(309),"trace"];for(let i=0;i<r[n(294)];i++){const t=me[n(303)].prototype.bind(me),o=r[i],a=e[o]||t;t[n(277)]=me[n(298)](me),t.toString=a[n(292)][n(298)](a),e[o]=t}}))();class ge{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=he;this[c(316)]=!1,this[c(291)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this.renderTargetA.clone(),this[c(307)]=new le,this[c(307)][c(315)](1/t,1/e),this[c(307)][c(290)](new C(t,e)),this[c(319)]=new u,this.camera=new k,this[c(307)].uniforms[c(273)][c(318)]=r,this[c(307)][c(321)][c(283)].value=o,this[c(307)][c(321)][c(272)][c(318)]=i,this[c(307)][c(321)].depthToBlurRatioBias[c(318)]=a,this[c(307)][c(295)][c(300)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(323)](c(265),new U(s,3)),p[c(323)]("uv",new U(f,2)),this.screen=new l(p,this[c(307)]),this.screen[c(286)]=!1,this.scene[c(271)](this[c(288)])}[pe(282)](n,t,e){const r=pe,o=this.scene,i=this[r(276)],a=this[r(291)],c=this[r(266)],s=this[r(307)],u=s[r(321)];u[r(317)][r(318)]=t[r(281)];const l=s[r(313)];let f,p,d,h=t;for(p=0,d=l[r(294)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(313)][r(318)]=l[p],u[r(268)][r(318)]=h[r(274)],n[r(324)](f),n[r(282)](o,i),h=f;u[r(313)][r(318)]=l[p],u[r(268)][r(318)]=h[r(274)],n[r(324)](this.renderToScreen?null:e),n[r(282)](o,i)}}function _e(n){function t(n){const e=he;if("string"==typeof n)return function(n){}[e(303)](e(284)).apply(e(296));1!==(""+n/n)[e(294)]||n%20==0?function(){return!0}[e(303)](e(322)+"gger")[e(308)](e(297)):function(){return!1}[e(303)]("debu"+e(267)).apply(e(275)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ye=Se;!function(n,t){for(var e=Se,r=be();;)try{if(747508===-parseInt(e(167))/1*(parseInt(e(119))/2)+parseInt(e(117))/3*(parseInt(e(163))/4)+parseInt(e(112))/5*(parseInt(e(177))/6)+-parseInt(e(145))/7*(parseInt(e(148))/8)+parseInt(e(169))/9+-parseInt(e(128))/10*(parseInt(e(103))/11)+parseInt(e(149))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Se(139)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xe(this,(function(){var n=Se,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Me("init");t[n(173)](r+n(175))&&e[n(173)](r+"input")?Me():r("0")}))()}();var Ie=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function be(){var n=["_blurStrength","chain","toString","487350doNNcS","return (function() ","1836857DSBdky","_distortionMap","mixBlur","call","constructor","defines","_mixContrast","exception","maxDepthThreshold","5VZDXXt","_textureMatrix","replace","prototype","uniforms","31227piZUcB","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","10cGiWEe","bind","trace","_mixBlur","mixContrast","depthScale","minDepthThreshold","_hasBlur","tDiffuseBlur","80MqHhQC","console","value","while (true) {}","stateObject","mixStrength","_tDepth","setValues","table","log","vertexShader","apply","_maxDepthThreshold","counter","textureMatrix","_tDiffuse","_depthToBlurRatioBias","5418917eIEbUi","tDiffuse","_minDepthThreshold","8RRMgaH","26817852HlzRTS","length","_mirror","_depthScale","string","distortionMap","distortion",'{}.constructor("return this")( )',"#include <project_vertex>","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","debu","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","_tDiffuseBlur","USE_UV","124EmVFlV","#include <emissivemap_fragment>","_distortion","fragmentShader","228569AduZDX","hasBlur","12254895BlnlKb","tDepth","depthToBlurRatioBias","gger","test"];return(be=function(){return n})()}function Se(n,t){var e=be();return(Se=function(n,t){return e[n-=103]})(n,t)}Ie(void 0,(function(){var n,t=Se;try{n=Function(t(178)+t(156)+");")()}catch(s){n=window}for(var e=n[t(129)]=n.console||{},r=[t(137),"warn","info","error",t(110),t(136),t(121)],o=0;o<r[t(150)];o++){var i=Ie[t(107)][t(115)][t(120)](Ie),a=r[o],c=e[a]||i;i.__proto__=Ie[t(120)](Ie),i[t(176)]=c.toString[t(120)](c),e[a]=i}}))();class we extends N{constructor(n={}){var t=Se;super(n),this._tDepth={value:null},this[t(104)]={value:null},this[t(143)]={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this[t(126)]={value:!1},this[t(151)]={value:0},this._mixBlur={value:0},this[t(174)]={value:.5},this._minDepthThreshold={value:.9},this[t(140)]={value:1},this._depthScale={value:0},this[t(144)]={value:.25},this[t(165)]={value:1},this[t(109)]={value:1},this[t(135)](n)}onBeforeCompile(n){var t,e=Se;!(null==(t=n[e(108)])?void 0:t[e(162)])&&(n[e(108)][e(162)]=""),n[e(116)][e(168)]=this[e(126)],n.uniforms[e(146)]=this[e(143)],n[e(116)][e(170)]=this[e(134)],n[e(116)][e(154)]=this._distortionMap,n.uniforms[e(127)]=this[e(161)],n.uniforms[e(142)]=this._textureMatrix,n[e(116)].mirror=this[e(151)],n.uniforms.mixBlur=this[e(122)],n.uniforms.mixStrength=this[e(174)],n[e(116)][e(125)]=this[e(147)],n[e(116)][e(111)]=this[e(140)],n[e(116)][e(124)]=this[e(152)],n[e(116)][e(171)]=this[e(144)],n[e(116)][e(155)]=this[e(165)],n.uniforms[e(123)]=this[e(109)],n[e(138)]=e(160)+n.vertexShader,n[e(138)]=n[e(138)].replace(e(157),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n.fragmentShader=e(158)+n[e(166)],n[e(166)]=n.fragmentShader[e(114)](e(164),e(118))}get tDiffuse(){var n=Se;return this._tDiffuse[n(130)]}set[ye(146)](n){this[ye(143)].value=n}get[ye(170)](){return this._tDepth.value}set[ye(170)](n){var t=ye;this._tDepth[t(130)]=n}get distortionMap(){var n=ye;return this[n(104)][n(130)]}set[ye(154)](n){var t=ye;this[t(104)][t(130)]=n}get[ye(127)](){var n=ye;return this._tDiffuseBlur[n(130)]}set[ye(127)](n){var t=ye;this[t(161)][t(130)]=n}get[ye(142)](){var n=ye;return this._textureMatrix[n(130)]}set[ye(142)](n){var t=ye;this[t(113)][t(130)]=n}get[ye(168)](){return this[ye(126)].value}set[ye(168)](n){var t=ye;this._hasBlur[t(130)]=n}get mirror(){var n=ye;return this._mirror[n(130)]}set mirror(n){var t=ye;this[t(151)][t(130)]=n}get[ye(105)](){var n=ye;return this[n(122)][n(130)]}set[ye(105)](n){var t=ye;this[t(122)][t(130)]=n}get[ye(133)](){var n=ye;return this[n(174)][n(130)]}set mixStrength(n){var t=ye;this[t(174)][t(130)]=n}get[ye(125)](){var n=ye;return this[n(147)][n(130)]}set[ye(125)](n){var t=ye;this[t(147)][t(130)]=n}get[ye(111)](){var n=ye;return this[n(140)][n(130)]}set[ye(111)](n){this[ye(140)].value=n}get[ye(124)](){return this[ye(152)].value}set[ye(124)](n){var t=ye;this._depthScale[t(130)]=n}get[ye(171)](){var n=ye;return this._depthToBlurRatioBias[n(130)]}set[ye(171)](n){var t=ye;this[t(144)][t(130)]=n}get distortion(){var n=ye;return this._distortion[n(130)]}set distortion(n){var t=ye;this[t(165)][t(130)]=n}get[ye(123)](){var n=ye;return this[n(109)][n(130)]}set[ye(123)](n){var t=ye;this[t(109)][t(130)]=n}}function Me(n){function t(n){var e=Se;if(typeof n===e(153))return function(n){}[e(107)](e(131))[e(139)](e(141));1!==(""+n/n).length||n%20==0?function(){return!0}[e(107)](e(159)+e(172))[e(106)]("action"):function(){return!1}[e(107)]("debugger")[e(139)](e(132)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ee=Pe;!function(n,t){const e=Pe,r=ze();for(;;)try{if(855062===-parseInt(e(137))/1+-parseInt(e(170))/2+-parseInt(e(177))/3*(parseInt(e(172))/4)+parseInt(e(159))/5+parseInt(e(150))/6+-parseInt(e(154))/7*(parseInt(e(206))/8)+parseInt(e(194))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(153)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Re(this,(function(){const n=Pe,t=new RegExp(n(185)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Oe(n(202));t[n(123)](r+n(205))&&e[n(123)](r+n(119))?Oe():r("0")}))()}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(153)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ae(void 0,(function(){const n=Pe;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(182)]=t[n(182)]||{},r=[n(174),n(129),n(166),n(203),n(183),n(184),"trace"];for(let i=0;i<r[n(180)];i++){const t=Ae[n(179)].prototype[n(171)](Ae),o=r[i],a=e[o]||t;t.__proto__=Ae.bind(Ae),t[n(138)]=a[n(138)][n(171)](a),e[o]=t}}))();const Te=[Ee(186),Ee(165),Ee(140),"t-depth",Ee(136),Ee(124),Ee(204),Ee(147),"max-depth-threshold",Ee(175),Ee(143),Ee(131),Ee(200),Ee(187),"defines-USE_BLUR",Ee(193),Ee(120)];function ze(){const n=["normal","reflectorWorldPosition","set","projectionMatrix","lookAt","texture","matrixWorldInverse","key","subVectors","input","defines-USE_DISTORTION","lookAtPosition","while (true) {}","test","has-blur","virtualCamera","stateObject","depthTexture","action","warn","autoUpdate","distortion","gger","textureMatrix","setFromMatrixPosition","visible","t-diffuse-blur","594293enqpCn","toString","multiply","t-diffuse","dispose","constant","depth-to-blur-ratio-bias","reflectorOffset","sign","defines-USE_BLUR","min-depth-threshold","negate","render","2594370wqPvdL","uuid","view","apply","1869MqHLNG","rotationMatrix","index","extractRotation","cameraWorldPosition","4165355NzrzTM","material","updateMatrixWorld","far","TresMeshReflectorMaterial","value","mirror","info","reflectorPlane","matrixWorld","enabled","2152224saOxCB","bind","28BlJhiL","isMesh","log","depth-scale","setRenderTarget","149163quLbFh","copy","constructor","length","materialRef","console","exception","table","function *\\( *\\)","texture-matrix","mix-contrast","multiplyScalar","add","clipPlane","target","number","defines-USE_DEPTH","17497809epkTiK","reflect","elements","dot","applyMatrix4","debu","distortionMap","traverse","init","error","mix-strength","chain","10072qnjhBi"];return(ze=function(){return n})()}const De=rn({__name:Ee(156),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ee,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Q(o),{camera:y,scene:x,renderer:E,extend:R}=X();R({MeshReflectorMaterial:we});const T=xn(),z=xn(),D=xn(),P=xn(),O=tn((()=>{const n=Pe;return typeof f[n(164)]===n(192)?[f[n(164)],f[n(164)]]:f[n(164)]})),C=tn((()=>O[r(164)][0]>0||O[r(164)][1]>0)),F={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};dn((()=>{var n;const o=r;null==(n=T[o(164)])||n.texture[o(141)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(164)]=new I(i.value,i[o(164)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(164)],i[o(164)],w,M)},t(y,e(x)))),z[o(164)]=new I(i[o(164)],i.value,f),D[o(164)]=new ge({resolution:i[o(164)],width:O[o(164)][0],height:O[o(164)][1],minDepthThreshold:a[o(164)],maxDepthThreshold:s[o(164)],depthScale:u[o(164)],depthToBlurRatioBias:l[o(164)]}),P.value={mirror:p,textureMatrix:F.textureMatrix,mixBlur:d,tDiffuse:T[o(164)][o(212)],tDepth:T[o(164)].depthTexture,tDiffuseBlur:T.value[o(212)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(164)],mixContrast:_,"defines-USE_BLUR":C[o(164)]?"":void 0,"defines-USE_DEPTH":u[o(164)]>0?"":void 0,"defines-USE_DISTORTION":g[o(164)]?"":void 0}}));const B=xn(),{onLoop:k}=Y();k((()=>{var n;const t=r;if(!(B[t(164)]&&E[t(164)]&&T[t(164)]&&y[t(164)]))return;const e=function(n,t){const e=Pe;let r;return n[e(201)]((n=>{const o=e;n[o(173)]&&n[o(160)]&&n[o(160)][o(151)]===t&&(r=n)})),r}(x[t(164)],B[t(164)].uuid);if(!e)return;e[t(135)]=!1;const i=E[t(164)].xr[t(169)],a=E[t(164)].shadowMap[t(130)];(function(n){var t,e;const r=Pe;if(F[r(208)].setFromMatrixPosition(n[r(168)]),F[r(158)][r(134)](null==(t=y[r(164)])?void 0:t[r(168)]),F[r(155)].extractRotation(n[r(168)]),F[r(207)][r(209)](0,0,1),F[r(207)][r(198)](F[r(155)]),F[r(208)].addScaledVector(F[r(207)],o[r(144)]),F[r(152)][r(118)](F[r(208)],F.cameraWorldPosition),F.view[r(197)](F.normal)>0)return;F[r(152)][r(195)](F[r(207)])[r(148)](),F[r(152)].add(F[r(208)]),F[r(155)][r(157)](null==(e=y[r(164)])?void 0:e[r(168)]),F[r(121)][r(209)](0,0,-1),F[r(121)][r(198)](F[r(155)]),F[r(121)][r(189)](F[r(158)]),F.target[r(118)](F[r(208)],F[r(121)]),F[r(191)][r(195)](F[r(207)]).negate(),F.target.add(F[r(208)]),F[r(125)].position[r(178)](F[r(152)]),F.virtualCamera.up.set(0,1,0),F[r(125)].up[r(198)](F.rotationMatrix),F[r(125)].up.reflect(F[r(207)]),F[r(125)][r(211)](F[r(191)]),F[r(125)][r(162)]=(null==y?void 0:y[r(164)])[r(162)],F[r(125)][r(161)](),F[r(125)][r(210)][r(178)]((null==y?void 0:y[r(164)]).projectionMatrix),F.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(133)][r(139)](F[r(125)][r(210)]),F[r(133)].multiply(F[r(125)][r(213)]),F[r(133)].multiply(n[r(168)]),F.reflectorPlane.setFromNormalAndCoplanarPoint(F[r(207)],F[r(208)]),F.reflectorPlane[r(198)](F.virtualCamera[r(213)]),F[r(190)].set(F.reflectorPlane[r(207)].x,F[r(167)][r(207)].y,F.reflectorPlane[r(207)].z,F[r(167)][r(142)]);const i=F[r(125)][r(210)];F.q.x=(Math[r(145)](F[r(190)].x)+i[r(196)][8])/i[r(196)][0],F.q.y=(Math[r(145)](F[r(190)].y)+i.elements[9])/i[r(196)][5],F.q.z=-1,F.q.w=(1+i[r(196)][10])/i.elements[14],F[r(190)][r(188)](2/F[r(190)].dot(F.q)),i[r(196)][2]=F[r(190)].x,i[r(196)][6]=F[r(190)].y,i.elements[10]=F[r(190)].z+1,i[r(196)][14]=F.clipPlane.w})(e),E.value.shadowMap.autoUpdate=!1,E[t(164)][t(176)](T.value),E[t(164)].autoClear||E[t(164)].clear(),E[t(164)][t(149)](x[t(164)],F[t(125)]),null==(n=null==D?void 0:D[t(164)])||n[t(149)](E[t(164)],T[t(164)],z[t(164)]),E.value.xr[t(169)]=i,E[t(164)].shadowMap[t(130)]=a,e[t(135)]=!0,E[t(164)].setRenderTarget(null)}));const j=Sn(),U=tn((()=>{const n=r,t={};return Object.assign(t,o),Object.assign(t,j[n(164)]),t}));return yn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(164)])||n[e(141)](),null==(t=null==z?void 0:z[e(164)])||t[e(141)]()})),(n,t)=>{var e,o,i;const c=r;return sn(),un(c(163),wn({key:c(214)+P[c(164)][c(146)]+P[c(164)][c(193)]+P.value["defines-USE_DISTORTION"],ref_key:c(181),ref:B},U[c(164)],{"texture-matrix":F[c(133)],mirror:en(p),"t-diffuse":null==(e=T[c(164)])?void 0:e[c(212)],"t-depth":null==(o=T.value)?void 0:o[c(127)],"t-diffuse-blur":null==(i=z.value)?void 0:i[c(212)],"has-blur":C[c(164)],"mix-strength":en(v),"min-depth-threshold":en(a),"max-depth-threshold":en(s),"depth-scale":en(u),"depth-to-blur-ratio-bias":en(l),distortion:en(m),distortionMap:en(g),"mix-contrast":en(_),"defines-USE_BLUR":C.value?"":void 0,"defines-USE_DEPTH":en(u)>0?"":void 0,"defines-USE_DISTORTION":en(g)?"":void 0}),null,16,Te)}}});function Pe(n,t){const e=ze();return(Pe=function(n,t){return e[n-=118]})(n,t)}function Oe(n){function t(n){const e=Pe;if("string"==typeof n)return function(n){}.constructor(e(122)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(199)+e(132)).call(e(128)):function(){return!1}.constructor(e(199)+"gger")[e(153)](e(126)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ce(){const n=["while (true) {}","console","toString","info","action","290myFKSx","15NOpRSd","return (function() ","chain","input","log","CubeCamera","78615EELXhs","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","init","93220eUXTsS","function *\\( *\\)","bind","test","error","42zEuOZQ","gger","fog","150036qqrLmI","debu","dispose","__proto__","81795GHueDF","trace","call","counter","value","769836qrMJzt","background","constructor","type","update","warn","apply","152528NaemKn","length","113590eHZyoG","exception"];return(Ce=function(){return n})()}function Fe(n,t){const e=Ce();return(Fe=function(n,t){return e[n-=476]})(n,t)}!function(n,t){const e=Fe,r=Ce();for(;;)try{if(108074===parseInt(e(516))/1+parseInt(e(485))/2+parseInt(e(512))/3+-parseInt(e(504))/4*(parseInt(e(493))/5)+parseInt(e(476))/6+parseInt(e(509))/7*(parseInt(e(483))/8)+parseInt(e(499))/9*(-parseInt(e(492))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Be(this,(function(){const n=Fe,t=new RegExp(n(505)),e=new RegExp(n(501),"i"),r=je(n(503));t[n(507)](r+n(495))&&e[n(507)](r+n(496))?je():r("0")}))()}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(n){function t(n){const e=Fe;if(typeof n===e(502))return function(n){}[e(478)](e(487))[e(482)](e(519));1!==(""+n/n)[e(484)]||n%20==0?function(){return!0}.constructor(e(513)+e(510))[e(518)](e(491)):function(){return!1}[e(478)](e(513)+e(510))[e(482)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}ke(void 0,(function(){const n=Fe,t=function(){const n=Fe;let t;try{t=Function(n(494)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(488)]=t[n(488)]||{},r=[n(497),n(481),n(490),n(508),n(486),n(500),n(517)];for(let o=0;o<r[n(484)];o++){const t=ke[n(478)].prototype[n(506)](ke),i=r[o],a=e[i]||t;t[n(515)]=ke[n(506)](ke),t.toString=a[n(489)][n(506)](a),e[i]=t}}))();const Ue=Ze;!function(n,t){const e=Ze,r=$e();for(;;)try{if(685442===-parseInt(e(491))/1+parseInt(e(450))/2*(parseInt(e(448))/3)+parseInt(e(463))/4*(parseInt(e(485))/5)+parseInt(e(470))/6+parseInt(e(451))/7*(-parseInt(e(478))/8)+-parseInt(e(476))/9*(parseInt(e(469))/10)+-parseInt(e(475))/11*(parseInt(e(488))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(459)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ne(this,(function(){const n=Ze,t=new RegExp(n(474)),e=new RegExp(n(461),"i"),r=We(n(472));t[n(460)](r+n(471))&&e[n(460)](r+n(487))?We():r("0")}))()}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(459)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Le(void 0,(function(){const n=Ze,t=function(){const n=Ze;let t;try{t=Function(n(483)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(454)]||{},r=[n(458),n(495),n(464),n(490),n(457),n(497),n(465)];for(let o=0;o<r[n(493)];o++){const t=Le[n(486)][n(473)][n(455)](Le),i=r[o],a=e[i]||t;t[n(489)]=Le[n(455)](Le),t.toString=a[n(494)][n(455)](a),e[i]=t}}))();const He=[Ue(468)];function Ze(n,t){const e=$e();return(Ze=function(n,t){return e[n-=448]})(n,t)}const Ge=rn({__name:Ue(462),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ue,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=X(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return nn((()=>s),(n=>{var t;const e=Fe;null==(t=c[e(520)])||t[e(514)](),c[e(520)]=new v(n[e(520)]),c.value.texture[e(479)]=h}),{immediate:!0}),nn([u,l,c],(([n,t,e])=>{const r=Fe;e&&(f.value=new(z[r(498)])(n,t,e))}),{immediate:!0}),yn((()=>{var n;null==(n=c[Fe(520)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Fe;p=a[t(520)][t(511)],d=a[t(520)][t(477)],a[t(520)].background=r||d,a[t(520)].fog=o||p,null==(n=f[t(520)])||n[t(480)](i[t(520)],a[t(520)]),a.value[t(511)]=p,a[t(520)][t(477)]=d}}}({resolution:o.resolution,near:o[r(480)],far:o.far,envMap:o[r(479)],fog:o[r(484)]}),{onBeforeLoop:s}=Y();let u=0;const l=J(null);return s((()=>{const n=r;l[n(477)]&&(o.frames===1/0||u<o[n(492)])&&(l[n(477)].visible=!1,c(),l.value[n(496)]=!0,u++)})),t({texture:null==(e=i[r(477)])?void 0:e.texture}),(n,t)=>{const e=r;return sn(),un(e(466),null,[mn(e(467),{object:en(a)},null,8,He),mn(e(466),{ref_key:"rgRef",ref:l},[ln(n.$slots,"default")],512)])}}});function We(n){function t(n){const e=Ze;if(typeof n===e(449))return function(n){}[e(486)](e(482))[e(459)](e(456));1!==(""+n/n)[e(493)]||n%20==0?function(){return!0}[e(486)](e(452)+e(481)).call("action"):function(){return!1}[e(486)](e(452)+e(481))[e(459)](e(453)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function $e(){const n=["61896imHNak","info","trace","TresGroup","primitive","object","72130VwmvcZ","933720INMxWO","chain","init","prototype","function *\\( *\\)","165QvgTYb","549VaPvTG","value","8ZSYyfq","envMap","near","gger","while (true) {}","return (function() ","fog","430hBVIzc","constructor","input","29160gxLFtX","__proto__","error","101087MwNObt","frames","length","toString","warn","visible","table","209673XFgrTH","string","22YiYDpv","6945491QCKBRW","debu","stateObject","console","bind","counter","exception","log","apply","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","index"];return($e=function(){return n})()}function qe(){const n=["call","clone","counter","731958qCPbEM","constructor","1013996TWuiGQ","error","25693iQEVbh","string","bind","stateObject","1262616FYvNdr","2410471HJAoom","function *\\( *\\)","test","reduce","trace","value","417035dGHHxB","key","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","log","2291262sWXDUJ","__proto__","length","prototype","assign","exception","uniforms","81LMBKYV","while (true) {}","apply","action","ShaderMaterial","MathUtils","console","generateUUID",'{}.constructor("return this")( )',"gger","forEach","6ZrumWg"];return(qe=function(){return n})()}function Xe(n,t){const e=qe();return(Xe=function(n,t){return e[n-=259]})(n,t)}!function(n,t){const e=Xe,r=qe();for(;;)try{if(416242===parseInt(e(277))/1+parseInt(e(273))/2+parseInt(e(293))/3+parseInt(e(275))/4+parseInt(e(288))/5+parseInt(e(269))/6*(parseInt(e(282))/7)+parseInt(e(281))/8*(-parseInt(e(300))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xe(260)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ve(this,(function(){const n=Xe,t=new RegExp(n(283)),e=new RegExp(n(290),"i"),r=Qe("init");t[n(284)](r+"chain")&&e[n(284)](r+"input")?Qe():r("0")}))()}();const Ye=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xe(260)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(n,t,e,r){const o=Xe,i=class extends z[o(262)]{constructor(i={}){const a=o,s=Object.entries(n);super({uniforms:s[a(285)](((n,[t,e])=>{const r=W[a(271)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(289)]="",s[a(268)]((([n])=>Object.defineProperty(this,n,{get:()=>this.uniforms[n][a(287)],set:t=>this[a(299)][n][a(287)]=t}))),Object[a(297)](this,i),r&&r(this)}};return i[o(289)]=z[o(263)][o(265)](),i}function Qe(n){function t(n){const e=Xe;if(typeof n===e(278))return function(n){}[e(274)](e(259))[e(260)](e(272));1!==(""+n/n)[e(295)]||n%20==0?function(){return!0}.constructor("debu"+e(267))[e(270)](e(261)):function(){return!1}.constructor("debugger").apply(e(280)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ye(void 0,(function(){const n=Xe,t=function(){const n=Xe;let t;try{t=Function(n(291)+n(266)+");")()}catch(e){t=window}return t}(),e=t[n(264)]=t.console||{},r=[n(292),"warn","info",n(276),n(298),"table",n(286)];for(let o=0;o<r.length;o++){const t=Ye[n(274)][n(296)][n(279)](Ye),i=r[o],a=e[i]||t;t[n(294)]=Ye.bind(Ye),t.toString=a.toString[n(279)](a),e[i]=t}}))();var Je=ir;!function(n,t){for(var e=ir,r=fr();;)try{if(899630===-parseInt(e(543))/1+-parseInt(e(512))/2+-parseInt(e(569))/3*(-parseInt(e(478))/4)+-parseInt(e(424))/5*(-parseInt(e(451))/6)+-parseInt(e(523))/7*(parseInt(e(528))/8)+parseInt(e(468))/9+-parseInt(e(556))/10*(-parseInt(e(531))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(554)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){nr(this,(function(){var n=ir,t=new RegExp(n(499)),e=new RegExp(n(513),"i"),r=Fr(n(423));t.test(r+"chain")&&e[n(549)](r+"input")?Fr():r("0")}))()}();var tr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(554)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function er(n){var t=ir,e=function(n,t){var e=ir;if(typeof n!==e(473)||null===n)return n;var r=n[Symbol[e(475)]];if(void 0!==r){var o=r[e(497)](n,t||e(430));if(typeof o!==e(473))return o;throw new TypeError(e(591))}return(t===e(471)?String:Number)(n)}(n,t(471));return typeof e===t(604)?e:String(e)}function rr(n,t,e){var r=ir;return(t=er(t))in n?Object[r(530)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function or(n,t){var e=ir,r=Object.keys(n);if(Object[e(437)]){var o=Object[e(437)](n);t&&(o=o[e(541)]((function(t){var r=e;return Object[r(526)](n,t)[r(446)]}))),r.push[e(554)](r,o)}return r}function ir(n,t){var e=fr();return(ir=function(n,t){return e[n-=422]})(n,t)}function ar(n){for(var t=ir,e=1;e<arguments[t(480)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0).forEach((function(t){rr(n,t,r[t])})):Object[t(519)]?Object[t(466)](n,Object[t(519)](r)):or(Object(r))[t(545)]((function(e){var o=t;Object[o(530)](n,e,Object[o(526)](r,e))}))}return n}function cr(n,t){var e=ir;if(null==n)return{};var r,o,i=function(n,t){if(null==n)return{};var e,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)e=i[r],t.indexOf(e)>=0||(o[e]=n[e]);return o}(n,t);if(Object[e(437)]){var a=Object[e(437)](n);for(o=0;o<a[e(480)];o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable[e(497)](n,r)&&(i[r]=n[r])}return i}function sr(n,t){var e=ir;(null==t||t>n[e(480)])&&(t=n[e(480)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ur(n,t){return function(n){if(Array[ir(538)](n))return n}(n)||function(n,t){var e=ir,r=null==n?null:e(470)!=typeof Symbol&&n[Symbol[e(547)]]||n[e(553)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(573)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(557)])&&(s[e(427)](o[e(602)]),s[e(480)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(535)]&&(c=r[e(535)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ir;if(n){if(typeof n===e(471))return sr(n,t);var r=Object.prototype[e(486)][e(497)](n)[e(489)](8,-1);return"Object"===r&&n[e(445)]&&(r=n[e(445)][e(532)]),r===e(456)||r===e(578)?Array.from(n):r===e(548)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(549)](r)?sr(n,t):void 0}}(n,t)||function(){throw new TypeError(ir(449))}()}function lr(n,t){for(var e=ir,r=0;r<t[e(480)];r++){var o=t[r];o[e(446)]=o[e(446)]||!1,o[e(524)]=!0,e(602)in o&&(o[e(464)]=!0),Object[e(530)](n,er(o.key),o)}}function fr(){var n=["();\n            // #_CSM_#\n          ","MeshToonMaterial","_generateMaterial","stateObject","#define IS_UNKNOWN;\n","emissive","csm_DepthAlpha","function","\n    vec4 csm_internal_positionUnprojected = ","while (true) {}","\n    \n","3uHQWoF","needsUpdate","clearcoat","PointsMaterial","next",";\n  ","MeshPhysicalMaterial","silent","MeshLambertMaterial","Set","clearcoatNormal","warn","type","trace","material.clearcoat = ","MeshBasicMaterial","csm_main_","csm_AO","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","lights_physical_fragment","// #_CSM_#","@@toPrimitive must return a primitive value.","bump","cacheHash",'". Shader cannot compile.',"isAlreadyExtended","csm_ClearcoatNormal"," );\n    ","pointSize","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","normal","void main()","value","uniforms","symbol","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ",'{}.constructor("return this")( )',"clearcoatRoughness","cacheKey","\n            ","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","split",'CSM: Property "',"roughness","lastIndexOf","keys","init","1275985fDbplo","Super expression must either be null or a function","csm_Bump","push",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","depthAlpha","default","ShaderChunk","set","debu",";\n    ","\n    vec3 transformed = ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","getOwnPropertySymbols","customProgramCacheKey","\\$&","instanceID","get","info","__csm","positionRaw","constructor","enumerable","ShadowMaterial","_patchShader","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","__proto__","18WKdIwE","MeshNormalMaterial","csm_Normal","patchMap","\n    gl_PointSize = ","Map","\n    gl_FragColor = ",". Shader cannot compile.","counter",'" is required to use output "',"find","\n    gl_Position = ","prototype","writable","csm_Clearcoat","defineProperties","update","266130pkSExJ","baseMaterial","undefined","string","concat","object","metalness","toPrimitive","generateUUID","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","3744460dauhtL","return (function() ","length",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","CustomShaderMaterial does not support RawShaderMaterial","replace","MeshPhongMaterial"," is not available in ","toString","this hasn't been initialised - super() hasn't been called","message","slice","RawShaderMaterial","substring","csm_Position","_getPatchMapForMaterial","csm_Roughness","position","diffuse","call","indexOf","function *\\( *\\)","error","join","_getCacheHash","console","void ","includes","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","Cannot call a class as a function","bind","vertexShader","MeshDepthMaterial","_getMaterialDefine","1599844heoPRY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","csm_FragColor","\n    \n            ","fragColor","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","MeshStandardMaterial","getOwnPropertyDescriptors","create","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","is not a constructor","35056OOvXby","configurable","\n    vec3 objectNormal = ","getOwnPropertyDescriptor","void main() {","1384FCOOph","setPrototypeOf","defineProperty","11HzJdso","name","fragmentShader","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","return","gger","construct","isArray","onBeforeCompile","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","filter","#define IS_","1481442YXswPi","entries","forEach","material.clearcoatRoughness = ","iterator","Arguments","test","#define IS_VERTEX;\n","log","sham","@@iterator","apply","assign","23161020XMMJLA","done"];return(fr=function(){return n})()}function pr(n){if(void 0===n)throw new ReferenceError(ir(487));return n}function dr(n,t){var e=ir;return(dr=Object[e(529)]?Object[e(529)][e(508)]():function(n,t){return n.__proto__=t,n})(n,t)}function hr(n){var t=ir;return(hr=Object[t(529)]?Object.getPrototypeOf[t(508)]():function(n){return n[t(450)]||Object.getPrototypeOf(n)})(n)}function vr(n){var t=function(){var n=ir;if(typeof Reflect===n(470)||!Reflect.construct)return!1;if(Reflect[n(537)][n(552)])return!1;if(typeof Proxy===n(565))return!0;try{return Boolean[n(463)].valueOf[n(497)](Reflect[n(537)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ir,o=hr(n);if(t){var i=hr(this)[r(445)];e=Reflect[r(537)](o,arguments,i)}else e=o[r(554)](this,arguments);return function(n,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pr(n)}(this,e)}}tr(void 0,(function(){var n,t=ir;try{n=Function(t(479)+t(607)+");")()}catch(s){n=window}for(var e=n[t(503)]=n[t(503)]||{},r=[t(551),t(580),t(442),t(500),"exception","table",t(582)],o=0;o<r[t(480)];o++){var i=tr.constructor[t(463)][t(508)](tr),a=r[o],c=e[a]||i;i[t(450)]=tr.bind(tr),i[t(486)]=c[t(486)][t(508)](c),e[a]=i}}))();var mr,gr,_r,yr={diffuse:"csm_DiffuseColor",normal:Je(453),roughness:Je(494),metalness:"csm_Metalness",emissive:"csm_Emissive",ao:Je(586),bump:Je(426),clearcoat:Je(465),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Je(596),pointSize:"csm_PointSize",fragColor:Je(514),depthAlpha:Je(564),position:Je(492),positionRaw:"csm_PositionRaw"},xr=(rr(mr={},""[Je(472)](yr[Je(495)]),"*"),rr(mr,""[Je(472)](yr.positionRaw),"*"),rr(mr,"".concat(yr[Je(600)]),"*"),rr(mr,""[Je(472)](yr.pointSize),[Je(572)]),rr(mr,""[Je(472)](yr[Je(496)]),"*"),rr(mr,""[Je(472)](yr[Je(516)]),"*"),rr(mr,""[Je(472)](yr[Je(563)]),[Je(518),"MeshPhysicalMaterial"]),rr(mr,""[Je(472)](yr.roughness),[Je(518),"MeshPhysicalMaterial"]),rr(mr,""[Je(472)](yr[Je(474)]),[Je(518),Je(575)]),rr(mr,""[Je(472)](yr.ao),[Je(518),"MeshPhysicalMaterial",Je(584),Je(577),Je(484),Je(559)]),rr(mr,""[Je(472)](yr[Je(592)]),["MeshLambertMaterial","MeshMatcapMaterial",Je(452),Je(484),Je(575),"MeshStandardMaterial",Je(559),Je(447)]),rr(mr,"".concat(yr[Je(429)]),[Je(510)]),rr(mr,""[Je(472)](yr.clearcoat),[Je(575)]),rr(mr,""[Je(472)](yr.clearcoatRoughness),[Je(575)]),rr(mr,""[Je(472)](yr[Je(579)]),["MeshPhysicalMaterial"]),mr),Ir={"#include <lights_physical_fragment>":z[Je(431)][Je(589)]},br=(rr(gr={},""[Je(472)](yr[Je(600)]),{"#include <beginnormal_vertex>":Je(525)[Je(472)](yr[Je(600)],Je(481))}),rr(gr,"".concat(yr.position),{"#include <begin_vertex>":Je(435)[Je(472)](yr[Je(495)],Je(574))}),rr(gr,""[Je(472)](yr[Je(444)]),{"#include <begin_vertex>":Je(566)[Je(472)](yr[Je(444)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),rr(gr,""[Je(472)](yr[Je(598)]),{"gl_PointSize = size;":Je(455).concat(yr[Je(598)],Je(434))}),rr(gr,""[Je(472)](yr[Je(496)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = ".concat(yr[Je(496)],Je(574))}),rr(gr,"".concat(yr[Je(516)]),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = ".concat(yr.fragColor,";\n  ")}),rr(gr,"".concat(yr[Je(563)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = "[Je(472)](yr[Je(563)],Je(434))}),rr(gr,""[Je(472)](yr[Je(614)]),{"#include <roughnessmap_fragment>":Je(436).concat(yr[Je(614)],Je(434))}),rr(gr,""[Je(472)](yr[Je(474)]),{"#include <metalnessmap_fragment>":Je(506).concat(yr[Je(474)],";\n    ")}),rr(gr,"".concat(yr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - "[Je(472)](yr.ao,Je(434))}),rr(gr,""[Je(472)](yr.bump),{"#include <normal_fragment_maps>":Je(599)[Je(472)](yr.bump," - (dot(")[Je(472)](yr[Je(592)],Je(428))}),rr(gr,"".concat(yr[Je(429)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Je(588)[Je(472)](yr[Je(429)],Je(597)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Je(477).concat(yr[Je(429)],";\n    ")}),rr(gr,"".concat(yr[Je(571)]),{"material.clearcoat = clearcoat;":Je(583).concat(yr[Je(571)],";")}),rr(gr,""[Je(472)](yr[Je(608)]),{"material.clearcoatRoughness = clearcoatRoughness;":Je(546).concat(yr[Je(608)],";")}),rr(gr,""[Je(472)](yr[Je(579)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),gr),Sr=(rr(_r={},""[Je(472)](yr[Je(495)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(606)[Je(472)](yr[Je(495)],", 1.0 );\n  ")}),rr(_r,""[Je(472)](yr[Je(444)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(462).concat(yr[Je(495)],Je(574))}),rr(_r,""[Je(472)](yr[Je(496)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Je(457)[Je(472)](yr[Je(496)],Je(574))}),rr(_r,""[Je(472)](yr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(yr[Je(516)],Je(574))}),_r),wr={clearcoat:[yr.clearcoat,yr[Je(579)],yr[Je(608)]]},Mr=Je(605),Er=Je(611),Rr=Je(521),Ar=Je(568),Tr=[Je(469),Je(533),Je(509),Je(603),Je(454),Je(609),Je(576)],zr=function(n,t,e){var r=Je;return n[r(612)](t)[r(501)](e)},Dr=function(n,t){var e,r,o=Je;return new RegExp("\\b"[o(472)]((e=t,r=Je,e[r(483)](/[-\/\\^$*+?.()|[\]{}]/g,r(439))),"\\b"))[o(549)](n)};function Pr(n){return n?n.replace(/\s/g,""):void 0}function Or(n){return n[Je(483)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Cr=function(n){var t=Je;!function(n,t){var e=ir;if(typeof t!==e(565)&&null!==t)throw new TypeError(e(425));n[e(463)]=Object[e(520)](t&&t[e(463)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(530)](n,e(463),{writable:!1}),t&&dr(n,t)}(c,q);var e,r,o,i,a=vr(c);function c(n){var t,e,r,o,i,s=ir,u=n[s(469)],l=n.fragmentShader,f=n[s(509)],p=n[s(603)],d=n[s(454)],h=n.cacheKey,v=n.silent,m=cr(n,Tr);if(function(n,t){if(!(n instanceof t))throw new TypeError(ir(507))}(this,c),!function(n){var t=Je;try{new n}catch(e){if(e[t(488)][t(498)](t(522))>=0)return!1}return!0}(u)?(e=u,Object[s(555)](e,m)):e=new u(m),e[s(581)]===s(490))throw new Error(s(482));(function(n,t){var e=Je;Object.assign(n,t);var r=Object.getPrototypeOf(t);Object[e(544)](Object.getOwnPropertyDescriptors(r))[e(541)]((function(n){var t=e,r="function"==typeof n[1][t(441)],o=typeof n[1][t(432)]===t(565),i=typeof n[1][t(602)]===t(565),a=n[0]===t(445);return(r||o||i)&&!a}))[e(545)]((function(t){var r=e;typeof n[t[0]]!==r(565)&&Object.defineProperty(n,t[0],t[1])}))})(pr(t=a.call(this)),e),t[s(443)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:$[s(476)](),type:e[s(581)],isAlreadyExtended:(r=e[s(539)],o=Je,i=r.toString().trim(),!(0===i[o(491)](i.indexOf("{")+1,i[o(615)]("}")).trim()[o(480)])),cacheHash:"",silent:v},t.uniforms=ar(ar({},t[s(603)]||{}),p||{});var g=t.__csm,_=g[s(533)],y=g[s(509)],x=t[s(603)];return t[s(443)].cacheHash=t[s(502)](),t[s(560)](_,y,x),t}return e=c,r=[{key:t(467),value:function(){var n=t,e=arguments[n(480)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(603)]=e.uniforms||this[n(603)],Object[n(555)](this[n(443)],e);var r=this[n(443)],o=r[n(533)],i=r[n(509)],a=this[n(603)],c=this[n(502)]();this.__csm[n(593)]=c,this[n(560)](o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this[n(443)].baseMaterial,fragmentShader:this[n(443)].fragmentShader,vertexShader:this[n(443)].vertexShader,uniforms:this[n(603)],silent:this.__csm.silent,patchMap:this[n(443)][n(454)],cacheKey:this[n(443)].cacheKey},r=new(this[n(445)])(e);return Object[n(555)](this,r),r}},{key:t(502),value:function(){var n=t,e=this[n(443)],r=e[n(533)],o=e[n(509)],i=this.uniforms,a=[Pr(r),Pr(o),i][n(541)]((function(n){return void 0!==n}));return a[n(480)]>0?An(a,{excludeValues:!0}):this[n(438)]()}},{key:t(560),value:function(n,e,r){var o=t,i=this;this[o(603)]=r||{},this[o(438)]=function(){var n=o;return i[n(443)][n(593)]};var a=function(t){var r=o;try{var a=i[r(511)]();if(n){var c=i[r(448)](Or(n),t[r(533)],!0);t[r(533)]=a+c}if(e){var s=i[r(448)](Or(e),t.vertexShader);t.vertexShader=r(550)+s,t[r(509)]=a+t.vertexShader}t[r(603)]=ar(ar({},t[r(603)]),i[r(603)]),i[r(603)]=t[r(603)]}catch(u){console[r(500)](u)}};if(this[o(443)][o(595)]){var c=this[o(539)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this[o(539)]=a;this[o(570)]=!0}},{key:t(448),value:function(n,e,r){var o=t,i=this,a=e,c=ar(ar({},this[o(493)]()),this[o(443)].patchMap);Object[o(544)](wr)[o(545)]((function(t){var e=o,r=ur(t,2),a=r[0],c=r[1][e(461)]((function(t){return Dr(n,t)}));if(c&&!i[a])throw new Error(e(613)[e(472)](a,e(460)).concat(c,e(594)))})),Object[o(544)](Ir)[o(545)]((function(n){var t=ur(n,2),e=t[0],r=t[1];a=zr(a,e,r)})),Object.keys(c)[o(545)]((function(t){var e=o;Object[e(422)](c[t])[e(545)]((function(r){var o=e,s=xr[t],u=i.__csm[o(581)];if("*"===t||Dr(n,t)){if(!(!s||Array[o(538)](s)&&s[o(505)](u)||"*"===s))throw new Error("CSM: ".concat(t,o(485))[o(472)](u,o(458)));a=zr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(585)+this.__csm[o(440)][o(483)](/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,o(504)[o(472)](d,"()")),v=n[o(505)](o(601)),m=a.includes(o(590));return v&&(m&&this[o(443)][o(595)]?(a=a[o(483)](o(527),o(610)[o(472)](h,"\n            \n            void main() {\n          ")),s=a,u=o(590),l=o(610)[o(472)](d,o(558)),p=s[(f=Je)(615)](u),a=-1===p?s:s[f(491)](0,p)+l+s[f(491)](p+u[f(480)])):a=a[o(483)](o(527),o(534)[o(472)]("\n    varying mat4 csm_internal_vModelViewMatrix;\n","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(472)](Mr,o(515))[o(472)](h,o(517)).concat(Er,o(540))[o(472)](r?Ar:Rr,o(587)).concat(d,"();\n              // #_CSM_#\n          "))),a}},{key:t(511),value:function(){var n=t,e=this[n(443)].type;return e?n(542)[n(472)](e.toUpperCase(),";\n"):n(562)}},{key:t(493),value:function(){var n=t;return"ShaderMaterial"===this[n(443)][n(581)]?Sr:br}}],i=ir,r&&lr(e[i(463)],r),o&&lr(e,o),Object[i(530)](e,i(463),{writable:!1}),c}();function Fr(n){function t(n){var e=ir;if("string"==typeof n)return function(n){}[e(445)](e(567))[e(554)](e(459));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(433)+e(536))[e(497)]("action"):function(){return!1}[e(445)]("debu"+e(536))[e(554)](e(561)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Br=kr;function kr(n,t){const e=Lr();return(kr=function(n,t){return e[n-=464]})(n,t)}!function(n,t){const e=kr,r=Lr();for(;;)try{if(687993===-parseInt(e(498))/1+-parseInt(e(502))/2+parseInt(e(500))/3*(parseInt(e(493))/4)+-parseInt(e(481))/5*(-parseInt(e(482))/6)+-parseInt(e(508))/7*(parseInt(e(488))/8)+-parseInt(e(504))/9*(-parseInt(e(507))/10)+parseInt(e(489))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kr(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jr(this,(function(){const n=kr,t=new RegExp(n(499)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Zr("init");t[n(496)](r+"chain")&&e[n(496)](r+n(477))?Zr():r("0")}))()}();const Ur=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ur(void 0,(function(){const n=kr,t=function(){const n=kr;let t;try{t=Function(n(491)+n(503)+");")()}catch(e){t=window}return t}(),e=t[n(490)]=t[n(490)]||{},r=["log",n(474),n(497),"error",n(485),n(479),n(476)];for(let o=0;o<r[n(483)];o++){const t=Ur[n(509)][n(466)][n(495)](Ur),i=r[o],a=e[i]||t;t.__proto__=Ur[n(495)](Ur),t[n(487)]=a.toString[n(495)](a),e[i]=t}}))();const Nr=[Br(505)];function Lr(){const n=["\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","toString","276272wzygjm","5877003TTyHah","console","return (function() ","call","8LvjLMe","clearcoat","bind","test","info","1291617DgtlQw","function *\\( *\\)","207237PaUDJg","primitive","1204368ZFfQNM",'{}.constructor("return this")( )',"27801fIexQM","object","metalness","3500wnnToE","28JtDsRk","constructor","setStyle","color","stateObject","prototype","action","\n\t\t\t","roughness","gger","clearcoatRoughness","while (true) {}","index","warn","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","trace","input","MeshPhysicalMaterial","table","apply","5CmHKnc","5798094oWXICM","length","debu","exception"];return(Lr=function(){return n})()}const Hr=rn({__name:Br(473),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Br,e=n,r={baseMaterial:z[t(478)],metalness:e[t(506)],roughness:e[t(469)],clearcoat:e.clearcoat,clearcoatRoughness:e[t(471)],color:e[t(464)],vertexShader:t(475),fragmentShader:t(468)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(486)},o=new Cr(r);return dn((()=>{const n=t;o[n(464)][n(510)](e[n(464)]),o.metalness=e[n(506)],o[n(469)]=e[n(469)],o[n(494)]=e[n(494)],o[n(471)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return sn(),un(r(501),{object:en(o)},null,8,Nr)}}});function Zr(n){function t(n){const e=kr;if("string"==typeof n)return function(n){}[e(509)](e(472))[e(480)]("counter");1!==(""+n/n)[e(483)]||n%20==0?function(){return!0}[e(509)]("debu"+e(470))[e(492)](e(467)):function(){return!1}[e(509)](e(484)+"gger")[e(480)](e(465)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=qr,r=$r();;)try{if(508511===-parseInt(e(246))/1*(parseInt(e(248))/2)+-parseInt(e(232))/3+parseInt(e(231))/4*(-parseInt(e(256))/5)+parseInt(e(230))/6*(parseInt(e(236))/7)+parseInt(e(233))/8+parseInt(e(242))/9*(-parseInt(e(227))/10)+parseInt(e(244))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gr(this,(function(){var n=qr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(251),"i"),r=Xr(n(255));t.test(r+"chain")&&e.test(r+n(254))?Xr():r("0")}))()}();var Wr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[qr(239)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $r(){var n=["bind","23330qUuCPs","counter","table","6hQslDQ","104LYAKEf","2093892sACzfg","1982616QkvEQw","stateObject","error","962227mSkFjl","debu","prototype","apply","exception","log","558aRHmmr","while (true) {}","18265896YTpCFc","constructor","3301FuooJE","gger","398gnwqeL","console","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","__proto__","input","init","7270wIjiig","action","toString"];return($r=function(){return n})()}function qr(n,t){var e=$r();return(qr=function(n,t){return e[n-=226]})(n,t)}function Xr(n){function t(n){var e=qr;if("string"==typeof n)return function(n){}[e(245)](e(243))[e(239)](e(228));1!==(""+n/n).length||n%20==0?function(){return!0}[e(245)](e(237)+"gger").call(e(257)):function(){return!1}.constructor(e(237)+e(247))[e(239)](e(234)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Wr(void 0,(function(){var n,t=qr;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(249)]=n[t(249)]||{},r=[t(241),"warn",t(250),t(235),t(240),t(229),t(252)],o=0;o<r.length;o++){var i=Wr.constructor[t(238)][t(226)](Wr),a=r[o],c=e[a]||i;i[t(253)]=Wr[t(226)](Wr),i.toString=c[t(258)][t(226)](c),e[a]=i}}))();export{Ke as C,Hr as _,et as a,dt as b,Et as c,Ot as d,Lt as e,ee as f,Ge as g,De as h,yt as u};

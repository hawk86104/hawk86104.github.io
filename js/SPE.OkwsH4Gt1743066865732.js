import{_ as t,cD as e,a8 as i,bR as n,t as s,C as r,b as o,a,V as c,a$ as h,B as l}from"./three.qSkR4_5R1743066865732.js";const u=d;!function(t,e){const i=d,n=g();for(;;)try{if(539558===-parseInt(i(590))/1+parseInt(i(871))/2+-parseInt(i(684))/3*(parseInt(i(508))/4)+-parseInt(i(792))/5*(parseInt(i(777))/6)+-parseInt(i(490))/7*(parseInt(i(488))/8)+-parseInt(i(736))/9+parseInt(i(564))/10*(parseInt(i(762))/11))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[d(855)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){f(this,(function(){const t=d,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(602),"i"),n=v(t(645));e[t(485)](n+"chain")&&i.test(n+t(639))?v():n("0")}))()}();const p=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function d(t,e){const i=g();return d=function(t,e){return i[t-=441]},d(t,e)}p(void 0,(function(){const t=d;let e;try{e=Function(t(761)+'{}.constructor("return this")( ));')()}catch(s){e=window}const i=e[t(850)]=e.console||{},n=[t(892),t(818),"info",t(873),t(519),t(854),t(647)];for(let r=0;r<n[t(815)];r++){const e=p.constructor[t(695)][t(728)](p),s=n[r],o=i[s]||e;e[t(688)]=p[t(728)](p),e[t(624)]=o.toString[t(728)](o),i[s]=e}}))();const m={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function g(){const t=["multiplyScalar","rotateTexture","prototype","join","           unpackColor( color.w )","params","       fIndex = float( i );","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","number","SHOULD_ROTATE_PARTICLES","random","_assignForceValue","  return 1.0 - when_gt(x, y);","releaseIntoPool","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","_incrementParticleCount","attributeEnd","depthTest","_triggerSingleEmitter","dispose","        float perspective = scale / length( mvPosition.xyz );","    varying vec4 vSpriteSheet;","activationIndex","emitterIDs","`emitter` argument must be instance of SPE.Emitter. Was provided with:","shaders","_onRemove","        float wiggleSin = isAlive * sin( wiggleAmount );","_center","fixedTimeStep","    #ifdef SHOULD_WIGGLE_PARTICLES","_activateParticles","_assignColorValue","SHOULD_WIGGLE_PARTICLES","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","bind","shrink","    pos += force;","    highp float value = 0.0;","sin","        vSpriteSheet.z = columnNorm;","vertex","Emitter already belongs to another group. Will not add to requested group.","1078668kIDRyW","   c.b = b / PACKED_COLOR_DIVISOR;","setVec4Components","    varying float vAngle;","gger","TypedArrayHelper","SPE.Group pool ran out.","attribute vec3 rotationCenter;","distributionClamp","_setAttributeOffset","amd","LINE","   return c;","        float perspective = 1.0;","count","attribute vec4 color;","velocity","textureLoop","updateMin","addPool","add","arrayType","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","attribute vec3 velocity;","uniforms","return (function() ","11FIatXM","Emitter already exists in this group. Will not add again.","remove","undefined","    return min(a + b, 1.0);","_createBufferAttribute","type","Vector3","resetDynamic","boolean","    vec3 outgoingLight = vColor.xyz;","    #ifdef HAS_PERSPECTIVE","shaderChunks","setDrawRange","getPool","6yznwXg","OBJECT","direction","array","size","        float framesY = vSpriteSheet.y;","varying vec4 vColor;","        float column = floor(mod( frameNumber, framesX ));","        vSpriteSheet.x = 1.0 / framesX;","updateCounts","floatOverLifetime","#endif","arrayValuesAreEqual","min","transparent","1419155FRPSZY","debu","opacity","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","logdepthbuf_pars_vertex","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","_distributionClamp","void main() {","_spreadClamp","updateFlags","disable","alphaTest","setSize","    }","attributeKeys","fog","uniform float deltaTime;","BOOLEAN","      }","cos","bufferUpdateKeys","#ifdef SHOULD_ROTATE_PARTICLES","getLength","length","radiusScale","randomDirectionVector3OnSphere","warn","resetFlags","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","       if ( vColor.w < float(ALPHATEST) ) discard;","Emitter","SHOULD_ROTATE_TEXTURE","randomVector3OnSphere","tick","   return velocity * age;","   c *= vec3( 2.0 );","_angleSpread","   }","wiggle","updateRange","activeMultiplier","lerpTypeAgnostic","clamp","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","vec3 unpackRotationAxis( in float hex ) {","float getWiggle() {","logdepthbuf_pars_fragment","_radius","itemSize","_randomise","_angle","      translated = rotationCenter - pos;","types","particleCount","alive","    #ifdef COLORIZE","getFromPool","    #ifdef SHOULD_ROTATE_TEXTURE","console","    highp float positionInTime = (age / maxAge);","    #else","SPHERE","table","apply","defines","logdepthbuf_vertex","setVec2","_assignRotationValue","acceleration","getValueAtIndex","NUMBER","_updateUniforms","attribute vec4 size;","elements","blending","copy","geometry","_assignValue","floor","1271432AEgNpW","while (true) {}","error","forceUpdateAll","    vColor = vec4( c, o );","function","isStatic","attribute vec4 opacity;","BufferAttribute","   float b = mod( hex, PACKED_COLOR_SIZE );","       float x = gl_PointCoord.x - 0.5;","    gl_Position = projectionMatrix * mvPosition;","branchAvoidanceFunctions","rotationFunctions","randomise","drag","      vec3 axis = unpackRotationAxis( rotation.x );","fog_pars_vertex","_resetBufferRanges","material","           unpackColor( color.y ),","log","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","typeSizeMap","Vector4","angle","pop","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","           return pos;","    highp float maxAge = getMaxAge();","emitters","radius","resetUpdateRange","       float s = sin( -vAngle );","      if( rotation.y == 0.0 ) {","   return modelViewMatrix * vec4( position, 1.0 );","offset","                   0.0,                                0.0,                                0.0,                                1.0);","_poolCreationSettings","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","texture","float when_eq( float x, float y ) {","getHex","uniform float runTime;","paramFetchingFunctions","attributeCount","flagUpdate","    return a * b;","attribute vec4 params;","value","hasPerspective","unshift","_resetParticle","        float rowNorm = row / framesY;","        float framesX = textureAnimation.x;","Argument is not instanceof SPE.Emitter:","unpackColor","_assignPositionValue","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","ShaderMaterial","unpackRotationAxis","setVec4","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","dynamicBuffer","textureFrames","position","REVISION","indexOffset","reset","fog_vertex","setVec3Components","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","_attributesNeedDynamicReset","defineProperty","paramsArray","_radiusScale","ensureTypedArg","particlesPerSecond","test","float and(float a, float b) {","_setBufferUpdateRanges","50888nLmUbE","attributeOffset","749kLlqAa","        float totalFrames = textureAnimation.z;","vec3 getAcceleration( in float age ) {","colorize","keys","scale","logdepthbuf_fragment","_applyAttributesToGeometry","        pos.z += wiggleSin;","frames","    highp float alive = getAlive();","       vec3 c = isAlive * getColorOverLifetime(","getPackedRotationAxis","_createNewWhenPoolEmpty","age","   return acceleration.xyz * age;","rotation","action","527644MdmNxM","activeParticleCount","setVec3","uniform float scale;","constructor","round","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","grow","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","vec3 getVelocity( in float age ) {","float getAlive() {","exception","Points","center","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","    #endif","_attributesNeedRefresh","deltaTime","maxAge","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","setMat3","static","uniform vec4 textureAnimation;","_checkParticleAges","ensureValueOverLifetimeCompliance","        float columnNorm = vSpriteSheet.z;","valueOverLifetimeLength","randomFloat","_static","particles, can support only","_ensureTypedArray","Vector2","call","attributes","randomVector3OnLine","DynamicDrawUsage","bufferAttribute","        float framesY = textureAnimation.y;","   return params.w;","randomVector3","_axisSpread","setVec2Components","color","lerp","group","MathUtils","triggerPoolEmitter","       float c = cos( -vAngle );","sqrt","distributions","   c -= vec3( 1.0 );","Will not resize.","    float pointSizePerspective = pointSize * perspective;","        pos.x += wiggleSin;","    float fIndex = 0.0;","StaticDrawUsage","19229830gDLkPh","        float row = floor( (frameNumber - column) / framesX );","NEGATIVE_INFINITY","float getMaxAge() {","ensureInstanceOf","    ","DISC","axisSpread","textureFrameCount","stateObject","max","#define PACKED_COLOR_DIVISOR 255.0","float when_gt(float x, float y) {","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","set","_value","#ifdef SHOULD_ROTATE_TEXTURE","    highp float age = getAge();","bufferUpdateRanges","clone","      rotationMatrix = getRotationMatrix( axis, angle );","    #ifdef ALPHATEST","setUpdateRange","SHOULD_CALCULATE_SPRITE","Emitter does not exist in this group. Will not remove.","ensureArrayInstanceOf","671009fAQKMB","duration","  return 1.0 - when_lt(x, y);","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","_pool","    vec3 pos = vec3( position );","uniform sampler2D tex;","   c.r = r / PACKED_COLOR_DIVISOR;","    force *= drag;","isArray","splice","float getAge() {","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","       float y = 1.0 - gl_PointCoord.y - 0.5;","componentSize","setFromArray","activationEnd","angleSpread","setMat4","ShaderAttribute","_createGetterSetters","#define PACKED_COLOR_SIZE 256.0","   c.g = g / PACKED_COLOR_DIVISOR;","updateMap","           positionInTime,","TypedArrayConstructor","           unpackColor( color.z ),","        float loopCount = textureAnimation.w;","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","rotationCenter","updateMax","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","abs","toString","interpolateArray","roundToNearestMultiple","subarray","common","Color","    force += accel * age;","replace","distribution","float when_ge(float x, float y) {","depthWrite","generateUUID","_assignParamsValue","runTime","   return params.z;","input","vec3 unpackColor( in float hex ) {","   return params.x;","addEmitter","loop","string","init","    #ifdef SHOULD_CALCULATE_SPRITE","trace","uuid","_updateBuffers","Group","ensureArrayTypedArg","vec4 getPosition( in float age ) {","SPE.Group: maxParticleCount exceeded. Requesting","typedArray","   return params.y;","float when_le(float x, float y) {","maxParticleCount","BOX","POSITIVE_INFINITY","_assignAngleValue","removeEmitter","_spread","needsUpdate","usage","enable","varyings","       );","        float rowNorm = vSpriteSheet.w;","ShaderChunk","        float wiggleCos = isAlive * cos( wiggleAmount );","push","normalize","    vec4 rotatedTexture = texture2D( tex, vUv );","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","spread","setAttribute","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","_decrementParticleCount","hasOwnProperty","randomDirectionVector3OnDisc","utils","        pos.y += wiggleCos;","6QBwOMy","attribute vec4 angle;","Texture","_updateAttributeUpdateRange","__proto__","        vSpriteSheet.y = 1.0 / framesY;","_assignAbsLifetimeValue","_updateDefines","        float columnNorm = column / framesX;"];return(g=function(){return t})()}typeof define===u(876)&&define[u(746)]?define("spe",m):typeof exports!==u(765)&&typeof module!==u(765)&&(module.exports=m),m[u(741)]=function(t,e,i,n){const s=u;this[s(604)]=i||1,this[s(781)]=e||1,this.TypedArrayConstructor=t||Float32Array,this[s(780)]=new t(e*this.componentSize),this[s(474)]=n||0},m[u(741)].constructor=m[u(741)],m[u(741)][u(695)][u(804)]=function(t,e){const i=u,n=this[i(780)][i(815)];return!e&&(t*=this.componentSize),t<n?this[i(729)](t):t>n?this[i(515)](t):void console.info("TypedArray is already of size:",t+".",i(559))},m.TypedArrayHelper.prototype.shrink=function(t){const e=u;return this[e(780)]=this[e(780)][e(627)](0,t),this.size=t,this},m.TypedArrayHelper[u(695)].grow=function(t){const e=u,i=this[e(780)],n=new(this[e(615)])(t);return n.set(i),this.array=n,this[e(781)]=t,this},m[u(741)][u(695)][u(600)]=function(t,e){const i=u;t*=this[i(604)],e*=this[i(604)];const n=[],s=this[i(780)],r=s[i(815)];for(let o=0;o<r;++o)(o<t||o>=e)&&n.push(s[o]);return this.setFromArray(0,n),this},m.TypedArrayHelper[u(695)][u(605)]=function(t,e){const i=u,n=t+e[i(815)];return n>this[i(780)][i(815)]?this.grow(n):n<this[i(780)].length&&this[i(729)](n),this[i(780)][i(578)](e,this[i(474)]+t),this},m.TypedArrayHelper.prototype[u(858)]=function(t,e){return this[u(549)](t,e.x,e.y)},m.TypedArrayHelper.prototype.setVec2Components=function(t,e,i){const n=u,s=this[n(780)],r=this[n(474)]+t*this[n(604)];return s[r]=e,s[r+1]=i,this},m[u(741)][u(695)][u(510)]=function(t,e){return this.setVec3Components(t,e.x,e.y,e.z)},m[u(741)][u(695)].setVec3Components=function(t,e,i,n){const s=u,r=this.array,o=this[s(474)]+t*this.componentSize;return r[o]=e,r[o+1]=i,r[o+2]=n,this},m[u(741)].prototype[u(468)]=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},m[u(741)][u(695)][u(738)]=function(t,e,i,n,s){const r=u,o=this[r(780)],a=this[r(474)]+t*this[r(604)];return o[a]=e,o[a+1]=i,o[a+2]=n,o[a+3]=s,this},m.TypedArrayHelper[u(695)][u(528)]=function(t,e){const i=u;return this.setFromArray(this[i(474)]+t*this[i(604)],e[i(865)])},m[u(741)][u(695)][u(608)]=function(t,e){const i=u;return this.setFromArray(this[i(474)]+t*this.componentSize,e.elements)},m[u(741)].prototype.setColor=function(t,e){return this.setVec3Components(t,e.r,e.g,e.b)},m[u(741)][u(695)].setNumber=function(t,e){const i=u;return this.array[this.indexOffset+t*this[i(604)]]=e,this},m.TypedArrayHelper[u(695)][u(861)]=function(t){return this[u(780)][this.indexOffset+t]},m[u(741)][u(695)].getComponentValueAtIndex=function(t){const e=u;return this[e(780)].subarray(this[e(474)]+t*this[e(604)])},m[u(609)]=function(t,e,i){const n=u,s=m[n(609)].typeSizeMap;this[n(768)]=typeof t===n(644)&&s.hasOwnProperty(t)?t:"f",this[n(604)]=s[this[n(768)]],this[n(757)]=i||Float32Array,this[n(654)]=null,this[n(544)]=null,this[n(470)]=!!e,this[n(754)]=0,this[n(621)]=0},m.ShaderAttribute[u(512)]=m[u(609)],m[u(609)][u(894)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},m[u(609)][u(695)][u(586)]=function(t,e){const i=u;this[i(754)]=Math.min(t*this[i(604)],this.updateMin*this[i(604)]),this[i(621)]=Math[i(574)](e*this[i(604)],this[i(621)]*this[i(604)])},m[u(609)][u(695)][u(453)]=function(){const t=u,e=this[t(544)];!e[t(831)]&&(e[t(831)]={});const i=e[t(831)];i.offset=this[t(754)],i[t(750)]=Math[t(790)](this[t(621)]-this.updateMin+this[t(604)],this[t(654)][t(780)].length),e[t(663)]=!0},m[u(609)][u(695)][u(903)]=function(){this[u(754)]=0,this.updateMax=0},m[u(609)][u(695)].resetDynamic=function(){const e=u;this[e(544)][e(664)]=this[e(470)]?t[e(543)]:t[e(563)]},m[u(609)][u(695)][u(600)]=function(t,e){this[u(654)].splice(t,e),this.forceUpdateAll()},m[u(609)][u(695)][u(874)]=function(){const t=u;this[t(544)][t(780)]=this[t(654)][t(780)],this[t(544)].updateRange.offset=0,this[t(544)][t(831)].count=-1,this.bufferAttribute[t(664)]=e,this[t(544)][t(663)]=!0},m[u(609)][u(695)]._ensureTypedArray=function(t){const e=u;null!==this[e(654)]&&this[e(654)][e(781)]===t*this[e(604)]||(null!==this[e(654)]&&this[e(654)][e(781)]!==t?this[e(654)][e(804)](t):null===this[e(654)]&&(this.typedArray=new m.TypedArrayHelper(this[e(757)],t,this[e(604)])))},m[u(609)][u(695)][u(767)]=function(n){const s=u;if(this[s(538)](n),null!==this[s(544)])return this[s(544)].array=this.typedArray[s(780)],parseFloat(t[s(473)])>=81&&(this.bufferAttribute[s(750)]=this.bufferAttribute[s(780)][s(815)]/this[s(544)][s(840)]),void(this.bufferAttribute[s(663)]=!0);this.bufferAttribute=new(t[s(879)])(this[s(654)][s(780)],this.componentSize),this.bufferAttribute[s(664)]=this[s(470)]?i:e},m[u(609)][u(695)][u(814)]=function(){const t=u;return null===this[t(654)]?0:this.typedArray[t(780)][t(815)]},m.shaderChunks={defines:[u(611),u(575)][u(696)]("\n"),uniforms:[u(808),u(450),u(596),u(530),u(511)][u(696)]("\n"),attributes:["attribute vec4 acceleration;",u(759),"attribute vec4 rotation;",u(743),u(455),u(864),u(685),u(751),u(878)][u(696)]("\n"),varyings:[u(783),u(580),u(739),u(788),"#ifdef SHOULD_CALCULATE_SPRITE",u(714),u(788)][u(696)]("\n"),branchAvoidanceFunctions:[u(576),"    return max(sign(x - y), 0.0);","}","float when_lt(float x, float y) {",u(593),"}",u(448),"    return 1.0 - abs( sign( x - y ) );","}",u(633),u(592),"}",u(656),u(705),"}",u(486),u(454),"}","float or(float a, float b) {",u(766),"}"].join("\n"),unpackColor:[u(640),"   vec3 c = vec3( 0.0 );",u(619),u(622),u(880),u(597),u(612),"   c.b = b / PACKED_COLOR_DIVISOR;",u(748),"}"][u(696)]("\n"),unpackRotationAxis:[u(836),"   vec3 c = vec3( 0.0 );",u(619),u(622),u(880),u(597),u(612),u(737),u(827),u(558),"   return c;","}"].join("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {",u(731),"    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );",u(562),"    float shouldApplyValue = 0.0;",u(465),"",u(516),u(699),u(893),"       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );",u(805),"","    return value;","}"][u(696)]("\n"),colorOverLifetime:[u(795),"    vec3 value = vec3( 0.0 );",u(577),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );",u(820),"    return value;","}"].join("\n"),paramFetchingFunctions:[u(518),u(641),"}",u(601),u(655),"}",u(567),u(638),"}",u(837),u(546),"}"][u(696)]("\n"),forceFetchingFunctions:[u(652),u(442),"}",u(517),u(826),"}",u(492),u(505),"}"][u(696)]("\n"),rotationFunctions:[u(813),u(514),"       axis = normalize(axis);","       float s = sin(angle);","       float c = cos(angle);","       float oc = 1.0 - c;","",u(618),u(727),u(700),u(444),u(829),"",u(678),u(441),u(899),u(810),"",u(887),"      vec3 center = rotationCenter;","      vec3 translated;","      mat4 rotationMatrix;","      float angle = 0.0;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;",u(522),u(843),u(584),u(469),u(829),u(788)].join("\n"),rotateTexture:[u(446),"",u(849),u(881),u(603),u(555),u(904),u(835),u(523),"","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = vSpriteSheet.x;",u(782),u(533),u(668),"        vUv.x = gl_PointCoord.x * framesX + columnNorm;","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);",u(523),"",u(673)][u(696)]("\n")},m.shaders={vertex:[m[u(774)][u(856)],m.shaderChunks[u(760)],m[u(774)][u(541)],m[u(774)][u(666)],t[u(669)][u(628)],n[u(796)],t[u(669)][u(888)],m[u(774)][u(883)],m.shaderChunks[u(463)],m[u(774)][u(467)],m.shaderChunks[u(787)],m.shaderChunks.colorOverLifetime,m.shaderChunks[u(451)],m[u(774)].forceFetchingFunctions,m[u(774)][u(884)],u(799),u(581),u(500),u(900),u(851),"    highp float isAlive = when_gt( alive, 0.0 );",u(723),"        float wiggleAmount = positionInTime * getWiggle();",u(720),u(670),u(523),"    vec3 vel = getVelocity( age );","    vec3 accel = getAcceleration( age );","    vec3 force = vec3( 0.0 );",u(595),u(527),"    force += vel;",u(598),u(630),u(730),"    #ifdef SHOULD_WIGGLE_PARTICLES",u(561),u(683),u(498),u(523),"    #ifdef SHOULD_ROTATE_PARTICLES","        pos = getRotation( pos, positionInTime );",u(523),u(677),"    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",u(773),u(713),"    #else",u(749),"    #endif",u(560),u(847),u(501),u(614),"           unpackColor( color.x ),",u(891),u(616),u(697),u(667),u(852),"       vec3 c = vec3(1.0);",u(523),u(707),u(875),u(849),u(674),u(523),u(646),u(461),u(545),u(617),u(491),u(758),u(784),u(565),u(692),u(460),u(785),u(689),u(733),"        vSpriteSheet.w = rowNorm;",u(523),"    gl_PointSize = pointSizePerspective;",u(882),n[u(857)],n[u(476)],"}"].join("\n"),fragment:[m[u(774)][u(760)],n[u(628)],t[u(669)].fog_pars_fragment,t[u(669)][u(838)],m[u(774)][u(666)],m[u(774)][u(883)],u(799),u(772),u(569),u(585),u(821),u(523),m.shaderChunks[u(694)],t[u(669)][u(496)],"    outgoingLight = vColor.xyz * rotatedTexture.xyz;",u(797),n.fog_fragment,"}"].join("\n")},m[u(682)]={types:{BOOLEAN:u(771),STRING:u(644),NUMBER:"number",OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=u;if(Array[n(599)](t)){for(let s=t[n(815)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=u;if(Array.isArray(t)){for(let s=t[n(815)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this[n(568)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=u;e=e||3,i=i||3,!1===Array[n(599)](t[n(579)])&&(t[n(579)]=[t._value]),!1===Array.isArray(t._spread)&&(t[n(662)]=[t[n(662)]]);const s=this.clamp(t[n(579)][n(815)],e,i),r=this[n(834)](t[n(662)][n(815)],e,i),o=Math[n(574)](s,r);t[n(579)][n(815)]!==o&&(t._value=this.interpolateArray(t[n(579)],o)),t._spread[n(815)]!==o&&(t[n(662)]=this[n(625)](t[n(662)],o))},interpolateArray(t,e){const i=u,n=t[i(815)],s=[typeof t[0][i(583)]===i(876)?t[0][i(583)]():t[0]],r=(n-1)/(e-1);for(let o=1;o<e-1;++o){const e=o*r,n=Math[i(870)](e),a=Math.ceil(e),c=e-n;s[o]=this[i(833)](t[n],t[a],c)}return s[i(671)](typeof t[n-1].clone===i(876)?t[n-1][i(583)]():t[n-1]),s},clamp:(t,e,i)=>Math[u(574)](e,Math.min(t,i)),zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[u(703)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const o=u;let a,c=this[o(844)];return typeof e===c[o(862)]&&typeof i===c[o(862)]?e+(i-e)*n:e instanceof t[o(539)]&&i instanceof t[o(539)]?(a=e[o(583)](),a.x=this[o(551)](e.x,i.x,n),a.y=this[o(551)](e.y,i.y,n),a):e instanceof t[o(769)]&&i instanceof t[o(769)]?(a=e[o(583)](),a.x=this.lerp(e.x,i.x,n),a.y=this[o(551)](e.y,i.y,n),a.z=this.lerp(e.z,i.z,n),a):e instanceof s&&i instanceof s?(a=e[o(583)](),a.x=this[o(551)](e.x,i.x,n),a.y=this[o(551)](e.y,i.y,n),a.z=this[o(551)](e.z,i.z,n),a.w=this[o(551)](e.w,i.w,n),a):e instanceof r&&i instanceof t[o(629)]?(a=e[o(583)](),a.r=this[o(551)](e.r,i.r,n),a.g=this[o(551)](e.g,i.g,n),a.b=this[o(551)](e.b,i.b,n),a):void console[o(818)]("Invalid argument types, or argument types do not match:",e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=u;let n=0;return 0===e?t:(n=Math[i(623)](t)%e,0===n?t:t<0?-(Math[i(623)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=u;for(let i=0;i<t[e(815)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[u(703)]()-.5),randomVector3(t,e,i,n,s){const r=u;let o=i.x+(Math[r(703)]()*n.x-.5*n.x),a=i.y+(Math[r(703)]()*n.y-.5*n.y),c=i.z+(Math[r(703)]()*n.z-.5*n.z);s&&(o=.5*-s.x+this[r(626)](o,s.x),a=.5*-s.y+this.roundToNearestMultiple(a,s.y),c=.5*-s.z+this[r(626)](c,s.z)),t[r(654)].setVec3Components(e,o,a,c)},randomColor(t,e,i,n){const s=u;let r=i.r+Math[s(703)]()*n.x,o=i.g+Math.random()*n.y,a=i.b+Math.random()*n.z;r=this.clamp(r,0,1),o=this.clamp(o,0,1),a=this[s(834)](a,0,1),t[s(654)][s(477)](e,r,o,a)},randomColorAsHex:function(){const t=new r;return function(e,i,n,s){const r=d,o=n[r(815)],a=[];for(let c=0;c<o;++c){const e=s[c];t[r(867)](n[c]),t.r+=Math[r(703)]()*e.x-.5*e.x,t.g+=Math[r(703)]()*e.y-.5*e.y,t.b+=Math[r(703)]()*e.z-.5*e.z,t.r=this[r(834)](t.r,0,1),t.g=this[r(834)](t.g,0,1),t.b=this[r(834)](t.b,0,1),a[r(671)](t[r(449)]())}e[r(654)][r(738)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const s=u,r=i.clone();r[s(551)](n,Math.random()),t.typedArray[s(477)](e,r.x,r.y,r.z)},randomVector3OnSphere(t,e,i,n,s,r,o,a){const c=u;let h=2*Math[c(703)]()-1,l=6.2832*Math[c(703)](),f=Math[c(556)](1-h*h),p=this[c(535)](n,s),d=0,m=0,g=0;o&&(p=Math[c(513)](p/o)*o),d=f*Math[c(811)](l)*p,m=f*Math[c(732)](l)*p,g=h*p,d*=r.x,m*=r.y,g*=r.z,d+=i.x,m+=i.y,g+=i.z,t[c(654)][c(477)](e,d,m,g)},seededRandom(t){const e=1e4*Math[u(732)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,r,o){const a=u;let c=6.2832*Math[a(703)](),h=Math[a(623)](this[a(535)](n,s)),l=0,f=0,p=0;o&&(h=Math[a(513)](h/o)*o),l=Math[a(811)](c)*h,f=Math[a(732)](c)*h,l*=r.x,f*=r.y,l+=i.x,f+=i.y,p+=i.z,t[a(654)].setVec3Components(e,l,f,p)},randomDirectionVector3OnSphere:function(){const e=u,i=new(t[e(769)]);return function(t,n,s,r,o,a,c,h){const l=e;i[l(867)](a),i.x-=s,i.y-=r,i.z-=o,i.normalize().multiplyScalar(-this[l(535)](c,h)),t.typedArray[l(477)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=u,i=new(t[e(769)]);return function(t,n,s,r,o,a,c,h){const l=e;i[l(867)](a),i.x-=s,i.y-=r,i.z-=o,i[l(672)]().multiplyScalar(-this[l(535)](c,h)),t[l(654)][l(477)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=u,i=new o,n=new(t[e(769)]),s=new r,a=new(t[e(769)])(1,1,1);return function(t,r){const o=e;return i[o(867)](t)[o(672)](),n[o(867)](r)[o(672)](),i.x+=.5*-r.x+Math[o(703)]()*r.x,i.y+=.5*-r.y+Math.random()*r.y,i.z+=.5*-r.z+Math[o(703)]()*r.z,i.normalize()[o(756)](a)[o(693)](.5),s.setRGB(i.x,i.y,i.z),s[o(449)]()}}()},m.Group=function(e){const i=u,n=m[i(682)],s=n[i(844)];(e=n[i(483)](e,s[i(778)],{}))[i(447)]=n[i(483)](e[i(447)],s.OBJECT,{}),this[i(648)]=a[i(635)](),this[i(722)]=n[i(483)](e.fixedTimeStep,s[i(862)],.016),this.texture=n.ensureInstanceOf(e.texture.value,t[i(686)],null),this.textureFrames=n[i(568)](e[i(447)][i(499)],c,new(t[i(539)])(1,1)),this[i(572)]=n[i(483)](e[i(447)].frameCount,s.NUMBER,this[i(471)].x*this[i(471)].y),this[i(753)]=n[i(483)](e.texture[i(643)],s[i(862)],1),this[i(471)][i(574)](new c(1,1)),this.hasPerspective=n[i(483)](e[i(457)],s[i(809)],!0),this[i(493)]=n[i(483)](e[i(493)],s[i(809)],!0),this[i(657)]=n[i(483)](e[i(657)],s[i(862)],null),this.blending=n[i(483)](e[i(866)],s.NUMBER,h),this.transparent=n.ensureTypedArg(e.transparent,s.BOOLEAN,!0),this[i(803)]=parseFloat(n.ensureTypedArg(e[i(803)],s.NUMBER,0)),this[i(634)]=n.ensureTypedArg(e.depthWrite,s[i(809)],!1),this[i(710)]=n[i(483)](e.depthTest,s[i(809)],!0),this[i(807)]=n[i(483)](e[i(807)],s[i(809)],!0),this.scale=n.ensureTypedArg(e[i(495)],s[i(862)],300),this[i(901)]=[],this[i(716)]=[],this[i(594)]=[],this[i(445)]=null,this[i(503)]=0,this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!1,this[i(845)]=0,this[i(760)]={tex:{type:"t",value:this[i(447)]},textureAnimation:{type:"v4",value:new(t[i(895)])(this.textureFrames.x,this[i(471)].y,this[i(572)],Math[i(574)](Math[i(623)](this[i(753)]),1))},fogColor:{type:"c",value:this[i(807)]?new(t[i(629)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this[i(856)]={HAS_PERSPECTIVE:this[i(457)],COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:m.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(471)].x>1||this[i(471)].y>1},this.attributes={position:new(m[i(609)])("v3",!0),acceleration:new(m[i(609)])("v4",!0),velocity:new(m[i(609)])("v3",!0),rotation:new(m[i(609)])("v4",!0),rotationCenter:new(m[i(609)])("v3",!0),params:new(m[i(609)])("v4",!0),size:new(m[i(609)])("v4",!0),angle:new(m[i(609)])("v4",!0),color:new m.ShaderAttribute("v4",!0),opacity:new(m[i(609)])("v4",!0)},this.attributeKeys=Object[i(494)](this[i(541)]),this[i(452)]=this[i(806)][i(815)],this[i(890)]=new(t[i(466)])({uniforms:this[i(760)],vertexShader:m.shaders[i(734)],fragmentShader:m[i(718)].fragment,blending:this[i(866)],transparent:this[i(791)],alphaTest:this[i(803)],depthWrite:this[i(634)],depthTest:this[i(710)],defines:this[i(856)],fog:this[i(807)]}),this.geometry=new l,this.mesh=new(t[i(520)])(this[i(868)],this.material),null===this[i(657)]&&console[i(818)](i(898))},m[u(650)][u(512)]=m[u(650)],m[u(650)].prototype[u(691)]=function(){const t=u;let e,i=this[t(901)],n=i.length-1,s=this[t(856)];for(;n>=0;--n)e=i[n],!s[t(587)]&&(s[t(823)]=s.SHOULD_ROTATE_TEXTURE||!!Math[t(574)](Math[t(574)].apply(null,e[t(896)][t(456)]),Math.max[t(855)](null,e[t(896)][t(675)]))),s[t(702)]=s.SHOULD_ROTATE_PARTICLES||!!Math[t(574)](e[t(506)].angle,e[t(506)][t(607)]),s[t(726)]=s[t(726)]||!!Math.max(e[t(830)].value,e[t(830)][t(675)]);this[t(890)].needsUpdate=!0},m[u(650)][u(695)][u(497)]=function(){const t=u;let e,i,n=this.attributes,s=this[t(868)],r=s[t(541)];for(const o in n)n[t(680)](o)&&(e=n[o],i=r[o],i?i.array=e[t(654)][t(780)]:s[t(676)](o,e[t(544)]),e.bufferAttribute[t(663)]=!0);this[t(868)][t(775)](0,this.particleCount)},m.Group[u(695)][u(642)]=function(t){const e=u;if(t instanceof m[e(822)]==!1)return void console[e(873)](e(717),t);if(this[e(716)].indexOf(t[e(648)])>-1)return void console[e(873)](e(763));if(null!==t[e(552)])return void console[e(873)](e(735));const i=this[e(541)],n=this[e(845)],s=n+t[e(845)];this[e(845)]=s,null!==this[e(657)]&&this[e(845)]>this[e(657)]&&console[e(818)](e(653),this[e(845)],e(537),this[e(657)]),t._calculatePPSValue(t.maxAge[e(579)]+t[e(526)][e(662)]),t[e(487)](this.attributeKeys),t[e(745)](n),t.group=this,t[e(541)]=this[e(541)];for(const r in i)i.hasOwnProperty(r)&&i[r][e(767)](null!==this[e(657)]?this.maxParticleCount:this[e(845)]);for(let r=n;r<s;++r)t[e(464)](r),t._assignForceValue(r,e(752)),t[e(704)](r,"acceleration"),t._assignAbsLifetimeValue(r,e(794)),t[e(690)](r,e(781)),t[e(660)](r),t[e(859)](r),t[e(636)](r),t._assignColorValue(r);return this[e(497)](),this[e(901)][e(671)](t),this[e(716)][e(671)](t[e(648)]),this._updateDefines(t),this.material[e(663)]=!0,this.geometry[e(663)]=!0,this[e(524)]=!0,this},m[u(650)].prototype[u(661)]=function(t){const e=u,i=this[e(716)].indexOf(t[e(648)]);if(t instanceof m[e(822)]==!1)return void console[e(873)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(-1===i)return void console[e(873)](e(588));const n=t[e(489)],s=n+t[e(845)],r=this.attributes[e(698)].typedArray;for(let o=n;o<s;++o)r[e(780)][4*o]=0,r.array[4*o+1]=0;this[e(901)][e(600)](i,1),this[e(716)][e(600)](i,1);for(const o in this[e(541)])this[e(541)][e(680)](o)&&this[e(541)][o][e(600)](n,s);this.particleCount-=t.particleCount,t[e(719)](),this._attributesNeedRefresh=!0},m.Group[u(695)].getFromPool=function(){const t=u,e=this[t(594)],i=this[t(503)];if(e.length)return e[t(897)]();if(i){const e=new(m[t(822)])(this[t(445)]);return this[t(642)](e),e}return null},m.Group[u(695)][u(706)]=function(t){const e=u;if(t instanceof m.Emitter!=!1)return t[e(475)](),this[e(594)][e(458)](t),this;console[e(873)](e(462),t)},m.Group[u(695)][u(776)]=function(){return this[u(594)]},m[u(650)].prototype[u(755)]=function(t,e,i){const n=u;let s;this[n(445)]=e,this[n(503)]=!!i;for(let r=0;r<t;++r)s=Array[n(599)](e)?new(m[n(822)])(e[r]):new(m[n(822)])(e),this[n(642)](s),this[n(706)](s);return this},m[u(650)].prototype._triggerSingleEmitter=function(t){const e=u,i=this[e(848)](),n=this;if(null!==i)return t instanceof o&&(i[e(472)][e(456)][e(867)](t),i[e(472)].value=i[e(472)].value),i[e(665)](),setTimeout((()=>{const t=e;i[t(802)](),n[t(706)](i)}),1e3*Math[e(574)](i[e(591)],i[e(526)][e(456)]+i.maxAge[e(675)])),this;console[e(892)](e(742))},m[u(650)][u(695)][u(554)]=function(t,e){const i=u;if(typeof t===i(701)&&t>1)for(let n=0;n<t;++n)this[i(711)](e);else this[i(711)](e);return this},m.Group[u(695)][u(863)]=function(t){const e=u;this.uniforms[e(637)][e(456)]+=t,this[e(760)][e(525)][e(456)]=t},m[u(650)][u(695)][u(889)]=function(){const t=u;let e=this[t(806)],i=this[t(452)]-1,n=this[t(541)];for(;i>=0;--i)n[e[i]][t(903)]()},m.Group[u(695)]._updateBuffers=function(t){const e=u;let i,n,s,r=this.attributeKeys,o=this[e(452)]-1,a=this[e(541)],c=t.bufferUpdateRanges;for(;o>=0;--o)i=r[o],n=c[i],s=a[i],s[e(586)](n.min,n[e(574)]),s[e(453)]()},m[u(650)].prototype[u(825)]=function(t){const e=u;var i=this[e(901)],n=i[e(815)],s=t||this[e(722)],r=this.attributeKeys,o=this.attributes;if(this[e(863)](s),this._resetBufferRanges(),0!==n||!1!==this[e(524)]||!1!==this[e(479)]){for(var a,c=0;c<n;++c)(a=i[c])[e(825)](s),this[e(649)](a);if(!0===this[e(479)]){for(c=this[e(452)]-1;c>=0;--c)o[r[c]][e(770)]();this[e(479)]=!1}if(!0===this[e(524)]){for(c=this[e(452)]-1;c>=0;--c)o[r[c]].forceUpdateAll();this[e(524)]=!1,this[e(479)]=!0}}},m[u(650)].prototype.dispose=function(){const t=u;return this.geometry.dispose(),this[t(890)][t(712)](),this},m.Emitter=function(e){const i=u,n=m.utils,s=n.types,r=m[i(534)];(e=n[i(483)](e,s.OBJECT,{}))[i(472)]=n.ensureTypedArg(e[i(472)],s[i(778)],{}),e[i(752)]=n.ensureTypedArg(e[i(752)],s.OBJECT,{}),e[i(860)]=n[i(483)](e[i(860)],s[i(778)],{}),e[i(902)]=n.ensureTypedArg(e.radius,s[i(778)],{}),e.drag=n[i(483)](e[i(886)],s[i(778)],{}),e[i(506)]=n[i(483)](e[i(506)],s[i(778)],{}),e[i(550)]=n.ensureTypedArg(e[i(550)],s.OBJECT,{}),e[i(794)]=n[i(483)](e[i(794)],s[i(778)],{}),e[i(781)]=n.ensureTypedArg(e[i(781)],s[i(778)],{}),e[i(896)]=n[i(483)](e[i(896)],s[i(778)],{}),e[i(830)]=n[i(483)](e[i(830)],s.OBJECT,{}),e[i(526)]=n[i(483)](e.maxAge,s[i(778)],{}),e.onParticleSpawn&&console[i(818)](i(478)),this.uuid=t[i(553)][i(635)](),this[i(768)]=n[i(483)](e.type,s.NUMBER,m[i(557)][i(658)]),this[i(472)]={_value:n.ensureInstanceOf(e.position[i(456)],t[i(769)],new o),_spread:n[i(568)](e[i(472)][i(675)],t[i(769)],new(t[i(769)])),_spreadClamp:n.ensureInstanceOf(e.position.spreadClamp,o,new o),_distribution:n[i(483)](e[i(472)].distribution,s.NUMBER,this[i(768)]),_randomise:n[i(483)](e.position.randomise,s[i(809)],!1),_radius:n[i(483)](e[i(472)][i(902)],s[i(862)],10),_radiusScale:n[i(568)](e[i(472)][i(816)],o,new(t[i(769)])(1,1,1)),_distributionClamp:n[i(483)](e.position[i(744)],s.NUMBER,0)},this[i(752)]={_value:n[i(568)](e[i(752)][i(456)],t[i(769)],new(t[i(769)])),_spread:n.ensureInstanceOf(e[i(752)].spread,t[i(769)],new o),_distribution:n[i(483)](e[i(752)][i(632)],s[i(862)],this[i(768)]),_randomise:n[i(483)](e[i(472)][i(885)],s[i(809)],!1)},this[i(860)]={_value:n[i(568)](e[i(860)][i(456)],o,new(t[i(769)])),_spread:n[i(568)](e[i(860)][i(675)],t[i(769)],new(t[i(769)])),_distribution:n.ensureTypedArg(e[i(860)][i(632)],s[i(862)],this[i(768)]),_randomise:n[i(483)](e.position[i(885)],s[i(809)],!1)},this[i(886)]={_value:n[i(483)](e[i(886)][i(456)],s[i(862)],0),_spread:n[i(483)](e[i(886)].spread,s.NUMBER,0),_randomise:n[i(483)](e[i(472)][i(885)],s.BOOLEAN,!1)},this[i(830)]={_value:n[i(483)](e[i(830)].value,s[i(862)],0),_spread:n.ensureTypedArg(e[i(830)][i(675)],s[i(862)],0)},this[i(506)]={_axis:n.ensureInstanceOf(e[i(506)].axis,t[i(769)],new(t[i(769)])(0,1,0)),_axisSpread:n[i(568)](e[i(506)][i(571)],t[i(769)],new(t[i(769)])),_angle:n[i(483)](e.rotation[i(896)],s.NUMBER,0),_angleSpread:n[i(483)](e[i(506)][i(607)],s[i(862)],0),_static:n[i(483)](e[i(506)][i(529)],s.BOOLEAN,!1),_center:n[i(568)](e[i(506)][i(521)],t[i(769)],this[i(472)]._value.clone()),_randomise:n[i(483)](e[i(472)].randomise,s.BOOLEAN,!1)},this.maxAge={_value:n[i(483)](e[i(526)][i(456)],s[i(862)],2),_spread:n[i(483)](e[i(526)][i(675)],s.NUMBER,0)},this[i(550)]={_value:n.ensureArrayInstanceOf(e.color[i(456)],t[i(629)],new(t[i(629)])),_spread:n[i(589)](e[i(550)][i(675)],o,new(t[i(769)])),_randomise:n[i(483)](e[i(472)][i(885)],s[i(809)],!1)},this[i(794)]={_value:n[i(651)](e[i(794)][i(456)],s[i(862)],1),_spread:n[i(651)](e[i(794)].spread,s.NUMBER,0),_randomise:n[i(483)](e.position.randomise,s.BOOLEAN,!1)},this[i(781)]={_value:n[i(651)](e[i(781)].value,s[i(862)],1),_spread:n.ensureArrayTypedArg(e[i(781)][i(675)],s[i(862)],0),_randomise:n.ensureTypedArg(e[i(472)][i(885)],s.BOOLEAN,!1)},this[i(896)]={_value:n[i(651)](e[i(896)][i(456)],s[i(862)],0),_spread:n[i(651)](e[i(896)][i(675)],s[i(862)],0),_randomise:n[i(483)](e[i(472)].randomise,s[i(809)],!1)},this[i(845)]=n[i(483)](e[i(845)],s[i(862)],100),this.duration=n[i(483)](e[i(591)],s[i(862)],null),this[i(877)]=n[i(483)](e[i(877)],s[i(809)],!1),this.activeMultiplier=n[i(483)](e[i(832)],s[i(862)],1),this[i(779)]=n.ensureTypedArg(e[i(779)],s.NUMBER,1),this[i(846)]=n[i(483)](e[i(846)],s[i(809)],!0),this.particlesPerSecond=0,this[i(715)]=0,this.attributeOffset=0,this[i(709)]=0,this[i(504)]=0,this[i(509)]=0,this[i(552)]=null,this[i(541)]=null,this[i(481)]=null,this[i(819)]={position:n[i(483)](e[i(472)].randomise,s[i(809)],!1)||n.ensureTypedArg(e[i(902)].randomise,s.BOOLEAN,!1),velocity:n[i(483)](e[i(752)][i(885)],s[i(809)],!1),acceleration:n[i(483)](e[i(860)][i(885)],s.BOOLEAN,!1)||n[i(483)](e[i(886)][i(885)],s.BOOLEAN,!1),rotation:n[i(483)](e[i(506)][i(885)],s[i(809)],!1),rotationCenter:n[i(483)](e[i(506)][i(885)],s[i(809)],!1),size:n[i(483)](e.size[i(885)],s[i(809)],!1),color:n.ensureTypedArg(e[i(550)][i(885)],s[i(809)],!1),opacity:n[i(483)](e[i(794)][i(885)],s[i(809)],!1),angle:n[i(483)](e[i(896)].randomise,s.BOOLEAN,!1)},this[i(801)]={},this.updateCounts={},this.updateMap={maxAge:i(698),position:i(472),velocity:i(752),acceleration:i(860),drag:i(860),wiggle:"params",rotation:i(506),size:i(781),color:"color",opacity:i(794),angle:i(896)};for(const t in this.updateMap)this[i(613)][i(680)](t)&&(this.updateCounts[this[i(613)][t]]=0,this.updateFlags[this[i(613)][t]]=!1,this._createGetterSetters(this[t],t));this[i(582)]={},this[i(806)]=null,this[i(452)]=0,n[i(532)](this[i(550)],r,r),n[i(532)](this[i(794)],r,r),n[i(532)](this[i(781)],r,r),n.ensureValueOverLifetimeCompliance(this[i(896)],r,r)},m[u(822)][u(512)]=m[u(822)],m[u(822)][u(695)][u(610)]=function(t,e){const i=u,n=this;for(const s in t)if(t[i(680)](s)){const r=s[i(631)]("_","");Object[i(480)](t,r,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=d,r=n[s(613)][e],o=this[t],a=m.valueOverLifetimeLength;"_rotationCenter"===t?(n[s(801)][s(620)]=!0,n[s(786)][s(620)]=0):t===s(841)?n[s(819)][r]=i:(n[s(801)][r]=!0,n[s(786)][r]=0),n[s(552)]._updateDefines(),this[t]=i,Array[s(599)](o)&&m[s(682)][s(532)](n[e],a,a)}}(s)})}},m[u(822)][u(695)][u(487)]=function(t){const e=u;this[e(806)]=t,this[e(452)]=t[e(815)];for(let i=this.attributeCount-1;i>=0;--i)this[e(582)][t[i]]={min:Number.POSITIVE_INFINITY,max:Number[e(566)]}},m[u(822)][u(695)]._calculatePPSValue=function(t){const e=u,i=this[e(845)];this[e(591)]?this.particlesPerSecond=i/(t<this.duration?t:this[e(591)]):this.particlesPerSecond=i/t},m.Emitter[u(695)][u(745)]=function(t){const e=u;this.attributeOffset=t,this[e(715)]=t,this[e(606)]=t+this[e(845)]},m[u(822)].prototype[u(869)]=function(t,e){const i=u;switch(t){case i(472):this[i(464)](e);break;case i(752):case"acceleration":this[i(704)](e,t);break;case i(781):case i(794):this[i(690)](e,t);break;case"angle":this[i(660)](e);break;case"params":this[i(636)](e);break;case i(506):this._assignRotationValue(e);break;case i(550):this._assignColorValue(e)}},m[u(822)][u(695)][u(464)]=function(t){const e=u,i=m.distributions,n=m[e(682)],s=this.position,r=this[e(541)][e(472)],o=s[e(579)],a=s[e(662)];switch(s._distribution){case i[e(658)]:n[e(547)](r,t,o,a,s[e(800)]);break;case i[e(853)]:n[e(824)](r,t,o,s[e(839)],s._spread.x,s[e(482)],s[e(800)].x,s[e(798)]||this[e(845)]);break;case i[e(570)]:n.randomVector3OnDisc(r,t,o,s[e(839)],s[e(662)].x,s[e(482)],s._spreadClamp.x);break;case i[e(747)]:n[e(542)](r,t,o,a)}},m[u(822)][u(695)]._assignForceValue=function(t,e){const i=u;let n,s,r,o,a,c=m[i(557)],h=m[i(682)],l=this[e],f=l[i(579)],p=l[i(662)];switch(l._distribution){case c[i(658)]:h.randomVector3(this[i(541)][e],t,f,p);break;case c[i(853)]:n=this[i(541)].position[i(654)][i(780)],a=3*t,s=n[a],r=n[a+1],o=n[a+2],h[i(817)](this[i(541)][e],t,s,r,o,this.position[i(579)],l[i(579)].x,l[i(662)].x);break;case c[i(570)]:n=this.attributes[i(472)][i(654)][i(780)],a=3*t,s=n[a],r=n[a+1],o=n[a+2],h[i(681)](this[i(541)][e],t,s,r,o,this[i(472)][i(579)],l[i(579)].x,l._spread.x);break;case c[i(747)]:h[i(542)](this.attributes[e],t,f,p)}if(e===i(860)){const e=h.clamp(h.randomFloat(this[i(886)][i(579)],this[i(886)][i(662)]),0,1);this.attributes[i(860)][i(654)][i(780)][4*t+3]=e}},m[u(822)].prototype[u(690)]=function(t,e){const i=u;let n,s=this[i(541)][e][i(654)],r=this[e],o=m[i(682)];o[i(789)](r[i(579)])&&o[i(789)](r[i(662)])?(n=Math[i(623)](o[i(535)](r._value[0],r._spread[0])),s[i(738)](t,n,n,n,n)):s[i(738)](t,Math.abs(o[i(535)](r._value[0],r._spread[0])),Math[i(623)](o.randomFloat(r._value[1],r[i(662)][1])),Math.abs(o[i(535)](r._value[2],r[i(662)][2])),Math.abs(o.randomFloat(r[i(579)][3],r[i(662)][3])))},m.Emitter[u(695)][u(660)]=function(t){const e=u;let i,n=this[e(541)][e(896)][e(654)],s=this[e(896)],r=m[e(682)];r[e(789)](s[e(579)])&&r[e(789)](s[e(662)])?(i=r[e(535)](s._value[0],s._spread[0]),n.setVec4Components(t,i,i,i,i)):n[e(738)](t,r[e(535)](s[e(579)][0],s[e(662)][0]),r.randomFloat(s._value[1],s._spread[1]),r[e(535)](s[e(579)][2],s[e(662)][2]),r[e(535)](s._value[3],s[e(662)][3]))},m[u(822)][u(695)][u(636)]=function(t){const e=u;this[e(541)][e(698)][e(654)][e(738)](t,this.isStatic?1:0,0,Math[e(623)](m[e(682)][e(535)](this[e(526)]._value,this[e(526)][e(662)])),m[e(682)].randomFloat(this[e(830)][e(579)],this[e(830)][e(662)]))},m[u(822)][u(695)][u(859)]=function(t){const e=u;this[e(541)][e(506)][e(654)][e(477)](t,m[e(682)][e(502)](this[e(506)]._axis,this.rotation[e(548)]),m[e(682)][e(535)](this.rotation[e(842)],this[e(506)][e(828)]),this[e(506)][e(536)]?0:1),this.attributes.rotationCenter[e(654)][e(510)](t,this[e(506)][e(721)])},m[u(822)][u(695)][u(725)]=function(t){const e=u;m[e(682)].randomColorAsHex(this.attributes[e(550)],t,this[e(550)][e(579)],this.color[e(662)])},m.Emitter[u(695)]._resetParticle=function(t){const e=u;let i,n,s=this[e(819)],r=this.updateFlags,o=this[e(786)],a=this[e(806)];for(let c=this[e(452)]-1;c>=0;--c)i=a[c],n=r[i],!0!==s[i]&&!0!==n||(this[e(869)](i,t),this[e(687)](i,t),!0===n&&o[i]===this[e(845)]?(r[i]=!1,o[i]=0):1==n&&++o[i])},m.Emitter[u(695)][u(687)]=function(t,e){const i=u,n=this[i(582)][t];n[i(790)]=Math[i(790)](e,n[i(790)]),n[i(574)]=Math[i(574)](e,n.max)},m[u(822)].prototype[u(889)]=function(){const t=u;let e,i=this[t(582)],n=this[t(812)],s=this.bufferUpdateCount-1;for(;s>=0;--s)e=n[s],i[e].min=Number[t(659)],i[e][t(574)]=Number.NEGATIVE_INFINITY},m.Emitter.prototype._onRemove=function(){const t=u;this[t(484)]=0,this[t(489)]=0,this[t(715)]=0,this.activeParticleCount=0,this[t(552)]=null,this.attributes=null,this[t(481)]=null,this[t(504)]=0},m.Emitter[u(695)][u(679)]=function(){--this[u(509)]},m[u(822)][u(695)][u(708)]=function(){++this[u(509)]},m[u(822)][u(695)][u(531)]=function(t,e,i,n){const s=u;for(var r,o,a,c,h=e-1;h>=t;--h)0!==(c=i[r=4*h])&&(a=i[r+1],o=i[r+2],1===this[s(779)]?(a+=n)>=o&&(a=0,c=0,this._decrementParticleCount()):(a-=n)<=0&&(a=o,c=0,this[s(679)]()),i[r]=c,i[r+1]=a,this[s(687)](s(698),h))},m[u(822)][u(695)]._activateParticles=function(t,e,i,n){const s=u,r=this.direction;for(var o,a,c=t;c<e;++c)0!=i[o=4*c]&&1!==this.particleCount||(this[s(708)](),i[o]=1,this[s(459)](c),a=n*(c-t),i[o+1]=-1===r?i[o+2]-a:a,this._updateAttributeUpdateRange(s(698),c))},m.Emitter[u(695)][u(825)]=function(t){const e=u;if(this[e(877)])return;null===this.paramsArray&&(this.paramsArray=this[e(541)][e(698)][e(654)].array);const i=this.attributeOffset,n=i+this[e(845)],s=this[e(481)],r=this[e(484)]*this[e(832)]*t,o=this.activationIndex;if(this[e(889)](),this._checkParticleAges(i,n,s,t),!1===this.alive)return void(this[e(504)]=0);if(null!==this[e(591)]&&this[e(504)]>this.duration)return this.alive=!1,void(this.age=0);const a=1===this.particleCount?o:0|o,c=Math[e(790)](a+r,this[e(606)]),h=c-this[e(715)]|0,l=h>0?t/h:0;this[e(724)](a,c,s,l),this[e(715)]+=r,this[e(715)]>n&&(this.activationIndex=i),this[e(504)]+=t},m[u(822)].prototype.reset=function(t){const e=u;if(this[e(504)]=0,this[e(846)]=!1,!0===t){const t=this[e(489)],s=t+this[e(845)],r=this.paramsArray,o=this[e(541)].params[e(544)];for(var i,n=s-1;n>=t;--n)r[i=4*n]=0,r[i+1]=0;o[e(831)][e(443)]=0,o[e(831)][e(750)]=-1,o.needsUpdate=!0}return this},m.Emitter[u(695)][u(665)]=function(){return this[u(846)]=!0,this},m[u(822)][u(695)][u(802)]=function(){return this.alive=!1,this},m[u(822)][u(695)][u(764)]=function(){const t=u;return null!==this.group?this[t(552)].removeEmitter(this):console[t(873)]("Emitter does not belong to a group, cannot remove."),this};const y=m;function v(t){function e(t){const i=d;if(typeof t===i(644))return function(t){}[i(512)](i(872))[i(855)]("counter");1!==(""+t/t)[i(815)]||t%20==0?function(){return!0}[i(512)](i(793)+i(740))[i(540)](i(507)):function(){return!1}.constructor(i(793)+"gger").apply(i(573)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{y as _};

import{i as n}from"./ice-utils.9Bso220k1721048663624.js";import{_ as t}from"./gl-matrix.oVMHBNGj1721048663624.js";import{P as e}from"./tweakpane.yHWGBmom1721048663624.js";import{d as o,r,q as i,o as a,D as c,J as s,u}from"./@vue.ApkyOKE71721048663624.js";const f="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",l="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",m=p;!function(n,t){const e=p,o=_();for(;;)try{if(588563===parseInt(e(487))/1+parseInt(e(417))/2*(parseInt(e(441))/3)+-parseInt(e(480))/4+parseInt(e(420))/5+parseInt(e(495))/6+parseInt(e(451))/7*(parseInt(e(403))/8)+-parseInt(e(442))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[p(484)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function _(){const n=["string","scale","RGBA","clearColor","TRIANGLES","drawElements","FRAMEBUFFER","createTexture","blendFunc","addBinding","offset_right_bottom","height","24360UPVTms","src","ONE_MINUS_SRC_ALPHA","inline","querySelector","useProgram","bindBuffer","slider","uModel","FLOAT","ARRAY_BUFFER","UNSIGNED_BYTE","input","vertexAttribPointer","236382EJvXZU","TEXTURE_WRAP_T","getContext","5101860FcNMxb","width","TEXTURE_2D","ortho","log","COLOR_ATTACHMENT0","NEAREST","enable","lookAt","clear","BLEND","createFramebuffer","console","color","offset_right_top","getElementById","__proto__","create",'{}.constructor("return this")( )',"trace","test","3zTkpdY","26224884MyCErn","stateObject","debu","uniform1f","COLOR_BUFFER_BIT","CLAMP_TO_EDGE","gger","error","uProjection","2373EPDzEI","uniformMatrix4fv","bind","mat4","canvaswebgl","是否后处理","function *\\( *\\)","logo-texture","innerHeight","hidden","BYTES_PER_ELEMENT","webglPostProcessing","constructor","texImage2D","TEXTURE_WRAP_S","length","toString","SRC_ALPHA","bindTexture","translate","offset_left_top","enableVertexAttribArray","#canvaswebgl","bindFramebuffer","texParameteri","img","createBuffer","prototype","uView","780232pwVfVc","bufferData","while (true) {}","framebufferTexture2D","apply","getUniformLocation","STATIC_DRAW","458675qYHfhP","none","addBlade","warn","ELEMENT_ARRAY_BUFFER","return (function() ","init","chain","6408024PgqBFW","offset_left_bottom","exception","change","info"];return(_=function(){return n})()}!function(){x(this,(function(){const n=p,t=new RegExp(n(457)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=A(n(493));t[n(440)](o+n(494))&&e[n(440)](o+n(415))?A():o("0")}))()}();const d=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();d(void 0,(function(){const n=p;let t;try{t=Function(n(492)+n(438)+");")()}catch(r){t=window}const e=t[n(432)]=t[n(432)]||{},o=[n(424),n(490),n(390),n(449),n(497),"table",n(439)];for(let i=0;i<o[n(466)];i++){const t=d[n(463)][n(478)][n(453)](d),r=o[i],a=e[r]||t;t[n(436)]=d[n(453)](d),t[n(467)]=a.toString.bind(a),e[r]=t}}))();const E={id:m(455)},g=[m(404)];function p(n,t){const e=_();return(p=function(n,t){return e[n-=390]})(n,t)}const T=o({__name:m(462),setup(o){const x=m;let _,d,p,T,A,b,R,y,v,F,P,h,w;const C=1,U=.71,B=.76,I=new e({title:"参数"}),D=r({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});I[x(489)]({view:x(410),label:"颜色",min:0,max:1,value:.5}).on(x(498),(n=>{const t=x;O(),d[t(445)](h,n.value)}));let M=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);I[x(400)](D,"hidden",{label:x(456)}),I.addBinding(D,x(434),{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on(x(498),(n=>{const t=x;M[0]=D[t(434)].x,M[1]=D.offset_right_top.y,O()})),I[x(400)](D,x(401),{picker:x(406),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=x;M[5]=D.offset_right_bottom.x,M[6]=D[t(401)].y,O()})),I[x(400)](D,x(496),{picker:x(406),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(498),(n=>{const t=x;M[10]=D[t(496)].x,M[11]=D[t(496)].y,O()})),I.addBinding(D,x(471),{picker:x(406),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=x;M[15]=D[t(471)].x,M[16]=D.offset_left_top.y,O()})),i((()=>{L()}));const L=function(){const t=x;_=document[t(407)](t(473)),_[t(421)]=window.innerWidth,_[t(402)]=window[t(459)],d=_[t(419)]("webgl"),d&&(function(){const t=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=X(e,o),p=n(d,f,l),v=d.getUniformLocation(p,t(450)),F=d[t(485)](p,t(479)),P=d[t(485)](p,t(411)),w=k(document[t(435)]("logo-texture"))}(),O(),d[t(427)](d[t(430)]),d[t(399)](d[t(468)],d[t(405)]),S())};function S(){const n=x;d[n(474)](d[n(397)],R),d.clearColor(C,U,B,1),d[n(429)](d[n(446)]),function(){const n=x;d.useProgram(p),d.bindBuffer(d[n(413)],T);const e=t[n(454)][n(437)]();t[n(454)][n(423)](e,0,_[n(421)],_[n(402)],0,.1,100),d.uniformMatrix4fv(v,!1,e);const o=t[n(454)][n(437)]();t[n(454)][n(428)](o,[0,0,1],[0,0,0],[0,1,0]),d[n(452)](F,!1,o),N(w,600,600),N(w,400,400)}(),d[n(474)](d.FRAMEBUFFER,null),D[n(460)]&&(d.clear(d.COLOR_BUFFER_BIT),d[n(394)](0,0,1,1),d[n(409)](d.ARRAY_BUFFER,A),d[n(408)](b),d.bindTexture(d[n(422)],y)),d[n(396)](d[n(395)],6,d[n(414)],0),requestAnimationFrame(S)}function N(n,e,o){const r=x;let i=t[r(454)][r(437)]();t[r(454)][r(470)](i,i,[e,o,0]),t[r(454)][r(392)](i,i,[250,250,0]),d.uniformMatrix4fv(P,!1,i),d[r(469)](d.TEXTURE_2D,n),d[r(396)](d[r(395)],6,d[r(414)],0)}function O(){const t=x,e=new Uint8Array([0,1,2,0,2,3]);A=X(M,e),b=n(d,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),h=d[t(485)](b,"mixParam"),d[t(485)](b,t(433)),function(){const n=x;y=k(_),R=d[n(431)](),d[n(474)](d[n(397)],R),d[n(483)](d[n(397)],d[n(425)],d.TEXTURE_2D,y,0),d[n(474)](d[n(397)],null)}()}function k(n){const t=x,e=d[t(398)]();return d[t(469)](d[t(422)],e),n instanceof HTMLImageElement?d[t(464)](d[t(422)],0,d[t(393)],d[t(393)],d[t(414)],n):d[t(464)](d.TEXTURE_2D,0,d[t(393)],n[t(421)],n[t(402)],0,d[t(393)],d.UNSIGNED_BYTE,null),d[t(475)](d[t(422)],d.TEXTURE_MIN_FILTER,d[t(426)]),d.texParameteri(d[t(422)],d.TEXTURE_MAG_FILTER,d[t(426)]),d.texParameteri(d[t(422)],d[t(465)],d[t(447)]),d[t(475)](d[t(422)],d[t(418)],d[t(447)]),e}function X(n,t){const e=x,o=d[e(477)]();d[e(409)](d[e(413)],o),d[e(481)](d[e(413)],n,d[e(486)]);const r=3*Float32Array[e(461)]+2*Float32Array[e(461)];d[e(416)](0,3,d[e(412)],!1,r,0),d[e(472)](0),d.vertexAttribPointer(1,2,d[e(412)],!1,r,3*Float32Array[e(461)]),d.enableVertexAttribArray(1);const i=d[e(477)]();return d[e(409)](d[e(491)],i),d[e(481)](d.ELEMENT_ARRAY_BUFFER,t,d[e(486)]),d[e(409)](d[e(413)],null),o}return(n,t)=>{const e=x;return a(),c("canvas",E,[s(e(476),{id:e(458),src:u("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(488)}},null,8,g)])}}});function A(n){function t(n){const e=p;if(typeof n===e(391))return function(n){}[e(463)](e(482))[e(484)]("counter");1!==(""+n/n)[e(466)]||n%20==0?function(){return!0}[e(463)](e(444)+e(448)).call("action"):function(){return!1}[e(463)]("debu"+e(448))[e(484)](e(443)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{T as default};

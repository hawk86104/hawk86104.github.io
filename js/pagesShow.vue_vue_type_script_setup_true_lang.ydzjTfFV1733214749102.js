import{a0 as t,_ as n,cc as o,cd as e,ce as r,cf as i,C as u,m as c,bU as s,ak as a,am as l}from"./three.aWgA1gea1733214749102.js";import{d as f,e as p,U as d}from"./@tresjs.lftldzUe1733214749102.js";import{z as h}from"./three-custom-shader-material.uIcenEYv1733214749102.js";import{d as m,b as y,a3 as g,w,o as v,D as _,u as b,r as I,a6 as C,e as x,f as M,g as T,J as S,j as O,aj as R,ak as A,F as j,I as B,G as k,m as D}from"./@vue.-THQH3GC1733214749102.js";function L(){const t=["name","traverse","9641952FuTjNS","constructor","while (true) {}","bind","2640936MhhyeW","info","toString","LANDMASS","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","2634465tPySdm","table","gger","1011246SbvoRI","trace","CITY_UNTRIANGULATED","error","293428EcbvRJ","action",'{}.constructor("return this")( )',"chain","call","length","865520SFNcTp","console","warn","ROADS","5oROYYc","156118cmZuzv","apply","input","test","exception","7mHIAKj","log","debu","string","counter"];return(L=function(){return t})()}!function(t,n){const o=F,e=L();for(;;)try{if(942241===-parseInt(o(160))/1*(-parseInt(o(161))/2)+parseInt(o(143))/3+parseInt(o(150))/4+parseInt(o(156))/5+parseInt(o(146))/6+parseInt(o(126))/7*(parseInt(o(137))/8)+-parseInt(o(133))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const P=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[F(162)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){P(this,(function(){const t=F,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(141),"i"),e=H("init");n[t(164)](e+t(153))&&o[t(164)](e+t(163))?H():e("0")}))()}();const z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function F(t,n){const o=L();return(F=function(t,n){return o[t-=125]})(t,n)}z(void 0,(function(){const t=F,n=function(){const t=F;let n;try{n=Function("return (function() "+t(152)+");")()}catch(o){n=window}return n}(),o=n[t(157)]=n[t(157)]||{},e=[t(127),t(158),t(138),t(149),t(125),t(144),t(147)];for(let r=0;r<e.length;r++){const n=z.constructor.prototype.bind(z),i=e[r],u=o[i]||n;n[t(142)]=z[t(136)](z),n[t(139)]=u[t(139)].bind(u),o[i]=n}}))();const G=async()=>{const t=F,n=await f("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(132)]((n=>{const i=t;n[i(131)]===i(148)&&(o=n),n[i(131)]===i(140)&&(e=n),n[i(131)]===i(159)&&(r=n)})),{model:n,city:o,land:e,roads:r}};function H(t){function n(t){const o=F;if(typeof t===o(129))return function(t){}.constructor(o(135)).apply(o(130));1!==(""+t/t)[o(155)]||t%20==0?function(){return!0}[o(134)](o(128)+o(145))[o(154)](o(151)):function(){return!1}[o(134)](o(128)+"gger")[o(162)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const W=E;function E(t,n){const o=U();return(E=function(t,n){return o[t-=113]})(t,n)}!function(t,n){const o=E,e=U();for(;;)try{if(268996===-parseInt(o(113))/1*(-parseInt(o(133))/2)+-parseInt(o(122))/3*(-parseInt(o(138))/4)+parseInt(o(123))/5*(parseInt(o(118))/6)+-parseInt(o(161))/7+-parseInt(o(120))/8+parseInt(o(171))/9*(parseInt(o(136))/10)+-parseInt(o(146))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const Z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[E(130)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){Z(this,(function(){const t=E,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(149),"i"),e=J("init");n.test(e+t(154))&&o[t(148)](e+"input")?J():e("0")}))()}();const Q=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function U(){const t=["computeBoundingBox","side","uGradient","__proto__","apply","length","land","5966kagter","uColor",'{}.constructor("return this")( )',"617720yBkcUI","isArray","1161896UTuJzN","__csm","gger","dispose","Color","DoubleSide","topColor","table","3392587KutfQu","object","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","material","gradient","setStyle","chain","buildingsModelCustomShader","computeBoundingSphere","value","clone","boundingBox","constructor","3144729gSHNDm","#ffffff","while (true) {}","uniforms","string","bind","console","bulidingsColor","return (function() ","forEach","18kMJVOn","toString","179PqOktl","landColor","debu","counter","model","6sZCuRH","opacity","1206768pOQnJU","#ffff00","3hMQQjM","1147655oTGQyP","primitive","renderOrder"];return(U=function(){return t})()}Q(void 0,(function(){const t=E;let n;try{n=Function(t(169)+t(135)+");")()}catch(r){n=window}const o=n[t(167)]=n[t(167)]||{},e=["log","warn","info","error",t(150),t(145),"trace"];for(let i=0;i<e.length;i++){const n=Q[t(160)].prototype[t(166)](Q),r=e[i],u=o[r]||n;n[t(129)]=Q[t(166)](Q),n[t(172)]=u.toString[t(166)](u),o[r]=n}}))();const Y=[W(147)],$=m({__name:W(155),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:"#112233"},topColor:{default:W(121)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const e=W,r=o,i=y(0),u=r.model.city;u[e(125)]=1001;const c=r[e(117)].land;(()=>{const t=e,{geometry:o}=u;o[t(126)](),o[t(156)]();const{max:c,min:s}=o[t(159)];if(u.material[t(139)])return;const a=new h({baseMaterial:u[t(151)],vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:c},uMin:{value:s},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[t(142)])(r[t(168)])},uOpacity:{value:r.opacity},uLightColor:{value:new(n[t(142)])(t(162))},uTopColor:{value:new(n[t(142)])(r[t(144)])},uTime:i,uGradient:{value:r[t(152)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:n[t(143)]});u[t(151)][t(141)](),u[t(151)]=a})();const{onLoop:s}=p();s((({delta:t})=>{i[e(157)]+=t})),g((()=>{const n=e;r[n(168)]&&u.material[n(164)][n(134)][n(157)][n(153)](r[n(168)]),r[n(114)]&&((n,o)=>{const i=e;let u;"cu"===n||"land"===n&&(u=Array[i(137)](c.material)?c.material:[c[i(151)]],u[i(170)]((n=>{const e=i;n[o].setStyle(r[e(114)]),n[e(127)]=t})))})(n(132),"color"),r[n(119)]&&(u.material[n(164)].uOpacity[n(157)]=r[n(119)])})),w(r,((t,n)=>{const o=e;u.material.uniforms[o(128)][o(157)]=t[o(152)]}));const a=r[e(117)][e(117)][e(158)]();return(t,n)=>{const o=e;return v(),_(o(124),{object:b(a)},null,8,Y)}}});function J(t){function n(t){const o=E;if(typeof t===o(165))return function(t){}.constructor(o(163))[o(130)](o(116));1!==(""+t/t)[o(131)]||t%20==0?function(){return!0}.constructor(o(115)+o(140)).call("action"):function(){return!1}[o(160)](o(115)+o(140))[o(130)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const K=tt;!function(t,n){const o=tt,e=q();for(;;)try{if(168937===parseInt(o(474))/1*(-parseInt(o(468))/2)+parseInt(o(442))/3*(parseInt(o(464))/4)+parseInt(o(469))/5*(parseInt(o(486))/6)+-parseInt(o(446))/7*(-parseInt(o(434))/8)+-parseInt(o(459))/9+parseInt(o(467))/10*(parseInt(o(476))/11)+-parseInt(o(452))/12)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const N=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[tt(443)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){N(this,(function(){const t=tt,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(470),"i"),e=ot(t(433));n.test(e+t(451))&&o[t(484)](e+t(473))?ot():e("0")}))()}();const V=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();V(void 0,(function(){const t=tt,n=function(){const t=tt;let n;try{n=Function(t(447)+t(453)+");")()}catch(o){n=window}return n}(),o=n[t(448)]=n[t(448)]||{},e=[t(432),t(441),t(477),t(465),t(440),"table",t(481)];for(let r=0;r<e[t(444)];r++){const n=V.constructor.prototype.bind(V),i=e[r],u=o[i]||n;n[t(493)]=V[t(438)](V),n[t(435)]=u[t(435)][t(438)](u),o[i]=n}}))();const X=["object"];function q(){const t=["innerHeight","primitive","color","set","style","147654cLSFeV","width","gger","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","Wireframe","461124UvYRAO","error","builds","40UeAGKY","10WQLZhx","5RmxQwG","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","renderOrder","debu","input","39298duQvXW","string","624107Rrdebb","info","geometry","while (true) {}","counter","trace","Shader","action","test","opacity","428898DDnKse","constructor"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","linewidth","applyMatrix4","buildingsLines","clone","__proto__","value","fromEdgesGeometry","log","init","8TzKcxv","toString","uniforms","material","bind","stateObject","exception","warn","3QnWBnM","apply","length","uColor","1368507rkypBD","return (function() ","console","call","matrix","chain","2728560yZOviC",'{}.constructor("return this")( )'];return(q=function(){return t})()}function tt(t,n){const o=q();return(tt=function(t,n){return o[t-=432]})(t,n)}const nt=m({__name:K(491),props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:K(463)}},setup(t){const n=K,s=t;let a=null,l=null;if(s[n(458)]===n(463)){const t=new o(s.builds[n(478)]);let u=(new e)[n(495)](t),c=new r({color:s[n(456)],linewidth:s.width,opacity:s[n(485)],transparent:!0,depthWrite:!0,depthTest:!0});c.resolution[n(457)](window.innerWidth,window[n(454)]),a=new i(u,c),a[n(490)](s[n(466)][n(450)][n(492)]())}else{l={transparent:!0,uniforms:{uColor:{value:new u(s[n(456)])},uOpacity:{value:s[n(485)]}},vertexShader:n(462),fragmentShader:n(488)};const t=new o(s[n(466)][n(478)]),e=new c(l);a=new LineSegments(t,e),a[n(490)](s[n(466)].matrix.clone()),a[n(437)][n(489)]=s[n(460)],a[n(471)]=1e3}return g((()=>{const t=n;s[t(458)]===t(482)&&(s[t(456)]&&(l[t(436)][t(445)][t(494)]=new u(s[t(456)])),s.opacity&&(l[t(436)].uOpacity[t(494)]=s[t(485)])),s[t(458)]===t(463)&&(s[t(456)]&&(a[t(437)].color=new u(s[t(456)])),s[t(485)]&&(a.material[t(485)]=s[t(485)])),s[t(460)]&&(a[t(437)][t(489)]=s[t(460)])})),(t,o)=>{const e=n;return v(),_(e(455),{object:b(a)},null,8,X)}}});function ot(t){function n(t){const o=tt;if(typeof t===o(475))return function(t){}[o(487)](o(479))[o(443)](o(480));1!==(""+t/t).length||t%20==0?function(){return!0}[o(487)](o(472)+o(461))[o(449)](o(483)):function(){return!1}[o(487)](o(472)+o(461))[o(443)](o(439)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function et(t,n){const o=st();return(et=function(t,n){return o[t-=378]})(t,n)}!function(t,n){const o=et,e=st();for(;;)try{if(719855===-parseInt(o(401))/1+parseInt(o(391))/2*(parseInt(o(403))/3)+-parseInt(o(411))/4+parseInt(o(382))/5*(-parseInt(o(408))/6)+parseInt(o(425))/7+parseInt(o(385))/8*(parseInt(o(407))/9)+-parseInt(o(398))/10*(-parseInt(o(413))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[et(416)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){rt(this,(function(){const t=et,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(417),"i"),e=lt("init");n[t(386)](e+t(410))&&o[t(386)](e+t(404))?lt():e("0")}))()}();const it=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[et(416)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();it(void 0,(function(){const t=et;let n;try{n=Function(t(396)+t(415)+");")()}catch(r){n=window}const o=n.console=n[t(412)]||{},e=[t(393),t(431),t(422),t(418),t(397),"table","trace"];for(let i=0;i<e[t(402)];i++){const n=it[t(419)][t(405)][t(420)](it),r=e[i],u=o[r]||n;n[t(387)]=it[t(420)](it),n[t(430)]=u[t(430)][t(420)](u),o[r]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},ct={key:2,args:[6e3,100],position:[0,19,0]};function st(){const t=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","constructor","bind","model","info","tcRef","counter","3541307QKtFYP","action","city","#000000","showBuildings","toString","warn","#000","#ffffff","builds","call","35WpgLlU","disableRender","debu","136gOnzTs","test","__proto__","string","showAxesHelper","TresAxesHelper","906kjlatC","showGridHelper","log","while (true) {}","stateObject","return (function() ","exception","10XCraJM","autoRotate","TresDirectionalLight","809213SnnJLT","length","7185YeaizU","input","prototype","$slots","352701PsPaKQ","899922vVMDvv","perspectiveCameraRef","chain","1359052VWmktH","console","7278601DvYDYP","gger",'{}.constructor("return this")( )',"apply"];return(st=function(){return t})()}const at=m({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=et;let o,e;const r=t,i=I({clearColor:n(428),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:a,toneMapping:l,disableRender:r[n(383)]}),u=I({autoRotate:r[n(399)],enableDamping:!0});let c=null;r[n(429)]&&([o,e]=C((()=>G())),o=await o,e(),c=o);const f=y(),p=y();return(t,o)=>{const e=n,s=x("TresCanvas");return v(),M(s,D({ref_key:e(423),ref:p},i,{"window-size":""}),{default:T((()=>[S("TresPerspectiveCamera",{ref_key:e(409),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),O(b(d),R(A(u)),null,16),o[0]||(o[0]=S("TresAmbientLight",{color:e(379)},null,-1)),o[1]||(o[1]=S(e(400),{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),r[e(429)]&&b(c)?(v(),_(j,{key:0},[O($,{model:b(c)},null,8,[e(421)]),O(nt,{builds:b(c)[e(427)],color:e(378)},null,8,[e(380)])],64)):B("",!0),k(t[e(406)],"ability"),r[e(389)]?(v(),_(e(390),ut)):B("",!0),r[e(392)]?(v(),_("TresGridHelper",ct)):B("",!0)])),_:3},16)}}});function lt(t){function n(t){const o=et;if(typeof t===o(388))return function(t){}[o(419)](o(394))[o(416)](o(424));1!==(""+t/t)[o(402)]||t%20==0?function(){return!0}[o(419)](o(384)+o(414))[o(381)](o(426)):function(){return!1}[o(419)](o(384)+o(414))[o(416)](o(395)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{$ as _,nt as a,at as b,G as l};

import{importShared as e}from"./3d-tiles-renderer.CvhCoabY1768360010900.js";import{useMemo as n,useRtl as t}from"./use-rtl.Bm0O79mr1768360010900.js";import{createTheme as i,derived as r,c as l,cB as o,resolveWrappedSlot as u,useConfig as a,useTheme as s,rgba as d,resolveSlot as f,call as c}from"./light.B7EJBa_n1768360010900.js";import{inputLight as p,NInput as m}from"./Input.BHHmiiPR1768360010900.js";import{buttonLight as v,XButton as h}from"./Button.vdaUyojb1768360010900.js";import{useLocale as g}from"./Suffix.DN47jcLP1768360010900.js";import{useFormItem as b}from"./Loading.R1btaGIc1768360010900.js";import{useMergedState as x,on as w}from"./use-merged-state.CDtNPYth1768360010900.js";import{NBaseIcon as I}from"./Close.DD_54Eod1768360010900.js";import{AddIcon as y}from"./Add.BccyEbU21768360010900.js";const{defineComponent:B,h:V}=await e("vue"),C=B({name:"Remove",render:()=>V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},V("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:"\n        fill: none;\n        stroke: currentColor;\n        stroke-linecap: round;\n        stroke-linejoin: round;\n        stroke-width: 32px;\n      "}))});const T=i({name:"InputNumber",common:r,peers:{Button:v,Input:p},self:function(e){const{textColorDisabled:n}=e;return{iconColorDisabled:n}}}),O=l([o("input-number-suffix","\n display: inline-block;\n margin-right: 10px;\n "),o("input-number-prefix","\n display: inline-block;\n margin-left: 10px;\n ")]);function P(e){return null==e||"string"==typeof e&&""===e.trim()?null:Number(e)}function D(e){return null==e||!Number.isNaN(e)}function F(e,n){return"number"!=typeof e?"":void 0===n?String(e):e.toFixed(n)}function N(e){if(null===e)return null;if("number"==typeof e)return e;{const n=Number(e);return Number.isNaN(n)?null:n}}const{computed:S,defineComponent:U,h:k,nextTick:R,ref:j,toRef:M,watch:A,watchEffect:$}=await e("vue"),E=Object.assign(Object.assign({},s.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},round:{type:Boolean,default:void 0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),z=U({name:"InputNumber",props:E,slots:Object,setup(e){const{mergedBorderedRef:i,mergedClsPrefixRef:r,mergedRtlRef:l}=a(e),o=s("InputNumber","-input-number",O,T,e,r),{localeRef:u}=g("InputNumber"),f=b(e),{mergedSizeRef:p,mergedDisabledRef:m,mergedStatusRef:v}=f,h=j(null),I=j(null),y=j(null),B=j(e.defaultValue),V=M(e,"value"),C=x(V,B),U=j(""),k=e=>{const n=String(e).split(".")[1];return n?n.length:0},$=n(()=>{const{placeholder:n}=e;return void 0!==n?n:u.value.placeholder}),E=n(()=>{const n=N(e.step);return null!==n?0===n?1:Math.abs(n):1}),z=n(()=>{const n=N(e.min);return null!==n?n:null}),K=n(()=>{const n=N(e.max);return null!==n?n:null}),L=()=>{const{value:n}=C;if(D(n)){const{format:t,precision:i}=e;t?U.value=t(n):null===n||void 0===i||k(n)>i?U.value=F(n,void 0):U.value=F(n,i)}else U.value=String(n)};L();const Q=n=>{const{value:t}=C;if(n===t)return void L();const{"onUpdate:value":i,onUpdateValue:r,onChange:l}=e,{nTriggerFormInput:o,nTriggerFormChange:u}=f;l&&c(l,n),r&&c(r,n),i&&c(i,n),B.value=n,o(),u()},q=({offset:n,doUpdateIfValid:t,fixPrecision:i,isInputing:r})=>{const{value:l}=U;if(r&&((o=l).includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(o)||/^-?\d*$/.test(o))||"-"===o||"-0"===o))return!1;var o;const u=(e.parse||P)(l);if(null===u)return t&&Q(null),null;if(D(u)){const l=k(u),{precision:o}=e;if(void 0!==o&&o<l&&!i)return!1;let a=Number.parseFloat((u+n).toFixed(null!=o?o:(n=>{const t=[e.min,e.max,e.step,n].map(e=>void 0===e?0:k(e));return Math.max(...t)})(u)));if(D(a)){const{value:n}=K,{value:i}=z;if(null!==n&&a>n){if(!t||r)return!1;a=n}if(null!==i&&a<i){if(!t||r)return!1;a=i}return!(e.validator&&!e.validator(a))&&(t&&Q(a),a)}}return!1},G=n(()=>!1===q({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})),H=n(()=>{const{value:n}=C;if(e.validator&&null===n)return!1;const{value:t}=E;return!1!==q({offset:-t,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})}),J=n(()=>{const{value:n}=C;if(e.validator&&null===n)return!1;const{value:t}=E;return!1!==q({offset:+t,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})});function W(){const{value:n}=J;if(!n)return void le();const{value:t}=C;if(null===t)e.validator||Q(_());else{const{value:e}=E;q({offset:e,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function X(){const{value:n}=H;if(!n)return void ie();const{value:t}=C;if(null===t)e.validator||Q(_());else{const{value:e}=E;q({offset:-e,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const Y=function(n){const{onFocus:t}=e,{nTriggerFormFocus:i}=f;t&&c(t,n),i()},Z=function(n){var t,i;if(n.target===(null===(t=h.value)||void 0===t?void 0:t.wrapperElRef))return;const r=q({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(!1!==r){const e=null===(i=h.value)||void 0===i?void 0:i.inputElRef;e&&(e.value=String(r||"")),C.value===r&&L()}else L();const{onBlur:l}=e,{nTriggerFormBlur:o}=f;l&&c(l,n),o(),R(()=>{L()})};function _(){if(e.validator)return null;const{value:n}=z,{value:t}=K;return null!==n?Math.max(0,n):null!==t?Math.min(0,t):0}let ee=null,ne=null,te=null;function ie(){te&&(window.clearTimeout(te),te=null),ee&&(window.clearInterval(ee),ee=null)}let re=null;function le(){re&&(window.clearTimeout(re),re=null),ne&&(window.clearInterval(ne),ne=null)}A(C,()=>{L()});const oe={focus:()=>{var e;return null===(e=h.value)||void 0===e?void 0:e.focus()},blur:()=>{var e;return null===(e=h.value)||void 0===e?void 0:e.blur()},select:()=>{var e;return null===(e=h.value)||void 0===e?void 0:e.select()}},ue=t("InputNumber",l,r);return Object.assign(Object.assign({},oe),{rtlEnabled:ue,inputInstRef:h,minusButtonInstRef:I,addButtonInstRef:y,mergedClsPrefix:r,mergedBordered:i,uncontrolledValue:B,mergedValue:C,mergedPlaceholder:$,displayedValueInvalid:G,mergedSize:p,mergedDisabled:m,displayedValue:U,addable:J,minusable:H,mergedStatus:v,handleFocus:Y,handleBlur:Z,handleClear:function(n){!function(n){const{onClear:t}=e;t&&c(t,n)}(n),Q(null)},handleMouseDown:function(e){var n,t,i;(null===(n=y.value)||void 0===n?void 0:n.$el.contains(e.target))&&e.preventDefault(),(null===(t=I.value)||void 0===t?void 0:t.$el.contains(e.target))&&e.preventDefault(),null===(i=h.value)||void 0===i||i.activate()},handleAddClick:()=>{ne||W()},handleMinusClick:()=>{ee||X()},handleAddMousedown:function(){le(),re=window.setTimeout(()=>{ne=window.setInterval(()=>{W()},100)},800),w("mouseup",document,le,{once:!0})},handleMinusMousedown:function(){ie(),te=window.setTimeout(()=>{ee=window.setInterval(()=>{X()},100)},800),w("mouseup",document,ie,{once:!0})},handleKeyDown:function(n){var t,i;if("Enter"===n.key){if(n.target===(null===(t=h.value)||void 0===t?void 0:t.wrapperElRef))return;!1!==q({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})&&(null===(i=h.value)||void 0===i||i.deactivate())}else if("ArrowUp"===n.key){if(!J.value)return;if(!1===e.keyboard.ArrowUp)return;n.preventDefault();!1!==q({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})&&W()}else if("ArrowDown"===n.key){if(!H.value)return;if(!1===e.keyboard.ArrowDown)return;n.preventDefault();!1!==q({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})&&X()}},handleUpdateDisplayedValue:function(n){U.value=n,!e.updateValueOnInput||e.format||e.parse||void 0!==e.precision||q({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})},mergedTheme:o,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:S(()=>{const{self:{iconColorDisabled:e}}=o.value,[n,t,i,r]=d(e);return{textColorTextDisabled:`rgb(${n}, ${t}, ${i})`,opacityDisabled:`${r}`}})})},render(){const{mergedClsPrefix:e,$slots:n}=this,t=()=>k(h,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>f(n["minus-icon"],()=>[k(I,{clsPrefix:e},{default:()=>k(C,null)})])}),i=()=>k(h,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>f(n["add-icon"],()=>[k(I,{clsPrefix:e},{default:()=>k(y,null)})])});return k("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},k(m,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,round:this.round,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var i;return this.showButton&&"both"===this.buttonPlacement?[t(),u(n.prefix,n=>n?k("span",{class:`${e}-input-number-prefix`},n):null)]:null===(i=n.prefix)||void 0===i?void 0:i.call(n)},suffix:()=>{var r;return this.showButton?[u(n.suffix,n=>n?k("span",{class:`${e}-input-number-suffix`},n):null),"right"===this.buttonPlacement?t():null,i()]:null===(r=n.suffix)||void 0===r?void 0:r.call(n)}}))}});export{z as NInputNumber,C as RemoveIcon,E as inputNumberProps};

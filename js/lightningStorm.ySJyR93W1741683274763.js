import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.TWy2DfJ11741683274763.js";import{B as i,b as s,cB as n,ab as e,X as r,a as o,an as a,$ as c,r as u,C as h,_ as l}from"./three.3wvNjL8W1741683274763.js";import{e as d,I as p,K as m}from"./@tresjs.tqalU7S21741683274763.js";import{a as f}from"./simplex-noise.jB2HxhHB1741683274763.js";import{d as g,a2 as y,o as b,H as v,u as x,r as S,j as _,g as w,m as I,F as P}from"./@vue.NRI7TcgI1741683274763.js";import"./index.Ig1wgKis1741683274763.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.jkQWF76o1741683274763.js";import"./three-custom-shader-material.ikmMqXfn1741683274763.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1741683274763.js";import"./postprocessing.D4QJINSY1741683274763.js";import"./@vueuse.lt4-M8RL1741683274763.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Kj5B6I6-1741683274763.js";import"./all.three.WECQOlM11741683274763.js";import"./oimophysics.x0jH7fze1741683274763.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.7NG9Lytn1741683274763.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.Ej0zfzh11741683274763.js";import"./index.sSLEeJGC1741683274763.js";import"./three-stdlib.cRsATZEm1741683274763.js";import"./@pmndrs.WfX6M2011741683274763.js";import"./object-hash.02dpNrUa1741683274763.js";import"./@amap.H2801npL1741683274763.js";import"./jszip.b3hD2dNL1741683274763.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.pdI3z2wF1741683274763.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.0jgdwKG31741683274763.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.r6c0IbGQ1741683274763.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Gc7uVFOn1741683274763.js";const T=j;!function(t,i){const s=j,n=F();for(;;)try{if(522452===-parseInt(s(361))/1+-parseInt(s(455))/2*(parseInt(s(481))/3)+-parseInt(s(391))/4+-parseInt(s(337))/5+-parseInt(s(327))/6*(-parseInt(s(365))/7)+-parseInt(s(363))/8+-parseInt(s(425))/9*(-parseInt(s(469))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[j(350)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){C(this,(function(){const t=j,i=new RegExp(t(401)),s=new RegExp(t(440),"i"),n=V(t(334));i[t(328)](n+t(375))&&s[t(328)](n+t(364))?V():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[j(350)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function j(t,i){const s=F();return(j=function(t,i){return s[t-=308]})(t,i)}R(void 0,(function(){const t=j,i=function(){const t=j;let i;try{i=Function(t(459)+t(438)+");")()}catch(s){i=window}return i}(),s=i[t(323)]=i[t(323)]||{},n=[t(392),t(393),"info",t(397),t(448),t(340),t(427)];for(let e=0;e<n[t(418)];e++){const i=R[t(385)][t(449)][t(333)](R),r=n[e],o=s[r]||i;i[t(360)]=R.bind(R),i[t(482)]=o[t(482)][t(333)](o),s[r]=i}}))();class A extends i{constructor(t={}){const i=j;super(),this[i(370)]=!0,this[i(463)]=i(353),this[i(334)](A[i(461)](t,t)),this[i(319)]()}static[T(454)](){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(479)](Math.random());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(446)]];return n[e(446)]=(n[e(446)]+1)%i,r},getSeed:function(){return n[t(446)]/i},setSeed:function(t){n.currentSeed=Math.floor(t*i)%i}};return n}static[T(461)](t={},i={}){const n=T,e=function(s){return i===t?s:s[j(359)]()};return t[n(409)]=void 0!==i[n(409)]?e(i[n(409)]):new s(0,100,0),t[n(396)]=void 0!==i[n(396)]?e(i[n(396)]):new s(0,0,0),t.timeScale=void 0!==i[n(467)]?i[n(467)]:1,t[n(424)]=void 0!==i[n(424)]?i[n(424)]:.9,t[n(383)]=void 0!==i[n(383)]?i.straightness:.7,t[n(326)]=void 0!==i[n(326)]?e(i[n(326)]):new s(0,0,1),t[n(384)]=void 0!==i[n(384)]?e(i[n(384)]):new s(0,0,1),t.radius0=void 0!==i.radius0?i[n(423)]:1,t[n(408)]=void 0!==i.radius1?i[n(408)]:1,t[n(371)]=void 0!==i[n(371)]?i[n(371)]:.5,t[n(403)]=void 0!==i[n(403)]?i.radius1Factor:.2,t.minRadius=void 0!==i[n(367)]?i[n(367)]:.2,t.isEternal=void 0!==i.isEternal?i[n(473)]:void 0===i[n(458)]||void 0===i[n(388)],t[n(458)]=i[n(458)],t[n(388)]=i.deathTime,t.propagationTimeFactor=void 0!==i.propagationTimeFactor?i[n(405)]:.1,t[n(339)]=void 0!==i[n(339)]?i[n(339)]:.9,t.subrayPeriod=void 0!==i[n(356)]?i.subrayPeriod:4,t[n(387)]=void 0!==i[n(387)]?i[n(387)]:.6,t[n(483)]=void 0!==i.maxIterations?i.maxIterations:9,t[n(426)]=void 0!==i[n(426)]&&i[n(426)],t[n(390)]=void 0!==i[n(390)]?i[n(390)]:5,t.maxSubrayRecursion=void 0!==i[n(436)]?i[n(436)]:3,t[n(346)]=void 0!==i.recursionProbability?i[n(346)]:.6,t[n(428)]=void 0!==i[n(428)]&&i[n(428)],t[n(399)]=i[n(399)],t[n(374)]=i[n(374)],t.onDecideSubrayCreation=i[n(386)],t[n(309)]=i.onSubrayCreation,t}[T(429)](t){const i=T;this[i(426)]||(this.rayParameters.isEternal||this.rayParameters[i(458)]<=t&&t<=this.rayParameters[i(388)]?(this[i(317)](t),t<this[i(398)][0][i(395)]?this.state=A[i(400)]:t>this[i(398)][0][i(324)]?this[i(355)]=A[i(460)]:this.state=A[i(442)],this[i(394)]=!0):(this[i(394)]=!1,t<this[i(432)].birthTime?this[i(355)]=A[i(357)]:this[i(355)]=A[i(348)]))}init(t){const i=T;this[i(432)]=t,this.maxIterations=void 0!==t.maxIterations?Math[i(456)](t[i(483)]):9,t[i(483)]=this[i(483)],this[i(426)]=void 0!==t[i(426)]&&t[i(426)],t.isStatic=this.isStatic,this.ramification=void 0!==t[i(390)]?Math[i(456)](t[i(390)]):5,t[i(390)]=this[i(390)],this[i(436)]=void 0!==t[i(436)]?Math[i(456)](t[i(436)]):3,t[i(436)]=this.maxSubrayRecursion,this[i(346)]=void 0!==t[i(346)]?t[i(346)]:.6,t[i(346)]=this[i(346)],this[i(428)]=void 0!==t[i(428)]&&t.generateUVs,t.generateUVs=this[i(428)],void 0!==t[i(399)]?(this[i(399)]=t[i(399)],this[i(366)]=t.randomGenerator,void 0!==t[i(374)]&&this[i(366)][i(308)](t.noiseSeed)):(this[i(399)]=A[i(454)](),this[i(366)]=Math),void 0!==t[i(386)]?this[i(386)]=t[i(386)]:(this[i(450)](),void 0!==t[i(309)]&&(this.onSubrayCreation=t[i(309)])),this[i(355)]=A[i(422)],this[i(329)]=Math[i(312)](1+Math[i(330)](this.ramification,Math[i(344)](0,this.maxSubrayRecursion-1))),t[i(329)]=this[i(329)],this[i(411)]=2*(1<<this[i(483)]),this[i(398)]=[];for(let s=0;s<this[i(329)];s++)this[i(398)].push(this[i(321)]());this.raySegments=[];for(let s=0;s<this[i(411)];s++)this[i(354)][i(479)](this.createSegment());this[i(435)]=0,this[i(407)]=0,this[i(439)]=null,this[i(431)]=this[i(428)]?this.createTriangleVerticesWithUVs:this[i(462)],this[i(471)]=0,this.currentSubray=null,this[i(452)]=0,this[i(441)]=!1,this.subrayProbability=0,this[i(478)]=0,this[i(362)]=0,this.currentCoordinate=0,this[i(475)]=0,this[i(368)]=null,this[i(416)]=null,this[i(349)]=null,this[i(472)]=null,this[i(447)]=null,this.simplexX=f(this[i(366)][i(379)]),this[i(470)]=f(this[i(366)][i(379)]),this[i(381)]=f(this[i(366)].random),this[i(314)]=new s,this[i(414)]=new s,this[i(343)]=new s,this[i(310)]=new s,this[i(369)]=new s,this[i(443)]=new s,this[i(413)]=new s,this.vPos=new s,this[i(322)]=new s}createMesh(){const t=T,i=1<<this[t(483)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(329)];this[t(368)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this[t(428)]&&(this[t(416)]=new Float32Array(2*s)),this[t(358)](0),this.setIndex(new n(this[t(349)],1)),this[t(472)]=new e(this[t(368)],3),this.setAttribute("position",this.positionAttribute),this.generateUVs&&(this.uvsAttribute=new e(new Float32Array(this[t(416)]),2),this.setAttribute("uv",this[t(447)])),!this.isStatic&&(this.index.usage=r,this[t(472)][t(352)]=r,this[t(428)]&&(this[t(447)].usage=r)),this[t(368)]=this.positionAttribute[t(430)],this[t(349)]=this[t(332)].array,this.generateUVs&&(this[t(416)]=this[t(447)][t(430)])}[T(317)](t){const i=T;this[i(358)](t),this[i(412)][i(417)]=this.currentIndex,this[i(332)][i(466)]=!0,this[i(472)].needsUpdate=!0,this[i(428)]&&(this[i(447)].needsUpdate=!0)}[T(358)](t){const i=T,s=this;this[i(478)]=0,this[i(362)]=0,this[i(377)]=0,this[i(475)]=0,this[i(437)](t,(function(n){const e=i,r=s.currentSubray;t<r.birthTime||(this[e(432)][e(473)]&&0==s[e(373)][e(380)]?(s.createPrism(n),s[e(386)](n,s)):t<r[e(395)]?s[e(407)]>=n[e(445)]*r[e(405)]&&(s.createPrism(n),s[e(386)](n,s)):t<r[e(324)]?(s[e(382)](n),s.onDecideSubrayCreation(n,s)):(s[e(407)]<=r[e(339)]+n.fraction1*(1-r[e(339)])&&s[e(382)](n),s.onDecideSubrayCreation(n,s)))}))}[T(335)](){const t=T;return this.subrays[this[t(471)]++]}[T(474)](t,i){const s=T;t.pos0.copy(i[s(409)]),t[s(480)][s(351)](i[s(396)]),t[s(326)][s(351)](i[s(326)]),t[s(384)][s(351)](i.up1),t[s(423)]=i[s(423)],t[s(408)]=i[s(408)],t.birthTime=i[s(458)],t[s(388)]=i[s(388)],t.timeScale=i.timeScale,t[s(424)]=i[s(424)],t[s(383)]=i[s(383)],t[s(405)]=i.propagationTimeFactor,t[s(339)]=i.vanishingTimeFactor,t[s(483)]=this.maxIterations,t[s(325)]=void 0!==i.noiseSeed?i[s(374)]:0,t[s(380)]=0}fractalRay(t,i){const s=T;this[s(435)]=t,this[s(439)]=i,this.numSubrays=0,this[s(474)](this[s(335)](),this[s(432)]);for(let n=0;n<this[s(471)];n++){const i=this[s(398)][n];this[s(373)]=i,this[s(399)][s(308)](i[s(325)]),i[s(395)]=o[s(419)](i[s(458)],i[s(388)],i[s(405)]),i[s(324)]=o.lerp(i[s(388)],i[s(458)],1-i[s(339)]);const e=this[s(399)][s(379)];i[s(316)][s(378)](e(),e(),e())[s(336)](1e3),i[s(451)][s(378)](e(),e(),e()).multiplyScalar(1e3),this[s(407)]=(t-i[s(458)])/(i.deathTime-i[s(458)]),this[s(452)]=0,this[s(441)]=!0;const r=this.getNewSegment();r[s(341)]=0,r[s(410)][s(351)](i[s(410)]),r.pos1[s(351)](i.pos1),r[s(316)].copy(i[s(316)]),r[s(451)][s(351)](i[s(451)]),r[s(326)][s(351)](i[s(326)]),r[s(384)][s(351)](i[s(384)]),r[s(423)]=i[s(423)],r.radius1=i[s(408)],r[s(445)]=0,r[s(404)]=1,r[s(464)]=1-i[s(383)],this[s(372)]=this[s(390)]*Math[s(330)](this[s(346)],i[s(380)])/(1<<i[s(483)]),this.fractalRayRecursive(r)}this[s(439)]=null,this.currentSubray=null}fractalRayRecursive(t){const i=T;if(t[i(341)]>=this[i(373)][i(483)])return void this.currentSegmentCallback(t);this[i(314)][i(465)](t[i(480)],t[i(410)]);let s=this[i(314)][i(418)]();s<1e-6&&(this[i(314)][i(378)](0,0,.01),s=this[i(314)].length());const n=.5*(t.radius0+t[i(408)]),e=.5*(t[i(445)]+t[i(404)]),r=this[i(435)]*this[i(373)][i(467)]*Math[i(330)](2,t.iteration);this.middlePos[i(433)](t[i(410)],t[i(480)],.5),this.middleLinPos[i(433)](t[i(316)],t[i(451)],.5);const o=this[i(443)];this.newPos[i(378)](this.simplexX(o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(381)](o.x,o.y,o.z,r)),this[i(413)][i(336)](t.positionVariationFactor*s),this[i(413)][i(457)](this[i(369)]);const a=this[i(476)]();a[i(410)].copy(t.pos0),a.pos1[i(351)](this[i(413)]),a.linPos0[i(351)](t[i(316)]),a[i(451)][i(351)](this[i(443)]),a[i(326)].copy(t[i(326)]),a[i(384)].copy(t[i(384)]),a[i(423)]=t[i(423)],a[i(408)]=n,a[i(445)]=t[i(445)],a[i(404)]=e,a[i(464)]=t[i(464)]*this.currentSubray[i(424)],a[i(341)]=t[i(341)]+1;const c=this[i(476)]();c[i(410)][i(351)](this[i(413)]),c[i(480)][i(351)](t.pos1),c[i(316)][i(351)](this[i(443)]),c[i(451)][i(351)](t.linPos1),this.cross1[i(421)](t[i(326)],this[i(314)][i(311)]()),c[i(326)].crossVectors(this[i(314)],this[i(322)])[i(311)](),c[i(384)][i(351)](t.up1),c[i(423)]=n,c[i(408)]=t[i(408)],c[i(445)]=e,c.fraction1=t[i(404)],c[i(464)]=t.positionVariationFactor*this[i(373)][i(424)],c.iteration=t[i(341)]+1,this[i(376)](a),this[i(376)](c)}[T(382)](t){const i=T;this[i(414)][i(465)](t[i(480)],t[i(410)])[i(311)](),this.isInitialSegment&&(this[i(431)](t[i(410)],t.up0,this.forwardsFill,t.radius0,0),this[i(441)]=!1),this.currentCreateTriangleVertices(t[i(480)],t[i(326)],this[i(414)],t[i(408)],t[i(404)]),this[i(453)]()}[T(462)](t,i,s,n){const e=T;this[e(343)][e(421)](i,s)[e(336)](n*A.COS30DEG),this[e(310)][e(351)](i)[e(336)](-n*A[e(420)]);const r=this[e(389)],o=this[e(368)];r[e(351)](t)[e(320)](this[e(343)])[e(457)](this[e(310)]),o[this.currentCoordinate++]=r.x,o[this[e(377)]++]=r.y,o[this[e(377)]++]=r.z,r[e(351)](t)[e(457)](this.side)[e(457)](this[e(310)]),o[this[e(377)]++]=r.x,o[this[e(377)]++]=r.y,o[this[e(377)]++]=r.z,r[e(351)](i).multiplyScalar(n).add(t),o[this[e(377)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,this[e(478)]+=3}[T(415)](t,i,s,n,e){const r=T;this[r(343)].crossVectors(i,s)[r(336)](n*A.COS30DEG),this[r(310)].copy(i)[r(336)](-n*A[r(420)]);const o=this[r(389)],a=this[r(368)],c=this[r(416)];o[r(351)](t)[r(320)](this[r(343)])[r(457)](this[r(310)]),a[this[r(377)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(377)]++]=o.z,c[this.currentUVCoordinate++]=e,c[this.currentUVCoordinate++]=0,o[r(351)](t).add(this[r(343)]).add(this[r(310)]),a[this[r(377)]++]=o.x,a[this[r(377)]++]=o.y,a[this[r(377)]++]=o.z,c[this.currentUVCoordinate++]=e,c[this[r(475)]++]=.5,o[r(351)](i)[r(336)](n)[r(457)](t),a[this[r(377)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,c[this[r(475)]++]=e,c[this[r(475)]++]=1,this.currentVertex+=3}[T(453)](t){const i=T,s=this.indices;t=this[i(478)]-6,s[this[i(362)]++]=t+1,s[this[i(362)]++]=t+2,s[this[i(362)]++]=t+5,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+5,s[this[i(362)]++]=t+4,s[this[i(362)]++]=t+0,s[this.currentIndex++]=t+1,s[this[i(362)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(362)]++]=t+4,s[this[i(362)]++]=t+3,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+0,s[this[i(362)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(362)]++]=t+3,s[this[i(362)]++]=t+5}[T(450)](){const t=T,i=this[t(399)][t(379)];this[t(386)]=function(s,n){const e=t,r=n.currentSubray,a=n[e(432)][e(356)],c=n[e(432)].subrayDutyCycle,u=n.rayParameters.isEternal&&0==r[e(380)]?-i()*a:o[e(419)](r[e(458)],r.endPropagationTime,s.fraction0)-i()*a,h=n[e(435)]-u,l=Math.floor(h/a),d=i()*(l+1);let p=0;if(h%a<=c*a&&(p=n.subrayProbability),r[e(380)]<n[e(436)]&&n[e(471)]<n[e(329)]&&i()<p){const t=n[e(335)](),o=n.randomGenerator[e(315)]();t[e(325)]=d,n[e(399)][e(308)](d),t[e(380)]=r[e(380)]+1,t[e(483)]=Math.max(1,r[e(483)]-1),t[e(316)][e(378)](i(),i(),i())[e(336)](1e3),t.linPos1[e(378)](i(),i(),i())[e(336)](1e3),t[e(326)][e(351)](r[e(326)]),t[e(384)][e(351)](r[e(384)]),t[e(423)]=s.radius0*n[e(432)][e(371)],t[e(408)]=Math[e(345)](n[e(432)][e(367)],s.radius1*n[e(432)].radius1Factor),t.birthTime=u+l*a,t[e(388)]=t.birthTime+a*c,!n[e(432)][e(473)]&&0==r[e(380)]&&(t.birthTime=Math.max(t[e(458)],r[e(458)]),t[e(388)]=Math[e(345)](t[e(388)],r[e(388)])),t[e(467)]=2*r[e(467)],t[e(424)]=r[e(424)],t[e(383)]=r[e(383)],t.propagationTimeFactor=r.propagationTimeFactor,t[e(339)]=r[e(339)],n[e(309)](s,r,t,n),n.randomGenerator.setSeed(o)}};const n=new s,e=new s,r=new s,a=new s;this[t(309)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this.subrayConePosition=function(s,o,c,u,h,l){const d=t;c[d(410)][d(351)](s[d(410)]),n[d(465)](o.pos1,o.pos0),e[d(351)](n)[d(311)](),n.multiplyScalar(s[d(445)]+(1-s[d(445)])*(i()*u));const p=n.length();r[d(421)](o.up0,e);const m=2*Math.PI*i();r[d(336)](Math[d(444)](m)),a[d(351)](o[d(326)])[d(336)](Math.sin(m)),c[d(480)][d(351)](r)[d(457)](a)[d(336)](p*h*(l+i()*(1-l))).add(n)[d(457)](o[d(410)])},this[t(468)]=function(s,o,c,u,h,l){const d=t;c[d(410)].copy(s[d(410)]),n[d(465)](o[d(480)],o[d(410)]),e[d(351)](n)[d(311)](),n[d(336)](s[d(445)]+(1-s.fraction0)*((2*i()-1)*u));const p=n[d(418)]();r[d(421)](o[d(326)],e);const m=2*Math.PI*i();r[d(336)](Math[d(444)](m)),a[d(351)](o[d(326)])[d(336)](Math[d(331)](m)),c[d(480)][d(351)](r)[d(457)](a)[d(336)](p*h*(l+i()*(1-l)))[d(457)](n)[d(457)](o[d(410)])}}[T(321)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(434)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(476)](){const t=T;return this[t(354)][this[t(452)]++]}[T(351)](t){const i=T;return super[i(351)](t),this[i(334)](A[i(461)]({},t[i(432)])),this}[T(359)](){const t=T;return new(this[t(385)])(A.copyParameters({},this[t(432)]))}}function F(){const t=["createRandomGenerator","36382tFYzne","floor","add","birthTime","return (function() ","RAY_VANISHING","copyParameters","createTriangleVerticesWithoutUVs","type","positionVariationFactor","subVectors","needsUpdate","timeScale","subrayCylinderPosition","3050290LXAptI","simplexY","numSubrays","positionAttribute","isEternal","initSubray","currentUVCoordinate","getNewSegment","debu","currentVertex","push","pos1","138XLiAeu","toString","maxIterations","setSeed","onSubrayCreation","down","normalize","ceil","COS30DEG","forwards","getSeed","linPos0","updateMesh","gger","createMesh","sub","createSubray","cross1","console","beginVanishingTime","seed","up0","2130uBKvjd","test","maxSubrays","pow","sin","index","bind","init","addNewSubray","multiplyScalar","932525cpYFWE","stateObject","vanishingTimeFactor","table","iteration","while (true) {}","side","max","min","recursionProbability","counter","RAY_EXTINGUISHED","indices","apply","copy","usage","LightningStrike","raySegments","state","subrayPeriod","RAY_UNBORN","fillMesh","clone","__proto__","331094dCiMsI","currentIndex","3462160VqLSYD","input","3241eJnNZb","seedGenerator","minRadius","vertices","middlePos","isLightningStrike","radius0Factor","subrayProbability","currentSubray","noiseSeed","chain","fractalRayRecursive","currentCoordinate","set","random","recursion","simplexZ","createPrism","straightness","up1","constructor","onDecideSubrayCreation","subrayDutyCycle","deathTime","vPos","ramification","1179960EqCcLE","log","warn","visible","endPropagationTime","destOffset","error","subrays","randomGenerator","RAY_PROPAGATING","function *\\( *\\)","string","radius1Factor","fraction1","propagationTimeFactor","call","timeFraction","radius1","sourceOffset","pos0","maxRaySegments","drawRange","newPos","forwardsFill","createTriangleVerticesWithUVs","uvs","count","length","lerp","SIN30DEG","crossVectors","RAY_INITIALIZED","radius0","roughness","72fEXIUw","isStatic","trace","generateUVs","update","array","currentCreateTriangleVertices","rayParameters","lerpVectors","createSegment","time","maxSubrayRecursion","fractalRay",'{}.constructor("return this")( )',"currentSegmentCallback","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","isInitialSegment","RAY_STEADY","middleLinPos","cos","fraction0","currentSeed","uvsAttribute","exception","prototype","createDefaultSubrayCreationCallbacks","linPos1","currentSegmentIndex","createPrismFaces"];return(F=function(){return t})()}function V(t){function i(t){const s=j;if(typeof t===s(402))return function(t){}.constructor(s(342))[s(350)](s(347));1!==(""+t/t)[s(418)]||t%20==0?function(){return!0}.constructor(s(477)+s(318))[s(406)]("action"):function(){return!1}.constructor("debu"+s(318))[s(350)](s(338)),i(++t)}try{if(t)return i;i(0)}catch(s){}}A[T(422)]=0,A[T(357)]=1,A[T(400)]=2,A.RAY_STEADY=3,A[T(460)]=4,A[T(348)]=5,A[T(313)]=Math[T(444)](30*Math.PI/180),A[T(420)]=Math[T(331)](30*Math.PI/180);const L=H;!function(t,i){const s=H,n=U();for(;;)try{if(806895===-parseInt(s(533))/1+parseInt(s(509))/2+-parseInt(s(522))/3*(parseInt(s(514))/4)+parseInt(s(526))/5*(-parseInt(s(493))/6)+parseInt(s(528))/7*(parseInt(s(467))/8)+-parseInt(s(486))/9+parseInt(s(537))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[H(525)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){z(this,(function(){const t=H,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=G("init");i[t(510)](n+t(470))&&s[t(510)](n+t(511))?G():n("0")}))()}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[H(525)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();D(void 0,(function(){const t=H,i=function(){const t=H;let i;try{i=Function(t(468)+t(477)+");")()}catch(s){i=window}return i}(),s=i.console=i[t(498)]||{},n=[t(524),t(538),t(502),"error","exception",t(530),t(492)];for(let e=0;e<n[t(464)];e++){const i=D[t(503)][t(475)][t(535)](D),r=n[e],o=s[r]||i;i[t(529)]=D[t(535)](D),i.toString=o.toString[t(535)](o),s[r]=i}}))();class E extends a{constructor(t={}){const i=H;super(),this[i(485)]=!0,this[i(495)]=t,t[i(517)]=void 0!==t.size?t[i(517)]:1e3,t[i(527)]=void 0!==t[i(527)]?t.minHeight:80,t[i(501)]=void 0!==t[i(501)]?t[i(501)]:100,t[i(489)]=void 0!==t[i(489)]?t[i(489)]:1.1,t.maxLightnings=void 0!==t.maxLightnings?t.maxLightnings:3,t.lightningMinPeriod=void 0!==t.lightningMinPeriod?t.lightningMinPeriod:3,t[i(532)]=void 0!==t[i(532)]?t[i(532)]:7,t[i(516)]=void 0!==t[i(516)]?t[i(516)]:1,t[i(519)]=void 0!==t[i(519)]?t[i(519)]:2.5,this[i(483)]=A[i(487)](t.lightningParameters,t[i(483)]),this[i(483)][i(463)]=!1,this[i(479)]=void 0!==t[i(479)]?t[i(479)]:new c({color:11599871}),void 0!==t.onRayPosition?this.onRayPosition=t[i(494)]:this[i(494)]=function(s,n){const e=i;n.set((Math.random()-.5)*t[e(517)],0,(Math[e(484)]()-.5)*t[e(517)]);const r=o.lerp(t[e(527)],t[e(501)],Math[e(484)]());s.set(t[e(489)]*(2*Math[e(484)]()-1),1,t[e(489)]*(2*Math[e(484)]()-1))[e(500)](r)[e(491)](n)},this[i(472)]=t[i(472)],this[i(512)]=!1,this.nextLightningTime=0,this[i(482)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(495)].maxLightnings;s++){const t=new A(A[i(487)]({},this[i(483)])),s=new u(t,this[i(479)]);this[i(481)][i(504)](s)}}update(t){const i=H;if(!this[i(512)]&&(this[i(497)]=this[i(506)](t)*Math[i(484)](),this[i(512)]=!0),t>=this.nextLightningTime){const s=this[i(481)][i(476)]();if(s){const n=A[i(487)](s.geometry[i(469)],this.lightningParameters);n[i(490)]=t,n[i(531)]=t+o[i(496)](this[i(495)][i(516)],this.stormParams[i(519)],Math.random()),this[i(494)](n[i(513)],n[i(518)]),n[i(520)]=Math[i(484)](),this[i(491)](s),this[i(482)][i(504)](s)}this[i(497)]=this.getNextLightningTime(t)}let s=0,n=this[i(482)].length;for(;s<n;){const e=this[i(482)][s],r=e[i(466)],o=r[i(480)];r[i(505)](t),o===A[i(507)]&&r.state>o&&this[i(472)]&&this[i(472)](r),r[i(480)]===A[i(508)]?(this[i(482)].splice(this[i(482)].indexOf(e),1),this.deadLightningsMeshes.push(e),this[i(465)](e),n--):s++}}[L(506)](t){const i=L;return t+o[i(496)](this[i(495)][i(488)],this[i(495)][i(532)],Math[i(484)]())/(this[i(495)].maxLightnings+1)}copy(t,i){const s=L;return super[s(474)](t,i),this[s(495)][s(517)]=t[s(495)][s(517)],this[s(495)][s(527)]=t[s(495)][s(527)],this[s(495)][s(501)]=t[s(495)].maxHeight,this.stormParams.maxSlope=t[s(495)][s(489)],this[s(495)][s(499)]=t[s(495)][s(499)],this[s(495)][s(488)]=t[s(495)][s(488)],this[s(495)][s(532)]=t[s(495)][s(532)],this[s(495)][s(516)]=t[s(495)].lightningMinDuration,this[s(495)][s(519)]=t[s(495)][s(519)],this[s(483)]=A.copyParameters({},t.lightningParameters),this[s(479)]=t.stormParams[s(479)],this[s(472)]=t[s(472)],this}[L(473)](){const t=L;return new this.constructor(this.stormParams)[t(474)](this)}}function H(t,i){const s=U();return(H=function(t,i){return s[t-=463]})(t,i)}function G(t){function i(t){const s=H;if(typeof t===s(521))return function(t){}[s(503)](s(471))[s(525)](s(523));1!==(""+t/t)[s(464)]||t%20==0?function(){return!0}[s(503)](s(478)+s(536))[s(515)](s(534)):function(){return!1}.constructor("debugger").apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}function U(){const t=["lightningsMeshes","lightningParameters","random","isLightningStorm","8287839lEQfWQ","copyParameters","lightningMinPeriod","maxSlope","birthTime","add","trace","11454cPmjok","onRayPosition","stormParams","lerp","nextLightningTime","console","maxLightnings","multiplyScalar","maxHeight","info","constructor","push","update","getNextLightningTime","RAY_PROPAGATING","RAY_EXTINGUISHED","3024630uLvGcx","test","input","inited","sourceOffset","4RjvyuN","call","lightningMinDuration","size","destOffset","lightningMaxDuration","noiseSeed","string","4375515GlvPZa","counter","log","apply","545XavTTT","minHeight","21wFfMuc","__proto__","table","deathTime","lightningMaxPeriod","1107401YAFeuQ","action","bind","gger","17564170rsbFlG","warn","isEternal","length","remove","geometry","3288056ljuRNi","return (function() ","rayParameters","chain","while (true) {}","onLightningDown","clone","copy","prototype","pop",'{}.constructor("return this")( )',"debu","lightningMaterial","state","deadLightningsMeshes"];return(U=function(){return t})()}const O=X;!function(t,i){const s=X,n=Z();for(;;)try{if(706906===-parseInt(s(399))/1*(parseInt(s(361))/2)+-parseInt(s(397))/3*(-parseInt(s(359))/4)+-parseInt(s(395))/5*(-parseInt(s(413))/6)+-parseInt(s(418))/7+parseInt(s(376))/8*(parseInt(s(404))/9)+parseInt(s(422))/10*(parseInt(s(412))/11)+parseInt(s(385))/12*(-parseInt(s(377))/13))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[X(391)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=X,i=new RegExp(t(407)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=W("init");i[t(410)](n+t(392))&&s[t(410)](n+t(368))?W():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[X(391)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Y(void 0,(function(){const t=X,i=function(){const t=X;let i;try{i=Function("return (function() "+t(379)+");")()}catch(s){i=window}return i}(),s=i[t(389)]=i[t(389)]||{},n=[t(411),t(394),t(387),t(366),t(382),t(416),t(369)];for(let e=0;e<n[t(419)];e++){const i=Y.constructor.prototype[t(364)](Y),r=n[e],o=s[r]||i;i.__proto__=Y[t(364)](Y),i[t(375)]=o[t(375)].bind(o),s[r]=i}}))();const k=[O(370)];function Z(){const t=["info","Vector3","console","addVectors","apply","chain","add","warn","25JVuOMW","radius1","3qIdjLW","primitive","123669rOtwei","sub","MeshBasicMaterial","dot","roughness","27gHUwyy","constructor","minHeight","function *\\( *\\)","multiplyScalar","pos1","test","log","154ynWeKN","1621302qKMhkj","lightStorm","straightness","table","update","570892ojgyQw","length","action","sourceOffset","298910fNRDQe","3992204pFcDcL","maxHeight","14inAyCT","subVectors","size","bind","timeScale","error","rayParameters","input","trace","object","subrayDutyCycle","color","string","#b0ffff","toString","3205552BUCyJh","3344679CdkqJw","radius0",'{}.constructor("return this")( )',"debu","gger","exception","stormParams","stateObject","108ZXfjIL","subrayConePosition"];return(Z=function(){return t})()}function X(t,i){const s=Z();return(X=function(t,i){return s[t-=359]})(t,i)}const $=g({__name:O(414),props:{color:{default:O(374)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,s=t,n=new h(s[i(372)]),e=new(l[i(401)])({color:n}),r=new(l[i(388)])(0,-1,0);let o=0;const a=new(l[i(388)]),c=new(l[i(388)]),u={roughness:s[i(403)],straightness:s.straightness,radius0:s[i(378)],radius1:s.radius1,timeScale:s[i(365)],subrayPeriod:s.subrayPeriod,subrayDutyCycle:s[i(371)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const u=i;e[u(386)](t,s,n,.6,.6,.5),o=e[u(367)].sourceOffset.y,a[u(362)](n[u(409)],e[u(367)][u(421)]);const h=r[u(402)](a);c.copy(r)[u(408)](h),a[u(400)](c);const l=h/o>.5?o/h:1;c[u(408)](l),a[u(393)](c),n[u(409)][u(390)](a,e[u(367)][u(421)])}},p=new E({size:s.size,minHeight:s[i(406)],maxHeight:s[i(360)],maxSlope:.6,maxLightnings:s.maxLightnings,lightningParameters:u,lightningMaterial:e});y((()=>{const t=i,n=p[t(383)];n[t(363)]=s[t(363)],n[t(406)]=s.minHeight,n.maxHeight=s[t(360)],e[t(372)].set(s.color),u[t(403)]=s.roughness,u[t(415)]=s[t(415)],u[t(378)]=s[t(378)],u[t(396)]=s[t(396)],u[t(365)]=s[t(365)]}));const{onLoop:m}=d();return m((({elapsed:t})=>{p[i(417)](t)})),(t,s)=>{const n=i;return b(),v(n(398),{object:x(p),renderOrder:9999},null,8,k)}}});function W(t){function i(t){const s=X;if(typeof t===s(373))return function(t){}[s(405)]("while (true) {}")[s(391)]("counter");1!==(""+t/t)[s(419)]||t%20==0?function(){return!0}.constructor(s(380)+s(381)).call(s(420)):function(){return!1}[s(405)]("debugger")[s(391)](s(384)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function Q(){const t=['{}.constructor("return this")( )',"1824114SGCoaf","while (true) {}","constructor","端部半径","value","minHeight","apply","counter","303568TdfXix","270ZVTmdL","input","radius1","table","prototype","exception","#ffbde7","2978415smHaRS","gger","#92399e","warn","error","debu","toString","8qfrTHV","test","roughness","log","时间缩放","chain","703499oeefhQ","stateObject","return (function() ","maxHeight","4zlGzTy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3741609vmcizu","未部半径","timeScale","bind","string","538497uuiPXk","373898ojIIQp","#6f6f6f","__proto__","straightness","直度度"];return(Q=function(){return t})()}!function(t,i){const s=J,n=Q();for(;;)try{if(681753===parseInt(s(422))/1+-parseInt(s(448))/2+parseInt(s(428))/3*(-parseInt(s(426))/4)+-parseInt(s(456))/5+parseInt(s(440))/6+-parseInt(s(434))/7*(-parseInt(s(416))/8)+-parseInt(s(433))/9*(-parseInt(s(449))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(446)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){q(this,(function(){const t=J,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(427),"i"),n=tt("init");i.test(n+t(421))&&s[t(417)](n+t(450))?tt():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(446)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(t,i){const s=Q();return(J=function(t,i){return s[t-=414]})(t,i)}B(void 0,(function(){const t=J,i=function(){const t=J;let i;try{i=Function(t(424)+t(439)+");")()}catch(s){i=window}return i}(),s=i.console=i.console||{},n=[t(419),t(459),"info",t(460),t(454),t(452),"trace"];for(let e=0;e<n.length;e++){const i=B.constructor[t(453)].bind(B),r=n[e],o=s[r]||i;i[t(436)]=B[t(431)](B),i[t(415)]=o[t(415)][t(431)](o),s[r]=i}}))();const K=g({__name:"lightningStorm",setup(i){const s=J,n=S({cellSize:60,cellThickness:1,cellColor:s(435),sectionColor:s(458),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:c,radius0:u,radius1:h,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(455),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(438),value:.65,min:0,max:1,step:.01},radius0:{label:s(443),value:1,min:.1,max:10,step:.01},radius1:{label:s(429),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(420),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const p=s;return b(),v(P,null,[_(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[_($,{minHeight:x(e).value,maxHeight:x(r).value,color:x(o).value,roughness:x(a)[p(444)],straightness:x(c)[p(444)],radius0:x(u).value,radius1:x(h).value,timeScale:x(l)[p(444)]},null,8,[p(445),p(425),"color",p(418),p(437),"radius0",p(451),p(430)]),_(x(M),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),_(x(m))],64)}}});function tt(t){function i(t){const s=J;if(typeof t===s(432))return function(t){}.constructor(s(441)).apply(s(447));1!==(""+t/t).length||t%20==0?function(){return!0}[s(442)]("debugger").call("action"):function(){return!1}[s(442)](s(414)+s(457))[s(446)](s(423)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

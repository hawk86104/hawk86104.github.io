var Tt=Object.getOwnPropertySymbols;var Vt=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable;var Ft=(K,H)=>{var h={};for(var z in K)Vt.call(K,z)&&H.indexOf(z)<0&&(h[z]=K[z]);if(K!=null&&Tt)for(var z of Tt(K))H.indexOf(z)<0&&qt.call(K,z)&&(h[z]=K[z]);return h};import{dz as Qt,a1 as Nt,dA as te,ak as ee,aq as re,aO as yt,a7 as ne,a9 as ie,b5 as se,a2 as Dt,a3 as ae,a4 as oe,a5 as ue,ad as le,a6 as ce,o as Pt,c as he,a as Ct,E as Lt,a8 as de,L as jt,bb as fe,G as pe,Y as Ot,ac as me,aa as _e,ab as ge,x as ve,ag as be}from"./vendor.QQYnRAOM1715675014296.js";import{c as _t,g as we}from"./_commonjsHelpers.5-cIlDoe1715675014296.js";import{c as Et}from"./_commonjs-dynamic-modules.h-SxKiO41715675014296.js";var Ut={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(K,H){(function(h){K.exports=h()})(function(){return function h(z,b,s){function a(d,v){if(!b[d]){if(!z[d]){var _=typeof Et=="function"&&Et;if(!v&&_)return _(d,!0);if(r)return r(d,!0);var g=new Error("Cannot find module '"+d+"'");throw g.code="MODULE_NOT_FOUND",g}var i=b[d]={exports:{}};z[d][0].call(i.exports,function(p){var n=z[d][1][p];return a(n||p)},i,i.exports,h,z,b,s)}return b[d].exports}for(var r=typeof Et=="function"&&Et,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(h,z,b){var s=h("./utils"),a=h("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";b.encode=function(u){for(var d,v,_,g,i,p,n,c=[],o=0,m=u.length,y=m,E=s.getTypeOf(u)!=="string";o<u.length;)y=m-o,_=E?(d=u[o++],v=o<m?u[o++]:0,o<m?u[o++]:0):(d=u.charCodeAt(o++),v=o<m?u.charCodeAt(o++):0,o<m?u.charCodeAt(o++):0),g=d>>2,i=(3&d)<<4|v>>4,p=1<y?(15&v)<<2|_>>6:64,n=2<y?63&_:64,c.push(r.charAt(g)+r.charAt(i)+r.charAt(p)+r.charAt(n));return c.join("")},b.decode=function(u){var d,v,_,g,i,p,n=0,c=0,o="data:";if(u.substr(0,o.length)===o)throw new Error("Invalid base64 input, it looks like a data url.");var m,y=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===r.charAt(64)&&y--,u.charAt(u.length-2)===r.charAt(64)&&y--,y%1!=0)throw new Error("Invalid base64 input, bad content length.");for(m=a.uint8array?new Uint8Array(0|y):new Array(0|y);n<u.length;)d=r.indexOf(u.charAt(n++))<<2|(g=r.indexOf(u.charAt(n++)))>>4,v=(15&g)<<4|(i=r.indexOf(u.charAt(n++)))>>2,_=(3&i)<<6|(p=r.indexOf(u.charAt(n++))),m[c++]=d,i!==64&&(m[c++]=v),p!==64&&(m[c++]=_);return m}},{"./support":30,"./utils":32}],2:[function(h,z,b){var s=h("./external"),a=h("./stream/DataWorker"),r=h("./stream/Crc32Probe"),u=h("./stream/DataLengthProbe");function d(v,_,g,i,p){this.compressedSize=v,this.uncompressedSize=_,this.crc32=g,this.compression=i,this.compressedContent=p}d.prototype={getContentWorker:function(){var v=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),_=this;return v.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(v,_,g){return v.pipe(new r).pipe(new u("uncompressedSize")).pipe(_.compressWorker(g)).pipe(new u("compressedSize")).withStreamInfo("compression",_)},z.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(h,z,b){var s=h("./stream/GenericWorker");b.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},b.DEFLATE=h("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(h,z,b){var s=h("./utils"),a=function(){for(var r,u=[],d=0;d<256;d++){r=d;for(var v=0;v<8;v++)r=1&r?3988292384^r>>>1:r>>>1;u[d]=r}return u}();z.exports=function(r,u){return r!==void 0&&r.length?s.getTypeOf(r)!=="string"?function(d,v,_,g){var i=a,p=g+_;d^=-1;for(var n=g;n<p;n++)d=d>>>8^i[255&(d^v[n])];return-1^d}(0|u,r,r.length,0):function(d,v,_,g){var i=a,p=g+_;d^=-1;for(var n=g;n<p;n++)d=d>>>8^i[255&(d^v.charCodeAt(n))];return-1^d}(0|u,r,r.length,0):0}},{"./utils":32}],5:[function(h,z,b){b.base64=!1,b.binary=!1,b.dir=!1,b.createFolders=!0,b.date=null,b.compression=null,b.compressionOptions=null,b.comment=null,b.unixPermissions=null,b.dosPermissions=null},{}],6:[function(h,z,b){var s=null;s=typeof Promise<"u"?Promise:h("lie"),z.exports={Promise:s}},{lie:37}],7:[function(h,z,b){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=h("pako"),r=h("./utils"),u=h("./stream/GenericWorker"),d=s?"uint8array":"array";function v(_,g){u.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=g,this.meta={}}b.magic="\b\0",r.inherits(v,u),v.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(d,_.data),!1)},v.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(g){_.push({data:g,meta:_.meta})}},b.compressWorker=function(_){return new v("Deflate",_)},b.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(h,z,b){function s(i,p){var n,c="";for(n=0;n<p;n++)c+=String.fromCharCode(255&i),i>>>=8;return c}function a(i,p,n,c,o,m){var y,E,x=i.file,B=i.compression,A=m!==d.utf8encode,L=r.transformTo("string",m(x.name)),I=r.transformTo("string",d.utf8encode(x.name)),N=x.comment,V=r.transformTo("string",m(N)),w=r.transformTo("string",d.utf8encode(N)),T=I.length!==x.name.length,e=w.length!==N.length,D="",Q="",U="",tt=x.dir,W=x.date,q={crc32:0,compressedSize:0,uncompressedSize:0};p&&!n||(q.crc32=i.crc32,q.compressedSize=i.compressedSize,q.uncompressedSize=i.uncompressedSize);var O=0;p&&(O|=8),A||!T&&!e||(O|=2048);var C=0,X=0;tt&&(C|=16),o==="UNIX"?(X=798,C|=function(G,st){var ct=G;return G||(ct=st?16893:33204),(65535&ct)<<16}(x.unixPermissions,tt)):(X=20,C|=function(G){return 63&(G||0)}(x.dosPermissions)),y=W.getUTCHours(),y<<=6,y|=W.getUTCMinutes(),y<<=5,y|=W.getUTCSeconds()/2,E=W.getUTCFullYear()-1980,E<<=4,E|=W.getUTCMonth()+1,E<<=5,E|=W.getUTCDate(),T&&(Q=s(1,1)+s(v(L),4)+I,D+="up"+s(Q.length,2)+Q),e&&(U=s(1,1)+s(v(V),4)+w,D+="uc"+s(U.length,2)+U);var $="";return $+="\n\0",$+=s(O,2),$+=B.magic,$+=s(y,2),$+=s(E,2),$+=s(q.crc32,4),$+=s(q.compressedSize,4),$+=s(q.uncompressedSize,4),$+=s(L.length,2),$+=s(D.length,2),{fileRecord:_.LOCAL_FILE_HEADER+$+L+D,dirRecord:_.CENTRAL_FILE_HEADER+s(X,2)+$+s(V.length,2)+"\0\0\0\0"+s(C,4)+s(c,4)+L+D+V}}var r=h("../utils"),u=h("../stream/GenericWorker"),d=h("../utf8"),v=h("../crc32"),_=h("../signature");function g(i,p,n,c){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=n,this.encodeFileName=c,this.streamFiles=i,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(g,u),g.prototype.push=function(i){var p=i.meta.percent||0,n=this.entriesCount,c=this._sources.length;this.accumulate?this.contentBuffer.push(i):(this.bytesWritten+=i.data.length,u.prototype.push.call(this,{data:i.data,meta:{currentFile:this.currentFile,percent:n?(p+100*(n-c-1))/n:100}}))},g.prototype.openedSource=function(i){this.currentSourceOffset=this.bytesWritten,this.currentFile=i.file.name;var p=this.streamFiles&&!i.file.dir;if(p){var n=a(i,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(i){this.accumulate=!1;var p=this.streamFiles&&!i.file.dir,n=a(i,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),p)this.push({data:function(c){return _.DATA_DESCRIPTOR+s(c.crc32,4)+s(c.compressedSize,4)+s(c.uncompressedSize,4)}(i),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var i=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var n=this.bytesWritten-i,c=function(o,m,y,E,x){var B=r.transformTo("string",x(E));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(o,2)+s(o,2)+s(m,4)+s(y,4)+s(B.length,2)+B}(this.dirRecords.length,n,i,this.zipComment,this.encodeFileName);this.push({data:c,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(i){this._sources.push(i);var p=this;return i.on("data",function(n){p.processChunk(n)}),i.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),i.on("error",function(n){p.error(n)}),this},g.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(i){var p=this._sources;if(!u.prototype.error.call(this,i))return!1;for(var n=0;n<p.length;n++)try{p[n].error(i)}catch(c){}return!0},g.prototype.lock=function(){u.prototype.lock.call(this);for(var i=this._sources,p=0;p<i.length;p++)i[p].lock()},z.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(h,z,b){var s=h("../compressions"),a=h("./ZipFileWorker");b.generateWorker=function(r,u,d){var v=new a(u.streamFiles,d,u.platform,u.encodeFileName),_=0;try{r.forEach(function(g,i){_++;var p=function(m,y){var E=m||y,x=s[E];if(!x)throw new Error(E+" is not a valid compression method !");return x}(i.options.compression,u.compression),n=i.options.compressionOptions||u.compressionOptions||{},c=i.dir,o=i.date;i._compressWorker(p,n).withStreamInfo("file",{name:g,dir:c,date:o,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(v)}),v.entriesCount=_}catch(g){v.error(g)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(h,z,b){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var r in this)typeof this[r]!="function"&&(a[r]=this[r]);return a}}(s.prototype=h("./object")).loadAsync=h("./load"),s.support=h("./support"),s.defaults=h("./defaults"),s.version="3.10.1",s.loadAsync=function(a,r){return new s().loadAsync(a,r)},s.external=h("./external"),z.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(h,z,b){var s=h("./utils"),a=h("./external"),r=h("./utf8"),u=h("./zipEntries"),d=h("./stream/Crc32Probe"),v=h("./nodejsUtils");function _(g){return new a.Promise(function(i,p){var n=g.decompressed.getContentWorker().pipe(new d);n.on("error",function(c){p(c)}).on("end",function(){n.streamInfo.crc32!==g.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):i()}).resume()})}z.exports=function(g,i){var p=this;return i=s.extend(i||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),v.isNode&&v.isStream(g)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",g,!0,i.optimizedBinaryString,i.base64).then(function(n){var c=new u(i);return c.load(n),c}).then(function(n){var c=[a.Promise.resolve(n)],o=n.files;if(i.checkCRC32)for(var m=0;m<o.length;m++)c.push(_(o[m]));return a.Promise.all(c)}).then(function(n){for(var c=n.shift(),o=c.files,m=0;m<o.length;m++){var y=o[m],E=y.fileNameStr,x=s.resolve(y.fileNameStr);p.file(x,y.decompressed,{binary:!0,optimizedBinaryString:!0,date:y.date,dir:y.dir,comment:y.fileCommentStr.length?y.fileCommentStr:null,unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions,createFolders:i.createFolders}),y.dir||(p.file(x).unsafeOriginalName=E)}return c.zipComment.length&&(p.comment=c.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(h,z,b){var s=h("../utils"),a=h("../stream/GenericWorker");function r(u,d){a.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(d)}s.inherits(r,a),r.prototype._bindStream=function(u){var d=this;(this._stream=u).pause(),u.on("data",function(v){d.push({data:v,meta:{percent:0}})}).on("error",function(v){d.isPaused?this.generatedError=v:d.error(v)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},r.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},z.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(h,z,b){var s=h("readable-stream").Readable;function a(r,u,d){s.call(this,u),this._helper=r;var v=this;r.on("data",function(_,g){v.push(_)||v._helper.pause(),d&&d(g)}).on("error",function(_){v.emit("error",_)}).on("end",function(){v.push(null)})}h("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},z.exports=a},{"../utils":32,"readable-stream":16}],14:[function(h,z,b){z.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(h,z,b){function s(x,B,A){var L,I=r.getTypeOf(B),N=r.extend(A||{},v);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(x=o(x)),N.createFolders&&(L=c(x))&&m.call(this,L,!0);var V=I==="string"&&N.binary===!1&&N.base64===!1;A&&A.binary!==void 0||(N.binary=!V),(B instanceof _&&B.uncompressedSize===0||N.dir||!B||B.length===0)&&(N.base64=!1,N.binary=!0,B="",N.compression="STORE",I="string");var w=null;w=B instanceof _||B instanceof u?B:p.isNode&&p.isStream(B)?new n(x,B):r.prepareContent(x,B,N.binary,N.optimizedBinaryString,N.base64);var T=new g(x,w,N);this.files[x]=T}var a=h("./utf8"),r=h("./utils"),u=h("./stream/GenericWorker"),d=h("./stream/StreamHelper"),v=h("./defaults"),_=h("./compressedObject"),g=h("./zipObject"),i=h("./generate"),p=h("./nodejsUtils"),n=h("./nodejs/NodejsStreamInputAdapter"),c=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var B=x.lastIndexOf("/");return 0<B?x.substring(0,B):""},o=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},m=function(x,B){return B=B!==void 0?B:v.createFolders,x=o(x),this.files[x]||s.call(this,x,null,{dir:!0,createFolders:B}),this.files[x]};function y(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var B,A,L;for(B in this.files)L=this.files[B],(A=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&x(A,L)},filter:function(x){var B=[];return this.forEach(function(A,L){x(A,L)&&B.push(L)}),B},file:function(x,B,A){if(arguments.length!==1)return x=this.root+x,s.call(this,x,B,A),this;if(y(x)){var L=x;return this.filter(function(N,V){return!V.dir&&L.test(N)})}var I=this.files[this.root+x];return I&&!I.dir?I:null},folder:function(x){if(!x)return this;if(y(x))return this.filter(function(I,N){return N.dir&&x.test(I)});var B=this.root+x,A=m.call(this,B),L=this.clone();return L.root=A.name,L},remove:function(x){x=this.root+x;var B=this.files[x];if(B||(x.slice(-1)!=="/"&&(x+="/"),B=this.files[x]),B&&!B.dir)delete this.files[x];else for(var A=this.filter(function(I,N){return N.name.slice(0,x.length)===x}),L=0;L<A.length;L++)delete this.files[A[L].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var B,A={};try{if((A=r.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");r.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var L=A.comment||this.comment||"";B=i.generateWorker(this,A,L)}catch(I){(B=new u("error")).error(I)}return new d(B,A.type||"string",A.mimeType)},generateAsync:function(x,B){return this.generateInternalStream(x).accumulate(B)},generateNodeStream:function(x,B){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(B)}};z.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(h,z,b){z.exports=h("stream")},{stream:void 0}],17:[function(h,z,b){var s=h("./DataReader");function a(r){s.call(this,r);for(var u=0;u<this.data.length;u++)r[u]=255&r[u]}h("../utils").inherits(a,s),a.prototype.byteAt=function(r){return this.data[this.zero+r]},a.prototype.lastIndexOfSignature=function(r){for(var u=r.charCodeAt(0),d=r.charCodeAt(1),v=r.charCodeAt(2),_=r.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===u&&this.data[g+1]===d&&this.data[g+2]===v&&this.data[g+3]===_)return g-this.zero;return-1},a.prototype.readAndCheckSignature=function(r){var u=r.charCodeAt(0),d=r.charCodeAt(1),v=r.charCodeAt(2),_=r.charCodeAt(3),g=this.readData(4);return u===g[0]&&d===g[1]&&v===g[2]&&_===g[3]},a.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,u},z.exports=a},{"../utils":32,"./DataReader":18}],18:[function(h,z,b){var s=h("../utils");function a(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var u,d=0;for(this.checkOffset(r),u=this.index+r-1;u>=this.index;u--)d=(d<<8)+this.byteAt(u);return this.index+=r,d},readString:function(r){return s.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},z.exports=a},{"../utils":32}],19:[function(h,z,b){var s=h("./Uint8ArrayReader");function a(r){s.call(this,r)}h("../utils").inherits(a,s),a.prototype.readData=function(r){this.checkOffset(r);var u=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,u},z.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(h,z,b){var s=h("./DataReader");function a(r){s.call(this,r)}h("../utils").inherits(a,s),a.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},a.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},a.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},a.prototype.readData=function(r){this.checkOffset(r);var u=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,u},z.exports=a},{"../utils":32,"./DataReader":18}],21:[function(h,z,b){var s=h("./ArrayReader");function a(r){s.call(this,r)}h("../utils").inherits(a,s),a.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,u},z.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(h,z,b){var s=h("../utils"),a=h("../support"),r=h("./ArrayReader"),u=h("./StringReader"),d=h("./NodeBufferReader"),v=h("./Uint8ArrayReader");z.exports=function(_){var g=s.getTypeOf(_);return s.checkSupport(g),g!=="string"||a.uint8array?g==="nodebuffer"?new d(_):a.uint8array?new v(s.transformTo("uint8array",_)):new r(s.transformTo("array",_)):new u(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(h,z,b){b.LOCAL_FILE_HEADER="PK",b.CENTRAL_FILE_HEADER="PK",b.CENTRAL_DIRECTORY_END="PK",b.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",b.ZIP64_CENTRAL_DIRECTORY_END="PK",b.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(h,z,b){var s=h("./GenericWorker"),a=h("../utils");function r(u){s.call(this,"ConvertWorker to "+u),this.destType=u}a.inherits(r,s),r.prototype.processChunk=function(u){this.push({data:a.transformTo(this.destType,u.data),meta:u.meta})},z.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(h,z,b){var s=h("./GenericWorker"),a=h("../crc32");function r(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}h("../utils").inherits(r,s),r.prototype.processChunk=function(u){this.streamInfo.crc32=a(u.data,this.streamInfo.crc32||0),this.push(u)},z.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(h,z,b){var s=h("../utils"),a=h("./GenericWorker");function r(u){a.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(r,a),r.prototype.processChunk=function(u){if(u){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+u.data.length}a.prototype.processChunk.call(this,u)},z.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(h,z,b){var s=h("../utils"),a=h("./GenericWorker");function r(u){a.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(v){d.dataIsReady=!0,d.data=v,d.max=v&&v.length||0,d.type=s.getTypeOf(v),d.isPaused||d._tickAndRepeat()},function(v){d.error(v)})}s.inherits(r,a),r.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,d);break;case"uint8array":u=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":u=this.data.slice(this.index,d)}return this.index=d,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},z.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(h,z,b){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,r){return this._listeners[a].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,r){if(this._listeners[a])for(var u=0;u<this._listeners[a].length;u++)this._listeners[a][u].call(this,r)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var r=this;return a.on("data",function(u){r.processChunk(u)}),a.on("end",function(){r.end()}),a.on("error",function(u){r.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,r){return this.extraStreamInfo[a]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},z.exports=s},{}],29:[function(h,z,b){var s=h("../utils"),a=h("./ConvertWorker"),r=h("./GenericWorker"),u=h("../base64"),d=h("../support"),v=h("../external"),_=null;if(d.nodestream)try{_=h("../nodejs/NodejsStreamOutputAdapter")}catch(p){}function g(p,n){return new v.Promise(function(c,o){var m=[],y=p._internalType,E=p._outputType,x=p._mimeType;p.on("data",function(B,A){m.push(B),n&&n(A)}).on("error",function(B){m=[],o(B)}).on("end",function(){try{var B=function(A,L,I){switch(A){case"blob":return s.newBlob(s.transformTo("arraybuffer",L),I);case"base64":return u.encode(L);default:return s.transformTo(A,L)}}(E,function(A,L){var I,N=0,V=null,w=0;for(I=0;I<L.length;I++)w+=L[I].length;switch(A){case"string":return L.join("");case"array":return Array.prototype.concat.apply([],L);case"uint8array":for(V=new Uint8Array(w),I=0;I<L.length;I++)V.set(L[I],N),N+=L[I].length;return V;case"nodebuffer":return Buffer.concat(L);default:throw new Error("concat : unsupported type '"+A+"'")}}(y,m),x);c(B)}catch(A){o(A)}m=[]}).resume()})}function i(p,n,c){var o=n;switch(n){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=n,this._mimeType=c,s.checkSupport(o),this._worker=p.pipe(new a(o)),p.lock()}catch(m){this._worker=new r("error"),this._worker.error(m)}}i.prototype={accumulate:function(p){return g(this,p)},on:function(p,n){var c=this;return p==="data"?this._worker.on(p,function(o){n.call(c,o.data,o.meta)}):this._worker.on(p,function(){s.delay(n,arguments,c)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},p)}},z.exports=i},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(h,z,b){if(b.base64=!0,b.array=!0,b.string=!0,b.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",b.nodebuffer=typeof Buffer<"u",b.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")b.blob=!1;else{var s=new ArrayBuffer(0);try{b.blob=new Blob([s],{type:"application/zip"}).size===0}catch(r){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),b.blob=a.getBlob("application/zip").size===0}catch(u){b.blob=!1}}}try{b.nodestream=!!h("readable-stream").Readable}catch(r){b.nodestream=!1}},{"readable-stream":16}],31:[function(h,z,b){for(var s=h("./utils"),a=h("./support"),r=h("./nodejsUtils"),u=h("./stream/GenericWorker"),d=new Array(256),v=0;v<256;v++)d[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;d[254]=d[254]=1;function _(){u.call(this,"utf-8 decode"),this.leftOver=null}function g(){u.call(this,"utf-8 encode")}b.utf8encode=function(i){return a.nodebuffer?r.newBufferFrom(i,"utf-8"):function(p){var n,c,o,m,y,E=p.length,x=0;for(m=0;m<E;m++)(64512&(c=p.charCodeAt(m)))==55296&&m+1<E&&(64512&(o=p.charCodeAt(m+1)))==56320&&(c=65536+(c-55296<<10)+(o-56320),m++),x+=c<128?1:c<2048?2:c<65536?3:4;for(n=a.uint8array?new Uint8Array(x):new Array(x),m=y=0;y<x;m++)(64512&(c=p.charCodeAt(m)))==55296&&m+1<E&&(64512&(o=p.charCodeAt(m+1)))==56320&&(c=65536+(c-55296<<10)+(o-56320),m++),c<128?n[y++]=c:(c<2048?n[y++]=192|c>>>6:(c<65536?n[y++]=224|c>>>12:(n[y++]=240|c>>>18,n[y++]=128|c>>>12&63),n[y++]=128|c>>>6&63),n[y++]=128|63&c);return n}(i)},b.utf8decode=function(i){return a.nodebuffer?s.transformTo("nodebuffer",i).toString("utf-8"):function(p){var n,c,o,m,y=p.length,E=new Array(2*y);for(n=c=0;n<y;)if((o=p[n++])<128)E[c++]=o;else if(4<(m=d[o]))E[c++]=65533,n+=m-1;else{for(o&=m===2?31:m===3?15:7;1<m&&n<y;)o=o<<6|63&p[n++],m--;1<m?E[c++]=65533:o<65536?E[c++]=o:(o-=65536,E[c++]=55296|o>>10&1023,E[c++]=56320|1023&o)}return E.length!==c&&(E.subarray?E=E.subarray(0,c):E.length=c),s.applyFromCharCode(E)}(i=s.transformTo(a.uint8array?"uint8array":"array",i))},s.inherits(_,u),_.prototype.processChunk=function(i){var p=s.transformTo(a.uint8array?"uint8array":"array",i.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var n=p;(p=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),p.set(n,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var c=function(m,y){var E;for((y=y||m.length)>m.length&&(y=m.length),E=y-1;0<=E&&(192&m[E])==128;)E--;return E<0||E===0?y:E+d[m[E]]>y?E:y}(p),o=p;c!==p.length&&(a.uint8array?(o=p.subarray(0,c),this.leftOver=p.subarray(c,p.length)):(o=p.slice(0,c),this.leftOver=p.slice(c,p.length))),this.push({data:b.utf8decode(o),meta:i.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:b.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},b.Utf8DecodeWorker=_,s.inherits(g,u),g.prototype.processChunk=function(i){this.push({data:b.utf8encode(i.data),meta:i.meta})},b.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(h,z,b){var s=h("./support"),a=h("./base64"),r=h("./nodejsUtils"),u=h("./external");function d(n){return n}function v(n,c){for(var o=0;o<n.length;++o)c[o]=255&n.charCodeAt(o);return c}h("setimmediate"),b.newBlob=function(n,c){b.checkSupport("blob");try{return new Blob([n],{type:c})}catch(m){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return o.append(n),o.getBlob(c)}catch(y){throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(n,c,o){var m=[],y=0,E=n.length;if(E<=o)return String.fromCharCode.apply(null,n);for(;y<E;)c==="array"||c==="nodebuffer"?m.push(String.fromCharCode.apply(null,n.slice(y,Math.min(y+o,E)))):m.push(String.fromCharCode.apply(null,n.subarray(y,Math.min(y+o,E)))),y+=o;return m.join("")},stringifyByChar:function(n){for(var c="",o=0;o<n.length;o++)c+=String.fromCharCode(n[o]);return c},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(n){return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch(n){return!1}}()}};function g(n){var c=65536,o=b.getTypeOf(n),m=!0;if(o==="uint8array"?m=_.applyCanBeUsed.uint8array:o==="nodebuffer"&&(m=_.applyCanBeUsed.nodebuffer),m)for(;1<c;)try{return _.stringifyByChunk(n,o,c)}catch(y){c=Math.floor(c/2)}return _.stringifyByChar(n)}function i(n,c){for(var o=0;o<n.length;o++)c[o]=n[o];return c}b.applyFromCharCode=g;var p={};p.string={string:d,array:function(n){return v(n,new Array(n.length))},arraybuffer:function(n){return p.string.uint8array(n).buffer},uint8array:function(n){return v(n,new Uint8Array(n.length))},nodebuffer:function(n){return v(n,r.allocBuffer(n.length))}},p.array={string:g,array:d,arraybuffer:function(n){return new Uint8Array(n).buffer},uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return r.newBufferFrom(n)}},p.arraybuffer={string:function(n){return g(new Uint8Array(n))},array:function(n){return i(new Uint8Array(n),new Array(n.byteLength))},arraybuffer:d,uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return r.newBufferFrom(new Uint8Array(n))}},p.uint8array={string:g,array:function(n){return i(n,new Array(n.length))},arraybuffer:function(n){return n.buffer},uint8array:d,nodebuffer:function(n){return r.newBufferFrom(n)}},p.nodebuffer={string:g,array:function(n){return i(n,new Array(n.length))},arraybuffer:function(n){return p.nodebuffer.uint8array(n).buffer},uint8array:function(n){return i(n,new Uint8Array(n.length))},nodebuffer:d},b.transformTo=function(n,c){if(c=c||"",!n)return c;b.checkSupport(n);var o=b.getTypeOf(c);return p[o][n](c)},b.resolve=function(n){for(var c=n.split("/"),o=[],m=0;m<c.length;m++){var y=c[m];y==="."||y===""&&m!==0&&m!==c.length-1||(y===".."?o.pop():o.push(y))}return o.join("/")},b.getTypeOf=function(n){return typeof n=="string"?"string":Object.prototype.toString.call(n)==="[object Array]"?"array":s.nodebuffer&&r.isBuffer(n)?"nodebuffer":s.uint8array&&n instanceof Uint8Array?"uint8array":s.arraybuffer&&n instanceof ArrayBuffer?"arraybuffer":void 0},b.checkSupport=function(n){if(!s[n.toLowerCase()])throw new Error(n+" is not supported by this platform")},b.MAX_VALUE_16BITS=65535,b.MAX_VALUE_32BITS=-1,b.pretty=function(n){var c,o,m="";for(o=0;o<(n||"").length;o++)m+="\\x"+((c=n.charCodeAt(o))<16?"0":"")+c.toString(16).toUpperCase();return m},b.delay=function(n,c,o){setImmediate(function(){n.apply(o||null,c||[])})},b.inherits=function(n,c){function o(){}o.prototype=c.prototype,n.prototype=new o},b.extend=function(){var n,c,o={};for(n=0;n<arguments.length;n++)for(c in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],c)&&o[c]===void 0&&(o[c]=arguments[n][c]);return o},b.prepareContent=function(n,c,o,m,y){return u.Promise.resolve(c).then(function(E){return s.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new u.Promise(function(x,B){var A=new FileReader;A.onload=function(L){x(L.target.result)},A.onerror=function(L){B(L.target.error)},A.readAsArrayBuffer(E)}):E}).then(function(E){var x=b.getTypeOf(E);return x?(x==="arraybuffer"?E=b.transformTo("uint8array",E):x==="string"&&(y?E=a.decode(E):o&&m!==!0&&(E=function(B){return v(B,s.uint8array?new Uint8Array(B.length):new Array(B.length))}(E))),E):u.Promise.reject(new Error("Can't read the data of '"+n+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(h,z,b){var s=h("./reader/readerFor"),a=h("./utils"),r=h("./signature"),u=h("./zipEntry"),d=h("./support");function v(_){this.files=[],this.loadOptions=_}v.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(g)+", expected "+a.pretty(_)+")")}},isSignature:function(_,g){var i=this.reader.index;this.reader.setIndex(_);var p=this.reader.readString(4)===g;return this.reader.setIndex(i),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),g=d.uint8array?"uint8array":"array",i=a.transformTo(g,_);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,g,i,p=this.zip64EndOfCentralSize-44;0<p;)_=this.reader.readInt(2),g=this.reader.readInt(4),i=this.reader.readData(g),this.zip64ExtensibleData[_]={id:_,length:g,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,g;for(_=0;_<this.files.length;_++)g=this.files[_],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(_=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var g=_;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var p=g-i;if(0<p)this.isSignature(g,r.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(_){this.reader=s(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},z.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(h,z,b){var s=h("./reader/readerFor"),a=h("./utils"),r=h("./compressedObject"),u=h("./crc32"),d=h("./utf8"),v=h("./compressions"),_=h("./support");function g(i,p){this.options=i,this.loadOptions=p}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(i){var p,n;if(i.skip(22),this.fileNameLength=i.readInt(2),n=i.readInt(2),this.fileName=i.readData(this.fileNameLength),i.skip(n),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(c){for(var o in v)if(Object.prototype.hasOwnProperty.call(v,o)&&v[o].magic===c)return v[o];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,p,i.readData(this.compressedSize))},readCentralPart:function(i){this.versionMadeBy=i.readInt(2),i.skip(2),this.bitFlag=i.readInt(2),this.compressionMethod=i.readString(2),this.date=i.readDate(),this.crc32=i.readInt(4),this.compressedSize=i.readInt(4),this.uncompressedSize=i.readInt(4);var p=i.readInt(2);if(this.extraFieldsLength=i.readInt(2),this.fileCommentLength=i.readInt(2),this.diskNumberStart=i.readInt(2),this.internalFileAttributes=i.readInt(2),this.externalFileAttributes=i.readInt(4),this.localHeaderOffset=i.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");i.skip(p),this.readExtraFields(i),this.parseZIP64ExtraField(i),this.fileComment=i.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var i=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),i==0&&(this.dosPermissions=63&this.externalFileAttributes),i==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var i=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=i.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=i.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=i.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=i.readInt(4))}},readExtraFields:function(i){var p,n,c,o=i.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});i.index+4<o;)p=i.readInt(2),n=i.readInt(2),c=i.readData(n),this.extraFields[p]={id:p,length:n,value:c};i.setIndex(o)},handleUTF8:function(){var i=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var n=a.transformTo(i,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{var o=a.transformTo(i,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var i=this.extraFields[28789];if(i){var p=s(i.value);return p.readInt(1)!==1||u(this.fileName)!==p.readInt(4)?null:d.utf8decode(p.readData(i.length-5))}return null},findExtraFieldUnicodeComment:function(){var i=this.extraFields[25461];if(i){var p=s(i.value);return p.readInt(1)!==1||u(this.fileComment)!==p.readInt(4)?null:d.utf8decode(p.readData(i.length-5))}return null}},z.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(h,z,b){function s(p,n,c){this.name=p,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=n,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}}var a=h("./stream/StreamHelper"),r=h("./stream/DataWorker"),u=h("./utf8"),d=h("./compressedObject"),v=h("./stream/GenericWorker");s.prototype={internalStream:function(p){var n=null,c="string";try{if(!p)throw new Error("No output type specified.");var o=(c=p.toLowerCase())==="string"||c==="text";c!=="binarystring"&&c!=="text"||(c="string"),n=this._decompressWorker();var m=!this._dataBinary;m&&!o&&(n=n.pipe(new u.Utf8EncodeWorker)),!m&&o&&(n=n.pipe(new u.Utf8DecodeWorker))}catch(y){(n=new v("error")).error(y)}return new a(n,c,"")},async:function(p,n){return this.internalStream(p).accumulate(n)},nodeStream:function(p,n){return this.internalStream(p||"nodebuffer").toNodejsStream(n)},_compressWorker:function(p,n){if(this._data instanceof d&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new u.Utf8EncodeWorker)),d.createWorkerFrom(c,p,n)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof v?this._data:new r(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},i=0;i<_.length;i++)s.prototype[_[i]]=g;z.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(h,z,b){(function(s){var a,r,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var d=0,v=new u(p),_=s.document.createTextNode("");v.observe(_,{characterData:!0}),a=function(){_.data=d=++d%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var n=s.document.createElement("script");n.onreadystatechange=function(){p(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},s.document.documentElement.appendChild(n)}:function(){setTimeout(p,0)};else{var g=new s.MessageChannel;g.port1.onmessage=p,a=function(){g.port2.postMessage(0)}}var i=[];function p(){var n,c;r=!0;for(var o=i.length;o;){for(c=i,i=[],n=-1;++n<o;)c[n]();o=i.length}r=!1}z.exports=function(n){i.push(n)!==1||r||a()}}).call(this,typeof _t<"u"?_t:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(h,z,b){var s=h("immediate");function a(){}var r={},u=["REJECTED"],d=["FULFILLED"],v=["PENDING"];function _(o){if(typeof o!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,o!==a&&n(this,o)}function g(o,m,y){this.promise=o,typeof m=="function"&&(this.onFulfilled=m,this.callFulfilled=this.otherCallFulfilled),typeof y=="function"&&(this.onRejected=y,this.callRejected=this.otherCallRejected)}function i(o,m,y){s(function(){var E;try{E=m(y)}catch(x){return r.reject(o,x)}E===o?r.reject(o,new TypeError("Cannot resolve promise with itself")):r.resolve(o,E)})}function p(o){var m=o&&o.then;if(o&&(typeof o=="object"||typeof o=="function")&&typeof m=="function")return function(){m.apply(o,arguments)}}function n(o,m){var y=!1;function E(A){y||(y=!0,r.reject(o,A))}function x(A){y||(y=!0,r.resolve(o,A))}var B=c(function(){m(x,E)});B.status==="error"&&E(B.value)}function c(o,m){var y={};try{y.value=o(m),y.status="success"}catch(E){y.status="error",y.value=E}return y}(z.exports=_).prototype.finally=function(o){if(typeof o!="function")return this;var m=this.constructor;return this.then(function(y){return m.resolve(o()).then(function(){return y})},function(y){return m.resolve(o()).then(function(){throw y})})},_.prototype.catch=function(o){return this.then(null,o)},_.prototype.then=function(o,m){if(typeof o!="function"&&this.state===d||typeof m!="function"&&this.state===u)return this;var y=new this.constructor(a);return this.state!==v?i(y,this.state===d?o:m,this.outcome):this.queue.push(new g(y,o,m)),y},g.prototype.callFulfilled=function(o){r.resolve(this.promise,o)},g.prototype.otherCallFulfilled=function(o){i(this.promise,this.onFulfilled,o)},g.prototype.callRejected=function(o){r.reject(this.promise,o)},g.prototype.otherCallRejected=function(o){i(this.promise,this.onRejected,o)},r.resolve=function(o,m){var y=c(p,m);if(y.status==="error")return r.reject(o,y.value);var E=y.value;if(E)n(o,E);else{o.state=d,o.outcome=m;for(var x=-1,B=o.queue.length;++x<B;)o.queue[x].callFulfilled(m)}return o},r.reject=function(o,m){o.state=u,o.outcome=m;for(var y=-1,E=o.queue.length;++y<E;)o.queue[y].callRejected(m);return o},_.resolve=function(o){return o instanceof this?o:r.resolve(new this(a),o)},_.reject=function(o){var m=new this(a);return r.reject(m,o)},_.all=function(o){var m=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=o.length,E=!1;if(!y)return this.resolve([]);for(var x=new Array(y),B=0,A=-1,L=new this(a);++A<y;)I(o[A],A);return L;function I(N,V){m.resolve(N).then(function(w){x[V]=w,++B!==y||E||(E=!0,r.resolve(L,x))},function(w){E||(E=!0,r.reject(L,w))})}},_.race=function(o){var m=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=o.length,E=!1;if(!y)return this.resolve([]);for(var x=-1,B=new this(a);++x<y;)A=o[x],m.resolve(A).then(function(L){E||(E=!0,r.resolve(B,L))},function(L){E||(E=!0,r.reject(B,L))});var A;return B}},{immediate:36}],38:[function(h,z,b){var s={};(0,h("./lib/utils/common").assign)(s,h("./lib/deflate"),h("./lib/inflate"),h("./lib/zlib/constants")),z.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(h,z,b){var s=h("./zlib/deflate"),a=h("./utils/common"),r=h("./utils/strings"),u=h("./zlib/messages"),d=h("./zlib/zstream"),v=Object.prototype.toString,_=0,g=-1,i=0,p=8;function n(o){if(!(this instanceof n))return new n(o);this.options=a.assign({level:g,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:i,to:""},o||{});var m=this.options;m.raw&&0<m.windowBits?m.windowBits=-m.windowBits:m.gzip&&0<m.windowBits&&m.windowBits<16&&(m.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var y=s.deflateInit2(this.strm,m.level,m.method,m.windowBits,m.memLevel,m.strategy);if(y!==_)throw new Error(u[y]);if(m.header&&s.deflateSetHeader(this.strm,m.header),m.dictionary){var E;if(E=typeof m.dictionary=="string"?r.string2buf(m.dictionary):v.call(m.dictionary)==="[object ArrayBuffer]"?new Uint8Array(m.dictionary):m.dictionary,(y=s.deflateSetDictionary(this.strm,E))!==_)throw new Error(u[y]);this._dict_set=!0}}function c(o,m){var y=new n(m);if(y.push(o,!0),y.err)throw y.msg||u[y.err];return y.result}n.prototype.push=function(o,m){var y,E,x=this.strm,B=this.options.chunkSize;if(this.ended)return!1;E=m===~~m?m:m===!0?4:0,typeof o=="string"?x.input=r.string2buf(o):v.call(o)==="[object ArrayBuffer]"?x.input=new Uint8Array(o):x.input=o,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new a.Buf8(B),x.next_out=0,x.avail_out=B),(y=s.deflate(x,E))!==1&&y!==_)return this.onEnd(y),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(a.shrinkBuf(x.output,x.next_out))):this.onData(a.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&y!==1);return E===4?(y=s.deflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===_):E!==2||(this.onEnd(_),!(x.avail_out=0))},n.prototype.onData=function(o){this.chunks.push(o)},n.prototype.onEnd=function(o){o===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},b.Deflate=n,b.deflate=c,b.deflateRaw=function(o,m){return(m=m||{}).raw=!0,c(o,m)},b.gzip=function(o,m){return(m=m||{}).gzip=!0,c(o,m)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(h,z,b){var s=h("./zlib/inflate"),a=h("./utils/common"),r=h("./utils/strings"),u=h("./zlib/constants"),d=h("./zlib/messages"),v=h("./zlib/zstream"),_=h("./zlib/gzheader"),g=Object.prototype.toString;function i(n){if(!(this instanceof i))return new i(n);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},n||{});var c=this.options;c.raw&&0<=c.windowBits&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),!(0<=c.windowBits&&c.windowBits<16)||n&&n.windowBits||(c.windowBits+=32),15<c.windowBits&&c.windowBits<48&&!(15&c.windowBits)&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var o=s.inflateInit2(this.strm,c.windowBits);if(o!==u.Z_OK)throw new Error(d[o]);this.header=new _,s.inflateGetHeader(this.strm,this.header)}function p(n,c){var o=new i(c);if(o.push(n,!0),o.err)throw o.msg||d[o.err];return o.result}i.prototype.push=function(n,c){var o,m,y,E,x,B,A=this.strm,L=this.options.chunkSize,I=this.options.dictionary,N=!1;if(this.ended)return!1;m=c===~~c?c:c===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof n=="string"?A.input=r.binstring2buf(n):g.call(n)==="[object ArrayBuffer]"?A.input=new Uint8Array(n):A.input=n,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new a.Buf8(L),A.next_out=0,A.avail_out=L),(o=s.inflate(A,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&I&&(B=typeof I=="string"?r.string2buf(I):g.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,o=s.inflateSetDictionary(this.strm,B)),o===u.Z_BUF_ERROR&&N===!0&&(o=u.Z_OK,N=!1),o!==u.Z_STREAM_END&&o!==u.Z_OK)return this.onEnd(o),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&o!==u.Z_STREAM_END&&(A.avail_in!==0||m!==u.Z_FINISH&&m!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(y=r.utf8border(A.output,A.next_out),E=A.next_out-y,x=r.buf2string(A.output,y),A.next_out=E,A.avail_out=L-E,E&&a.arraySet(A.output,A.output,y,E,0),this.onData(x)):this.onData(a.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(N=!0)}while((0<A.avail_in||A.avail_out===0)&&o!==u.Z_STREAM_END);return o===u.Z_STREAM_END&&(m=u.Z_FINISH),m===u.Z_FINISH?(o=s.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===u.Z_OK):m!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(A.avail_out=0))},i.prototype.onData=function(n){this.chunks.push(n)},i.prototype.onEnd=function(n){n===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},b.Inflate=i,b.inflate=p,b.inflateRaw=function(n,c){return(c=c||{}).raw=!0,p(n,c)},b.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(h,z,b){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";b.assign=function(u){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var v=d.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var _ in v)v.hasOwnProperty(_)&&(u[_]=v[_])}}return u},b.shrinkBuf=function(u,d){return u.length===d?u:u.subarray?u.subarray(0,d):(u.length=d,u)};var a={arraySet:function(u,d,v,_,g){if(d.subarray&&u.subarray)u.set(d.subarray(v,v+_),g);else for(var i=0;i<_;i++)u[g+i]=d[v+i]},flattenChunks:function(u){var d,v,_,g,i,p;for(d=_=0,v=u.length;d<v;d++)_+=u[d].length;for(p=new Uint8Array(_),d=g=0,v=u.length;d<v;d++)i=u[d],p.set(i,g),g+=i.length;return p}},r={arraySet:function(u,d,v,_,g){for(var i=0;i<_;i++)u[g+i]=d[v+i]},flattenChunks:function(u){return[].concat.apply([],u)}};b.setTyped=function(u){u?(b.Buf8=Uint8Array,b.Buf16=Uint16Array,b.Buf32=Int32Array,b.assign(b,a)):(b.Buf8=Array,b.Buf16=Array,b.Buf32=Array,b.assign(b,r))},b.setTyped(s)},{}],42:[function(h,z,b){var s=h("./common"),a=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(_){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(_){r=!1}for(var u=new s.Buf8(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function v(_,g){if(g<65537&&(_.subarray&&r||!_.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(_,g));for(var i="",p=0;p<g;p++)i+=String.fromCharCode(_[p]);return i}u[254]=u[254]=1,b.string2buf=function(_){var g,i,p,n,c,o=_.length,m=0;for(n=0;n<o;n++)(64512&(i=_.charCodeAt(n)))==55296&&n+1<o&&(64512&(p=_.charCodeAt(n+1)))==56320&&(i=65536+(i-55296<<10)+(p-56320),n++),m+=i<128?1:i<2048?2:i<65536?3:4;for(g=new s.Buf8(m),n=c=0;c<m;n++)(64512&(i=_.charCodeAt(n)))==55296&&n+1<o&&(64512&(p=_.charCodeAt(n+1)))==56320&&(i=65536+(i-55296<<10)+(p-56320),n++),i<128?g[c++]=i:(i<2048?g[c++]=192|i>>>6:(i<65536?g[c++]=224|i>>>12:(g[c++]=240|i>>>18,g[c++]=128|i>>>12&63),g[c++]=128|i>>>6&63),g[c++]=128|63&i);return g},b.buf2binstring=function(_){return v(_,_.length)},b.binstring2buf=function(_){for(var g=new s.Buf8(_.length),i=0,p=g.length;i<p;i++)g[i]=_.charCodeAt(i);return g},b.buf2string=function(_,g){var i,p,n,c,o=g||_.length,m=new Array(2*o);for(i=p=0;i<o;)if((n=_[i++])<128)m[p++]=n;else if(4<(c=u[n]))m[p++]=65533,i+=c-1;else{for(n&=c===2?31:c===3?15:7;1<c&&i<o;)n=n<<6|63&_[i++],c--;1<c?m[p++]=65533:n<65536?m[p++]=n:(n-=65536,m[p++]=55296|n>>10&1023,m[p++]=56320|1023&n)}return v(m,p)},b.utf8border=function(_,g){var i;for((g=g||_.length)>_.length&&(g=_.length),i=g-1;0<=i&&(192&_[i])==128;)i--;return i<0||i===0?g:i+u[_[i]]>g?i:g}},{"./common":41}],43:[function(h,z,b){z.exports=function(s,a,r,u){for(var d=65535&s|0,v=s>>>16&65535|0,_=0;r!==0;){for(r-=_=2e3<r?2e3:r;v=v+(d=d+a[u++]|0)|0,--_;);d%=65521,v%=65521}return d|v<<16|0}},{}],44:[function(h,z,b){z.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(h,z,b){var s=function(){for(var a,r=[],u=0;u<256;u++){a=u;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;r[u]=a}return r}();z.exports=function(a,r,u,d){var v=s,_=d+u;a^=-1;for(var g=d;g<_;g++)a=a>>>8^v[255&(a^r[g])];return-1^a}},{}],46:[function(h,z,b){var s,a=h("../utils/common"),r=h("./trees"),u=h("./adler32"),d=h("./crc32"),v=h("./messages"),_=0,g=4,i=0,p=-2,n=-1,c=4,o=2,m=8,y=9,E=286,x=30,B=19,A=2*E+1,L=15,I=3,N=258,V=N+I+1,w=42,T=113,e=1,D=2,Q=3,U=4;function tt(t,F){return t.msg=v[F],F}function W(t){return(t<<1)-(4<t?9:0)}function q(t){for(var F=t.length;0<=--F;)t[F]=0}function O(t){var F=t.state,R=F.pending;R>t.avail_out&&(R=t.avail_out),R!==0&&(a.arraySet(t.output,F.pending_buf,F.pending_out,R,t.next_out),t.next_out+=R,F.pending_out+=R,t.total_out+=R,t.avail_out-=R,F.pending-=R,F.pending===0&&(F.pending_out=0))}function C(t,F){r._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,F),t.block_start=t.strstart,O(t.strm)}function X(t,F){t.pending_buf[t.pending++]=F}function $(t,F){t.pending_buf[t.pending++]=F>>>8&255,t.pending_buf[t.pending++]=255&F}function G(t,F){var R,f,l=t.max_chain_length,k=t.strstart,P=t.prev_length,j=t.nice_match,S=t.strstart>t.w_size-V?t.strstart-(t.w_size-V):0,Z=t.window,J=t.w_mask,M=t.prev,Y=t.strstart+N,it=Z[k+P-1],rt=Z[k+P];t.prev_length>=t.good_match&&(l>>=2),j>t.lookahead&&(j=t.lookahead);do if(Z[(R=F)+P]===rt&&Z[R+P-1]===it&&Z[R]===Z[k]&&Z[++R]===Z[k+1]){k+=2,R++;do;while(Z[++k]===Z[++R]&&Z[++k]===Z[++R]&&Z[++k]===Z[++R]&&Z[++k]===Z[++R]&&Z[++k]===Z[++R]&&Z[++k]===Z[++R]&&Z[++k]===Z[++R]&&Z[++k]===Z[++R]&&k<Y);if(f=N-(Y-k),k=Y-N,P<f){if(t.match_start=F,j<=(P=f))break;it=Z[k+P-1],rt=Z[k+P]}}while((F=M[F&J])>S&&--l!=0);return P<=t.lookahead?P:t.lookahead}function st(t){var F,R,f,l,k,P,j,S,Z,J,M=t.w_size;do{if(l=t.window_size-t.lookahead-t.strstart,t.strstart>=M+(M-V)){for(a.arraySet(t.window,t.window,M,M,0),t.match_start-=M,t.strstart-=M,t.block_start-=M,F=R=t.hash_size;f=t.head[--F],t.head[F]=M<=f?f-M:0,--R;);for(F=R=M;f=t.prev[--F],t.prev[F]=M<=f?f-M:0,--R;);l+=M}if(t.strm.avail_in===0)break;if(P=t.strm,j=t.window,S=t.strstart+t.lookahead,Z=l,J=void 0,J=P.avail_in,Z<J&&(J=Z),R=J===0?0:(P.avail_in-=J,a.arraySet(j,P.input,P.next_in,J,S),P.state.wrap===1?P.adler=u(P.adler,j,J,S):P.state.wrap===2&&(P.adler=d(P.adler,j,J,S)),P.next_in+=J,P.total_in+=J,J),t.lookahead+=R,t.lookahead+t.insert>=I)for(k=t.strstart-t.insert,t.ins_h=t.window[k],t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+I-1])&t.hash_mask,t.prev[k&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=k,k++,t.insert--,!(t.lookahead+t.insert<I)););}while(t.lookahead<V&&t.strm.avail_in!==0)}function ct(t,F){for(var R,f;;){if(t.lookahead<V){if(st(t),t.lookahead<V&&F===_)return e;if(t.lookahead===0)break}if(R=0,t.lookahead>=I&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+I-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),R!==0&&t.strstart-R<=t.w_size-V&&(t.match_length=G(t,R)),t.match_length>=I)if(f=r._tr_tally(t,t.strstart-t.match_start,t.match_length-I),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=I){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+I-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else f=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(f&&(C(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<I-1?t.strstart:I-1,F===g?(C(t,!0),t.strm.avail_out===0?Q:U):t.last_lit&&(C(t,!1),t.strm.avail_out===0)?e:D}function et(t,F){for(var R,f,l;;){if(t.lookahead<V){if(st(t),t.lookahead<V&&F===_)return e;if(t.lookahead===0)break}if(R=0,t.lookahead>=I&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+I-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=I-1,R!==0&&t.prev_length<t.max_lazy_match&&t.strstart-R<=t.w_size-V&&(t.match_length=G(t,R),t.match_length<=5&&(t.strategy===1||t.match_length===I&&4096<t.strstart-t.match_start)&&(t.match_length=I-1)),t.prev_length>=I&&t.match_length<=t.prev_length){for(l=t.strstart+t.lookahead-I,f=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-I),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=l&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+I-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=I-1,t.strstart++,f&&(C(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((f=r._tr_tally(t,0,t.window[t.strstart-1]))&&C(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(f=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<I-1?t.strstart:I-1,F===g?(C(t,!0),t.strm.avail_out===0?Q:U):t.last_lit&&(C(t,!1),t.strm.avail_out===0)?e:D}function nt(t,F,R,f,l){this.good_length=t,this.max_lazy=F,this.nice_length=R,this.max_chain=f,this.func=l}function lt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*A),this.dyn_dtree=new a.Buf16(2*(2*x+1)),this.bl_tree=new a.Buf16(2*(2*B+1)),q(this.dyn_ltree),q(this.dyn_dtree),q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(L+1),this.heap=new a.Buf16(2*E+1),q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*E+1),q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function at(t){var F;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=o,(F=t.state).pending=0,F.pending_out=0,F.wrap<0&&(F.wrap=-F.wrap),F.status=F.wrap?w:T,t.adler=F.wrap===2?0:1,F.last_flush=_,r._tr_init(F),i):tt(t,p)}function ft(t){var F=at(t);return F===i&&function(R){R.window_size=2*R.w_size,q(R.head),R.max_lazy_match=s[R.level].max_lazy,R.good_match=s[R.level].good_length,R.nice_match=s[R.level].nice_length,R.max_chain_length=s[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=I-1,R.match_available=0,R.ins_h=0}(t.state),F}function dt(t,F,R,f,l,k){if(!t)return p;var P=1;if(F===n&&(F=6),f<0?(P=0,f=-f):15<f&&(P=2,f-=16),l<1||y<l||R!==m||f<8||15<f||F<0||9<F||k<0||c<k)return tt(t,p);f===8&&(f=9);var j=new lt;return(t.state=j).strm=t,j.wrap=P,j.gzhead=null,j.w_bits=f,j.w_size=1<<j.w_bits,j.w_mask=j.w_size-1,j.hash_bits=l+7,j.hash_size=1<<j.hash_bits,j.hash_mask=j.hash_size-1,j.hash_shift=~~((j.hash_bits+I-1)/I),j.window=new a.Buf8(2*j.w_size),j.head=new a.Buf16(j.hash_size),j.prev=new a.Buf16(j.w_size),j.lit_bufsize=1<<l+6,j.pending_buf_size=4*j.lit_bufsize,j.pending_buf=new a.Buf8(j.pending_buf_size),j.d_buf=1*j.lit_bufsize,j.l_buf=3*j.lit_bufsize,j.level=F,j.strategy=k,j.method=R,ft(t)}s=[new nt(0,0,0,0,function(t,F){var R=65535;for(R>t.pending_buf_size-5&&(R=t.pending_buf_size-5);;){if(t.lookahead<=1){if(st(t),t.lookahead===0&&F===_)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var f=t.block_start+R;if((t.strstart===0||t.strstart>=f)&&(t.lookahead=t.strstart-f,t.strstart=f,C(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-V&&(C(t,!1),t.strm.avail_out===0))return e}return t.insert=0,F===g?(C(t,!0),t.strm.avail_out===0?Q:U):(t.strstart>t.block_start&&(C(t,!1),t.strm.avail_out),e)}),new nt(4,4,8,4,ct),new nt(4,5,16,8,ct),new nt(4,6,32,32,ct),new nt(4,4,16,16,et),new nt(8,16,32,32,et),new nt(8,16,128,128,et),new nt(8,32,128,256,et),new nt(32,128,258,1024,et),new nt(32,258,258,4096,et)],b.deflateInit=function(t,F){return dt(t,F,m,15,8,0)},b.deflateInit2=dt,b.deflateReset=ft,b.deflateResetKeep=at,b.deflateSetHeader=function(t,F){return t&&t.state?t.state.wrap!==2?p:(t.state.gzhead=F,i):p},b.deflate=function(t,F){var R,f,l,k;if(!t||!t.state||5<F||F<0)return t?tt(t,p):p;if(f=t.state,!t.output||!t.input&&t.avail_in!==0||f.status===666&&F!==g)return tt(t,t.avail_out===0?-5:p);if(f.strm=t,R=f.last_flush,f.last_flush=F,f.status===w)if(f.wrap===2)t.adler=0,X(f,31),X(f,139),X(f,8),f.gzhead?(X(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),X(f,255&f.gzhead.time),X(f,f.gzhead.time>>8&255),X(f,f.gzhead.time>>16&255),X(f,f.gzhead.time>>24&255),X(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),X(f,255&f.gzhead.os),f.gzhead.extra&&f.gzhead.extra.length&&(X(f,255&f.gzhead.extra.length),X(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(t.adler=d(t.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=69):(X(f,0),X(f,0),X(f,0),X(f,0),X(f,0),X(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),X(f,3),f.status=T);else{var P=m+(f.w_bits-8<<4)<<8;P|=(2<=f.strategy||f.level<2?0:f.level<6?1:f.level===6?2:3)<<6,f.strstart!==0&&(P|=32),P+=31-P%31,f.status=T,$(f,P),f.strstart!==0&&($(f,t.adler>>>16),$(f,65535&t.adler)),t.adler=1}if(f.status===69)if(f.gzhead.extra){for(l=f.pending;f.gzindex<(65535&f.gzhead.extra.length)&&(f.pending!==f.pending_buf_size||(f.gzhead.hcrc&&f.pending>l&&(t.adler=d(t.adler,f.pending_buf,f.pending-l,l)),O(t),l=f.pending,f.pending!==f.pending_buf_size));)X(f,255&f.gzhead.extra[f.gzindex]),f.gzindex++;f.gzhead.hcrc&&f.pending>l&&(t.adler=d(t.adler,f.pending_buf,f.pending-l,l)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=73)}else f.status=73;if(f.status===73)if(f.gzhead.name){l=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>l&&(t.adler=d(t.adler,f.pending_buf,f.pending-l,l)),O(t),l=f.pending,f.pending===f.pending_buf_size)){k=1;break}k=f.gzindex<f.gzhead.name.length?255&f.gzhead.name.charCodeAt(f.gzindex++):0,X(f,k)}while(k!==0);f.gzhead.hcrc&&f.pending>l&&(t.adler=d(t.adler,f.pending_buf,f.pending-l,l)),k===0&&(f.gzindex=0,f.status=91)}else f.status=91;if(f.status===91)if(f.gzhead.comment){l=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>l&&(t.adler=d(t.adler,f.pending_buf,f.pending-l,l)),O(t),l=f.pending,f.pending===f.pending_buf_size)){k=1;break}k=f.gzindex<f.gzhead.comment.length?255&f.gzhead.comment.charCodeAt(f.gzindex++):0,X(f,k)}while(k!==0);f.gzhead.hcrc&&f.pending>l&&(t.adler=d(t.adler,f.pending_buf,f.pending-l,l)),k===0&&(f.status=103)}else f.status=103;if(f.status===103&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&O(t),f.pending+2<=f.pending_buf_size&&(X(f,255&t.adler),X(f,t.adler>>8&255),t.adler=0,f.status=T)):f.status=T),f.pending!==0){if(O(t),t.avail_out===0)return f.last_flush=-1,i}else if(t.avail_in===0&&W(F)<=W(R)&&F!==g)return tt(t,-5);if(f.status===666&&t.avail_in!==0)return tt(t,-5);if(t.avail_in!==0||f.lookahead!==0||F!==_&&f.status!==666){var j=f.strategy===2?function(S,Z){for(var J;;){if(S.lookahead===0&&(st(S),S.lookahead===0)){if(Z===_)return e;break}if(S.match_length=0,J=r._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++,J&&(C(S,!1),S.strm.avail_out===0))return e}return S.insert=0,Z===g?(C(S,!0),S.strm.avail_out===0?Q:U):S.last_lit&&(C(S,!1),S.strm.avail_out===0)?e:D}(f,F):f.strategy===3?function(S,Z){for(var J,M,Y,it,rt=S.window;;){if(S.lookahead<=N){if(st(S),S.lookahead<=N&&Z===_)return e;if(S.lookahead===0)break}if(S.match_length=0,S.lookahead>=I&&0<S.strstart&&(M=rt[Y=S.strstart-1])===rt[++Y]&&M===rt[++Y]&&M===rt[++Y]){it=S.strstart+N;do;while(M===rt[++Y]&&M===rt[++Y]&&M===rt[++Y]&&M===rt[++Y]&&M===rt[++Y]&&M===rt[++Y]&&M===rt[++Y]&&M===rt[++Y]&&Y<it);S.match_length=N-(it-Y),S.match_length>S.lookahead&&(S.match_length=S.lookahead)}if(S.match_length>=I?(J=r._tr_tally(S,1,S.match_length-I),S.lookahead-=S.match_length,S.strstart+=S.match_length,S.match_length=0):(J=r._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++),J&&(C(S,!1),S.strm.avail_out===0))return e}return S.insert=0,Z===g?(C(S,!0),S.strm.avail_out===0?Q:U):S.last_lit&&(C(S,!1),S.strm.avail_out===0)?e:D}(f,F):s[f.level].func(f,F);if(j!==Q&&j!==U||(f.status=666),j===e||j===Q)return t.avail_out===0&&(f.last_flush=-1),i;if(j===D&&(F===1?r._tr_align(f):F!==5&&(r._tr_stored_block(f,0,0,!1),F===3&&(q(f.head),f.lookahead===0&&(f.strstart=0,f.block_start=0,f.insert=0))),O(t),t.avail_out===0))return f.last_flush=-1,i}return F!==g?i:f.wrap<=0?1:(f.wrap===2?(X(f,255&t.adler),X(f,t.adler>>8&255),X(f,t.adler>>16&255),X(f,t.adler>>24&255),X(f,255&t.total_in),X(f,t.total_in>>8&255),X(f,t.total_in>>16&255),X(f,t.total_in>>24&255)):($(f,t.adler>>>16),$(f,65535&t.adler)),O(t),0<f.wrap&&(f.wrap=-f.wrap),f.pending!==0?i:1)},b.deflateEnd=function(t){var F;return t&&t.state?(F=t.state.status)!==w&&F!==69&&F!==73&&F!==91&&F!==103&&F!==T&&F!==666?tt(t,p):(t.state=null,F===T?tt(t,-3):i):p},b.deflateSetDictionary=function(t,F){var R,f,l,k,P,j,S,Z,J=F.length;if(!t||!t.state||(k=(R=t.state).wrap)===2||k===1&&R.status!==w||R.lookahead)return p;for(k===1&&(t.adler=u(t.adler,F,J,0)),R.wrap=0,J>=R.w_size&&(k===0&&(q(R.head),R.strstart=0,R.block_start=0,R.insert=0),Z=new a.Buf8(R.w_size),a.arraySet(Z,F,J-R.w_size,R.w_size,0),F=Z,J=R.w_size),P=t.avail_in,j=t.next_in,S=t.input,t.avail_in=J,t.next_in=0,t.input=F,st(R);R.lookahead>=I;){for(f=R.strstart,l=R.lookahead-(I-1);R.ins_h=(R.ins_h<<R.hash_shift^R.window[f+I-1])&R.hash_mask,R.prev[f&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=f,f++,--l;);R.strstart=f,R.lookahead=I-1,st(R)}return R.strstart+=R.lookahead,R.block_start=R.strstart,R.insert=R.lookahead,R.lookahead=0,R.match_length=R.prev_length=I-1,R.match_available=0,t.next_in=j,t.input=S,t.avail_in=P,R.wrap=k,i},b.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(h,z,b){z.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(h,z,b){z.exports=function(s,a){var r,u,d,v,_,g,i,p,n,c,o,m,y,E,x,B,A,L,I,N,V,w,T,e,D;r=s.state,u=s.next_in,e=s.input,d=u+(s.avail_in-5),v=s.next_out,D=s.output,_=v-(a-s.avail_out),g=v+(s.avail_out-257),i=r.dmax,p=r.wsize,n=r.whave,c=r.wnext,o=r.window,m=r.hold,y=r.bits,E=r.lencode,x=r.distcode,B=(1<<r.lenbits)-1,A=(1<<r.distbits)-1;t:do{y<15&&(m+=e[u++]<<y,y+=8,m+=e[u++]<<y,y+=8),L=E[m&B];e:for(;;){if(m>>>=I=L>>>24,y-=I,(I=L>>>16&255)===0)D[v++]=65535&L;else{if(!(16&I)){if(!(64&I)){L=E[(65535&L)+(m&(1<<I)-1)];continue e}if(32&I){r.mode=12;break t}s.msg="invalid literal/length code",r.mode=30;break t}N=65535&L,(I&=15)&&(y<I&&(m+=e[u++]<<y,y+=8),N+=m&(1<<I)-1,m>>>=I,y-=I),y<15&&(m+=e[u++]<<y,y+=8,m+=e[u++]<<y,y+=8),L=x[m&A];r:for(;;){if(m>>>=I=L>>>24,y-=I,!(16&(I=L>>>16&255))){if(!(64&I)){L=x[(65535&L)+(m&(1<<I)-1)];continue r}s.msg="invalid distance code",r.mode=30;break t}if(V=65535&L,y<(I&=15)&&(m+=e[u++]<<y,(y+=8)<I&&(m+=e[u++]<<y,y+=8)),i<(V+=m&(1<<I)-1)){s.msg="invalid distance too far back",r.mode=30;break t}if(m>>>=I,y-=I,(I=v-_)<V){if(n<(I=V-I)&&r.sane){s.msg="invalid distance too far back",r.mode=30;break t}if(T=o,(w=0)===c){if(w+=p-I,I<N){for(N-=I;D[v++]=o[w++],--I;);w=v-V,T=D}}else if(c<I){if(w+=p+c-I,(I-=c)<N){for(N-=I;D[v++]=o[w++],--I;);if(w=0,c<N){for(N-=I=c;D[v++]=o[w++],--I;);w=v-V,T=D}}}else if(w+=c-I,I<N){for(N-=I;D[v++]=o[w++],--I;);w=v-V,T=D}for(;2<N;)D[v++]=T[w++],D[v++]=T[w++],D[v++]=T[w++],N-=3;N&&(D[v++]=T[w++],1<N&&(D[v++]=T[w++]))}else{for(w=v-V;D[v++]=D[w++],D[v++]=D[w++],D[v++]=D[w++],2<(N-=3););N&&(D[v++]=D[w++],1<N&&(D[v++]=D[w++]))}break}}break}}while(u<d&&v<g);u-=N=y>>3,m&=(1<<(y-=N<<3))-1,s.next_in=u,s.next_out=v,s.avail_in=u<d?d-u+5:5-(u-d),s.avail_out=v<g?g-v+257:257-(v-g),r.hold=m,r.bits=y}},{}],49:[function(h,z,b){var s=h("../utils/common"),a=h("./adler32"),r=h("./crc32"),u=h("./inffast"),d=h("./inftrees"),v=1,_=2,g=0,i=-2,p=1,n=852,c=592;function o(w){return(w>>>24&255)+(w>>>8&65280)+((65280&w)<<8)+((255&w)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(w){var T;return w&&w.state?(T=w.state,w.total_in=w.total_out=T.total=0,w.msg="",T.wrap&&(w.adler=1&T.wrap),T.mode=p,T.last=0,T.havedict=0,T.dmax=32768,T.head=null,T.hold=0,T.bits=0,T.lencode=T.lendyn=new s.Buf32(n),T.distcode=T.distdyn=new s.Buf32(c),T.sane=1,T.back=-1,g):i}function E(w){var T;return w&&w.state?((T=w.state).wsize=0,T.whave=0,T.wnext=0,y(w)):i}function x(w,T){var e,D;return w&&w.state?(D=w.state,T<0?(e=0,T=-T):(e=1+(T>>4),T<48&&(T&=15)),T&&(T<8||15<T)?i:(D.window!==null&&D.wbits!==T&&(D.window=null),D.wrap=e,D.wbits=T,E(w))):i}function B(w,T){var e,D;return w?(D=new m,(w.state=D).window=null,(e=x(w,T))!==g&&(w.state=null),e):i}var A,L,I=!0;function N(w){if(I){var T;for(A=new s.Buf32(512),L=new s.Buf32(32),T=0;T<144;)w.lens[T++]=8;for(;T<256;)w.lens[T++]=9;for(;T<280;)w.lens[T++]=7;for(;T<288;)w.lens[T++]=8;for(d(v,w.lens,0,288,A,0,w.work,{bits:9}),T=0;T<32;)w.lens[T++]=5;d(_,w.lens,0,32,L,0,w.work,{bits:5}),I=!1}w.lencode=A,w.lenbits=9,w.distcode=L,w.distbits=5}function V(w,T,e,D){var Q,U=w.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new s.Buf8(U.wsize)),D>=U.wsize?(s.arraySet(U.window,T,e-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(D<(Q=U.wsize-U.wnext)&&(Q=D),s.arraySet(U.window,T,e-D,Q,U.wnext),(D-=Q)?(s.arraySet(U.window,T,e-D,D,0),U.wnext=D,U.whave=U.wsize):(U.wnext+=Q,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=Q))),0}b.inflateReset=E,b.inflateReset2=x,b.inflateResetKeep=y,b.inflateInit=function(w){return B(w,15)},b.inflateInit2=B,b.inflate=function(w,T){var e,D,Q,U,tt,W,q,O,C,X,$,G,st,ct,et,nt,lt,at,ft,dt,t,F,R,f,l=0,k=new s.Buf8(4),P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&w.avail_in!==0)return i;(e=w.state).mode===12&&(e.mode=13),tt=w.next_out,Q=w.output,q=w.avail_out,U=w.next_in,D=w.input,W=w.avail_in,O=e.hold,C=e.bits,X=W,$=q,F=g;t:for(;;)switch(e.mode){case p:if(e.wrap===0){e.mode=13;break}for(;C<16;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}if(2&e.wrap&&O===35615){k[e.check=0]=255&O,k[1]=O>>>8&255,e.check=r(e.check,k,2,0),C=O=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&O)<<8)+(O>>8))%31){w.msg="incorrect header check",e.mode=30;break}if((15&O)!=8){w.msg="unknown compression method",e.mode=30;break}if(C-=4,t=8+(15&(O>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){w.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,w.adler=e.check=1,e.mode=512&O?10:12,C=O=0;break;case 2:for(;C<16;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}if(e.flags=O,(255&e.flags)!=8){w.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){w.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=O>>8&1),512&e.flags&&(k[0]=255&O,k[1]=O>>>8&255,e.check=r(e.check,k,2,0)),C=O=0,e.mode=3;case 3:for(;C<32;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}e.head&&(e.head.time=O),512&e.flags&&(k[0]=255&O,k[1]=O>>>8&255,k[2]=O>>>16&255,k[3]=O>>>24&255,e.check=r(e.check,k,4,0)),C=O=0,e.mode=4;case 4:for(;C<16;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}e.head&&(e.head.xflags=255&O,e.head.os=O>>8),512&e.flags&&(k[0]=255&O,k[1]=O>>>8&255,e.check=r(e.check,k,2,0)),C=O=0,e.mode=5;case 5:if(1024&e.flags){for(;C<16;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}e.length=O,e.head&&(e.head.extra_len=O),512&e.flags&&(k[0]=255&O,k[1]=O>>>8&255,e.check=r(e.check,k,2,0)),C=O=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(W<(G=e.length)&&(G=W),G&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),s.arraySet(e.head.extra,D,U,G,t)),512&e.flags&&(e.check=r(e.check,D,G,U)),W-=G,U+=G,e.length-=G),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(W===0)break t;for(G=0;t=D[U+G++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&G<W;);if(512&e.flags&&(e.check=r(e.check,D,G,U)),W-=G,U+=G,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(W===0)break t;for(G=0;t=D[U+G++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&G<W;);if(512&e.flags&&(e.check=r(e.check,D,G,U)),W-=G,U+=G,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;C<16;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}if(O!==(65535&e.check)){w.msg="header crc mismatch",e.mode=30;break}C=O=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),w.adler=e.check=0,e.mode=12;break;case 10:for(;C<32;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}w.adler=e.check=o(O),C=O=0,e.mode=11;case 11:if(e.havedict===0)return w.next_out=tt,w.avail_out=q,w.next_in=U,w.avail_in=W,e.hold=O,e.bits=C,2;w.adler=e.check=1,e.mode=12;case 12:if(T===5||T===6)break t;case 13:if(e.last){O>>>=7&C,C-=7&C,e.mode=27;break}for(;C<3;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}switch(e.last=1&O,C-=1,3&(O>>>=1)){case 0:e.mode=14;break;case 1:if(N(e),e.mode=20,T!==6)break;O>>>=2,C-=2;break t;case 2:e.mode=17;break;case 3:w.msg="invalid block type",e.mode=30}O>>>=2,C-=2;break;case 14:for(O>>>=7&C,C-=7&C;C<32;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}if((65535&O)!=(O>>>16^65535)){w.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&O,C=O=0,e.mode=15,T===6)break t;case 15:e.mode=16;case 16:if(G=e.length){if(W<G&&(G=W),q<G&&(G=q),G===0)break t;s.arraySet(Q,D,U,G,tt),W-=G,U+=G,q-=G,tt+=G,e.length-=G;break}e.mode=12;break;case 17:for(;C<14;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}if(e.nlen=257+(31&O),O>>>=5,C-=5,e.ndist=1+(31&O),O>>>=5,C-=5,e.ncode=4+(15&O),O>>>=4,C-=4,286<e.nlen||30<e.ndist){w.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;C<3;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}e.lens[P[e.have++]]=7&O,O>>>=3,C-=3}for(;e.have<19;)e.lens[P[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,R={bits:e.lenbits},F=d(0,e.lens,0,19,e.lencode,0,e.work,R),e.lenbits=R.bits,F){w.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;nt=(l=e.lencode[O&(1<<e.lenbits)-1])>>>16&255,lt=65535&l,!((et=l>>>24)<=C);){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}if(lt<16)O>>>=et,C-=et,e.lens[e.have++]=lt;else{if(lt===16){for(f=et+2;C<f;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}if(O>>>=et,C-=et,e.have===0){w.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],G=3+(3&O),O>>>=2,C-=2}else if(lt===17){for(f=et+3;C<f;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}C-=et,t=0,G=3+(7&(O>>>=et)),O>>>=3,C-=3}else{for(f=et+7;C<f;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}C-=et,t=0,G=11+(127&(O>>>=et)),O>>>=7,C-=7}if(e.have+G>e.nlen+e.ndist){w.msg="invalid bit length repeat",e.mode=30;break}for(;G--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){w.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,R={bits:e.lenbits},F=d(v,e.lens,0,e.nlen,e.lencode,0,e.work,R),e.lenbits=R.bits,F){w.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,R={bits:e.distbits},F=d(_,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,R),e.distbits=R.bits,F){w.msg="invalid distances set",e.mode=30;break}if(e.mode=20,T===6)break t;case 20:e.mode=21;case 21:if(6<=W&&258<=q){w.next_out=tt,w.avail_out=q,w.next_in=U,w.avail_in=W,e.hold=O,e.bits=C,u(w,$),tt=w.next_out,Q=w.output,q=w.avail_out,U=w.next_in,D=w.input,W=w.avail_in,O=e.hold,C=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;nt=(l=e.lencode[O&(1<<e.lenbits)-1])>>>16&255,lt=65535&l,!((et=l>>>24)<=C);){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}if(nt&&!(240&nt)){for(at=et,ft=nt,dt=lt;nt=(l=e.lencode[dt+((O&(1<<at+ft)-1)>>at)])>>>16&255,lt=65535&l,!(at+(et=l>>>24)<=C);){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}O>>>=at,C-=at,e.back+=at}if(O>>>=et,C-=et,e.back+=et,e.length=lt,nt===0){e.mode=26;break}if(32&nt){e.back=-1,e.mode=12;break}if(64&nt){w.msg="invalid literal/length code",e.mode=30;break}e.extra=15&nt,e.mode=22;case 22:if(e.extra){for(f=e.extra;C<f;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}e.length+=O&(1<<e.extra)-1,O>>>=e.extra,C-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;nt=(l=e.distcode[O&(1<<e.distbits)-1])>>>16&255,lt=65535&l,!((et=l>>>24)<=C);){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}if(!(240&nt)){for(at=et,ft=nt,dt=lt;nt=(l=e.distcode[dt+((O&(1<<at+ft)-1)>>at)])>>>16&255,lt=65535&l,!(at+(et=l>>>24)<=C);){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}O>>>=at,C-=at,e.back+=at}if(O>>>=et,C-=et,e.back+=et,64&nt){w.msg="invalid distance code",e.mode=30;break}e.offset=lt,e.extra=15&nt,e.mode=24;case 24:if(e.extra){for(f=e.extra;C<f;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}e.offset+=O&(1<<e.extra)-1,O>>>=e.extra,C-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){w.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(q===0)break t;if(G=$-q,e.offset>G){if((G=e.offset-G)>e.whave&&e.sane){w.msg="invalid distance too far back",e.mode=30;break}st=G>e.wnext?(G-=e.wnext,e.wsize-G):e.wnext-G,G>e.length&&(G=e.length),ct=e.window}else ct=Q,st=tt-e.offset,G=e.length;for(q<G&&(G=q),q-=G,e.length-=G;Q[tt++]=ct[st++],--G;);e.length===0&&(e.mode=21);break;case 26:if(q===0)break t;Q[tt++]=e.length,q--,e.mode=21;break;case 27:if(e.wrap){for(;C<32;){if(W===0)break t;W--,O|=D[U++]<<C,C+=8}if($-=q,w.total_out+=$,e.total+=$,$&&(w.adler=e.check=e.flags?r(e.check,Q,$,tt-$):a(e.check,Q,$,tt-$)),$=q,(e.flags?O:o(O))!==e.check){w.msg="incorrect data check",e.mode=30;break}C=O=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;C<32;){if(W===0)break t;W--,O+=D[U++]<<C,C+=8}if(O!==(4294967295&e.total)){w.msg="incorrect length check",e.mode=30;break}C=O=0}e.mode=29;case 29:F=1;break t;case 30:F=-3;break t;case 31:return-4;case 32:default:return i}return w.next_out=tt,w.avail_out=q,w.next_in=U,w.avail_in=W,e.hold=O,e.bits=C,(e.wsize||$!==w.avail_out&&e.mode<30&&(e.mode<27||T!==4))&&V(w,w.output,w.next_out,$-w.avail_out)?(e.mode=31,-4):(X-=w.avail_in,$-=w.avail_out,w.total_in+=X,w.total_out+=$,e.total+=$,e.wrap&&$&&(w.adler=e.check=e.flags?r(e.check,Q,$,w.next_out-$):a(e.check,Q,$,w.next_out-$)),w.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(X==0&&$===0||T===4)&&F===g&&(F=-5),F)},b.inflateEnd=function(w){if(!w||!w.state)return i;var T=w.state;return T.window&&(T.window=null),w.state=null,g},b.inflateGetHeader=function(w,T){var e;return w&&w.state&&2&(e=w.state).wrap?((e.head=T).done=!1,g):i},b.inflateSetDictionary=function(w,T){var e,D=T.length;return w&&w.state?(e=w.state).wrap!==0&&e.mode!==11?i:e.mode===11&&a(1,T,D,0)!==e.check?-3:V(w,T,D,D)?(e.mode=31,-4):(e.havedict=1,g):i},b.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(h,z,b){var s=h("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];z.exports=function(v,_,g,i,p,n,c,o){var m,y,E,x,B,A,L,I,N,V=o.bits,w=0,T=0,e=0,D=0,Q=0,U=0,tt=0,W=0,q=0,O=0,C=null,X=0,$=new s.Buf16(16),G=new s.Buf16(16),st=null,ct=0;for(w=0;w<=15;w++)$[w]=0;for(T=0;T<i;T++)$[_[g+T]]++;for(Q=V,D=15;1<=D&&$[D]===0;D--);if(D<Q&&(Q=D),D===0)return p[n++]=20971520,p[n++]=20971520,o.bits=1,0;for(e=1;e<D&&$[e]===0;e++);for(Q<e&&(Q=e),w=W=1;w<=15;w++)if(W<<=1,(W-=$[w])<0)return-1;if(0<W&&(v===0||D!==1))return-1;for(G[1]=0,w=1;w<15;w++)G[w+1]=G[w]+$[w];for(T=0;T<i;T++)_[g+T]!==0&&(c[G[_[g+T]]++]=T);if(A=v===0?(C=st=c,19):v===1?(C=a,X-=257,st=r,ct-=257,256):(C=u,st=d,-1),w=e,B=n,tt=T=O=0,E=-1,x=(q=1<<(U=Q))-1,v===1&&852<q||v===2&&592<q)return 1;for(;;){for(L=w-tt,N=c[T]<A?(I=0,c[T]):c[T]>A?(I=st[ct+c[T]],C[X+c[T]]):(I=96,0),m=1<<w-tt,e=y=1<<U;p[B+(O>>tt)+(y-=m)]=L<<24|I<<16|N|0,y!==0;);for(m=1<<w-1;O&m;)m>>=1;if(m!==0?(O&=m-1,O+=m):O=0,T++,--$[w]==0){if(w===D)break;w=_[g+c[T]]}if(Q<w&&(O&x)!==E){for(tt===0&&(tt=Q),B+=e,W=1<<(U=w-tt);U+tt<D&&!((W-=$[U+tt])<=0);)U++,W<<=1;if(q+=1<<U,v===1&&852<q||v===2&&592<q)return 1;p[E=O&x]=Q<<24|U<<16|B-n|0}}return O!==0&&(p[B+O]=w-tt<<24|64<<16|0),o.bits=Q,0}},{"../utils/common":41}],51:[function(h,z,b){z.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(h,z,b){var s=h("../utils/common"),a=0,r=1;function u(l){for(var k=l.length;0<=--k;)l[k]=0}var d=0,v=29,_=256,g=_+1+v,i=30,p=19,n=2*g+1,c=15,o=16,m=7,y=256,E=16,x=17,B=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(g+2));u(V);var w=new Array(2*i);u(w);var T=new Array(512);u(T);var e=new Array(256);u(e);var D=new Array(v);u(D);var Q,U,tt,W=new Array(i);function q(l,k,P,j,S){this.static_tree=l,this.extra_bits=k,this.extra_base=P,this.elems=j,this.max_length=S,this.has_stree=l&&l.length}function O(l,k){this.dyn_tree=l,this.max_code=0,this.stat_desc=k}function C(l){return l<256?T[l]:T[256+(l>>>7)]}function X(l,k){l.pending_buf[l.pending++]=255&k,l.pending_buf[l.pending++]=k>>>8&255}function $(l,k,P){l.bi_valid>o-P?(l.bi_buf|=k<<l.bi_valid&65535,X(l,l.bi_buf),l.bi_buf=k>>o-l.bi_valid,l.bi_valid+=P-o):(l.bi_buf|=k<<l.bi_valid&65535,l.bi_valid+=P)}function G(l,k,P){$(l,P[2*k],P[2*k+1])}function st(l,k){for(var P=0;P|=1&l,l>>>=1,P<<=1,0<--k;);return P>>>1}function ct(l,k,P){var j,S,Z=new Array(c+1),J=0;for(j=1;j<=c;j++)Z[j]=J=J+P[j-1]<<1;for(S=0;S<=k;S++){var M=l[2*S+1];M!==0&&(l[2*S]=st(Z[M]++,M))}}function et(l){var k;for(k=0;k<g;k++)l.dyn_ltree[2*k]=0;for(k=0;k<i;k++)l.dyn_dtree[2*k]=0;for(k=0;k<p;k++)l.bl_tree[2*k]=0;l.dyn_ltree[2*y]=1,l.opt_len=l.static_len=0,l.last_lit=l.matches=0}function nt(l){8<l.bi_valid?X(l,l.bi_buf):0<l.bi_valid&&(l.pending_buf[l.pending++]=l.bi_buf),l.bi_buf=0,l.bi_valid=0}function lt(l,k,P,j){var S=2*k,Z=2*P;return l[S]<l[Z]||l[S]===l[Z]&&j[k]<=j[P]}function at(l,k,P){for(var j=l.heap[P],S=P<<1;S<=l.heap_len&&(S<l.heap_len&&lt(k,l.heap[S+1],l.heap[S],l.depth)&&S++,!lt(k,j,l.heap[S],l.depth));)l.heap[P]=l.heap[S],P=S,S<<=1;l.heap[P]=j}function ft(l,k,P){var j,S,Z,J,M=0;if(l.last_lit!==0)for(;j=l.pending_buf[l.d_buf+2*M]<<8|l.pending_buf[l.d_buf+2*M+1],S=l.pending_buf[l.l_buf+M],M++,j===0?G(l,S,k):(G(l,(Z=e[S])+_+1,k),(J=A[Z])!==0&&$(l,S-=D[Z],J),G(l,Z=C(--j),P),(J=L[Z])!==0&&$(l,j-=W[Z],J)),M<l.last_lit;);G(l,y,k)}function dt(l,k){var P,j,S,Z=k.dyn_tree,J=k.stat_desc.static_tree,M=k.stat_desc.has_stree,Y=k.stat_desc.elems,it=-1;for(l.heap_len=0,l.heap_max=n,P=0;P<Y;P++)Z[2*P]!==0?(l.heap[++l.heap_len]=it=P,l.depth[P]=0):Z[2*P+1]=0;for(;l.heap_len<2;)Z[2*(S=l.heap[++l.heap_len]=it<2?++it:0)]=1,l.depth[S]=0,l.opt_len--,M&&(l.static_len-=J[2*S+1]);for(k.max_code=it,P=l.heap_len>>1;1<=P;P--)at(l,Z,P);for(S=Y;P=l.heap[1],l.heap[1]=l.heap[l.heap_len--],at(l,Z,1),j=l.heap[1],l.heap[--l.heap_max]=P,l.heap[--l.heap_max]=j,Z[2*S]=Z[2*P]+Z[2*j],l.depth[S]=(l.depth[P]>=l.depth[j]?l.depth[P]:l.depth[j])+1,Z[2*P+1]=Z[2*j+1]=S,l.heap[1]=S++,at(l,Z,1),2<=l.heap_len;);l.heap[--l.heap_max]=l.heap[1],function(rt,ht){var vt,pt,bt,ot,kt,zt,mt=ht.dyn_tree,It=ht.max_code,Kt=ht.stat_desc.static_tree,Yt=ht.stat_desc.has_stree,Xt=ht.stat_desc.extra_bits,Rt=ht.stat_desc.extra_base,wt=ht.stat_desc.max_length,xt=0;for(ot=0;ot<=c;ot++)rt.bl_count[ot]=0;for(mt[2*rt.heap[rt.heap_max]+1]=0,vt=rt.heap_max+1;vt<n;vt++)wt<(ot=mt[2*mt[2*(pt=rt.heap[vt])+1]+1]+1)&&(ot=wt,xt++),mt[2*pt+1]=ot,It<pt||(rt.bl_count[ot]++,kt=0,Rt<=pt&&(kt=Xt[pt-Rt]),zt=mt[2*pt],rt.opt_len+=zt*(ot+kt),Yt&&(rt.static_len+=zt*(Kt[2*pt+1]+kt)));if(xt!==0){do{for(ot=wt-1;rt.bl_count[ot]===0;)ot--;rt.bl_count[ot]--,rt.bl_count[ot+1]+=2,rt.bl_count[wt]--,xt-=2}while(0<xt);for(ot=wt;ot!==0;ot--)for(pt=rt.bl_count[ot];pt!==0;)It<(bt=rt.heap[--vt])||(mt[2*bt+1]!==ot&&(rt.opt_len+=(ot-mt[2*bt+1])*mt[2*bt],mt[2*bt+1]=ot),pt--)}}(l,k),ct(Z,it,l.bl_count)}function t(l,k,P){var j,S,Z=-1,J=k[1],M=0,Y=7,it=4;for(J===0&&(Y=138,it=3),k[2*(P+1)+1]=65535,j=0;j<=P;j++)S=J,J=k[2*(j+1)+1],++M<Y&&S===J||(M<it?l.bl_tree[2*S]+=M:S!==0?(S!==Z&&l.bl_tree[2*S]++,l.bl_tree[2*E]++):M<=10?l.bl_tree[2*x]++:l.bl_tree[2*B]++,Z=S,it=(M=0)===J?(Y=138,3):S===J?(Y=6,3):(Y=7,4))}function F(l,k,P){var j,S,Z=-1,J=k[1],M=0,Y=7,it=4;for(J===0&&(Y=138,it=3),j=0;j<=P;j++)if(S=J,J=k[2*(j+1)+1],!(++M<Y&&S===J)){if(M<it)for(;G(l,S,l.bl_tree),--M!=0;);else S!==0?(S!==Z&&(G(l,S,l.bl_tree),M--),G(l,E,l.bl_tree),$(l,M-3,2)):M<=10?(G(l,x,l.bl_tree),$(l,M-3,3)):(G(l,B,l.bl_tree),$(l,M-11,7));Z=S,it=(M=0)===J?(Y=138,3):S===J?(Y=6,3):(Y=7,4)}}u(W);var R=!1;function f(l,k,P,j){$(l,(d<<1)+(j?1:0),3),function(S,Z,J,M){nt(S),M&&(X(S,J),X(S,~J)),s.arraySet(S.pending_buf,S.window,Z,J,S.pending),S.pending+=J}(l,k,P,!0)}b._tr_init=function(l){R||(function(){var k,P,j,S,Z,J=new Array(c+1);for(S=j=0;S<v-1;S++)for(D[S]=j,k=0;k<1<<A[S];k++)e[j++]=S;for(e[j-1]=S,S=Z=0;S<16;S++)for(W[S]=Z,k=0;k<1<<L[S];k++)T[Z++]=S;for(Z>>=7;S<i;S++)for(W[S]=Z<<7,k=0;k<1<<L[S]-7;k++)T[256+Z++]=S;for(P=0;P<=c;P++)J[P]=0;for(k=0;k<=143;)V[2*k+1]=8,k++,J[8]++;for(;k<=255;)V[2*k+1]=9,k++,J[9]++;for(;k<=279;)V[2*k+1]=7,k++,J[7]++;for(;k<=287;)V[2*k+1]=8,k++,J[8]++;for(ct(V,g+1,J),k=0;k<i;k++)w[2*k+1]=5,w[2*k]=st(k,5);Q=new q(V,A,_+1,g,c),U=new q(w,L,0,i,c),tt=new q(new Array(0),I,0,p,m)}(),R=!0),l.l_desc=new O(l.dyn_ltree,Q),l.d_desc=new O(l.dyn_dtree,U),l.bl_desc=new O(l.bl_tree,tt),l.bi_buf=0,l.bi_valid=0,et(l)},b._tr_stored_block=f,b._tr_flush_block=function(l,k,P,j){var S,Z,J=0;0<l.level?(l.strm.data_type===2&&(l.strm.data_type=function(M){var Y,it=4093624447;for(Y=0;Y<=31;Y++,it>>>=1)if(1&it&&M.dyn_ltree[2*Y]!==0)return a;if(M.dyn_ltree[18]!==0||M.dyn_ltree[20]!==0||M.dyn_ltree[26]!==0)return r;for(Y=32;Y<_;Y++)if(M.dyn_ltree[2*Y]!==0)return r;return a}(l)),dt(l,l.l_desc),dt(l,l.d_desc),J=function(M){var Y;for(t(M,M.dyn_ltree,M.l_desc.max_code),t(M,M.dyn_dtree,M.d_desc.max_code),dt(M,M.bl_desc),Y=p-1;3<=Y&&M.bl_tree[2*N[Y]+1]===0;Y--);return M.opt_len+=3*(Y+1)+5+5+4,Y}(l),S=l.opt_len+3+7>>>3,(Z=l.static_len+3+7>>>3)<=S&&(S=Z)):S=Z=P+5,P+4<=S&&k!==-1?f(l,k,P,j):l.strategy===4||Z===S?($(l,2+(j?1:0),3),ft(l,V,w)):($(l,4+(j?1:0),3),function(M,Y,it,rt){var ht;for($(M,Y-257,5),$(M,it-1,5),$(M,rt-4,4),ht=0;ht<rt;ht++)$(M,M.bl_tree[2*N[ht]+1],3);F(M,M.dyn_ltree,Y-1),F(M,M.dyn_dtree,it-1)}(l,l.l_desc.max_code+1,l.d_desc.max_code+1,J+1),ft(l,l.dyn_ltree,l.dyn_dtree)),et(l),j&&nt(l)},b._tr_tally=function(l,k,P){return l.pending_buf[l.d_buf+2*l.last_lit]=k>>>8&255,l.pending_buf[l.d_buf+2*l.last_lit+1]=255&k,l.pending_buf[l.l_buf+l.last_lit]=255&P,l.last_lit++,k===0?l.dyn_ltree[2*P]++:(l.matches++,k--,l.dyn_ltree[2*(e[P]+_+1)]++,l.dyn_dtree[2*C(k)]++),l.last_lit===l.lit_bufsize-1},b._tr_align=function(l){$(l,2,3),G(l,y,V),function(k){k.bi_valid===16?(X(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):8<=k.bi_valid&&(k.pending_buf[k.pending++]=255&k.bi_buf,k.bi_buf>>=8,k.bi_valid-=8)}(l)}},{"../utils/common":41}],53:[function(h,z,b){z.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(h,z,b){(function(s){(function(a,r){if(!a.setImmediate){var u,d,v,_,g=1,i={},p=!1,n=a.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(a);c=c&&c.setTimeout?c:a,u={}.toString.call(a.process)==="[object process]"?function(E){process.nextTick(function(){m(E)})}:function(){if(a.postMessage&&!a.importScripts){var E=!0,x=a.onmessage;return a.onmessage=function(){E=!1},a.postMessage("","*"),a.onmessage=x,E}}()?(_="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",y,!1):a.attachEvent("onmessage",y),function(E){a.postMessage(_+E,"*")}):a.MessageChannel?((v=new MessageChannel).port1.onmessage=function(E){m(E.data)},function(E){v.port2.postMessage(E)}):n&&"onreadystatechange"in n.createElement("script")?(d=n.documentElement,function(E){var x=n.createElement("script");x.onreadystatechange=function(){m(E),x.onreadystatechange=null,d.removeChild(x),x=null},d.appendChild(x)}):function(E){setTimeout(m,0,E)},c.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var x=new Array(arguments.length-1),B=0;B<x.length;B++)x[B]=arguments[B+1];var A={callback:E,args:x};return i[g]=A,u(g),g++},c.clearImmediate=o}function o(E){delete i[E]}function m(E){if(p)setTimeout(m,0,E);else{var x=i[E];if(x){p=!0;try{(function(B){var A=B.callback,L=B.args;switch(L.length){case 0:A();break;case 1:A(L[0]);break;case 2:A(L[0],L[1]);break;case 3:A(L[0],L[1],L[2]);break;default:A.apply(r,L)}})(x)}finally{o(E),p=!1}}}}function y(E){E.source===a&&typeof E.data=="string"&&E.data.indexOf(_)===0&&m(+E.data.slice(_.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof _t<"u"?_t:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ut);var ye=Ut.exports;const Bt=we(ye);var Wt={exports:{}};(function(K,H){(function(h,z){z()})(_t,function(){function h(d,v){return typeof v>"u"?v={autoBom:!1}:typeof v!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),v={autoBom:!v}),v.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function z(d,v,_){var g=new XMLHttpRequest;g.open("GET",d),g.responseType="blob",g.onload=function(){u(g.response,v,_)},g.onerror=function(){console.error("could not download file")},g.send()}function b(d){var v=new XMLHttpRequest;v.open("HEAD",d,!1);try{v.send()}catch(_){}return 200<=v.status&&299>=v.status}function s(d){try{d.dispatchEvent(new MouseEvent("click"))}catch(_){var v=document.createEvent("MouseEvents");v.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(v)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof _t=="object"&&_t.global===_t?_t:void 0,r=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(d,v,_){var g=a.URL||a.webkitURL,i=document.createElement("a");v=v||d.name||"download",i.download=v,i.rel="noopener",typeof d=="string"?(i.href=d,i.origin===location.origin?s(i):b(i.href)?z(d,v,_):s(i,i.target="_blank")):(i.href=g.createObjectURL(d),setTimeout(function(){g.revokeObjectURL(i.href)},4e4),setTimeout(function(){s(i)},0))}:"msSaveOrOpenBlob"in navigator?function(d,v,_){if(v=v||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(h(d,_),v);else if(b(d))z(d,v,_);else{var g=document.createElement("a");g.href=d,g.target="_blank",setTimeout(function(){s(g)})}}:function(d,v,_,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof d=="string")return z(d,v,_);var i=d.type==="application/octet-stream",p=/constructor/i.test(a.HTMLElement)||a.safari,n=/CriOS\/[\d]+/.test(navigator.userAgent);if((n||i&&p||r)&&typeof FileReader<"u"){var c=new FileReader;c.onloadend=function(){var y=c.result;y=n?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=y:location=y,g=null},c.readAsDataURL(d)}else{var o=a.URL||a.webkitURL,m=o.createObjectURL(d);g?g.location=m:location.href=m,g=null,setTimeout(function(){o.revokeObjectURL(m)},4e4)}});a.saveAs=u.saveAs=u,K.exports=u})})(Wt);var Zt=Wt.exports;const St=K=>{const H=K.substring(0,15),h="data:image/jpeg;base64,",z="data:image/JPEG;base64,",b="data:image/png;base64,",s="data:image/PNG;base64,",a="data:image/gif;base64,",r="data:image/GIF;base64,",u="data:image/webp;base64,",d="data:image/WEBP;base64,";return h.startsWith(H)||z.startsWith(H)?"JPEG":b.startsWith(H)||s.startsWith(H)?"PNG":a.startsWith(H)||r.startsWith(H)?"GIF":u.startsWith(H||d.startsWith(H))?"WEBP":"Unknown"},ke=K=>{const H=[];K.scene.geometries&&K.scene.geometries.forEach(s=>{s.type==="BufferGeometry"&&(H.push({uuid:s.uuid,data:s.data}),s.data="url:geometries/".concat(s.uuid,".json"))});const h=[];K.scene.images&&K.scene.images.forEach(s=>{s.url&&(h.push({uuid:s.uuid,url:s.url}),s.url="url:images/".concat(s.uuid,".").concat(St(s.url)))});const z=new Bt;if(H.length){const s=z.folder("geometries");H.forEach(a=>{s.file("".concat(a.uuid,".json"),JSON.stringify(a.data))})}if(h.length){const s=z.folder("images");h.forEach(a=>{s.file("".concat(a.uuid,".").concat(St(a.url)),a.url.split(";base64,").pop(),{base64:!0})})}const b=JSON.stringify(K);return z.file("app.json",b),z.generateAsync({type:"blob"}).then(s=>{Zt.saveAs(s,"config.zip")})},At=(K,H,h)=>{K.geometries<=0&&K.images<=0&&h(H)},xe=K=>{var h,z;const H={geometries:0,images:0};return(h=K.scene.geometries)==null||h.forEach(b=>{b.data.startsWith("url:")&&H.geometries++}),(z=K.scene.images)==null||z.forEach(b=>{b.url.startsWith("url:")&&H.images++}),H},Ee=(K,H)=>{let h=null;return Bt.loadAsync(K).then(z=>{if(!z.files["app.json"]){console.error("非标准文件：不存在 app.json");return}z.files["app.json"].async("string").then(b=>{var a,r;h=JSON.parse(b);const s=xe(h);At(s,h,H),(a=h.scene.geometries)==null||a.forEach(u=>{u.data.startsWith("url:")&&z.files[u.data.slice(4)].async("string").then(d=>{u.data=JSON.parse(d),s.geometries--,At(s,h,H)})}),(r=h.scene.images)==null||r.forEach(u=>{if(u.url.startsWith("url:")){const d=u.url.slice(4);z.files[d].async("base64").then(v=>{const _=d.split("."),g=_[_.length-1].toUpperCase();u.url="data:image/".concat(g,";base64,").concat(v),s.images--,At(s,h,H)})}})})},z=>{console.error("".concat(K.name,": ").concat(z.message))}),h};window.THREE=Qt;function gt(K,H){for(let h=0,z=K.length;h<z;h++)K[h](H)}const ut={init:[],start:[],stop:[],keydown:[],keyup:[],pointerdown:[],pointerup:[],pointermove:[],update:[]},Se=()=>{},ze=(K,H,h,z,b)=>{const s=b.scripts||{};let a="player,renderer,scene,camera";const r={};for(const d in ut)a+=",".concat(d),r[d]=d;const u=JSON.stringify(r).replace(/\"/g,"");for(const d in s){let v=d;d===b.scene.object.uuid&&(v=H.uuid);const _=H.getObjectByProperty("uuid",v,!0);if(_===void 0){console.warn("APP.Player: Script without object.",v);continue}const g=s[d];for(let i=0;i<g.length;i++){const p=g[i],n=new Function(a,"".concat(p.source,"\nreturn ").concat(u,";")).bind(_)({width:z.width.value,height:z.height.value,setCamera:Se},K,H,h);for(const c in n)if(n[c]!==void 0){if(ut[c]===void 0){console.warn("APP.Player: Event type not supported (",c,")");continue}ut[c].push(n[c].bind(_))}}}gt(ut.init,null)};function Mt(K){gt(ut.keydown,K)}function Ht(K){gt(ut.keyup,K)}function Gt(K){gt(ut.pointerdown,K)}function $t(K){gt(ut.pointerup,K)}function Jt(K){gt(ut.pointermove,K)}const Ce=()=>{document.addEventListener("keydown",Mt),document.addEventListener("keyup",Ht),document.addEventListener("pointerdown",Gt),document.addEventListener("pointerup",$t),document.addEventListener("pointermove",Jt),gt(ut.start,null)},Ae=()=>{document.removeEventListener("keydown",Mt),document.removeEventListener("keyup",Ht),document.removeEventListener("pointerdown",Gt),document.removeEventListener("pointerup",$t),document.removeEventListener("pointermove",Jt),gt(ut.stop,null),ut.init=[],ut.start=[],ut.stop=[],ut.keydown=[],ut.keyup=[],ut.pointerdown=[],ut.pointerup=[],ut.pointermove=[],ut.update=[]},Oe=(K,H)=>{gt(ut.update,{time:K,delta:H})},Be=K=>{const H="const scriptsJson = \n".concat(JSON.stringify(K),"\n");return"/* eslint-disable prefer-rest-params */\n/* eslint-disable no-undefined */\n/* eslint-disable guard-for-in */\nimport * as THREE from 'three'\n\nwindow.THREE = THREE // Used by APP Scripts.\nconst Grscwh = { scene: null, renderer: null, camera: null, sizes: null }\nconst player = {\n	get renderer() {\n		return Grscwh.renderer?.value\n	},\n	loader: new THREE.TextureLoader(),\n	get scene() {\n			return Grscwh.scene?.value\n	},\n	get camera() {\n			return Grscwh.camera?.value\n	},\n	get width() {\n			return Grscwh.sizes?.width?.value\n	},\n	get height() {\n			return Grscwh.sizes?.height?.value\n	},\n	get dom() {\n			return Grscwh.renderer?.value.domElement.parentElement\n	},\n	get canvas() {\n			return Grscwh.renderer?.value.domElement\n	},\n	events: {},\n	init(scene, renderer, camera, sizes) {\n			Grscwh.scene = scene\n			Grscwh.renderer = renderer\n			Grscwh.camera = camera\n			Grscwh.sizes = sizes\n	},\n	load() {\n		".concat(H,"\n		this.events = {\n				init: [],\n				start: [],\n				stop: [],\n				keydown: [],\n				keyup: [],\n				pointerdown: [],\n				pointerup: [],\n				pointermove: [],\n				update: [],\n		}\n		let scriptWrapParams = 'player,renderer,scene,camera'\n		const scriptWrapResultObj = {}\n\n		for (const eventKey in this.events) {\n				scriptWrapParams += `,${eventKey}`\n				scriptWrapResultObj[eventKey] = eventKey\n		}\n		const scriptWrapResult = JSON.stringify(scriptWrapResultObj).replace(/\\\"/g, '')\n		for (const uuid in scriptsJson) {\n				const object = this.scene.getObjectByProperty('uuid', uuid, true)\n				if (object === undefined) {\n						console.warn('player: Script without object.', uuid)\n						continue\n				}\n				const scripts = scriptsJson[uuid]\n				for (let i = 0; i < scripts.length; i++) {\n						const script = scripts[i]\n						// eslint-disable-next-line no-new-func\n						const functions = new Function(scriptWrapParams, `${script.source}\nreturn ${scriptWrapResult};`).bind(object)(\n								this,\n								this.renderer,\n								this.scene,\n								this.camera,\n						)\n						for (const name in functions) {\n								if (functions[name] === undefined) continue\n								if (this.events[name] === undefined) {\n										console.warn('player: Event type not supported (', name, ')')\n										continue\n								}\n								this.events[name].push(functions[name].bind(object))\n						}\n				}\n				this.dispatch(this.events.init, arguments)\n		}\n	},\n	dispatch(array, event) {\n		for (let i = 0, l = array.length; i < l; i++) {\n				array[i](event)\n		}\n	},\n	setCamera(value) {\n			console.warn('暂时不考虑摄像机的设置函数', value)\n			// camera = value\n			// camera.aspect = this.width / this.height\n			// camera.updateProjectionMatrix()\n	},\n	setScene(value) {\n			console.warn('暂时不考虑场景的设置函数', value)\n			// scene = value\n	},\n	setPixelRatio(value) {\n			console.warn('暂时不考虑像素比的设置函数', value)\n	},\n	setSize(value) {\n			console.warn('暂时不考虑尺寸的设置函数', value)\n	},\n	dispose() {\n			// renderer.dispose();\n			// camera = undefined;\n			// scene = undefined;\n			console.warn('暂时不考虑释放资源的函数')\n	},\n	onKeyDown(event) {\n		player.dispatch(player.events.keydown, event)\n	},\n	onKeyUp(event) {\n			player.dispatch(player.events.keyup, event)\n	},\n	onPointerDown(event) {\n			player.dispatch(player.events.pointerdown, event)\n	},\n	onPointerUp(event) {\n			player.dispatch(player.events.pointerup, event)\n	},\n	onPointerMove(event) {\n			player.dispatch(player.events.pointermove, event)\n	},\n	play() {\n			document.addEventListener('keydown', this.onKeyDown)\n			document.addEventListener('keyup', this.onKeyUp)\n			document.addEventListener('pointerdown', this.onPointerDown)\n			document.addEventListener('pointerup', this.onPointerUp)\n			document.addEventListener('pointermove', this.onPointerMove)\n			this.dispatch(this.events.start, null)\n			//renderer.setAnimationLoop( animate ); 播放是自动的\n	},\n	stop() {\n			document.removeEventListener('keydown', this.onKeyDown)\n			document.removeEventListener('keyup', this.onKeyUp)\n			document.removeEventListener('pointerdown', this.onPointerDown)\n			document.removeEventListener('pointerup', this.onPointerUp)\n			document.removeEventListener('pointermove', this.onPointerMove)\n			this.dispatch(this.events.stop, arguments)\n			// renderer.setAnimationLoop( null );播放是自动的\n	},\n	render(elapsed, delta) {\n			this.dispatch(this.events.update, { time: elapsed, delta })\n	},\n}\nexport default player\n")},Ie=(K,H,h,z)=>{const r=h.object,{uuid:b}=r,s=Ft(r,["uuid"]),a=JSON.parse(JSON.stringify(h));return a.object=s,'\n<template>\n	<TresCanvas v-bind="state">\n		'.concat(z.orbitControls?"<OrbitControls />":"","\n		").concat(h?"<Tres".concat(h.object.type,'  ref="cameraRef" uuid="').concat(h.object.uuid,'" name="').concat(h.object.name,'" />'):"","\n		").concat(K,"\n		").concat(z.gridHelper?"<TresGridHelper />":"","\n	</TresCanvas>\n</template>\n<script setup lang=\"ts\">\nimport * as THREE from 'three'\nimport { reactive, watch, ref } from 'vue'\nimport { TresCanvas } from '@tresjs/core'\nimport { OrbitControls } from '@tresjs/cientos'\nimport sceneCom from '../components/scene.vue'\n\nconst state = reactive({\n	clearColor: '#201919',\n	windowSize:true,\n	antialias: true,\n	shadows: ").concat(H.shadows?"true":"false",",\n	shadowMapType: ").concat(H.shadowType?H.shadowType:"THREE.PCFShadowMap",",\n	toneMapping: ").concat(H.toneMapping?H.toneMapping:"THREE.NoToneMapping",",\n	toneMappingExposure:").concat(H.toneMappingExposure?H.toneMappingExposure:"1",",\n})\n\nconst cameraConfig = ").concat(a?"".concat(JSON.stringify(a)):"{}","\nconst loader = new THREE.ObjectLoader()\nconst cameraObject = loader.parse(cameraConfig)\nconst cameraRef = ref(null)\nwatch(\n	() => cameraRef.value,\n	(val) => {\n			val.copy(cameraObject)\n	},\n)\n<\/script>\n	")},Re=(K,H)=>(K.file("components/scene.vue","<template>\n	<TresGroup ref=\"group\" />\n</template>\n<script setup lang=\"ts\">\nimport { ref, watch } from 'vue'\nimport * as THREE from 'three'\nimport { loadJson, convertImageToBase64 } from 'PLS/tresEditor'\nimport { useTresContext, useRenderLoop } from '@tresjs/core'\nimport player from '../common/eventScript'\nconst { scene: tresScene, renderer, camera, sizes } = useTresContext()\nplayer.init(tresScene, renderer, camera, sizes)\n\nconst loader = new THREE.ObjectLoader()\nconst scene = await loadJson('./plugins/".concat(H,"/json/scene.json')\n\nfor (const geometry of scene.geometries) {\n	if (geometry.data.startsWith('url:')) {\n			let url = geometry.data.slice(4)\n      if (url.startsWith('geometries/')) {\n          url = `./plugins/").concat(H,"/${url}`\n      }\n      geometry.data = await loadJson(url)\n	}\n}\nfor (const image of scene.images) {\n	if (image.url.startsWith('url:')) {\n			let url = image.url.slice(4)\n      if (url.startsWith('images/')) {\n         url = `./plugins/").concat(H,"/${url}`\n      }\n      image.url = await convertImageToBase64(url)\n	}\n}\n\nconst group = ref(null) as any\nwatch(\n	() => group.value,\n	(newVal) => {\n			if (newVal) {\n					const sceneObject = loader.parse(scene)\n					newVal.add(...sceneObject.children)\n					tresScene.value.background = sceneObject.background\n					tresScene.value.environment = sceneObject.environment\n					tresScene.value.fog = sceneObject.fog\n					player.load()\n					player.play()\n			}\n	},\n)\nconst { onLoop } = useRenderLoop()\nonLoop(({ delta, elapsed }) => {\n    if (player.renderer) {\n        player.render(elapsed * 1000, delta * 1000)\n    }\n})\n<\/script>")),"<Suspense>\n			<sceneCom />\n		</Suspense>"),Te=K=>{const H=new Date,h=H.getFullYear(),z=String(H.getMonth()+1).padStart(2,"0"),b=String(H.getDate()).padStart(2,"0"),s="".concat(h,"-").concat(z,"-").concat(b);return'\n	export default {\n		"name": "'.concat(K,'",\n		"title": "编辑器导出的插件",\n		"intro": "描述",\n		"version": "0.0.1",\n		"author": "作者名",\n		"website": "站点地址",\n		"state": "active",\n		"creatTime": "').concat(s,'",\n		"updateTime": "').concat(s,'",\n		"require": [],\n		"preview": [\n			{ "src": "plugins/basic/base/preview/theBasic.png", "type": "img", "name": "index", "title": "实例" },\n		]\n	}')},Fe=(K,H)=>{const h=[];H.geometries&&H.geometries.forEach(b=>{b.type==="BufferGeometry"&&(h.push({uuid:b.uuid,data:b.data}),b.data="url:geometries/".concat(b.uuid,".json"))});const z=[];if(H.images&&H.images.forEach(b=>{b.url&&(z.push({uuid:b.uuid,url:b.url}),b.url="url:images/".concat(b.uuid,".").concat(St(b.url)))}),h.length){const b=K.folder("geometries");h.forEach(s=>{b.file("".concat(s.uuid,".json"),JSON.stringify(s.data))})}if(z.length){const b=K.folder("images");z.forEach(s=>{b.file("".concat(s.uuid,".").concat(St(s.url)),s.url.split(";base64,").pop(),{base64:!0})})}K.file("json/scene.json",JSON.stringify(H))};function De(K,H){const h=H.pluginName,z=new Bt,b=z.folder("public/plugins/".concat(h));Fe(b,K.scene);const s=z.folder("src/plugins/".concat(h));s.file("config.js",Te(h));const a=Ie(Re(s,h),K.project,K.camera,H);return s.file("pages/index.vue",a),s.file("common/eventScript.js",Be(K.scripts)),z.generateAsync({type:"blob"}).then(r=>{Zt.saveAs(r,"".concat(h,".zip"))})}const Pe=Nt({__name:"importJson",setup(K){let H,h=null;var z=new te;let b=null;const{scene:s,renderer:a,camera:r,sizes:u}=ee(),d=()=>{if(!b)return;const B=L=>{var I,N;(I=L.geometry)==null||I.dispose(),(N=L.material)==null||N.dispose()},A=L=>{let I=L.children.filter(N=>!!N);I.forEach(N=>{N.children.length?A(N):(B(N),N.clear())}),L.clear(),I=null};A(b),b=null},v=B=>{d(),Ae(),b=new se,B.children&&(b.children=B.children,s.value.add(b),s.value.background=B.background,s.value.environment=B.environment,s.value.fog=B.fog)},_=new re;_.addButton({title:"清空场景",label:"clear"}).on("click",()=>{confirm("确定要执行操作吗？")&&window.location.reload()}),_.addButton({title:"导入原生场景Json",label:"srcJson"}).on("click",()=>{var B,A;if(h){(A=(B=yt).warning)==null||A.call(B,{content:"先清空场景",colorful:!0});return}H&&(H.accept=".json",H.value=null,H.click())});const p=_.addFolder({title:"分解场景[中间件 测试用]"});p.addButton({title:"生成分解场景Zip",label:"Json2Zip"}).on("click",()=>{var B,A;h?ke(h):(A=(B=yt).warning)==null||A.call(B,{content:"场景内无物体",colorful:!0})}),p.addButton({title:"导入分解场景Zip",label:"Zip2Json"}).on("click",()=>{var B,A;h?(A=(B=yt).warning)==null||A.call(B,{content:"先清空场景",colorful:!0}):H&&(H.accept=".zip",H.value=null,H.click())});const o={orbitControls:!0,gridHelper:!0,pluginName:"testEditor"},m=_.addFolder({title:"TvT插件包"});m.addBinding(o,"pluginName",{label:"插件名称"}),m.addBinding(o,"orbitControls",{label:"默认控制器"}),m.addBinding(o,"gridHelper",{label:"默认网格"}),m.addButton({title:"生成插件包",label:"MakePlugin"}).on("click",()=>{var B,A,L,I;h?o.pluginName?De(h,o):(A=(B=yt).warning)==null||A.call(B,{content:"请正确填写插件名称",colorful:!0}):(I=(L=yt).warning)==null||I.call(L,{content:"场景内无物体",colorful:!0})});const E=B=>{h=B,v(z.parse(h.scene)),ze(a.value,s.value,r.value,u,h),Ce()};ne(()=>{H=document.getElementById("fileInput"),H&&(H.onchange=B=>{const A=B.target.files[0];if(H.accept===".json"){const L=new FileReader;L.onload=I=>{const N=I.target.result;E(JSON.parse(N))},L.readAsText(A)}H.accept===".zip"&&Ee(A,E)})});const{onLoop:x}=ie();return x(({delta:B,elapsed:A})=>{Oe(A*1e3,B*1e3)}),(B,A)=>null}}),Le=Ot("TresPerspectiveCamera",{position:[15,15,15],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1),je=Ot("TresGridHelper",null,null,-1),Ne=Ot("input",{id:"fileInput",type:"file",accept:".zip",style:{display:"none"}},null,-1),He=Nt({__name:"simpleImport",setup(K){const H=Dt({clearColor:"#201919",shadows:!0,alpha:!1,shadowMapType:ae,outputColorSpace:oe,toneMapping:ue}),h=Dt({enableDamping:!0,dampingFactor:.05}),z=le(null);return ce(()=>{z.value}),(b,s)=>(Pt(),he(pe,null,[Ct(jt(fe),de(H,{"window-size":""}),{default:Lt(()=>[Le,Ct(jt(me),_e(ge(h)),null,16),(Pt(),ve(be,null,{default:Lt(()=>[Ct(Pe)]),_:1})),je]),_:1},16),Ne],64))}});export{He as default};

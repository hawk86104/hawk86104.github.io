import{a6 as t,C as e,a3 as n}from"./three.6E5muTWJ1722409645193.js";import{$ as r,T as o,d as a,x as s}from"./@tresjs.qmCJ68Vp1722409645193.js";import{a as i}from"./index.mNcWtqYh1722409645193.js";import"./index.dSFV0dil1722409645193.js";import{C as l}from"./three-custom-shader-material.Tfk8gm3s1722409645193.js";import"./object-hash.Une5niKX1722409645193.js";import"./@amap.VDWlHANn1722409645193.js";import"./glsl-tokenizer.bKHxJMPW1722409645193.js";import{p as c}from"./gl-noise.BrVtymbx1722409645193.js";import{d as u,b as p,a1 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as y,aj as M,ak as x,m as j,al as z}from"./@vue.9bHx4gg21722409645193.js";import{P as T}from"./tweakpane.yHWGBmom1722409645193.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.7_Kqrz6V1722409645193.js";import"./@vueuse.NFOCyQQL1722409645193.js";import"./three-stdlib.lGHJYkjv1722409645193.js";import"./@pmndrs.9AsxXQ-l1722409645193.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Rr9HPxcG1722409645193.js";import"./all.three.GEVYdC2c1722409645193.js";import"./oimophysics.x0jH7fze1722409645193.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.L-WtQKek1722409645193.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.0McortQS1722409645193.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.-poSRcmS1722409645193.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.qhp2OAK41722409645193.js";import"./glsl-token-string.tLooI1vy1722409645193.js";import"./glsl-token-functions.9RlG2kRC1722409645193.js";import"./jszip.EBLL5bdU1722409645193.js";const S=H;!function(t,e){const n=H,r=P();for(;;)try{if(682504===parseInt(n(224))/1+-parseInt(n(263))/2+-parseInt(n(235))/3*(parseInt(n(246))/4)+-parseInt(n(257))/5+parseInt(n(236))/6*(-parseInt(n(260))/7)+-parseInt(n(226))/8*(parseInt(n(209))/9)+parseInt(n(232))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[H(254)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=H,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=O(t(240));e[t(218)](r+t(256))&&n[t(218)](r+t(214))?O():r("0")}))()}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[H(254)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function H(t,e){const n=P();return(H=function(t,e){return n[t-=207]})(t,e)}B(void 0,(function(){const t=H;let e;try{e=Function(t(258)+t(267)+");")()}catch(o){e=window}const n=e[t(238)]=e[t(238)]||{},r=[t(252),"warn",t(247),"error",t(237),t(222),"trace"];for(let a=0;a<r[t(241)];a++){const e=B[t(221)][t(228)].bind(B),o=r[a],s=n[o]||e;e[t(215)]=B[t(242)](B),e[t(244)]=s[t(244)].bind(s),n[o]=e}}))();const G=["rotation-x"],D=[S(219)];function P(){const t=["TresBoxGeometry","init","length","bind","while (true) {}","toString","value","176CHwvZJ","info","vertex","waterHighlight","Flatshading","vertexShader","log","uHeight","apply","fragmentShader","chain","1152840YkcMar","return (function() ","waterColor","2579619BsLhSo","needsUpdate","Color","434564DxKadS","gger","convertLinearToSRGB","action",'{}.constructor("return this")( )',"baseMaterial","DoubleSide","1089QhcZzC","MeshPhysicalMaterial","#52a7f7","fragment","#b3ffff","input","__proto__","dispose","call","test","args","customWaterMesh","constructor","table","string","1328816nGDcBX","flatShading","77416iAEzAw","brightness","prototype","height","material","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","24309840RPBEJP","side","debu","74319BDCRzT","6qztLTL","exception","console"];return(P=function(){return t})()}const k=u({__name:S(220),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(211)},waterHighlight:{default:S(213)},brightness:{default:1},baseMaterial:{default:t[S(210)]}},setup(a){const s=S,i=a,u=p(null),b={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:s(231)},w={uTime:{value:0},waterColor:{value:new(t[s(262)])(i[s(259)]).convertLinearToSRGB()},waterHighlight:{value:new e(i[s(249)])[s(265)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(227)]},uHeight:{value:i[s(229)]}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=s;w.uTime[e(245)]=-t/5})),f((()=>{const n=s;i[n(229)]&&(w[n(253)][n(245)]=i[n(229)]),i.waterColor&&(w[n(259)].value=new e(i[n(259)]).convertLinearToSRGB()),i[n(249)]&&(w[n(249)][n(245)]=new(t[n(262)])(i.waterHighlight)[n(265)]()),i.brightness&&(w[n(227)][n(245)]=i[n(227)])})),g((()=>i[s(250)]),(t=>{const e=s;u[e(245)][e(230)][e(261)]=!0})),g((()=>i[s(207)]),(e=>{const n=s,r=new l({baseMaterial:t[e],vertexShader:c(b[n(248)]),fragmentShader:b[n(212)],uniforms:w,flatShading:i[n(250)],side:t[n(208)],roughness:.2,metalness:.1,silent:!0});u[n(245)][n(230)][n(216)](),u[n(245)].material=r})),(e,r)=>{const a=s;return h(),m("TresMesh",{ref_key:"tmRef",ref:u,"rotation-x":-Math.PI/2},[v(a(239),{args:[5,5,e[a(229)],64,64,1]},null,8,D),d(_(o),{baseMaterial:n,vertexShader:_(c)(b[a(248)]),fragmentShader:b[a(212)],uniforms:w,side:t[a(208)],roughness:.2,metalness:.1,flatShading:e[a(250)],silent:""},null,8,[a(207),a(251),a(255),a(233),a(225)])],8,G)}}});function O(t){function e(t){const n=H;if(typeof t===n(223))return function(t){}.constructor(n(243)).apply("counter");1!==(""+t/t)[n(241)]||t%20==0?function(){return!0}[n(221)](n(234)+n(264))[n(217)](n(266)):function(){return!1}[n(221)]("debu"+n(264)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const R=Z;!function(t,e){const n=Z,r=E();for(;;)try{if(495526===-parseInt(n(188))/1*(-parseInt(n(193))/2)+-parseInt(n(223))/3*(parseInt(n(234))/4)+-parseInt(n(240))/5*(parseInt(n(208))/6)+parseInt(n(231))/7*(-parseInt(n(227))/8)+-parseInt(n(248))/9+-parseInt(n(189))/10*(parseInt(n(200))/11)+parseInt(n(237))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const W=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[Z(198)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){W(this,(function(){const t=Z,e=new RegExp(t(218)),n=new RegExp(t(214),"i"),r=J(t(221));e.test(r+t(213))&&n[t(246)](r+t(232))?J():r("0")}))()}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[Z(198)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();L(void 0,(function(){const t=Z,e=function(){const t=Z;let e;try{e=Function(t(182)+t(202)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(247)]||{},r=[t(204),"warn",t(206),t(220),t(250),"table",t(199)];for(let o=0;o<r[t(191)];o++){const e=L.constructor[t(217)][t(185)](L),a=r[o],s=n[a]||e;e[t(236)]=L.bind(L),e[t(209)]=s[t(209)].bind(s),n[a]=e}}))();const F=v(R(245),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),A=v(R(190),{intensity:.5},null,-1),N=v("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1);function E(){const t=["#627179","log","MeshDepthMaterial","info","MeshLambertMaterial","12knHKdf","toString","label","counter","debu","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#b3ffff","waterHighlight","prototype","function *\\( *\\)","height","error","init","call","204KVDQdP","#3a78a2","change","浪头颜色","80RKzyyr","brightness","ACESFilmicToneMapping","MeshStandardMaterial","112637YlhHxz","input","MeshNormalMaterial","27568TvebOF","addBinding","__proto__","24084180RloiJL","pos-y.jpg","waterColor","1976175oXuBPR","Flatshading","string","gger","baseMaterial","TresPerspectiveCamera","test","console","3810105hoGgqu","customWater","exception","return (function() ","neg-z.jpg","addBlade","bind","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","while (true) {}","29tLrxwt","30eivujh","TresAmbientLight","length","MeshPhongMaterial","50234HdcTnt","MeshPhysicalMaterial","stateObject","neg-y.jpg","MeshBasicMaterial","apply","trace","1453837uizmxs","constructor",'{}.constructor("return this")( )'];return(E=function(){return t})()}function Z(t,e){const n=E();return(Z=function(t,e){return n[t-=182]})(t,e)}const $=u({__name:R(249),setup(e){const n=R,r=b({alpha:!0,toneMapping:t[n(229)],windowSize:!0,clearColor:10066329}),o=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(203),sectionColor:n(224),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=b({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(215),brightness:1,baseMaterial:n(194)}),u=new T;return u[n(235)](c,n(219),{label:"高度",min:.1,max:5,step:.1}),u[n(235)](c,n(239),{label:"水体颜色"}),u[n(235)](c,n(216),{label:n(226)}),u.addBinding(c,n(228),{label:"亮度",min:0,max:1,step:.01}),u[n(235)](c,n(241),{label:n(241)}),u[n(184)]({view:"list",label:"材质",options:[{text:"MeshPhysicalMaterial",value:n(194)},{text:n(197),value:"MeshBasicMaterial"},{text:n(233),value:n(233)},{text:"MeshStandardMaterial",value:n(230)},{text:n(192),value:n(192)},{text:"MeshToonMaterial",value:"MeshToonMaterial"},{text:n(207),value:n(207)},{text:n(205),value:"MeshDepthMaterial"}],value:c[n(244)]}),u.on(n(225),(t=>{const e=n;"材质"===t.target[e(210)]&&(c[e(244)]=t.value)})),(t,e)=>{const u=n;return h(),w(_(s),j(r,{"window-size":""}),{default:y((()=>[F,d(_(a),M(x(o)),null,16),A,N,d(k,M(x(c)),null,16),d(_(C),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(z,null,{default:y((()=>[d(_(i),{files:["pos-x.jpg","neg-x.jpg",u(238),u(196),"pos-z.jpg",u(183)],path:u(186)})])),_:1}))])),_:1},16)}}});function J(t){function e(t){const n=Z;if(typeof t===n(242))return function(t){}[n(201)](n(187))[n(198)](n(211));1!==(""+t/t)[n(191)]||t%20==0?function(){return!0}[n(201)]("debu"+n(243))[n(222)]("action"):function(){return!1}[n(201)](n(212)+"gger")[n(198)](n(195)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{$ as default};

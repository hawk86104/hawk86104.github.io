import{i as n}from"./ice-utils.wh6rpyIf1726740218347.js";import{_ as t,m as e}from"./gl-matrix.zIJ97-ov1726740218347.js";import{P as o}from"./tweakpane.yHWGBmom1726740218347.js";import{d as r,r as i,q as a,o as c,E as s,L as u,u as f}from"./@vue.JNsx1iN61726740218347.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=b;!function(n,t){const e=b,o=E();for(;;)try{if(431381===-parseInt(e(485))/1+-parseInt(e(400))/2*(parseInt(e(425))/3)+parseInt(e(435))/4+parseInt(e(478))/5*(-parseInt(e(495))/6)+parseInt(e(492))/7*(parseInt(e(480))/8)+-parseInt(e(432))/9+parseInt(e(467))/10*(parseInt(e(470))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[b(486)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){d(this,(function(){const n=b,t=new RegExp(n(397)),e=new RegExp(n(454),"i"),o=A(n(471));t[n(464)](o+n(395))&&e[n(464)](o+n(451))?A():o("0")}))()}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[b(486)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();x(void 0,(function(){const n=b;let t;try{t=Function(n(423)+'{}.constructor("return this")( ));')()}catch(r){t=window}const e=t.console=t.console||{},o=[n(458),n(403),n(448),"error",n(437),n(493),n(429)];for(let i=0;i<o[n(393)];i++){const t=x[n(436)].prototype.bind(x),r=o[i],a=e[r]||t;t[n(394)]=x[n(445)](x),t[n(446)]=a[n(446)][n(445)](a),e[r]=t}}))();const p={id:_(484)},g=[_(457)];function E(){const n=["uniformMatrix4fv","bindTexture","55nlZzUj","是否后处理","16PDnODV","createTexture","none","color","canvaswebgl","766736POnIbW","apply","bindFramebuffer","img","TEXTURE_WRAP_S","enableVertexAttribArray","COLOR_ATTACHMENT0","665364KwLzPZ","table","bufferData","246306rbybuH","change","blendFunc","slider","TEXTURE_WRAP_T","FRAMEBUFFER","clearColor","canvas","length","__proto__","chain","offset_left_bottom","function *\\( *\\)","FLOAT","NEAREST","802504Povtgt","lookAt","clear","warn","ARRAY_BUFFER","createBuffer","call","while (true) {}","create","height","TRIANGLES","ortho","addBlade","uModel","CLAMP_TO_EDGE","BLEND","translate","debu","getUniformLocation","value","innerWidth","innerHeight","gger","return (function() ","BYTES_PER_ELEMENT","6olsoNV","UNSIGNED_BYTE","mat4","TEXTURE_2D","trace","bindBuffer","useProgram","2908863dOKxUU","COLOR_BUFFER_BIT","logo-texture","319648OVnhsH","constructor","exception","webgl","getElementById","createFramebuffer","TEXTURE_MAG_FILTER","texParameteri","addBinding","string","bind","toString","drawElements","info","ONE_MINUS_SRC_ALPHA","framebufferTexture2D","input","vertexAttribPointer","RGBA","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","inline","STATIC_DRAW","src","log","width","texImage2D","offset_left_top","offset_right_bottom","offset_right_top","test","counter","hidden","25053730GblRKX","uProjection","ELEMENT_ARRAY_BUFFER","11pMcZNG","init","action","scale","querySelector","mixParam"];return(E=function(){return n})()}function b(n,t){const e=E();return(b=function(n,t){return e[n-=392]})(n,t)}const T=r({__name:"webglPostProcessing",setup(r){const d=_;let x,E,b,T,A,R,y,v,h,P,w,F,C;const I=1,U=.71,B=.76,D=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D[d(412)]({view:d(498),label:"颜色",min:0,max:1,value:.5}).on(d(496),(n=>{const t=d;j(),E.uniform1f(F,n[t(419)])}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D.addBinding(L,d(466),{label:d(479)}),D[d(443)](L,d(463),{picker:d(455),x:{min:0,max:1},y:{min:0,max:1}}).on(d(496),(n=>{const t=d;S[0]=L[t(463)].x,S[1]=L.offset_right_top.y,j()})),D[d(443)](L,d(462),{picker:d(455),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(496),(n=>{const t=d;S[5]=L.offset_right_bottom.x,S[6]=L[t(462)].y,j()})),D[d(443)](L,"offset_left_bottom",{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=d;S[10]=L[t(396)].x,S[11]=L[t(396)].y,j()})),D[d(443)](L,"offset_left_top",{picker:d(455),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(496),(n=>{const t=d;S[15]=L[t(461)].x,S[16]=L[t(461)].y,j()})),a((()=>{M()}));const M=function(){const t=d;x=document[t(474)]("#canvaswebgl"),x.width=window[t(420)],x.height=window[t(421)],E=x.getContext(t(438)),E&&(function(){const t=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=X(e,o),b=n(E,l,m),h=E[t(418)](b,t(468)),P=E[t(418)](b,"uView"),w=E[t(418)](b,t(413)),C=G(document[t(439)](t(434)))}(),j(),E.enable(E[t(415)]),E[t(497)](E.SRC_ALPHA,E[t(449)]),N())};function N(){const n=d;E[n(487)](E[n(500)],y),E[n(501)](I,U,B,1),E[n(402)](E[n(433)]),function(){const n=d;E[n(431)](b),E[n(430)](E[n(404)],T);const e=t[n(427)][n(408)]();t[n(427)][n(411)](e,0,x[n(459)],x[n(409)],0,.1,100),E[n(476)](h,!1,e);const o=t[n(427)].create();t[n(427)][n(401)](o,[0,0,1],[0,0,0],[0,1,0]),E[n(476)](P,!1,o),O(C,600,600),O(C,400,400)}(),E[n(487)](E[n(500)],null),L[n(466)]&&(E.clear(E[n(433)]),E.clearColor(0,0,1,1),E.bindBuffer(E.ARRAY_BUFFER,A),E.useProgram(R),E.bindTexture(E[n(428)],v)),E.drawElements(E[n(410)],6,E[n(426)],0),requestAnimationFrame(N)}function O(n,o,r){const i=d;let a=e[i(408)]();t[i(427)][i(416)](a,a,[o,r,0]),t[i(427)][i(473)](a,a,[250,250,0]),E[i(476)](w,!1,a),E[i(477)](E[i(428)],n),E[i(447)](E[i(410)],6,E[i(426)],0)}function j(){const t=d,e=new Uint8Array([0,1,2,0,2,3]);A=X(S,e),R=n(E,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),F=E[t(418)](R,t(475)),E.getUniformLocation(R,t(483)),function(){const n=d;v=G(x),y=E[n(440)](),E[n(487)](E[n(500)],y),E[n(450)](E[n(500)],E[n(491)],E[n(428)],v,0),E.bindFramebuffer(E[n(500)],null)}()}function G(n){const t=d,e=E[t(481)]();return E[t(477)](E[t(428)],e),n instanceof HTMLImageElement?E[t(460)](E.TEXTURE_2D,0,E.RGBA,E[t(453)],E[t(426)],n):E[t(460)](E[t(428)],0,E[t(453)],n[t(459)],n[t(409)],0,E.RGBA,E[t(426)],null),E[t(442)](E[t(428)],E.TEXTURE_MIN_FILTER,E[t(399)]),E[t(442)](E.TEXTURE_2D,E[t(441)],E[t(399)]),E[t(442)](E.TEXTURE_2D,E[t(489)],E[t(414)]),E[t(442)](E[t(428)],E[t(499)],E[t(414)]),e}function X(n,t){const e=d,o=E[e(405)]();E[e(430)](E[e(404)],o),E[e(494)](E[e(404)],n,E[e(456)]);const r=3*Float32Array[e(424)]+2*Float32Array[e(424)];E[e(452)](0,3,E[e(398)],!1,r,0),E[e(490)](0),E[e(452)](1,2,E[e(398)],!1,r,3*Float32Array[e(424)]),E[e(490)](1);const i=E[e(405)]();return E[e(430)](E.ELEMENT_ARRAY_BUFFER,i),E[e(494)](E[e(469)],t,E[e(456)]),E[e(430)](E[e(404)],null),o}return(n,t)=>{const e=d;return c(),s(e(392),p,[u(e(488),{id:e(434),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(482)}},null,8,g)])}}});function A(n){function t(n){const e=b;if(typeof n===e(444))return function(n){}[e(436)](e(407)).apply(e(465));1!==(""+n/n)[e(393)]||n%20==0?function(){return!0}.constructor(e(417)+e(422))[e(406)](e(472)):function(){return!1}[e(436)]("debu"+e(422))[e(486)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{T as default};

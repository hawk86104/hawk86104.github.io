import{importShared as r}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{qiankunWindow_1 as s,useQiankunTvtStore as S,Kk as y}from"./index.DTe2qqjO1767148983502.js";const{defineComponent:M}=await r("vue"),{createElementVNode:o,unref:u,normalizeProps:k,guardReactiveProps:C,createVNode:m,resolveComponent:b,mergeProps:x,withCtx:E,openBlock:p,createElementBlock:c,createCommentVNode:N,Fragment:R}=await r("vue"),I=["rotation"],A={key:0,class:"text-center text-white w-full absolute"},{SRGBColorSpace:D,BasicShadowMap:B,NoToneMapping:z}=await r("three"),{reactive:f,ref:d,onMounted:L,shallowRef:q,watchEffect:G}=await r("vue"),H=M({__name:"events",setup(V){const h=f({clearColor:"#201919",shadows:!0,alpha:!1,shadowMapType:B,outputColorSpace:D,toneMapping:z,windowSize:!s.__POWERED_BY_QIANKUN__}),w=f({enableDamping:!0,dampingFactor:.05,enableZoom:!0,autoRotate:!1,autoRotateSpeed:2,maxPolarAngle:Math.PI,minPolarAngle:0,maxAzimuthAngle:Math.PI,minAzimuthAngle:-Math.PI,enablePan:!0,keyPanSpeed:7,maxDistance:100,minDistance:0,minZoom:0,maxZoom:100,zoomSpeed:1,enableRotate:!0,rotateSpeed:1}),n=d(),a=q(),_=S();let i=0;const g=({elapsed:e})=>{n.value&&_.floatMove&&(i++,n.value.position.y=4+Math.sin(i/60)*3)};function v(e){e&&e.object.material.color.getHexString()!=="ffff40"&&(window.qiankunProps?.setGlobalState({mouseInState:!0,curType:"mouseIn"}),e.object.material.color.set("#ffFF40"))}function P(e){e&&e.object.material.color.getHexString()!=="006060"&&(window.qiankunProps?.setGlobalState({mouseInState:!1,curType:"mouseIn"}),e.eventObject.material.color.set("#006060"))}G(()=>{a.value&&(a.value.shadow.mapSize.set(1e3,1e3),a.value.shadow.camera.near=.5,a.value.shadow.camera.far=5e4,a.value.shadow.camera.top=20,a.value.shadow.camera.right=20,a.value.shadow.camera.left=-20,a.value.shadow.camera.bottom=-20)});const l=d("auto");return L(()=>{n.value.position.y=4;const e=document.querySelector(".app-main");e&&(l.value=`${e.clientHeight}px`)}),(e,t)=>{const T=b("TresCanvas");return p(),c(R,null,[m(T,x(h,{style:{height:l.value},onLoop:g}),{default:E(()=>[t[2]||(t[2]=o("TresPerspectiveCamera",{position:[15,15,15],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),m(u(y),k(C(w)),null,16),t[3]||(t[3]=o("TresAmbientLight",{intensity:.5},null,-1)),o("TresMesh",{ref_key:"sphereRef",ref:n,position:[0,4,0],"cast-shadow":"",onPointerenter:v,onPointerleave:P},[...t[0]||(t[0]=[o("TresSphereGeometry",{args:[2,32,32]},null,-1),o("TresMeshToonMaterial",{color:"#006060"},null,-1)])],544),o("TresMesh",{rotation:[-Math.PI/2,0,0],"receive-shadow":""},[...t[1]||(t[1]=[o("TresPlaneGeometry",{args:[20,20,20,20]},null,-1),o("TresMeshToonMaterial",null,null,-1)])],8,I),o("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:a,position:[10,8,4],intensity:1,"cast-shadow":""},null,512),t[4]||(t[4]=o("TresDirectionalLight",{position:[10,2,4],intensity:1,"cast-shadow":""},null,-1)),t[5]||(t[5]=o("TresGridHelper",null,null,-1))]),_:1},16,["style"]),u(s).__POWERED_BY_QIANKUN__?N("",!0):(p(),c("h1",A,"请通过qiankun主程序访问此页面"))],64)}}});export{H as default};

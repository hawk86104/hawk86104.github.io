import{P as t}from"./tweakpane.yHWGBmom1724070319978.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.ctRTIs-d1724070319978.js";import{_ as r}from"./heatmap.js-fix.Gy9LT7TN1724070319978.js";import{h as i,a6 as c,cj as s}from"./three.QUrV0R7c1724070319978.js";import{r as u}from"./utils.2chDn2kt1724070319978.js";import{d as a}from"./pinia.yc2Sjh9i1724070319978.js";import{b as p,d as f,a1 as l,o as h,D as d,J as m,u as g,F as y,q as v,U as w,N as b,P as I,H as _,L as j,a4 as x,r as M,j as S,g as E,m as H}from"./@vue.Q1VpS3901724070319978.js";import{c as B,d as P,a as R}from"./three-mesh-bvh.4DLdRpxs1724070319978.js";import{_ as U}from"./@fesjs.fxXnq-gV1724070319978.js";import"./@tresjs.2JnKj_Yj1724070319978.js";import"./@vueuse.2Yfo77CO1724070319978.js";import"./three-custom-shader-material.JQ_xA23o1724070319978.js";import"./object-hash.-UynEDWH1724070319978.js";import"./@amap.PfcO2up21724070319978.js";import"./jszip.ZVB-p0R-1724070319978.js";import"./glsl-tokenizer.P_7ZdKiw1724070319978.js";import"./glsl-token-string.l3IeKluQ1724070319978.js";import"./glsl-token-functions.UEj-2zyG1724070319978.js";import"./vue-router.7GyIEHku1724070319978.js";import"./lodash-es.nFpJXAf-1724070319978.js";import"./@qlin.yHhFDldE1724070319978.js";import"./@floating-ui.BPbuo5Gx1724070319978.js";import"./@juggle.7yjBMqoW1724070319978.js";function k(t,n){const e=O();return(k=function(t,n){return e[t-=213]})(t,n)}!function(t,n){const e=k,o=O();for(;;)try{if(600797===-parseInt(e(259))/1+-parseInt(e(233))/2*(parseInt(e(235))/3)+-parseInt(e(268))/4*(parseInt(e(241))/5)+-parseInt(e(256))/6*(-parseInt(e(245))/7)+parseInt(e(231))/8+parseInt(e(213))/9+parseInt(e(242))/10*(parseInt(e(250))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[k(263)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){z(this,(function(){const t=k,n=new RegExp(t(262)),e=new RegExp(t(252),"i"),o=T("init");n.test(o+"chain")&&e[t(226)](o+t(243))?T():o("0")}))()}();const A=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[k(263)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();A(void 0,(function(){const t=k;let n;try{n=Function(t(249)+t(227)+");")()}catch(r){n=window}const e=n[t(228)]=n[t(228)]||{},o=[t(264),t(232),t(218),"error",t(224),t(260),t(257)];for(let i=0;i<o[t(266)];i++){const n=A[t(265)][t(234)][t(236)](A),r=o[i],c=e[r]||n;n[t(215)]=A[t(236)](A),n.toString=c[t(247)].bind(c),e[r]=n}}))();const D=(t,n)=>t[k(240)](n)+-10;function O(){const t=["create","function *\\( *\\)","apply","log","constructor","length","stateObject","8asjhwZ","body","setData","4997070rSQGkg","height","__proto__","rgb(255,0,0)","action","info","width","position","debu","rgb(0,0,255)","none","exception","push","test",'{}.constructor("return this")( )',"console","yellow","while (true) {}","4118480nDzfaU","warn","2HmXRPr","prototype","2967369MwnBtj","bind","appendChild","rgb(0,255,0)","createElement","getValueAt","756830HbTfCG","7770tkAyUE","input","call","286048WHeelM","heatmap-canvas","toString","style","return (function() ","17809TrYncs","randInt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","_config","absolute","24qKAawP","trace","top","598807nXvete","table"];return(O=function(){return t})()}function T(t){function n(t){const e=k;if("string"==typeof t)return function(t){}[e(265)](e(230)).apply("counter");1!==(""+t/t)[e(266)]||t%20==0?function(){return!0}[e(265)](e(221)+e(253))[e(244)](e(217)):function(){return!1}[e(265)]("debu"+e(253)).apply(e(267)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function N(){const t=["apply","input","86hSHhJO","8gCzTdY","constructor","stateObject","exception","gger","error","counter","string","21581Btddvp","4480632QGBalb","4120613gcNuPJ","2483106rcqBDM","chain","function *\\( *\\)","value","2047360NBMeNm","trace","bind","warn","return (function() ","11500830LGUSEe","5Jonfwl","length","toString","action","info","prototype","while (true) {}","2219748eLwlZN","test","call","table","debu","4nsKWOD"];return(N=function(){return t})()}!function(t,n){const e=L,o=N();for(;;)try{if(739159===parseInt(e(154))/1*(-parseInt(e(145))/2)+parseInt(e(174))/3*(parseInt(e(179))/4)+parseInt(e(167))/5*(-parseInt(e(157))/6)+-parseInt(e(156))/7*(-parseInt(e(146))/8)+-parseInt(e(155))/9+parseInt(e(161))/10+parseInt(e(166))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[L(143)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){Z(this,(function(){const t=L,n=new RegExp(t(159)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=q("init");n[t(175)](o+t(158))&&e.test(o+t(144))?q():o("0")}))()}();const G=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[L(143)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function L(t,n){const e=N();return(L=function(t,n){return e[t-=143]})(t,n)}G(void 0,(function(){const t=L,n=function(){const t=L;let n;try{n=Function(t(165)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n.console||{},o=["log",t(164),t(171),t(151),t(149),t(177),t(162)];for(let r=0;r<o[t(168)];r++){const n=G[t(147)][t(172)][t(163)](G),i=o[r],c=e[i]||n;n.__proto__=G[t(163)](G),n[t(169)]=c[t(169)][t(163)](c),e[i]=n}}))();const $=a("buildingsHeatmap",(()=>{const t=p(!1),n=p(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t[L(160)]=n},setTemperature:function(t){n[L(160)]=t}}}));function q(t){function n(t){const e=L;if(typeof t===e(153))return function(t){}[e(147)](e(173))[e(143)](e(152));1!==(""+t/t)[e(168)]||t%20==0?function(){return!0}[e(147)]("debu"+e(150))[e(176)](e(170)):function(){return!1}[e(147)](e(178)+"gger")[e(143)](e(148)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const F=Q;!function(t,n){const e=Q,o=J();for(;;)try{if(949766===parseInt(e(478))/1*(parseInt(e(421))/2)+parseInt(e(465))/3+-parseInt(e(484))/4+parseInt(e(455))/5*(parseInt(e(448))/6)+-parseInt(e(426))/7+-parseInt(e(420))/8*(-parseInt(e(449))/9)+-parseInt(e(457))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Q(437)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){V(this,(function(){const t=Q,n=new RegExp(t(428)),e=new RegExp(t(453),"i"),o=Y("init");n[t(458)](o+t(467))&&e[t(458)](o+t(483))?Y():o("0")}))()}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Q(437)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();X(void 0,(function(){const t=Q,n=function(){const t=Q;let n;try{n=Function(t(476)+t(432)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},o=[t(434),"warn",t(427),t(424),"exception","table",t(436)];for(let r=0;r<o[t(466)];r++){const n=X[t(472)].prototype.bind(X),i=o[r],c=e[i]||n;n.__proto__=X[t(475)](X),n.toString=c[t(460)][t(475)](c),e[i]=n}}))();const W=[F(450),F(473)],C=[F(450)];function J(){const t=["return (function() ","attributes","205ecPqHE","while (true) {}","primitive","makeRotationX","model","input","3058240FMwqpQ","Texture","90864UBNfLk","3314XcMJtX","\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t","数值：","error","uniforms","1227107hHGRbP","info","function *\\( *\\)","BufferGeometry","setShowDiv","_config",'{}.constructor("return this")( )',"Matrix4","log","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","trace","apply","setTemperature","_renderer","uOpacity","computeBoundsTree","applyMatrix4","action","clone","width","canvas","ShaderMaterial","6RniFHB","882HLzWGN","object","geometry","land","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","2650015rTcHhK","needsUpdate","4806950RHPcvC","test","buildingsHeatmap","toString","string","prototype","opacity","数值———：","1162650AlVHdk","length","chain","matrix","debu","Mesh","DoubleSide","constructor","rotation-x","raycast","bind"];return(J=function(){return t})()}const K=f({__name:F(459),props:{model:{},opacity:{default:1}},setup(t){const n=F;(()=>{const t=Q;c[t(429)][t(462)][t(441)]=B,c[t(429)].prototype.disposeBoundsTree=P,c[t(470)][t(462)][t(474)]=R})();const e=t,o=((t=250,n=250,e=!0)=>{const o=k,i=document[o(239)](o(246));return i.style[o(220)]=o(255),!e&&(i[o(248)].display=o(223)),i[o(248)][o(258)]="0",i[o(248)].left="0",document[o(269)][o(237)](i),r[o(261)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:o(222),.55:o(238),.85:o(229),1:o(216)}})})();((t,n)=>{const e=k;if(!n){let o=0;for(n=[];o<1e3;)n[e(225)]({x:i.randInt(1,t[e(254)][e(219)]),y:i[e(251)](1,t[e(254)][e(214)]),value:i[e(251)](-10,36)}),o++}t[e(270)]({max:36,min:-10,data:n})})(o);const a=new(c[n(485)])(o[n(439)][n(446)]);a[n(456)]=!0;const p=e[n(482)].city[n(444)]();delete p.geometry[n(477)].normal,delete p[n(451)][n(477)].uv;const f=p[n(451)][n(444)]()[n(442)](p[n(468)]),v=e[n(482)][n(452)][n(444)]();delete v.geometry[n(477)].normal;const w=v[n(451)][n(444)]().applyMatrix4(v[n(468)]),b=s([f,w]);b.applyMatrix4((new(c[n(433)]))[n(481)](Math.PI/2)),u(b),b[n(441)]();const I=(t=>{const o=n;return new(c[o(447)])({vertexShader:o(435),fragmentShader:o(422),uniforms:{uOpacity:{value:e[o(463)]},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:c[o(471)]})})(a),_=new(c[n(470)])(b,I);l((()=>{const t=n;e[t(463)]&&(I[t(425)][t(440)][t(454)]=e[t(463)])}));const j=$(),x=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(431)][e(445)],y:(1-t.uv.y)*o[e(431)].height};console.log(e(423),t),console[e(434)](e(464),D(o,n)),j[e(438)](D(o,n))}},M=t=>{t&&j.$patch({showDiv:!0})},S=t=>{t&&j[n(430)](!1)};return(t,o)=>{const r=n;return h(),d(y,null,[m(r(480),{object:g(_),"rotation-x":-Math.PI/2,onPointerMove:x,onPointerEnter:M,onPointerLeave:S},null,40,W),m(r(480),{object:e.model[r(482)].children[0][r(444)]()},null,8,C)],64)}}});function Q(t,n){const e=J();return(Q=function(t,n){return e[t-=420]})(t,n)}function Y(t){function n(t){const e=Q;if(typeof t===e(461))return function(t){}[e(472)](e(479))[e(437)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(472)]("debugger").call(e(443)):function(){return!1}[e(472)](e(469)+"gger").apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const tt=U({__name:"dataDiv",setup(t){const n=$(),e=p({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return v((()=>{window.addEventListener("mousemove",o)})),w((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>b((h(),d("div",{class:"title",style:j(e.value)},"温度："+_(g(n).temperature)+"℃ ",5)),[[I,g(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]);function nt(){const t=["2886310ZUuVOV","prototype","addBinding","5ZfdHOz","透明度","2224MWfcbH","6592378NGnNqV","41391cNKXGE","toString","1756402sjToru","heatmap2","stateObject","1248gMMBBo","1008776bVeaoo","counter","length","error","constructor","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","1uncjUq","city","init","while (true) {}","7677ALsSNy","debu",'{}.constructor("return this")( )',"apply","11cWBhOY","__proto__","value","exception","12NETQnO","model","function *\\( *\\)","#000","chain","builds","return (function() ","string","table","3959010yUAcPU","call","action","log"];return(nt=function(){return t})()}const et=rt;!function(t,n){const e=rt,o=nt();for(;;)try{if(734432===parseInt(e(527))/1*(parseInt(e(515))/2)+parseInt(e(502))/3+parseInt(e(519))/4*(-parseInt(e(509))/5)+-parseInt(e(518))/6*(parseInt(e(513))/7)+parseInt(e(511))/8*(parseInt(e(485))/9)+parseInt(e(506))/10*(parseInt(e(489))/11)+parseInt(e(493))/12*(-parseInt(e(512))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ot=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[rt(488)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function rt(t,n){const e=nt();return(rt=function(t,n){return e[t-=483]})(t,n)}!function(){ot(this,(function(){const t=rt,n=new RegExp(t(495)),e=new RegExp(t(525),"i"),o=st(t(483));n[t(524)](o+t(497))&&e.test(o+"input")?st():o("0")}))()}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[rt(488)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();it(void 0,(function(){const t=rt,n=function(){const t=rt;let n;try{n=Function(t(499)+t(487)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},o=[t(505),"warn","info",t(522),t(492),t(501),"trace"];for(let r=0;r<o.length;r++){const n=it[t(523)][t(507)][t(526)](it),i=o[r],c=e[i]||n;n[t(490)]=it[t(526)](it),n.toString=c[t(514)][t(526)](c),e[i]=n}}))();const ct=f({__name:et(516),async setup(r){const i=et;let c,s;const u=p(!1),a=([c,s]=x((()=>o())),c=await c,s(),c);u[i(491)]=!0;const f=M({width:1,color:i(496),opacity:1,show:!0}),l=M({opacity:.9});return new t({title:"参数",expanded:!0})[i(508)](l,"opacity",{label:i(510),min:0,max:1,step:.1}),(t,o)=>{const r=i;return h(),d(y,null,[S(e,{showBuildings:!1,autoRotate:!1},{ability:E((()=>[S(K,H({model:g(a)},l),null,16,[r(494)]),S(n,H(f,{builds:g(a)[r(528)]}),null,16,[r(498)])])),_:1}),S(tt)],64)}}});function st(t){function n(t){const e=rt;if(typeof t===e(500))return function(t){}.constructor(e(484)).apply(e(520));1!==(""+t/t)[e(521)]||t%20==0?function(){return!0}[e(523)](e(486)+"gger")[e(503)](e(504)):function(){return!1}.constructor(e(486)+"gger")[e(488)](e(517)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{ct as default};

import"./@fesjs.C15FMxIg1742895693222.js";import{_ as t}from"./jszip.-Z3W6wk-1742895693222.js";import{F as n}from"./file-saver.GmE328kA1742895693222.js";import{cP as e,aK as s,_ as o}from"./three.DqHgeVY11742895693222.js";const a=i;!function(t,n){const e=i,s=d();for(;;)try{if(349850===-parseInt(e(188))/1+parseInt(e(219))/2*(parseInt(e(166))/3)+parseInt(e(174))/4*(parseInt(e(187))/5)+-parseInt(e(161))/6*(parseInt(e(191))/7)+-parseInt(e(209))/8*(parseInt(e(192))/9)+parseInt(e(156))/10*(-parseInt(e(213))/11)+parseInt(e(225))/12)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[i(189)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){r(this,(function(){const t=i,n=new RegExp(t(144)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=y(t(142));n[t(220)](s+t(146))&&e[t(220)](s+t(208))?y():s("0")}))()}();const c=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[i(189)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(t,n){const e=d();return i=function(t,n){return e[t-=139]},i(t,n)}async function u(t){const n=i,e=new(o[n(162)]);return new Promise(((s,o)=>{const a=n;e[a(181)](t,(t=>s(JSON[a(140)](t))),void 0,(t=>o(t)))}))}c(void 0,(function(){const t=i,n=function(){const t=i;let n;try{n=Function(t(238)+t(218)+");")()}catch(e){n=window}return n}(),e=n[t(230)]=n.console||{},s=[t(198),t(212),t(154),"error",t(171),t(202),t(184)];for(let o=0;o<s[t(195)];o++){const n=c[t(167)][t(234)][t(221)](c),a=s[o],r=e[a]||n;n.__proto__=c[t(221)](c),n[t(215)]=r[t(215)][t(221)](r),e[a]=n}}))(),e.enabled=!0;class p extends s{constructor(t){super(t)}[a(181)](t,n,e,s){const r=a,c=new(o[r(162)])(this[r(150)]);c[r(143)]("json"),c[r(181)](t,(t=>n&&n(t)),e,s)}}async function f(t){const n=a,e=new(o[n(162)]);return new Promise(((s,o)=>{const r=n;e[r(143)]("blob"),e.load(t,(n=>{const e=r,c=new FileReader;c[e(205)]=()=>{const n=e,o=function(t){const n=a,e=t[n(223)](".")[n(177)]()[n(233)]();return{jpg:"image/jpeg",jpeg:n(179),png:n(194),gif:n(207),bmp:n(203),webp:n(178)}[e]||n(173)}(t),r=c[n(157)][n(223)](",")[1];s(n(228)+o+";base64,"+r)},c[e(165)]=t=>{o(t)},c.readAsDataURL(n)}),void 0,(t=>o(t)))}))}class l extends s{constructor(t){super(t)}load(n,e,s,r){const c=a,i=new(o[c(162)])(this[c(150)]);i[c(143)](c(196)),i[c(181)](n,(async n=>{try{const s=await t.loadAsync(n);e&&e(s)}catch(s){r&&r(s)}}),s,r)}}const g=t=>{const n=a,e=t[n(216)](0,15),s=n(164),o=n(231),r=n(139),c=n(236),i=n(152),u=n(210);return s[n(169)](e)||"data:image/JPEG;base64,"[n(169)](e)?"JPEG":o.startsWith(e)||"data:image/PNG;base64,"[n(169)](e)?n(226):r[n(169)](e)||c[n(169)](e)?n(222):i.startsWith(e||u[n(169)](e))?"WEBP":n(199)};function d(){const t=["uuid",".json","manager","url","data:image/webp;base64,","name","info","while (true) {}","1390HaoiVu","result","data","images","then","186eFMUQu","FileLoader","counter","data:image/jpeg;base64,","onerror","1947GqQRtc","constructor","BufferGeometry","startsWith","scene","exception","message","application/octet-stream","1154272OlXeNW","get","stateObject","pop","image/webp","image/jpeg","type","load","stringify","gger","trace","readAsDataURL","data:image/","5eoIxaz","630080hIXpiH","apply",";base64,","15351qYqimY","207XQFNTS","catch","image/png","length","blob","loadAsync","log","Unknown","debu","slice","table","image/bmp","push","onloadend","string","image/gif","input","139504kHzrxk","data:image/WEBP;base64,","file","warn","8063CiaSZk","folder","toString","substring","forEach",'{}.constructor("return this")( )',"1954ygjBqK","test","bind","GIF","split","app.json","7538796TdgjET","PNG","files","data:","async","console","data:image/png;base64,","config.zip","toLowerCase","prototype","url:","data:image/GIF;base64,","url:images/","return (function() ","geometries","data:image/gif;base64,","parse","error","init","setResponseType","function *\\( *\\)","base64","chain","call"];return(d=function(){return t})()}const m=e=>{const s=a,o=[];e[s(170)][s(239)]&&e.scene.geometries[s(217)]((t=>{const n=s;t.type===n(168)&&(o[n(204)]({uuid:t[n(148)],data:t[n(158)]}),t.data="url:geometries/"+t[n(148)]+".json")}));const r=[];e.scene[s(159)]&&e[s(170)][s(159)].forEach((t=>{const n=s;t[n(151)]&&(r.push({uuid:t[n(148)],url:t[n(151)]}),t[n(151)].type?t[n(151)]=n(237)+t[n(148)]+"."+t.url.type+n(149):t[n(151)]=n(237)+t[n(148)]+"."+g(t[n(151)]))}));const c=new t;if(o[s(195)]){const t=c[s(214)](s(239));o[s(217)]((n=>{const e=s;t[e(211)](n[e(148)]+".json",JSON[e(182)](n[e(158)]))}))}if(r[s(195)]){const t=c.folder("images");r[s(217)]((n=>{const e=s;n[e(151)][e(180)]?t.file(n[e(148)]+"."+n[e(151)].type+e(149),JSON[e(182)](n[e(151)])):t[e(211)](n.uuid+"."+g(n[e(151)]),n[e(151)][e(223)](e(190))[e(177)](),{base64:!0})}))}const i=JSON[s(182)](e);return c.file(s(224),i),c.generateAsync({type:"blob"})[s(160)]((t=>{const e=s;n.saveAs(t,e(232))}))},h=(t,n,e)=>{const s=a;t[s(239)]<=0&&t[s(159)]<=0&&e(n)},b=(n,e)=>{const s=a;let o=null;return t[s(197)](n)[s(160)]((t=>{const n=s;t[n(227)]["app.json"]?t.files["app.json"][n(229)](n(206)).then((s=>{const r=n;o=JSON[r(140)](s);const c=(t=>{const n=a,e={geometries:0,images:0};return t[n(170)][n(239)]?.forEach((t=>{const s=n;t.data[s(169)](s(235))&&e.geometries++})),t[n(170)][n(159)]?.[n(217)]((t=>{const s=n;t[s(151)][s(169)](s(235))&&e.images++})),e})(o);h(c,o,e),o[r(170)].geometries?.[r(217)]((n=>{const s=r;n.data[s(169)](s(235))&&t.files[n[s(158)][s(201)](4)][s(229)](s(206)).then((t=>{const a=s;n[a(158)]=JSON[a(140)](t),c[a(239)]--,h(c,o,e)}))})),o[r(170)][r(159)]?.forEach((n=>{const s=r;if(n[s(151)].startsWith(s(235))){const a=n[s(151)][s(201)](4);a.endsWith(s(149))?t.files[a][s(229)](s(206))[s(160)]((t=>{const a=s;n.url=JSON[a(140)](t),c[a(159)]--,h(c,o,e)})):t[s(227)][a][s(229)](s(145))[s(160)]((t=>{const r=s,i=a[r(223)]("."),u=i[i[r(195)]-1].toUpperCase();n[r(151)]=r(186)+u+r(190)+t,c[r(159)]--,h(c,o,e)}))}}))})):console[n(141)]("非标准文件：不存在 app.json")}),(t=>{const e=s;console[e(141)](n[e(153)]+": "+t[e(172)])})),o};function y(t){function n(t){const e=i;if(typeof t===e(206))return function(t){}[e(167)](e(155))[e(189)](e(163));1!==(""+t/t)[e(195)]||t%20==0?function(){return!0}[e(167)](e(200)+e(183))[e(147)]("action"):function(){return!1}[e(167)](e(200)+"gger")[e(189)](e(176)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as J,l as Z,f as a,m as e,g,b as i,u as l};

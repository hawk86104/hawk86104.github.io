import{importShared as u,mergeGeometries as J}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{_sfc_main$6 as Q}from"./generalFont.vue_vue_type_script_setup_true_lang.Cx7Vff0m1767148983502.js";import"./default.vue_vue_type_script_setup_true_lang.Bjy6WD1C1767148983502.js";import"./three-mesh-ui.module.Cv5lk1vQ1767148983502.js";import"./domPanel.vue_vue_type_style_index_0_lang.DqrQKbSz1767148983502.js";import{Fs as K,gz as z,zr as q,_l as U,Kk as Z,yk as ee}from"./index.DTe2qqjO1767148983502.js";import"./index.DFx3vWyO1767148983502.js";import"./skyBoxAmesh.vue_vue_type_script_setup_true_lang.R4i3IxUx1767148983502.js";import"./skyBoxBmesh.vue_vue_type_script_setup_true_lang.D7En_9kn1767148983502.js";import{_sfc_main as te}from"./skyBoxDmesh.vue_vue_type_script_setup_true_lang.ByNLPS1R1767148983502.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Cxj_Ip691767148983502.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.DYMkkQ781767148983502.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.T7UkXoyg1767148983502.js";import"./dynamicRotatingBase.vue_vue_type_script_setup_true_lang.BVQWYa0i1767148983502.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.BCd7Uxt-1767148983502.js";import{_sfc_main as oe}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.x_N2tft71767148983502.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.Xg1Eqw4f1767148983502.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.DBVFezcY1767148983502.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.BPVumalx1767148983502.js";import"./reflectorRoundedBox.vue_vue_type_script_setup_true_lang.BOdU7iQo1767148983502.js";import"./particleBase.vue_vue_type_script_setup_true_lang.CIf_5jma1767148983502.js";import"./rippleFloor.vue_vue_type_script_setup_true_lang.BmWDhTNl1767148983502.js";import{Pane as ae}from"./tweakpane.BQRZXf8M1767148983502.js";import{instance as f}from"./Resource.DwxffO9V1767148983502.js";import{gsapWithCSS as C}from"./index.Cpf5Yeb11767148983502.js";import{_sfc_main$2 as re}from"./customShaderMaterial.vue_vue_type_script_setup_true_lang.B7dQ_CiZ1767148983502.js";import"./index.vue_vue_type_script_setup_true_lang.CjsHShHS1767148983502.js";const{defineComponent:ne}=await u("vue"),{unref:S,createElementVNode:N,withCtx:se,createVNode:ie,Fragment:ce,openBlock:le,createElementBlock:me}=await u("vue"),ue=["object","rotation-y"],pe=["rotation","geometry","material"],j=await u("three"),{ref:L,watchEffect:_e}=await u("vue"),de=ne({__name:"officeBuild",setup(y){const{scene:_}=f.getItem("officeBuild.glb"),{scene:m,camera:d}=K(),e=L(new j.Raycaster);_.traverse(o=>{o.isMesh&&(o.frustumCulled=!1,o.material.side=j.DoubleSide,o.castShadow=!0,o.receiveShadow=!0,o.material.emissive=o.material.color,o.material.emissiveMap=o.material.map,o.material.emissiveIntensity=.8,o.material.envmap=m.value.background)});const i=_.clone();let c="";const r=()=>{_.getObjectByName(c)?.traverse(o=>{o.isMesh&&(o.material=i.getObjectByName(o.name).material,o.castShadow=!0,o.receiveShadow=!0)})};window.addEventListener("pointermove",o=>{const h=new j.Vector2;h.x=o.clientX/window.innerWidth*2-1,h.y=-(o.clientY/window.innerHeight)*2+1,e.value.setFromCamera(h,d.value);const t=e.value.intersectObject(_,!0);if(t.length>0&&t[0]&&t[0].object&&t[0].object.parent){if(c===t[0].object.parent.name)return;r(),t[0].object.parent.traverse(g=>{g.isMesh&&(g.material=new j.MeshPhongMaterial({color:"#00d1ff",transparent:!0,opacity:.7,emissiveMap:g.material.map,emissiveIntensity:2}),g.castShadow=!1,g.receiveShadow=!1)}),c=t[0].object.parent.name}else c&&(r(),c="")});let s="";window.addEventListener("click",o=>{const h=new j.Vector2;h.x=o.clientX/window.innerWidth*2-1,h.y=-(o.clientY/window.innerHeight)*2+1,e.value.setFromCamera(h,d.value);const t=e.value.intersectObject(_,!0);if(t.length>0&&t[0]&&t[0].object&&t[0].object.parent){if(s==="runing")return;if(s===t[0].object.parent.name){C.to(t[0].object.parent.position,{z:i.getObjectByName(s).position.z,duration:2,ease:"power1.inOut",onComplete:()=>{s=""}}),s="runing";return}s&&C.to(_.getObjectByName(s).position,{z:i.getObjectByName(s).position.z,duration:2,ease:"power1.inOut",onComplete:()=>{s=""}}),C.to(t[0].object.parent.position,{z:i.getObjectByName(t[0].object.parent.name).position.z-40,duration:2,ease:"power1.inOut",onComplete:()=>{s=t[0].object.parent.name}}),s="runing"}});const a=new j.MeshPhysicalMaterial({roughness:.3,metalness:.05,color:"#3a4f75",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),{scene:l}=f.getItem("arctic_tooltip.glb"),p=L(null);return _e(()=>{p.value&&C.to(p.value.rotation,{y:Math.PI*2.5,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})}),(o,h)=>(le(),me(ce,null,[N("primitive",{object:S(_),"cast-shadow":"","receive-shadow":"",position:[13.5,0,-45],scale:[.2,.3,.2],name:"办公大厅","rotation-y":Math.PI},null,8,ue),N("TresMesh",{ref_key:"tooltipRef",ref:p,scale:[.05,.02,.004],rotation:[0,Math.PI/2,0],position:[12,25,-35],geometry:S(l).getObjectByName("Arctic_Tooltip_lambert4_0").geometry,material:S(a)},[ie(S(z),{center:!0,transform:""},{default:se(()=>[...h[0]||(h[0]=[N("h1",{class:"text-xs p-0.5 rounded -mt-10 text-white font-bold",style:{"font-size":"78rem",width:"5em","text-align":"center","margin-top":"1em",scale:"0.7 1.5"}}," 楼宇分层 ",-1)])]),_:1})],8,pe)],64))}}),{unref:T,createElementVNode:E,withCtx:fe,createVNode:he,Fragment:ge,openBlock:ve,createElementBlock:we}=await u("vue"),be=["object","rotation-y"],ye=["rotation","geometry","material"],A=await u("three"),{ref:ke,watchEffect:je}=await u("vue"),$e={__name:"laboratoryBuild",setup(y){const{scene:_}=f.getItem("laboratoryBuild.glb"),{scene:m}=q(),d=[],e=[];_.traverse(l=>{l.updateMatrixWorld(!0),l.isMesh&&(l.geometry.applyMatrix4(l.matrixWorld),d.push(l.geometry),l.material.emissiveMap=l.material.map,l.material.emissiveIntensity=.1,l.material.envmap=m.value.background,e.push(l.material))});const i=J(d,!0),c=new A.Mesh(i,e),{scene:r}=f.getItem("arctic_tooltip.glb"),s=new A.MeshPhysicalMaterial({roughness:.3,metalness:.05,color:"#b07560",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),a=ke(null);return je(()=>{a.value&&C.to(a.value.rotation,{y:Math.PI*2.5,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})}),(l,p)=>(ve(),we(ge,null,[E("primitive",{object:T(c),"cast-shadow":"","receive-shadow":"",position:[-33,0,7],scale:[.7,1.2,.7],name:"实验楼","rotation-y":Math.PI/2},null,8,be),E("TresMesh",{ref_key:"tooltipRef",ref:a,scale:[.03,.02,.004],rotation:[0,Math.PI/2,0],position:[-32,27,12],geometry:T(r).getObjectByName("Arctic_Tooltip_lambert4_0").geometry,material:T(s)},[he(T(z),{center:!0,transform:""},{default:fe(()=>[...p[0]||(p[0]=[E("h1",{class:"text-xs p-0.5 rounded -mt-10 text-white font-bold",style:{"font-size":"78rem",width:"4em","text-align":"center","margin-top":"1em"}},"实验楼",-1)])]),_:1})],8,ye)],64))}},{unref:x,createElementVNode:P,withCtx:Be,createVNode:D,normalizeProps:Ce,guardReactiveProps:Me,Fragment:Se,openBlock:Te,createElementBlock:xe}=await u("vue"),Ne=["object"],Ee=["rotation","geometry"],v=await u("three"),{ref:Pe,watch:H}=await u("vue"),V=3e-4,Ve={__name:"car",props:{darkModel:{type:Boolean,default:!1}},setup(y){const _=y,m={color:"#ffda99",roughness:.21,reflectivity:1,attenuationColor:"#ffda35",attenuationDistance:2,chromaticAberration:.05,anisotropicBlur:.1,distortion:1.8,temporalDistortion:0,backside:!1,thickness:1,backsideThickness:.5},{scene:d}=K(),{scene:e,nodes:i,materials:c}=f.getItem("lambo.glb");e.children[0].scale.setScalar(.02),i.glass_003.scale.setScalar(2.7),c.FrameBlack.roughness=0,c.FrameBlack.metalness=.75,c.Chrome.metalness=1,c.Chrome.roughness=0,c.BreakDiscs.metalness=.2,c.BreakDiscs.roughness=.2,c.TiresGum.metalness=0,c.TiresGum.roughness=.4,c.GreyElements.metalness=0,i.yellow_WhiteCar_0.material=new v.MeshPhysicalMaterial({roughness:.3,metalness:.05,color:"#ffda35",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),Object.values(i).forEach(t=>{t.isMesh&&(t.name.startsWith("glass")&&t.geometry.computeVertexNormals(),t.name==="silver_001_BreakDiscs_0"&&(t.material=c.BreakDiscs.clone(),t.material.color=new v.Color("#ddd")),t.castShadow=!0,t.receiveShadow=!0,t.material.emissiveMap=t.material.map,t.material.emissiveIntensity=.1,t.material.envmap=d.value.background)});const r=new v.SpotLight(16777215);e.add(r),e.add(r.target),r.angle=Math.PI/4,r.position.set(0,2,5),r.target.position.set(0,1,7),r.penumbra=.1,r.decay=.01,r.intensity=3,r.castShadow=!0,r.shadow.mapSize.width=1024,r.shadow.mapSize.height=1024,r.shadow.camera.near=.1,r.shadow.camera.far=1e3,r.shadow.camera.bias=.005,r.visible=!0;const{scene:s}=f.getItem("arctic_tooltip.glb"),a=new v.CatmullRomCurve3([new v.Vector3(10,1.5,35),new v.Vector3(35,1.5,35),new v.Vector3(35,1.5,-80),new v.Vector3(47,1.5,-80),new v.Vector3(47,1.5,35),new v.Vector3(100,1.5,35),new v.Vector3(100,1.5,47),new v.Vector3(-100,1.5,47),new v.Vector3(-100,1.5,35)]);a.curveType="catmullrom",a.closed=!0,a.tension=.2;const l=Pe(null);let p=0;const o=()=>{if(a)if(p<=1-V){const t=a.getPointAt(p),g=a.getPointAt(p+V);t&&g&&(l.value.position.set(t.x,t.y+6,t.z),e.position.set(t.x,t.y,t.z),e.lookAt(g.x,g.y,g.z)),p+=V}else p=0};H(l,t=>{t&&C.to(l.value.rotation,{y:Math.PI*2.5,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})}),H(()=>_.darkModel,t=>{r&&(r.visible=t)},{immediate:!0});const{onBeforeRender:h}=U();return h(()=>{o()}),(t,g)=>(Te(),xe(Se,null,[P("primitive",{object:x(e)},null,8,Ne),P("TresMesh",{ref_key:"tooltipRef",ref:l,scale:[.03,.02,.004],rotation:[0,Math.PI/2,0],position:[10,6,35],geometry:x(s).getObjectByName("Arctic_Tooltip_lambert4_0").geometry},[D(x(z),{center:!0,transform:""},{default:Be(()=>[...g[0]||(g[0]=[P("h1",{class:"text-xs p-0.5 rounded -mt-10 text-#ffff99 font-bold",style:{"font-size":"78rem",width:"4em","text-align":"center","margin-top":"1em"}}," 别追我 ",-1)])]),_:1}),D(x(re),Ce(Me(m)),null,16)],8,Ee)],64))}},{defineComponent:Fe}=await u("vue"),{unref:Ie,openBlock:Re,createElementBlock:Ge}=await u("vue"),Oe=["object"],{watch:ze}=await u("vue"),Le=Fe({__name:"sculpture",props:{darkModel:{type:Boolean,default:!1}},setup(y){const _=y,{scene:m}=f.getItem("vr_sculpture_park.glb"),{scene:d}=q();return m.traverse(async e=>{e.isMesh&&(e.material.emissiveMap=e.material.map,e.material.emissive=e.material.color,e.material.envmap=d.value.background,e.castShadow=!0,e.receiveShadow=!0,e.frustumCulled=!1),e.isObject3D&&(e.frustumCulled=!1,e.castShadow=!0,e.receiveShadow=!0)}),ze(()=>_.darkModel,e=>{m&&m.traverse(async i=>{i.isMesh&&(e===!1?i.material.emissiveIntensity=.6:i.material.emissiveIntensity=0)})},{immediate:!0}),(e,i)=>(Re(),Ge("primitive",{"cast-shadow":"","receive-shadow":"",object:Ie(m),name:"主场景"},null,8,Oe))}}),{unref:w,createElementVNode:n,Fragment:Ae,openBlock:De,createElementBlock:He}=await u("vue"),We={position:[10,0,0]},Ye={position:[-33*4,0,40.4]},Xe=["object"],Ke={position:[-33*3,0,40.4]},qe=["object"],Je={position:[-33*2,0,40.4]},Qe=["object"],Ue={position:[-33,0,40.4]},Ze=["object"],et={position:[0,0,40.4]},tt=["object"],ot={position:[33*2-5.5,0,40.4]},at=["object"],rt={position:[33*3-5.5,0,40.4]},nt=["object"],st={position:[-3.3,-.2,18]},it={position:[0,0,0]},ct=["object"],lt={position:[0,0,33*1]},mt=["object"],ut={position:[0,0,33*2]},pt=["object"],_t={position:[0,0,33*3]},dt=["object"],ft={position:[0,0,33*5-6]},ht=["object"],gt={position:[0,0,33*6-6]},vt=["object"],F=await u("three"),wt={__name:"street",setup(y){const m=f.getItem("low_poly_street.glb").nodes,d=m.Sketchfab_model.getObjectByName("Cube497_530");d.children[0].receiveShadow=!0;const e=m.Sketchfab_model.getObjectByName("Cube549_582");e.children[0].receiveShadow=!0;const i=m.Sketchfab_model.getObjectByName("Cube550_583");i.children[0].receiveShadow=!0;const c=m.Sketchfab_model.getObjectByName("Cube551_854");c.children[0].receiveShadow=!0;const r=m.Sketchfab_model.getObjectByName("Cube552_855");r.children[0].receiveShadow=!0;const s=m.Sketchfab_model.getObjectByName("Cube553_856");s.children[0].receiveShadow=!0;const a=new F.Group;a.add(d,e,i,c,r,s),a.scale.setScalar(.83),a.rotation.set(0,.008,0);const l=new F.Box3().setFromObject(a),p=new F.Vector3;l.getCenter(p),a.position.x=-p.x,a.position.y=-p.y,a.position.z=-p.z;const o=a.clone();return o.rotateY(Math.PI/2),(h,t)=>(De(),He(Ae,null,[n("TresGroup",We,[n("TresGroup",Ye,[n("primitive",{object:w(a).clone()},null,8,Xe)]),n("TresGroup",Ke,[n("primitive",{object:w(a).clone()},null,8,qe)]),n("TresGroup",Je,[n("primitive",{object:w(a).clone()},null,8,Qe)]),n("TresGroup",Ue,[n("primitive",{object:w(a).clone()},null,8,Ze)]),n("TresGroup",et,[n("primitive",{object:w(a).clone()},null,8,tt)]),n("TresGroup",ot,[n("primitive",{object:w(a).clone()},null,8,at)]),n("TresGroup",rt,[n("primitive",{object:w(a).clone()},null,8,nt)])]),n("TresGroup",st,[n("TresGroup",it,[n("primitive",{object:w(o).clone()},null,8,ct)]),n("TresGroup",lt,[n("primitive",{object:w(o).clone()},null,8,mt)]),n("TresGroup",ut,[n("primitive",{object:w(o).clone()},null,8,pt)]),n("TresGroup",_t,[n("primitive",{object:w(o).clone()},null,8,dt)]),n("TresGroup",ft,[n("primitive",{object:w(o).clone()},null,8,ht)]),n("TresGroup",gt,[n("primitive",{object:w(o).clone()},null,8,vt)])])],64))}},{defineComponent:bt}=await u("vue"),{unref:b,createVNode:$,createElementVNode:I,normalizeProps:yt,guardReactiveProps:kt,withCtx:R,openBlock:k,createBlock:B,createCommentVNode:M,mergeProps:W,Suspense:jt,resolveComponent:$t,Fragment:Bt,createElementBlock:Ct}=await u("vue"),{reactive:G,shallowRef:O,watch:Y}=await u("vue"),X=await u("three"),eo=bt({__name:"simplePark",setup(y){f.loadResources([{functionName:"GLTFLoader",url:"https://opensource.cdn.icegl.cn/model/digitalPark/officeBuild.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/arctic_tooltip.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/laboratoryBuild.glb"},{functionName:"GLTFLoader",url:"https://opensource.cdn.icegl.cn/model/digitalPark/low_poly_street.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/vr_sculpture_park.glb"},{functionName:"GLTFLoader",url:"./plugins/industry4/model/lambo.glb"}]);const _=G({shadows:!0,shadowMap:!0,shadowMapType:X.PCFSoftShadowMap,windowSize:!0}),m=G({enableDamping:!0,dampingFactor:.05}),d=G({cellSize:10,cellThickness:1,cellColor:"#4c4c4c",sectionColor:"#bbc26b",sectionSize:50,sectionThickness:3,fadeDistance:600,fadeStrength:3,followCamera:!1,infiniteGrid:!0}),e=O();Y(e,s=>{s&&(e.value.shadow.mapSize.set(1024*5,1024*5),e.value.shadow.bias=-1e-5,e.value.shadow.color=new X.Color(0),e.value.shadow.camera.near=.5,e.value.shadow.camera.far=5e4,e.value.shadow.camera.top=300,e.value.shadow.camera.right=300,e.value.shadow.camera.left=-300,e.value.shadow.camera.bottom=-300)});const i=O(!1),c=new ae,r=O();return c.addBinding(i,"value",{label:"黑夜模式"}),Y(i,s=>{e.value&&(e.value.visible=!s,r.value&&(r.value.context.scene.value.backgroundIntensity=s?0:1))}),(s,a)=>{const l=$t("TresCanvas");return k(),Ct(Bt,null,[$(b(Q),{useResourceManager:""}),$(l,W(_,{ref_key:"tcRef",ref:r}),{default:R(()=>[a[0]||(a[0]=I("TresPerspectiveCamera",{position:[40,30,82],fov:45,near:.1,far:1e4},null,-1)),$(b(Z),yt(kt(m)),null,16),a[1]||(a[1]=I("TresAmbientLight",{intensity:.1},null,-1)),$(b(ee),null,{default:R(()=>[I("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:e,position:[80,80,-8],intensity:3,castShadow:!0},null,512)]),_:1}),b(f).hasAllFinished.value?(k(),B(de,{key:0})):M("",!0),b(f).hasAllFinished.value?(k(),B($e,{key:1})):M("",!0),b(f).hasAllFinished.value?(k(),B(wt,{key:2})):M("",!0),b(f).hasAllFinished.value?(k(),B(Le,{key:3,darkModel:i.value},null,8,["darkModel"])):M("",!0),b(f).hasAllFinished.value?(k(),B(Ve,{key:4,darkModel:i.value},null,8,["darkModel"])):M("",!0),$(b(oe),W({args:[100,100]},d,{position:[0,-10,0]}),null,16),(k(),B(jt,null,{default:R(()=>[$(b(te),{environment:!1,texture:"./plugins/skyBox/image/kloofendal_48d_partly_cloudy_puresky.jpg"})]),_:1}))]),_:1},16)],64)}}});export{eo as default};

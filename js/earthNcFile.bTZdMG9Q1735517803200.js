import"./index.n2mPHK451735517803200.js";import{_ as n,bg as t}from"./three.-uH5I3Xp1735517803200.js";import{m as e,j as o}from"./@tresjs.0qL_P2CE1735517803200.js";import{d as r,v as a,w as i,b as s,U as c,u,o as l,D as p,I as f,a6 as m,a as d,J as y,aj as g,ak as v,j as h,f as x,g as b,al as I,F as w,r as _,e as j,m as T}from"./@vue.-THQH3GC1735517803200.js";import{M as z}from"./three-stdlib.FziVs0a41735517803200.js";import{_ as S,n as D}from"./three-tile.rGySB-KI1735517803200.js";import{N as E}from"./netcdfjs.JXoI-Rrx1735517803200.js";import{u as P,a as A,_ as k}from"./colorList.ha7jBqfi1735517803200.js";import{P as F}from"./tweakpane.yHWGBmom1735517803200.js";import{c as R,a as M}from"./informationDiv.vue_vue_type_style_index_0_scoped_d511bb21_lang.7fq3J4jw1735517803200.js";import{a as B}from"./mapBoxShow.vue_vue_type_script_setup_true_lang.S7AagKMx1735517803200.js";import{i as C}from"./informationDiv.4Pi5iLHG1735517803200.js";import"./three-custom-shader-material.T7xd34Ba1735517803200.js";import"./3d-tiles-renderer.GHuPIZFM1735517803200.js";import"./index.gnFY5PJl1735517803200.js";import"./@mapbox.6igw9pwY1735517803200.js";import"./@amap.BJG0QnpR1735517803200.js";import"./three-mesh-bvh.UZOzt2Ld1735517803200.js";import"./utils.repkt6mZ1735517803200.js";import"./@tweenjs.zdhk2VeU1735517803200.js";import"./utils.W20IHcCr1735517803200.js";import"./@fesjs.2Oz5LDgh1735517803200.js";import"./vue-router.alj9m51K1735517803200.js";import"./lodash-es.kYt-_xTG1735517803200.js";import"./@qlin.yHhFDldE1735517803200.js";import"./pinia.7wRRlR_11735517803200.js";import"./vue-demi.C4xddsk91735517803200.js";import"./@floating-ui.BPbuo5Gx1735517803200.js";import"./@juggle.7yjBMqoW1735517803200.js";import"./http.-rQnUH_51735517803200.js";import"./axios.Ng308AU61735517803200.js";import"./color.R_S4p0cZ1735517803200.js";import"./color-string.Z8m9cOyd1735517803200.js";import"./color-name.cun6jOu51735517803200.js";import"./simple-swizzle.m7YXt-Hs1735517803200.js";import"./is-arrayish.tKu3Evf81735517803200.js";import"./color-convert.vheWCayE1735517803200.js";import"./lodash.SLH2pFxf1735517803200.js";import"./naive-ui.PemoTA751735517803200.js";import"./date-fns.dsKIdits1735517803200.js";import"./@css-render.xUrekNYH1735517803200.js";import"./seemly.SjiSeX2v1735517803200.js";import"./css-render.lTDzG2Km1735517803200.js";import"./@emotion.ZD_ZYAgY1735517803200.js";import"./vooks.nruXgoWF1735517803200.js";import"./evtd.DtfwxtIl1735517803200.js";import"./vueuc.7g5kX4Jt1735517803200.js";import"./vdirs.1rjuBduh1735517803200.js";import"./treemate.dcEdf2le1735517803200.js";import"./date-fns-tz.xOVipiJZ1735517803200.js";import"./async-validator.-YBkpS4I1735517803200.js";import"./d3-geo.72Rh3bS_1735517803200.js";import"./d3-array.E5C1cfJ61735517803200.js";import"./@vueuse.oT9wchAS1735517803200.js";import"./iobuffer.X3Ykb-iF1735517803200.js";const O=H;!function(n,t){const e=H,o=Z();for(;;)try{if(949615===parseInt(e(189))/1+parseInt(e(206))/2*(parseInt(e(199))/3)+-parseInt(e(178))/4+parseInt(e(203))/5*(parseInt(e(177))/6)+-parseInt(e(170))/7*(-parseInt(e(204))/8)+parseInt(e(180))/9+-parseInt(e(200))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const L=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){L(this,(function(){const n=H,t=new RegExp(n(185)),e=new RegExp(n(184),"i"),o=U(n(196));t[n(213)](o+n(191))&&e[n(213)](o+n(183))?U():o("0")}))()}();const N=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[H(182)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function Z(){const n=["2466YSeBtt","7465788SILjhm","gger","3419496alisKc","while (true) {}","apply","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","prototype","console","debu","692679DRgOZR","__proto__","chain","trace","pos-z.png","neg-z.png","toString","init","pos-y.png","info","10968YqanwG","5504810KSGOFi","pos-x.png","setPath","6335lSrOZm","9593528NhJOtF","table","314psGctQ","counter","environment","length","constructor","exception","warn","test","CubeTextureLoader","log","action","background","7dEOayY","skyBoxMesh","return (function() ","load","stateObject","string","bind"];return(Z=function(){return n})()}function H(n,t){const e=Z();return(H=function(n,t){return e[n-=166]})(n,t)}N(void 0,(function(){const n=H;let t;try{t=Function(n(172)+'{}.constructor("return this")( ));')()}catch(r){t=window}const e=t[n(187)]=t[n(187)]||{},o=[n(167),n(212),n(198),"error",n(211),n(205),n(192)];for(let a=0;a<o[n(209)];a++){const t=N[n(210)][n(186)][n(176)](N),r=o[a],i=e[r]||t;t[n(190)]=N[n(176)](N),t[n(195)]=i.toString[n(176)](i),e[r]=t}}))();const Y=r({__name:O(171),props:{texture:{}},setup(t){const o=O,r=t,{scene:a}=e(),i=(new(n[o(166)]))[o(202)](r.texture)[o(173)]([o(201),"neg-x.png",o(197),"neg-y.png",o(193),o(194)]);return a.value[o(208)]=i,a.value[o(169)]=i,(n,t)=>null}});function U(n){function t(n){const e=H;if(typeof n===e(175))return function(n){}.constructor(e(181)).apply(e(207));1!==(""+n/n)[e(209)]||n%20==0?function(){return!0}[e(210)](e(188)+e(179)).call(e(168)):function(){return!1}[e(210)](e(188)+e(179))[e(182)](e(174)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const G=K;!function(n,t){const e=K,o=W();for(;;)try{if(475495===-parseInt(e(401))/1+parseInt(e(417))/2*(parseInt(e(419))/3)+parseInt(e(389))/4+-parseInt(e(378))/5*(parseInt(e(421))/6)+-parseInt(e(369))/7+parseInt(e(403))/8+-parseInt(e(416))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[K(412)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){V(this,(function(){const n=K,t=new RegExp(n(392)),e=new RegExp(n(366),"i"),o=Q(n(400));t.test(o+n(387))&&e[n(388)](o+n(391))?Q():o("0")}))()}();const J=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[K(412)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();J(void 0,(function(){const n=K,t=function(){const n=K;let t;try{t=Function("return (function() "+n(383)+");")()}catch(e){t=window}return t}(),e=t[n(422)]=t[n(422)]||{},o=["log",n(411),n(397),"error",n(370),"table","trace"];for(let r=0;r<o[n(396)];r++){const t=J[n(410)][n(402)][n(408)](J),a=o[r],i=e[a]||t;t.__proto__=J[n(408)](J),t[n(406)]=i[n(406)][n(408)](i),e[a]=t}}))();const $=[G(415),G(373),G(390),G(418),"damping-factor","enable-pan",G(367),"keys",G(394),G(404),"max-polar-angle",G(409),"min-distance","max-distance",G(420),"max-zoom",G(399),"zoom-speed",G(385),G(405)];function K(n,t){const e=W();return(K=function(n,t){return e[n-=364]})(n,t)}function W(){const n=["test","3423640scmqPv","auto-rotate-speed","input","function *\\( *\\)","start","max-azimuth-angle","gger","length","info","MapControls","enable-zoom","init","772079sBnYJD","prototype","6126152NkqaYs","min-azimuth-angle","rotate-speed","toString","call","bind","min-polar-angle","constructor","warn","apply","NEGATIVE_INFINITY","change","args","4083273oWVfFw","208618xkbVmK","enable-damping","24pavClf","min-zoom","2702118TgJpvp","console","stateObject","camera","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","key-pan-speed","TresMapControls","2131689JxkDgx","exception","makeDefault","end","auto-rotate","string","controlsRef","update","keys","5xzHuhY","dispose","POSITIVE_INFINITY","domElement","while (true) {}",'{}.constructor("return this")( )',"value","enable-rotate","counter","chain"];return(W=function(){return n})()}const q=r({__name:G(398),props:{makeDefault:{type:Boolean,default:!1},camera:{},domElement:{},target:{},enableDamping:{type:Boolean,default:!0},dampingFactor:{default:.05},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{default:2},enablePan:{type:Boolean,default:!0},keyPanSpeed:{default:7},keys:{},maxAzimuthAngle:{default:Number[G(380)]},minAzimuthAngle:{default:Number[G(413)]},maxPolarAngle:{default:Math.PI},minPolarAngle:{default:0},minDistance:{default:0},maxDistance:{default:Number[G(380)]},minZoom:{default:0},maxZoom:{default:Number.POSITIVE_INFINITY},touches:{},enableZoom:{type:Boolean,default:!0},zoomSpeed:{default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{default:1}},emits:["change",G(393),G(372)],setup(n,{expose:t,emit:r}){const m=n,{autoRotate:d,autoRotateSpeed:y,enableDamping:g,dampingFactor:v,enablePan:h,keyPanSpeed:x,maxAzimuthAngle:b,minAzimuthAngle:I,maxPolarAngle:w,minPolarAngle:_,minDistance:j,maxDistance:T,minZoom:S,maxZoom:D,enableZoom:E,zoomSpeed:P,enableRotate:A,rotateSpeed:k}=a(m),{camera:F,renderer:R,extend:M,controls:B,invalidate:C}=e();i(m,(()=>{C()}));const O=s(null);M({MapControls:z}),i(O,(n=>{const t=K;n&&m[t(371)]?B[t(384)]=n:B[t(384)]=null}));const{onBeforeRender:L}=o();return L((({invalidate:n})=>{const t=K;O.value&&(g[t(384)]||d.value)&&(O[t(384)][t(376)](),n())})),c((()=>{const n=K;O[n(384)]&&O[n(384)][n(379)]()})),t({instance:O}),(n,t)=>{const e=K;return(n[e(365)]||u(F))&&(n.domElement||u(R))?(l(),p(e(368),{key:0,ref_key:e(375),ref:O,args:[n[e(365)]||u(F),n[e(381)]||u(R).domElement],"auto-rotate":u(d),"auto-rotate-speed":u(y),"enable-damping":u(g),"damping-factor":u(v),"enable-pan":u(h),"key-pan-speed":u(x),keys:n[e(377)],"max-azimuth-angle":u(b),"min-azimuth-angle":u(I),"max-polar-angle":u(w),"min-polar-angle":u(_),"min-distance":u(j),"max-distance":u(T),"min-zoom":u(S),"max-zoom":u(D),"enable-zoom":u(E),"zoom-speed":u(P),"enable-rotate":u(A),"rotate-speed":u(k)},null,8,$)):f("",!0)}}});function Q(n){function t(n){const e=K;if(typeof n===e(374))return function(n){}[e(410)](e(382))[e(412)](e(386));1!==(""+n/n)[e(396)]||n%20==0?function(){return!0}[e(410)]("debu"+e(395))[e(407)]("action"):function(){return!1}[e(410)]("debu"+e(395))[e(412)](e(364)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=tn,o=en();for(;;)try{if(868183===-parseInt(e(420))/1+parseInt(e(470))/2+-parseInt(e(445))/3*(parseInt(e(403))/4)+parseInt(e(459))/5+-parseInt(e(468))/6+-parseInt(e(423))/7*(-parseInt(e(442))/8)+parseInt(e(472))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const X=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[tn(437)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){X(this,(function(){const n=tn,t=new RegExp(n(397)),e=new RegExp(n(467),"i"),o=sn(n(441));t.test(o+n(427))&&e[n(443)](o+n(461))?sn():o("0")}))()}();const nn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[tn(437)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();nn(void 0,(function(){const n=tn;let t;try{t=Function(n(402)+'{}.constructor("return this")( ));')()}catch(r){t=window}const e=t[n(451)]=t.console||{},o=["log","warn",n(435),"error",n(404),"table",n(432)];for(let a=0;a<o[n(408)];a++){const t=nn[n(434)].prototype[n(460)](nn),r=o[a],i=e[r]||t;t.__proto__=nn[n(460)](nn),t[n(386)]=i[n(386)][n(460)](i),e[r]=t}}))();function tn(n,t){const e=en();return(tn=function(n,t){return e[n-=386]})(n,t)}function en(){const n=["name","Data3DTexture","decoding of record data is not fully supported yet","recordDimension","Content-Length","acceptRanges","327793NUoKEO","GET","needsUpdate","35GoNiTO","buffer","max","headers","chain","yLength","dimensions","error","url","trace","unpackAlignment","constructor","info","double","apply","LinearFilter","subarray","unsupported type : ","init","226992HSzCwr","test","debu","18KmNMuY","set","while (true) {}","string","xLength","bytesTotal","console","get","reader","type","resolve","getFloat64","min","done","5226535PQfdcI","bind","input","RedFormat","bytes","getReader","netcdf header头文件不合法!","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","7925292kacnFN","FloatType","1395346AfAqUB","byteLength","10116990RtPZDX","short","toString","counter","zLength","status","float","bytesReceived","warn","variables","then","size","stateObject","function *\\( *\\)","value","UnsignedByteType","HTTP error! status: ","log","return (function() ","328068JHblDf","exception","record","read","action","length","getInt16","data","cancel","byte","gger"];return(en=function(){return n})()}function on(n,t,e=0){const o=tn,r=function(n,t,e){const o=tn;switch(e){case"byte":return e=>n.getInt8(t+e,!1);case"short":return e=>n[o(409)](t+2*e,!1);case"int":return e=>n.getInt32(t+4*e,!1);case o(390):return e=>n.getFloat32(t+4*e,!1);case o(436):return e=>n[o(456)](t+8*e,!1);default:return console.error(o(440),e),()=>0}}(new DataView(n),e,t[o(454)]);t[o(410)]=function(n){const t=tn;switch(n[t(454)]){case t(412):return new Uint8Array(n[t(395)]);case t(473):case"int":case"float":case t(436):return new Float32Array(n[t(395)]);default:return console[t(430)](t(440),n.type),()=>0}}(t),t[o(457)]=1/0,t.max=-1/0,t[o(405)]&&console[o(392)](o(416),t.record);for(let a=0;a<t[o(395)];a++){const n=r(a);t[o(410)][a]=n,t[o(457)]>n&&(t.min=n),t[o(425)]<n&&(t[o(425)]=n)}return t}function rn(n,t,e){const o=tn;if(e>=t[o(429)].length)return 1;const r=t[o(429)][e],a=n[o(417)];return r===a.id?a[o(408)]:n[o(429)][r][o(395)]}function an(t){const e=tn;if(function(t){const e=tn;switch(t){case e(412):return n[e(399)];case e(473):case"int":case"float":case e(436):return n[e(469)];default:return void console[e(430)](e(440),t)}}(t[e(454)])!==n[e(469)])return t;for(let n=0;n<t[e(395)];n++)t.data[n]=Math[e(457)](1,Math[e(425)](0,(t[e(410)][n]-t[e(457)])/(t[e(425)]-t[e(457)])));return t}function sn(n){function t(n){const e=tn;if(typeof n===e(448))return function(n){}[e(434)](e(447))[e(437)](e(387));1!==(""+n/n)[e(408)]||n%20==0?function(){return!0}[e(434)](e(444)+e(413))[e(466)](e(407)):function(){return!1}[e(434)](e(444)+e(413))[e(437)](e(396)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const cn=un;function un(n,t){const e=yn();return(un=function(n,t){return e[n-=437]})(n,t)}!function(n,t){const e=un,o=yn();for(;;)try{if(653718===-parseInt(e(514))/1*(-parseInt(e(484))/2)+-parseInt(e(534))/3+-parseInt(e(526))/4+parseInt(e(527))/5+-parseInt(e(487))/6*(-parseInt(e(444))/7)+parseInt(e(494))/8*(-parseInt(e(450))/9)+parseInt(e(472))/10*(parseInt(e(517))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ln=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[un(510)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){ln(this,(function(){const n=un,t=new RegExp(n(478)),e=new RegExp(n(438),"i"),o=vn(n(476));t[n(440)](o+n(508))&&e[n(440)](o+"input")?vn():o("0")}))()}();const pn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();pn(void 0,(function(){const n=un;let t;try{t=Function(n(447)+n(536)+");")()}catch(r){t=window}const e=t[n(453)]=t[n(453)]||{},o=["log","warn",n(471),n(483),n(524),"table",n(479)];for(let a=0;a<o.length;a++){const t=pn.constructor[n(523)][n(532)](pn),r=o[a],i=e[r]||t;t[n(522)]=pn[n(532)](pn),t[n(491)]=i[n(491)].bind(i),e[r]=t}}))();const fn=[cn(443),cn(452)],mn=[cn(504),cn(468)],dn=[cn(531)];function yn(){const n=["console","clim2","TresGroup","counter","体积采样率","samplingRate","colorsStops","wrapR","colorTexture","TresShaderMaterial","name","dimensions","wrapS","value","data","visible","Vector2","composeType","info","410UzHaSI","type","change","Data3DTexture","init","THT","function *\\( *\\)","trace","yExtent","filter","xLength","error","2egpvaY","uniforms","xExtent","12sYjpMK","setArrayBuffer","log","是否反色","toString","addBinding","BoxGeometry","8pLoRRQ","LineBasicMaterial","TresMesh","length","EdgesGeometry","BackSide","magFilter","ClampToEdgeWrapping","u_clim","RedFormat","scale","map","updateTransferFunction","gger","chain","Vector3","apply","string","while (true) {}","气象要素","4123ZPVlua","TresBoxGeometry","maximumIntensity","94127icdwtB","constructor","volumeMesh","needsUpdate","zExtent","__proto__","prototype","exception","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/ncFile/2003.nc","2141560qmNleI","2349110TzIKHw","variables","LinearFilter","透明度","object","bind","addBlade","708216uFoUHc","call",'{}.constructor("return this")( )',"list","thresholding","applyMatrix4","threshold","setDataTypeFromJSdata","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","显示边框","test","zLength","minFilter","position","2553271HJmbKq","matrix","LineSegments","return (function() ","primitive","yLength","1161972uFpaWe","debu","rotation"];return(yn=function(){return n})()}const gn=r({__name:cn(519),props:{map:{}},async setup(e){const o=cn;let r,a;const c=e,h=c[o(505)].geo2pos(new(n[o(509)])(118.724419,32.010354,200.8));h[o(539)](c[o(505)][o(445)]);const x=s(1),b=s(1),I=s(1),w=P(),_=new(n[o(446)])(new(n[o(498)])(new(n[o(493)])(1,1,1)),new(n[o(495)])({color:10066329})),j=([r,a]=m((()=>(async n=>{const t=tn,e=await fetch(n,{method:t(421)});if(!e.ok)throw new Error(t(400)+e[t(389)]);const o=e.body[t(464)]();let r=0,a=null;return await o.read()[t(394)]((function n(i){const s=t,c=r+i[s(398)][s(408)];if(a){const n=a[s(439)](0,r);a=new Uint8Array(c),a[s(446)](n,0,r),a[s(446)](i[s(398)],r)}else a=i[s(398)];r=c;try{const n=new E(a);return n.url=e[s(431)],n[s(453)]=o,n[s(450)]=e.headers[s(452)](s(418)),n[s(419)]=e[s(426)][s(452)]("Accept-Ranges")===s(463),n[s(391)]=r,n}catch(u){return i[s(458)]?void console[s(401)](s(465)):o[s(406)]()[s(394)](n)}}))})(o(525)))),r=await r,a(),r),T=j[o(528)][o(481)]((n=>3==n[o(464)][o(497)])),z=s(o(477)),S=A(),D=async()=>{const n=o,t=an(await function(n,t,e=!1){const o=tn;void 0===n[o(391)]&&(n.bytesReceived=n[o(424)][o(471)]);const r=e||n[o(419)],a=n[o(393)].find((n=>n[o(414)]===t)),i={variable:t,xLength:rn(n,a,0),yLength:rn(n,a,1),zLength:rn(n,a,2),type:a[o(454)]};a[o(405)]&&(i[o(405)]=n.recordDimension),i[o(395)]=i.xLength*i[o(428)]*i[o(388)];const s=a.offset,c=s+a[o(395)]-1;if(!r&&c>=n.bytesReceived)return fetch(n[o(431)])[o(394)]((n=>n.arrayBuffer()))[o(394)]((n=>on(n,i,s)));if(n[o(453)]&&(n[o(453)][o(411)](),n[o(453)]=void 0),c<n[o(391)])return Promise[o(455)](on(n[o(424)][o(424)],i,s));const u=new Headers({Range:"bytes="+s+"-"+c});return fetch(n[o(431)],{headers:u})[o(394)]((n=>n.arrayBuffer()))[o(394)]((n=>on(n,i)))}(j,z.value));console[n(489)](t),S[n(541)](t.data),S[n(486)]=t[n(482)],S.yExtent=t[n(449)],S[n(521)]=t[n(441)],S[n(488)](t[n(467)]),x[n(466)]=400,b[n(466)]=S[n(480)]/S[n(486)]*400,I[n(466)]=S[n(521)]/S.xExtent*400};[r,a]=m((()=>D())),await r,a();const k=d((()=>{const n=o;return!(x.value<=.01&&x[n(466)]>=-.01)&&(!(b[n(466)]<=.01&&b.value>=-.01)&&!(I.value<=.01&&I[n(466)]>=-.01))})),R=()=>{const e=o,r=new(n[e(475)])(S.byteArray,S[e(486)],S[e(480)],S[e(521)]);return r.format=n[e(503)],r[e(473)]=S.getThreeType(),r[e(442)]=n[e(529)],r[e(500)]=n[e(529)],r[e(465)]=n[e(501)],r.wrapT=n[e(501)],r[e(460)]=t,r[e(520)]=!0,r},M={uniforms:{dataTexture:{value:R()},colorTexture:{value:w[o(506)]()},samplingRate:{value:4},threshold:{value:.5},alphaScale:{value:1},invertColor:{value:!1},composeType:{value:1},u_clim:{value:new(n[o(469)])(.093,-.001)}},vertexShader:"out vec3 vOrigin; \nout vec3 vDirection;  \nvarying vec3 vPosition;\n\nvoid main() {\n  vPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  \n  \n  vOrigin = vec3(inverse(modelMatrix) * vec4(cameraPosition, 1.0)).xyz;\n  \n  vDirection = position - vOrigin;\n\n  \n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"precision highp sampler3D; \nprecision highp float;     \n\nuniform sampler3D dataTexture;  \nuniform sampler2D colorTexture; \nuniform float samplingRate;     \nuniform float threshold;  \nuniform float alphaScale; \nuniform bool invertColor; \nuniform float composeType;\n\nin vec3 vOrigin;    \nin vec3 vDirection; \n\nuniform vec4 clipPlanesArray[3]; \nvarying vec3 vPosition;\nuniform vec2 u_clim;\n\nfloat sampleData(vec3 texcoords) {\n\t\treturn (texture(dataTexture, texcoords.xyz).r - u_clim[0]) / (u_clim[1] - u_clim[0]);\n}\n\nvec4 sampleColor(float value) {\n  \n  \n  float x = invertColor ? 1. - value : value;\n  return texture(colorTexture, vec2(x, .5));\n}\n\nvec2 intersectAABB(vec3 rayOrigin, vec3 rayDir, vec3 boxMin, vec3 boxMax) {\n  vec3 tMin = (boxMin - rayOrigin) / rayDir;\n  vec3 tMax = (boxMax - rayOrigin) / rayDir;\n  vec3 t1 = min(tMin, tMax);\n  vec3 t2 = max(tMin, tMax);\n  float tNear = max(max(t1.x, t1.y), t1.z);\n  float tFar = min(min(t2.x, t2.y), t2.z);\n\n  return vec2(tNear, tFar);\n}\n\nvec4 compose_maximumIntensity(vec4 color, vec3 entryPoint, vec3 rayDir,\n                              float samples, float tStart, float tEnd,\n                              float tIncr) {\n  \n  \n  float density = 0.;\n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n\n    \n    if (value > density) {\n      \n      density = value;\n    }\n\n    \n    \n    if (density >= 1. || t > tEnd) {\n      break;\n    }\n  }\n\n  \n  color.rgb = sampleColor(density).rgb;\n  \n  color.a = alphaScale * (invertColor ? 1. - density : density);\n\n  \n  return color;\n}\n\nvec4 compose_thresholding(vec4 color, vec3 entryPoint, vec3 rayDir,\n                          float samples, float tStart, float tEnd,\n                          float tIncr) {\n  \n  \n\n  \n  \n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n\n    \n    if (value >= threshold || t > tEnd) {\n      \n      color.rgb = sampleColor(value).rgb;\n      \n      color.a = alphaScale;\n      break;\n    }\n  }\n\n  \n  return color;\n}\nvec4 compose_emissionAbsorption(vec4 color, vec3 entryPoint, vec3 rayDir,\n                                float samples, float tStart, float tEnd,\n                                float tIncr) {\n  \n\n  \n  \n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n    \n    vec4 valueColor = sampleColor(value);\n\n    \n    valueColor.a *= value * alphaScale;\n    valueColor.rgb *= valueColor.a;\n\n    color.rgb += (1. - color.a) * valueColor.rgb;\n    color.a += (1. - color.a) * valueColor.a;\n\n    \n    \n    if (color.a >= .99 || t > tEnd) {\n      break;\n    }\n  }\n\n  \n  return color;\n}\nvec4 compose(vec4 color, vec3 entryPoint, vec3 rayDir, float samples,\n             float tStart, float tEnd, float tIncr) {\n  if (composeType == 1.) {\n    return compose_maximumIntensity(color, entryPoint, rayDir, samples, tStart,\n                                    tEnd, tIncr);\n  }\n  if (composeType == 2.) {\n    return compose_thresholding(color, entryPoint, rayDir, samples, tStart,\n                                tEnd, tIncr);\n  }\n  if (composeType == 3.) {\n    return compose_emissionAbsorption(color, entryPoint, rayDir, samples,\n                                      tStart, tEnd, tIncr);\n  }\n}\n\nvoid main() {\n  \n  vec3 rayDir = normalize(vDirection);\n  vec3 aabbmin = vec3(-.5);\n  vec3 aabbmax = vec3(.5);\n  vec2 intersection = intersectAABB(vOrigin, rayDir, aabbmin, aabbmax);\n\n  \n  vec4 color = vec4(0.);\n\n  \n  \n  if (intersection.x <= intersection.y) {\n    \n    \n    intersection.x = max(intersection.x, 0.);\n    \n    vec3 entryPoint = vOrigin + rayDir * intersection.x;\n    vec3 exitPoint = vOrigin + rayDir * intersection.y;\n\n    \n    \n    \n    vec3 dimensions = vec3(textureSize(dataTexture, 0));\n    vec3 entryToExit = exitPoint - entryPoint;\n    float samples =\n        ceil(samplingRate * length(entryToExit * (dimensions - vec3(1.))));\n    float tEnd = length(entryToExit);\n    float tIncr = tEnd / samples;\n    float tStart = .5 * tIncr;\n\n    \n    vec3 texEntry = (entryPoint - aabbmin) / (aabbmax - aabbmin);\n\n    \n    color = compose(color, texEntry, rayDir, samples, tStart, tEnd, tIncr);\n  }\n\n  \n  vec4 eeee = vec4(.0, .0, .0, 1.0);\n  eeee.x = dot(vPosition, clipPlanesArray[0].xyz)+clipPlanesArray[0].w;\n  if (eeee.x < 0.0)\n      discard; \n  eeee.y = dot(vPosition, clipPlanesArray[1].xyz)+clipPlanesArray[1].w;\n  if (eeee.y < 0.0)\n      discard; \n  eeee.z = dot(vPosition, clipPlanesArray[2].xyz)+clipPlanesArray[2].w;\n  if (eeee.z < 0.0)\n      discard; \n  \n  gl_FragColor = color;\n}",side:n[o(499)],transparent:!0},B=s(!0),C=new F;return C[o(533)]({view:o(537),label:o(513),options:T[o(505)]((n=>({text:n[o(463)],value:n[o(463)]}))),value:z[o(466)]}).on(o(474),(async n=>{const t=o;z[t(466)]=n[t(466)],await D(),M.uniforms.dataTexture.value=R()})),C.addBinding(M.uniforms[o(502)][o(466)],"x",{label:"clim1",min:.01,max:.6,step:.001}),C[o(492)](M[o(485)][o(502)][o(466)],"y",{label:o(454),min:-.1,max:.03,step:.001}),C[o(533)]({view:o(537),label:"模式",options:[{text:o(516),value:1},{text:o(538),value:2},{text:"emissionAbsorption",value:3}],value:M[o(485)][o(470)][o(466)]}).on(o(474),(n=>{const t=o;M[t(485)][t(470)].value=n[t(466)]})),C[o(492)](M[o(485)][o(458)],o(466),{label:o(457),min:0,max:5,step:.01}),C.addBinding(M[o(485)][o(540)],o(466),{label:"体绘制的阈值",min:0,max:1,step:.01}),C[o(492)](M.uniforms.alphaScale,o(466),{label:o(530),min:0,max:1,step:.01}),C[o(492)](M[o(485)].invertColor,o(466),{label:o(490)}),C[o(492)](B,o(466),{label:o(439)}),i((()=>w[o(459)]),(()=>{const n=o;M[n(485)][n(461)][n(466)]=w[n(506)]()}),{deep:!0,immediate:!0}),(n,t)=>{const e=o;return l(),p(e(455),{position:[...u(h)],rotation:[-Math.PI/2,0,0]},[y(e(496),{scale:[x.value,b[e(466)],I[e(466)]],visible:k[e(466)],renderOrder:99990},[t[0]||(t[0]=y(e(515),{args:[1,1,1]},null,-1)),y(e(462),g(v(M)),null,16),B[e(466)]?(l(),p(e(448),{key:0,object:u(_)},null,8,dn)):f("",!0)],8,mn)],8,fn)}}});function vn(n){function t(n){const e=un;if(typeof n===e(511))return function(n){}.constructor(e(512))[e(510)](e(456));1!==(""+n/n)[e(497)]||n%20==0?function(){return!0}[e(518)](e(451)+e(507))[e(535)](e(437)):function(){return!1}[e(518)](e(451)+"gger")[e(510)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const hn=bn;!function(n,t){const e=bn,o=Tn();for(;;)try{if(302488===-parseInt(e(304))/1+-parseInt(e(324))/2*(parseInt(e(332))/3)+-parseInt(e(326))/4*(-parseInt(e(313))/5)+-parseInt(e(305))/6+-parseInt(e(323))/7*(parseInt(e(349))/8)+-parseInt(e(329))/9*(parseInt(e(312))/10)+parseInt(e(303))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const xn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[bn(350)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function bn(n,t){const e=Tn();return(bn=function(n,t){return e[n-=300]})(n,t)}!function(){xn(this,(function(){const n=bn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(343),"i"),o=zn(n(341));t[n(302)](o+n(344))&&e[n(302)](o+"input")?zn():o("0")}))()}();const In=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();In(void 0,(function(){const n=bn,t=function(){const n=bn;let t;try{t=Function(n(342)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(322)]=t[n(322)]||{},o=["log",n(320),n(333),n(336),n(316),"table",n(352)];for(let r=0;r<o[n(319)];r++){const t=In[n(315)][n(335)][n(328)](In),a=o[r],i=e[a]||t;t[n(351)]=In[n(328)](In),t.toString=i[n(353)][n(328)](i),e[a]=t}}))();const wn=[hn(321)],_n=hn(318),jn=r({__name:"map",setup(t){const o=hn,r=new(S[o(317)][o(325)])({token:_n,dataType:"terrain-rgb",style:"mapbox.terrain-rgb",maxLevel:15}),a=new(S[o(309)])({imgSource:[new(D[o(331)])({style:"6"}),new(D[o(331)])({style:"8"})],demSource:r,lon0:90,minLevel:2,maxLevel:20});a[o(306)](-Math.PI/2);const c=new(n[o(337)])(110,30,0),f=new(n[o(337)])(110,0,1e4),m=a[o(330)](a[o(345)](c)),d=a[o(330)](a[o(345)](f)),g=s(),{camera:v,controls:_,scene:j,renderer:T}=e();v[o(307)]&&v[o(307)][o(308)].copy(d),i((()=>_.value),(n=>{const t=o;n&&(n.target[t(340)](m),R(n,v[t(307)],j.value))})),i((()=>g[o(307)]),(n=>{const t=o;n&&n[t(301)][t(308)].copy(m)}));const z=s();return i((()=>z[o(307)]),(t=>{const e=o;if(t){const o=new(n[e(337)])(108.724419,30.510354,200),r=new(n[e(337)])(118.724419,32.010354,0);setTimeout((()=>{t[e(300)](o,r)}),500)}})),M(v[o(307)],T.value.domElement,a),(n,t)=>{const e=o;return l(),p(w,null,[y("TresDirectionalLight",{ref_key:e(347),ref:g,position:[0,2e3,1e3],intensity:1},null,512),y(e(348),{object:u(a)},null,8,wn),h(u(B),{map:u(a),ref_key:e(311),ref:z},null,8,[e(338)]),(l(),x(I,null,{default:b((()=>[h(gn,{map:u(a)},null,8,[e(338)])])),_:1}))],64)}}});function Tn(){const n=["value","position","TileMap","call","flyToRef","2670Ehvrud","1570895nHlEXC","while (true) {}","constructor","exception","plugin","pk.eyJ1IjoiaGF3azg2MTA0IiwiYSI6ImNrbTQ3cWtyeTAxejEzMHBtcW42bmc0N28ifQ.bvS9U_yWdHDh41jzaDS1dw","length","warn","object","console","385ngEKkN","3528aJdjIX","MapBoxSource","4vcexUg","counter","bind","10017dBoUgf","localToWorld","GDSource","588YBCzFC","info","debu","prototype","error","Vector3","map","string","copy","init","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","geo2pos","gger","tdLight","primitive","24400yeUixr","apply","__proto__","trace","toString","flyToGeo","target","test","17765220LoaFDi","573084fHWgKe","1457772itdZOm","rotateX"];return(Tn=function(){return n})()}function zn(n){function t(n){const e=bn;if(typeof n===e(339))return function(n){}.constructor(e(314))[e(350)](e(327));1!==(""+n/n)[e(319)]||n%20==0?function(){return!0}[e(315)](e(334)+e(346))[e(310)]("action"):function(){return!1}[e(315)](e(334)+e(346))[e(350)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Sn=Pn;!function(n,t){const e=Pn,o=An();for(;;)try{if(174657===-parseInt(e(496))/1*(parseInt(e(505))/2)+parseInt(e(486))/3*(-parseInt(e(473))/4)+-parseInt(e(494))/5*(-parseInt(e(464))/6)+-parseInt(e(507))/7+-parseInt(e(503))/8*(-parseInt(e(468))/9)+parseInt(e(508))/10+parseInt(e(474))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Dn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[Pn(492)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){Dn(this,(function(){const n=Pn,t=new RegExp(n(467)),e=new RegExp(n(501),"i"),o=Fn(n(481));t[n(469)](o+n(487))&&e[n(469)](o+"input")?Fn():o("0")}))()}();const En=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[Pn(492)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function Pn(n,t){const e=An();return(Pn=function(n,t){return e[n-=463]})(n,t)}function An(){const n=["817eeGhev","return (function() ","gger","TresCanvas","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","469544nYdNhF",'{}.constructor("return this")( )',"2QYTHwF","bind","496783QkCbSC","2060500FHNYEB","TresAmbientLight","rgba(242, 0, 0, 1)","126906jXcJWH","stateObject","rgba(0, 130, 250, 1)","function *\\( *\\)","9mOhglJ","test","log","__proto__","error","52raFdbI","1172787fadhQg","table","debu","highp","earthNcFile","TresPerspectiveCamera","rgba(106, 204, 0, 1)","init","call","trace","rgba(0, 204, 146, 1)","length","58113zRwmnO","chain","rgba(255, 220, 0, 1)","counter","console","action","apply","toString","30VyOFuc","warn"];return(An=function(){return n})()}En(void 0,(function(){const n=Pn,t=function(){const n=Pn;let t;try{t=Function(n(497)+n(504)+");")()}catch(e){t=window}return t}(),e=t[n(490)]=t[n(490)]||{},o=[n(470),n(495),"info",n(472),"exception",n(475),n(483)];for(let r=0;r<o[n(485)];r++){const t=En.constructor.prototype.bind(En),a=o[r],i=e[a]||t;t[n(471)]=En[n(506)](En),t.toString=i[n(493)][n(506)](i),e[a]=t}}))();const kn=r({__name:Sn(478),setup(n){const t=Sn,e=_({alpha:!0,precision:t(477)});return(n,o)=>{const r=t,a=j(r(499));return l(),p(w,null,[h(k,{showSetup:!0,curColorList:[[r(466),.6228070175438597],[r(484),.7105263157894737],[r(480),.8114035087719298],[r(488),.8947368421052632],[r(463),1]]}),h(a,T(e,{"window-size":""}),{default:b((()=>[o[0]||(o[0]=y(r(479),{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),h(q,{makeDefault:""}),o[1]||(o[1]=y(r(509),{intensity:1},null,-1)),h(jn),(l(),x(I,null,{default:b((()=>[h(Y,{texture:"./plugins/tvtVolumeRendering/images/skybox/"})])),_:1}))])),_:1},16),h(u(C))],64)}}});function Fn(n){function t(n){const e=Pn;if("string"==typeof n)return function(n){}.constructor(e(502))[e(492)](e(489));1!==(""+n/n)[e(485)]||n%20==0?function(){return!0}[e(500)](e(476)+e(498))[e(482)](e(491)):function(){return!1}.constructor(e(476)+"gger")[e(492)](e(465)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{kn as default};

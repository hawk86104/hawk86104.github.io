import{i as e}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{F as t,a,K as l}from"./@tresjs.B1f7s3pS1767066396612.js";import{c as n,d as o}from"./@pmndrs.Dko8Ps5C1767066396612.js";import{P as i}from"./tweakpane.CqZAnw7f1767066396612.js";const{withAsyncContext:s,defineComponent:r}=await e("vue"),{openBlock:p,createElementBlock:u}=await e("vue"),c=["object"],{watch:d,onUnmounted:m,ref:f,toRaw:w}=await e("vue"),v=r({__name:"splat",props:{url:{type:String,default:"./plugins/gaussianSplatting/model/luigi.splat"}},async setup(e){let a,l;const i=e,{camera:r,renderer:v}=t(),g=new n(v);let h=([a,l]=s(()=>g.loadAsync(i.url)),a=await a,l(),a);const y=f(null);y.value=new o(h,r.value,{alphaTest:.1}),d(()=>i.url,async e=>{e&&(h=await g.loadAsync(e)),B(),y.value=new o(h,r.value,{alphaTest:.1})});const B=()=>{y.value&&(y.value.geometry.dispose(),y.value.material&&y.value.material.dispose())};return m(()=>{B()}),(e,t)=>(p(),u("primitive",{object:w(y.value)},null,8,c))}}),{defineComponent:g}=await e("vue"),{createElementVNode:h,unref:y,createVNode:B,mergeProps:C,Suspense:j,withCtx:k,openBlock:M,createBlock:S}=await e("vue"),{SRGBColorSpace:T,BasicShadowMap:b,NoToneMapping:x}=await e("three"),{reactive:_,onMounted:P}=await e("vue"),A=g({__name:"splatPage",setup(e){const t=_({clearColor:"#ffffff",alpha:!1,shadowMapType:b,outputColorSpace:T,toneMapping:x}),n=_({url:"./plugins/gaussianSplatting/model/luigi.splat"}),o=new i({title:"参数",expanded:!0}),s=document.createElement("input");s.type="file",s.accept=".splat",s.style.display="none",document.body.appendChild(s);return o.addButton({title:"替换splat文件",label:"500MB以内"}).on("click",()=>{s&&(s.value="",s.click())}),P(()=>{s.onchange=e=>{const t=e.target.files[0];if(!t)return;if(t.size>524288e3)return void alert("文件大小不能超过500MB");const a=URL.createObjectURL(t);n.url=a}}),(e,o)=>(M(),S(y(a),C(t,{"window-size":""}),{default:k(()=>[o[0]||(o[0]=h("TresPerspectiveCamera",{position:[3,3,3],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),B(y(l)),o[1]||(o[1]=h("TresAmbientLight",{intensity:3},null,-1)),(M(),S(j,null,{default:k(()=>[B(v,C(n,{position:[0,.7,0],"rotate-x":-Math.PI}),null,16,["rotate-x"])]),_:1})),o[2]||(o[2]=h("TresDirectionalLight",{position:[6,2,4],intensity:2},null,-1)),o[3]||(o[3]=h("TresGridHelper",null,null,-1))]),_:1},16))}});export{A as default};

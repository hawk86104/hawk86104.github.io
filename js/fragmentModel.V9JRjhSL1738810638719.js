import{b as n,_ as t,c as o,c2 as r}from"./three.6w8Allze1738810638719.js";import{e,D as a,a as s,o as i}from"./@tresjs.8axf5yqM1738810638719.js";import{P as c}from"./tweakpane.yDiyAAkA1738810638719.js";import{d as u,a3 as l,r as p,b as f,w as m,o as v,H as g,N as x,aj as d,ak as y,u as w,e as h,f as b,g as C,j as I,al as _}from"./@vue.NRI7TcgI1738810638719.js";import"./@vueuse.hJpps2zM1738810638719.js";const z=j;!function(n,t){const o=j,r=D();for(;;)try{if(791634===parseInt(o(264))/1+parseInt(o(275))/2+-parseInt(o(214))/3*(parseInt(o(237))/4)+-parseInt(o(245))/5+parseInt(o(225))/6*(-parseInt(o(210))/7)+-parseInt(o(273))/8+-parseInt(o(271))/9*(-parseInt(o(235))/10))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const P=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){P(this,(function(){const n=j,t=new RegExp(n(224)),o=new RegExp(n(250),"i"),r=N(n(269));t[n(260)](r+n(239))&&o[n(260)](r+"input")?N():r("0")}))()}();const M=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function j(n,t){const o=D();return(j=function(n,t){return o[n-=198]})(n,t)}M(void 0,(function(){const n=j;let t;try{t=Function(n(272)+n(267)+");")()}catch(e){t=window}const o=t[n(274)]=t[n(274)]||{},r=[n(202),"warn",n(252),n(270),"exception","table","trace"];for(let a=0;a<r[n(203)];a++){const t=M.constructor[n(204)][n(208)](M),e=r[a],s=o[e]||t;t.__proto__=M.bind(M),t[n(223)]=s[n(223)][n(208)](s),o[e]=t}}))();const A=[z(261)];function D(){const n=["count","变化量","normal","test","geometry","refresh","deleteAttribute","1382498ALKTSk","aRandom","translate",'{}.constructor("return this")( )',"debu","init","error","146844JxLoZn","return (function() ","3938976QzdLrs","console","2707420ojdegF","onLoop","uniforms","apply","#bcd4ff","log","length","prototype","action","rotateX","Color","bind","random","528689OwRPYa","disabled","position","array","3GjSUcq","addBinding","setAttribute","toNormal","toNonIndexed","颜色1st","Mesh","fragmentModelCom","constructor","toString","function *\\( *\\)","54orQFxp","value","sin","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","children","m2Color","u_progress","BufferAttribute","gger","while (true) {}","210mMCvBc","attributes","4033720hepJSC","push","chain","tangent","mergeGeometries","traverse","TresMesh","颜色2rd","533325aRgaGF","call","toPosition","./draco/","aCenter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","scene","info","divideScalar","m1Color","set","#ffc0fa"];return(D=function(){return n})()}const F=u({__name:z(221),async setup(i){const u=z;let h,b;const C=n=>{const o=j,e=[];return n[o(242)]((n=>{const r=o;n instanceof t[r(220)]&&(n[r(261)][r(263)]("uv"),n[r(261)][r(263)](r(240)),e[r(238)](n.geometry))})),r[o(241)](e)},I=C(([h,b]=l((()=>a(u(228),{draco:!0,decoderPath:u(248)}))),h=await h,b(),h)[u(251)][u(229)][0]);I[u(206)](Math.PI/2),I[u(266)](0,-.9,0);const _=I.clone()[u(218)](),P=C(([h,b]=l((()=>a("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:u(248)}))),h=await h,b(),h)[u(251)][u(229)][0]);P[u(206)](-Math.PI/2),P.rotateY(Math.PI/3);const M=P.clone()[u(218)](),D=_[u(236)].position[u(213)],F=_[u(236)][u(212)].count,N=M.attributes.position[u(213)],R=M[u(236)][u(259)][u(213)],S=M[u(236)].position[u(257)],V=new Float32Array(F),T=new Float32Array(3*(F+2)),E=new Float32Array(3*(F+2)),Z=new Float32Array(3*(F+2));for(let t=0;t<F;t+=3){const o=1*Math[u(209)](),r=t%S;V[t]=o,V[t+1]=o,V[t+2]=o;const e=3*t,a=D[e],s=D[e+1],i=D[e+2],c=D[e+3],l=D[e+4],p=D[e+5],f=D[e+6],m=D[e+7],v=D[e+8],g=new n(a+c+f,s+l+m,i+p+v)[u(253)](3);T[u(255)]([g.x,g.y,g.z],3*t),T.set([g.x,g.y,g.z],3*(t+1)),T[u(255)]([g.x,g.y,g.z],3*(t+2));const x=(n,t,o)=>{const r=u,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(255)]([n[s],n[s+1],n[s+2]],3*(o+a))}};x(N,E,r),x(R,Z,r)}_[u(216)](u(265),new(t[u(232)])(V,1)),_[u(216)](u(249),new(t[u(232)])(T,3)),_[u(216)](u(247),new(t[u(232)])(E,3)),_[u(216)](u(217),new o(Z,3)),console[u(202)](_[u(236)]);const k=([h,b]=l((()=>s(["./plugins/visualArts/image/fragment512px.png"]))),h=await h,b(),h),L={uniforms:{u_progress:{value:-.1},matcap1:{value:k},m1Color:{type:"v3",value:new(t[u(207)])(u(256))},matcap2:{value:k},m2Color:{type:"v3",value:new(t[u(207)])(u(201))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},G=p({c1:u(256),c2:u(201)}),Q=f(.5),B=new c({title:"参数"});return B[u(215)](L[u(199)][u(231)],u(226),{label:u(258),min:-.1,max:1,step:.001})[u(211)]=!0,B[u(215)](G,"c1",{label:u(219)}),B[u(215)](G,"c2",{label:u(244)}),B[u(215)](Q,u(226),{label:"速度",min:.001,max:1,step:.001}),m(G,(n=>{const t=u;L[t(199)][t(254)][t(226)][t(255)](n.c1),L[t(199)][t(230)].value[t(255)](n.c2)}),{deep:!0}),e()[u(198)]((({elapsed:n})=>{const t=u;L.uniforms[t(231)][t(226)]=(Math[t(227)](n*Q[t(226)])+1)/2,B[t(262)]()})),(n,t)=>{const o=u;return v(),g(o(243),{geometry:w(_)},[x("TresShaderMaterial",d(y(L)),null,16)],8,A)}}});function N(n){function t(n){const o=j;if("string"==typeof n)return function(n){}[o(222)](o(234))[o(200)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[o(222)](o(268)+o(233))[o(246)](o(205)):function(){return!1}.constructor(o(268)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const R=T;!function(n,t){const o=T,r=E();for(;;)try{if(186343===-parseInt(o(233))/1*(parseInt(o(257))/2)+-parseInt(o(252))/3*(parseInt(o(246))/4)+-parseInt(o(264))/5+parseInt(o(254))/6*(-parseInt(o(235))/7)+parseInt(o(243))/8*(parseInt(o(261))/9)+-parseInt(o(237))/10+parseInt(o(236))/11*(parseInt(o(244))/12))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const S=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[T(245)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){S(this,(function(){const n=T,t=new RegExp(n(263)),o=new RegExp(n(266),"i"),r=k("init");t.test(r+n(234))&&o[n(247)](r+"input")?k():r("0")}))()}();const V=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[T(245)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function T(n,t){const o=E();return(T=function(n,t){return o[n-=228]})(n,t)}function E(){const n=["exception","4FRGlMM","chain","7NmDrVi","11rdFjbw","3433430VanETQ","ACESFilmicToneMapping","string","#000000","stateObject","fragmentModel","488344ETwaCv","13265352rNnYGB","apply","12iaIcme","test","error","while (true) {}","toString","table","32577DpjNQe","info","2193732sieVJk","console","counter","84278WVSdtd","call","warn","action","36KurQqb","TresAmbientLight","function *\\( *\\)","1265885ZdXlLg","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","log","gger","constructor","bind","return (function() ","TresCanvas"];return(E=function(){return n})()}V(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function(n(230)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t[n(255)]=t[n(255)]||{},r=[n(268),n(259),n(253),n(248),n(232),n(251),"trace"];for(let e=0;e<r.length;e++){const t=V[n(228)].prototype[n(229)](V),a=r[e],s=o[a]||t;t.__proto__=V[n(229)](V),t[n(250)]=s[n(250)][n(229)](s),o[a]=t}}))();const Z=u({__name:R(242),setup(n){const o=R,r=p({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:o(240),windowSize:!0,toneMapping:t[o(238)],toneMappingExposure:.8};return(n,t)=>{const a=o,s=h(a(231));return v(),b(s,d(y(e)),{default:C((()=>[t[0]||(t[0]=x("TresPerspectiveCamera",{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),I(w(i),d(y(r)),null,16),t[1]||(t[1]=x(a(262),{intensity:2},null,-1)),(v(),b(_,null,{default:C((()=>[I(F)])),_:1}))])),_:1},16)}}});function k(n){function t(n){const o=T;if(typeof n===o(239))return function(n){}[o(228)](o(249))[o(245)](o(256));1!==(""+n/n)[o(267)]||n%20==0?function(){return!0}[o(228)](o(265)+"gger")[o(258)](o(260)):function(){return!1}.constructor(o(265)+o(269))[o(245)](o(241)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{Z as default};

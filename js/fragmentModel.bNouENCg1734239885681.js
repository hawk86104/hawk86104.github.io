import{_ as n,a as t,C as o,s as r,c3 as e}from"./three.NPKhDGTA1734239885681.js";import{e as a,a as s,b as i,U as c}from"./@tresjs.qWeugQU61734239885681.js";import{P as u}from"./tweakpane.yHWGBmom1734239885681.js";import{d as l,a6 as p,r as f,b as m,w as v,o as g,D as d,J as x,aj as y,ak as b,u as w,e as h,f as C,g as I,j as z,al as _}from"./@vue.-THQH3GC1734239885681.js";import"./@vueuse.GyFlY0FM1734239885681.js";const P=M;!function(n,t){const o=M,r=D();for(;;)try{if(643924===parseInt(o(193))/1*(parseInt(o(199))/2)+-parseInt(o(155))/3*(-parseInt(o(159))/4)+parseInt(o(152))/5+-parseInt(o(146))/6+parseInt(o(205))/7*(parseInt(o(208))/8)+parseInt(o(174))/9*(-parseInt(o(183))/10)+-parseInt(o(182))/11*(parseInt(o(160))/12))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const A=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function D(){const n=["10kNLKWh","setAttribute","count","bind","geometry","gger","position","while (true) {}","translate","return (function() ","323179jYTZTZ","random","debu","#ffc0fa","trace","string","4MqQfnc","clone","init","console","log","scene","54796BpYIby",'{}.constructor("return this")( )',"u_progress","264jYzsZP","exception","uniforms","m2Color","__proto__","onLoop","fragmentModelCom","test","rotateY","Vector3","deleteAttribute","length","normal","array","prototype","Color","error","颜色2rd","refresh","apply","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","4357740PzLcQT","toNonIndexed","table","rotateX","TresShaderMaterial","children","3144100kvYzTn","value","变化量","57eiZAEq","toNormal","颜色1st","sin","140644DoqpIy","8292ETwRbf","function *\\( *\\)","action","#bcd4ff","set","input","tangent","./draco/","BufferAttribute","call","info","addBinding","counter","attributes","5815431CdAfDz","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","mergeGeometries","aRandom","push","constructor","toPosition","2948wmZEBx"];return(D=function(){return n})()}function M(n,t){const o=D();return(M=function(n,t){return o[n-=126]})(n,t)}!function(){A(this,(function(){const n=M,t=new RegExp(n(161)),o=new RegExp(n(176),"i"),r=T(n(201));t[n(132)](r+"chain")&&o[n(132)](r+n(165))?T():r("0")}))()}();const j=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[M(144)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();j(void 0,(function(){const n=M,t=function(){const n=M;let t;try{t=Function(n(192)+n(206)+");")()}catch(o){t=window}return t}(),o=t[n(202)]=t.console||{},r=[n(203),"warn",n(170),n(141),n(126),n(148),n(197)];for(let e=0;e<r[n(136)];e++){const t=j[n(180)][n(139)][n(186)](j),a=r[e],s=o[a]||t;t[n(129)]=j.bind(j),t[n(175)]=s[n(175)].bind(s),o[a]=t}}))();const N=[P(187)],R=l({__name:P(131),async setup(c){const l=P;let h,C;const I=n=>{const t=M,o=[];return n.traverse((n=>{const t=M;n instanceof r&&(n[t(187)][t(135)]("uv"),n[t(187)][t(135)](t(166)),o[t(179)](n[t(187)]))})),e[t(177)](o)},z=I(([h,C]=p((()=>s(l(145),{draco:!0,decoderPath:l(167)}))),h=await h,C(),h)[l(204)][l(151)][0]);z[l(149)](Math.PI/2),z[l(191)](0,-.9,0);const _=z[l(200)]()[l(147)](),A=I(([h,C]=p((()=>s("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:"./draco/"}))),h=await h,C(),h)[l(204)][l(151)][0]);A.rotateX(-Math.PI/2),A[l(133)](Math.PI/3);const D=A[l(200)]()[l(147)](),j=_[l(173)][l(189)][l(138)],R=_[l(173)][l(189)][l(185)],T=D[l(173)][l(189)][l(138)],Z=D.attributes[l(137)][l(138)],E=D[l(173)][l(189)][l(185)],V=new Float32Array(R),S=new Float32Array(3*(R+2)),F=new Float32Array(3*(R+2)),k=new Float32Array(3*(R+2));for(let t=0;t<R;t+=3){const o=1*Math[l(194)](),r=t%E;V[t]=o,V[t+1]=o,V[t+2]=o;const e=3*t,a=j[e],s=j[e+1],i=j[e+2],c=j[e+3],u=j[e+4],p=j[e+5],f=j[e+6],m=j[e+7],v=j[e+8],g=new(n[l(134)])(a+c+f,s+u+m,i+p+v).divideScalar(3);S.set([g.x,g.y,g.z],3*t),S[l(164)]([g.x,g.y,g.z],3*(t+1)),S[l(164)]([g.x,g.y,g.z],3*(t+2));const d=(n,t,o)=>{const r=l,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(164)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(T,F,r),d(Z,k,r)}_.setAttribute(l(178),new(n[l(168)])(V,1)),_[l(184)]("aCenter",new t(S,3)),_[l(184)](l(181),new(n[l(168)])(F,3)),_.setAttribute(l(156),new(n[l(168)])(k,3)),console[l(203)](_[l(173)]);const B=([h,C]=p((()=>i(["./plugins/visualArts/image/fragment512px.png"]))),h=await h,C(),h),Y={uniforms:{u_progress:{value:-.1},matcap1:{value:B},m1Color:{type:"v3",value:new o(l(196))},matcap2:{value:B},m2Color:{type:"v3",value:new(n[l(140)])(l(163))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},q=f({c1:l(196),c2:l(163)}),L=m(.5),U=new u({title:"参数"});return U[l(171)](Y.uniforms.u_progress,l(153),{label:l(154),min:-.1,max:1,step:.001}).disabled=!0,U[l(171)](q,"c1",{label:l(157)}),U[l(171)](q,"c2",{label:l(142)}),U.addBinding(L,l(153),{label:"速度",min:.001,max:1,step:.001}),v(q,(n=>{const t=l;Y[t(127)].m1Color[t(153)].set(n.c1),Y[t(127)][t(128)].value[t(164)](n.c2)}),{deep:!0}),a()[l(130)]((({elapsed:n})=>{const t=l;Y[t(127)][t(207)][t(153)]=(Math[t(158)](n*L[t(153)])+1)/2,U[t(143)]()})),(n,t)=>{const o=l;return g(),d("TresMesh",{geometry:w(_)},[x(o(150),y(b(Y)),null,16)],8,N)}}});function T(n){function t(n){const o=M;if(typeof n===o(198))return function(n){}[o(180)](o(190))[o(144)](o(172));1!==(""+n/n)[o(136)]||n%20==0?function(){return!0}[o(180)]("debu"+o(188))[o(169)](o(162)):function(){return!1}[o(180)](o(195)+"gger")[o(144)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const Z=E;function E(n,t){const o=F();return(E=function(n,t){return o[n-=301]})(n,t)}!function(n,t){const o=E,r=F();for(;;)try{if(538724===-parseInt(o(314))/1*(parseInt(o(341))/2)+parseInt(o(323))/3*(parseInt(o(301))/4)+-parseInt(o(332))/5+parseInt(o(315))/6*(-parseInt(o(344))/7)+-parseInt(o(346))/8+parseInt(o(327))/9+parseInt(o(308))/10*(parseInt(o(310))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const V=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[E(335)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){V(this,(function(){const n=E,t=new RegExp(n(326)),o=new RegExp(n(309),"i"),r=B("init");t.test(r+n(339))&&o[n(336)](r+n(312))?B():r("0")}))()}();const S=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function F(){const n=["while (true) {}","1692544DmyXJp","839336sNMDwK","warn","fragmentModel","stateObject","TresCanvas","constructor","console","168690BlXSue","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","506pTLisc","#000000","input","ACESFilmicToneMapping","71eggtHb","234rlNwhu",'{}.constructor("return this")( )',"info","TresPerspectiveCamera","table","action","log","toString","6DCrEUb","call","exception","function *\\( *\\)","8126316yEnVZN","TresAmbientLight","length","prototype","return (function() ","3412070DzNWvR","gger","string","apply","test","bind","counter","chain","__proto__","18382ZVljbh","debu","error","2387OWfNgJ"];return(F=function(){return n})()}S(void 0,(function(){const n=E,t=function(){const n=E;let t;try{t=Function(n(331)+n(316)+");")()}catch(o){t=window}return t}(),o=t[n(307)]=t[n(307)]||{},r=[n(321),n(302),n(317),n(343),n(325),n(319),"trace"];for(let e=0;e<r[n(329)];e++){const t=S[n(306)][n(330)][n(337)](S),a=r[e],s=o[a]||t;t[n(340)]=S[n(337)](S),t[n(322)]=s[n(322)][n(337)](s),o[a]=t}}))();const k=l({__name:Z(303),setup(t){const o=Z,r=f({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:o(311),windowSize:!0,toneMapping:n[o(313)],toneMappingExposure:.8};return(n,t)=>{const a=o,s=h(a(305));return g(),C(s,y(b(e)),{default:I((()=>[t[0]||(t[0]=x(a(318),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),z(w(c),y(b(r)),null,16),t[1]||(t[1]=x(a(328),{intensity:2},null,-1)),(g(),C(_,null,{default:I((()=>[z(R)])),_:1}))])),_:1},16)}}});function B(n){function t(n){const o=E;if(typeof n===o(334))return function(n){}[o(306)](o(345))[o(335)](o(338));1!==(""+n/n)[o(329)]||n%20==0?function(){return!0}[o(306)]("debu"+o(333))[o(324)](o(320)):function(){return!1}.constructor(o(342)+o(333))[o(335)](o(304)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{k as default};

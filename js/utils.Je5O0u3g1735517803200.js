import"./@fesjs.2Oz5LDgh1735517803200.js";import{_ as t}from"./jszip.zDIA5__a1735517803200.js";import{F as n}from"./file-saver.yBIYkANx1735517803200.js";import{_ as e}from"./three.-uH5I3Xp1735517803200.js";const s=c;!function(t,n){const e=c,s=r();for(;;)try{if(417479===parseInt(e(218))/1*(-parseInt(e(247))/2)+parseInt(e(191))/3+parseInt(e(210))/4+parseInt(e(269))/5*(parseInt(e(244))/6)+parseInt(e(207))/7*(parseInt(e(214))/8)+-parseInt(e(241))/9*(-parseInt(e(272))/10)+-parseInt(e(205))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[c(252)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function r(){const t=["image/jpeg","stateObject","geometries","onerror","input","type","base64","Cache","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","constructor",";base64,","45vXYMQg","data:image/PNG;base64,","action","180nQgcxE","slice","data:image/png;base64,","34RScioO","url","url:geometries/","image/png",".json","apply","file","table","setResponseType","test","chain","toString","images","console","get","forEach","url:images/","GIF","data:image/JPEG;base64,","parse","image/gif","blob","130805KubeFI","debu","onloadend","1188100TALLGi","BufferGeometry","message","folder","prototype","push","FileLoader","length","function *\\( *\\)","error","toLowerCase","stringify","gger","load","1694280ZcGZzm","data:image/GIF;base64,","while (true) {}","image/bmp","data","name","catch","data:image/jpeg;base64,","startsWith","toUpperCase","readAsDataURL","counter","application/octet-stream","generateAsync","25467706ooZwvb","WEBP","493584xrkeug","split","scene","2751548rBtxcM","exception","url:","call","40imPIpk","endsWith","pop","config.zip","14786YvUQXE","enabled","data:image/","async","app.json","bind","files","Unknown","uuid","then"];return(r=function(){return t})()}!function(){o(this,(function(){const t=c,n=new RegExp(t(280)),e=new RegExp(t(237),"i"),s=d(t(236));n[t(256)](s+t(257))&&e[t(256)](s+t(232))?d():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[c(252)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function c(t,n){const e=r();return(c=function(t,n){return e[t-=187]})(t,n)}async function i(t){const n=s,o=new(e[n(278)]);return new Promise(((e,s)=>{const r=n;o[r(190)](t,(t=>e(JSON[r(266)](t))),void 0,(t=>s(t)))}))}async function u(t){const n=s,o=new(e[n(278)]);return new Promise(((e,r)=>{const a=n;o[a(255)](a(268)),o[a(190)](t,(n=>{const o=a,c=new FileReader;c[o(271)]=()=>{const n=o,r=function(t){const n=s,e=t[n(208)](".")[n(216)]()[n(187)]();return{jpg:n(228),jpeg:n(228),png:n(250),gif:n(267),bmp:n(194),webp:"image/webp"}[e]||n(203)}(t),a=c.result[n(208)](",")[1];e("data:"+r+n(240)+a)},c[o(231)]=t=>{r(t)},c.readAsDataURL(n)}),void 0,(t=>r(t)))}))}a(void 0,(function(){const t=c;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(260)]=n.console||{},s=["log","warn","info",t(281),t(211),t(254),"trace"];for(let r=0;r<s[t(279)];r++){const n=a.constructor[t(276)][t(223)](a),o=s[r],c=e[o]||n;n.__proto__=a[t(223)](a),n[t(258)]=c[t(258)][t(223)](c),e[o]=n}}))(),e[s(235)][s(219)]=!0;const p=n=>{const o=s,r=new(e[o(278)]);return r.setResponseType("blob"),new Promise(((e,s)=>{r[o(190)](n,(async n=>{e(await t.loadAsync(n))}),void 0,(t=>s(t)))}))},l=t=>{const n=s,e=t.substring(0,15),o=n(198),r=n(265),a=n(246),c=n(242),i=n(192);return o[n(199)](e)||r[n(199)](e)?"JPEG":a[n(199)](e)||c.startsWith(e)?"PNG":"data:image/gif;base64,".startsWith(e)||i.startsWith(e)?n(264):"data:image/webp;base64,".startsWith(e||"data:image/WEBP;base64,"[n(199)](e))?n(206):n(225)},f=e=>{const o=s,r=[];e[o(209)][o(230)]&&e.scene[o(230)][o(262)]((t=>{const n=o;t.type===n(273)&&(r[n(277)]({uuid:t[n(226)],data:t[n(195)]}),t.data=n(249)+t[n(226)]+".json")}));const a=[];e[o(209)][o(259)]&&e[o(209)][o(259)][o(262)]((t=>{const n=o;t[n(248)]&&(a[n(277)]({uuid:t[n(226)],url:t[n(248)]}),t.url[n(233)]?t[n(248)]=n(263)+t.uuid+"."+t[n(248)][n(233)]+n(251):t[n(248)]=n(263)+t[n(226)]+"."+l(t.url))}));const c=new t;if(r[o(279)]){const t=c[o(275)]("geometries");r[o(262)]((n=>{const e=o;t.file(n[e(226)]+e(251),JSON[e(188)](n[e(195)]))}))}if(a[o(279)]){const t=c[o(275)](o(259));a[o(262)]((n=>{const e=o;n[e(248)].type?t[e(253)](n[e(226)]+"."+n[e(248)][e(233)]+e(251),JSON[e(188)](n.url)):t[e(253)](n[e(226)]+"."+l(n.url),n.url[e(208)](e(240))[e(216)](),{base64:!0})}))}const i=JSON[o(188)](e);return c.file(o(222),i),c[o(204)]({type:o(268)})[o(227)]((t=>{const e=o;n.saveAs(t,e(217))}))},g=(t,n,e)=>{const o=s;t[o(230)]<=0&&t[o(259)]<=0&&e(n)},m=(n,e)=>{const o=s;let r=null;return t.loadAsync(n)[o(227)]((t=>{const n=o;t[n(224)]["app.json"]?t[n(224)][n(222)].async("string")[n(227)]((o=>{var a,c;const i=n;r=JSON[i(266)](o);const u=(t=>{var n,e;const o=s,r={geometries:0,images:0};return null==(n=t[o(209)].geometries)||n[o(262)]((t=>{const n=o;t[n(195)].startsWith(n(212))&&r[n(230)]++})),null==(e=t[o(209)][o(259)])||e[o(262)]((t=>{const n=o;t.url.startsWith("url:")&&r[n(259)]++})),r})(r);g(u,r,e),null==(a=r[i(209)][i(230)])||a[i(262)]((n=>{const s=i;n[s(195)][s(199)](s(212))&&t[s(224)][n[s(195)].slice(4)][s(221)](s(238))[s(227)]((t=>{const o=s;n.data=JSON[o(266)](t),u[o(230)]--,g(u,r,e)}))})),null==(c=r[i(209)][i(259)])||c[i(262)]((n=>{const s=i;if(n.url[s(199)](s(212))){const o=n[s(248)][s(245)](4);o[s(215)](s(251))?t[s(224)][o].async(s(238)).then((t=>{const o=s;n[o(248)]=JSON[o(266)](t),u.images--,g(u,r,e)})):t[s(224)][o][s(221)](s(234))[s(227)]((t=>{const a=s,c=o[a(208)]("."),i=c[c[a(279)]-1][a(200)]();n.url=a(220)+i+a(240)+t,u[a(259)]--,g(u,r,e)}))}}))})):console[n(281)]("非标准文件：不存在 app.json")}),(t=>{const e=o;console.error(n[e(196)]+": "+t[e(274)])})),r};function d(t){function n(t){const e=c;if(typeof t===e(238))return function(t){}[e(239)](e(193))[e(252)](e(202));1!==(""+t/t)[e(279)]||t%20==0?function(){return!0}[e(239)](e(270)+e(189))[e(213)](e(243)):function(){return!1}[e(239)](e(270)+e(189))[e(252)](e(229)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as a,u as b,f as e,l as g,m as i,i as l};

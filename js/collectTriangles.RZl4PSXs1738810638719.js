import{m as t,e as n,l as e,o as r,J as o}from"./@tresjs.8axf5yqM1738810638719.js";import{_ as s}from"./index.AXWtS2N11738810638719.js";import{_ as i,aK as c,B as u,cx as a}from"./three.6w8Allze1738810638719.js";import{P as l}from"./tweakpane.yDiyAAkA1738810638719.js";import{I as p,C as f,N as g,c as h,d as m,a as d}from"./three-mesh-bvh.wW9dzxva1738810638719.js";import{d as y,a3 as w,b as j,a2 as b,o as I,H as _,N as v,u as x,F as T,r as M,e as z,j as R,g as k,m as A,f as B,al as P}from"./@vue.NRI7TcgI1738810638719.js";import"./@vueuse.hJpps2zM1738810638719.js";import"./index.SQxQawBL1738810638719.js";import"./@fesjs.5sDv5KaN1738810638719.js";import"./vue-router.bGXYs4Br1738810638719.js";import"./lodash-es.pklfUAS51738810638719.js";import"./@qlin.yHhFDldE1738810638719.js";import"./pinia.a31yeUkM1738810638719.js";import"./@floating-ui.BPbuo5Gx1738810638719.js";import"./@juggle.7yjBMqoW1738810638719.js";import"./chalk.9FGrMJNn1738810638719.js";/* empty css                                 */import"./iconify-icon.BVOVpC8G1738810638719.js";import"./@iconify.dt4P0LGS1738810638719.js";import"./dompurify.rQUea5mq1738810638719.js";import"./utils.dQRwSlNK1738810638719.js";import"./default.vue_vue_type_script_setup_true_lang.dHXn982C1738810638719.js";import"./three-mesh-ui.module.93pCAeO41738810638719.js";function S(){const t=["addEventListener","11rbXaaK","clientY","bind","apply","test","innerHeight","toString",'{}.constructor("return this")( )',"while (true) {}","4BNIZjR","3215366DkZhzG","prototype","6zSPohz","clientX","Raycaster","innerWidth","392091abuEed","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","debu","action","3288Tfaino","return (function() ","input","table","constructor","pointermove","error","chain","counter","pointerup","8226730IVPzRM","pointerdown","value","intersectObject","setFromCamera","length","3584995fgYHUU","3801774UoPECl","enabled","warn","1571126TOSBWH","19269AyTuYn","button","exception","console"];return(S=function(){return t})()}!function(t,n){const e=O,r=S();for(;;)try{if(981939===parseInt(e(451))/1+parseInt(e(467))/2+-parseInt(e(448))/3*(parseInt(e(466))/4)+parseInt(e(447))/5+-parseInt(e(469))/6*(-parseInt(e(473))/7)+parseInt(e(479))/8*(-parseInt(e(452))/9)+-parseInt(e(441))/10*(parseInt(e(457))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[O(460)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){C(this,(function(){const t=O,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(475),"i"),r=Z(t(476));n[t(461)](r+t(486))&&e[t(461)](r+t(481))?Z():r("0")}))()}();const E=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[O(460)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function O(t,n){const e=S();return(O=function(t,n){return e[t-=439]})(t,n)}E(void 0,(function(){const t=O,n=function(){const t=O;let n;try{n=Function(t(480)+t(464)+");")()}catch(e){n=window}return n}(),e=n[t(455)]=n[t(455)]||{},r=["log",t(450),"info",t(485),t(454),t(482),"trace"];for(let o=0;o<r[t(446)];o++){const n=E[t(483)][t(468)][t(459)](E),s=r[o],i=e[s]||n;n.__proto__=E[t(459)](E),n[t(463)]=i[t(463)][t(459)](i),e[s]=n}}))();function Z(t){function n(t){const e=O;if(typeof t===e(474))return function(t){}[e(483)](e(465)).apply(e(439));1!==(""+t/t)[e(446)]||t%20==0?function(){return!0}[e(483)](e(477)+"gger").call(e(478)):function(){return!1}[e(483)](e(477)+"gger")[e(460)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const F=L;!function(t,n){const e=L,r=X();for(;;)try{if(556383===-parseInt(e(353))/1*(parseInt(e(388))/2)+-parseInt(e(390))/3+parseInt(e(337))/4*(-parseInt(e(395))/5)+parseInt(e(382))/6*(-parseInt(e(407))/7)+parseInt(e(373))/8*(parseInt(e(348))/9)+-parseInt(e(398))/10*(parseInt(e(345))/11)+parseInt(e(369))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const U=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[L(324)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){U(this,(function(){const t=L,n=new RegExp(t(410)),e=new RegExp(t(401),"i"),r=W(t(400));n[t(379)](r+t(338))&&e[t(379)](r+t(349))?W():r("0")}))()}();const H=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[L(324)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function L(t,n){const e=X();return(L=function(t,n){return e[t-=323]})(t,n)}function X(){const t=["Vector2","Matrix4","counter","length","DynamicDrawUsage","radius","setAttribute","30366756xLGgKd","debu","value","intersectsSphere","2673832VlJyzU","push","fill","TresSphereGeometry","needsUpdate","log","test","action","getY","17796aVuQRk","getZ","intersectObject","normal","exception","index","32sjMYPQ","instance","520590XMqjuE","active","string",'{}.constructor("return this")( )',"BufferGeometry","15425RsgRba","position","applyMatrix4","1187150bqyFej","info","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","点击按钮","copy","boundsTree","setY","toString","2303nOSrah","Sphere","disposeBoundsTree","function *\\( *\\)","setX","bind","TresMesh","computeBoundsTree","getX","apply","prototype","matrixWorld","Mesh","point","gger","console","set","geometry","constructor","scale","brushMesh","enabled","12UUBHrr","chain","trace","setFromCamera","call","attributes","setUsage","raycast","66yOqBMv","shapecast","TresMeshStandardMaterial","9kKnpMs","input","setZ","visible","BufferAttribute","27345wdhLdP","__proto__","controls","center","while (true) {}","addButton","Vector3","firstHitOnly","color"];return(X=function(){return t})()}H(void 0,(function(){const t=L,n=function(){const t=L;let n;try{n=Function("return (function() "+t(393)+");")()}catch(e){n=window}return n}(),e=n[t(330)]=n[t(330)]||{},r=[t(378),"warn",t(399),"error",t(386),"table",t(339)];for(let o=0;o<r[t(365)];o++){const n=H[t(333)][t(325)][t(412)](H),s=r[o],i=e[s]||n;n[t(354)]=H.bind(H),n.toString=i[t(406)][t(412)](i),e[s]=n}}))();const Y=[F(332),"material"],q=["geometry"],D=y({__name:"model",props:{controls:{}},async setup(r){const o=F;let s,y;const M=r;(()=>{const t=L;u.prototype[t(414)]=h,i[t(394)][t(325)][t(409)]=m,i[t(327)].prototype[t(344)]=d})();const z=([s,y]=w((()=>e(a,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,y(),s),R=new c({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),k=new Uint8Array(3*z[o(342)].position.count);k[o(375)](255);const A=new(i[o(352)])(k,3,!0);A[o(343)](i[o(366)]),z.setAttribute(o(361),A);const B=j(null),P=j(null),S=j(!1),C=j(-1),E=j(.2),Z=new(i[o(362)]),{camera:U,raycaster:H}=t(),X=15/255,D=78/255,W=85/255;let K=null;b((()=>{const t=o;B[t(371)]&&(console[t(378)]("targetMesh.value init",B[t(371)]),B[t(371)][t(332)].computeBoundsTree(),K=z[t(404)],((t,n,e,r,o,s)=>{const c=O;window.addEventListener(c(484),(e=>{const r=c;t.x=e[r(470)]/window.innerWidth*2-1,t.y=-e[r(458)]/window[r(462)]*2+1,n[r(443)]=!0})),window[c(456)](c(442),(u=>{const a=c;t.x=u.clientX/window[a(472)]*2-1,t.y=-u.clientY/window[a(462)]*2+1,r[a(443)]=u[a(453)];const l=new(i[a(471)]);l[a(445)](t,e[a(443)]),l.firstHitOnly=!0;const p=l[a(444)](o[a(443)],!0);n[a(443)]=!0,s[a(449)]=0===p[a(446)]}),!0),window[c(456)](c(440),(t=>{const e=c;r[e(443)]=-1,"touch"===t.pointerType&&(n[e(443)]=!1)}),!0)})(Z,S,U,C,B,M.controls.instance))}));const{onLoop:$}=n();$((()=>{const t=o,n=z[t(387)];if(P[t(371)])if(M.controls[t(389)][t(391)]||!S[t(371)])P[t(371)][t(351)]=!1;else{P[t(371)][t(334)].setScalar(E.value),H.value[t(340)](Z,U[t(371)]),H[t(371)][t(360)]=!0;const e=H[t(371)][t(384)](B.value,!0);if(e.length){P[t(371)][t(396)][t(403)](e[0][t(328)]),M[t(355)][t(389)][t(336)]=!1,P[t(371)][t(351)]=!0;const r=new(i[t(363)]);r.copy(B[t(371)][t(326)]).invert();const o=new(i[t(408)]);o[t(356)][t(403)](P[t(371)][t(396)])[t(397)](r),o[t(367)]=100*E.value;const s=[],c=new(i[t(359)]);if(null==K||K[t(346)]({intersectsBounds:n=>{const e=t,r=o.intersectsBox(n),{min:s,max:i}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(c[e(331)](0===t?s.x:i.x,0===n?s.y:i.y,0===r?s.z:i.z),!o.containsPoint(c))return p;return f}return r?p:g},intersectsTriangle:(n,e,r)=>{if(r||n[t(372)](o)){const t=3*e;s.push(t,t+1,t+2)}return!1}}),0===C[t(371)]||2===C.value){let e=1,r=1,o=1;0===C.value&&(e=X,r=D,o=W);for(let i=0,c=s[t(365)];i<c;i++){const c=n[t(323)](s[i]);A[t(411)](c,e),A[t(405)](c,r),A[t(350)](c,o)}A[t(377)]=!0}}else P.value[t(351)]=!1,M[t(355)][t(389)][t(336)]=!0}}));const V=(new l)[o(358)]({title:o(402),label:"生成模型"}),G=new(i[o(394)]);return V.on("click",(()=>{const t=o,n=[],e=[];for(let o=0;o<A.count;o++)A.getX(o)===X&&A[t(381)](o)===D&&A.getZ(o)===W&&(n[t(374)](z[t(342)].position[t(323)](o),z[t(342)][t(396)][t(381)](o),z.attributes[t(396)][t(383)](o)),e[t(374)](z.attributes[t(385)].getX(o),z[t(342)][t(385)][t(381)](o),z.attributes.normal[t(383)](o)));const r=new Float32Array(n);G[t(368)](t(396),new(i[t(352)])(r,3)),G[t(368)](t(385),new(i[t(352)])(r,3))})),(t,n)=>{const e=o;return I(),_(T,null,[v(e(413),{ref_key:"targetMesh",ref:B,geometry:x(z),scale:.005,material:x(R)},null,8,Y),v(e(413),{ref_key:e(335),ref:P,visible:!1},n[0]||(n[0]=[v(e(376),{args:[1,40,40]},null,-1),v(e(347),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),v(e(413),{geometry:x(G),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[v("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,q)],64)}}});function W(t){function n(t){const e=L;if(typeof t===e(392))return function(t){}[e(333)](e(357))[e(324)](e(364));1!==(""+t/t)[e(365)]||t%20==0?function(){return!0}.constructor(e(370)+"gger")[e(341)](e(380)):function(){return!1}[e(333)](e(370)+e(329))[e(324)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const K=$;function $(t,n){const e=N();return($=function(t,n){return e[t-=416]})(t,n)}!function(t,n){const e=$,r=N();for(;;)try{if(439970===parseInt(e(427))/1+parseInt(e(460))/2*(parseInt(e(417))/3)+parseInt(e(456))/4+-parseInt(e(448))/5*(-parseInt(e(437))/6)+-parseInt(e(444))/7*(-parseInt(e(429))/8)+-parseInt(e(445))/9+parseInt(e(420))/10*(-parseInt(e(449))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const V=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[$(436)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){V(this,(function(){const t=$,n=new RegExp(t(440)),e=new RegExp(t(457),"i"),r=Q(t(431));n[t(450)](r+t(454))&&e.test(r+"input")?Q():r("0")}))()}();const G=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[$(436)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=$;let n;try{n=Function("return (function() "+t(432)+");")()}catch(o){n=window}const e=n[t(452)]=n.console||{},r=[t(435),t(423),t(421),"error",t(418),"table","trace"];for(let s=0;s<r[t(422)];s++){const n=G[t(443)][t(442)].bind(G),o=r[s],i=e[o]||n;n[t(461)]=G[t(428)](G),n[t(434)]=i[t(434)][t(428)](i),e[o]=n}}))();const J=y({__name:K(441),setup(t){const n=K,e=M({clearColor:n(439),antialias:!0}),i=M({autoRotate:!1}),c=j(null);return(t,u)=>{const a=n,l=z(a(455));return I(),_(T,null,[R(x(s)),R(l,A(e,{"window-size":""}),{default:k((()=>[u[0]||(u[0]=v("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),R(x(r),A({ref_key:a(446),ref:c},i),null,16),u[1]||(u[1]=v("TresAmbientLight",{intensity:1},null,-1)),(I(),B(P,null,{default:k((()=>[R(D,{controls:c[a(424)]},null,8,["controls"])])),_:1})),(I(),B(P,null,{default:k((()=>[R(x(o),{background:!1,files:["pos-x.jpg",a(433),a(453),a(425),a(430),a(462)],path:a(416)})])),_:1}))])),_:1},16)],64)}}});function N(){const t=['{}.constructor("return this")( )',"neg-x.jpg","toString","log","apply","5059554dacrQS","string","#999999","function *\\( *\\)","collectTriangles","prototype","constructor","255563nCjQcn","4972086LZKlYh","controlsRef","action","5gqPKWD","902yMYrpc","test","while (true) {}","console","pos-y.jpg","chain","TresCanvas","1708732PLFwDW","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","stateObject","674jFWnim","__proto__","neg-z.jpg","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","4281HcUPuN","exception","debu","174310xFTPIE","info","length","warn","value","neg-y.jpg","counter","524389HhslPL","bind","32POJdqD","pos-z.jpg","init"];return(N=function(){return t})()}function Q(t){function n(t){const e=$;if(typeof t===e(438))return function(t){}[e(443)](e(451))[e(436)](e(426));1!==(""+t/t)[e(422)]||t%20==0?function(){return!0}[e(443)](e(419)+"gger")[e(458)](e(447)):function(){return!1}[e(443)](e(419)+"gger")[e(436)](e(459)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{J as default};

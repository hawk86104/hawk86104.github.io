import{aP as e,a as r,C as o,m as t,l as i,cy as a}from"./three.CC50Wz7a1758524188831.js";import{m as s,b as l}from"./@tresjs.BL1sBIDK1758524188831.js";import{R as n}from"./ReflectorMaterial.DXFLN1WU1758524188831.js";import{R as f}from"./Reflector.hbefUijb1758524188831.js";import"./OimoPhysicsBuffer.CcBMdMc41758524188831.js";import{d as m,aa as c,a2 as u,w as p,G as d,o as w,I as h,u as v}from"./@vue.pEDXJ_3Z1758524188831.js";const g=["position","scale"],j=["object"],b=["object"],x=m({__name:"reflectorShaderMesh",props:{reflectivity:{default:.2},mirror:{default:.1},mixStrength:{default:9},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"},position:{default:[0,-1,0]},scale:{default:1}},async setup(m){let x,y;const S=m,{scene:M}=s(),_=([x,y]=c((()=>l(["./plugins/floor/image/concrete_wet_floor_basecolor.jpg","./plugins/floor/image/concrete_wet_floor_normal.jpg"]))),x=await x,y(),x);_[0].wrapS=e,_[0].wrapT=e,_[1].wrapS=e,_[1].wrapT=e;const R=new f,G=new n({reflectivity:S.reflectivity,mirror:S.mirror,mixStrength:S.mixStrength,color:new o(S.color),map:_[0],normalMap:_[1],normalScale:new r(5,5),fog:M.fog,dithering:!0});G.uniforms.tReflect=R.renderTargetUniform,G.uniforms.uMatrix=R.textureMatrixUniform;const T=new t(10,10),B=new i(T,G);B.name="reflectorShaderMesh",B.position.y=-.01,B.rotation.x=-Math.PI/2,B.add(R),B.onBeforeRender=(e,r,o)=>{B.visible=!1,R.update(e,r,o),B.visible=!0};const H=new a(9.5,10);return H.visible=S.showGridHelper,u((()=>{S.reflectivity&&(G.uniforms.uReflectivity.value=S.reflectivity),S.mirror&&(G.uniforms.uMirror.value=S.mirror),S.mixStrength&&(G.uniforms.uMixStrength.value=S.mixStrength),S.color&&(G.uniforms.uColor.value=new o(S.color))})),p((()=>S.showGridHelper),(e=>{H.visible=e})),(e,r)=>(w(),d("TresGroup",{position:S.position,scale:S.scale},[h("primitive",{object:v(B)},null,8,j),h("primitive",{object:v(H)},null,8,b)],8,g))}});export{x as _};

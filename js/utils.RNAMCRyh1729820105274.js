import"./@fesjs.NJfsHdwi1729820105274.js";import{_ as t}from"./jszip.nToJU0Sc1729820105274.js";import{F as n}from"./file-saver.JNvOL-hY1729820105274.js";import{cC as e,_ as s}from"./three.0W5n8UBO1729820105274.js";const o=i;!function(t,n){const e=i,s=c();for(;;)try{if(112348===parseInt(e(526))/1*(-parseInt(e(525))/2)+parseInt(e(520))/3*(parseInt(e(518))/4)+parseInt(e(494))/5*(parseInt(e(477))/6)+parseInt(e(501))/7+-parseInt(e(516))/8*(parseInt(e(554))/9)+-parseInt(e(474))/10+-parseInt(e(488))/11*(-parseInt(e(567))/12))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[i(546)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){r(this,(function(){const t=i,n=new RegExp(t(555)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=b(t(495));n[t(521)](s+t(566))&&e[t(521)](s+t(550))?b():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[i(546)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(t,n){const e=c();return(i=function(t,n){return e[t-=472]})(t,n)}function c(){const t=["string","23964YDBPqL","test","pop","console","folder","2FQCwmk","202061ISOqcD","scene","while (true) {}","startsWith","data:image/WEBP;base64,","data:image/JPEG;base64,","FileLoader","setResponseType","app.json","file","exception","config.zip","name","endsWith","files","type","JPEG","onerror","onloadend","data:image/GIF;base64,","apply","catch","image/png","stateObject","input",".json","image/gif","loadAsync","153LDXtfo","function *\\( *\\)","image/webp","application/octet-stream","非标准文件：不存在 app.json","__proto__","call","geometries","images","data:","toString","url:images/","chain","15348jzvnFx","data:image/jpeg;base64,","enabled","747660yJYiVj","async","load","6ZMkxPF","url","table","Unknown","data","counter","image/jpeg","then","constructor","debu","get","627qGgUee","result","slice","info","GIF","substring","803895gOidoD","init","action","url:geometries/","data:image/webp;base64,","stringify","push","1439732QILXBd","data:image/","url:","trace","forEach","prototype","length","split","blob",";base64,","WEBP","readAsDataURL","error","message","parse","53688LjSaFD","uuid","32GjIdTi"];return(c=function(){return t})()}async function u(t){const n=o,e=new(s[n(532)]);return new Promise(((s,o)=>{const r=n;e[r(476)](t,(t=>s(JSON[r(515)](t))),void 0,(t=>o(t)))}))}async function p(t){const n=o,e=new(s[n(532)]);return new Promise(((s,r)=>{const a=n;e[a(533)](a(509)),e[a(476)](t,(n=>{const e=a,i=new FileReader;i[e(544)]=()=>{const n=e,r=function(t){const n=o,e=t[n(508)](".").pop().toLowerCase();return{jpg:n(483),jpeg:n(483),png:n(548),gif:n(552),bmp:"image/bmp",webp:n(556)}[e]||n(557)}(t),a=i[n(489)].split(",")[1];s(n(563)+r+n(510)+a)},i[e(543)]=t=>{r(t)},i[e(512)](n)}),void 0,(t=>r(t)))}))}a(void 0,(function(){const t=i;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(523)]=n.console||{},s=["log","warn",t(491),t(513),t(536),t(479),t(504)];for(let r=0;r<s[t(507)];r++){const n=a[t(485)][t(506)].bind(a),o=s[r],i=e[o]||n;n[t(559)]=a.bind(a),n.toString=i[t(564)].bind(i),e[o]=n}}))(),e[o(473)]=!0;const l=n=>{const e=o,r=new(s[e(532)]);return r.setResponseType(e(509)),new Promise(((s,o)=>{const a=e;r[a(476)](n,(async n=>{const e=a;s(await t[e(553)](n))}),void 0,(t=>o(t)))}))},f=t=>{const n=o,e=t[n(493)](0,15),s=n(472),r=n(531),a=n(545),i=n(498),c=n(530);return s[n(529)](e)||r[n(529)](e)?n(542):"data:image/png;base64,"[n(529)](e)||"data:image/PNG;base64,".startsWith(e)?"PNG":"data:image/gif;base64,"[n(529)](e)||a[n(529)](e)?n(492):i[n(529)](e||c[n(529)](e))?n(511):n(480)},g=e=>{const s=o,r=[];e.scene[s(561)]&&e.scene[s(561)][s(505)]((t=>{const n=s;"BufferGeometry"===t[n(541)]&&(r.push({uuid:t[n(517)],data:t.data}),t[n(481)]=n(497)+t.uuid+n(551))}));const a=[];e[s(527)][s(562)]&&e[s(527)].images[s(505)]((t=>{const n=s;t.url&&(a[n(500)]({uuid:t.uuid,url:t.url}),t.url[n(541)]?t.url=n(565)+t[n(517)]+"."+t[n(478)][n(541)]+n(551):t.url=n(565)+t[n(517)]+"."+f(t[n(478)]))}));const i=new t;if(r.length){const t=i.folder(s(561));r[s(505)]((n=>{const e=s;t[e(535)](n[e(517)]+e(551),JSON[e(499)](n.data))}))}if(a[s(507)]){const t=i[s(524)](s(562));a[s(505)]((n=>{const e=s;n[e(478)][e(541)]?t.file(n[e(517)]+"."+n[e(478)][e(541)]+e(551),JSON[e(499)](n[e(478)])):t.file(n[e(517)]+"."+f(n[e(478)]),n.url[e(508)](e(510))[e(522)](),{base64:!0})}))}const c=JSON.stringify(e);return i[s(535)](s(534),c),i.generateAsync({type:s(509)})[s(484)]((t=>{const e=s;n.saveAs(t,e(537))}))},d=(t,n,e)=>{const s=o;t[s(561)]<=0&&t[s(562)]<=0&&e(n)},m=(n,e)=>{const s=o;let r=null;return t.loadAsync(n)[s(484)]((t=>{const n=s;t[n(540)][n(534)]?t[n(540)]["app.json"][n(475)](n(519)).then((s=>{var a,i;const c=n;r=JSON.parse(s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(527)].geometries)||n[s(505)]((t=>{const n=s;t[n(481)].startsWith(n(503))&&r[n(561)]++})),null==(e=t.scene[s(562)])||e[s(505)]((t=>{const n=s;t[n(478)][n(529)](n(503))&&r[n(562)]++})),r})(r);d(u,r,e),null==(a=r[c(527)][c(561)])||a[c(505)]((n=>{const s=c;n[s(481)].startsWith(s(503))&&t[s(540)][n.data[s(490)](4)][s(475)]("string")[s(484)]((t=>{const o=s;n[o(481)]=JSON.parse(t),u[o(561)]--,d(u,r,e)}))})),null==(i=r[c(527)][c(562)])||i[c(505)]((n=>{const s=c;if(n[s(478)][s(529)]("url:")){const o=n.url.slice(4);o[s(539)](".json")?t[s(540)][o][s(475)](s(519)).then((t=>{const o=s;n[o(478)]=JSON.parse(t),u[o(562)]--,d(u,r,e)})):t[s(540)][o][s(475)]("base64")[s(484)]((t=>{const a=s,i=o[a(508)]("."),c=i[i[a(507)]-1].toUpperCase();n[a(478)]=a(502)+c+a(510)+t,u[a(562)]--,d(u,r,e)}))}}))})):console[n(513)](n(558))}),(t=>{const e=s;console.error(n[e(538)]+": "+t[e(514)])})),r};function b(t){function n(t){const e=i;if(typeof t===e(519))return function(t){}[e(485)](e(528))[e(546)](e(482));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(486)+"gger")[e(560)](e(496)):function(){return!1}.constructor(e(486)+"gger")[e(546)](e(549)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,p as b,g as e,f as g,m as i,u as l};

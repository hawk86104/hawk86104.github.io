import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.aJLp8puk1741007821308.js";import{B as i,b as s,cy as e,ab as n,X as r,a as o,an as a,$ as h,r as c,_ as u}from"./three.sBrYSCgq1741007821308.js";import{e as l,I as d,K as p}from"./@tresjs.u6hJLBm41741007821308.js";import{a as m}from"./simplex-noise.jB2HxhHB1741007821308.js";import{d as f,a2 as g,o as y,H as b,u as S,r as v,j as w,g as x,m as _,F as I}from"./@vue.NRI7TcgI1741007821308.js";import"./index.7rIW0qS81741007821308.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.NROQEdkH1741007821308.js";import"./three-custom-shader-material.3n-EBY0H1741007821308.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1741007821308.js";import"./postprocessing.rsQjznIU1741007821308.js";import"./@vueuse.jd1Cg91M1741007821308.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.zZ28-0dF1741007821308.js";import"./all.three.VR_q9_2T1741007821308.js";import"./oimophysics.x0jH7fze1741007821308.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.O0pogg8d1741007821308.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.KZHIOG6J1741007821308.js";import"./index.WJt0talp1741007821308.js";import"./three-stdlib.7G-ooWjg1741007821308.js";import"./@pmndrs.pRt0V6Fh1741007821308.js";import"./object-hash.W8rvIzEM1741007821308.js";import"./@amap.1goFCJT_1741007821308.js";import"./jszip.tXNnSWcU1741007821308.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.WvNheUB51741007821308.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.SySKt1-U1741007821308.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.ffrKyDpX1741007821308.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.VuyKJkwz1741007821308.js";const M=R;!function(t,i){const s=R,e=j();for(;;)try{if(742700===-parseInt(s(536))/1+-parseInt(s(418))/2*(parseInt(s(384))/3)+parseInt(s(405))/4+parseInt(s(476))/5+parseInt(s(370))/6*(-parseInt(s(449))/7)+-parseInt(s(494))/8+parseInt(s(441))/9)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const A=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[R(417)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function R(t,i){const s=j();return(R=function(t,i){return s[t-=366]})(t,i)}!function(){A(this,(function(){const t=R,i=new RegExp(t(484)),s=new RegExp(t(436),"i"),e=F(t(523));i[t(393)](e+t(534))&&s[t(393)](e+"input")?F():e("0")}))()}();const C=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[R(417)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();C(void 0,(function(){const t=R,i=function(){const t=R;let i;try{i=Function(t(483)+t(533)+");")()}catch(s){i=window}return i}(),s=i[t(426)]=i.console||{},e=[t(454),t(501),t(504),"error",t(385),t(490),t(408)];for(let n=0;n<e[t(424)];n++){const i=C[t(487)].prototype[t(394)](C),r=e[n],o=s[r]||i;i[t(502)]=C[t(394)](C),i[t(505)]=o[t(505)][t(394)](o),s[r]=i}}))();class T extends i{constructor(t={}){const i=R;super(),this[i(406)]=!0,this[i(404)]=i(518),this.init(T[i(527)](t,t)),this[i(383)]()}static[M(465)](){const t=M,i=2053,s=[];for(let n=0;n<i;n++)s[t(381)](Math[t(515)]());const e={currentSeed:0,random:function(){const n=t,r=s[e[n(488)]];return e.currentSeed=(e[n(488)]+1)%i,r},getSeed:function(){return e[t(488)]/i},setSeed:function(s){const n=t;e[n(488)]=Math[n(425)](s*i)%i}};return e}static[M(527)](t={},i={}){const e=M,n=function(s){return i===t?s:s.clone()};return t[e(428)]=void 0!==i.sourceOffset?n(i[e(428)]):new s(0,100,0),t[e(473)]=void 0!==i.destOffset?n(i[e(473)]):new s(0,0,0),t[e(402)]=void 0!==i[e(402)]?i[e(402)]:1,t[e(455)]=void 0!==i[e(455)]?i.roughness:.9,t.straightness=void 0!==i[e(411)]?i[e(411)]:.7,t[e(464)]=void 0!==i.up0?n(i[e(464)]):new s(0,0,1),t[e(439)]=void 0!==i[e(439)]?n(i[e(439)]):new s(0,0,1),t.radius0=void 0!==i[e(448)]?i.radius0:1,t[e(373)]=void 0!==i.radius1?i[e(373)]:1,t[e(517)]=void 0!==i[e(517)]?i[e(517)]:.5,t.radius1Factor=void 0!==i[e(416)]?i[e(416)]:.2,t[e(529)]=void 0!==i.minRadius?i[e(529)]:.2,t[e(506)]=void 0!==i.isEternal?i.isEternal:void 0===i[e(372)]||void 0===i[e(472)],t[e(372)]=i.birthTime,t[e(472)]=i[e(472)],t[e(468)]=void 0!==i.propagationTimeFactor?i[e(468)]:.1,t[e(444)]=void 0!==i[e(444)]?i[e(444)]:.9,t[e(510)]=void 0!==i[e(510)]?i[e(510)]:4,t[e(456)]=void 0!==i.subrayDutyCycle?i[e(456)]:.6,t.maxIterations=void 0!==i[e(415)]?i[e(415)]:9,t[e(367)]=void 0!==i.isStatic&&i[e(367)],t[e(429)]=void 0!==i[e(429)]?i[e(429)]:5,t[e(470)]=void 0!==i[e(470)]?i[e(470)]:3,t[e(525)]=void 0!==i[e(525)]?i.recursionProbability:.6,t[e(401)]=void 0!==i.generateUVs&&i[e(401)],t[e(469)]=i[e(469)],t.noiseSeed=i.noiseSeed,t.onDecideSubrayCreation=i.onDecideSubrayCreation,t.onSubrayCreation=i.onSubrayCreation,t}[M(511)](t){const i=M;this[i(367)]||(this[i(482)][i(506)]||this[i(482)][i(372)]<=t&&t<=this[i(482)][i(472)]?(this.updateMesh(t),t<this[i(392)][0][i(423)]?this[i(387)]=T.RAY_PROPAGATING:t>this[i(392)][0][i(485)]?this[i(387)]=T.RAY_VANISHING:this.state=T.RAY_STEADY,this.visible=!0):(this[i(516)]=!1,t<this.rayParameters[i(372)]?this[i(387)]=T.RAY_UNBORN:this[i(387)]=T[i(397)]))}init(t){const i=M;this.rayParameters=t,this.maxIterations=void 0!==t.maxIterations?Math[i(425)](t.maxIterations):9,t[i(415)]=this[i(415)],this.isStatic=void 0!==t.isStatic&&t[i(367)],t[i(367)]=this[i(367)],this[i(429)]=void 0!==t[i(429)]?Math[i(425)](t[i(429)]):5,t[i(429)]=this[i(429)],this[i(470)]=void 0!==t[i(470)]?Math[i(425)](t.maxSubrayRecursion):3,t.maxSubrayRecursion=this.maxSubrayRecursion,this.recursionProbability=void 0!==t.recursionProbability?t.recursionProbability:.6,t[i(525)]=this[i(525)],this[i(401)]=void 0!==t[i(401)]&&t[i(401)],t[i(401)]=this[i(401)],void 0!==t[i(469)]?(this[i(469)]=t[i(469)],this.seedGenerator=t[i(469)],void 0!==t[i(410)]&&this.seedGenerator[i(519)](t.noiseSeed)):(this[i(469)]=T[i(465)](),this.seedGenerator=Math),void 0!==t[i(399)]?this[i(399)]=t[i(399)]:(this[i(522)](),void 0!==t[i(431)]&&(this[i(431)]=t.onSubrayCreation)),this[i(387)]=T[i(499)],this.maxSubrays=Math[i(526)](1+Math.pow(this[i(429)],Math.max(0,this[i(470)]-1))),t[i(535)]=this[i(535)],this[i(493)]=2*(1<<this[i(415)]),this[i(392)]=[];for(let s=0;s<this[i(535)];s++)this[i(392)][i(381)](this.createSubray());this[i(495)]=[];for(let s=0;s<this[i(493)];s++)this[i(495)].push(this[i(475)]());this[i(419)]=0,this[i(514)]=0,this.currentSegmentCallback=null,this[i(382)]=this[i(401)]?this[i(445)]:this[i(390)],this.numSubrays=0,this.currentSubray=null,this.currentSegmentIndex=0,this[i(398)]=!1,this[i(422)]=0,this[i(450)]=0,this[i(513)]=0,this[i(437)]=0,this[i(471)]=0,this.vertices=null,this[i(369)]=null,this[i(451)]=null,this[i(446)]=null,this[i(479)]=null,this[i(498)]=m(this[i(486)].random),this[i(427)]=m(this[i(486)][i(515)]),this[i(389)]=m(this[i(486)][i(515)]),this[i(528)]=new s,this[i(435)]=new s,this[i(467)]=new s,this[i(461)]=new s,this[i(409)]=new s,this[i(503)]=new s,this[i(474)]=new s,this[i(432)]=new s,this.cross1=new s}createMesh(){const t=M,i=1<<this.maxIterations,s=3*(i+1)*this[t(535)],o=18*i*this.maxSubrays;this[t(531)]=new Float32Array(3*s),this[t(451)]=new Uint32Array(o),this[t(401)]&&(this[t(369)]=new Float32Array(2*s)),this[t(509)](0),this.setIndex(new e(this[t(451)],1)),this[t(446)]=new n(this[t(531)],3),this.setAttribute(t(452),this.positionAttribute),this[t(401)]&&(this[t(479)]=new n(new Float32Array(this[t(369)]),2),this[t(458)]("uv",this[t(479)])),!this.isStatic&&(this[t(414)][t(430)]=r,this[t(446)][t(430)]=r,this[t(401)]&&(this.uvsAttribute[t(430)]=r)),this.vertices=this[t(446)][t(532)],this[t(451)]=this[t(414)][t(532)],this[t(401)]&&(this[t(369)]=this[t(479)][t(532)])}[M(395)](t){const i=M;this[i(509)](t),this.drawRange[i(463)]=this[i(513)],this[i(414)].needsUpdate=!0,this.positionAttribute[i(412)]=!0,this[i(401)]&&(this[i(479)].needsUpdate=!0)}[M(509)](t){const i=M,s=this;this[i(450)]=0,this[i(513)]=0,this[i(437)]=0,this.currentUVCoordinate=0,this.fractalRay(t,(function(e){const n=i,r=s[n(374)];t<r.birthTime||(this.rayParameters.isEternal&&0==s[n(374)][n(457)]?(s[n(388)](e),s[n(399)](e,s)):t<r[n(423)]?s.timeFraction>=e[n(420)]*r[n(468)]&&(s[n(388)](e),s.onDecideSubrayCreation(e,s)):t<r.beginVanishingTime?(s.createPrism(e),s.onDecideSubrayCreation(e,s)):(s[n(514)]<=r[n(444)]+e[n(380)]*(1-r[n(444)])&&s[n(388)](e),s.onDecideSubrayCreation(e,s)))}))}addNewSubray(){const t=M;return this[t(392)][this[t(368)]++]}[M(480)](t,i){const s=M;t.pos0[s(386)](i.sourceOffset),t[s(500)].copy(i[s(473)]),t.up0[s(386)](i.up0),t[s(439)][s(386)](i[s(439)]),t[s(448)]=i.radius0,t.radius1=i[s(373)],t[s(372)]=i[s(372)],t[s(472)]=i[s(472)],t[s(402)]=i[s(402)],t[s(455)]=i[s(455)],t.straightness=i.straightness,t[s(468)]=i[s(468)],t.vanishingTimeFactor=i[s(444)],t.maxIterations=this[s(415)],t.seed=void 0!==i[s(410)]?i[s(410)]:0,t[s(457)]=0}[M(434)](t,i){const s=M;this[s(419)]=t,this[s(438)]=i,this[s(368)]=0,this.initSubray(this[s(466)](),this[s(482)]);for(let e=0;e<this[s(368)];e++){const i=this[s(392)][e];this.currentSubray=i,this[s(469)][s(519)](i[s(453)]),i[s(423)]=o[s(508)](i[s(372)],i[s(472)],i[s(468)]),i[s(485)]=o[s(508)](i.deathTime,i[s(372)],1-i[s(444)]);const n=this[s(469)][s(515)];i[s(496)].set(n(),n(),n())[s(421)](1e3),i[s(440)][s(379)](n(),n(),n()).multiplyScalar(1e3),this[s(514)]=(t-i[s(372)])/(i[s(472)]-i[s(372)]),this.currentSegmentIndex=0,this[s(398)]=!0;const r=this.getNewSegment();r.iteration=0,r[s(512)][s(386)](i.pos0),r[s(500)].copy(i[s(500)]),r[s(496)][s(386)](i[s(496)]),r.linPos1[s(386)](i[s(440)]),r[s(464)][s(386)](i[s(464)]),r[s(439)].copy(i[s(439)]),r[s(448)]=i.radius0,r[s(373)]=i[s(373)],r.fraction0=0,r[s(380)]=1,r[s(400)]=1-i[s(411)],this.subrayProbability=this[s(429)]*Math[s(391)](this.recursionProbability,i[s(457)])/(1<<i[s(415)]),this[s(407)](r)}this[s(438)]=null,this[s(374)]=null}[M(407)](t){const i=M;if(t[i(507)]>=this[i(374)][i(415)])return void this[i(438)](t);this.forwards[i(377)](t[i(500)],t[i(512)]);let s=this[i(528)][i(424)]();s<1e-6&&(this.forwards[i(379)](0,0,.01),s=this[i(528)].length());const e=.5*(t[i(448)]+t.radius1),n=.5*(t.fraction0+t.fraction1),r=this[i(419)]*this[i(374)][i(402)]*Math[i(391)](2,t[i(507)]);this[i(409)].lerpVectors(t[i(512)],t[i(500)],.5),this.middleLinPos.lerpVectors(t[i(496)],t.linPos1,.5);const o=this[i(503)];this.newPos[i(379)](this.simplexX(o.x,o.y,o.z,r),this[i(427)](o.x,o.y,o.z,r),this[i(389)](o.x,o.y,o.z,r)),this[i(474)][i(421)](t[i(400)]*s),this[i(474)][i(477)](this.middlePos);const a=this[i(378)]();a.pos0[i(386)](t[i(512)]),a.pos1[i(386)](this[i(474)]),a[i(496)][i(386)](t[i(496)]),a[i(440)][i(386)](this.middleLinPos),a[i(464)][i(386)](t[i(464)]),a[i(439)][i(386)](t[i(439)]),a[i(448)]=t[i(448)],a[i(373)]=e,a[i(420)]=t[i(420)],a[i(380)]=n,a[i(400)]=t[i(400)]*this[i(374)][i(455)],a[i(507)]=t.iteration+1;const h=this[i(378)]();h.pos0.copy(this[i(474)]),h.pos1.copy(t[i(500)]),h[i(496)][i(386)](this[i(503)]),h[i(440)][i(386)](t.linPos1),this[i(524)][i(530)](t[i(464)],this[i(528)].normalize()),h[i(464)][i(530)](this[i(528)],this.cross1).normalize(),h[i(439)][i(386)](t[i(439)]),h[i(448)]=e,h[i(373)]=t[i(373)],h[i(420)]=n,h[i(380)]=t[i(380)],h[i(400)]=t[i(400)]*this[i(374)][i(455)],h[i(507)]=t[i(507)]+1,this[i(407)](a),this.fractalRayRecursive(h)}[M(388)](t){const i=M;this[i(435)][i(377)](t[i(500)],t.pos0).normalize(),this[i(398)]&&(this[i(382)](t[i(512)],t[i(464)],this[i(435)],t[i(448)],0),this[i(398)]=!1),this[i(382)](t[i(500)],t[i(464)],this[i(435)],t[i(373)],t.fraction1),this[i(447)]()}[M(390)](t,i,s,e){const n=M;this[n(467)][n(530)](i,s)[n(421)](e*T[n(491)]),this.down[n(386)](i)[n(421)](-e*T.SIN30DEG);const r=this[n(432)],o=this[n(531)];r[n(386)](t)[n(442)](this[n(467)])[n(477)](this[n(461)]),o[this[n(437)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[n(437)]++]=r.z,r[n(386)](t)[n(477)](this[n(467)])[n(477)](this[n(461)]),o[this[n(437)]++]=r.x,o[this[n(437)]++]=r.y,o[this[n(437)]++]=r.z,r[n(386)](i).multiplyScalar(e)[n(477)](t),o[this.currentCoordinate++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,this.currentVertex+=3}[M(445)](t,i,s,e,n){const r=M;this.side[r(530)](i,s)[r(421)](e*T[r(491)]),this[r(461)][r(386)](i)[r(421)](-e*T[r(489)]);const o=this[r(432)],a=this[r(531)],h=this[r(369)];o[r(386)](t)[r(442)](this.side).add(this[r(461)]),a[this.currentCoordinate++]=o.x,a[this[r(437)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(471)]++]=n,h[this[r(471)]++]=0,o[r(386)](t)[r(477)](this[r(467)])[r(477)](this[r(461)]),a[this.currentCoordinate++]=o.x,a[this[r(437)]++]=o.y,a[this[r(437)]++]=o.z,h[this.currentUVCoordinate++]=n,h[this[r(471)]++]=.5,o[r(386)](i).multiplyScalar(e).add(t),a[this[r(437)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(437)]++]=o.z,h[this[r(471)]++]=n,h[this[r(471)]++]=1,this.currentVertex+=3}[M(447)](t){const i=M,s=this.indices;t=this.currentVertex-6,s[this[i(513)]++]=t+1,s[this.currentIndex++]=t+2,s[this[i(513)]++]=t+5,s[this[i(513)]++]=t+1,s[this[i(513)]++]=t+5,s[this.currentIndex++]=t+4,s[this[i(513)]++]=t+0,s[this.currentIndex++]=t+1,s[this[i(513)]++]=t+4,s[this[i(513)]++]=t+0,s[this[i(513)]++]=t+4,s[this[i(513)]++]=t+3,s[this[i(513)]++]=t+2,s[this[i(513)]++]=t+0,s[this[i(513)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(513)]++]=t+3,s[this[i(513)]++]=t+5}[M(522)](){const t=M,i=this.randomGenerator.random;this.onDecideSubrayCreation=function(t,s){const e=R,n=s[e(374)],r=s.rayParameters.subrayPeriod,a=s[e(482)][e(456)],h=s.rayParameters[e(506)]&&0==n[e(457)]?-i()*r:o.lerp(n[e(372)],n[e(423)],t.fraction0)-i()*r,c=s.time-h,u=Math[e(425)](c/r),l=i()*(u+1);let d=0;if(c%r<=a*r&&(d=s[e(422)]),n[e(457)]<s[e(470)]&&s[e(368)]<s[e(535)]&&i()<d){const o=s[e(466)](),c=s[e(469)][e(371)]();o[e(453)]=l,s[e(469)].setSeed(l),o[e(457)]=n[e(457)]+1,o[e(415)]=Math[e(375)](1,n[e(415)]-1),o[e(496)].set(i(),i(),i())[e(421)](1e3),o[e(440)][e(379)](i(),i(),i())[e(421)](1e3),o[e(464)].copy(n[e(464)]),o[e(439)][e(386)](n.up1),o[e(448)]=t[e(448)]*s.rayParameters[e(517)],o[e(373)]=Math[e(481)](s[e(482)].minRadius,t[e(373)]*s[e(482)][e(416)]),o[e(372)]=h+u*r,o.deathTime=o[e(372)]+r*a,!s[e(482)][e(506)]&&0==n[e(457)]&&(o[e(372)]=Math[e(375)](o[e(372)],n.birthTime),o.deathTime=Math.min(o[e(472)],n[e(472)])),o[e(402)]=2*n[e(402)],o[e(455)]=n[e(455)],o[e(411)]=n.straightness,o.propagationTimeFactor=n[e(468)],o.vanishingTimeFactor=n.vanishingTimeFactor,s.onSubrayCreation(t,n,o,s),s[e(469)].setSeed(c)}};const e=new s,n=new s,r=new s,a=new s;this.onSubrayCreation=function(t,i,s,e){e[R(497)](t,i,s,.5,.6,.2)},this[t(413)]=function(s,o,h,c,u,l){const d=t;h[d(512)][d(386)](s[d(512)]),e[d(377)](o[d(500)],o[d(512)]),n.copy(e).normalize(),e[d(421)](s[d(420)]+(1-s[d(420)])*(i()*c));const p=e[d(424)]();r.crossVectors(o[d(464)],n);const m=2*Math.PI*i();r[d(421)](Math[d(520)](m)),a[d(386)](o.up0)[d(421)](Math[d(460)](m)),h[d(500)].copy(r)[d(477)](a).multiplyScalar(p*u*(l+i()*(1-l)))[d(477)](e)[d(477)](o[d(512)])},this[t(497)]=function(s,o,h,c,u,l){const d=t;h[d(512)][d(386)](s.pos0),e[d(377)](o.pos1,o[d(512)]),n[d(386)](e)[d(462)](),e[d(421)](s[d(420)]+(1-s[d(420)])*((2*i()-1)*c));const p=e[d(424)]();r[d(530)](o[d(464)],n);const m=2*Math.PI*i();r.multiplyScalar(Math[d(520)](m)),a[d(386)](o[d(464)])[d(421)](Math[d(460)](m)),h[d(500)][d(386)](r).add(a)[d(421)](p*u*(l+i()*(1-l)))[d(477)](e)[d(477)](o[d(512)])}}[M(403)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=M;return this.raySegments[this[t(396)]++]}copy(t){const i=M;return super[i(386)](t),this[i(523)](T.copyParameters({},t[i(482)])),this}clone(){const t=M;return new(this[t(487)])(T[t(527)]({},this[t(482)]))}}function j(){const t=["usage","onSubrayCreation","vPos","RAY_STEADY","fractalRay","forwardsFill","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","currentCoordinate","currentSegmentCallback","up1","linPos1","41379678XOFFdX","sub","stateObject","vanishingTimeFactor","createTriangleVerticesWithUVs","positionAttribute","createPrismFaces","radius0","17192izCShZ","currentVertex","indices","position","seed","log","roughness","subrayDutyCycle","recursion","setAttribute","counter","sin","down","normalize","count","up0","createRandomGenerator","addNewSubray","side","propagationTimeFactor","randomGenerator","maxSubrayRecursion","currentUVCoordinate","deathTime","destOffset","newPos","createSegment","6660980FSKjXn","add","RAY_UNBORN","uvsAttribute","initSubray","min","rayParameters","return (function() ","function *\\( *\\)","beginVanishingTime","seedGenerator","constructor","currentSeed","SIN30DEG","table","COS30DEG","while (true) {}","maxRaySegments","11186864XGTvnl","raySegments","linPos0","subrayCylinderPosition","simplexX","RAY_INITIALIZED","pos1","warn","__proto__","middleLinPos","info","toString","isEternal","iteration","lerp","fillMesh","subrayPeriod","update","pos0","currentIndex","timeFraction","random","visible","radius0Factor","LightningStrike","setSeed","cos","call","createDefaultSubrayCreationCallbacks","init","cross1","recursionProbability","ceil","copyParameters","forwards","minRadius","crossVectors","vertices","array",'{}.constructor("return this")( )',"chain","maxSubrays","1463769oFleZZ","RAY_PROPAGATING","isStatic","numSubrays","uvs","2514zinJmm","getSeed","birthTime","radius1","currentSubray","max","RAY_VANISHING","subVectors","getNewSegment","set","fraction1","push","currentCreateTriangleVertices","createMesh","14916JYoycN","exception","copy","state","createPrism","simplexZ","createTriangleVerticesWithoutUVs","pow","subrays","test","bind","updateMesh","currentSegmentIndex","RAY_EXTINGUISHED","isInitialSegment","onDecideSubrayCreation","positionVariationFactor","generateUVs","timeScale","createSubray","type","523668ZkqRxL","isLightningStrike","fractalRayRecursive","trace","middlePos","noiseSeed","straightness","needsUpdate","subrayConePosition","index","maxIterations","radius1Factor","apply","574QoQOoA","time","fraction0","multiplyScalar","subrayProbability","endPropagationTime","length","floor","console","simplexY","sourceOffset","ramification"];return(j=function(){return t})()}function F(t){function i(t){const s=R;if("string"==typeof t)return function(t){}[s(487)](s(492))[s(417)](s(459));1!==(""+t/t).length||t%20==0?function(){return!0}[s(487)]("debugger")[s(521)]("action"):function(){return!1}.constructor("debugger")[s(417)](s(443)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function D(t,i){const s=H();return(D=function(t,i){return s[t-=317]})(t,i)}T[M(499)]=0,T[M(478)]=1,T[M(366)]=2,T[M(433)]=3,T[M(376)]=4,T.RAY_EXTINGUISHED=5,T[M(491)]=Math[M(520)](30*Math.PI/180),T[M(489)]=Math[M(460)](30*Math.PI/180);const z=D;function H(){const t=["maxLightnings","constructor","push","257480TKZssD","destOffset","nextLightningTime","call","geometry","exception","birthTime","function *\\( *\\)","counter","__proto__","copy","7QXfION","isEternal","14817Cmtlbi","random","splice","8724aUsqjm","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","RAY_EXTINGUISHED","string","input","multiplyScalar","RAY_PROPAGATING","stormParams","size","gger","remove","toString","lerp","apply","1064sYnCYR","pop","lightningMinDuration","test","noiseSeed","inited","onRayPosition","1yHXfLq","init","9qhMiQi","lightningMinPeriod","length","clone","error","maxHeight","bind","chain","lightningMaxDuration","update","lightningsMeshes","lightningParameters","state","add","info","onLightningDown","getNextLightningTime","1510oxipUD","2117604YTSLzA","while (true) {}","minHeight","warn","action","log","3366470nKwazb","597282qUaLSa","deadLightningsMeshes","copyParameters","debu","trace","lightningMaxPeriod","lightningMaterial","console","653762xUnTKJ","rayParameters","maxSlope","set"];return(H=function(){return t})()}!function(t,i){const s=D,e=H();for(;;)try{if(188140===parseInt(s(351))/1*(parseInt(s(386))/2)+parseInt(s(378))/3+-parseInt(s(344))/4*(parseInt(s(370))/5)+-parseInt(s(371))/6*(-parseInt(s(325))/7)+parseInt(s(393))/8+-parseInt(s(353))/9*(-parseInt(s(377))/10)+parseInt(s(327))/11*(-parseInt(s(330))/12))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const V=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[D(343)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){V(this,(function(){const t=D,i=new RegExp(t(321)),s=new RegExp(t(331),"i"),e=L(t(352));i.test(e+t(360))&&s[t(347)](e+t(334))?L():e("0")}))()}();const N=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[D(343)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();N(void 0,(function(){const t=D;let i;try{i=Function('return (function() {}.constructor("return this")( ));')()}catch(n){i=window}const s=i[t(385)]=i[t(385)]||{},e=[t(376),t(374),t(367),t(357),t(319),"table",t(382)];for(let r=0;r<e.length;r++){const i=N[t(391)].prototype.bind(N),n=e[r],o=s[n]||i;i[t(323)]=N[t(359)](N),i[t(341)]=o[t(341)].bind(o),s[n]=i}}))();class G extends a{constructor(t={}){const i=D;super(),this.isLightningStorm=!0,this[i(337)]=t,t[i(338)]=void 0!==t[i(338)]?t.size:1e3,t[i(373)]=void 0!==t[i(373)]?t[i(373)]:80,t[i(358)]=void 0!==t.maxHeight?t.maxHeight:100,t[i(388)]=void 0!==t[i(388)]?t[i(388)]:1.1,t[i(390)]=void 0!==t[i(390)]?t[i(390)]:3,t[i(354)]=void 0!==t[i(354)]?t[i(354)]:3,t[i(383)]=void 0!==t.lightningMaxPeriod?t[i(383)]:7,t[i(346)]=void 0!==t[i(346)]?t[i(346)]:1,t[i(361)]=void 0!==t[i(361)]?t[i(361)]:2.5,this[i(364)]=T[i(380)](t[i(364)],t[i(364)]),this[i(364)][i(326)]=!1,this[i(384)]=void 0!==t[i(384)]?t[i(384)]:new h({color:11599871}),void 0!==t[i(350)]?this[i(350)]=t[i(350)]:this[i(350)]=function(s,e){const n=i;e.set((Math[n(328)]()-.5)*t[n(338)],0,(Math[n(328)]()-.5)*t[n(338)]);const r=o[n(342)](t.minHeight,t[n(358)],Math[n(328)]());s[n(389)](t[n(388)]*(2*Math.random()-1),1,t[n(388)]*(2*Math[n(328)]()-1))[n(335)](r).add(e)},this[i(368)]=t.onLightningDown,this[i(349)]=!1,this[i(395)]=0,this[i(363)]=[],this[i(379)]=[];for(let s=0;s<this.stormParams[i(390)];s++){const t=new T(T.copyParameters({},this[i(364)])),s=new c(t,this.lightningMaterial);this[i(379)].push(s)}}[z(362)](t){const i=z;if(!this[i(349)]&&(this[i(395)]=this[i(369)](t)*Math[i(328)](),this[i(349)]=!0),t>=this[i(395)]){const s=this[i(379)][i(345)]();if(s){const e=T[i(380)](s.geometry[i(387)],this[i(364)]);e[i(320)]=t,e.deathTime=t+o[i(342)](this[i(337)][i(346)],this[i(337)][i(361)],Math[i(328)]()),this[i(350)](e.sourceOffset,e[i(394)]),e[i(348)]=Math[i(328)](),this[i(366)](s),this[i(363)][i(392)](s)}this[i(395)]=this[i(369)](t)}let s=0,e=this[i(363)].length;for(;s<e;){const n=this[i(363)][s],r=n[i(318)],o=r.state;r[i(362)](t),o===T[i(336)]&&r.state>o&&this[i(368)]&&this.onLightningDown(r),r[i(365)]===T[i(332)]?(this[i(363)][i(329)](this[i(363)].indexOf(n),1),this[i(379)].push(n),this[i(340)](n),e--):s++}}[z(369)](t){const i=z;return t+o.lerp(this[i(337)][i(354)],this[i(337)].lightningMaxPeriod,Math.random())/(this[i(337)].maxLightnings+1)}[z(324)](t,i){const s=z;return super[s(324)](t,i),this[s(337)][s(338)]=t[s(337)][s(338)],this.stormParams.minHeight=t[s(337)][s(373)],this[s(337)][s(358)]=t[s(337)][s(358)],this[s(337)][s(388)]=t[s(337)][s(388)],this[s(337)][s(390)]=t[s(337)].maxLightnings,this[s(337)][s(354)]=t[s(337)][s(354)],this[s(337)][s(383)]=t.stormParams[s(383)],this.stormParams[s(346)]=t.stormParams[s(346)],this[s(337)][s(361)]=t.stormParams[s(361)],this[s(364)]=T[s(380)]({},t[s(364)]),this[s(384)]=t[s(337)][s(384)],this.onLightningDown=t[s(368)],this}[z(356)](){return new this.constructor(this.stormParams).copy(this)}}function L(t){function i(t){const s=D;if(typeof t===s(333))return function(t){}.constructor(s(372))[s(343)](s(322));1!==(""+t/t)[s(355)]||t%20==0?function(){return!0}.constructor(s(381)+"gger")[s(317)](s(375)):function(){return!1}[s(391)](s(381)+s(339)).apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const O=Z;function E(){const t=["maxLightnings","toString","4231134lwvYAj","color","1544wxuOei","5785260rmpaoy","input","lightStorm","radius1","addVectors","call","MeshBasicMaterial","constructor","info","chain","dot","sub","straightness","gger","maxHeight","add","trace","while (true) {}","6777603GLcFXW","5ChhupA","sourceOffset","Color","radius0","primitive","apply","Vector3","object","multiplyScalar","#b0ffff","1gsJbJP","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","warn","error","function *\\( *\\)","rayParameters","counter","102vTvAdk","exception","subrayDutyCycle","subVectors","stormParams","console","pos1","length","prototype","debu","subrayConePosition","minHeight","79916sANFwG","roughness","log","22491MZpDbA","302650wteeMI","timeScale","test","copy","size","return (function() ","80GOatec","set","128227vSGPbv"];return(E=function(){return t})()}!function(t,i){const s=Z,e=E();for(;;)try{if(433119===parseInt(s(339))/1*(parseInt(s(363))/2)+parseInt(s(347))/3*(-parseInt(s(359))/4)+parseInt(s(396))/5*(parseInt(s(374))/6)+parseInt(s(362))/7*(parseInt(s(376))/8)+-parseInt(s(395))/9+-parseInt(s(369))/10*(parseInt(s(371))/11)+parseInt(s(377))/12)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const Y=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){Y(this,(function(){const t=Z,i=new RegExp(t(344)),s=new RegExp(t(340),"i"),e=$("init");i[t(365)](e+t(386))&&s[t(365)](e+t(378))?$():e("0")}))()}();const U=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[Z(401)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function Z(t,i){const s=E();return(Z=function(t,i){return s[t-=337]})(t,i)}U(void 0,(function(){const t=Z,i=function(){const t=Z;let i;try{i=Function(t(368)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(352)]=i.console||{},e=[t(361),t(342),t(385),t(343),t(348),"table",t(393)];for(let n=0;n<e.length;n++){const i=U[t(384)][t(355)][t(341)](U),r=e[n],o=s[r]||i;i.__proto__=U.bind(U),i[t(373)]=o.toString[t(341)](o),s[r]=i}}))();const k=[O(403)],X=f({__name:O(379),props:{color:{default:O(338)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,e=t,n=new(u[i(398)])(e.color),r=new(u[i(383)])({color:n}),o=new s(0,-1,0);let a=0;const h=new(u[i(402)]),c=new s,d={roughness:e.roughness,straightness:e[i(389)],radius0:e[i(399)],radius1:e[i(380)],timeScale:e[i(364)],subrayPeriod:e.subrayPeriod,subrayDutyCycle:e[i(349)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,e,n){const r=i;n[r(357)](t,s,e,.6,.6,.5),a=n[r(345)][r(397)].y,h[r(350)](e[r(353)],n.rayParameters[r(397)]);const u=o[r(387)](h);c[r(366)](o)[r(337)](u),h[r(388)](c);const l=u/a>.5?a/u:1;c[r(337)](l),h[r(392)](c),e[r(353)][r(381)](h,n[r(345)][r(397)])}},p=new G({size:e[i(367)],minHeight:e[i(358)],maxHeight:e.maxHeight,maxSlope:.6,maxLightnings:e[i(372)],lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=p[t(351)];s[t(367)]=e.size,s[t(358)]=e[t(358)],s[t(391)]=e.maxHeight,r[t(375)][t(370)](e.color),d[t(360)]=e.roughness,d[t(389)]=e[t(389)],d[t(399)]=e[t(399)],d[t(380)]=e[t(380)],d[t(364)]=e[t(364)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{p.update(t)})),(t,s)=>{const e=i;return y(),b(e(400),{object:S(p),renderOrder:9999},null,8,k)}}});function $(t){function i(t){const s=Z;if("string"==typeof t)return function(t){}[s(384)](s(394))[s(401)](s(346));1!==(""+t/t)[s(354)]||t%20==0?function(){return!0}[s(384)](s(356)+s(390))[s(382)]("action"):function(){return!1}[s(384)]("debu"+s(390))[s(401)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}function J(){const t=["action","#92399e","27138xQMdyH",'{}.constructor("return this")( )',"constructor","roughness","1169410NRMnvw","trace","minHeight","gger","debu","call","value","apply","时间缩放","console","12iAJJiN","info","radius0","exception","stateObject","return (function() ","119yoOHFw","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","__proto__","271608aNRIcY","string","toString","straightness","5311920DQwNUK","maxHeight","239853KMWjsP","端部半径","function *\\( *\\)","36VOArgG","input","radius1","test","61084Yqkwgd","log","counter","未部半径","warn","color","init","64210jRgeeL"];return(J=function(){return t})()}!function(t,i){const s=q,e=J();for(;;)try{if(145147===parseInt(s(486))/1+parseInt(s(500))/2*(parseInt(s(470))/3)+parseInt(s(493))/4+parseInt(s(507))/5+parseInt(s(503))/6*(-parseInt(s(476))/7)+-parseInt(s(480))/8*(-parseInt(s(489))/9)+-parseInt(s(484))/10)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const K=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[q(467)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){K(this,(function(){const t=q,i=new RegExp(t(488)),s=new RegExp(t(477),"i"),e=W(t(499));i[t(492)](e+"chain")&&s[t(492)](e+t(490))?W():e("0")}))()}();const Q=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[q(467)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function q(t,i){const s=J();return(q=function(t,i){return s[t-=467]})(t,i)}Q(void 0,(function(){const t=q,i=function(){const t=q;let i;try{i=Function(t(475)+t(504)+");")()}catch(s){i=window}return i}(),s=i[t(469)]=i[t(469)]||{},e=[t(494),t(497),t(471),"error",t(473),"table",t(508)];for(let n=0;n<e.length;n++){const i=Q.constructor.prototype[t(478)](Q),r=e[n],o=s[r]||i;i[t(479)]=Q[t(478)](Q),i[t(482)]=o.toString[t(478)](o),s[r]=i}}))();const B=f({__name:"lightningStorm",setup(i){const s=q,e=v({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:s(502),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:n,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:s(487),value:1,min:.1,max:10,step:.01},radius1:{label:s(496),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(468),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const m=s;return y(),b(I,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:x((()=>[w(X,{minHeight:S(n)[m(513)],maxHeight:S(r)[m(513)],color:S(o)[m(513)],roughness:S(a)[m(513)],straightness:S(h).value,radius0:S(c)[m(513)],radius1:S(u)[m(513)],timeScale:S(l)[m(513)]},null,8,[m(509),m(485),m(498),m(506),m(483),m(472),m(491),"timeScale"]),w(S(P),_({args:[100,100]},e,{position:[0,-50,0]}),null,16)])),_:1}),w(S(p))],64)}}});function W(t){function i(t){const s=q;if(typeof t===s(481))return function(t){}[s(505)]("while (true) {}")[s(467)](s(495));1!==(""+t/t).length||t%20==0?function(){return!0}[s(505)](s(511)+s(510))[s(512)](s(501)):function(){return!1}[s(505)](s(511)+s(510))[s(467)](s(474)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{B as default};

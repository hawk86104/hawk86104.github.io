import{i as e}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{N as t,F as n,K as o}from"./@tresjs.B1f7s3pS1767066396612.js";import{am as a,an as s}from"./three.BD1hRFgo1767066396612.js";const{defineComponent:l}=await e("vue"),{unref:i,openBlock:r,createElementBlock:c,createCommentVNode:u}=await e("vue"),m=["object"],{onMounted:d,watchEffect:f}=await e("vue"),v=await e("three"),p=l({__name:"frameSelect",setup(e){const{state:o}=t("https://opensource.cdn.icegl.cn/model/operationTool/湖中小亭/湖中小亭.gltf"),{camera:l,renderer:p,scene:h,sizes:w,controls:g}=n(),C=new a(l.value,h.value),P=new s(p,"selectBox");let b=function(e){console.log(g.value);for(const t of C.collection)t instanceof v.Mesh&&t.material.emissive.set(0);C.collection.length=0,C.startPoint.set(e.clientX/w.width.value*2-1,-e.clientY/w.height.value*2+1,.5)},j=function(e){if(P.isDown){C.endPoint.set(e.clientX/w.width.value*2-1,-e.clientY/w.height.value*2+1,.5);const t=C.select();console.log("allSelected",t);for(let e=0;e<t.length;e++){const n=t[e];n instanceof v.Mesh&&n.material.emissive.set(16252928)}}},k=function(e){const t=C.select();C.endPoint.set(e.clientX/w.width.value*2-1,-e.clientY/w.height.value*2+1,.5);for(let n=0;n<t.length;n++){const e=t[n];e instanceof v.Mesh&&e.material.emissive.set(0)}};return d(()=>{document.addEventListener("mousedown",b,!1),document.addEventListener("mousemove",j,!1),document.addEventListener("mouseup",k,!1)}),f(()=>{}),(e,t)=>i(o)?(r(),c("primitive",{key:0,object:i(o)?.scene},null,8,m)):u("",!0)}}),{defineComponent:h}=await e("vue"),{createElementVNode:w,unref:g,normalizeProps:C,guardReactiveProps:P,createVNode:b,Suspense:j,withCtx:k,openBlock:E,createBlock:_,resolveComponent:B,mergeProps:L}=await e("vue"),{reactive:M}=await e("vue"),N=h({__name:"frameSelect",setup(e){const t=M({alpha:!0,antialias:!0}),n=M({enableDamping:!1,enableZoom:!1,autoRotate:!1,enablePan:!1,enableRotate:!1,makeDefault:!0});return(e,a)=>{const s=B("TresCanvas");return E(),_(s,L({clearColor:"#201919","window-size":""},t),{default:k(()=>[a[0]||(a[0]=w("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,10,-28]},null,-1)),a[1]||(a[1]=w("TresAmbientLight",{intensity:1},null,-1)),b(g(o),C(P(n)),null,16),(E(),_(j,null,{default:k(()=>[b(p)]),_:1}))]),_:1},16)}}});export{N as default};

import{_ as t,bV as e,at as i,C as n,V as r,k as s,B as o}from"./three.CQvcOG671729762363846.js";const a=c;!function(t,e){const i=c,n=f();for(;;)try{if(513312===parseInt(i(363))/1+-parseInt(i(193))/2*(parseInt(i(278))/3)+parseInt(i(466))/4*(parseInt(i(352))/5)+-parseInt(i(651))/6*(parseInt(i(381))/7)+-parseInt(i(410))/8*(-parseInt(i(596))/9)+-parseInt(i(358))/10+parseInt(i(415))/11)break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function c(t,e){const i=f();return(c=function(t,e){return i[t-=190]})(t,e)}!function(){h(this,(function(){const t=c,e=new RegExp(t(444)),i=new RegExp(t(643),"i"),n=d(t(274));e[t(561)](n+t(306))&&i.test(n+t(522))?d():n("0")}))()}();const u=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[c(510)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();u(void 0,(function(){const t=c;let e;try{e=Function(t(233)+t(191)+");")()}catch(r){e=window}const i=e[t(195)]=e[t(195)]||{},n=["log","warn",t(608),"error","exception",t(457),t(403)];for(let s=0;s<n.length;s++){const e=u[t(222)][t(354)].bind(u),r=n[s],o=i[r]||e;e[t(405)]=u[t(198)](u),e[t(609)]=o[t(609)][t(198)](o),i[r]=e}}))();const l={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function f(){const t=["StaticDrawUsage","_updateBuffers","setMat4","randomDirectionVector3OnDisc","`emitter` argument must be instance of SPE.Emitter. Was provided with:","counter","419080yorGjF","componentSize","_attributesNeedDynamicReset","SPHERE","angle","NUMBER","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","    return 1.0 - abs( sign( x - y ) );","_triggerSingleEmitter","transparent","sin","float getMaxAge() {","    vec3 force = vec3( 0.0 );","length","randomise","gger","setVec2Components","      vec3 axis = unpackRotationAxis( rotation.x );","exports","REVISION","dispose","        float columnNorm = column / framesX;","typedArray","_poolCreationSettings","   return acceleration.xyz * age;","   return c;","           unpackColor( color.z ),","object","       float x = gl_PointCoord.x - 0.5;","resetFlags","getValueAtIndex","BOOLEAN","axisSpread","types","SHOULD_CALCULATE_SPRITE","#define PACKED_COLOR_SIZE 256.0","getPackedRotationAxis","offset","uniform float deltaTime;","log","       );","direction","debu","hasOwnProperty","apply","    #ifdef SHOULD_WIGGLE_PARTICLES","_applyAttributesToGeometry","isArray","       fIndex = float( i );","material","activeParticleCount","    float fIndex = 0.0;","setVec4","needsUpdate","random","replace","input","splice","group","   return params.z;","spe","triggerPoolEmitter","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","ensureValueOverLifetimeCompliance","generateUUID","_assignPositionValue","    float shouldApplyValue = 0.0;","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","ShaderMaterial","updateMax","       vec3 c = isAlive * getColorOverLifetime(","getComponentValueAtIndex","defines","rotateTexture","    #else","fog","amd","#define PACKED_COLOR_DIVISOR 255.0","addEmitter","wiggle","clamp","push","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","       float y = 1.0 - gl_PointCoord.y - 0.5;","ShaderChunk","    return value;","utils","getFromPool","SHOULD_ROTATE_TEXTURE","uniform float scale;","       axis = normalize(axis);","acceleration","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","SHOULD_ROTATE_PARTICLES","roundToNearestMultiple","test","depthWrite","        float loopCount = textureAnimation.w;","       float c = cos(angle);","_updateDefines","Color","_value","isStatic","BOX","join","TypedArrayConstructor","    highp float value = 0.0;","elements","_incrementParticleCount","number","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","Vector2","float when_gt(float x, float y) {","spread","removeEmitter","radius","array","function","setSize","updateMap","_axis","updateCounts","varyings","setVec3","_rotationCenter","getPool","emitters","_static","_assignParamsValue","randomFloat","18JjcpmP","        float column = floor(mod( frameNumber, framesX ));","angleSpread","_radius","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","loop","    varying vec4 vSpriteSheet;","SHOULD_WIGGLE_PARTICLES","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","fixedTimeStep","_spread","valueOverLifetimeLength","info","toString","activationEnd","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","_assignAngleValue","maxAge","common","setFromArray","shaders","vec3 unpackRotationAxis( in float hex ) {","scale","    #ifdef SHOULD_ROTATE_TEXTURE","           return pos;","branchAvoidanceFunctions","BufferAttribute","enable","color","type","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","round","error","reset","    return a * b;","uniform sampler2D tex;","    force += vel;","fog_fragment","_randomise","  return 1.0 - when_lt(x, y);","deltaTime","_updateUniforms","Vector3","       float c = cos( -vAngle );","getHex","attribute vec4 angle;","vec4 getPosition( in float age ) {","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","        pos.x += wiggleSin;","_attributesNeedRefresh","#ifdef SHOULD_CALCULATE_SPRITE","updateFlags","activationIndex","textureLoop","getLength","2460054TMPsvv","dynamicBuffer","        pos.y += wiggleCos;","    highp float alive = getAlive();",'{}.constructor("return this")( )',"        vUv.x = gl_PointCoord.x * framesX + columnNorm;","186nIGcrl","    #ifdef HAS_PERSPECTIVE","console","TypedArray is already of size:","typeSizeMap","bind","ensureTypedArg","max","usage","geometry","fragment","float when_lt(float x, float y) {","releaseIntoPool","vec3 getVelocity( in float age ) {","distributionClamp","Argument is not instanceof SPE.Emitter:","        float rowNorm = vSpriteSheet.w;","_checkParticleAges","    #ifdef SHOULD_CALCULATE_SPRITE","alphaTest","logdepthbuf_fragment","remove","radiusScale","attributeCount","normalize","uniform vec4 textureAnimation;","attributeOffset","       float oc = 1.0 - c;","        float perspective = 1.0;","constructor","Points","      if( rotation.y == 0.0 ) {","    return min(a + b, 1.0);","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","           positionInTime,","void main() {","_decrementParticleCount","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","_distributionClamp","return (function() ","paramsArray","_spreadClamp","   c.b = b / PACKED_COLOR_DIVISOR;","_setAttributeOffset","age","_assignForceValue","_assignAbsLifetimeValue","shaderChunks","_createGetterSetters","   return modelViewMatrix * vec4( position, 1.0 );","pop","attribute vec3 velocity;","min","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","setColor","duration","tick","uniform float runTime;","uniforms","    #ifdef ALPHATEST","rotationFunctions","                   0.0,                                0.0,                                0.0,                                1.0);","ceil","Group","distributions","      rotationMatrix = getRotationMatrix( axis, angle );","TypedArrayHelper","   float b = mod( hex, PACKED_COLOR_SIZE );","bufferUpdateRanges","   }","lerpTypeAgnostic","Vector4","           unpackColor( color.x ),","           unpackColor( color.w )","velocity","    vec3 accel = getAcceleration( age );","drag","      mat4 rotationMatrix;","   vec3 c = vec3( 0.0 );","abs","init","POSITIVE_INFINITY","multiplyScalar","Will not resize.","19164ljWDQv","    vec3 value = vec3( 0.0 );","ensureArrayInstanceOf","      }","        float framesX = vSpriteSheet.x;","cos","randomVector3OnSphere","lerp","        float wiggleCos = isAlive * cos( wiggleAmount );","    highp float maxAge = getMaxAge();","runTime","distribution","       if ( vColor.w < float(ALPHATEST) ) discard;","floor","add","params","DynamicDrawUsage","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","_setBufferUpdateRanges","frameCount","           unpackColor( color.y ),","updateMin","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","value","_resetParticle","logdepthbuf_pars_vertex","position","bufferAttribute","chain","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","MathUtils","attributes","unpackRotationAxis","shrink","_calculatePPSValue","vertex","hasPerspective","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","unshift","resetUpdateRange","    vColor = vec4( c, o );","particlesPerSecond","    vec3 pos = vec3( position );","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","emitterIDs","#ifdef SHOULD_ROTATE_PARTICLES","DISC","stateObject","undefined","_distribution","grow","attribute vec4 params;","   return params.y;","_pool","setVec2","subarray","interpolateArray","indexOffset","while (true) {}","_createNewWhenPoolEmpty","colorize","depthTest","keys","string","        float perspective = scale / length( mvPosition.xyz );","bufferUpdateKeys","maxParticleCount","float when_ge(float x, float y) {","    return max(sign(x - y), 0.0);","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","        vSpriteSheet.x = 1.0 / framesX;","forceUpdateAll","AdditiveBlending","   return params.x;","15WVJNCk","    force += accel * age;","prototype","    ","updateRange","    #endif","6346660hEOxaz","float getAge() {","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","textureFrameCount","   c.g = g / PACKED_COLOR_DIVISOR;","524439FaGAXz","_assignRotationValue","        float framesY = textureAnimation.y;","randomVector3OnLine","_updateAttributeUpdateRange","spreadClamp","particleCount","        vSpriteSheet.y = 1.0 / framesY;","        float rowNorm = row / framesY;","alive","        float wiggleAmount = positionInTime * getWiggle();","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","arrayType","arrayValuesAreEqual","float when_eq( float x, float y ) {","textureFrames","_assignColorValue","setVec3Components","7nhTmMo","SPE.Group pool ran out.","       vec3 c = vec3(1.0);","    highp float age = getAge();","setAttribute","opacity","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","    gl_Position = projectionMatrix * mvPosition;","texture","setDrawRange","rotation","        float totalFrames = textureAnimation.z;","setNumber","Emitter does not exist in this group. Will not remove.","Emitter already belongs to another group. Will not add to requested group.","Invalid argument types, or argument types do not match:","warn","ShaderAttribute","      translated = rotationCenter - pos;","   c -= vec3( 1.0 );","_axisSpread","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","trace","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","__proto__","copy","defineProperty","        pos.z += wiggleSin;","setUpdateRange","476104vXXCEc","clone","attributeKeys","   c *= vec3( 2.0 );","attribute vec4 size;","13137256ZdEqHC","blending","setVec4Components","   return velocity * age;","randomDirectionVector3OnSphere","_ensureTypedArray","set","    highp float isAlive = when_gt( alive, 0.0 );","vec3 getAcceleration( in float age ) {","size","center","    force *= drag;","fog_pars_vertex","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","logdepthbuf_pars_fragment","float getAlive() {","        float framesX = textureAnimation.x;","Texture","    gl_PointSize = pointSizePerspective;","        float framesY = vSpriteSheet.y;","#endif","_onRemove","flagUpdate","uuid","activeMultiplier","       float s = sin( -vAngle );","vec3 unpackColor( in float hex ) {","   c.r = r / PACKED_COLOR_DIVISOR;","ensureArrayTypedArg","function *\\( *\\)","    float pointSizePerspective = pointSize * perspective;","_center","float and(float a, float b) {","LINE","Emitter","setRGB","static","    vec3 vel = getVelocity( age );","        float wiggleSin = isAlive * sin( wiggleAmount );","OBJECT","randomVector3","_resetBufferRanges","table","NEGATIVE_INFINITY","ensureInstanceOf"];return(f=function(){return t})()}typeof define===a(583)&&define[a(542)]?define(a(526),l):typeof exports!==a(326)&&typeof module!==a(326)&&(module[a(484)]=l),l[a(260)]=function(t,e,i,n){const r=a;this[r(467)]=i||1,this[r(424)]=e||1,this[r(571)]=t||Float32Array,this[r(582)]=new t(e*this[r(467)]),this.indexOffset=n||0},l.TypedArrayHelper[a(222)]=l[a(260)],l[a(260)].prototype.setSize=function(t,e){const i=a,n=this[i(582)][i(479)];return!e&&(t*=this[i(467)]),t<n?this.shrink(t):t>n?this[i(328)](t):void console.info(i(196),t+".",i(277))},l[a(260)][a(354)][a(311)]=function(t){const e=a;return this.array=this[e(582)][e(333)](0,t),this[e(424)]=t,this},l[a(260)].prototype[a(328)]=function(t){const e=a,i=this[e(582)],n=new(this[e(571)])(t);return n[e(421)](i),this[e(582)]=n,this[e(424)]=t,this},l.TypedArrayHelper[a(354)][a(523)]=function(t,e){const i=a;t*=this[i(467)],e*=this.componentSize;const n=[],r=this[i(582)],s=r[i(479)];for(let o=0;o<s;++o)(o<t||o>=e)&&n[i(547)](r[o]);return this[i(615)](0,n),this},l[a(260)][a(354)][a(615)]=function(t,e){const i=a,n=t+e.length;return n>this[i(582)][i(479)]?this[i(328)](n):n<this[i(582)][i(479)]&&this[i(311)](n),this[i(582)].set(e,this[i(335)]+t),this},l[a(260)][a(354)][a(332)]=function(t,e){return this[a(482)](t,e.x,e.y)},l[a(260)][a(354)].setVec2Components=function(t,e,i){const n=a,r=this[n(582)],s=this.indexOffset+t*this[n(467)];return r[s]=e,r[s+1]=i,this},l[a(260)][a(354)].setVec3=function(t,e){return this[a(380)](t,e.x,e.y,e.z)},l.TypedArrayHelper[a(354)][a(380)]=function(t,e,i,n){const r=a,s=this[r(582)],o=this[r(335)]+t*this[r(467)];return s[o]=e,s[o+1]=i,s[o+2]=n,this},l[a(260)][a(354)][a(518)]=function(t,e){return this[a(417)](t,e.x,e.y,e.z,e.w)},l[a(260)].prototype[a(417)]=function(t,e,i,n,r){const s=a,o=this.array,h=this[s(335)]+t*this[s(467)];return o[h]=e,o[h+1]=i,o[h+2]=n,o[h+3]=r,this},l[a(260)][a(354)].setMat3=function(t,e){const i=a;return this[i(615)](this[i(335)]+t*this[i(467)],e[i(573)])},l[a(260)][a(354)][a(462)]=function(t,e){const i=a;return this[i(615)](this[i(335)]+t*this.componentSize,e.elements)},l.TypedArrayHelper[a(354)][a(248)]=function(t,e){return this[a(380)](t,e.r,e.g,e.b)},l.TypedArrayHelper[a(354)][a(393)]=function(t,e){const i=a;return this[i(582)][this.indexOffset+t*this[i(467)]]=e,this},l.TypedArrayHelper.prototype[a(496)]=function(t){const e=a;return this.array[this[e(335)]+t]},l[a(260)].prototype[a(537)]=function(t){const e=a;return this[e(582)][e(333)](this.indexOffset+t*this.componentSize)},l.ShaderAttribute=function(t,e,i){const n=a,r=l.ShaderAttribute[n(197)];this.type=typeof t===n(341)&&r.hasOwnProperty(t)?t:"f",this[n(467)]=r[this[n(625)]],this[n(375)]=i||Float32Array,this.typedArray=null,this.bufferAttribute=null,this[n(652)]=!!e,this[n(299)]=0,this.updateMax=0},l[a(398)][a(222)]=l[a(398)],l[a(398)][a(197)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},l[a(398)][a(354)].setUpdateRange=function(t,e){const i=a;this[i(299)]=Math[i(246)](t*this[i(467)],this[i(299)]*this[i(467)]),this[i(535)]=Math[i(200)](e*this[i(467)],this[i(535)]*this[i(467)])},l.ShaderAttribute.prototype[a(437)]=function(){const t=a,e=this[t(305)],i=e.updateRange;i[t(503)]=this[t(299)],i.count=Math[t(246)](this[t(535)]-this[t(299)]+this.componentSize,this[t(488)].array[t(479)]),e[t(519)]=!0},l[a(398)][a(354)][a(317)]=function(){this[a(299)]=0,this.updateMax=0},l.ShaderAttribute[a(354)].resetDynamic=function(){const e=a;this[e(305)][e(201)]=this.dynamicBuffer?t[e(294)]:t[e(460)]},l.ShaderAttribute[a(354)][a(523)]=function(t,e){const i=a;this[i(488)][i(523)](t,e),this[i(349)]()},l[a(398)].prototype[a(349)]=function(){const e=a;this[e(305)][e(582)]=this.typedArray[e(582)],this[e(305)][e(356)][e(503)]=0,this[e(305)].updateRange.count=-1,this.bufferAttribute[e(201)]=t[e(460)],this.bufferAttribute[e(519)]=!0},l[a(398)][a(354)]._ensureTypedArray=function(t){const e=a;null!==this[e(488)]&&this[e(488)][e(424)]===t*this[e(467)]||(null!==this[e(488)]&&this[e(488)].size!==t?this.typedArray[e(584)](t):null===this.typedArray&&(this[e(488)]=new(l[e(260)])(this[e(375)],t,this[e(467)])))},l[a(398)][a(354)]._createBufferAttribute=function(e){const i=a;if(this[i(420)](e),null!==this.bufferAttribute)return this[i(305)][i(582)]=this[i(488)].array,parseFloat(t[i(485)])>=81&&(this[i(305)].count=this[i(305)][i(582)][i(479)]/this[i(305)].itemSize),void(this[i(305)][i(519)]=!0);this.bufferAttribute=new(t[i(622)])(this[i(488)][i(582)],this[i(467)]),this[i(305)][i(201)]=this[i(652)]?t[i(294)]:t[i(460)]},l.ShaderAttribute[a(354)][a(650)]=function(){const t=a;return null===this.typedArray?0:this[t(488)].array.length},l.shaderChunks={defines:[a(501),a(543)][a(570)]("\n"),uniforms:[a(504),a(251),a(631),a(218),a(555)][a(570)]("\n"),attributes:["attribute vec4 acceleration;",a(245),"attribute vec4 rotation;","attribute vec3 rotationCenter;",a(329),a(414),a(641),"attribute vec4 color;","attribute vec4 opacity;"][a(570)]("\n"),varyings:["varying vec4 vColor;","#ifdef SHOULD_ROTATE_TEXTURE","    varying float vAngle;",a(435),a(646),a(602),"#endif"][a(570)]("\n"),branchAvoidanceFunctions:[a(578),a(346),"}",a(204),a(528),"}",a(377),a(473),"}",a(345),a(635),"}","float when_le(float x, float y) {","  return 1.0 - when_gt(x, y);","}",a(447),a(630),"}","float or(float a, float b) {",a(225),"}"][a(570)]("\n"),unpackColor:[a(441),a(272),a(576),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",a(261),a(442),a(362),a(236),a(491),"}"][a(570)]("\n"),unpackRotationAxis:[a(617),a(272),a(576),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",a(261),a(442),a(362),a(236),a(413),a(400),a(491),"}"].join("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {",a(572),a(231),a(517),a(532),a(226),"",a(548),a(514),a(374),a(404),"    }","",a(551),"}"][a(570)]("\n"),colorOverLifetime:[a(247),a(279),"    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );",a(347),a(551),"}"][a(570)]("\n"),paramFetchingFunctions:[a(430),a(351),"}",a(359),a(330),"}",a(477),a(525),"}","float getWiggle() {","   return params.w;","}"][a(570)]("\n"),forceFetchingFunctions:[a(642),a(243),"}",a(206),a(418),"}",a(423),a(490),"}"][a(570)]("\n"),rotationFunctions:[a(323),a(300),a(556),"       float s = sin(angle);",a(564),a(220),"",a(611),a(321),a(295),a(255),a(263),"",a(360),a(224),a(620),a(281),"",a(483),"      vec3 center = rotationCenter;","      vec3 translated;",a(271),"      float angle = 0.0;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;",a(533),a(399),a(259),a(315),a(263),"#endif"][a(570)]("\n"),rotateTexture:[a(472),"",a(619),a(494),a(549),a(639),a(440),"       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","    #endif","",a(211),a(282),a(434),"        float columnNorm = vSpriteSheet.z;",a(209),a(192),"        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);",a(357),"","    vec4 rotatedTexture = texture2D( tex, vUv );"].join("\n")},l.shaders={vertex:[l[a(241)].defines,l[a(241)][a(252)],l[a(241)][a(309)],l[a(241)][a(588)],e[a(614)],t[a(550)][a(303)],t[a(550)][a(427)],l.shaderChunks.branchAvoidanceFunctions,l.shaderChunks.unpackColor,l[a(241)][a(310)],l[a(241)].floatOverLifetime,l[a(241)].colorOverLifetime,l[a(241)].paramFetchingFunctions,l.shaderChunks.forceFetchingFunctions,l[a(241)][a(254)],a(228),a(384),a(190),a(287),"    highp float positionInTime = (age / maxAge);",a(422),a(511),a(373),a(453),a(286),a(357),a(452),a(269),a(478),a(320),a(604),a(632),a(426),a(353),"    pos += force;",a(511),a(644),a(653),a(408),"    #endif","    #ifdef SHOULD_ROTATE_PARTICLES","        pos = getRotation( pos, positionInTime );",a(357),a(558),a(600),a(194),a(342),a(540),a(221),a(357),a(445),"    #ifdef COLORIZE",a(536),a(227),a(266),a(298),a(492),a(267),a(506),"    #else",a(383),"    #endif",a(402),a(318),a(619),a(387),a(357),a(211),a(431),a(365),a(563),a(392),a(428),a(597),"        float row = floor( (frameNumber - column) / framesX );",a(487),a(371),a(348),a(370),"        vSpriteSheet.z = columnNorm;","        vSpriteSheet.w = rowNorm;",a(357),a(433),a(388),t[a(550)].logdepthbuf_vertex,t[a(550)].fog_vertex,"}"].join("\n"),fragment:[l[a(241)].uniforms,t[a(550)].common,t[a(550)].fog_pars_fragment,t[a(550)][a(429)],l[a(241)][a(588)],l.shaderChunks[a(621)],a(228),"    vec3 outgoingLight = vColor.xyz;",a(355),a(253),a(290),a(357),l[a(241)][a(539)],t[a(550)][a(213)],"    outgoingLight = vColor.xyz * rotatedTexture.xyz;",a(230),e[a(633)],"}"][a(570)]("\n")},l[a(552)]={types:{BOOLEAN:"boolean",STRING:a(341),NUMBER:"number",OBJECT:a(493)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=a;if(Array[n(513)](t)){for(let r=t[n(479)]-1;r>=0;--r)if(typeof t[r]!==e)return i;return t}return this[n(199)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){if(Array.isArray(t)){for(let n=t.length-1;n>=0;--n)if(void 0!==e&&t[n]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=a;e=e||3,i=i||3,!1===Array[n(513)](t[n(567)])&&(t._value=[t[n(567)]]),!1===Array[n(513)](t[n(606)])&&(t[n(606)]=[t[n(606)]]);const r=this[n(546)](t._value[n(479)],e,i),s=this[n(546)](t[n(606)][n(479)],e,i),o=Math[n(200)](r,s);t[n(567)][n(479)]!==o&&(t._value=this[n(334)](t._value,o)),t._spread[n(479)]!==o&&(t._spread=this[n(334)](t[n(606)],o))},interpolateArray(t,e){const i=a,n=t[i(479)],r=["function"==typeof t[0].clone?t[0][i(411)]():t[0]],s=(n-1)/(e-1);for(let o=1;o<e-1;++o){const e=o*s,n=Math[i(291)](e),a=Math[i(256)](e),h=e-n;r[o]=this[i(264)](t[n],t[a],h)}return r[i(547)](typeof t[n-1][i(411)]===i(583)?t[n-1][i(411)]():t[n-1]),r},clamp:(t,e,i)=>Math.max(e,Math.min(t,i)),zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[a(520)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,r,s){const o=a;let h,c=this[o(499)];return typeof e===c[o(471)]&&typeof r===c[o(471)]?e+(r-e)*s:e instanceof t[o(577)]&&r instanceof t[o(577)]?(h=e[o(411)](),h.x=this[o(285)](e.x,r.x,s),h.y=this[o(285)](e.y,r.y,s),h):e instanceof t[o(638)]&&r instanceof t[o(638)]?(h=e[o(411)](),h.x=this[o(285)](e.x,r.x,s),h.y=this.lerp(e.y,r.y,s),h.z=this[o(285)](e.z,r.z,s),h):e instanceof i&&r instanceof t[o(265)]?(h=e[o(411)](),h.x=this[o(285)](e.x,r.x,s),h.y=this[o(285)](e.y,r.y,s),h.z=this[o(285)](e.z,r.z,s),h.w=this.lerp(e.w,r.w,s),h):e instanceof n&&r instanceof n?(h=e[o(411)](),h.r=this.lerp(e.r,r.r,s),h.g=this[o(285)](e.g,r.g,s),h.b=this[o(285)](e.b,r.b,s),h):void console[o(397)](o(396),e,r)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math[a(273)](t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){const e=a;for(let i=0;i<t[e(479)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[a(520)]()-.5),randomVector3(t,e,i,n,r){const s=a;let o=i.x+(Math[s(520)]()*n.x-.5*n.x),h=i.y+(Math[s(520)]()*n.y-.5*n.y),c=i.z+(Math[s(520)]()*n.z-.5*n.z);r&&(o=.5*-r.x+this[s(560)](o,r.x),h=.5*-r.y+this[s(560)](h,r.y),c=.5*-r.z+this.roundToNearestMultiple(c,r.z)),t[s(488)][s(380)](e,o,h,c)},randomColor(t,e,i,n){const r=a;let s=i.r+Math[r(520)]()*n.x,o=i.g+Math[r(520)]()*n.y,h=i.b+Math[r(520)]()*n.z;s=this.clamp(s,0,1),o=this[r(546)](o,0,1),h=this.clamp(h,0,1),t[r(488)][r(380)](e,s,o,h)},randomColorAsHex:function(){const t=new n;return function(e,i,n,r){const s=c,o=n[s(479)],a=[];for(let h=0;h<o;++h){const e=r[h];t[s(406)](n[h]),t.r+=Math.random()*e.x-.5*e.x,t.g+=Math[s(520)]()*e.y-.5*e.y,t.b+=Math[s(520)]()*e.z-.5*e.z,t.r=this[s(546)](t.r,0,1),t.g=this.clamp(t.g,0,1),t.b=this[s(546)](t.b,0,1),a.push(t[s(640)]())}e[s(488)].setVec4Components(i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const r=a,s=i.clone();s[r(285)](n,Math[r(520)]()),t[r(488)][r(380)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,r,s,o,h){const c=a;let u=2*Math.random()-1,l=6.2832*Math.random(),f=Math.sqrt(1-u*u),p=this[c(595)](n,r),d=0,m=0,g=0;o&&(p=Math.round(p/o)*o),d=f*Math[c(283)](l)*p,m=f*Math[c(476)](l)*p,g=u*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t[c(488)][c(380)](e,d,m,g)},seededRandom(t){const e=1e4*Math[a(476)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,r,s,o){const h=a;let c=6.2832*Math[h(520)](),u=Math[h(273)](this[h(595)](n,r)),l=0,f=0,p=0;o&&(u=Math[h(627)](u/o)*o),l=Math[h(283)](c)*u,f=Math[h(476)](c)*u,l*=s.x,f*=s.y,l+=i.x,f+=i.y,p+=i.z,t[h(488)][h(380)](e,l,f,p)},randomDirectionVector3OnSphere:function(){const t=new r;return function(e,i,n,r,s,o,a,h){const u=c;t[u(406)](o),t.x-=n,t.y-=r,t.z-=s,t[u(217)]()[u(276)](-this[u(595)](a,h)),e[u(488)][u(380)](i,t.x,t.y,t.z)}}(),randomDirectionVector3OnDisc:function(){const e=a,i=new(t[e(638)]);return function(t,n,r,s,o,a,h,c){const u=e;i[u(406)](a),i.x-=r,i.y-=s,i.z-=o,i[u(217)]()[u(276)](-this[u(595)](h,c)),t[u(488)][u(380)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=a,i=new(t[e(638)]),r=new(t[e(638)]),s=new n,o=new(t[e(638)])(1,1,1);return function(t,n){const a=e;return i[a(406)](t)[a(217)](),r[a(406)](n)[a(217)](),i.x+=.5*-n.x+Math[a(520)]()*n.x,i.y+=.5*-n.y+Math.random()*n.y,i.z+=.5*-n.z+Math[a(520)]()*n.z,i[a(217)]()[a(292)](o)[a(276)](.5),s[a(450)](i.x,i.y,i.z),s.getHex()}}()},l.Group=function(e){const i=a,n=l[i(552)],r=n[i(499)];(e=n.ensureTypedArg(e,r[i(454)],{}))[i(389)]=n.ensureTypedArg(e[i(389)],r[i(454)],{}),this.uuid=t[i(308)][i(530)](),this[i(605)]=n[i(199)](e[i(605)],r[i(471)],.016),this.texture=n[i(459)](e.texture[i(301)],t[i(432)],null),this[i(378)]=n[i(459)](e[i(389)].frames,t[i(577)],new s(1,1)),this[i(361)]=n[i(199)](e.texture[i(297)],r[i(471)],this.textureFrames.x*this[i(378)].y),this[i(649)]=n[i(199)](e[i(389)][i(601)],r[i(471)],1),this[i(378)].max(new(t[i(577)])(1,1)),this.hasPerspective=n[i(199)](e[i(314)],r[i(497)],!0),this[i(338)]=n.ensureTypedArg(e[i(338)],r[i(497)],!0),this[i(344)]=n[i(199)](e[i(344)],r[i(471)],null),this[i(416)]=n[i(199)](e[i(416)],r[i(471)],t[i(350)]),this[i(475)]=n[i(199)](e[i(475)],r[i(497)],!0),this.alphaTest=parseFloat(n[i(199)](e.alphaTest,r[i(471)],0)),this.depthWrite=n.ensureTypedArg(e[i(562)],r[i(497)],!1),this[i(339)]=n[i(199)](e[i(339)],r[i(497)],!0),this[i(541)]=n.ensureTypedArg(e[i(541)],r[i(497)],!0),this[i(618)]=n[i(199)](e[i(618)],r[i(471)],300),this[i(592)]=[],this[i(322)]=[],this[i(331)]=[],this[i(489)]=null,this._createNewWhenPoolEmpty=0,this[i(645)]=!1,this[i(468)]=!1,this[i(369)]=0,this[i(252)]={tex:{type:"t",value:this[i(389)]},textureAnimation:{type:"v4",value:new(t[i(265)])(this[i(378)].x,this[i(378)].y,this.textureFrameCount,Math.max(Math[i(273)](this[i(649)]),1))},fogColor:{type:"c",value:this[i(541)]?new(t[i(566)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this[i(538)]={HAS_PERSPECTIVE:this[i(314)],COLORIZE:this[i(338)],VALUE_OVER_LIFETIME_LENGTH:l[i(607)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(378)].x>1||this[i(378)].y>1},this[i(309)]={position:new(l[i(398)])("v3",!0),acceleration:new(l[i(398)])("v4",!0),velocity:new l.ShaderAttribute("v3",!0),rotation:new l.ShaderAttribute("v4",!0),rotationCenter:new(l[i(398)])("v3",!0),params:new(l[i(398)])("v4",!0),size:new(l[i(398)])("v4",!0),angle:new(l[i(398)])("v4",!0),color:new(l[i(398)])("v4",!0),opacity:new(l[i(398)])("v4",!0)},this.attributeKeys=Object[i(340)](this[i(309)]),this[i(216)]=this[i(412)].length,this.material=new(t[i(534)])({uniforms:this[i(252)],vertexShader:l[i(616)][i(313)],fragmentShader:l[i(616)][i(203)],blending:this.blending,transparent:this[i(475)],alphaTest:this[i(212)],depthWrite:this[i(562)],depthTest:this[i(339)],defines:this[i(538)],fog:this[i(541)]}),this[i(202)]=new o,this.mesh=new(t[i(223)])(this[i(202)],this[i(515)]),null===this[i(344)]&&console[i(397)](i(626))},l[a(257)].constructor=l[a(257)],l.Group[a(354)][a(565)]=function(){const t=a;let e,i=this[t(592)],n=i.length-1,r=this[t(538)];for(;n>=0;--n)e=i[n],!r[t(500)]&&(r[t(554)]=r.SHOULD_ROTATE_TEXTURE||!!Math[t(200)](Math[t(200)][t(510)](null,e[t(470)][t(301)]),Math[t(200)][t(510)](null,e[t(470)].spread))),r[t(559)]=r[t(559)]||!!Math[t(200)](e[t(391)][t(470)],e.rotation[t(598)]),r.SHOULD_WIGGLE_PARTICLES=r[t(603)]||!!Math.max(e.wiggle[t(301)],e[t(545)][t(579)]);this[t(515)][t(519)]=!0},l.Group[a(354)]._applyAttributesToGeometry=function(){const t=a;let e,i,n=this[t(309)],r=this.geometry,s=r[t(309)];for(const o in n)n[t(509)](o)&&(e=n[o],i=s[o],i?i.array=e.typedArray.array:r[t(385)](o,e[t(305)]),e[t(305)][t(519)]=!0);this[t(202)][t(390)](0,this[t(369)])},l[a(257)][a(354)][a(544)]=function(t){const e=a;if(t instanceof l[e(449)]==!1)return void console[e(628)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this[e(322)].indexOf(t[e(438)])>-1)return void console[e(628)]("Emitter already exists in this group. Will not add again.");if(null!==t[e(524)])return void console.error(e(395));const i=this[e(309)],n=this[e(369)],r=n+t[e(369)];this[e(369)]=r,null!==this.maxParticleCount&&this[e(369)]>this[e(344)]&&console.warn("SPE.Group: maxParticleCount exceeded. Requesting",this.particleCount,"particles, can support only",this[e(344)]),t[e(312)](t[e(613)]._value+t.maxAge[e(606)]),t[e(296)](this[e(412)]),t[e(237)](n),t[e(524)]=this,t[e(309)]=this.attributes;for(const s in i)i[e(509)](s)&&i[s]._createBufferAttribute(null!==this[e(344)]?this[e(344)]:this[e(369)]);for(let s=n;s<r;++s)t[e(531)](s),t._assignForceValue(s,e(268)),t._assignForceValue(s,e(557)),t[e(240)](s,"opacity"),t._assignAbsLifetimeValue(s,e(424)),t[e(612)](s),t._assignRotationValue(s),t[e(594)](s),t[e(379)](s);return this[e(512)](),this.emitters[e(547)](t),this[e(322)][e(547)](t.uuid),this[e(565)](t),this[e(515)][e(519)]=!0,this.geometry[e(519)]=!0,this[e(645)]=!0,this},l[a(257)][a(354)][a(580)]=function(t){const e=a,i=this[e(322)].indexOf(t.uuid);if(t instanceof l[e(449)]==!1)return void console[e(628)](e(464),t);if(-1===i)return void console[e(628)](e(394));const n=t[e(219)],r=n+t.particleCount,s=this[e(309)][e(293)].typedArray;for(let o=n;o<r;++o)s[e(582)][4*o]=0,s[e(582)][4*o+1]=0;this[e(592)][e(523)](i,1),this[e(322)][e(523)](i,1);for(const o in this.attributes)this[e(309)].hasOwnProperty(o)&&this[e(309)][o][e(523)](n,r);this[e(369)]-=t[e(369)],t._onRemove(),this[e(645)]=!0},l[a(257)][a(354)][a(553)]=function(){const t=a,e=this._pool,i=this[t(337)];if(e.length)return e[t(244)]();if(i){const e=new(l[t(449)])(this._poolCreationSettings);return this[t(544)](e),e}return null},l[a(257)][a(354)][a(205)]=function(t){const e=a;if(t instanceof l[e(449)]!=!1)return t[e(629)](),this._pool[e(316)](t),this;console.error(e(208),t)},l[a(257)][a(354)][a(591)]=function(){return this[a(331)]},l[a(257)][a(354)].addPool=function(t,e,i){const n=a;let r;this[n(489)]=e,this[n(337)]=!!i;for(let s=0;s<t;++s)r=Array.isArray(e)?new(l[n(449)])(e[s]):new(l[n(449)])(e),this[n(544)](r),this[n(205)](r);return this},l[a(257)].prototype[a(474)]=function(t){const e=a,i=this[e(553)](),n=this;if(null!==i)return t instanceof r&&(i.position[e(301)][e(406)](t),i[e(304)][e(301)]=i[e(304)][e(301)]),i[e(623)](),setTimeout((()=>{const t=e;i.disable(),n[t(205)](i)}),1e3*Math[e(200)](i[e(249)],i[e(613)][e(301)]+i[e(613)].spread)),this;console[e(505)](e(382))},l[a(257)][a(354)][a(527)]=function(t,e){if(typeof t===a(575)&&t>1)for(let i=0;i<t;++i)this._triggerSingleEmitter(e);else this._triggerSingleEmitter(e);return this},l[a(257)][a(354)][a(637)]=function(t){const e=a;this[e(252)][e(288)].value+=t,this.uniforms[e(636)][e(301)]=t},l[a(257)][a(354)][a(456)]=function(){const t=a;let e=this.attributeKeys,i=this[t(216)]-1,n=this[t(309)];for(;i>=0;--i)n[e[i]][t(317)]()},l.Group[a(354)][a(461)]=function(t){const e=a;let i,n,r,s=this.attributeKeys,o=this.attributeCount-1,h=this[e(309)],c=t.bufferUpdateRanges;for(;o>=0;--o)i=s[o],n=c[i],r=h[i],r[e(409)](n[e(246)],n[e(200)]),r[e(437)]()},l[a(257)][a(354)][a(250)]=function(t){const e=a;var i=this.emitters,n=i[e(479)],r=t||this[e(605)],s=this[e(412)],o=this[e(309)];if(this[e(637)](r),this[e(456)](),0!==n||!1!==this[e(645)]||!1!==this[e(468)]){for(var h,c=0;c<n;++c)(h=i[c])[e(250)](r),this[e(461)](h);if(!0===this._attributesNeedDynamicReset){for(c=this[e(216)]-1;c>=0;--c)o[s[c]].resetDynamic();this[e(468)]=!1}if(!0===this[e(645)]){for(c=this[e(216)]-1;c>=0;--c)o[s[c]].forceUpdateAll();this[e(645)]=!1,this._attributesNeedDynamicReset=!0}}},l[a(257)][a(354)][a(486)]=function(){const t=a;return this.geometry.dispose(),this[t(515)].dispose(),this},l[a(449)]=function(e){const i=a,s=l[i(552)],o=s[i(499)],h=l[i(607)];(e=s.ensureTypedArg(e,o[i(454)],{}))[i(304)]=s[i(199)](e[i(304)],o[i(454)],{}),e[i(268)]=s[i(199)](e[i(268)],o[i(454)],{}),e[i(557)]=s[i(199)](e[i(557)],o[i(454)],{}),e[i(581)]=s[i(199)](e[i(581)],o[i(454)],{}),e[i(270)]=s[i(199)](e[i(270)],o[i(454)],{}),e[i(391)]=s[i(199)](e[i(391)],o[i(454)],{}),e[i(624)]=s[i(199)](e[i(624)],o[i(454)],{}),e[i(386)]=s[i(199)](e[i(386)],o.OBJECT,{}),e[i(424)]=s[i(199)](e[i(424)],o.OBJECT,{}),e[i(470)]=s.ensureTypedArg(e[i(470)],o.OBJECT,{}),e[i(545)]=s[i(199)](e[i(545)],o[i(454)],{}),e[i(613)]=s.ensureTypedArg(e[i(613)],o[i(454)],{}),e.onParticleSpawn&&console[i(397)](i(307)),this[i(438)]=t[i(308)].generateUUID(),this[i(625)]=s.ensureTypedArg(e[i(625)],o[i(471)],l[i(258)][i(569)]),this[i(304)]={_value:s.ensureInstanceOf(e[i(304)].value,t[i(638)],new(t[i(638)])),_spread:s[i(459)](e[i(304)][i(579)],t[i(638)],new r),_spreadClamp:s[i(459)](e.position[i(368)],t[i(638)],new r),_distribution:s[i(199)](e[i(304)][i(289)],o.NUMBER,this[i(625)]),_randomise:s[i(199)](e[i(304)].randomise,o[i(497)],!1),_radius:s[i(199)](e.position[i(581)],o[i(471)],10),_radiusScale:s[i(459)](e.position[i(215)],t[i(638)],new r(1,1,1)),_distributionClamp:s[i(199)](e[i(304)][i(207)],o[i(471)],0)},this[i(268)]={_value:s.ensureInstanceOf(e.velocity.value,t[i(638)],new(t[i(638)])),_spread:s[i(459)](e[i(268)].spread,t[i(638)],new(t[i(638)])),_distribution:s[i(199)](e[i(268)][i(289)],o[i(471)],this.type),_randomise:s[i(199)](e[i(304)][i(480)],o[i(497)],!1)},this[i(557)]={_value:s[i(459)](e.acceleration[i(301)],t[i(638)],new r),_spread:s[i(459)](e[i(557)].spread,t[i(638)],new(t[i(638)])),_distribution:s.ensureTypedArg(e.acceleration.distribution,o[i(471)],this.type),_randomise:s[i(199)](e[i(304)][i(480)],o[i(497)],!1)},this[i(270)]={_value:s.ensureTypedArg(e.drag[i(301)],o[i(471)],0),_spread:s[i(199)](e[i(270)][i(579)],o.NUMBER,0),_randomise:s[i(199)](e[i(304)][i(480)],o[i(497)],!1)},this[i(545)]={_value:s[i(199)](e[i(545)].value,o.NUMBER,0),_spread:s[i(199)](e.wiggle[i(579)],o.NUMBER,0)},this[i(391)]={_axis:s.ensureInstanceOf(e[i(391)].axis,t[i(638)],new(t[i(638)])(0,1,0)),_axisSpread:s.ensureInstanceOf(e.rotation[i(498)],r,new(t[i(638)])),_angle:s[i(199)](e[i(391)][i(470)],o.NUMBER,0),_angleSpread:s.ensureTypedArg(e.rotation[i(598)],o[i(471)],0),_static:s[i(199)](e[i(391)][i(451)],o[i(497)],!1),_center:s[i(459)](e[i(391)][i(425)],t[i(638)],this[i(304)][i(567)][i(411)]()),_randomise:s.ensureTypedArg(e.position[i(480)],o[i(497)],!1)},this.maxAge={_value:s[i(199)](e[i(613)].value,o.NUMBER,2),_spread:s[i(199)](e[i(613)][i(579)],o[i(471)],0)},this[i(624)]={_value:s[i(280)](e[i(624)].value,t[i(566)],new n),_spread:s[i(280)](e[i(624)][i(579)],r,new(t[i(638)])),_randomise:s.ensureTypedArg(e.position[i(480)],o[i(497)],!1)},this[i(386)]={_value:s.ensureArrayTypedArg(e[i(386)][i(301)],o[i(471)],1),_spread:s.ensureArrayTypedArg(e.opacity[i(579)],o[i(471)],0),_randomise:s[i(199)](e.position[i(480)],o.BOOLEAN,!1)},this[i(424)]={_value:s.ensureArrayTypedArg(e[i(424)][i(301)],o[i(471)],1),_spread:s[i(443)](e.size[i(579)],o[i(471)],0),_randomise:s[i(199)](e[i(304)][i(480)],o[i(497)],!1)},this[i(470)]={_value:s[i(443)](e[i(470)].value,o[i(471)],0),_spread:s[i(443)](e[i(470)][i(579)],o[i(471)],0),_randomise:s[i(199)](e[i(304)].randomise,o[i(497)],!1)},this[i(369)]=s[i(199)](e[i(369)],o[i(471)],100),this[i(249)]=s[i(199)](e[i(249)],o[i(471)],null),this[i(568)]=s[i(199)](e[i(568)],o[i(497)],!1),this[i(439)]=s[i(199)](e[i(439)],o[i(471)],1),this.direction=s[i(199)](e.direction,o.NUMBER,1),this[i(372)]=s[i(199)](e[i(372)],o[i(497)],!0),this[i(319)]=0,this[i(648)]=0,this[i(219)]=0,this.attributeEnd=0,this[i(238)]=0,this[i(516)]=0,this.group=null,this.attributes=null,this[i(234)]=null,this[i(495)]={position:s[i(199)](e.position.randomise,o.BOOLEAN,!1)||s.ensureTypedArg(e.radius[i(480)],o[i(497)],!1),velocity:s.ensureTypedArg(e[i(268)][i(480)],o.BOOLEAN,!1),acceleration:s[i(199)](e[i(557)].randomise,o[i(497)],!1)||s[i(199)](e.drag[i(480)],o[i(497)],!1),rotation:s.ensureTypedArg(e[i(391)][i(480)],o.BOOLEAN,!1),rotationCenter:s[i(199)](e.rotation[i(480)],o[i(497)],!1),size:s[i(199)](e[i(424)][i(480)],o[i(497)],!1),color:s[i(199)](e[i(624)][i(480)],o[i(497)],!1),opacity:s.ensureTypedArg(e[i(386)][i(480)],o[i(497)],!1),angle:s[i(199)](e.angle[i(480)],o[i(497)],!1)},this[i(647)]={},this[i(587)]={},this[i(585)]={maxAge:"params",position:i(304),velocity:"velocity",acceleration:i(557),drag:i(557),wiggle:i(293),rotation:"rotation",size:i(424),color:i(624),opacity:i(386),angle:i(470)};for(const t in this[i(585)])this.updateMap.hasOwnProperty(t)&&(this[i(587)][this.updateMap[t]]=0,this.updateFlags[this[i(585)][t]]=!1,this[i(242)](this[t],t));this[i(262)]={},this[i(412)]=null,this.attributeCount=0,s[i(529)](this[i(624)],h,h),s.ensureValueOverLifetimeCompliance(this.opacity,h,h),s[i(529)](this[i(424)],h,h),s[i(529)](this[i(470)],h,h)},l[a(449)][a(222)]=l.Emitter,l[a(449)][a(354)][a(242)]=function(t,e){const i=a,n=this;for(const r in t)if(t[i(509)](r)){const s=r[i(521)]("_","");Object[i(407)](t,s,{get:function(t){return function(){return this[t]}}(r),set:function(t){return function(i){const r=c,s=n[r(585)][e],o=this[t],a=l.valueOverLifetimeLength;t===r(590)?(n[r(647)].rotationCenter=!0,n[r(587)].rotationCenter=0):t===r(634)?n[r(495)][s]=i:(n.updateFlags[s]=!0,n[r(587)][s]=0),n.group[r(565)](),this[t]=i,Array[r(513)](o)&&l[r(552)].ensureValueOverLifetimeCompliance(n[e],a,a)}}(r)})}},l[a(449)][a(354)]._setBufferUpdateRanges=function(t){const e=a;this[e(412)]=t,this[e(216)]=t[e(479)];for(let i=this[e(216)]-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number[e(275)],max:Number[e(458)]}},l[a(449)].prototype._calculatePPSValue=function(t){const e=a,i=this[e(369)];this.duration?this.particlesPerSecond=i/(t<this.duration?t:this.duration):this[e(319)]=i/t},l[a(449)][a(354)]._setAttributeOffset=function(t){const e=a;this[e(219)]=t,this[e(648)]=t,this[e(610)]=t+this[e(369)]},l[a(449)][a(354)]._assignValue=function(t,e){const i=a;switch(t){case i(304):this._assignPositionValue(e);break;case i(268):case i(557):this._assignForceValue(e,t);break;case i(424):case i(386):this[i(240)](e,t);break;case i(470):this[i(612)](e);break;case i(293):this[i(594)](e);break;case"rotation":this[i(364)](e);break;case i(624):this._assignColorValue(e)}},l[a(449)][a(354)][a(531)]=function(t){const e=a,i=l[e(258)],n=l[e(552)],r=this[e(304)],s=this[e(309)][e(304)],o=r[e(567)],h=r[e(606)];switch(r[e(327)]){case i[e(569)]:n[e(455)](s,t,o,h,r[e(235)]);break;case i[e(469)]:n[e(284)](s,t,o,r[e(599)],r[e(606)].x,r._radiusScale,r[e(235)].x,r[e(232)]||this[e(369)]);break;case i[e(324)]:n.randomVector3OnDisc(s,t,o,r[e(599)],r[e(606)].x,r._radiusScale,r[e(235)].x);break;case i[e(448)]:n[e(366)](s,t,o,h)}},l[a(449)].prototype[a(239)]=function(t,e){const i=a;let n,r,s,o,h,c=l.distributions,u=l[i(552)],f=this[e],p=f[i(567)],d=f[i(606)];switch(f[i(327)]){case c.BOX:u[i(455)](this.attributes[e],t,p,d);break;case c.SPHERE:n=this[i(309)][i(304)].typedArray[i(582)],h=3*t,r=n[h],s=n[h+1],o=n[h+2],u[i(419)](this[i(309)][e],t,r,s,o,this[i(304)][i(567)],f._value.x,f._spread.x);break;case c[i(324)]:n=this[i(309)][i(304)][i(488)].array,h=3*t,r=n[h],s=n[h+1],o=n[h+2],u[i(463)](this[i(309)][e],t,r,s,o,this[i(304)][i(567)],f[i(567)].x,f[i(606)].x);break;case c[i(448)]:u.randomVector3OnLine(this[i(309)][e],t,p,d)}if("acceleration"===e){const e=u.clamp(u[i(595)](this[i(270)][i(567)],this[i(270)]._spread),0,1);this[i(309)][i(557)].typedArray[i(582)][4*t+3]=e}},l[a(449)][a(354)][a(240)]=function(t,e){const i=a;let n,r=this[i(309)][e][i(488)],s=this[e],o=l[i(552)];o.arrayValuesAreEqual(s[i(567)])&&o[i(376)](s[i(606)])?(n=Math[i(273)](o[i(595)](s._value[0],s[i(606)][0])),r[i(417)](t,n,n,n,n)):r[i(417)](t,Math[i(273)](o[i(595)](s[i(567)][0],s[i(606)][0])),Math.abs(o[i(595)](s[i(567)][1],s[i(606)][1])),Math[i(273)](o[i(595)](s._value[2],s[i(606)][2])),Math[i(273)](o.randomFloat(s[i(567)][3],s._spread[3])))},l[a(449)][a(354)]._assignAngleValue=function(t){const e=a;let i,n=this[e(309)][e(470)].typedArray,r=this[e(470)],s=l[e(552)];s.arrayValuesAreEqual(r._value)&&s.arrayValuesAreEqual(r[e(606)])?(i=s[e(595)](r[e(567)][0],r[e(606)][0]),n[e(417)](t,i,i,i,i)):n.setVec4Components(t,s.randomFloat(r[e(567)][0],r[e(606)][0]),s.randomFloat(r[e(567)][1],r[e(606)][1]),s[e(595)](r._value[2],r[e(606)][2]),s[e(595)](r[e(567)][3],r[e(606)][3]))},l[a(449)][a(354)][a(594)]=function(t){const e=a;this[e(309)].params.typedArray[e(417)](t,this.isStatic?1:0,0,Math.abs(l[e(552)].randomFloat(this[e(613)][e(567)],this[e(613)]._spread)),l[e(552)][e(595)](this[e(545)][e(567)],this[e(545)][e(606)]))},l[a(449)][a(354)][a(364)]=function(t){const e=a;this[e(309)][e(391)].typedArray[e(380)](t,l.utils[e(502)](this[e(391)][e(586)],this[e(391)][e(401)]),l.utils.randomFloat(this[e(391)]._angle,this[e(391)]._angleSpread),this[e(391)][e(593)]?0:1),this[e(309)].rotationCenter.typedArray[e(589)](t,this[e(391)][e(446)])},l[a(449)][a(354)][a(379)]=function(t){const e=a;l[e(552)].randomColorAsHex(this.attributes[e(624)],t,this[e(624)][e(567)],this[e(624)][e(606)])},l[a(449)][a(354)][a(302)]=function(t){const e=a;let i,n,r=this[e(495)],s=this[e(647)],o=this[e(587)],h=this.attributeKeys;for(let a=this[e(216)]-1;a>=0;--a)i=h[a],n=s[i],!0!==r[i]&&!0!==n||(this._assignValue(i,t),this._updateAttributeUpdateRange(i,t),!0===n&&o[i]===this[e(369)]?(s[i]=!1,o[i]=0):1==n&&++o[i])},l.Emitter[a(354)][a(367)]=function(t,e){const i=a,n=this[i(262)][t];n[i(246)]=Math[i(246)](e,n[i(246)]),n[i(200)]=Math[i(200)](e,n.max)},l[a(449)][a(354)]._resetBufferRanges=function(){const t=a;let e,i=this.bufferUpdateRanges,n=this[t(343)],r=this.bufferUpdateCount-1;for(;r>=0;--r)e=n[r],i[e].min=Number[t(275)],i[e][t(200)]=Number[t(458)]},l[a(449)].prototype[a(436)]=function(){const t=a;this[t(319)]=0,this.attributeOffset=0,this[t(648)]=0,this[t(516)]=0,this[t(524)]=null,this.attributes=null,this[t(234)]=null,this.age=0},l[a(449)].prototype[a(229)]=function(){--this[a(516)]},l[a(449)][a(354)][a(574)]=function(){++this[a(516)]},l[a(449)][a(354)][a(210)]=function(t,e,i,n){const r=a;for(var s,o,h,c,u=e-1;u>=t;--u)0!==(c=i[s=4*u])&&(h=i[s+1],o=i[s+2],1===this[r(507)]?(h+=n)>=o&&(h=0,c=0,this[r(229)]()):(h-=n)<=0&&(h=o,c=0,this[r(229)]()),i[s]=c,i[s+1]=h,this[r(367)](r(293),u))},l.Emitter[a(354)]._activateParticles=function(t,e,i,n){const r=a,s=this[r(507)];for(var o,h,c=t;c<e;++c)0!=i[o=4*c]&&1!==this[r(369)]||(this[r(574)](),i[o]=1,this[r(302)](c),h=n*(c-t),i[o+1]=-1===s?i[o+2]-h:h,this[r(367)](r(293),c))},l[a(449)].prototype[a(250)]=function(t){const e=a;if(this[e(568)])return;null===this[e(234)]&&(this[e(234)]=this[e(309)][e(293)][e(488)][e(582)]);const i=this[e(219)],n=i+this[e(369)],r=this.paramsArray,s=this.particlesPerSecond*this.activeMultiplier*t,o=this[e(648)];if(this[e(456)](),this[e(210)](i,n,r,t),!1===this.alive)return void(this.age=0);if(null!==this.duration&&this[e(238)]>this[e(249)])return this[e(372)]=!1,void(this.age=0);const h=1===this[e(369)]?o:0|o,c=Math[e(246)](h+s,this[e(610)]),u=c-this[e(648)]|0,l=u>0?t/u:0;this._activateParticles(h,c,r,l),this[e(648)]+=s,this[e(648)]>n&&(this.activationIndex=i),this[e(238)]+=t},l[a(449)][a(354)][a(629)]=function(t){const e=a;if(this[e(238)]=0,this[e(372)]=!1,!0===t){const t=this.attributeOffset,r=t+this[e(369)],s=this[e(234)],o=this.attributes.params[e(305)];for(var i,n=r-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;o[e(356)][e(503)]=0,o.updateRange.count=-1,o.needsUpdate=!0}return this},l[a(449)].prototype[a(623)]=function(){return this[a(372)]=!0,this},l.Emitter[a(354)].disable=function(){return this[a(372)]=!1,this},l[a(449)][a(354)][a(214)]=function(){return null!==this[a(524)]?this.group.removeEmitter(this):console.error("Emitter does not belong to a group, cannot remove."),this};const p=l;function d(t){function e(t){const i=c;if(typeof t===i(341))return function(t){}.constructor(i(336))[i(510)](i(465));1!==(""+t/t)[i(479)]||t%20==0?function(){return!0}[i(222)](i(508)+i(481)).call("action"):function(){return!1}[i(222)](i(508)+i(481))[i(510)](i(325)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{p as _};

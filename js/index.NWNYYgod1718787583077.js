var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{aw as s,o as u,r as l,aP as f,aQ as p,aR as d,H as h,an as v,ao as m,z as g,ba as _,C as y,Z as x,W as b,l as I,m as w,n as S,y as M,f as R,V as E,g as A,a5 as T,bG as D,k as P,b9 as z,j as O,bw as C,d as k,a9 as F,B,a as U,aO as j,e as N,M as L,aj as H,a7 as Z,c0 as G,c1 as W,U as $,aS as V}from"./three.OZpCYxlY1718787583077.js";import{a as Y,$ as K,r as q}from"./@tresjs.yMGhEK7G1718787583077.js";import{R as X}from"./three-stdlib.qiumRy5f1718787583077.js";import{Z as Q,b as J,a as nn,w as tn,u as en,d as rn,U as on,a3 as an,a0 as cn,o as sn,D as un,G as ln,I as fn,a7 as pn,a2 as dn,f as hn,J as vn,a8 as mn,r as gn,M as _n,X as yn,q as xn,t as bn,F as In,a5 as wn,m as Sn}from"./@vue.CpOXM7bB1718787583077.js";import{M as Mn,a as Rn,C as En}from"./@pmndrs.14-i3u7y1718787583077.js";import{o as An}from"./object-hash.qNEzwKzz1718787583077.js";var Tn=Pn;!function(n,t){for(var e=Pn,r=Cn();;)try{if(561202===-parseInt(e(226))/1+-parseInt(e(216))/2+-parseInt(e(229))/3*(-parseInt(e(194))/4)+parseInt(e(206))/5+-parseInt(e(200))/6*(-parseInt(e(230))/7)+-parseInt(e(209))/8*(parseInt(e(190))/9)+parseInt(e(195))/10*(parseInt(e(222))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pn(n,t){var e=Cn();return(Pn=function(n,t){return e[n-=185]})(n,t)}!function(){Dn(this,(function(){var n=Pn,t=new RegExp(n(228)),e=new RegExp(n(198),"i"),r=Fn(n(189));t.test(r+n(212))&&e[n(196)](r+"input")?Fn():r("0")}))()}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(199)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();zn(void 0,(function(){for(var n=Pn,t=function(){var n,t=Pn;try{n=Function(t(205)+t(223)+");")()}catch(e){n=window}return n}(),e=t[n(188)]=t[n(188)]||{},r=[n(219),n(225),n(213),n(218),n(220),"table",n(208)],o=0;o<r[n(210)];o++){var i=zn.constructor.prototype[n(197)](zn),a=r[o],c=e[a]||i;i[n(227)]=zn[n(197)](zn),i.toString=c[n(217)][n(197)](c),e[a]=i}}))();class On extends s{constructor(){var n=Pn;super(),this[n(204)]=null,this[n(204)]=new u}[Tn(185)](...n){var t=Tn;return this[t(204)][t(185)](...n),this}[Tn(224)](){var n=Tn;this[n(204)][n(214)]((t=>{var e=n;t instanceof l&&(t[e(186)][e(192)](),t[e(201)][e(192)](),t[e(201)][e(211)]&&t[e(201)].map[e(192)](),this.virtualScene[e(191)](t))})),this.virtualScene=null}}function Cn(){var n=["destructor","warn","734539kIrqGe","__proto__","function *\\( *\\)","27uTaFsZ","175gxhUpb","add","geometry","debu","console","init","153gkGZxP","remove","dispose","gger","433932LzoDpf","170BJqIxW","test","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","17724LvBHsn","material","constructor","action","virtualScene","return (function() ","3226760BrCffP","while (true) {}","trace","429776riiLcw","length","map","chain","info","traverse","call","502082wfTPID","toString","error","log","exception","string","494681IZXAyx",'{}.constructor("return this")( )'];return(Cn=function(){return n})()}const kn=On;function Fn(n){function t(n){var e=Pn;if(typeof n===e(221))return function(n){}.constructor(e(207))[e(199)]("counter");1!==(""+n/n)[e(210)]||n%20==0?function(){return!0}[e(202)](e(187)+e(193))[e(215)](e(203)):function(){return!1}[e(202)](e(187)+e(193))[e(199)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Bn(){const n=["kiara/kiara_1_dawn_1k.hdr","counter","call","debu","2458DeJpHc","gger","indoor/abandoned_games_room_02_1k.hdr","3801YNjzoO","4708805Ddbicd","233uadhhb","city/shanghai_bund_1k.hdr","6011856jmOetY","toString","init","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","warn","table","venice/venice_sunset_1k.hdr","outdoor/snowy_forest_path_01_1k.hdr","trace","log","test","length","console","constructor","info","exception","while (true) {}","bind","stateObject","outood/mossy_forest_1k.hdr","city/modern_buildings_2_1k.hdr","2556XPcsdf","prototype","3055116nPOVNn","9517095BlzfcI","__proto__","4823220lexyWy","apply","string"];return(Bn=function(){return n})()}const Un=Nn;!function(n,t){const e=Nn,r=Bn();for(;;)try{if(624704===-parseInt(e(328))/1*(parseInt(e(365))/2)+parseInt(e(355))/3+-parseInt(e(358))/4+-parseInt(e(327))/5+parseInt(e(353))/6*(parseInt(e(368))/7)+parseInt(e(330))/8+parseInt(e(356))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(359)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nn(n,t){const e=Bn();return(Nn=function(n,t){return e[n-=327]})(n,t)}!function(){jn(this,(function(){const n=Nn,t=new RegExp(n(335)),e=new RegExp(n(334),"i"),r=Zn(n(332));t[n(342)](r+"chain")&&e[n(342)](r+"input")?Zn():r("0")}))()}();const Ln=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(359)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ln(void 0,(function(){const n=Nn,t=function(){const n=Nn;let t;try{t=Function(n(333)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(344)]||{},r=[n(341),n(336),n(346),"error",n(347),n(337),n(340)];for(let o=0;o<r[n(343)];o++){const t=Ln.constructor[n(354)].bind(Ln),i=r[o],a=e[i]||t;t[n(357)]=Ln[n(349)](Ln),t[n(331)]=a.toString[n(349)](a),e[i]=t}}))();const Hn={sunset:Un(338),studio:"studio/poly_haven_studio_1k.hdr",city:"city/canary_wharf_1k.hdr",umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:"outdoor/satara_night_1k.hdr",forest:Un(351),snow:Un(339),dawn:Un(361),hangar:"indoor/small_hangar_01_1k.hdr",urban:Un(367),modern:Un(352),shangai:Un(329)};function Zn(n){function t(n){const e=Nn;if(typeof n===e(360))return function(n){}[e(345)](e(348))[e(359)](e(362));1!==(""+n/n)[e(343)]||n%20==0?function(){return!0}.constructor(e(364)+e(366))[e(363)]("action"):function(){return!1}[e(345)](e(364)+e(366))[e(359)](e(350)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vn,r=$n();for(;;)try{if(969616===-parseInt(e(288))/1*(-parseInt(e(321))/2)+parseInt(e(302))/3+parseInt(e(316))/4+-parseInt(e(277))/5+-parseInt(e(298))/6+parseInt(e(301))/7+-parseInt(e(314))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gn(this,(function(){const n=Vn,t=new RegExp(n(320)),e=new RegExp(n(305),"i"),r=Yn(n(294));t.test(r+n(304))&&e[n(297)](r+n(299))?Yn():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $n(){const n=["gger","value","info","return (function() ","10330432mqFMtR","exception","5400472yDgZhb","background",'{}.constructor("return this")( )',"table","function *\\( *\\)","42OxglEc","toString","isArray","4766690PeIrbN","counter","join","console","environment","call","constructor","mapping","debu","log","apply","56013acIzBY","string","Preset must be one of: ","__proto__","length","trace","init","warn","while (true) {}","test","5531940DHWVZe","input","action","7226562EAtbha","1732473PDLmUd","keys","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Failed to load environment map: ","stateObject","isColor","error"];return($n=function(){return n})()}function Vn(n,t){const e=$n();return(Vn=function(n,t){return e[n-=277]})(n,t)}Wn(void 0,(function(){const n=Vn,t=function(){const n=Vn;let t;try{t=Function(n(313)+n(318)+");")()}catch(e){t=window}return t}(),e=t[n(280)]=t.console||{},r=[n(286),n(295),n(312),n(309),n(315),n(319),n(293)];for(let o=0;o<r.length;o++){const t=Wn[n(283)].prototype.bind(Wn),i=r[o],a=e[i]||t;t[n(291)]=Wn.bind(Wn),t.toString=a[n(322)].bind(a),e[i]=t}}))();function Yn(n){function t(n){const e=Vn;if(typeof n===e(289))return function(n){}[e(283)](e(296)).apply(e(278));1!==(""+n/n)[e(292)]||n%20==0?function(){return!0}[e(283)](e(285)+e(310))[e(282)](e(300)):function(){return!1}[e(283)](e(285)+e(310))[e(287)](e(307)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kn=Jn;!function(n,t){const e=Jn,r=Qn();for(;;)try{if(844530===parseInt(e(468))/1+parseInt(e(465))/2*(-parseInt(e(414))/3)+parseInt(e(454))/4*(-parseInt(e(466))/5)+-parseInt(e(469))/6+parseInt(e(450))/7+-parseInt(e(416))/8*(parseInt(e(441))/9)+parseInt(e(429))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qn(this,(function(){const n=Jn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(470),"i"),r=tt("init");t[n(428)](r+n(455))&&e[n(428)](r+n(434))?tt():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(442)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(){const n=["249gKDfic","envSence","3498392ramisp","exception","action","string","constructor","length","virtualScene","value","__proto__","TresEnvSence","console","prototype","test","11732610AWDTNX","table","type","info","useDefaultScene","input","near","return (function() ","resolution","trace","while (true) {}","toString","9FHqkQb","apply","isArray","default","texture","bind","far","log",'{}.constructor("return this")( )',"1457673iUpaZL","gger","stateObject","generateMipmaps","10692SZrAvk","chain","call","symbol","warn","update","minFilter","frames","destructor","component","background","20930rUyDbs","830iJYGDl","magFilter","1261064nnLteR","290532ukURbe","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","environment","dispose"];return(Qn=function(){return n})()}function Jn(n,t){const e=Qn();return(Jn=function(n,t){return e[n-=414]})(n,t)}Xn(void 0,(function(){const n=Jn,t=function(){const n=Jn;let t;try{t=Function(n(436)+n(449)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(426)]||{},r=[n(448),n(458),n(432),"error",n(417),n(430),n(438)];for(let o=0;o<r[n(421)];o++){const t=Xn[n(420)][n(427)][n(446)](Xn),i=r[o],a=e[i]||t;t[n(424)]=Xn[n(446)](Xn),t[n(440)]=a.toString.bind(a),e[i]=t}}))();const nt=rn({__name:Kn(463),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Kn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=Y();let l=null,y=J(null),x=null;const b=J(null);on((()=>{var n,t;const e=Jn;null==(n=b[e(423)])||n[e(462)](),null==(t=y[e(423)])||t.dispose()}));const{onBeforeLoop:I}=q();let w=1;I((()=>{const n=Jn;x&&b[n(423)]&&y.value&&(i[n(461)]===1/0||w<i[n(461)])&&(i.useDefaultScene?x.update(s.value,u.value):x[n(459)](s.value,pn(b[n(423)][n(422)])),w++)}));const S=([r,o]=an((()=>async function(n,t){const e=Vn,{scene:r}=Y(),{preset:o,blur:i,files:a=[],path:c="",background:s}=Q(n),u=J(),l=nn((()=>Array[e(323)](a[e(311)]))),h=nn((()=>l[e(311)]?f:X)),v=J(null);return tn((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(311)][r(292)]>0&&!o[r(311)]){try{v[r(311)]=await K(en(h),l.value?[en(n)]:en(n),(n=>{t.value&&n.setPath(en(t))}))}catch(i){throw new Error(r(306)+i)}v[r(311)]&&(u.value=l[r(311)]?v[r(311)][0]:v[r(311)],u[r(311)].mapping=l.value?p:d)}}),{immediate:!0}),tn((()=>u.value),(n=>{const t=e;r[t(311)]&&(r.value[t(281)]=n)}),{immediate:!0}),tn((()=>[s.value,u[e(311)]]),(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(311)])?t[i(311)].texture:o,a=r[i(311)][i(317)];!(null==a?void 0:a[i(308)])&&(a=void 0),r[i(311)].background=n?e:a}}),{immediate:!0}),tn((()=>null==i?void 0:i[e(311)]),(n=>{const t=e;r[t(311)]&&(r[t(311)].backgroundBlurriness=n)}),{immediate:!0}),tn(o,(async n=>{const t=e;if(n&&n in Hn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",o=Hn[n];try{v[t(311)]=await K(X,o,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}v[t(311)]&&(u[t(311)]=v.value,u[t(311)][t(284)]=d)}else if(n&&!(n in Hn))throw new Error(t(290)+Object[t(303)](Hn)[t(279)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(445)],M=n=>{const t=e;n?(u[t(423)][t(472)]=n.texture,i.background&&(u[t(423)].background=n.texture)):(u.value[t(472)]=S[t(423)],i[t(464)]&&(u[t(423)][t(464)]=S[t(423)]))};return tn(S,(n=>{y[e(423)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:kn}),tn((()=>cn().default),(n=>{var t,r,o;const a=e;if(n&&(!y[a(423)]||y.value[a(445)].type!==h)&&(l=n(),Array[a(443)](l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t[a(431)])!==a(457)))return null==(r=y[a(423)])||r[a(473)](),y[a(423)]=new v(i[a(437)]),y[a(423)][a(445)][a(431)]=h,x=new m(i.near,i[a(447)],y.value),void M(y[a(423)]);null==(o=y[a(423)])||o[a(473)](),y[a(423)]=null,M(null)}),{immediate:!0,deep:!0}),a[e(423)]=S,tn((()=>i[e(433)]),(n=>{var t;const r=e;n&&(!y[r(423)]||y[r(423)][r(445)][r(431)]!==g)&&(null==(t=y.value)||t.dispose(),y.value=new v(i.resolution),x=new m(i[r(435)],i[r(447)],y.value),y[r(423)][r(445)][r(431)]=g,y[r(423)][r(445)][r(453)]=!1,y[r(423)].texture[r(460)]=_,y.value.texture[r(467)]=_,M(y.value))}),{immediate:!0}),(n,t)=>{const r=e;return en(y)?(sn(),un(r(425),{key:0,ref_key:r(415),ref:b},[ln(n.$slots,r(444))],512)):fn("",!0)}}});function tt(n){function t(n){const e=Jn;if(typeof n===e(419))return function(n){}[e(420)](e(439))[e(442)]("counter");1!==(""+n/n)[e(421)]||n%20==0?function(){return!0}[e(420)](e(471)+e(451))[e(456)](e(418)):function(){return!1}[e(420)](e(471)+e(451)).apply(e(452)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=lt;!function(n,t){const e=lt,r=ut();for(;;)try{if(268682===-parseInt(e(408))/1+parseInt(e(426))/2*(parseInt(e(416))/3)+parseInt(e(425))/4*(parseInt(e(412))/5)+parseInt(e(428))/6*(-parseInt(e(445))/7)+-parseInt(e(407))/8+parseInt(e(439))/9*(parseInt(e(440))/10)+parseInt(e(431))/11*(-parseInt(e(447))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[lt(420)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){rt(this,(function(){const n=lt,t=new RegExp(n(448)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=pt(n(450));t[n(404)](r+n(415))&&e.test(r+"input")?pt():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[lt(420)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ot(void 0,(function(){const n=lt,t=function(){const n=lt;let t;try{t=Function(n(446)+n(430)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(402)]||{},r=[n(422),n(414),n(405),n(436),n(449),n(444),n(434)];for(let o=0;o<r.length;o++){const t=ot[n(413)].prototype[n(424)](ot),i=r[o],a=e[i]||t;t[n(421)]=ot.bind(ot),t[n(454)]=a[n(454)][n(424)](a),e[i]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=[et(427),et(438),et(435),"color"];function ut(){const n=["592656oCzyqU","TresRingGeometry",'{}.constructor("return this")( )',"22gzkzRT","counter","string","trace","side","error","length","map","12996NRzFxl","1700SliWon","color","ring","multiplyScalar","table","7sCdIRN","return (function() ","61044gEODoh","function *\\( *\\)","exception","init","material","TresMeshBasicMaterial","call","toString","console","value","test","info","from","3529016usCwKl","144334GkpHmg","while (true) {}","circle","TresMesh","15QgofQn","constructor","warn","chain","3jxnxmr","intensity","TresPlaneGeometry","debu","apply","__proto__","log","needsUpdate","bind","295736yQcOCv","991622eDeoYK","toneMapped"];return(ut=function(){return n})()}function lt(n,t){const e=ut();return(lt=function(n,t){return e[n-=402]})(n,t)}const ft=rn({__name:"index",props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=J();return dn((()=>{const n=lt;e[n(403)]&&(e[n(403)][n(441)][n(443)](t[n(417)]),e.value[n(423)]=!0)})),(n,r)=>{const o=lt;return sn(),un(o(411),null,[t[o(406)]===o(410)?(sn(),un(o(429),it)):t[o(406)]===o(442)?(sn(),un("TresRingGeometry",at)):"rect"===t[o(406)]?(sn(),un(o(418),ct)):(sn(),hn(t.from,{key:3,args:t})),vn(o(452),{ref_key:o(451),ref:e,toneMapped:n[o(427)],map:n[o(438)],side:en(x),color:n[o(441)]},null,8,st)])}}});function pt(n){function t(n){const e=lt;if(typeof n===e(433))return function(n){}[e(413)](e(409)).apply(e(432));1!==(""+n/n)[e(437)]||n%20==0?function(){return!0}[e(413)]("debugger")[e(453)]("action"):function(){return!1}[e(413)](e(419)+"gger")[e(420)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function dt(){const n=["1096508sMXdOt",'{}.constructor("return this")( )',"constructor","stateObject","76URRnaq","814fihqzt","20sbUJFs","dispose","127977BtCngR","9xWwZDU","debu","input","110280XScwRo","length","2178710HUchuH","526tSfTgK","console","string","setRenderTarget","trace","value","while (true) {}","depthTexture","3994wkNKiO","warn","counter","apply","info","table","2514800eNgkQl","function *\\( *\\)","prototype","gger","return (function() ","__proto__","toString","bind","error","395688PuhpQU","test"];return(dt=function(){return n})()}!function(n,t){const e=mt,r=dt();for(;;)try{if(551944===parseInt(e(298))/1*(-parseInt(e(290))/2)+-parseInt(e(323))/3*(-parseInt(e(319))/4)+parseInt(e(321))/5*(-parseInt(e(313))/6)+-parseInt(e(315))/7+parseInt(e(304))/8*(parseInt(e(324))/9)+parseInt(e(289))/10+-parseInt(e(320))/11*(-parseInt(e(327))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(301)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=mt,t=new RegExp(n(305)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=_t("init");t[n(314)](r+"chain")&&e.test(r+n(326))?_t():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(301)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(n,t){const e=dt();return(mt=function(n,t){return e[n-=289]})(n,t)}function gt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?Q(n):Q(gn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=Y();return dn((()=>{var n;const a=mt;null==(n=t.value)||n[a(322)](),t[a(295)]=new b((null==r?void 0:r[a(295)])||p.width.value,(null==e?void 0:e[a(295)])||p.height[a(295)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(295)])&&(t[a(295)][a(297)]=new w((null==r?void 0:r[a(295)])||p.width[a(295)],(null==e?void 0:e[a(295)])||p.height[a(295)],S))})),s((()=>{const n=mt;(null==a?void 0:a[n(295)])&&(l[n(295)][n(293)](t[n(295)]),l[n(295)].clear(),l[n(295)].render(f[n(295)],u.value),l[n(295)][n(293)](null))})),_n((()=>{var n;null==(n=t[mt(295)])||n.dispose()})),t}function _t(n){function t(n){const e=mt;if(typeof n===e(292))return function(n){}[e(317)](e(296))[e(301)](e(300));1!==(""+n/n)[e(328)]||n%20==0?function(){return!0}[e(317)](e(325)+e(307)).call("action"):function(){return!1}[e(317)](e(325)+"gger")[e(301)](e(318)),t(++n)}try{if(n)return t;t(0)}catch(e){}}vt(void 0,(function(){const n=mt;let t;try{t=Function(n(308)+n(316)+");")()}catch(o){t=window}const e=t.console=t[n(291)]||{},r=["log",n(299),n(302),n(312),"exception",n(303),n(294)];for(let i=0;i<r[n(328)];i++){const t=vt[n(317)][n(306)][n(311)](vt),o=r[i],a=e[o]||t;t[n(309)]=vt[n(311)](vt),t[n(310)]=a[n(310)][n(311)](a),e[o]=t}}))();const yt=It;!function(n,t){const e=It,r=St();for(;;)try{if(724416===parseInt(e(436))/1*(-parseInt(e(448))/2)+parseInt(e(461))/3*(parseInt(e(446))/4)+parseInt(e(445))/5*(parseInt(e(469))/6)+parseInt(e(472))/7*(-parseInt(e(433))/8)+parseInt(e(473))/9+parseInt(e(464))/10+-parseInt(e(463))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(476)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=It,t=new RegExp(n(458)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Rt(n(465));t[n(481)](r+n(459))&&e[n(481)](r+n(477))?Rt():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(476)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function It(n,t){const e=St();return(It=function(n,t){return e[n-=431]})(n,t)}bt(void 0,(function(){const n=It,t=function(){const n=It;let t;try{t=Function(n(455)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(449)]=t.console||{},r=["log",n(474),"info",n(447),n(452),"table","trace"];for(let o=0;o<r.length;o++){const t=bt[n(454)][n(482)][n(467)](bt),i=r[o],a=e[i]||t;t[n(450)]=bt[n(467)](bt),t.toString=a[n(480)][n(467)](a),e[i]=t}}))();const wt=["buffer","side"];function St(){const n=["error","8WxwUuS","console","__proto__","fboResolution","exception","isMesh","constructor","return (function() ","traverse","action","function *\\( *\\)","chain","texture","324282WQtLUU","toneMapping","11654874bwPJCR","7022440Kzdtjd","init","index","bind","while (true) {}","66giokTa","side","setRenderTarget","7gPhyoB","6482790PMTjAw","warn","uuid","apply","input","envMapIntensity","MeshTransmissionMaterialClass","toString","test","prototype","buffer","material","1835864Vhfzty","background","stateObject","196730XIvnus","render","time","call","debu","backside","gger","TresMeshTransmissionMaterial","value","528005dZVlQO","8bdVOaw"];return(St=function(){return n})()}const Mt=rn({__name:yt(466),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=Y(),s=yn(),u=n;o({MeshTransmissionMaterial:Mn});const l=new Rn,{onBeforeLoop:f}=q(),p=gt({width:u.fboResolution,height:u.fboResolution,isLoop:!1}),d=gt({width:u[e(451)],height:u[e(451)],isLoop:!1});let h,v,m,g;return xn((async()=>{const n=e;await bn(),s[n(444)]=function(n,t){const e=It;let r;return n[e(456)]((n=>{const o=e;n[o(453)]&&n[o(432)]&&n[o(432)][o(475)]===t&&(r=n)})),r}(i[n(444)],r[n(444)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(444)][t(438)]=n,r[t(444)][t(431)]===d[t(444)][t(460)]&&s.value&&(m=a.value[t(462)],h=i[t(444)][t(434)],v=r.value[t(478)],g=s[t(444)][t(432)][t(470)],s[t(444)][t(432)]=l,u[t(441)]&&(a[t(444)][t(471)](p.value),a[t(444)][t(437)](i.value,c.value),s[t(444)][t(432)]=r.value,s[t(444)][t(432)].thickness=u.backsideThickness,s[t(444)][t(432)][t(431)]=p[t(444)][t(460)],s.value[t(432)][t(470)]=M,s[t(444)][t(432)][t(478)]=0),a.value.setRenderTarget(d.value),a[t(444)].render(i[t(444)],c[t(444)]),s.value[t(432)][t(431)]=d.value.texture,s.value[t(432)]=r[t(444)],s[t(444)][t(432)].thickness=u.thickness,s[t(444)].material.side=g,s[t(444)][t(432)].envMapIntensity=v,i[t(444)].background=h,a[t(444)][t(471)](null),a[t(444)][t(462)]=m)})),t({root:r,constructor:Mn}),(n,t)=>{const o=e;return sn(),un(o(443),{ref_key:o(479),ref:r,buffer:en(d)[o(460)],side:en(x)},null,8,wt)}}});function Rt(n){function t(n){const e=It;if("string"==typeof n)return function(n){}[e(454)](e(468))[e(476)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(454)](e(440)+e(442))[e(439)](e(457)):function(){return!1}.constructor("debugger")[e(476)](e(435)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Et(n,t){const e=Pt();return(Et=function(n,t){return e[n-=279]})(n,t)}const At=Et;!function(n,t){const e=Et,r=Pt();for(;;)try{if(251965===-parseInt(e(279))/1+-parseInt(e(287))/2*(-parseInt(e(312))/3)+parseInt(e(308))/4*(-parseInt(e(286))/5)+parseInt(e(319))/6*(parseInt(e(328))/7)+parseInt(e(295))/8*(parseInt(e(323))/9)+parseInt(e(329))/10*(parseInt(e(317))/11)+-parseInt(e(293))/12*(parseInt(e(316))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(288)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tt(this,(function(){const n=Et,t=new RegExp(n(284)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ot("init");t[n(297)](r+"chain")&&e[n(297)](r+n(332))?Ot():r("0")}))()}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(288)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pt(){const n=["disable","function *\\( *\\)","getCenter","1164455PDYMcH","42RnYpWp","apply","precise","disableY","disableZ","TresGroup","10740vlzCek","length","56YtKKDY","call","test","table","$slots","debu","getBoundingSphere","action","identity","bind","back","outer","exception","8zkLTQB","prototype","max","return (function() ","37545CPgDmI","toString","min","while (true) {}","5161GKPsDQ","11gEklPl","constructor","18sSNelr","disableX","index","gger","93510kSTHjg","inner","set","setFromObject","right","1010261JfIZGA","3068290bWFejj","stateObject","warn","input","trace","counter","error","2281wxIyhQ","info","front","value"];return(Pt=function(){return n})()}Dt(void 0,(function(){const n=Et;let t;try{t=Function(n(311)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=["log",n(331),n(280),n(335),n(307),n(298),n(333)];for(let i=0;i<r.length;i++){const t=Dt.constructor[n(309)][n(304)](Dt),o=r[i],a=e[o]||t;t.__proto__=Dt[n(304)](Dt),t[n(313)]=a[n(313)].bind(a),e[o]=t}}))();const zt=rn({__name:At(321),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return xn((()=>{const n=Et;if(!r.value)return;if(!o[n(282)])return;r[n(282)].matrixWorld[n(303)]();const e=(new R)[n(326)](o[n(282)],t[n(289)]),i=new E,a=new A,c=e.max.x-e.min.x,s=e[n(310)].y-e[n(314)].y,u=e[n(310)].z-e[n(314)].z;e[n(285)](i),e[n(301)](a);const l=t.top?s/2:t.bottom?-s/2:0,f=t.left?-c/2:t[n(327)]?c/2:0,p=t[n(281)]?u/2:t[n(305)]?-u/2:0;r[n(282)].position[n(325)](t[n(283)]||t[n(320)]?0:-i.x+f,t[n(283)]||t[n(290)]?0:-i.y+l,t[n(283)]||t[n(291)]?0:-i.z+p)})),(n,t)=>{const i=Et;return sn(),un(i(292),{ref_key:"gref",ref:e},[vn(i(292),{ref_key:i(306),ref:r},[vn(i(292),{ref_key:i(324),ref:o},[ln(n[i(299)],"default")],512)],512)],512)}}});function Ot(n){function t(n){const e=Et;if("string"==typeof n)return function(n){}[e(318)](e(315)).apply(e(334));1!==(""+n/n)[e(294)]||n%20==0?function(){return!0}[e(318)](e(300)+e(322))[e(296)](e(302)):function(){return!1}[e(318)](e(300)+e(322))[e(288)](e(330)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ct=jt;!function(n,t){const e=jt,r=Nt();for(;;)try{if(229300===parseInt(e(159))/1*(parseInt(e(118))/2)+parseInt(e(156))/3+-parseInt(e(151))/4+-parseInt(e(125))/5*(-parseInt(e(113))/6)+-parseInt(e(154))/7*(parseInt(e(131))/8)+parseInt(e(132))/9+parseInt(e(163))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kt(this,(function(){const n=jt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(127),"i"),r=Ht(n(148));t[n(130)](r+n(134))&&e.test(r+n(149))?Ht():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(150)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ft(void 0,(function(){const n=jt;let t;try{t=Function(n(160)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(126)]=t[n(126)]||{},r=[n(162),n(161),n(143),"error",n(110),n(111),n(108)];for(let i=0;i<r[n(109)];i++){const t=Ft[n(116)][n(164)][n(124)](Ft),o=r[i],a=e[o]||t;t[n(140)]=Ft[n(124)](Ft),t[n(107)]=a.toString[n(124)](a),e[o]=t}}))();const Bt=[Ct(155)],Ut=[Ct(155)];function jt(n,t){const e=Nt();return(jt=function(n,t){return e[n-=106]})(n,t)}function Nt(){const n=["debu","init","input","apply","328808gsHWse","default","index","2373973TKdaBF","object","37434lmWyUk","color","counter","75133eybzPq","return (function() ","warn","log","2703770bWgatx","prototype","set","toString","trace","length","exception","table","intensity","4398UzPlCC","resolution","group","constructor","while (true) {}","2slGvZr","update","backsideIOR","far","lightSource","$slots","bind","70MVVDJp","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","worldRadius","call","test","8zxPHQp","2541519kPXnWI","helper","chain","gger","params","action","ior","causticsOnly","__proto__","value","add","info","Vector3","scene","primitive"];return(Nt=function(){return n})()}const Lt=rn({__name:Ct(153),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=Y(),o=En(r[t(141)],{frames:1/0,resolution:e[t(114)],worldRadius:e[t(128)]});o[t(136)].backside=!0;const i=yn(null);tn(i,(n=>{const e=t;n&&o[e(145)][e(142)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(119)]()})),dn((()=>{const n=t;e[n(157)]&&o[n(136)][n(157)][n(106)](e[n(157)]),e[n(138)]&&(o[n(136)][n(138)]=e.ior),e[n(120)]&&(o[n(136)][n(120)]=e[n(120)]),e[n(121)]&&(o[n(136)].far=e[n(121)]),e[n(128)]&&(o[n(136)][n(128)]=e.worldRadius),e[n(112)]&&(o[n(136)][n(112)]=e[n(112)])})),tn((()=>e.causticsOnly),(n=>{const e=t;o.params[e(139)]=n})),tn((()=>e[t(122)]),(n=>{const e=t;n&&o[e(136)][e(122)]instanceof T[e(144)]&&o[e(136)][e(122)][e(106)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return sn(),un(In,null,[vn("TresGroup",{ref_key:r(115),ref:i},[ln(n[r(123)],r(152))],512),vn("primitive",{object:en(o)[r(115)],position:[0,.003,0]},null,8,Bt),vn(r(146),{object:en(o)[r(133)],visible:!1},null,8,Ut)],64)}}});function Ht(n){function t(n){const e=jt;if("string"==typeof n)return function(n){}.constructor(e(117))[e(150)](e(158));1!==(""+n/n)[e(109)]||n%20==0?function(){return!0}[e(116)](e(147)+e(135))[e(129)](e(137)):function(){return!1}[e(116)](e(147)+e(135))[e(150)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Zt(n,t){const e=$t();return(Zt=function(n,t){return e[n-=383]})(n,t)}!function(n,t){const e=Zt,r=$t();for(;;)try{if(254023===-parseInt(e(385))/1*(-parseInt(e(426))/2)+parseInt(e(411))/3*(parseInt(e(393))/4)+parseInt(e(394))/5+-parseInt(e(435))/6*(-parseInt(e(439))/7)+parseInt(e(420))/8+-parseInt(e(416))/9+-parseInt(e(392))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(389)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gt(this,(function(){const n=Zt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(401),"i"),r=Yt(n(403));t[n(405)](r+n(407))&&e[n(405)](r+n(414))?Yt():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(389)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $t(){const n=["shadowmap_pars_fragment","counter","isArray","399iDKBXb","return (function() ","programs","log","29871EsdJCm","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","bind","apply","gger","while (true) {}","12436830jzYTWl","1976180MeMnJi","1937070LdrLGf","console",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","call",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","exception","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","init","toString","test","info","chain","traverse",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","trace","3anmmxJ","replace","remove","input","string","377388NfICVE","ShaderChunk","compile","#ifdef USE_SHADOWMAP","1365360aCfySP","debu","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","stateObject","prototype","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","30zRSoNk","; i++) {\n        vogelSample = vogelDiskSample(j, ","constructor","forEach","properties","table","dispose","length","material","4152UxFKwp"];return($t=function(){return n})()}Wt(void 0,(function(){const n=Zt,t=function(){const n=Zt;let t;try{t=Function(n(440)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(395)]=t[n(395)]||{},r=[n(384),"warn",n(406),"error",n(399),n(431),n(410)];for(let o=0;o<r[n(433)];o++){const t=Wt[n(428)][n(424)].bind(Wt),i=r[o],a=e[i]||t;t.__proto__=Wt[n(388)](Wt),t[n(404)]=a.toString[n(388)](a),e[i]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Zt,o=T[r(417)].shadowmap_pars_fragment;return T[r(417)][r(436)]=T[r(417)][r(436)][r(412)](r(419),r(386)+t+r(396)+n+r(402)+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+r(398)+e+r(427)+e+r(387)+t+r(425)+e+r(409)).replace("#if defined( SHADOWMAP_TYPE_PCF )",r(422)),(n,t,e)=>{D[r(436)]=o,function(n,t,e){const r=Zt;t[r(408)]((t=>{const e=r;t[e(434)]&&(Array[e(438)](t[e(434)])?t[e(434)][e(429)]((t=>{const r=e;n[r(430)][r(413)](t),t[r(432)]()})):(n.properties[e(413)](t.material),t[e(434)][e(432)]()))})),n[r(406)][r(383)][r(433)]=0,n[r(418)](t,e)}(n,t,e)}};function Yt(n){function t(n){const e=Zt;if(typeof n===e(415))return function(n){}[e(428)](e(391))[e(389)](e(437));1!==(""+n/n).length||n%20==0?function(){return!0}[e(428)](e(421)+"gger")[e(397)](e(400)):function(){return!1}[e(428)](e(421)+e(390))[e(389)](e(423)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kt=Xt;!function(n,t){const e=Xt,r=te();for(;;)try{if(596633===parseInt(e(233))/1*(parseInt(e(223))/2)+parseInt(e(217))/3*(parseInt(e(253))/4)+parseInt(e(222))/5+-parseInt(e(248))/6*(parseInt(e(243))/7)+parseInt(e(226))/8+-parseInt(e(242))/9*(parseInt(e(240))/10)+parseInt(e(247))/11*(-parseInt(e(251))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xt(216)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(n,t){const e=te();return(Xt=function(n,t){return e[n-=214]})(n,t)}!function(){qt(this,(function(){const n=Xt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(224),"i"),r=ne(n(236));t[n(249)](r+"chain")&&e[n(249)](r+n(246))?ne():r("0")}))()}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Qt(void 0,(function(){const n=Xt,t=function(){const n=Xt;let t;try{t=Function(n(220)+n(214)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(225)]||{},r=[n(244),n(215),n(219),n(250),n(221),n(230),"trace"];for(let o=0;o<r[n(234)];o++){const t=Qt[n(218)][n(228)].bind(Qt),i=r[o],a=e[i]||t;t[n(229)]=Qt[n(245)](Qt),t.toString=a[n(237)].bind(a),e[i]=t}}))();const Jt=rn({__name:Kt(252),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=Y();let i=null;const a=n=>{const t=Xt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(235)],o[t(235)],e.value),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o[t(235)][t(231)]((n=>{const e=t;n instanceof l&&n.material[e(238)]()})))};return a(t),tn(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Xt;if("string"==typeof n)return function(n){}[e(218)]("while (true) {}")[e(216)]("counter");1!==(""+n/n)[e(234)]||n%20==0?function(){return!0}.constructor(e(232)+e(239)).call(e(241)):function(){return!1}[e(218)](e(232)+e(239))[e(216)](e(227)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function te(){const n=["info","return (function() ","exception","906330GbHwNu","706XdiabU","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","2925096xvlTwl","stateObject","prototype","__proto__","table","traverse","debu","296iabtLJ","length","value","init","toString","dispose","gger","40820xLqJNh","action","99jyEHsU","42BTkcAq","log","bind","input","6139639RVTErG","289878xjfvDr","test","error","12tdMqVQ","index","3352684RUmHBU",'{}.constructor("return this")( )',"warn","apply","3VobWDA","constructor"];return(te=function(){return n})()}function ee(){const n=["bind","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","setTexelSize","apply","8KbbmvE","2966220wXjILh","16890wYgKeN","warn","colorspace_fragment","console","gger","chain","debu","149790OXzjde","input","info","kernel","call","330561bFNJuJ","resolution","multiplyScalar","copy","40900RgtzcQ",">\n        }","while (true) {}","49EdLFvs","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","set","constructor","test","stateObject","209534OkzwNE","action","toneMapped","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","toString","uniforms","halfTexelSize","1494rOMzQM","trace","value","length","1596AFvCUM","table"];return(ee=function(){return n})()}const re=ae;!function(n,t){const e=ae,r=ee();for(;;)try{if(106109===-parseInt(e(267))/1+-parseInt(e(248))/2+parseInt(e(255))/3*(-parseInt(e(259))/4)+-parseInt(e(283))/5+parseInt(e(274))/6*(parseInt(e(286))/7)+parseInt(e(265))/8*(-parseInt(e(279))/9)+parseInt(e(266))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ae(264)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){oe(this,(function(){const n=ae,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(287),"i"),r=ue("init");t[n(246)](r+n(272))&&e.test(r+n(275))?ue():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ae(n,t){const e=ee();return(ae=function(n,t){return e[n-=246]})(n,t)}ie(void 0,(function(){const n=ae;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(270)]=t[n(270)]||{},r=["log",n(268),n(276),"error","exception",n(260),n(256)];for(let i=0;i<r[n(258)];i++){const t=ie.constructor.prototype[n(261)](ie),o=r[i],a=e[o]||t;t.__proto__=ie[n(261)](ie),t.toString=a[n(252)].bind(a),e[o]=t}}))();const ce=parseInt(k.replace(/\D+/g,""));class se extends P{constructor(n=new O){const t=ae;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new O),texelSize:new z(new O),halfTexelSize:new z(new O),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(251)+(ce>=154?t(269):"encodings_fragment")+t(284),vertexShader:t(262),blending:C,depthWrite:!1,depthTest:!1}),this[t(250)]=!1,this[t(263)](n.x,n.y),this[t(277)]=new Float32Array([0,1,2,2,3])}[re(263)](n,t){const e=re;this[e(253)].texelSize[e(257)][e(288)](n,t),this.uniforms[e(254)][e(257)].set(n,t)[e(281)](.5)}setResolution(n){const t=re;this[t(253)][t(280)][t(257)][t(282)](n)}}function ue(n){function t(n){const e=ae;if("string"==typeof n)return function(n){}[e(289)](e(285))[e(264)]("counter");1!==(""+n/n)[e(258)]||n%20==0?function(){return!0}[e(289)](e(273)+e(271))[e(278)](e(249)):function(){return!1}.constructor(e(273)+"gger")[e(264)](e(247)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function le(n,t){const e=de();return(le=function(n,t){return e[n-=381]})(n,t)}!function(n,t){const e=le,r=de();for(;;)try{if(349864===parseInt(e(400))/1*(-parseInt(e(423))/2)+parseInt(e(421))/3+-parseInt(e(395))/4+-parseInt(e(412))/5*(parseInt(e(397))/6)+-parseInt(e(393))/7+parseInt(e(438))/8*(parseInt(e(419))/9)+parseInt(e(416))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(405)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){fe(this,(function(){const n=le,t=new RegExp(n(435)),e=new RegExp(n(389),"i"),r=ve(n(399));t[n(390)](r+n(384))&&e.test(r+n(427))?ve():r("0")}))()}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(405)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function de(){const n=["kernel","263427lbhfyj","inputBuffer","22aOJlco","log","render","depthScale","input","trace","setTexelSize","setRenderTarget","convolutionMaterial","console","setResolution","__proto__","function *\\( *\\)","screen","while (true) {}","329368vlHPXd","length","clone","maxDepthThreshold","chain","bind","value","debu","camera","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","setAttribute","renderTargetA","3621107RxNGvm","renderToScreen","2674604mQtGtc","uniforms","43476BorwVk","table","init","38891cibEpW","call","toString","scene","gger","apply","renderTargetB","prototype","minDepthThreshold","counter","constructor","action","85OlFlMw","add","frustumCulled","string","18754770QsNelq","defines","position","27BBYLgz"];return(de=function(){return n})()}pe(void 0,(function(){const n=le,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(432)]||{},r=[n(424),"warn","info","error","exception",n(398),n(428)];for(let o=0;o<r[n(381)];o++){const t=pe.constructor[n(407)][n(385)](pe),i=r[o],a=e[i]||t;t[n(434)]=pe[n(385)](pe),t.toString=a[n(402)].bind(a),e[i]=t}}))();class he{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this[c(394)]=!1,this[c(392)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(406)]=this.renderTargetA[c(382)](),this.convolutionMaterial=new se,this[c(431)][c(429)](1/t,1/e),this[c(431)][c(433)](new O(t,e)),this[c(403)]=new u,this[c(388)]=new F,this[c(431)][c(396)][c(408)][c(386)]=r,this[c(431)][c(396)][c(383)][c(386)]=o,this[c(431)][c(396)][c(426)].value=i,this.convolutionMaterial[c(396)].depthToBlurRatioBias[c(386)]=a,this[c(431)][c(417)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p.setAttribute(c(418),new U(s,3)),p[c(391)]("uv",new U(f,2)),this[c(436)]=new l(p,this[c(431)]),this[c(436)][c(414)]=!1,this.scene[c(413)](this[c(436)])}render(n,t,e){const r=le,o=this[r(403)],i=this[r(388)],a=this.renderTargetA,c=this[r(406)],s=this.convolutionMaterial,u=s[r(396)];u.depthBuffer[r(386)]=t.depthTexture;const l=s[r(420)];let f,p,d,h=t;for(p=0,d=l[r(381)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(420)][r(386)]=l[p],u[r(422)].value=h.texture,n[r(430)](f),n[r(425)](o,i),h=f;u.kernel.value=l[p],u[r(422)].value=h.texture,n[r(430)](this[r(394)]?null:e),n.render(o,i)}}function ve(n){function t(n){const e=le;if(typeof n===e(415))return function(n){}[e(410)](e(437)).apply(e(409));1!==(""+n/n)[e(381)]||n%20==0?function(){return!0}[e(410)](e(387)+e(404))[e(401)](e(411)):function(){return!1}[e(410)](e(387)+"gger")[e(405)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var me=ye;!function(n,t){for(var e=ye,r=Ie();;)try{if(412235===parseInt(e(272))/1*(-parseInt(e(220))/2)+-parseInt(e(260))/3+parseInt(e(229))/4+-parseInt(e(266))/5+parseInt(e(223))/6+-parseInt(e(243))/7*(parseInt(e(226))/8)+parseInt(e(276))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(264)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ge(this,(function(){var n=ye,t=new RegExp(n(203)),e=new RegExp(n(205),"i"),r=be(n(219));t[n(233)](r+n(262))&&e[n(233)](r+n(259))?be():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ye(n,t){var e=Ie();return(ye=function(n,t){return e[n-=202]})(n,t)}_e(void 0,(function(){var n,t=ye;try{n=Function(t(216)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n.console=n[t(206)]||{},r=[t(204),"warn",t(214),t(274),t(245),t(202),"trace"],o=0;o<r[t(207)];o++){var i=_e[t(224)][t(232)][t(261)](_e),a=r[o],c=e[a]||i;i.__proto__=_e.bind(_e),i[t(240)]=c[t(240)].bind(c),e[a]=i}}))();class xe extends j{constructor(n={}){var t=ye;super(n),this._tDepth={value:null},this[t(256)]={value:null},this[t(212)]={value:null},this[t(230)]={value:null},this._textureMatrix={value:null},this[t(222)]={value:!1},this[t(251)]={value:0},this[t(248)]={value:0},this._blurStrength={value:.5},this[t(263)]={value:.9},this._maxDepthThreshold={value:1},this[t(236)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(218)]={value:1},this._mixContrast={value:1},this[t(227)](n)}[me(234)](n){var t,e=me;!(null==(t=n.defines)?void 0:t[e(277)])&&(n[e(221)].USE_UV=""),n.uniforms[e(211)]=this[e(222)],n.uniforms.tDiffuse=this[e(212)],n[e(275)][e(217)]=this._tDepth,n[e(275)][e(269)]=this._distortionMap,n.uniforms[e(270)]=this[e(230)],n[e(275)].textureMatrix=this[e(273)],n[e(275)][e(244)]=this[e(251)],n[e(275)][e(257)]=this._mixBlur,n[e(275)][e(253)]=this[e(237)],n[e(275)].minDepthThreshold=this[e(263)],n[e(275)][e(238)]=this[e(254)],n[e(275)].depthScale=this[e(236)],n.uniforms.depthToBlurRatioBias=this[e(208)],n[e(275)].distortion=this._distortion,n[e(275)][e(249)]=this[e(267)],n[e(252)]=e(213)+n[e(252)],n[e(252)]=n[e(252)].replace("#include <project_vertex>","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n.fragmentShader="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(225)],n[e(225)]=n[e(225)][e(210)](e(246),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[me(241)](){var n=me;return this[n(212)][n(255)]}set[me(241)](n){this[me(212)].value=n}get tDepth(){return this[me(265)].value}set[me(217)](n){var t=me;this[t(265)][t(255)]=n}get distortionMap(){var n=me;return this._distortionMap[n(255)]}set[me(269)](n){var t=me;this[t(256)][t(255)]=n}get tDiffuseBlur(){var n=me;return this[n(230)][n(255)]}set[me(270)](n){var t=me;this[t(230)][t(255)]=n}get[me(231)](){var n=me;return this[n(273)][n(255)]}set[me(231)](n){var t=me;this._textureMatrix[t(255)]=n}get[me(211)](){var n=me;return this[n(222)][n(255)]}set hasBlur(n){var t=me;this._hasBlur[t(255)]=n}get mirror(){var n=me;return this._mirror[n(255)]}set[me(244)](n){this[me(251)].value=n}get[me(257)](){var n=me;return this[n(248)][n(255)]}set[me(257)](n){var t=me;this[t(248)][t(255)]=n}get[me(253)](){var n=me;return this._blurStrength[n(255)]}set[me(253)](n){var t=me;this[t(237)][t(255)]=n}get[me(235)](){var n=me;return this._minDepthThreshold[n(255)]}set[me(235)](n){this[me(263)].value=n}get[me(238)](){var n=me;return this[n(254)][n(255)]}set[me(238)](n){var t=me;this._maxDepthThreshold[t(255)]=n}get[me(258)](){var n=me;return this[n(236)][n(255)]}set depthScale(n){this[me(236)].value=n}get depthToBlurRatioBias(){var n=me;return this._depthToBlurRatioBias[n(255)]}set[me(239)](n){this[me(208)].value=n}get distortion(){var n=me;return this[n(218)][n(255)]}set[me(228)](n){var t=me;this[t(218)][t(255)]=n}get mixContrast(){var n=me;return this[n(267)][n(255)]}set mixContrast(n){this[me(267)].value=n}}function be(n){function t(n){var e=ye;if(typeof n===e(242))return function(n){}[e(224)](e(209))[e(264)](e(278));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(250)+e(271))[e(247)](e(268)):function(){return!1}[e(224)](e(250)+"gger")[e(264)](e(215)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ie(){var n=["mixStrength","_maxDepthThreshold","value","_distortionMap","mixBlur","depthScale","input","2468922eUAzWY","bind","chain","_minDepthThreshold","apply","_tDepth","1246430MfXLyN","_mixContrast","action","distortionMap","tDiffuseBlur","gger","43287gPxTLR","_textureMatrix","error","uniforms","10212579nwTuHQ","USE_UV","counter","table","function *\\( *\\)","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","length","_depthToBlurRatioBias","while (true) {}","replace","hasBlur","_tDiffuse","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","info","stateObject","return (function() ","tDepth","_distortion","init","10yLebWk","defines","_hasBlur","2692650wCdpAy","constructor","fragmentShader","23336Tqeilw","setValues","distortion","971420GtpGIb","_tDiffuseBlur","textureMatrix","prototype","test","onBeforeCompile","minDepthThreshold","_depthScale","_blurStrength","maxDepthThreshold","depthToBlurRatioBias","toString","tDiffuse","string","301UWoruY","mirror","exception","#include <emissivemap_fragment>","call","_mixBlur","mixContrast","debu","_mirror","vertexShader"];return(Ie=function(){return n})()}const we=Se;function Se(n,t){const e=Ae();return(Se=function(n,t){return e[n-=244]})(n,t)}!function(n,t){const e=Se,r=Ae();for(;;)try{if(324622===parseInt(e(265))/1+-parseInt(e(338))/2+-parseInt(e(328))/3*(-parseInt(e(275))/4)+parseInt(e(256))/5*(-parseInt(e(331))/6)+-parseInt(e(295))/7+parseInt(e(259))/8+parseInt(e(326))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Me(this,(function(){const n=Se,t=new RegExp(n(288)),e=new RegExp(n(296),"i"),r=De(n(303));t[n(261)](r+n(267))&&e[n(261)](r+n(270))?De():r("0")}))()}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Re(void 0,(function(){const n=Se,t=function(){const n=Se;let t;try{t=Function("return (function() "+n(332)+");")()}catch(e){t=window}return t}(),e=t[n(324)]=t[n(324)]||{},r=[n(277),n(315),n(282),n(258),n(294),n(253),n(323)];for(let o=0;o<r[n(320)];o++){const t=Re[n(335)][n(268)][n(263)](Re),i=r[o],a=e[i]||t;t[n(317)]=Re[n(263)](Re),t[n(346)]=a[n(346)].bind(a),e[i]=t}}))();const Ee=[we(281),we(276),we(312),we(280),we(313),we(285),we(247),we(333),we(301),we(272),"depth-to-blur-ratio-bias","distortion",we(341),"mix-contrast",we(297),we(286),"defines-USE_DISTORTION"];function Ae(){const n=["init","matrixWorld","string","assign","visible","far","addScaledVector","dispose","TresMeshReflectorMaterial","t-diffuse","t-diffuse-blur","sign","warn","dot","__proto__","updateMatrixWorld","extractRotation","length","virtualCamera","target","trace","console","index","13028229SWoNtB","autoClear","56493FfSIDF","render","clipPlane","246ZVKbLE",'{}.constructor("return this")( )',"min-depth-threshold","action","constructor","debu","rotationMatrix","555976CEyfPT","reflect","call","distortionMap","position","stateObject","lookAt","multiplyScalar","toString","uuid","reflectorWorldPosition","add","lookAtPosition","mix-strength","reflectorOffset","multiply","setFromMatrixPosition","shadowMap","depthTexture","table","number","applyMatrix4","76060wKdqKr","apply","error","2263808rpclOV","negate","test","texture","bind","setRenderTarget","65481nsaEPl","subVectors","chain","prototype","matrixWorldInverse","input","gger","depth-scale","projectionMatrix","set","8ENRwin","mirror","log","enabled","copy","t-depth","texture-matrix","info","isMesh","elements","has-blur","defines-USE_DEPTH","value","function *\\( *\\)","constant","cameraWorldPosition","textureMatrix","while (true) {}","view","exception","4251786rYWGSk","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","defines-USE_BLUR","key","reflectorPlane","normal","max-depth-threshold","materialRef"];return(Ae=function(){return n})()}const Te=rn({__name:we(325),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=we,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Q(o),{camera:y,scene:x,renderer:S,extend:M}=Y();M({MeshReflectorMaterial:xe});const R=yn(),A=yn(),T=yn(),D=yn(),P=nn((()=>{const n=Se;return typeof f[n(287)]===n(254)?[f.value,f.value]:f[n(287)]})),z=nn((()=>P[r(287)][0]>0||P[r(287)][1]>0)),O={reflectorPlane:new N,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new L,lookAtPosition:new E(0,0,-1),clipPlane:new H,view:new E,target:new E,q:new H,virtualCamera:new Z,textureMatrix:new L};dn((()=>{var n;const o=r;null==(n=R.value)||n.texture[o(310)]();const f={minFilter:I,magFilter:I,type:h};var y,x;R.value=new b(i[o(287)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(287)],i[o(287)],G,W)},t(y,e(x)))),A[o(287)]=new b(i.value,i[o(287)],f),T[o(287)]=new he({resolution:i[o(287)],width:P[o(287)][0],height:P[o(287)][1],minDepthThreshold:a[o(287)],maxDepthThreshold:s[o(287)],depthScale:u[o(287)],depthToBlurRatioBias:l.value}),D[o(287)]={mirror:p,textureMatrix:O[o(291)],mixBlur:d,tDiffuse:R[o(287)][o(262)],tDepth:R[o(287)][o(252)],tDiffuseBlur:R.value[o(262)],hasBlur:z,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(287)],mixContrast:_,"defines-USE_BLUR":z[o(287)]?"":void 0,"defines-USE_DEPTH":u[o(287)]>0?"":void 0,"defines-USE_DISTORTION":g[o(287)]?"":void 0}}));const C=yn(),{onLoop:k}=q();k((()=>{var n;const t=r;if(!(C[t(287)]&&S[t(287)]&&R[t(287)]&&y[t(287)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Se;n[r(283)]&&n.material&&n.material[r(347)]===t&&(e=n)})),e}(x.value,C.value.uuid);if(!e)return;e[t(307)]=!1;const i=S[t(287)].xr[t(278)],a=S[t(287)][t(251)].autoUpdate;(function(n){var t,e;const r=Se;if(O[r(244)][r(250)](n[r(304)]),O.cameraWorldPosition[r(250)](null==(t=y[r(287)])?void 0:t[r(304)]),O[r(337)][r(319)](n[r(304)]),O[r(300)][r(274)](0,0,1),O[r(300)].applyMatrix4(O.rotationMatrix),O[r(244)][r(309)](O[r(300)],o[r(248)]),O.view.subVectors(O[r(244)],O[r(290)]),O[r(293)][r(316)](O[r(300)])>0)return;O[r(293)][r(339)](O[r(300)])[r(260)](),O.view[r(245)](O[r(244)]),O[r(337)][r(319)](null==(e=y[r(287)])?void 0:e[r(304)]),O[r(246)].set(0,0,-1),O[r(246)][r(255)](O.rotationMatrix),O[r(246)][r(245)](O[r(290)]),O[r(322)][r(266)](O[r(244)],O.lookAtPosition),O[r(322)][r(339)](O[r(300)])[r(260)](),O[r(322)][r(245)](O.reflectorWorldPosition),O[r(321)][r(342)].copy(O[r(293)]),O[r(321)].up.set(0,1,0),O.virtualCamera.up.applyMatrix4(O[r(337)]),O[r(321)].up.reflect(O[r(300)]),O[r(321)][r(344)](O.target),O[r(321)][r(308)]=(null==y?void 0:y.value).far,O[r(321)][r(318)](),O[r(321)][r(273)][r(279)]((null==y?void 0:y[r(287)])[r(273)]),O.textureMatrix[r(274)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O.textureMatrix[r(249)](O[r(321)][r(273)]),O[r(291)][r(249)](O[r(321)][r(269)]),O.textureMatrix[r(249)](n[r(304)]),O[r(299)].setFromNormalAndCoplanarPoint(O[r(300)],O[r(244)]),O.reflectorPlane.applyMatrix4(O[r(321)][r(269)]),O.clipPlane[r(274)](O[r(299)].normal.x,O[r(299)][r(300)].y,O[r(299)][r(300)].z,O[r(299)][r(289)]);const i=O[r(321)][r(273)];O.q.x=(Math[r(314)](O[r(330)].x)+i[r(284)][8])/i[r(284)][0],O.q.y=(Math[r(314)](O[r(330)].y)+i[r(284)][9])/i.elements[5],O.q.z=-1,O.q.w=(1+i.elements[10])/i[r(284)][14],O[r(330)][r(345)](2/O[r(330)][r(316)](O.q)),i[r(284)][2]=O.clipPlane.x,i[r(284)][6]=O[r(330)].y,i.elements[10]=O[r(330)].z+1,i[r(284)][14]=O[r(330)].w})(e),S[t(287)][t(251)].autoUpdate=!1,S.value[t(264)](R[t(287)]),S[t(287)][t(327)]||S[t(287)].clear(),S[t(287)].render(x[t(287)],O[t(321)]),null==(n=null==T?void 0:T[t(287)])||n[t(329)](S[t(287)],R[t(287)],A[t(287)]),S[t(287)].xr[t(278)]=i,S[t(287)][t(251)].autoUpdate=a,e[t(307)]=!0,S[t(287)].setRenderTarget(null)}));const F=wn(),B=nn((()=>{const n=r,t={};return Object[n(306)](t,o),Object[n(306)](t,F[n(287)]),t}));return _n((()=>{var n,t;const e=r;null==(n=null==R?void 0:R[e(287)])||n[e(310)](),null==(t=null==A?void 0:A[e(287)])||t[e(310)]()})),(n,t)=>{var e,o,i;const c=r;return sn(),un(c(311),Sn({key:c(298)+D[c(287)][c(297)]+D[c(287)][c(286)]+D[c(287)]["defines-USE_DISTORTION"],ref_key:c(302),ref:C},B[c(287)],{"texture-matrix":O[c(291)],mirror:en(p),"t-diffuse":null==(e=R[c(287)])?void 0:e[c(262)],"t-depth":null==(o=R[c(287)])?void 0:o[c(252)],"t-diffuse-blur":null==(i=A[c(287)])?void 0:i[c(262)],"has-blur":z.value,"mix-strength":en(v),"min-depth-threshold":en(a),"max-depth-threshold":en(s),"depth-scale":en(u),"depth-to-blur-ratio-bias":en(l),distortion:en(m),distortionMap:en(g),"mix-contrast":en(_),"defines-USE_BLUR":z.value?"":void 0,"defines-USE_DEPTH":en(u)>0?"":void 0,"defines-USE_DISTORTION":en(g)?"":void 0}),null,16,Ee)}}});function De(n){function t(n){const e=Se;if(typeof n===e(305))return function(n){}[e(335)](e(292))[e(257)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(335)](e(336)+"gger")[e(340)](e(334)):function(){return!1}.constructor("debu"+e(271))[e(257)](e(343)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ce,r=ze();for(;;)try{if(701770===parseInt(e(344))/1*(-parseInt(e(345))/2)+-parseInt(e(361))/3+-parseInt(e(359))/4*(-parseInt(e(366))/5)+parseInt(e(352))/6*(parseInt(e(351))/7)+-parseInt(e(340))/8*(-parseInt(e(326))/9)+-parseInt(e(363))/10+parseInt(e(329))/11*(-parseInt(e(330))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(358)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ze(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","background","error","6278258OsXOkH","6NuwNAk","call",'{}.constructor("return this")( )',"fog","init","CubeCamera","apply","2893484ryLwOY","counter","795456FJMapC","function *\\( *\\)","379220iOzjZH","warn","constructor","5QtwYoz","__proto__","stateObject","type","223209TAbvMM","info","length","121hKvrbF","1163676ifcThN","gger","dispose","exception","trace","console","texture","toString","debu","bind","248BsMynG","value","action","chain","103ebAVYu","6166dLntim","update"];return(ze=function(){return n})()}!function(){Pe(this,(function(){const n=Ce,t=new RegExp(n(362)),e=new RegExp(n(347),"i"),r=ke(n(356));t.test(r+n(343))&&e.test(r+"input")?ke():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(358)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(n,t){const e=ze();return(Ce=function(n,t){return e[n-=326]})(n,t)}function ke(n){function t(n){const e=Ce;if("string"==typeof n)return function(n){}.constructor("while (true) {}").apply(e(360));1!==(""+n/n)[e(328)]||n%20==0?function(){return!0}.constructor(e(338)+e(331))[e(353)](e(342)):function(){return!1}[e(365)](e(338)+e(331)).apply(e(368)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Fe(n,t){const e=He();return(Fe=function(n,t){return e[n-=198]})(n,t)}Oe(void 0,(function(){const n=Ce,t=function(){const n=Ce;let t;try{t=Function("return (function() "+n(354)+");")()}catch(e){t=window}return t}(),e=t[n(335)]=t[n(335)]||{},r=[n(348),n(364),n(327),n(350),n(333),"table",n(334)];for(let o=0;o<r[n(328)];o++){const t=Oe.constructor.prototype[n(339)](Oe),i=r[o],a=e[i]||t;t[n(367)]=Oe.bind(Oe),t.toString=a[n(337)][n(339)](a),e[i]=t}}))();const Be=Fe;!function(n,t){const e=Fe,r=He();for(;;)try{if(495833===parseInt(e(237))/1+-parseInt(e(206))/2+-parseInt(e(233))/3+-parseInt(e(201))/4+-parseInt(e(239))/5+-parseInt(e(227))/6+-parseInt(e(199))/7*(-parseInt(e(238))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(198)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ue(this,(function(){const n=Fe,t=new RegExp(n(231)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ze(n(223));t.test(r+n(210))&&e[n(211)](r+n(200))?Ze():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();je(void 0,(function(){const n=Fe,t=function(){const n=Fe;let t;try{t=Function("return (function() "+n(205)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(203),n(220),n(234),n(207),"exception",n(204),n(230)];for(let o=0;o<r[n(240)];o++){const t=je.constructor[n(222)][n(216)](je),i=r[o],a=e[i]||t;t[n(236)]=je[n(216)](je),t.toString=a[n(214)].bind(a),e[i]=t}}))();const Ne=[Be(242)],Le=rn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=Y(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return tn((()=>s),(n=>{var t;const e=Ce;null==(t=c[e(341)])||t[e(332)](),c[e(341)]=new v(n[e(341)]),c[e(341)][e(336)][e(369)]=h}),{immediate:!0}),tn([u,l,c],(([n,t,e])=>{const r=Ce;e&&(f[r(341)]=new(T[r(357)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;null==(n=c.value)||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Ce;p=a[t(341)][t(355)],d=a[t(341)][t(349)],a.value.background=r||d,a[t(341)].fog=o||p,null==(n=f.value)||n[t(346)](i[t(341)],a[t(341)]),a.value[t(355)]=p,a.value.background=d}}}({resolution:o[r(229)],near:o.near,far:o[r(202)],envMap:o[r(212)],fog:o[r(217)]}),{onBeforeLoop:s}=q();let u=0;const l=J(null);return s((()=>{const n=r;l[n(224)]&&(o[n(213)]===1/0||u<o.frames)&&(l.value.visible=!1,c(),l[n(224)][n(241)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(232)]}),(n,t)=>{const e=r;return sn(),un(e(218),null,[vn("primitive",{object:en(a)},null,8,Ne),vn(e(218),{ref_key:e(225),ref:l},[ln(n[e(219)],"default")],512)])}}});function He(){const n=['{}.constructor("return this")( )',"1551532uXQnFq","error","constructor","debu","chain","test","envMap","frames","toString","call","bind","fog","TresGroup","$slots","warn","while (true) {}","prototype","init","value","rgRef","action","520692vWuvmi","string","resolution","trace","function *\\( *\\)","texture","2273130AyAIPv","info","gger","__proto__","61560sMYAMa","8ZDWsvL","3850120PLueeP","length","visible","object","apply","19833674WlOZlz","input","35308nTZHKO","far","log","table"];return(He=function(){return n})()}function Ze(n){function t(n){const e=Fe;if(typeof n===e(228))return function(n){}[e(208)](e(221))[e(198)]("counter");1!==(""+n/n)[e(240)]||n%20==0?function(){return!0}.constructor(e(209)+e(235))[e(215)](e(226)):function(){return!1}[e(208)](e(209)+e(235))[e(198)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=We,r=$e();for(;;)try{if(763079===parseInt(e(148))/1+-parseInt(e(134))/2*(-parseInt(e(109))/3)+-parseInt(e(122))/4*(-parseInt(e(116))/5)+parseInt(e(138))/6*(parseInt(e(147))/7)+-parseInt(e(146))/8*(parseInt(e(125))/9)+parseInt(e(111))/10*(parseInt(e(126))/11)+-parseInt(e(124))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(n,t){const e=$e();return(We=function(n,t){return e[n-=108]})(n,t)}function $e(){const n=["call","134eGIIxL","reduce","warn","forEach","11202UbmAon","key","gger","toString","apply","generateUUID","constructor","while (true) {}","24wqEvgN","875cDbRtu","126580hpMJIe","trace","entries","54105PmFJmF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3657150yARooH","test","value","chain","__proto__","1410ypzGxg","debu","uniforms","log","string","MathUtils","12644FvHCEi","counter","20875896NYQwsD","2065185wXZmSO","22kIrtBA","error","length","bind","function *\\( *\\)",'{}.constructor("return this")( )',"table"];return($e=function(){return n})()}!function(){Ge(this,(function(){const n=We,t=new RegExp(n(130)),e=new RegExp(n(110),"i"),r=Ke("init");t[n(112)](r+n(114))&&e[n(112)](r+"input")?Ke():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(142)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(n,t,e,r){const o=We,i=class extends P{constructor(o={}){const i=We,a=Object[i(108)](n);super({uniforms:a[i(135)](((n,[t,e])=>{const r=$.clone({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[i(139)]="",a[i(137)]((([n])=>Object.defineProperty(this,n,{get:()=>this.uniforms[n][i(113)],set:t=>this[i(118)][n][i(113)]=t}))),Object.assign(this,o),r&&r(this)}};return i[o(139)]=T[o(121)][o(143)](),i}function Ke(n){function t(n){const e=We;if(typeof n===e(120))return function(n){}[e(144)](e(145))[e(142)](e(123));1!==(""+n/n)[e(128)]||n%20==0?function(){return!0}[e(144)]("debu"+e(140))[e(133)]("action"):function(){return!1}.constructor(e(117)+e(140))[e(142)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=We,t=function(){const n=We;let t;try{t=Function("return (function() "+n(131)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(119),n(136),"info",n(127),"exception",n(132),n(149)];for(let o=0;o<r[n(128)];o++){const t=Ve[n(144)].prototype[n(129)](Ve),i=r[o],a=e[i]||t;t[n(115)]=Ve.bind(Ve),t[n(141)]=a[n(141)].bind(a),e[i]=t}}))();var qe=Qe;!function(n,t){for(var e=Qe,r=ar();;)try{if(519440===parseInt(e(358))/1+-parseInt(e(277))/2*(parseInt(e(296))/3)+-parseInt(e(382))/4*(-parseInt(e(327))/5)+parseInt(e(332))/6+parseInt(e(304))/7*(parseInt(e(349))/8)+-parseInt(e(343))/9+-parseInt(e(330))/10*(parseInt(e(357))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n,t){var e=ar();return(Qe=function(n,t){return e[n-=230]})(n,t)}!function(){Xe(this,(function(){var n=Qe,t=new RegExp(n(355)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Cr(n(362));t[n(309)](r+n(411))&&e.test(r+n(378))?Cr():r("0")}))()}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Qe(254)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n){var t=Qe,e=function(n,t){var e=Qe;if(typeof n!==e(320)||null===n)return n;var r=n[Symbol[e(385)]];if(void 0!==r){var o=r[e(248)](n,t||"default");if(typeof o!==e(320))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(337)?String:Number)(n)}(n,"string");return typeof e===t(283)?e:String(e)}function tr(n,t,e){return(t=nr(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=Qe,r=Object.keys(n);if(Object[e(244)]){var o=Object[e(244)](n);t&&(o=o[e(237)]((function(t){var r=e;return Object[r(360)](n,t)[r(370)]}))),r[e(287)].apply(r,o)}return r}function rr(n){for(var t=Qe,e=1;e<arguments[t(398)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0)[t(252)]((function(t){tr(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(412)](n,Object.getOwnPropertyDescriptors(r)):er(Object(r))[t(252)]((function(e){var o=t;Object[o(407)](n,e,Object[o(360)](r,e))}))}return n}function or(n,t){var e=Qe;if(null==n)return{};var r,o,i=function(n,t){var e=Qe;if(null==n)return{};var r,o,i={},a=Object[e(295)](n);for(o=0;o<a[e(398)];o++)r=a[o],t[e(300)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(244)]){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a[e(398)];o++)r=a[o],t[e(300)](r)>=0||Object.prototype[e(272)][e(248)](n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=Qe;(null==t||t>n[e(398)])&&(t=n[e(398)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ar(){var n=["join","\n    vec3 transformed = ","csm_PointSize","Set","prototype","keys","45ICznlc",";\n  ","generateUUID","material.clearcoat = ","indexOf","needsUpdate","getOwnPropertyDescriptors","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","4871643sQnVmK","metalness","instanceID","csm_DiffuseColor","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","test",", 1.0 );\n  ",'{}.constructor("return this")( )',"function",";\n    ","Cannot call a class as a function","depthAlpha","Object","isArray","get","();\n              // #_CSM_#\n          ","object","csm_Normal","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","emissive","next","clone","lights_physical_fragment","15VoaZho","name","// #_CSM_#","70ATKHhG","setPrototypeOf","2829846WveRic","counter","CSM: ","MeshMatcapMaterial","MeshLambertMaterial","string","trace","replace","error","includes",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","4187637fGnYvR","\\$&","csm_Position","assign","void main() {","constructor","8rBLqaT","material.clearcoatRoughness = ","substring","_generateMaterial","position","getPrototypeOf","function *\\( *\\)","roughness","1100759VdLvNo","736374Wkikec","value","getOwnPropertyDescriptor","Arguments","init",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","csm_AO","clearcoatNormal","csm_FragColor","update","__proto__","();\n            // #_CSM_#\n          ","enumerable","bump","__csm","\n    #include <color_fragment>\n    diffuseColor = ","isAlreadyExtended","cacheHash","gger","ShadowMaterial","input","iterator","csm_ClearcoatRoughness","void main()","871236KEbXmQ","patchMap","_getCacheHash","toPrimitive","fragColor",'CSM: Property "',"\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n    vec3 totalEmissiveRadiance = ","csm_PositionRaw","csm_main_","MeshDepthMaterial","is not a constructor","configurable","return (function() ","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","done","length","toString","MeshToonMaterial","toUpperCase","positionRaw","MeshStandardMaterial","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","csm_ClearcoatNormal","this hasn't been initialised - super() hasn't been called","defineProperty","trim","_getPatchMapForMaterial","from","chain","defineProperties","\n    \n","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","\n    gl_Position = ","clearcoatRoughness","\n    #include <dithering_fragment>\n    gl_FragColor  = ","fragmentShader","CustomShaderMaterial does not support RawShaderMaterial","undefined","_getMaterialDefine","MeshPhongMaterial","csm_Metalness","create","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","MeshNormalMaterial"," );\n    ","entries",". Shader cannot compile.","while (true) {}","bind","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","filter","#define IS_UNKNOWN;\n","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","type","silent","pointSize","getOwnPropertySymbols","\n            ","info","warn","call","Map","log","message","forEach","diffuse","apply","construct","find","writable","console","MathUtils","baseMaterial","onBeforeCompile","\n    vec4 csm_internal_positionUnprojected = ",'". Shader cannot compile.',"MeshPhysicalMaterial","_patchShader","MeshBasicMaterial","void ","concat","@@iterator","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","cacheKey","propertyIsEnumerable","debu","\n    varying mat4 csm_internal_vModelViewMatrix;\n","sham","normal","116290WoRJmL","uniforms","stateObject","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ",'" is required to use output "',"return","symbol","\n    gl_FragColor = ","vertexShader","customProgramCacheKey","push","table","clearcoat"];return(ar=function(){return n})()}function cr(n,t){return function(n){if(Array[Qe(317)](n))return n}(n)||function(n,t){var e=Qe,r=null==n?null:e(420)!=typeof Symbol&&n[Symbol[e(379)]]||n[e(269)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(248)](n))[e(324)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(397)])&&(s[e(287)](o[e(359)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(282)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Qe;if(n){if(typeof n===e(337))return ir(n,t);var r=Object.prototype[e(399)][e(248)](n).slice(8,-1);return r===e(316)&&n[e(348)]&&(r=n[e(348)][e(328)]),r===e(249)||r===e(293)?Array[e(410)](n):r===e(361)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(309)](r)?ir(n,t):void 0}}(n,t)||function(){throw new TypeError(Qe(270))}()}function sr(n,t){for(var e=Qe,r=0;r<t[e(398)];r++){var o=t[r];o[e(370)]=o[e(370)]||!1,o[e(394)]=!0,e(359)in o&&(o[e(257)]=!0),Object[e(407)](n,nr(o.key),o)}}function ur(n){if(void 0===n)throw new ReferenceError(Qe(406));return n}function lr(n,t){var e=Qe;return(lr=Object[e(331)]?Object[e(331)][e(235)]():function(n,t){return n[e(368)]=t,n})(n,t)}function fr(n){var t=Qe;return(fr=Object[t(331)]?Object[t(354)].bind():function(n){var e=t;return n[e(368)]||Object[e(354)](n)})(n)}function pr(n){var t=function(){var n=Qe;if("undefined"==typeof Reflect||!Reflect[n(255)])return!1;if(Reflect[n(255)][n(275)])return!1;if(typeof Proxy===n(312))return!0;try{return Boolean[n(294)].valueOf[n(248)](Reflect[n(255)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Qe,o=fr(n);if(t){var i=fr(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o[r(254)](this,arguments);return function(n,t){var e=Qe;if(t&&(typeof t===e(320)||typeof t===e(312)))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ur(n)}(this,e)}}Je(void 0,(function(){for(var n=Qe,t=function(){var n,t=Qe;try{n=Function(t(395)+t(311)+");")()}catch(e){n=window}return n}(),e=t[n(258)]=t[n(258)]||{},r=[n(250),n(247),n(246),n(340),"exception",n(288),n(338)],o=0;o<r[n(398)];o++){var i=Je[n(348)].prototype[n(235)](Je),a=r[o],c=e[a]||i;i.__proto__=Je[n(235)](Je),i[n(399)]=c[n(399)][n(235)](c),e[a]=i}}))();var dr,hr,vr,mr={diffuse:qe(307),normal:qe(321),roughness:"csm_Roughness",metalness:qe(423),emissive:"csm_Emissive",ao:qe(364),bump:"csm_Bump",clearcoat:"csm_Clearcoat",clearcoatRoughness:qe(380),clearcoatNormal:qe(405),pointSize:qe(292),fragColor:qe(366),depthAlpha:"csm_DepthAlpha",position:qe(345),positionRaw:qe(390)},gr=(tr(dr={},""[qe(268)](mr[qe(353)]),"*"),tr(dr,"".concat(mr.positionRaw),"*"),tr(dr,""[qe(268)](mr.normal),"*"),tr(dr,""[qe(268)](mr[qe(243)]),["PointsMaterial"]),tr(dr,""[qe(268)](mr[qe(253)]),"*"),tr(dr,""[qe(268)](mr[qe(386)]),"*"),tr(dr,""[qe(268)](mr[qe(323)]),[qe(403),qe(264)]),tr(dr,"".concat(mr[qe(356)]),[qe(403),qe(264)]),tr(dr,"".concat(mr[qe(305)]),["MeshStandardMaterial",qe(264)]),tr(dr,""[qe(268)](mr.ao),[qe(403),"MeshPhysicalMaterial",qe(266),qe(336),"MeshPhongMaterial",qe(400)]),tr(dr,""[qe(268)](mr[qe(371)]),[qe(336),qe(335),qe(230),qe(422),qe(264),qe(403),"MeshToonMaterial",qe(377)]),tr(dr,"".concat(mr[qe(315)]),[qe(392)]),tr(dr,""[qe(268)](mr.clearcoat),[qe(264)]),tr(dr,""[qe(268)](mr[qe(416)]),[qe(264)]),tr(dr,""[qe(268)](mr[qe(365)]),[qe(264)]),dr),_r={"#include <lights_physical_fragment>":D[qe(326)]},yr=(tr(hr={},""[qe(268)](mr[qe(276)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = ".concat(mr[qe(276)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),tr(hr,""[qe(268)](mr[qe(353)]),{"#include <begin_vertex>":qe(291)[qe(268)](mr.position,qe(297))}),tr(hr,"".concat(mr[qe(402)]),{"#include <begin_vertex>":qe(262)[qe(268)](mr[qe(402)],qe(342))}),tr(hr,"".concat(mr.pointSize),{"gl_PointSize = size;":"\n    gl_PointSize = "[qe(268)](mr[qe(243)],qe(313))}),tr(hr,""[qe(268)](mr[qe(253)]),{"#include <color_fragment>":qe(373).concat(mr[qe(253)],qe(297))}),tr(hr,"".concat(mr.fragColor),{"#include <dithering_fragment>":qe(417).concat(mr[qe(386)],qe(297))}),tr(hr,""[qe(268)](mr.emissive),{"vec3 totalEmissiveRadiance = emissive;":qe(389)[qe(268)](mr[qe(323)],qe(313))}),tr(hr,""[qe(268)](mr[qe(356)]),{"#include <roughnessmap_fragment>":qe(303).concat(mr[qe(356)],";\n    ")}),tr(hr,"".concat(mr.metalness),{"#include <metalnessmap_fragment>":qe(322).concat(mr[qe(305)],";\n    ")}),tr(hr,"".concat(mr.ao),{"#include <aomap_fragment>":qe(239)[qe(268)](mr.ao,qe(313))}),tr(hr,""[qe(268)](mr[qe(371)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[qe(268)](mr[qe(371)]," - (dot(")[qe(268)](mr[qe(371)],qe(363))}),tr(hr,""[qe(268)](mr[qe(315)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":qe(404).concat(mr[qe(315)],qe(231)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= "[qe(268)](mr.depthAlpha,qe(313))}),tr(hr,""[qe(268)](mr[qe(289)]),{"material.clearcoat = clearcoat;":qe(299).concat(mr[qe(289)],";")}),tr(hr,""[qe(268)](mr[qe(416)]),{"material.clearcoatRoughness = clearcoatRoughness;":qe(350)[qe(268)](mr.clearcoatRoughness,";")}),tr(hr,""[qe(268)](mr[qe(365)]),{"#include <clearcoat_normal_fragment_begin>":qe(308)}),hr),xr=(tr(vr={},""[qe(268)](mr[qe(353)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(236)[qe(268)](mr[qe(353)],qe(310))}),tr(vr,"".concat(mr[qe(402)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(415).concat(mr[qe(353)],qe(297))}),tr(vr,""[qe(268)](mr[qe(253)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[qe(268)](mr[qe(253)],qe(297))}),tr(vr,""[qe(268)](mr[qe(386)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(284).concat(mr[qe(386)],qe(297))}),vr),br={clearcoat:[mr.clearcoat,mr.clearcoatNormal,mr.clearcoatRoughness]},Ir=qe(388),wr=qe(396),Sr=qe(274),Mr=qe(414),Rr=qe(274),Er=qe(413),Ar=[qe(260),qe(418),qe(285),qe(278),qe(383),qe(271),qe(242)],Tr=function(n,t,e){var r=qe;return n.split(t)[r(290)](e)},Dr=function(n,t){var e,r;return new RegExp("\\b"[qe(268)]((e=t,r=qe,e[r(339)](/[-\/\\^$*+?.()|[\]{}]/g,r(344))),"\\b")).test(n)};function Pr(n){return n?n[qe(339)](/\s/g,""):void 0}function zr(n){return n[qe(339)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Or=function(n){var t=qe;!function(n,t){var e=Qe;if(typeof t!==e(312)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(294)]=Object[e(424)](t&&t[e(294)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(407)](n,e(294),{writable:!1}),t&&lr(n,t)}(c,V);var e,r,o,i,a=pr(c);function c(n){var t,e,r,o,i,s=Qe,u=n[s(260)],l=n[s(418)],f=n[s(285)],p=n[s(278)],d=n[s(383)],h=n[s(271)],v=n.silent,m=or(n,Ar);if(function(n,t){if(!(n instanceof t))throw new TypeError(Qe(314))}(this,c),!function(n){var t=qe;try{new n}catch(e){if(e[t(251)][t(300)](t(393))>=0)return!1}return!0}(u)?(e=u,Object[s(346)](e,m)):e=new u(m),"RawShaderMaterial"===e.type)throw new Error(s(419));(function(n,t){var e=qe;e(398),Object[e(346)](n,t);var r=Object.getPrototypeOf(t);Object[e(232)](Object[e(302)](r))[e(237)]((function(n){var t=e,r=typeof n[1][t(318)]===t(312),o=typeof n[1].set===t(312),i="function"==typeof n[1][t(359)],a=n[0]===t(348);return(r||o||i)&&!a}))[e(252)]((function(t){var r=e;typeof n[t[0]]!==r(312)&&Object.defineProperty(n,t[0],t[1])}))})(ur(t=a[s(248)](this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(259)][s(298)](),type:e.type,isAlreadyExtended:(r=e[s(261)],o=qe,i=r[o(399)]()[o(408)](),!(0===i[o(351)](i[o(300)]("{")+1,i.lastIndexOf("}"))[o(408)]()[o(398)])),cacheHash:"",silent:v},t[s(278)]=rr(rr({},t[s(278)]||{}),p||{});var g=t[s(372)],_=g[s(418)],y=g[s(285)],x=t[s(278)];return t[s(372)][s(375)]=t._getCacheHash(),t[s(352)](_,y,x),t}return e=c,r=[{key:t(367),value:function(){var n=t,e=arguments[n(398)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(278)]=e[n(278)]||this[n(278)],Object[n(346)](this[n(372)],e);var r=this.__csm,o=r[n(418)],i=r[n(285)],a=this[n(278)],c=this[n(384)]();this[n(372)][n(375)]=c,this[n(352)](o,i,a)}},{key:t(325),value:function(){var n=t,e={baseMaterial:this[n(372)][n(260)],fragmentShader:this[n(372)][n(418)],vertexShader:this.__csm.vertexShader,uniforms:this[n(278)],silent:this[n(372)][n(242)],patchMap:this[n(372)][n(383)],cacheKey:this.__csm[n(271)]},r=new(this[n(348)])(e);return Object[n(346)](this,r),r}},{key:t(384),value:function(){var n=t,e=this[n(372)],r=e[n(418)],o=e[n(285)],i=this[n(278)],a=[Pr(r),Pr(o),i][n(237)]((function(n){return void 0!==n}));return a[n(398)]>0?An(a,{excludeValues:!0}):this[n(286)]()}},{key:t(352),value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this.customProgramCacheKey=function(){var n=Qe;return i[n(372)][n(375)]};var a=function(t){var r=Qe;try{var o=i[r(421)]();if(n){var a=i[r(265)](zr(n),t[r(418)],!0);t.fragmentShader=o+a}if(e){var c=i[r(265)](zr(e),t[r(285)]);t[r(285)]="#define IS_VERTEX;\n"+c,t[r(285)]=o+t.vertexShader}t[r(278)]=rr(rr({},t.uniforms),i[r(278)]),i.uniforms=t[r(278)]}catch(s){console[r(340)](s)}};if(this[o(372)][o(374)]){var c=this[o(261)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this[o(261)]=a;this[o(301)]=!0}},{key:t(265),value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this._getPatchMapForMaterial()),this[o(372)][o(383)]);Object.entries(br).forEach((function(t){var e=o,r=cr(t,2),a=r[0],c=r[1][e(256)]((function(t){return Dr(n,t)}));if(c&&!i[a])throw new Error(e(387)[e(268)](a,e(281)).concat(c,e(263)))})),Object[o(232)](_r)[o(252)]((function(n){var t=cr(n,2),e=t[0],r=t[1];a=Tr(a,e,r)})),Object[o(295)](c)[o(252)]((function(t){var e=o;Object[e(295)](c[t])[e(252)]((function(r){var o=e,s=gr[t],u=i[o(372)][o(241)];if("*"===t||Dr(n,t)){if(!(!s||Array[o(317)](s)&&s[o(341)](u)||"*"===s))throw new Error(o(334)[o(268)](t," is not available in ")[o(268)](u,o(233)));a=Tr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(391)+this[o(372)][o(306)][o(339)](/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,o(267)[o(268)](d,"()")),v=n[o(341)](o(381)),m=a[o(341)](o(329));return v&&(m&&this.__csm.isAlreadyExtended?(a=a.replace("void main() {",o(245)[o(268)](h,"\n            \n            void main() {\n          ")),s=a,u=o(329),l=o(245)[o(268)](d,o(369)),f=qe,p=s.lastIndexOf(u),a=-1===p?s:s[f(351)](0,p)+l+s[f(351)](p+u[f(398)])):a=a[o(339)](o(347),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ".concat(r?Rr:Sr,o(425))[o(268)](Ir,"\n    \n            ")[o(268)](h,o(280)).concat(wr,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ").concat(r?Er:Mr,o(240)).concat(d,o(319)))),a}},{key:t(421),value:function(){var n=t,e=this.__csm.type;return e?"#define IS_".concat(e[n(401)](),";\n"):n(238)}},{key:t(409),value:function(){var n=t;return"ShaderMaterial"===this[n(372)][n(241)]?xr:yr}}],i=Qe,r&&sr(e[i(294)],r),o&&sr(e,o),Object[i(407)](e,i(294),{writable:!1}),c}();function Cr(n){function t(n){var e=Qe;if(typeof n===e(337))return function(n){}[e(348)](e(234))[e(254)](e(333));1!==(""+n/n).length||n%20==0?function(){return!0}[e(348)](e(273)+e(376)).call("action"):function(){return!1}[e(348)](e(273)+"gger")[e(254)](e(279)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kr=Lr;!function(n,t){const e=Lr,r=Ur();for(;;)try{if(324730===-parseInt(e(251))/1*(parseInt(e(275))/2)+-parseInt(e(291))/3*(parseInt(e(277))/4)+parseInt(e(287))/5*(parseInt(e(270))/6)+parseInt(e(290))/7+parseInt(e(289))/8+parseInt(e(256))/9+parseInt(e(263))/10*(parseInt(e(278))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fr(this,(function(){const n=Lr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(280),"i"),r=Hr(n(258));t[n(281)](r+n(248))&&e[n(281)](r+"input")?Hr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Lr(254)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ur(){const n=["action","metalness","warn","color","string","\n      ","2778OJbHoo","clearcoat","gger","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","console","696018WaZlUK","index","548yZmbPK","56441WLKsRU",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","trace","bind","roughness","table","call","2365PGaKpG","exception","73728kGpNOv","710577sSXAGk","9267OHqpwH","error","\n\t\t\t","primitive","#ff00fc","object","chain","clearcoatRoughness","log","1ryvXws","return (function() ","debu","apply","MeshPhysicalMaterial","3801861MKGdpe","counter","init","prototype","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","length","constructor","670YCWSQA"];return(Ur=function(){return n})()}Br(void 0,(function(){const n=Lr;let t;try{t=Function(n(252)+n(279)+");")()}catch(o){t=window}const e=t[n(274)]=t[n(274)]||{},r=[n(250),n(266),"info",n(292),n(288),n(285),n(282)];for(let i=0;i<r[n(261)];i++){const t=Br[n(262)][n(259)].bind(Br),o=r[i],a=e[o]||t;t.__proto__=Br[n(283)](Br),t.toString=a.toString[n(283)](a),e[o]=t}}))();const jr=[kr(247)],Nr=rn({__name:kr(276),props:{color:{default:kr(246)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=kr,e=n,r={baseMaterial:T[t(255)],metalness:e[t(265)],roughness:e[t(284)],clearcoat:e[t(271)],clearcoatRoughness:e[t(249)],color:e[t(267)],vertexShader:t(273),fragmentShader:t(244)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(269)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(260)},o=new Or(r);return dn((()=>{const n=t;o[n(267)].setStyle(e[n(267)]),o[n(265)]=e.metalness,o[n(284)]=e.roughness,o[n(271)]=e[n(271)],o[n(249)]=e[n(249)]})),(n,e)=>{const r=t;return sn(),un(r(245),{object:en(o)},null,8,jr)}}});function Lr(n,t){const e=Ur();return(Lr=function(n,t){return e[n-=244]})(n,t)}function Hr(n){function t(n){const e=Lr;if(typeof n===e(268))return function(n){}[e(262)]("while (true) {}")[e(254)](e(257));1!==(""+n/n)[e(261)]||n%20==0?function(){return!0}[e(262)](e(253)+e(272))[e(286)](e(264)):function(){return!1}[e(262)](e(253)+e(272))[e(254)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Zr(n,t){var e=$r();return(Zr=function(n,t){return e[n-=441]})(n,t)}!function(n,t){for(var e=Zr,r=$r();;)try{if(114833===-parseInt(e(463))/1+-parseInt(e(444))/2*(parseInt(e(457))/3)+-parseInt(e(470))/4+parseInt(e(446))/5*(parseInt(e(442))/6)+-parseInt(e(464))/7*(parseInt(e(473))/8)+parseInt(e(468))/9+-parseInt(e(472))/10*(-parseInt(e(466))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gr(this,(function(){var n=Zr,t=new RegExp(n(460)),e=new RegExp(n(445),"i"),r=Vr(n(459));t[n(453)](r+"chain")&&e[n(453)](r+"input")?Vr():r("0")}))()}();var Wr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $r(){var n=["26xXQUtZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","217615ReGeoH","apply","warn","info","trace","gger","exception","test","toString","error","call","24669TRKQZb","__proto__","init","function *\\( *\\)","string","console","208303MvRqHb","7cjDdxN","bind","1199owmLiR",'{}.constructor("return this")( )',"755712adwPKc","constructor","194576EoDscl","debu","43720HiCTTa","1351064GGiOmv","length","12YbYAit","stateObject"];return($r=function(){return n})()}function Vr(n){function t(n){var e=Zr;if(typeof n===e(461))return function(n){}[e(469)]("while (true) {}")[e(447)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(469)]("debu"+e(451))[e(456)]("action"):function(){return!1}[e(469)](e(471)+"gger")[e(447)](e(443)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Wr(void 0,(function(){var n,t=Zr;try{n=Function("return (function() "+t(467)+");")()}catch(s){n=window}for(var e=n[t(462)]=n[t(462)]||{},r=["log",t(448),t(449),t(455),t(452),"table",t(450)],o=0;o<r[t(441)];o++){var i=Wr.constructor.prototype[t(465)](Wr),a=r[o],c=e[a]||i;i[t(458)]=Wr.bind(Wr),i[t(454)]=c.toString[t(465)](c),e[a]=i}}))();export{Ye as C,Nr as _,nt as a,ft as b,Mt as c,zt as d,Lt as e,Jt as f,Le as g,Te as h,gt as u};

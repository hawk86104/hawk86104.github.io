import{ad as a,A as e,da as t}from"./three.Db7Elb4U1762224880399.js";import{F as s,K as l,a as n}from"./@tresjs.DqjiY1SI1762224880399.js";import{e as i,f as o}from"./@pmndrs.CK_BnoBI1762224880399.js";import{d as r,ac as p,a as u,w as c,V as d,G as m,o as f,ad as g,r as v,q as y,b as h,e as j,I as w,h as b,u as T,ah as _,m as k}from"./@vue.DQUdVfVE1762224880399.js";import{P as M}from"./tweakpane.CqZAnw7f1762224880399.js";import"./postprocessing.DlnXVmoR1762224880399.js";import"./@vueuse.eWWyvEll1762224880399.js";const x=["object"],A=r({__name:"splat",props:{url:{type:String,default:"./plugins/gaussianSplatting/model/luigi.splat"}},async setup(a){let e,t;const l=a,{camera:n,renderer:r}=s(),v=new i(r);let y=([e,t]=p(()=>v.loadAsync(l.url)),e=await e,t(),e);const h=u(null);h.value=new o(y,n.value,{alphaTest:.1}),c(()=>l.url,async a=>{a&&(y=await v.loadAsync(a)),j(),h.value=new o(y,n.value,{alphaTest:.1})});const j=()=>{h.value&&(h.value.geometry.dispose(),h.value.material&&h.value.material.dispose())};return d(()=>{j()}),(a,e)=>(f(),m("primitive",{object:g(h.value)},null,8,x))}}),C=r({__name:"splatPage",setup(s){const i=v({clearColor:"#ffffff",alpha:!1,shadowMapType:t,outputColorSpace:e,toneMapping:a}),o=v({url:"./plugins/gaussianSplatting/model/luigi.splat"}),r=new M({title:"参数",expanded:!0}),p=document.createElement("input");p.type="file",p.accept=".splat",p.style.display="none",document.body.appendChild(p);return r.addButton({title:"替换splat文件",label:"500MB以内"}).on("click",()=>{p&&(p.value="",p.click())}),y(()=>{p.onchange=a=>{const e=a.target.files[0];if(!e)return;if(e.size>524288e3)return void alert("文件大小不能超过500MB");const t=URL.createObjectURL(e);o.url=t}}),(a,e)=>(f(),h(T(n),k(i,{"window-size":""}),{default:j(()=>[e[0]||(e[0]=w("TresPerspectiveCamera",{position:[3,3,3],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),b(T(l)),e[1]||(e[1]=w("TresAmbientLight",{intensity:3},null,-1)),(f(),h(_,null,{default:j(()=>[b(A,k(o,{position:[0,.7,0],"rotate-x":-Math.PI}),null,16,["rotate-x"])]),_:1})),e[2]||(e[2]=w("TresDirectionalLight",{position:[6,2,4],intensity:2},null,-1)),e[3]||(e[3]=w("TresGridHelper",null,null,-1))]),_:1},16))}});export{C as default};

import{_ as e}from"./@tresjs.BCHtwiaC1763540743861.js";import{o as n}from"./index.Crdf3MNx1763540743861.js";import{d as o,a8 as i,H as t,o as a,u as r}from"./@vue.Co_gxueH1763540743861.js";import{q as s,f as u,ae as l,o as m,n as v,C as c}from"./three.rXKzP9fQ1763540743861.js";const d=["object","position","rotation"],p=o({__name:"chinaFlag",props:{img:{default:"./plugins/communityMetaverse/image/flag.png"},position:{default:[195,160,-305]}},async setup(o){let p,f;const y=o,g=([p,f]=i(()=>n(y.img)),p=await p,f(),p);const x=new s({vertexShader:"\n        uniform vec2 uFrequency;\n        uniform float uTime;\n        varying vec2 vUv;\n        varying float vElevation;\n        void main()\n        {\n            vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\n            float elevation = sin(modelPosition.x * uFrequency.x - uTime) * 0.1;\n            elevation += sin(modelPosition.y * uFrequency.y - uTime) * 0.1;\n            \n            // 平面向上移动\n            modelPosition.y += 10.2;\n            // 平面移动\n            modelPosition.z += elevation;\n            // 平面变波浪形\n            modelPosition.z += sin(modelPosition.x * uFrequency.x + uTime) * 2.9;\n            modelPosition.z += sin(modelPosition.y * uFrequency.y + uTime) * 2.9;\n\n            vec4 viewPosition = viewMatrix * modelPosition;\n            vec4 projectedPosition = projectionMatrix * viewPosition;\n\n            gl_Position = projectedPosition;\n            vUv = uv;\n            vElevation = elevation;\n        }\n    ",fragmentShader:"\n        precision mediump float;\n        uniform sampler2D uTexture;\n        varying vec2 vUv;\n        varying float vElevation;\n        void main()\n        {\n            vec4 textureColor = texture2D(uTexture, vUv);\n            textureColor.rgb *= vElevation * 2.0 + 0.8;\n            gl_FragColor = textureColor;\n        }\n    ",transparent:!1,wireframe:!1,side:l,uniforms:{uFrequency:{value:new u(10,5)},uTime:{value:0},uTexture:{value:g}}}),P=new m(200,100,5,5),T=new v(P,x),j=new c,{onBeforeRender:w}=e();return w(({delta:e})=>{const n=j.getElapsedTime();x.uniforms.uTime.value=5*n}),(e,n)=>(a(),t("primitive",{object:r(T),scale:[.5,.5,.5],position:y.position,rotation:[0,-Math.PI,0]},null,8,d))}});export{p as _};

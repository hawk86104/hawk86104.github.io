import{$ as n,d as t}from"./@tresjs.tWkmYPO61721721076264.js";import{Z as e,j as o}from"./three.fnkrvySq1721721076264.js";import{d as r,a1 as a,o as i,D as s,J as c,aj as u,ak as f,q as p,e as l,f as m,g as h,j as d,u as v,m as x}from"./@vue.Q1VpS3901721721076264.js";import"./tweakpane.yHWGBmom1721721076264.js";import"./@vueuse._hUvP73U1721721076264.js";const y=_;!function(n,t){const e=_,o=w();for(;;)try{if(944265===-parseInt(e(482))/1+-parseInt(e(497))/2+parseInt(e(455))/3+parseInt(e(492))/4*(-parseInt(e(463))/5)+parseInt(e(481))/6+-parseInt(e(480))/7*(-parseInt(e(466))/8)+-parseInt(e(494))/9*(-parseInt(e(478))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const g=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){g(this,(function(){const n=_,t=new RegExp(n(489)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=j("init");t[n(484)](o+n(476))&&e[n(484)](o+n(462))?j():o("0")}))()}();const q=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[_(483)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function _(n,t){const e=w();return(_=function(n,t){return e[n-=449]})(n,t)}q(void 0,(function(){const n=_,t=function(){const n=_;let t;try{t=Function(n(490)+n(451)+");")()}catch(e){t=window}return t}(),e=t[n(471)]=t.console||{},o=["log",n(468),n(479),n(454),n(475),"table",n(461)];for(let r=0;r<o.length;r++){const t=q.constructor[n(493)][n(460)](q),a=o[r],i=e[a]||t;t[n(474)]=q.bind(q),t[n(485)]=i[n(485)][n(460)](i),e[a]=t}}))();const b=[y(486)],z={ref:y(491),args:[1e3,1e3]};function w(){const n=["innerHeight","function *\\( *\\)","return (function() ","TresTubeGeometryRef","1135980GCKzyy","prototype","306JaZXDk","TresPlaneGeometry","length","653324BFsnnQ","counter","string","innerWidth","rayMarchingMaterialFract",'{}.constructor("return this")( )',"constructor","stateObject","error","3687963IdcrAG","u_time","while (true) {}","value","MeshRef","bind","trace","input","15emDVZB","call","clientX","8FGAqre","uniforms","warn","action","gger","console","debu","mousemove","__proto__","exception","chain","TresShaderMaterial","179350uCxMVt","info","7066367lzfwKi","3626664hSOmKZ","1330124nLBqWM","apply","test","toString","rotation","clientY"];return(w=function(){return n})()}const I=r({__name:y(450),setup(t){const r=y,{onLoop:p,onAfterLoop:l}=n(),m={transparent:!0,depthWrite:!0,depthTest:!0,side:e,vertexShader:"varying vec2 vUv;\nvoid main(){\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n\tvUv=uv;\n}",fragmentShader:"#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform vec2 u_resolution;\nuniform vec3 u_mouse;\nuniform float u_time;\nvarying vec2 vUv;\nfloat sphere(vec3 p,float d){\n  return(length(p*2.)-d)/2.;\n}\n\nfloat sdPyramid(vec3 p,float h)\n{\n  float m2=h*h+.25;\n  \n  p.xz=abs(p.xz);\n  p.xz=(p.z>p.x)?p.zx:p.xz;\n  p.xz-=.5;\n  \n  vec3 q=vec3(p.z,h*p.y-.5*p.x,h*p.x+.5*p.y);\n  \n  float s=max(-q.x,0.);\n  float t=clamp((q.y-.5*p.z)/(m2+.25),0.,1.);\n  \n  float a=m2*(q.x+s)*(q.x+s)+q.y*q.y;\n  float b=m2*(q.x+.5*t)*(q.x+.5*t)+(q.y-m2*t)*(q.y-m2*t);\n  \n  float d2=min(q.y,-q.x*m2-q.y*.5)>0.?0.:min(a,b);\n  \n  return sqrt((d2+q.z*q.z)/m2)*sign(max(q.z,-p.y));\n}\nfloat sdBoxFrame(vec3 p,vec3 b,float e)\n{\n  p=abs(p)-b;\n  vec3 q=abs(p+e)-e;\n  return min(min(\n      length(max(vec3(p.x,q.y,q.z),0.))+min(max(p.x,max(q.y,q.z)),0.),\n      length(max(vec3(q.x,p.y,q.z),0.))+min(max(q.x,max(p.y,q.z)),0.)),\n      length(max(vec3(q.x,q.y,p.z),0.))+min(max(q.x,max(q.y,p.z)),0.));\n    }\n    mat2 rot2D(float angle){\n      float s=sin(angle);\n      float c=cos(angle);\n      return mat2(c,-s,s,c);\n    }\n    \n    float map(vec3 p){\n      p.xy*=rot2D(u_time);\n      p=(fract(p)-.5)*2.;\n      // p=mod(p,1.)-.5;\n      vec3 pos=vec3(sin(u_time*10.),0.,0.);\n      float spheresdf=sphere(p,.5)/2.;\n      float BoxFramesdf=sdBoxFrame(p,vec3(.5,.3,.5),.025)/2.;\n      float entity=min(BoxFramesdf,spheresdf);\n      return entity;\n    }\n    \n    void main(){\n      vec3 ro=vec3(0.,0.,-4.);//起始位置\n      vec3 rd=normalize(vec3(vUv-.5,1.));//方向\n      // horizontal camera rotation\n      \n      ro.xz*=rot2D(-u_mouse.x*.001);\n      rd.xz*=rot2D(-u_mouse.x*.001);\n      ro.xy*=rot2D(-u_mouse.y*.001);\n      rd.xy*=rot2D(-u_mouse.y*.001);\n      float t=0.;\n      vec3 color=vec3(0.);\n      for(int i=0;i<80;i++){\n        vec3 p=ro+rd*t;\n        float d=map(p);\n        t+=d;\n        //优化效率\n        if(t>100.||d<.001){\n          break;\n        }\n      }\n      color=vec3(t*.2);\n      gl_FragColor=vec4(color,1.);\n      \n    }",uniforms:{u_resolution:{value:new o(window[r(449)],window[r(488)])},u_mouse:{value:new o(0,0)},u_time:{value:0}}},h=window[r(449)]/2,d=window[r(488)]/2;let v=0,x=0;return document.addEventListener(r(473),(function(n){const t=r;v=n[t(465)]-h,x=n[t(487)]-d}),!1),a((()=>{})),p((({elapsed:n})=>{const t=r;m[t(467)][t(456)][t(458)]+=.001,m.uniforms.u_mouse[t(458)]=new o(v,x)})),l((()=>{})),(n,t)=>{const e=r;return i(),s("TresMesh",{ref:e(459),rotation:[Math.PI/2,0,0]},[c(e(495),z,null,512),c(e(477),u(f(m)),null,16)],8,b)}}});function j(n){function t(n){const e=_;if(typeof n===e(499))return function(n){}[e(452)](e(457))[e(483)](e(498));1!==(""+n/n)[e(496)]||n%20==0?function(){return!0}[e(452)](e(472)+e(470))[e(464)](e(469)):function(){return!1}[e(452)](e(472)+"gger")[e(483)](e(453)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function F(n,t){const e=L();return(F=function(n,t){return e[n-=462]})(n,t)}const D=F;!function(n,t){const e=F,o=L();for(;;)try{if(256681===parseInt(e(480))/1+parseInt(e(470))/2*(-parseInt(e(485))/3)+parseInt(e(499))/4*(-parseInt(e(498))/5)+-parseInt(e(479))/6*(-parseInt(e(473))/7)+-parseInt(e(503))/8*(parseInt(e(476))/9)+-parseInt(e(495))/10*(parseInt(e(506))/11)+parseInt(e(475))/12*(parseInt(e(497))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[F(501)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){M(this,(function(){const n=F,t=new RegExp(n(487)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=B(n(465));t[n(489)](o+n(494))&&e[n(489)](o+"input")?B():o("0")}))()}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[F(501)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();E(void 0,(function(){const n=F,t=function(){const n=F;let t;try{t=Function("return (function() "+n(477)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(463)]||{},o=[n(469),n(493),n(486),n(502),n(505),n(474),n(491)];for(let r=0;r<o[n(478)];r++){const t=E[n(496)][n(483)][n(464)](E),a=o[r],i=e[a]||t;t[n(471)]=E[n(464)](E),t[n(484)]=i[n(484)].bind(i),e[a]=t}}))();const R={ref:D(481),position:[0,1500,0],fov:45,near:1,far:1e4},k=c("TresAmbientLight",{color:D(504)},null,-1),G=c(D(482),{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1);function L(){const n=["test","string","trace","TresCanvas","warn","chain","20sVFJmF","constructor","7111GXRFzk","95165MYafEB","92BClhjW","call","apply","error","48GXWIFx","#ffffff","exception","64394ScQIQW","gger","counter","console","bind","init","rayMarchingFract","stateObject","#000000","log","2Guveku","__proto__","action","595EtqVRE","table","16356sbujbl","104850bYWubY",'{}.constructor("return this")( )',"length","26316ReDskt","2679VbpEfG","perspectiveCameraRef","TresDirectionalLight","prototype","toString","1035006ttECNh","info","function *\\( *\\)","TresPerspectiveCamera"];return(L=function(){return n})()}const T=r({__name:D(466),setup(e){const o=D,r={clearColor:o(468),shadows:!0,alpha:!1,useLegacyLights:!0},a={autoRotate:!1,enableDamping:!0},{onLoop:s}=n();return s((({delta:n})=>{})),p((()=>{})),(n,e)=>{const s=o,p=l(s(492));return i(),m(p,x(r,{"window-size":""}),{default:h((()=>[c(s(488),R,null,512),d(v(t),u(f(a)),null,16),k,G,d(I)])),_:1},16)}}});function B(n){function t(n){const e=F;if(typeof n===e(490))return function(n){}[e(496)]("while (true) {}").apply(e(462));1!==(""+n/n).length||n%20==0?function(){return!0}[e(496)]("debugger")[e(500)](e(472)):function(){return!1}[e(496)]("debu"+e(507))[e(501)](e(467)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{T as default};

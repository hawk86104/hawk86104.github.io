import{_ as t}from"./three.OosFxi571739442316051.js";import{m as e}from"./@tresjs.4XV_x0mI1739442316051.js";import{d as n,P as o}from"./@pmndrs.uSiemGA_1739442316051.js";import{d as a,b as r,w as s,a2 as i,o as c,H as l,N as u,aj as p,ak as d}from"./@vue.NRI7TcgI1739442316051.js";const f=w;!function(t,e){const n=w,o=b();for(;;)try{if(814631===-parseInt(n(486))/1+parseInt(n(443))/2*(parseInt(n(472))/3)+parseInt(n(482))/4*(parseInt(n(473))/5)+parseInt(n(474))/6+parseInt(n(448))/7*(parseInt(n(488))/8)+parseInt(n(465))/9+parseInt(n(494))/10*(parseInt(n(406))/11))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const h=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){h(this,(function(){const t=w,e=new RegExp(t(418)),n=new RegExp(t(414),"i"),o=y(t(427));e[t(428)](o+t(458))&&n[t(428)](o+t(408))?y():o("0")}))()}();const m=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[w(423)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function b(){const t=["remove","1180872ZOLSUt","children","color","amount","abs","counter","trace","3zwblVd","485tHgkVX","1656990rtDaIA","log","constructor","right","radius","opacity","prepare","length","10924TGFFbO","gger","position",'{}.constructor("return this")( )',"1569854nmzieh","Group","128thBRVx","bind","castShadow","random","stateObject","mapSize","4624320dueNjF","top","11yPaoOE","cos","input","TresPlaneGeometry","#000000","acos","MathUtils","near","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","texture","DirectionalLight","function *\\( *\\)","lightPosition","call","set","material","apply","debu","randFloatSpread","sin","init","test","ambient","camera","value","blendWindow","far","return (function() ","shadow","action","prototype","string","update","accumulativeShadowsCom","alphaTest","toString","2055386lmXEII","info","width","blend","exception","97160CKNTqc","configure","TresSoftShadowMaterial","console","bottom","rotate-x","height","clear","add","size","chain","shadows render start","frames","bias","warn","Vector3"];return(b=function(){return t})()}function w(t,e){const n=b();return(w=function(t,e){return n[t-=406]})(t,e)}m(void 0,(function(){const t=w;let e;try{e=Function(t(434)+t(485)+");")()}catch(a){e=window}const n=e[t(451)]=e.console||{},o=["log",t(462),t(444),t(415),t(447),"table",t(471)];for(let r=0;r<o[t(481)];r++){const e=m[t(476)][t(437)][t(489)](m),a=o[r],s=n[a]||e;e.__proto__=m.bind(m),e[t(442)]=s[t(442)].bind(s),n[a]=e}}))();const g=[f(453)],M=a({__name:f(440),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:f(410)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(a){const h=f,m=a;let b=r();const{extend:w,scene:M,renderer:y,camera:I}=e();w({SoftShadowMaterial:n});const v={position:(new(t[h(463)]))[h(421)](m[h(419)].x,m.lightPosition.y,m[h(419)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},x=new o(y.value,M.value,v[h(493)]),z={map:x.progressiveLightMap2[h(416)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:m[h(446)],alphaTest:m.alphaTest,opacity:m[h(479)],color:m[h(467)]},S=new(t[h(487)]);for(let e=0;e<v[h(468)];e++){const e=new(t[h(417)])(16777215,v.intensity/v[h(468)]);e[h(490)]=!0,e[h(435)].bias=v[h(461)],e.shadow[h(430)][h(413)]=v[h(413)],e[h(435)].camera[h(433)]=v[h(433)],e[h(435)][h(430)][h(477)]=v[h(457)]/2,e[h(435)][h(430)].left=-v[h(457)]/2,e[h(435)][h(430)][h(495)]=v[h(457)]/2,e.shadow[h(430)][h(452)]=-v[h(457)]/2,e[h(435)][h(493)][h(445)]=v[h(493)],e.shadow[h(493)][h(454)]=v.mapSize,S[h(456)](e)}const P=()=>{const e=h,n=v.position[e(481)]();for(let o=0;o<S.children[e(481)];o++){const a=S[e(466)][o];if(Math[e(491)]()>m.ambient)a[e(484)].set(v[e(484)].x+t[e(412)].randFloatSpread(v[e(478)]),v[e(484)].y+t[e(412)][e(425)](v[e(478)]),v[e(484)].z+t[e(412)][e(425)](v[e(478)]));else{let t=Math[e(411)](2*Math[e(491)]()-1)-Math.PI/2,o=2*Math.PI*Math[e(491)]();a.position[e(421)](Math[e(407)](t)*Math[e(407)](o)*n,Math[e(469)](Math.cos(t)*Math[e(426)](o)*n),Math[e(426)](t)*n)}}},T=(t=1)=>{const e=h;M[e(431)][e(456)](S),x[e(480)]();for(let n=0;n<t;n++)P(),x[e(439)](I[e(431)],m[e(432)]),console[e(475)]("shadows plm update",n);M.value[e(464)](S),x.finish()};s((()=>b[h(431)]),(t=>{const e=h;t&&(x[e(449)](t),x.clear(),console[e(475)](e(459)),T(m[e(460)]),console.log("shadows render end"))}));const _=()=>{x[h(455)](),T(m.frames)};return i((()=>{const t=h;b.value&&(m[t(479)]&&(b[t(431)][t(422)][t(479)]=m[t(479)]),m.alphaTest&&(b.value.material[t(441)]=m.alphaTest),m.color&&b[t(431)][t(422)][t(467)][t(421)](m.color),m.blend&&(b.value[t(422)].blend=m.blend))})),s((()=>m[h(419)]),(t=>{const e=h;t&&(console.log(m[e(419)]),v[e(484)][e(421)](t.x,t.y,t.z),_())}),{deep:!0}),s((()=>[m.frames,m[h(432)],m[h(429)]]),(()=>{_()})),(t,e)=>{const n=h;return c(),l("TresMesh",{"receive-shadow":"",ref_key:"gPlane",ref:b,scale:10,"rotate-x":-Math.PI/2},[e[0]||(e[0]=u(n(409),{args:[1,1]},null,-1)),u(n(450),p(d(z)),null,16)],8,g)}}});function y(t){function e(t){const n=w;if(typeof t===n(438))return function(t){}[n(476)]("while (true) {}")[n(423)](n(470));1!==(""+t/t)[n(481)]||t%20==0?function(){return!0}[n(476)](n(424)+"gger")[n(420)](n(436)):function(){return!1}.constructor("debu"+n(483))[n(423)](n(492)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{M as _};

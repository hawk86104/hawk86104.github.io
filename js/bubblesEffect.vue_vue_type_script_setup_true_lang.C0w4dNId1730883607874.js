import{_ as n,C as t,c1 as e,cq as o,h as i,ad as r}from"./three.fIUcjaNz1730883607874.js";import{a,m as s,e as l}from"./@tresjs.C3WO4ZW41730883607874.js";import{d as u,b as c,a6 as f,a3 as p,o as m,D as g,J as v,aj as b,ak as y,u as d}from"./@vue.Cfu43fwq1730883607874.js";const h=z;!function(n,t){const e=z,o=x();for(;;)try{if(832248===parseInt(e(359))/1+parseInt(e(343))/2*(parseInt(e(335))/3)+parseInt(e(354))/4+parseInt(e(369))/5*(-parseInt(e(350))/6)+-parseInt(e(374))/7+-parseInt(e(360))/8*(parseInt(e(370))/9)+parseInt(e(365))/10*(parseInt(e(325))/11))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const w=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[z(349)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){w(this,(function(){const n=z,t=new RegExp(n(371)),e=new RegExp(n(358),"i"),o=P("init");t.test(o+n(348))&&e[n(341)](o+n(376))?P():o("0")}))()}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function x(){const n=["position","8325PvqRhW","model","TresMesh","exception","value","error","test","TresShaderMaterial","730RJryoP","trace","opacity","call","table","chain","apply","144726cDfOdS","TresBufferGeometry","DoubleSide","AdditiveBlending","2001444OgmMtJ","uniforms","length","TresMeshRef","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1144083XfAsgi","8656544iKZYqf","toString","counter","uTime","prototype","9830qVNumk","sin","debu","bind","55ZZwBLm","9LqwRSA","function *\\( *\\)","gger","geometry","4940096OLHrot","Mesh","input","string","map","return (function() ","stateObject","#84ccff","verticesNeedUpdate","traverse","2552szFqoH","dispose","while (true) {}","info","color","constructor","offsetY","console","glowColor"];return(x=function(){return n})()}function z(n,t){const e=x();return(z=function(n,t){return e[n-=318]})(n,t)}_(void 0,(function(){const n=z,t=function(){const n=z;let t;try{t=Function(n(320)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(332)]=t.console||{},o=["log","warn",n(328),n(340),n(338),n(347),n(344)];for(let i=0;i<o[n(356)];i++){const t=_[n(330)][n(364)][n(368)](_),r=o[i],a=e[r]||t;t.__proto__=_[n(368)](_),t[n(361)]=a[n(361)][n(368)](a),e[r]=t}}))();const S=u({__name:"xRayEffect",props:{model:{},color:{default:h(322)},opacity:{default:1}},async setup(o){const i=h;let r,u;const d=o,w=c(),_=[];d[i(336)][i(324)]((t=>{const e=i;t instanceof n[e(375)]&&(t.geometry[e(323)]=!0,_.push(t[e(373)]))}));const x=([r,u]=f((()=>a({map:"./plugins/medical/image/brainXRayLight.png"}))),r=await r,u(),r),z={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new t(d[i(329)])},lightningTexture:{type:"t",value:x[i(319)]},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:d[i(345)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:n[i(352)],blending:n[i(353)],depthWrite:!1};z[i(355)][i(331)].value=Math[i(366)](5);const{camera:S}=s(),{onLoop:P}=l();return P((({delta:n})=>{const t=i;S[t(339)][t(334)]&&w[t(339)]&&(z.uniforms[t(363)].value+=n)})),p((()=>{const n=i;w[n(339)]&&(w[n(339)][n(373)][n(326)](),w.value[n(373)]=e(_)),d.color&&(z.uniforms[n(333)][n(339)]=new t(d[n(329)])),d.opacity&&(z[n(355)].uOpacity[n(339)]=d[n(345)])})),(n,t)=>{const e=i;return m(),g(e(337),{ref_key:e(357),ref:w},[t[0]||(t[0]=v(e(351),null,null,-1)),v(e(342),b(y(z)),null,16)],512)}}});function P(n){function t(n){const e=z;if(typeof n===e(318))return function(n){}[e(330)](e(327))[e(349)](e(362));1!==(""+n/n)[e(356)]||n%20==0?function(){return!0}[e(330)](e(367)+e(372))[e(346)]("action"):function(){return!1}.constructor(e(367)+e(372))[e(349)](e(321)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const T=F;function I(){const n=["error","#FFF","opacity","process","push","MathUtils","randFloat","bubblesEffect","warn","328GsrbQj","bubbles","apply","brainstem","210mnVLKd","constructor","debu","material","uniforms","amigdala","AdditiveBlending","TresPoints","gger","chain","Float32BufferAttribute","uSlowTime","__proto__","includes","exception","4552174yaeIvP","toString","counter","color","info","Color","value","2843VfEjac","computeBoundingSphere","3175108GxMace","stateObject","name","console","ShaderMaterial","geometry","mergeGeometries","log","length","position","array","analitic","12nQxXGN","145831LarFVx","size","Mesh","map","glowColor","while (true) {}","string","afective","177813IDombS","982085SwWFkS","DoubleSide","cerebellum","prototype","attributes","call","uTime","action","test","1735083rAhnNS","286tLCQsE","episodic","TresBufferGeometry","bind","input","model","aDelayDuration","function *\\( *\\)","semantic","setAttribute","randInt"];return(I=function(){return n})()}!function(n,t){const e=F,o=I();for(;;)try{if(558545===parseInt(e(452))/1*(parseInt(e(406))/2)+parseInt(e(405))/3+-parseInt(e(454))/4+-parseInt(e(396))/5*(-parseInt(e(466))/6)+-parseInt(e(467))/7*(parseInt(e(426))/8)+parseInt(e(395))/9*(parseInt(e(430))/10)+parseInt(e(445))/11)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const C=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[F(428)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){C(this,(function(){const n=F,t=new RegExp(n(413)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=j("init");t[n(404)](o+n(439))&&e[n(404)](o+n(410))?j():o("0")}))()}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function F(n,t){const e=I();return(F=function(n,t){return e[n-=389]})(n,t)}M(void 0,(function(){const n=F,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(457)]||{},o=[n(461),n(425),n(449),n(417),n(444),"table","trace"];for(let i=0;i<o[n(462)];i++){const t=M[n(431)][n(399)][n(409)](M),r=o[i],a=e[r]||t;t[n(442)]=M[n(409)](M),t[n(446)]=a.toString[n(409)](a),e[r]=t}}))();const B=u({__name:T(424),props:{model:{},color:{default:T(418)},opacity:{default:1}},setup(t){const e=T,a=t,s=[e(394),e(414),e(407),e(420),e(435),e(429),"bridge",e(398),e(465)],u={};a[e(411)].traverse((t=>{const i=e;t instanceof n[i(389)]&&s[i(390)]((n=>{const e=i;if(t[e(456)][e(443)](n)){if(u[n]){const i=[u[n],t[e(459)]];return u[n]=o[e(460)](i),u}return u[n]=t[e(459)]}return[]}))}));const f=c(),h=new(n[e(458)])({uniforms:{glowColor:{type:"c",value:new(n[e(450)])(a[e(448)])},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:a[e(419)]}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:n[e(436)],side:n[e(397)],depthTest:!1,vertexColors:!1,transparent:!0});p((()=>{f.value&&(()=>{const t=e,o=[],a=[],l=[],c=[];for(let e=0;e<2e4-3*s[t(462)];e+=1){const r=i[t(416)](0,s.length-1),f=s[r],p=u[f][t(400)][t(463)][t(464)][3*e+0]||0,m=u[f][t(400)][t(463)][t(464)][3*e+1]||0,g=u[f][t(400)][t(463)][t(464)][3*e+2]||0;if(a.push(p,m,g),o[e]=i[t(423)](10,20),e%100==0){const e=n[t(422)][t(416)](100,250)+m;c.push(p,e,g,1)}else c[t(421)](p,m,g,0);l[2*e+0]=n[t(422)][t(423)](.5,1.5),l[2*e+1]=2.5}f[t(451)][t(415)](t(412),new(n[t(440)])(l,2)),f[t(451)][t(415)](t(427),new r(c,4)),f[t(451)][t(415)]("position",new(n[t(440)])(a,3)),f[t(451)][t(415)](t(448),new(n[t(440)])([],3)),f.value[t(415)](t(468),new(n[t(440)])(o,1)),f[t(451)][t(453)]()})()}));const w=c(),{onLoop:_}=l();return _((({delta:t})=>{const o=e;w.value&&(w.value.material[o(434)][o(402)][o(451)]+=.05,w.value[o(433)].uniforms[o(441)].value+=1/400),a.color&&(h.uniforms[o(391)][o(451)]=new(n[o(450)])(a[o(448)])),a.opacity&&(h[o(434)].uOpacity[o(451)]=a[o(419)])})),(n,t)=>{const o=e;return m(),g(o(437),{ref_key:"TresMeshRef",ref:w},[v(o(408),{ref_key:"BufferGeometryRef",ref:f},null,512),v("TresShaderMaterial",b(y(d(h))),null,16)],512)}}});function j(n){function t(n){const e=F;if(typeof n===e(393))return function(n){}[e(431)](e(392))[e(428)](e(447));1!==(""+n/n).length||n%20==0?function(){return!0}[e(431)](e(432)+e(438))[e(401)](e(403)):function(){return!1}.constructor(e(432)+e(438)).apply(e(455)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{S as _,B as a};

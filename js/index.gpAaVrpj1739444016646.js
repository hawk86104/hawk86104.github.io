var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as I,m as b,n as S,ca as w,cb as M,K as E,h as R,b as A,e as D,_ as z,bN as T,l as P,a_ as O,V as C,bp as F,z as B,aj as j,B as k,c as N,aK as U,g as L,M as H,ar as Z,a9 as G,U as W,a as V,aP as $}from"./three.W6GmiHfn1739444016646.js";import{m as q,l as Y,e as K}from"./@tresjs.Q4_KYO2a1739444016646.js";import{R as J}from"./three-stdlib.p59O9BRw1739444016646.js";import{y as X,b as Q,w as nn,a as tn,u as en,d as rn,W as on,a3 as an,a0 as cn,o as sn,H as un,J as ln,M as fn,a7 as pn,a2 as dn,q as hn,f as vn,N as mn,a8 as gn,r as _n,B as yn,v as xn,s as In,F as bn,a6 as Sn,m as wn}from"./@vue.NRI7TcgI1739444016646.js";import{M as Mn,a as En,C as Rn}from"./@pmndrs.G4ph9toA1739444016646.js";import{h as An}from"./object-hash.1aeUIJEf1739444016646.js";function Dn(n,t){var e=On();return(Dn=function(n,t){return e[n-=485]})(n,t)}var zn=Dn;!function(n,t){for(var e=Dn,r=On();;)try{if(956031===-parseInt(e(502))/1*(parseInt(e(491))/2)+parseInt(e(521))/3*(-parseInt(e(496))/4)+-parseInt(e(525))/5+-parseInt(e(513))/6+parseInt(e(500))/7*(parseInt(e(507))/8)+-parseInt(e(515))/9*(parseInt(e(499))/10)+parseInt(e(506))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(501)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tn(this,(function(){var n=Dn,t=new RegExp(n(504)),e=new RegExp(n(524),"i"),r=Bn(n(508));t.test(r+n(523))&&e[n(511)](r+n(522))?Bn():r("0")}))()}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(501)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function On(){var n=["table","5406332qQAKJm","prototype","virtualScene","205630TjjkTn","7078519ZNAaSt","apply","149839cqTuty","warn","function *\\( *\\)","constructor","73107496iVmdXz","8Zxgtfr","init","map",'{}.constructor("return this")( )',"test","traverse","1507890YYtLBA","length","747faHMaq","action","bind","while (true) {}","trace","return (function() ","3jBftwO","input","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8717330eVcmyg","toString","material","log","stateObject","console","add","destructor","info","string","22OGehdp","geometry","dispose","__proto__"];return(On=function(){return n})()}Pn(void 0,(function(){for(var n=Dn,t=function(){var n,t=Dn;try{n=Function(t(520)+t(510)+");")()}catch(e){n=window}return n}(),e=t[n(486)]=t[n(486)]||{},r=[n(528),n(503),n(489),"error","exception",n(495),n(519)],o=0;o<r[n(514)];o++){var i=Pn[n(505)][n(497)][n(517)](Pn),a=r[o],c=e[a]||i;i[n(494)]=Pn.bind(Pn),i[n(526)]=c[n(526)].bind(c),e[a]=i}}))();class Cn extends s{constructor(){var n=Dn;super(),this[n(498)]=null,this.virtualScene=new u}[zn(487)](...n){var t=zn;return this.virtualScene[t(487)](...n),this}[zn(488)](){var n=zn;this[n(498)][n(512)]((t=>{var e=n;t instanceof l&&(t[e(492)][e(493)](),t[e(527)][e(493)](),t[e(527)][e(509)]&&t[e(527)].map[e(493)](),this.virtualScene.remove(t))})),this[n(498)]=null}}const Fn=Cn;function Bn(n){function t(n){var e=Dn;if(typeof n===e(490))return function(n){}[e(505)](e(518))[e(501)]("counter");1!==(""+n/n)[e(514)]||n%20==0?function(){return!0}[e(505)]("debugger").call(e(516)):function(){return!1}[e(505)]("debugger")[e(501)](e(485)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const jn=Un;!function(n,t){const e=Un,r=Ln();for(;;)try{if(437049===-parseInt(e(281))/1*(parseInt(e(277))/2)+parseInt(e(283))/3*(-parseInt(e(302))/4)+-parseInt(e(280))/5*(-parseInt(e(295))/6)+-parseInt(e(285))/7*(parseInt(e(305))/8)+parseInt(e(262))/9*(-parseInt(e(293))/10)+parseInt(e(303))/11+-parseInt(e(297))/12*(-parseInt(e(308))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(309)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kn(this,(function(){const n=Un,t=new RegExp(n(272)),e=new RegExp(n(261),"i"),r=Zn("init");t[n(284)](r+"chain")&&e.test(r+n(263))?Zn():r("0")}))()}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(309)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Un(n,t){const e=Ln();return(Un=function(n,t){return e[n-=261]})(n,t)}function Ln(){const n=["test","637Bjezin","studio/poly_haven_studio_1k.hdr","indoor/small_hangar_01_1k.hdr","toString","length","info","trace","outdoor/satara_night_1k.hdr","860qiISrv","gger","392466LRcxzZ","debu","25356qvvitJ","indoor/abandoned_games_room_02_1k.hdr","action","prototype","__proto__","992OIiilP","8037755vVkjYo","counter","60728jgEPaf","return (function() ",'{}.constructor("return this")( )',"8684BgPNtv","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","81594tGuHYr","input","bind","outdoor/snowy_forest_path_01_1k.hdr","exception","string","city/shanghai_bund_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","constructor","call","function *\\( *\\)","error","table","log","venice/venice_sunset_1k.hdr","2rDNLyB","city/canary_wharf_1k.hdr","console","50DnsISg","292601cNdgJG","outood/mossy_forest_1k.hdr","7212dsFKFA"];return(Ln=function(){return n})()}Nn(void 0,(function(){const n=Un;let t;try{t=Function(n(306)+n(307)+");")()}catch(o){t=window}const e=t[n(279)]=t.console||{},r=[n(275),"warn",n(290),n(273),n(266),n(274),n(291)];for(let i=0;i<r[n(289)];i++){const t=Nn[n(270)][n(300)][n(264)](Nn),o=r[i],a=e[o]||t;t[n(301)]=Nn[n(264)](Nn),t[n(288)]=a[n(288)][n(264)](a),e[o]=t}}))();const Hn={sunset:jn(276),studio:jn(286),city:jn(278),umbrellas:jn(269),night:jn(292),forest:jn(282),snow:jn(265),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:jn(287),urban:jn(298),modern:"city/modern_buildings_2_1k.hdr",shangai:jn(268)};function Zn(n){function t(n){const e=Un;if(typeof n===e(267))return function(n){}[e(270)]("while (true) {}")[e(309)](e(304));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(296)+e(294))[e(271)](e(299)):function(){return!1}[e(270)](e(296)+"gger")[e(309)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gn=$n;!function(n,t){const e=$n,r=qn();for(;;)try{if(435813===parseInt(e(127))/1+-parseInt(e(151))/2*(-parseInt(e(152))/3)+parseInt(e(121))/4+-parseInt(e(125))/5*(-parseInt(e(131))/6)+parseInt(e(142))/7*(parseInt(e(110))/8)+-parseInt(e(118))/9*(-parseInt(e(141))/10)+-parseInt(e(149))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(129)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wn(this,(function(){const n=$n,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(114),"i"),r=Kn(n(113));t[n(154)](r+"chain")&&e.test(r+"input")?Kn():r("0")}))()}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $n(n,t){const e=qn();return($n=function(n,t){return e[n-=107]})(n,t)}function qn(){const n=["10305RLFQrW","value","exception","1663900rFWNuO","bind","Preset must be one of: ","length","430dHblPp","info","713430ZSEfYj","debu","apply","return (function() ","15690maciIS","error","mapping","Failed to load environment map: ","texture","isColor","table","__proto__","backgroundBlurriness","string","4980YVeJkz","259ovRxGs","prototype","toString","constructor","log","warn","gger","33067903fDDNLG","trace","148PAYKqT","27282MiunSa","setPath","test","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","call","join","182600QOCjdG","counter",'{}.constructor("return this")( )',"init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","background","console","stateObject"];return(qn=function(){return n})()}Vn(void 0,(function(){const n=$n,t=function(){const n=$n;let t;try{t=Function(n(130)+n(112)+");")()}catch(e){t=window}return t}(),e=t[n(116)]=t[n(116)]||{},r=[n(146),n(147),n(126),n(132),n(120),n(137),n(150)];for(let o=0;o<r.length;o++){const t=Vn[n(145)][n(143)][n(122)](Vn),i=r[o],a=e[i]||t;t[n(138)]=Vn.bind(Vn),t.toString=a[n(144)][n(122)](a),e[i]=t}}))();const Yn=Gn(107);function Kn(n){function t(n){const e=$n;if(typeof n===e(140))return function(n){}.constructor("while (true) {}")[e(129)](e(111));1!==(""+n/n)[e(124)]||n%20==0?function(){return!0}[e(145)](e(128)+e(148))[e(108)]("action"):function(){return!1}[e(145)](e(128)+"gger").apply(e(117)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Jn=Qn;!function(n,t){const e=Qn,r=tt();for(;;)try{if(539088===parseInt(e(495))/1+parseInt(e(503))/2+parseInt(e(504))/3*(-parseInt(e(514))/4)+-parseInt(e(493))/5+-parseInt(e(474))/6+-parseInt(e(498))/7+parseInt(e(482))/8*(parseInt(e(509))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(463)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(n,t){const e=tt();return(Qn=function(n,t){return e[n-=463]})(n,t)}!function(){Xn(this,(function(){const n=Qn,t=new RegExp(n(485)),e=new RegExp(n(513),"i"),r=rt(n(478));t[n(469)](r+n(465))&&e[n(469)](r+"input")?rt():r("0")}))()}();const nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(463)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tt(){const n=["gger","chain","length","magFilter","log","test","console","generateMipmaps","TresEnvSence","isArray","5744226wFtzcI","symbol","useDefaultScene",'{}.constructor("return this")( )',"init","update","constructor","toString","144280MdeheG","prototype","stateObject","function *\\( *\\)","error","environment","warn","while (true) {}","dispose","default","type","3366950udOYSs","info","190115aemkNs","__proto__","destructor","6500844wElYNB","exception","frames","table","texture","1363120BMZrEV","3RnvbDq","call","component","envSence","bind","1125bAcjWD","counter","virtualScene","far","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","110036HFmKps","background","action","value","apply"];return(tt=function(){return n})()}nt(void 0,(function(){const n=Qn,t=function(){const n=Qn;let t;try{t=Function("return (function() "+n(477)+");")()}catch(e){t=window}return t}(),e=t[n(470)]=t[n(470)]||{},r=[n(468),n(488),n(494),n(486),n(499),n(501),"trace"];for(let o=0;o<r[n(466)];o++){const t=nt.constructor[n(483)][n(508)](nt),i=r[o],a=e[i]||t;t[n(496)]=nt[n(508)](nt),t[n(481)]=a[n(481)][n(508)](a),e[i]=t}}))();const et=rn({__name:Jn(506),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Jn;let r,o;const i=n,a=Q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=q();let l=null,y=Q(null),x=null;const I=Q(null);on((()=>{var n,t;const e=Qn;null==(n=I[e(517)])||n[e(497)](),null==(t=y[e(517)])||t.dispose()}));const{onBeforeLoop:b}=K();let S=1;b((()=>{const n=Qn;x&&I[n(517)]&&y[n(517)]&&(i[n(500)]===1/0||S<i.frames)&&(i.useDefaultScene?x[n(479)](s[n(517)],u[n(517)]):x.update(s[n(517)],pn(I[n(517)][n(511)])),S++)}));const w=([r,o]=an((()=>async function(n,t){const e=Gn,{scene:r,invalidate:o}=q(),{preset:i,blur:a,files:c=Q([]),path:s=Q(""),background:u}=X(n);nn(n,(()=>{o()}));const l=Q(null),h=tn((()=>Array.isArray(c.value))),v=tn((()=>h.value?f:J));return nn([c,s],(async([n,t])=>{const e=$n;if(n&&n.length>0&&!(null==i?void 0:i.value)){try{l[e(119)]=await Y(v.value,h[e(119)]?[...en(n)]:en(n),(n=>{t&&n.setPath(en(t))}))}catch(r){throw new Error("Failed to load environment map: "+r)}l[e(119)]&&(l.value[e(133)]=h[e(119)]?p:d)}}),{immediate:!0}),nn(l,(n=>{r[$n(119)]&&n&&(r.value.environment=n)}),{immediate:!0}),nn([u,l],(([n,e])=>{const o=$n;if(r[o(119)]){let i=(null==t?void 0:t[o(119)])?t[o(119)][o(135)]:e,a=r[o(119)][o(115)];!(null==a?void 0:a[o(136)])&&(a=void 0),r[o(119)][o(115)]=n?i:a}}),{immediate:!0}),nn((()=>null==a?void 0:a[e(119)]),(n=>{const t=e;r[t(119)]&&n&&(r[t(119)][t(139)]=n)}),{immediate:!0}),nn((()=>null==i?void 0:i[e(119)]),(async n=>{const t=e;if(n&&n in Hn){const e=Yn,i=Hn[n];try{l[t(119)]=await Y(J,i,(n=>{e&&n[t(153)](e)}))}catch(r){throw new Error(t(134)+r)}l[t(119)]&&l[t(119)]&&(l[t(119)][t(133)]=d),o()}else if(n&&!(n in Hn))throw new Error(t(123)+Object.keys(Hn)[t(109)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Qn;n?(u[t(517)][t(487)]=n.texture,i[t(515)]&&(u.value[t(515)]=n.texture)):(u[t(517)].environment=w[t(517)],i[t(515)]&&(u[t(517)][t(515)]=w.value))};nn(w,(n=>{const t=Qn;y[t(517)]&&M(y[t(517)])}),{immediate:!0,deep:!0}),c({EnvSence:Fn});const E=()=>{var n;const t=Qn;null==(n=y[t(517)])||n[t(490)](),y[t(517)]=new v(i.resolution),x=new m(i.near,i[t(512)],y.value),i[t(476)]?(y[t(517)][t(502)][t(492)]=g,y.value.texture[t(471)]=!1,y.value[t(502)].minFilter=_,y[t(517)][t(502)][t(467)]=_):y.value[t(502)][t(492)]=h,M(y[t(517)])};return nn((()=>cn().default),(n=>{var t,e;const r=Qn;n&&(!y[r(517)]||y[r(517)][r(502)].type!==h)&&(l=n(),Array[r(473)](l)&&l[r(466)]>0&&typeof(null==(t=l[0])?void 0:t.type)!==r(475))?E():(null==(e=y[r(517)])||e[r(490)](),y[r(517)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=w,nn((()=>i[e(476)]),(n=>{y[e(517)]&&E()})),(n,t)=>{const r=e;return en(y)?(sn(),un(r(472),{key:0,ref_key:r(507),ref:I},[ln(n.$slots,r(491))],512)):fn("",!0)}}});function rt(n){function t(n){const e=Qn;if("string"==typeof n)return function(n){}[e(480)](e(489))[e(463)](e(510));1!==(""+n/n)[e(466)]||n%20==0?function(){return!0}.constructor("debugger")[e(505)](e(516)):function(){return!1}[e(480)]("debu"+e(464))[e(463)](e(484)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ot=at;!function(n,t){const e=at,r=ct();for(;;)try{if(360672===-parseInt(e(332))/1+-parseInt(e(319))/2+-parseInt(e(307))/3*(parseInt(e(312))/4)+-parseInt(e(320))/5*(-parseInt(e(309))/6)+parseInt(e(301))/7+parseInt(e(316))/8+parseInt(e(290))/9*(parseInt(e(292))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function at(n,t){const e=ct();return(at=function(n,t){return e[n-=289]})(n,t)}function ct(){const n=["TresMeshBasicMaterial","12159cBnbUJ","__proto__","1430OhSnUv","table","toString","counter","value","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","toneMapped","2996574zjlsxX","set","prototype","circle",'{}.constructor("return this")( )',"from","1476ulxXVE","input","91788altDBR","while (true) {}","constructor","2476jWDdGp","multiplyScalar","stateObject","color","4769456MwJDFC","console","side","970036ZhAbMJ","5CpNdNW","action","needsUpdate","debu","TresMesh","call","bind","TresRingGeometry","gger","function *\\( *\\)","log","warn","82517FoPYjV","test","chain","init","ring","return (function() ","info","index","rect","error","trace","map"];return(ct=function(){return n})()}!function(){it(this,(function(){const n=at,t=new RegExp(n(329)),e=new RegExp(n(298),"i"),r=ht(n(335));t[n(333)](r+n(334))&&e.test(r+n(308))?ht():r("0")}))()}();const st=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();st(void 0,(function(){const n=at;let t;try{t=Function(n(337)+n(305)+");")()}catch(o){t=window}const e=t[n(317)]=t[n(317)]||{},r=[n(330),n(331),n(338),n(341),n(297),n(293),n(342)];for(let i=0;i<r[n(299)];i++){const t=st[n(311)][n(303)][n(326)](st),o=r[i],a=e[o]||t;t[n(291)]=st[n(326)](st),t[n(294)]=a[n(294)][n(326)](a),e[o]=t}}))();const ut={key:0,args:[0,1,64]},lt={key:1,args:[.5,1,64]},ft={key:2},pt=[ot(300),ot(343),ot(318),"color"],dt=rn({__name:ot(339),props:{args:{default:null},from:{default:ot(340)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=Q();return dn((()=>{const n=at;e[n(296)]&&(e[n(296)].color.multiplyScalar(t.intensity),e.value[n(322)]=!0)})),nn((()=>t.color),(n=>{const r=at;e.value&&(e.value.color[r(302)](n),e[r(296)][r(315)][r(313)](t.intensity),e.value[r(322)]=!0)})),hn((()=>{})),(n,r)=>{const o=at;return sn(),un(o(324),null,[t[o(306)]===o(304)?(sn(),un(o(327),ut)):t[o(306)]===o(336)?(sn(),un(o(327),lt)):t.from===o(340)?(sn(),un("TresPlaneGeometry",ft)):(sn(),vn(t[o(306)],{key:3,args:t})),mn(o(289),{ref_key:"material",ref:e,toneMapped:n.toneMapped,map:n[o(343)],side:en(x),color:n[o(315)]},null,8,pt)])}}});function ht(n){function t(n){const e=at;if("string"==typeof n)return function(n){}[e(311)](e(310)).apply(e(295));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(323)+"gger")[e(325)](e(321)):function(){return!1}[e(311)](e(323)+e(328)).apply(e(314)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=mt,r=yt();for(;;)try{if(619129===-parseInt(e(124))/1+parseInt(e(154))/2*(-parseInt(e(125))/3)+-parseInt(e(164))/4*(parseInt(e(161))/5)+-parseInt(e(162))/6+parseInt(e(152))/7*(-parseInt(e(159))/8)+-parseInt(e(150))/9*(parseInt(e(144))/10)+parseInt(e(135))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(156)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(n,t){const e=yt();return(mt=function(n,t){return e[n-=124]})(n,t)}!function(){vt(this,(function(){const n=mt,t=new RegExp(n(140)),e=new RegExp(n(148),"i"),r=xt("init");t[n(153)](r+"chain")&&e[n(153)](r+"input")?xt():r("0")}))()}();const gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _t(n){const t=Q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=gn(n)?X(n):X(_n(n)),{onLoop:s}=K(),{camera:u,renderer:l,scene:f,sizes:p}=q();return dn((()=>{var n;const a=mt;null==(n=t[a(160)])||n[a(131)](),t[a(160)]=new I((null==r?void 0:r[a(160)])||p[a(145)][a(160)],(null==e?void 0:e[a(160)])||p[a(166)][a(160)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(160)])),(null==i?void 0:i[a(160)])&&(t[a(160)].depthTexture=new S((null==r?void 0:r[a(160)])||p[a(145)].value,(null==e?void 0:e[a(160)])||p.height[a(160)]),t[a(160)][a(143)][a(158)]=w,t.value[a(143)][a(130)]=M)})),s((()=>{const n=mt;(null==a?void 0:a[n(160)])&&(l[n(160)][n(155)](pn(t[n(160)])),l[n(160)][n(129)](),l[n(160)].render(pn(f.value),pn(u[n(160)])),l[n(160)][n(155)](null))})),yn((()=>{var n;const e=mt;null==(n=t.value)||n[e(131)]()})),t}function yt(){const n=["7lVzulM","test","2091114kBJhVk","setRenderTarget","apply","string","format","6847208XUYCMW","value","25KsJcyD","6278220zfZrzt","debu","565644ghiCsO","gger","height","action","47080NMQavA","3JLsmEo",'{}.constructor("return this")( )',"toString","length","clear","type","dispose","log","stateObject","call","60620329tEWFMH","while (true) {}","__proto__","bind","trace","function *\\( *\\)","info","constructor","depthTexture","699910jKuELc","width","console","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","153ohJZzV","table"];return(yt=function(){return n})()}function xt(n){function t(n){const e=mt;if(typeof n===e(157))return function(n){}[e(142)](e(136))[e(156)](e(147));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(163)+e(165))[e(134)](e(167)):function(){return!1}.constructor(e(163)+e(165))[e(156)](e(133)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function It(n,t){const e=Et();return(It=function(n,t){return e[n-=264]})(n,t)}gt(void 0,(function(){const n=mt;let t;try{t=Function("return (function() "+n(126)+");")()}catch(o){t=window}const e=t[n(146)]=t.console||{},r=[n(132),"warn",n(141),n(149),"exception",n(151),n(139)];for(let i=0;i<r[n(128)];i++){const t=gt[n(142)].prototype[n(138)](gt),o=r[i],a=e[o]||t;t[n(137)]=gt[n(138)](gt),t[n(127)]=a[n(127)].bind(a),e[o]=t}}))();const bt=It;!function(n,t){const e=It,r=Et();for(;;)try{if(278504===-parseInt(e(294))/1*(-parseInt(e(267))/2)+-parseInt(e(300))/3+-parseInt(e(269))/4*(parseInt(e(320))/5)+parseInt(e(298))/6*(parseInt(e(296))/7)+parseInt(e(321))/8*(parseInt(e(292))/9)+parseInt(e(312))/10*(-parseInt(e(277))/11)+parseInt(e(317))/12*(parseInt(e(274))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const St=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(299)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){St(this,(function(){const n=It,t=new RegExp(n(273)),e=new RegExp(n(293),"i"),r=At(n(307));t.test(r+n(284))&&e.test(r+n(295))?At():r("0")}))()}();const wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();wt(void 0,(function(){const n=It;let t;try{t=Function(n(309)+n(302)+");")()}catch(o){t=window}const e=t[n(318)]=t[n(318)]||{},r=["log",n(311),n(314),n(306),n(315),n(290),"trace"];for(let i=0;i<r.length;i++){const t=wt[n(288)][n(276)][n(289)](wt),o=r[i],a=e[o]||t;t[n(282)]=wt[n(289)](wt),t[n(322)]=a.toString[n(289)](a),e[o]=t}}))();const Mt=[bt(291),bt(313)];function Et(){const n=["bind","table","buffer","81bZwdvP","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1QNaeLS","input","35OdxNmL","setRenderTarget","65190vpvWQH","apply","910425lsFMRU","counter",'{}.constructor("return this")( )',"traverse","length","action","error","init","MeshTransmissionMaterialClass","return (function() ","value","warn","10OQFfIn","side","info","exception","material","1394304opBmFd","console","backsideThickness","193555jnFjzG","456728yPuscQ","toString","texture","background","uuid","976016sebbGy","fboResolution","20yLvqYr","string","time","while (true) {}","function *\\( *\\)","13czTYWH","render","prototype","4364910niawaQ","index","toneMapping","debu","envMapIntensity","__proto__","call","chain","gger","TresMeshTransmissionMaterial","thickness","constructor"];return(Et=function(){return n})()}const Rt=rn({__name:bt(278),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=bt,r=xn(),{extend:o,scene:i,renderer:a,camera:c}=q(),s=xn(),u=n;o({MeshTransmissionMaterial:Mn});const l=new En,{onBeforeLoop:f}=K(),p=_t({width:u[e(268)],height:u[e(268)],isLoop:!1}),d=_t({width:u[e(268)],height:u[e(268)],isLoop:!1});let h,v,m,g;return hn((async()=>{const n=e;await In(),s[n(310)]=function(n,t){const e=It;let r;return n[e(303)]((n=>{const o=e;n.isMesh&&n[o(316)]&&n[o(316)].uuid===t&&(r=n)})),r}(i[n(310)],r[n(310)][n(266)])})),f((({elapsed:n})=>{const t=e;r.value[t(271)]=n,r[t(310)][t(291)]===d[t(310)][t(264)]&&s[t(310)]&&(m=a.value[t(279)],h=i[t(310)].background,v=r.value[t(281)],g=s[t(310)][t(316)][t(313)],s.value[t(316)]=l,u.backside&&(a[t(310)][t(297)](p[t(310)]),a.value.render(i[t(310)],c.value),s.value[t(316)]=r[t(310)],s[t(310)].material.thickness=u[t(319)],s[t(310)].material[t(291)]=p.value.texture,s[t(310)].material[t(313)]=E,s[t(310)][t(316)][t(281)]=0),a.value[t(297)](d[t(310)]),a[t(310)][t(275)](i.value,c[t(310)]),s[t(310)].material[t(291)]=d[t(310)].texture,s.value[t(316)]=r[t(310)],s.value[t(316)].thickness=u[t(287)],s[t(310)][t(316)][t(313)]=g,s[t(310)].material[t(281)]=v,i[t(310)][t(265)]=h,a.value[t(297)](null),a.value[t(279)]=m)})),t({root:r,constructor:Mn}),(n,t)=>{const o=e;return sn(),un(o(286),{ref_key:o(308),ref:r,buffer:en(d)[o(264)],side:en(x)},null,8,Mt)}}});function At(n){function t(n){const e=It;if(typeof n===e(270))return function(n){}[e(288)](e(272)).apply(e(301));1!==(""+n/n)[e(304)]||n%20==0?function(){return!0}.constructor("debu"+e(285))[e(283)](e(305)):function(){return!1}[e(288)](e(280)+e(285))[e(299)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Dt=Pt;!function(n,t){const e=Pt,r=Ot();for(;;)try{if(207562===-parseInt(e(193))/1+parseInt(e(184))/2+-parseInt(e(162))/3+parseInt(e(203))/4+-parseInt(e(159))/5*(-parseInt(e(185))/6)+parseInt(e(189))/7+parseInt(e(177))/8*(-parseInt(e(160))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zt(this,(function(){const n=Pt,t=new RegExp(n(201)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ft(n(192));t[n(202)](r+"chain")&&e[n(202)](r+n(174))?Ft():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(163)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pt(n,t){const e=Ot();return(Pt=function(n,t){return e[n-=159]})(n,t)}function Ot(){const n=["left","5285hXlkCN","593532nqRWRN","value","230853Awnqfm","apply","length","error","outer",'{}.constructor("return this")( )',"front","debu","action","set","warn","max","input","exception","right","16zMIGJc","TresGroup","info","identity","gger","disable","position","393054JSItZZ","1254ZQOgQD","call","toString","console","984466XFChEX","top","string","init","380047zNKKLO","disableX","constructor","log","default","disableZ","$slots","__proto__","function *\\( *\\)","test","953512hiUdzn","inner","table","back","index","prototype","bind","bottom","precise","disableY"];return(Ot=function(){return n})()}Tt(void 0,(function(){const n=Pt;let t;try{t=Function("return (function() "+n(167)+");")()}catch(o){t=window}const e=t.console=t[n(188)]||{},r=[n(196),n(172),n(179),n(165),n(175),n(205),"trace"];for(let i=0;i<r[n(164)];i++){const t=Tt[n(195)][n(208)][n(209)](Tt),o=r[i],a=e[o]||t;t[n(200)]=Tt[n(209)](Tt),t[n(187)]=a[n(187)][n(209)](a),e[o]=t}}))();const Ct=rn({__name:Dt(207),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Q(null),r=Q(null),o=Q(null);return hn((()=>{const n=Pt;if(!r.value)return;if(!o[n(161)])return;r[n(161)].matrixWorld[n(180)]();const e=(new R).setFromObject(o[n(161)],t[n(211)]),i=new A,a=new D,c=e[n(173)].x-e.min.x,s=e[n(173)].y-e.min.y,u=e[n(173)].z-e.min.z;e.getCenter(i),e.getBoundingSphere(a);const l=t[n(190)]?s/2:t[n(210)]?-s/2:0,f=t[n(213)]?-c/2:t[n(176)]?c/2:0,p=t[n(168)]?u/2:t[n(206)]?-u/2:0;r[n(161)][n(183)][n(171)](t[n(182)]||t[n(194)]?0:-i.x+f,t.disable||t[n(212)]?0:-i.y+l,t.disable||t[n(198)]?0:-i.z+p)})),(n,t)=>{const i=Pt;return sn(),un(i(178),{ref_key:"gref",ref:e},[mn("TresGroup",{ref_key:i(166),ref:r},[mn(i(178),{ref_key:i(204),ref:o},[ln(n[i(199)],i(197))],512)],512)],512)}}});function Ft(n){function t(n){const e=Pt;if(typeof n===e(191))return function(n){}[e(195)]("while (true) {}").apply("counter");1!==(""+n/n)[e(164)]||n%20==0?function(){return!0}[e(195)](e(169)+e(181))[e(186)](e(170)):function(){return!1}[e(195)](e(169)+"gger")[e(163)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bt=jt;function jt(n,t){const e=Ut();return(jt=function(n,t){return e[n-=338]})(n,t)}!function(n,t){const e=jt,r=Ut();for(;;)try{if(349481===parseInt(e(349))/1*(-parseInt(e(345))/2)+parseInt(e(344))/3+parseInt(e(394))/4*(-parseInt(e(365))/5)+parseInt(e(369))/6*(-parseInt(e(367))/7)+-parseInt(e(368))/8+parseInt(e(341))/9+parseInt(e(360))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kt(this,(function(){const n=jt,t=new RegExp(n(350)),e=new RegExp(n(359),"i"),r=Gt("init");t[n(393)](r+n(373))&&e.test(r+n(392))?Gt():r("0")}))()}();const Nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(351)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ut(){const n=["scene","update","input","test","36792GwGlpx","far","stateObject","exception","backside","value","toString","4646988Xxgftc","object","console","617535oeCEZI","2ubLSmc","string","index","constructor","131083UZdxnZ","function *\\( *\\)","apply","return (function() ","call","worldRadius","add","Vector3","table","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8879590JbLKhs","resolution","ior","color",'{}.constructor("return this")( )',"215ritIqg","causticsOnly","7pRIymG","1407288HKtguS","3348882QiVEzz","set","log","action","chain","info","params","primitive","TresGroup","backsideIOR","debu","helper","prototype","warn","lightSource","intensity","gger","group","error","bind","#ffffff"];return(Ut=function(){return n})()}Nt(void 0,(function(){const n=jt;let t;try{t=Function(n(352)+n(364)+");")()}catch(o){t=window}const e=t[n(343)]=t[n(343)]||{},r=[n(371),n(382),n(374),n(387),n(397),n(357),"trace"];for(let i=0;i<r.length;i++){const t=Nt.constructor[n(381)][n(388)](Nt),o=r[i],a=e[o]||t;t.__proto__=Nt[n(388)](Nt),t[n(340)]=a[n(340)][n(388)](a),e[o]=t}}))();const Lt=[Bt(342)],Ht=[Bt(342)],Zt=rn({__name:Bt(347),props:{color:{default:Bt(389)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Bt,e=n,{renderer:r}=q(),o=Rn(r[t(339)],{frames:1/0,resolution:e[t(361)],worldRadius:e[t(354)]});o[t(375)][t(338)]=!0;const i=xn(null);nn(i,(n=>{const e=t;n&&o[e(390)][e(355)](n)}));const{onBeforeLoop:a}=K();return a((({elapsed:n})=>{o[t(391)]()})),dn((()=>{const n=t;e[n(363)]&&o[n(375)].color.set(e[n(363)]),e.ior&&(o[n(375)][n(362)]=e[n(362)]),e[n(378)]&&(o.params[n(378)]=e.backsideIOR),e[n(395)]&&(o.params[n(395)]=e[n(395)]),e[n(354)]&&(o[n(375)][n(354)]=e[n(354)]),e[n(384)]&&(o[n(375)][n(384)]=e[n(384)])})),nn((()=>e[t(366)]),(n=>{const e=t;o[e(375)][e(366)]=n})),nn((()=>e.lightSource),(n=>{const e=t;n&&o[e(375)][e(383)]instanceof z[e(356)]&&o.params[e(383)][e(370)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return sn(),un(bn,null,[mn(r(377),{ref_key:r(386),ref:i},[ln(n.$slots,"default")],512),mn(r(376),{object:en(o)[r(386)],position:[0,.003,0]},null,8,Lt),mn(r(376),{object:en(o)[r(380)],visible:!1},null,8,Ht)],64)}}});function Gt(n){function t(n){const e=jt;if(typeof n===e(346))return function(n){}[e(348)](e(358)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(348)]("debu"+e(385))[e(353)](e(372)):function(){return!1}.constructor(e(379)+"gger")[e(351)](e(396)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vt,r=qt();for(;;)try{if(844484===parseInt(e(217))/1*(-parseInt(e(252))/2)+parseInt(e(220))/3*(-parseInt(e(258))/4)+parseInt(e(204))/5+-parseInt(e(229))/6+-parseInt(e(221))/7+-parseInt(e(242))/8*(-parseInt(e(231))/9)+parseInt(e(212))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(213)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vt(n,t){const e=qt();return(Vt=function(n,t){return e[n-=202]})(n,t)}!function(){Wt(this,(function(){const n=Vt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(232),"i"),r=Kt(n(225));t[n(203)](r+n(223))&&e[n(203)](r+n(209))?Kt():r("0")}))()}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(213)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(){const n=['{}.constructor("return this")( )',"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","while (true) {}","action","stateObject","shadowmap_pars_fragment","18QdEKan","replace","__proto__","info","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","toString","4JluoCe","isArray","test","5600580IMqiMm","remove","return (function() ","bind","properties","input","counter","call","39991830MnBHoE","apply",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","log","gger","148391vekNLv","console","string","4587579bKumMF","9411171QAySRh","programs","chain","dispose","init","error","forEach","length","9680724ectaoA","traverse","148194goUuOf","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","material",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","ShaderChunk","trace","constructor","; i ++) {\n        offset = (vogelDiskSample(j, ",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","prototype","debu","752UIvSdi","; i++) {\n        vogelSample = vogelDiskSample(j, ",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("];return(qt=function(){return n})()}$t(void 0,(function(){const n=Vt;let t;try{t=Function(n(206)+n(246)+");")()}catch(o){t=window}const e=t.console=t[n(218)]||{},r=[n(215),"warn",n(255),n(226),"exception","table",n(236)];for(let i=0;i<r[n(228)];i++){const t=$t[n(237)][n(240)][n(207)]($t),o=r[i],a=e[o]||t;t[n(254)]=$t[n(207)]($t),t[n(257)]=a[n(257)].bind(a),e[o]=t}}))();const Yt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Vt,o=z[r(235)][r(251)];return T[r(251)]=z[r(235)].shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",r(245)+t+r(239)+n+r(244)+e+r(238)+e+r(234)+e+r(243)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(247)+e+r(214))[r(253)]("#if defined( SHADOWMAP_TYPE_PCF )",r(256)),(n,t,e)=>{const i=r;z[i(235)][i(251)]=o,function(n,t,e){const r=Vt;t[r(230)]((t=>{const e=r;t[e(233)]&&(Array[e(202)](t[e(233)])?t[e(233)][e(227)]((t=>{n[e(208)].remove(t),t.dispose()})):(n[e(208)][e(205)](t[e(233)]),t.material[e(224)]()))})),n[r(255)][r(222)][r(228)]=0,n.compile(t,e)}(n,t,e)}};function Kt(n){function t(n){const e=Vt;if(typeof n===e(219))return function(n){}[e(237)](e(248)).apply(e(210));1!==(""+n/n).length||n%20==0?function(){return!0}[e(237)](e(241)+e(216))[e(211)](e(249)):function(){return!1}[e(237)]("debugger")[e(213)](e(250)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Jt=ne;!function(n,t){const e=ne,r=ee();for(;;)try{if(887399===-parseInt(e(268))/1*(parseInt(e(271))/2)+parseInt(e(259))/3+parseInt(e(256))/4*(-parseInt(e(257))/5)+parseInt(e(254))/6*(-parseInt(e(272))/7)+-parseInt(e(276))/8+-parseInt(e(280))/9*(-parseInt(e(289))/10)+parseInt(e(286))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(262)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xt(this,(function(){const n=ne,t=new RegExp(n(260)),e=new RegExp(n(273),"i"),r=re(n(284));t[n(252)](r+"chain")&&e[n(252)](r+n(275))?re():r("0")}))()}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(262)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ne(n,t){const e=ee();return(ne=function(n,t){return e[n-=249]})(n,t)}Qt(void 0,(function(){const n=ne,t=function(){const n=ne;let t;try{t=Function(n(250)+n(255)+");")()}catch(e){t=window}return t}(),e=t[n(283)]=t[n(283)]||{},r=["log",n(277),n(278),"error",n(270),n(288),n(265)];for(let o=0;o<r[n(274)];o++){const t=Qt.constructor[n(258)][n(269)](Qt),i=r[o],a=e[i]||t;t[n(263)]=Qt[n(269)](Qt),t[n(281)]=a[n(281)][n(269)](a),e[i]=t}}))();const te=rn({__name:Jt(266),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=q();let i=null;const a=n=>{const t=ne,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(279)],e[t(279)]),i=null),a&&(i=Yt({focus:s,size:c,samples:u}),o[t(279)].traverse((n=>{const e=t;n instanceof l&&n.material[e(267)]()})))};return a(t),nn(t,(()=>{a(t)})),(n,t)=>null}});function ee(){const n=["test","counter","58362tAUUlp",'{}.constructor("return this")( )',"3221684BeMepj","5elgazE","prototype","5275260jTRyiv","function *\\( *\\)","constructor","apply","__proto__","debu","trace","index","dispose","106718qnbEuT","bind","exception","20XSXzTW","1141ScfMAZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","input","13928128AIUMGv","warn","info","value","549xhEoPz","toString","call","console","init","string","34005213zDGEoF","action","table","202740SAGYkd","gger","return (function() ","while (true) {}"];return(ee=function(){return n})()}function re(n){function t(n){const e=ne;if(typeof n===e(285))return function(n){}[e(261)](e(251))[e(262)](e(253));1!==(""+n/n).length||n%20==0?function(){return!0}[e(261)](e(264)+e(249))[e(282)](e(287)):function(){return!1}.constructor(e(264)+e(249))[e(262)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const oe=se;function ie(){const n=["apply","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","warn","toneMapped","bind","668772WicovV",'{}.constructor("return this")( )',"table","prototype","40zNFolZ","multiplyScalar","copy","input","action","halfTexelSize","setResolution","1227105IpbskD","__proto__","3DQCFru","gger","49355crvEYJ","error","resolution","replace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2818328plKCKJ","6521753sZGgvJ","while (true) {}","log","uniforms","1pPgqDm","2064056BSwuJS","kernel","390ClnVtY","toString","length","exception","counter","encodings_fragment","colorspace_fragment","texelSize","constructor","call","20KlqgGx","setTexelSize","init","value","24fLQoBG","chain","stateObject","12659270ytaIzX"];return(ie=function(){return n})()}!function(n,t){const e=se,r=ie();for(;;)try{if(547810===-parseInt(e(447))/1*(-parseInt(e(448))/2)+-parseInt(e(435))/3*(parseInt(e(442))/4)+-parseInt(e(437))/5*(-parseInt(e(450))/6)+parseInt(e(443))/7+-parseInt(e(426))/8*(-parseInt(e(473))/9)+-parseInt(e(460))/10*(-parseInt(e(433))/11)+parseInt(e(464))/12*(-parseInt(e(467))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ae(this,(function(){const n=se,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(441),"i"),r=fe(n(462));t.test(r+n(465))&&e.test(r+n(429))?fe():r("0")}))()}();const ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function se(n,t){const e=ie();return(se=function(n,t){return e[n-=424]})(n,t)}ce(void 0,(function(){const n=se;let t;try{t=Function("return (function() "+n(474)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(445),n(470),"info",n(438),n(453),n(424),"trace"];for(let i=0;i<r.length;i++){const t=ce.constructor[n(425)][n(472)](ce),o=r[i],a=e[o]||t;t[n(434)]=ce[n(472)](ce),t.toString=a[n(451)][n(472)](a),e[o]=t}}))();const ue=parseInt(B[oe(440)](/\D+/g,""));class le extends P{constructor(n=new C){const t=oe;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+t(ue>=154?456:455)+">\n        }",vertexShader:t(469),blending:F,depthWrite:!1,depthTest:!1}),this[t(471)]=!1,this[t(461)](n.x,n.y),this[t(449)]=new Float32Array([0,1,2,2,3])}[oe(461)](n,t){const e=oe;this[e(446)][e(457)][e(463)].set(n,t),this[e(446)][e(431)][e(463)].set(n,t)[e(427)](.5)}[oe(432)](n){const t=oe;this.uniforms[t(439)].value[t(428)](n)}}function fe(n){function t(n){const e=se;if("string"==typeof n)return function(n){}[e(458)](e(444))[e(468)](e(454));1!==(""+n/n)[e(452)]||n%20==0?function(){return!0}[e(458)]("debu"+e(436))[e(459)](e(430)):function(){return!1}[e(458)]("debu"+e(436))[e(468)](e(466)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const pe=he;function de(){const n=["kernel","texture","function *\\( *\\)","apply","__proto__","setResolution","depthTexture","position","5145546MZWOyt","scene","camera","screen","frustumCulled","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthBuffer","depthScale","log","value",'{}.constructor("return this")( )',"call","5819193XbWUOw","convolutionMaterial","renderToScreen","toString","bind","5685576fqCCxc","render","prototype","USE_DEPTH","constructor","1536104cKjmEq","setAttribute","stateObject","renderTargetB","debu","290EbRBOl","string","8lrMGuW","error","maxDepthThreshold","chain","inputBuffer","clone","length","setRenderTarget","counter","action","while (true) {}","114820vCYNdO","console","uniforms","524770YuaBiX","295687srqKpj","renderTargetA","return (function() ","test","init","trace","setTexelSize","gger"];return(de=function(){return n})()}function he(n,t){const e=de();return(he=function(n,t){return e[n-=429]})(n,t)}!function(n,t){const e=he,r=de();for(;;)try{if(964649===parseInt(e(467))/1+-parseInt(e(488))/2+-parseInt(e(445))/3+-parseInt(e(485))/4*(-parseInt(e(472))/5)+-parseInt(e(462))/6+-parseInt(e(429))/7*(-parseInt(e(474))/8)+parseInt(e(457))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ve(this,(function(){const n=he,t=new RegExp(n(439)),e=new RegExp(n(450),"i"),r=_e(n(433));t[n(432)](r+n(477))&&e[n(432)](r+"input")?_e():r("0")}))()}();const me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(440)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();me(void 0,(function(){const n=he,t=function(){const n=he;let t;try{t=Function(n(431)+n(455)+");")()}catch(e){t=window}return t}(),e=t[n(486)]=t[n(486)]||{},r=[n(453),"warn","info",n(475),"exception","table",n(434)];for(let o=0;o<r[n(480)];o++){const t=me.constructor[n(464)][n(461)](me),i=r[o],a=e[i]||t;t[n(441)]=me.bind(me),t[n(460)]=a[n(460)][n(461)](a),e[i]=t}}))();class ge{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=he;this[c(459)]=!1,this[c(430)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(470)]=this[c(430)][c(479)](),this[c(458)]=new le,this[c(458)][c(435)](1/t,1/e),this.convolutionMaterial[c(442)](new C(t,e)),this.scene=new u,this[c(447)]=new j,this[c(458)][c(487)].minDepthThreshold[c(454)]=r,this[c(458)][c(487)][c(476)].value=o,this[c(458)][c(487)][c(452)][c(454)]=i,this[c(458)][c(487)].depthToBlurRatioBias[c(454)]=a,this.convolutionMaterial.defines[c(465)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(468)](c(444),new N(s,3)),p[c(468)]("uv",new N(f,2)),this.screen=new l(p,this[c(458)]),this.screen[c(449)]=!1,this[c(446)].add(this[c(448)])}[pe(463)](n,t,e){const r=pe,o=this.scene,i=this[r(447)],a=this[r(430)],c=this[r(470)],s=this[r(458)],u=s[r(487)];u[r(451)][r(454)]=t[r(443)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(480)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(437)][r(454)]=l[p],u[r(478)][r(454)]=h[r(438)],n[r(481)](f),n.render(o,i),h=f;u[r(437)].value=l[p],u[r(478)][r(454)]=h[r(438)],n[r(481)](this[r(459)]?null:e),n.render(o,i)}}function _e(n){function t(n){const e=he;if(typeof n===e(473))return function(n){}.constructor(e(484))[e(440)](e(482));1!==(""+n/n).length||n%20==0?function(){return!0}[e(466)](e(471)+e(436))[e(456)](e(483)):function(){return!1}[e(466)](e(471)+e(436))[e(440)](e(469)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ye=be;!function(n,t){for(var e=be,r=Se();;)try{if(296829===parseInt(e(382))/1+-parseInt(e(431))/2*(-parseInt(e(380))/3)+-parseInt(e(379))/4*(-parseInt(e(432))/5)+-parseInt(e(391))/6*(-parseInt(e(430))/7)+-parseInt(e(424))/8+-parseInt(e(394))/9*(parseInt(e(370))/10)+parseInt(e(404))/11*(-parseInt(e(372))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[be(362)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xe(this,(function(){var n=be,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(400),"i"),r=Me("init");t.test(r+n(409))&&e[n(364)](r+"input")?Me():r("0")}))()}();var Ie=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[be(362)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function be(n,t){var e=Se();return(be=function(n,t){return e[n-=362]})(n,t)}function Se(){var n=["console","mixBlur","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","vertexShader",'{}.constructor("return this")( )',"_hasBlur","2198972FFZgWv","6tJaGgY","_minDepthThreshold","386579ftMYGw","_tDepth","depthScale","replace","USE_UV","exception","warn","_distortion","#include <project_vertex>","90AfHjMf","while (true) {}","_depthToBlurRatioBias","45nfnLtv","action","depthToBlurRatioBias","#include <emissivemap_fragment>","mixContrast","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_textureMatrix","_depthScale","_mixBlur","408628YBVBDU","_distortionMap","minDepthThreshold","_mirror","_maxDepthThreshold","chain","__proto__","length","hasBlur","toString","_tDiffuseBlur","defines","tDepth","mirror","fragmentShader","maxDepthThreshold","value","distortion","mixStrength","tDiffuse","2016976ospNZJ","debu","constructor","error","table","counter","127729MaKGCE","339766gGylBo","5rWvakc","trace","uniforms","_tDiffuse","apply","distortionMap","test","setValues","_mixContrast","_blurStrength","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","gger","590060cvVygx","textureMatrix","228omvPuK"];return(Se=function(){return n})()}Ie(void 0,(function(){var n,t=be;try{n=Function("return (function() "+t(377)+");")()}catch(s){n=window}for(var e=n[t(373)]=n[t(373)]||{},r=[t(399),t(388),"info",t(427),t(387),t(428),t(433)],o=0;o<r.length;o++){var i=Ie[t(426)].prototype.bind(Ie),a=r[o],c=e[a]||i;i[t(410)]=Ie.bind(Ie),i[t(413)]=c[t(413)].bind(c),e[a]=i}}))();class we extends U{constructor(n={}){var t=be;super(n),this[t(383)]={value:null},this[t(405)]={value:null},this[t(435)]={value:null},this._tDiffuseBlur={value:null},this[t(401)]={value:null},this[t(378)]={value:!1},this[t(407)]={value:0},this[t(403)]={value:0},this[t(367)]={value:.5},this[t(381)]={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this[t(393)]={value:.25},this[t(389)]={value:1},this[t(366)]={value:1},this[t(365)](n)}onBeforeCompile(n){var t,e=be;!(null==(t=n[e(415)])?void 0:t[e(386)])&&(n.defines.USE_UV=""),n[e(434)][e(412)]=this._hasBlur,n.uniforms[e(423)]=this[e(435)],n[e(434)][e(416)]=this[e(383)],n[e(434)].distortionMap=this[e(405)],n[e(434)].tDiffuseBlur=this[e(414)],n[e(434)][e(371)]=this[e(401)],n.uniforms[e(417)]=this[e(407)],n.uniforms[e(374)]=this[e(403)],n[e(434)][e(422)]=this._blurStrength,n[e(434)][e(406)]=this[e(381)],n[e(434)][e(419)]=this[e(408)],n[e(434)][e(384)]=this[e(402)],n.uniforms.depthToBlurRatioBias=this[e(393)],n.uniforms[e(421)]=this[e(389)],n[e(434)][e(398)]=this[e(366)],n.vertexShader="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n.vertexShader,n[e(376)]=n.vertexShader[e(385)](e(390),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n.fragmentShader=e(368)+n.fragmentShader,n[e(418)]=n[e(418)].replace(e(397),e(375))}get[ye(423)](){var n=ye;return this[n(435)][n(420)]}set tDiffuse(n){this._tDiffuse.value=n}get[ye(416)](){var n=ye;return this._tDepth[n(420)]}set tDepth(n){this[ye(383)].value=n}get[ye(363)](){return this[ye(405)].value}set[ye(363)](n){this[ye(405)].value=n}get tDiffuseBlur(){var n=ye;return this[n(414)][n(420)]}set tDiffuseBlur(n){this._tDiffuseBlur.value=n}get[ye(371)](){var n=ye;return this[n(401)][n(420)]}set textureMatrix(n){var t=ye;this[t(401)][t(420)]=n}get hasBlur(){var n=ye;return this[n(378)][n(420)]}set[ye(412)](n){this._hasBlur.value=n}get[ye(417)](){var n=ye;return this[n(407)][n(420)]}set[ye(417)](n){var t=ye;this._mirror[t(420)]=n}get mixBlur(){var n=ye;return this._mixBlur[n(420)]}set mixBlur(n){var t=ye;this[t(403)][t(420)]=n}get[ye(422)](){var n=ye;return this[n(367)][n(420)]}set mixStrength(n){var t=ye;this._blurStrength[t(420)]=n}get minDepthThreshold(){return this[ye(381)].value}set[ye(406)](n){var t=ye;this[t(381)][t(420)]=n}get[ye(419)](){return this[ye(408)].value}set[ye(419)](n){var t=ye;this[t(408)][t(420)]=n}get[ye(384)](){return this[ye(402)].value}set[ye(384)](n){var t=ye;this[t(402)][t(420)]=n}get[ye(396)](){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(n){var t=ye;this[t(393)][t(420)]=n}get distortion(){var n=ye;return this[n(389)][n(420)]}set[ye(421)](n){var t=ye;this[t(389)][t(420)]=n}get mixContrast(){var n=ye;return this[n(366)][n(420)]}set[ye(398)](n){var t=ye;this._mixContrast[t(420)]=n}}function Me(n){function t(n){var e=be;if("string"==typeof n)return function(n){}[e(426)](e(392)).apply(e(429));1!==(""+n/n)[e(411)]||n%20==0?function(){return!0}[e(426)](e(425)+e(369)).call(e(395)):function(){return!1}[e(426)]("debu"+e(369))[e(362)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ee=ze;!function(n,t){const e=ze,r=De();for(;;)try{if(971175===-parseInt(e(464))/1+-parseInt(e(495))/2*(parseInt(e(458))/3)+-parseInt(e(517))/4+-parseInt(e(457))/5*(-parseInt(e(432))/6)+-parseInt(e(506))/7+-parseInt(e(449))/8*(parseInt(e(482))/9)+-parseInt(e(478))/10*(-parseInt(e(433))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(456)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Re(this,(function(){const n=ze,t=new RegExp(n(480)),e=new RegExp(n(455),"i"),r=Oe("init");t[n(508)](r+"chain")&&e[n(508)](r+n(519))?Oe():r("0")}))()}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(456)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function De(){const n=["visible","5050424uGqGMp","autoUpdate","input","toString","target","depthTexture","t-diffuse-blur","assign","virtualCamera","distortion","defines-USE_DISTORTION","reflect","reflectorWorldPosition","6mECDhm","11jKdDgI","exception","mirror","depth-to-blur-ratio-bias","dispose","updateMatrixWorld","debu","add","defines-USE_BLUR","t-depth","value","isMesh","reflectorPlane","warn","applyMatrix4","mix-contrast","864qRbajr","negate","far","matrixWorld","action","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","8973095QDMWZZ","3qPdtVF","gger","prototype","shadowMap","bind","console","651132aVhLbm","clipPlane","subVectors","dot","distortionMap","multiply",'{}.constructor("return this")( )',"table","elements","materialRef","cameraWorldPosition","lookAtPosition","render","reflectorOffset","33732730ddthuO","view","function *\\( *\\)","matrixWorldInverse","53964RmCmtr","t-diffuse","constructor","projectionMatrix","set","key","mix-strength","autoClear","return (function() ","texture","enabled","setFromMatrixPosition","number","1520932VGHZQm","min-depth-threshold","index","max-depth-threshold","textureMatrix","rotationMatrix","normal","traverse","multiplyScalar","defines-USE_DEPTH","addScaledVector","6124615yfRniN","extractRotation","test","material","call","error","setRenderTarget","position","sign","lookAt"];return(De=function(){return n})()}function ze(n,t){const e=De();return(ze=function(n,t){return e[n-=430]})(n,t)}Ae(void 0,(function(){const n=ze;let t;try{t=Function(n(490)+n(470)+");")()}catch(o){t=window}const e=t.console=t[n(463)]||{},r=["log",n(446),"info",n(511),n(434),n(471),"trace"];for(let i=0;i<r.length;i++){const t=Ae[n(484)][n(460)][n(462)](Ae),o=r[i],a=e[o]||t;t.__proto__=Ae[n(462)](Ae),t[n(520)]=a[n(520)].bind(a),e[o]=t}}))();const Te=["texture-matrix",Ee(435),Ee(483),Ee(442),Ee(523),"has-blur",Ee(488),Ee(496),Ee(498),"depth-scale",Ee(436),Ee(526),Ee(468),Ee(448),"defines-USE_BLUR",Ee(504),Ee(527)],Pe=rn({__name:Ee(497),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ee,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=X(o),{camera:y,scene:x,renderer:E,extend:R}=q();R({MeshReflectorMaterial:we});const D=xn(),z=xn(),T=xn(),P=xn(),O=tn((()=>{const n=ze;return typeof f.value===n(494)?[f[n(443)],f.value]:f[n(443)]})),C=tn((()=>O.value[0]>0||O[r(443)][1]>0)),F={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};dn((()=>{var n;const o=r;null==(n=D[o(443)])||n[o(491)][o(437)]();const f={minFilter:b,magFilter:b,type:h};var y,x;D[o(443)]=new I(i[o(443)],i[o(443)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(443)],i[o(443)],w,M)},t(y,e(x)))),z[o(443)]=new I(i[o(443)],i.value,f),T.value=new ge({resolution:i[o(443)],width:O[o(443)][0],height:O[o(443)][1],minDepthThreshold:a[o(443)],maxDepthThreshold:s.value,depthScale:u[o(443)],depthToBlurRatioBias:l[o(443)]}),P[o(443)]={mirror:p,textureMatrix:F[o(499)],mixBlur:d,tDiffuse:D[o(443)][o(491)],tDepth:D[o(443)][o(522)],tDiffuseBlur:D.value[o(491)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(443)],mixContrast:_,"defines-USE_BLUR":C[o(443)]?"":void 0,"defines-USE_DEPTH":u[o(443)]>0?"":void 0,"defines-USE_DISTORTION":g[o(443)]?"":void 0}}));const B=xn(),{onLoop:j}=K();j((()=>{var n;const t=r;if(!(B[t(443)]&&E[t(443)]&&D.value&&y.value))return;const e=function(n,t){const e=ze;let r;return n[e(502)]((n=>{const o=e;n[o(444)]&&n[o(509)]&&n[o(509)].uuid===t&&(r=n)})),r}(x[t(443)],B[t(443)].uuid);if(!e)return;e[t(516)]=!1;const i=E[t(443)].xr.enabled,a=E[t(443)][t(461)].autoUpdate;(function(n){var t,e;const r=ze;if(F[r(431)][r(493)](n[r(452)]),F[r(474)][r(493)](null==(t=y[r(443)])?void 0:t[r(452)]),F.rotationMatrix[r(507)](n[r(452)]),F[r(501)].set(0,0,1),F[r(501)][r(447)](F[r(500)]),F[r(431)][r(505)](F[r(501)],o[r(477)]),F.view[r(466)](F[r(431)],F[r(474)]),F[r(479)][r(467)](F[r(501)])>0)return;F[r(479)][r(430)](F[r(501)])[r(450)](),F.view[r(440)](F[r(431)]),F[r(500)][r(507)](null==(e=y[r(443)])?void 0:e[r(452)]),F.lookAtPosition[r(486)](0,0,-1),F[r(475)][r(447)](F[r(500)]),F[r(475)][r(440)](F[r(474)]),F[r(521)].subVectors(F[r(431)],F.lookAtPosition),F[r(521)][r(430)](F[r(501)]).negate(),F.target[r(440)](F[r(431)]),F[r(525)][r(513)].copy(F.view),F[r(525)].up[r(486)](0,1,0),F[r(525)].up[r(447)](F[r(500)]),F[r(525)].up[r(430)](F[r(501)]),F[r(525)][r(515)](F[r(521)]),F[r(525)][r(451)]=(null==y?void 0:y[r(443)]).far,F[r(525)][r(438)](),F[r(525)][r(485)].copy((null==y?void 0:y[r(443)])[r(485)]),F.textureMatrix[r(486)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(499)][r(469)](F[r(525)][r(485)]),F.textureMatrix.multiply(F[r(525)][r(481)]),F.textureMatrix[r(469)](n[r(452)]),F.reflectorPlane.setFromNormalAndCoplanarPoint(F[r(501)],F[r(431)]),F[r(445)][r(447)](F[r(525)][r(481)]),F[r(465)][r(486)](F[r(445)][r(501)].x,F[r(445)][r(501)].y,F.reflectorPlane.normal.z,F[r(445)].constant);const i=F[r(525)][r(485)];F.q.x=(Math.sign(F[r(465)].x)+i.elements[8])/i.elements[0],F.q.y=(Math[r(514)](F.clipPlane.y)+i.elements[9])/i[r(472)][5],F.q.z=-1,F.q.w=(1+i[r(472)][10])/i[r(472)][14],F[r(465)][r(503)](2/F[r(465)][r(467)](F.q)),i[r(472)][2]=F[r(465)].x,i.elements[6]=F[r(465)].y,i[r(472)][10]=F.clipPlane.z+1,i.elements[14]=F[r(465)].w})(e),E.value[t(461)][t(518)]=!1,E.value[t(512)](D[t(443)]),E[t(443)][t(489)]||E[t(443)].clear(),E[t(443)][t(476)](x[t(443)],F[t(525)]),null==(n=null==T?void 0:T[t(443)])||n.render(E[t(443)],D[t(443)],z[t(443)]),E[t(443)].xr[t(492)]=i,E.value.shadowMap.autoUpdate=a,e[t(516)]=!0,E[t(443)][t(512)](null)}));const k=Sn(),N=tn((()=>{const n=r,t={};return Object[n(524)](t,o),Object[n(524)](t,k.value),t}));return yn((()=>{var n,t;const e=r;null==(n=null==D?void 0:D[e(443)])||n[e(437)](),null==(t=null==z?void 0:z[e(443)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return sn(),un("TresMeshReflectorMaterial",wn({key:c(487)+P[c(443)][c(441)]+P[c(443)]["defines-USE_DEPTH"]+P[c(443)]["defines-USE_DISTORTION"],ref_key:c(473),ref:B},N[c(443)],{"texture-matrix":F.textureMatrix,mirror:en(p),"t-diffuse":null==(e=D[c(443)])?void 0:e.texture,"t-depth":null==(o=D[c(443)])?void 0:o[c(522)],"t-diffuse-blur":null==(i=z[c(443)])?void 0:i.texture,"has-blur":C[c(443)],"mix-strength":en(v),"min-depth-threshold":en(a),"max-depth-threshold":en(s),"depth-scale":en(u),"depth-to-blur-ratio-bias":en(l),distortion:en(m),distortionMap:en(g),"mix-contrast":en(_),"defines-USE_BLUR":C[c(443)]?"":void 0,"defines-USE_DEPTH":en(u)>0?"":void 0,"defines-USE_DISTORTION":en(g)?"":void 0}),null,16,Te)}}});function Oe(n){function t(n){const e=ze;if("string"==typeof n)return function(n){}[e(484)]("while (true) {}")[e(456)]("counter");1!==(""+n/n)[e(454)]||n%20==0?function(){return!0}[e(484)](e(439)+e(459))[e(510)](e(453)):function(){return!1}[e(484)](e(439)+"gger")[e(456)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ce(n,t){const e=je();return(Ce=function(n,t){return e[n-=210]})(n,t)}!function(n,t){const e=Ce,r=je();for(;;)try{if(120026===-parseInt(e(247))/1*(-parseInt(e(228))/2)+parseInt(e(248))/3*(parseInt(e(227))/4)+-parseInt(e(224))/5+parseInt(e(242))/6*(-parseInt(e(232))/7)+-parseInt(e(215))/8+parseInt(e(231))/9*(parseInt(e(212))/10)+parseInt(e(220))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(253)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fe(this,(function(){const n=Ce,t=new RegExp(n(229)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ke(n(214));t[n(244)](r+n(230))&&e[n(244)](r+"input")?ke():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(253)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(){const n=["fog","test","while (true) {}","return (function() ","95ixaaAf","9yVqrGq","dispose","background","error","string","apply","log","call","debu","stateObject","12610uXvoEz","toString","init","1839296SNwknD",'{}.constructor("return this")( )',"__proto__","exception","info","4134240FhFyUA","warn","update","length","1137800rdAvFl","texture","prototype","84236zDzPeg","2846ZZMivB","function *\\( *\\)","chain","468NNKchW","28hFdnnF","CubeCamera","action","constructor","counter","bind","value","console","table","gger","93414mZaIfO"];return(je=function(){return n})()}function ke(n){function t(n){const e=Ce;if(typeof n===e(252))return function(n){}[e(235)](e(245))[e(253)](e(236));1!==(""+n/n)[e(223)]||n%20==0?function(){return!0}[e(235)](e(210)+e(241))[e(255)](e(234)):function(){return!1}[e(235)](e(210)+e(241))[e(253)](e(211)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ne(){const n=["test","115fyqkLW","call","toString","function *\\( *\\)","TresGroup","input","warn","object","__proto__","136413XmGrho","chain","envMap","frames","exception","log","primitive","counter","texture","fog","trace","gger","58486mTjKZw","6rThXqv","13736NLLNsL","970368sueeyb","resolution","default","bind","visible","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","init",'{}.constructor("return this")( )',"758230topRSP","string","302701lLcyRN","length","table","action","console","$slots","31112LyzZmE","info","27nPLtRj","apply","constructor","debu"];return(Ne=function(){return n})()}Be(void 0,(function(){const n=Ce,t=function(){const n=Ce;let t;try{t=Function(n(246)+n(216)+");")()}catch(e){t=window}return t}(),e=t[n(239)]=t[n(239)]||{},r=[n(254),n(221),n(219),n(251),n(218),n(240),"trace"];for(let o=0;o<r[n(223)];o++){const t=Be.constructor[n(226)][n(237)](Be),i=r[o],a=e[i]||t;t[n(217)]=Be[n(237)](Be),t[n(213)]=a[n(213)][n(237)](a),e[i]=t}}))();const Ue=Ge;!function(n,t){const e=Ge,r=Ne();for(;;)try{if(103874===-parseInt(e(417))/1*(-parseInt(e(418))/2)+-parseInt(e(405))/3+-parseInt(e(419))/4*(-parseInt(e(396))/5)+parseInt(e(420))/6+-parseInt(e(383))/7+parseInt(e(389))/8+parseInt(e(391))/9*(-parseInt(e(429))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(392)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Le(this,(function(){const n=Ge,t=new RegExp(n(399)),e=new RegExp(n(425),"i"),r=Ve(n(427));t[n(395)](r+n(406))&&e[n(395)](r+n(401))?Ve():r("0")}))()}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(392)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();He(void 0,(function(){const n=Ge;let t;try{t=Function("return (function() "+n(428)+");")()}catch(o){t=window}const e=t[n(387)]=t[n(387)]||{},r=[n(410),n(402),n(390),"error",n(409),n(385),n(415)];for(let i=0;i<r.length;i++){const t=He[n(393)].prototype[n(423)](He),o=r[i],a=e[o]||t;t[n(404)]=He[n(423)](He),t[n(398)]=a.toString[n(423)](a),e[o]=t}}))();const Ze=[Ue(403)];function Ge(n,t){const e=Ne();return(Ge=function(n,t){return e[n-=382]})(n,t)}const We=rn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ue,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=q(),c=Q(null),s=Q(n),u=Q(t),l=Q(e),f=Q(null);let p,d;return nn((()=>s),(n=>{var t;const e=Ce;null==(t=c.value)||t.dispose(),c[e(238)]=new v(n[e(238)]),c.value[e(225)].type=h}),{immediate:!0}),nn([u,l,c],(([n,t,e])=>{const r=Ce;e&&(f[r(238)]=new(z[r(233)])(n,t,e))}),{immediate:!0}),yn((()=>{var n;const t=Ce;null==(n=c.value)||n[t(249)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Ce;p=a[t(238)][t(243)],d=a[t(238)][t(250)],a[t(238)][t(250)]=r||d,a[t(238)][t(243)]=o||p,null==(n=f[t(238)])||n[t(222)](i[t(238)],a.value),a.value[t(243)]=p,a.value[t(250)]=d}}}({resolution:o[r(421)],near:o.near,far:o.far,envMap:o[r(407)],fog:o[r(414)]}),{onBeforeLoop:s}=K();let u=0;const l=Q(null);return s((()=>{const n=r;l.value&&(o[n(408)]===1/0||u<o[n(408)])&&(l.value[n(424)]=!1,c(),l.value.visible=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(413)]}),(n,t)=>{const e=r;return sn(),un(e(400),null,[mn(e(411),{object:en(a)},null,8,Ze),mn(e(400),{ref_key:"rgRef",ref:l},[ln(n[e(388)],e(422))],512)])}}});function Ve(n){function t(n){const e=Ge;if(typeof n===e(382))return function(n){}[e(393)]("while (true) {}")[e(392)](e(412));1!==(""+n/n)[e(384)]||n%20==0?function(){return!0}[e(393)](e(394)+"gger")[e(397)](e(386)):function(){return!1}[e(393)](e(394)+e(416))[e(392)](e(426)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function $e(){const n=["844642ofUqLR","string","863478QXyVkT","console","244uJzmRQ","function *\\( *\\)","entries","warn","init","table","exception","clone","debu","59766PtyMHe","chain","action","counter","prototype","2771961WrgpFt","reduce","stateObject","length","input","key","bind","21525ZsAVeM","apply","info","error","ShaderMaterial",'{}.constructor("return this")( )',"return (function() ","constructor","forEach","1083252WXCCih","__proto__","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uniforms","while (true) {}","gger","12557464AoCVmX","value","call"];return($e=function(){return n})()}!function(n,t){const e=Ke,r=$e();for(;;)try{if(471970===-parseInt(e(314))/1+parseInt(e(304))/2+-parseInt(e(288))/3+-parseInt(e(318))/4*(-parseInt(e(295))/5)+-parseInt(e(283))/6+-parseInt(e(316))/7+parseInt(e(311))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ke(296)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qe(this,(function(){const n=Ke,t=new RegExp(n(319)),e=new RegExp(n(307),"i"),r=Xe(n(322));t[n(306)](r+n(284))&&e[n(306)](r+n(292))?Xe():r("0")}))()}();const Ye=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ke(296)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(n,t){const e=$e();return(Ke=function(n,t){return e[n-=279]})(n,t)}function Je(n,t,e,r){const o=Ke,i=class extends z[o(299)]{constructor(i={}){const a=o,s=Object[a(320)](n);super({uniforms:s[a(289)](((n,[t,e])=>{const r=W[a(281)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(293)]="",s[a(303)]((([n])=>Object.defineProperty(this,n,{get:()=>this[a(308)][n][a(312)],set:t=>this[a(308)][n].value=t}))),Object.assign(this,i),r&&r(this)}};return i[o(293)]=V.generateUUID(),i}function Xe(n){function t(n){const e=Ke;if(typeof n===e(315))return function(n){}[e(302)](e(309))[e(296)](e(286));1!==(""+n/n)[e(291)]||n%20==0?function(){return!0}[e(302)](e(282)+e(310))[e(313)](e(285)):function(){return!1}[e(302)](e(282)+e(310))[e(296)](e(290)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ye(void 0,(function(){const n=Ke;let t;try{t=Function(n(301)+n(300)+");")()}catch(o){t=window}const e=t[n(317)]=t[n(317)]||{},r=["log",n(321),n(297),n(298),n(280),n(279),"trace"];for(let i=0;i<r[n(291)];i++){const t=Ye[n(302)][n(287)][n(294)](Ye),o=r[i],a=e[o]||t;t[n(305)]=Ye.bind(Ye),t.toString=a.toString[n(294)](a),e[o]=t}}))();var Qe=dr;!function(n,t){for(var e=dr,r=sr();;)try{if(184670===parseInt(e(379))/1+-parseInt(e(322))/2*(-parseInt(e(242))/3)+parseInt(e(282))/4+parseInt(e(296))/5+-parseInt(e(258))/6+-parseInt(e(315))/7*(-parseInt(e(271))/8)+parseInt(e(305))/9*(-parseInt(e(277))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[dr(318)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){nr(this,(function(){var n=dr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(250),"i"),r=Fr(n(306));t[n(326)](r+n(295))&&e[n(326)](r+n(228))?Fr():r("0")}))()}();var tr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function er(n){var t=dr,e=function(n,t){var e=dr;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(323)]];if(void 0!==r){var o=r[e(360)](n,t||e(279));if(typeof o!==e(253))return o;throw new TypeError(e(269))}return(t===e(229)?String:Number)(n)}(n,t(229));return typeof e===t(275)?e:String(e)}function rr(n,t,e){return(t=er(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function or(n,t){var e=dr,r=Object[e(358)](n);if(Object.getOwnPropertySymbols){var o=Object[e(297)](n);t&&(o=o[e(337)]((function(t){return Object[e(233)](n,t).enumerable}))),r.push[e(318)](r,o)}return r}function ir(n){for(var t=dr,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0).forEach((function(t){rr(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(232)](n,Object.getOwnPropertyDescriptors(r)):or(Object(r)).forEach((function(e){Object[t(260)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function ar(n,t){var e=dr;if(null==n)return{};var r,o,i=function(n,t){var e=dr;if(null==n)return{};var r,o,i={},a=Object[e(358)](n);for(o=0;o<a.length;o++)r=a[o],t[e(378)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(297)]){var a=Object[e(297)](n);for(o=0;o<a[e(238)];o++)r=a[o],t[e(378)](r)>=0||Object[e(347)].propertyIsEnumerable[e(360)](n,r)&&(i[r]=n[r])}return i}function cr(n,t){var e=dr;(null==t||t>n[e(238)])&&(t=n[e(238)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function sr(){var n=["forEach",'" is required to use output "',"diffuse","entries","concat","patchMap",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","csm_PositionRaw","debu","valueOf","chain","966660yusRiD","getOwnPropertySymbols","assign","\n    #include <dithering_fragment>\n    gl_FragColor  = ","csm_Clearcoat","find","type","baseMaterial","ShaderMaterial","7428249hazdPH","init","positionRaw","CustomShaderMaterial does not support RawShaderMaterial","fragColor","MeshDepthMaterial","position","\n    gl_Position = ",", 1.0 );\n  ","join","14XMzomc",'". Shader cannot compile.',"exception","apply","trace","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","sham","273022EheAjk","toPrimitive","get","roughness","test","console","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","csm_AO","PointsMaterial","getPrototypeOf",";\n    ","clearcoatNormal","clone","csm_ClearcoatRoughness","error","filter","pointSize","configurable","MeshToonMaterial","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","depthAlpha","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","Super expression must either be null or a function","cacheHash","table","prototype","\n            ","push","MeshNormalMaterial","create","__csm","fragmentShader","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","message","void main()","_patchShader","keys",". Shader cannot compile.","call","split","trim","\n    gl_FragColor = ","\n            \n            void main() {\n          ","clearcoatRoughness","return","includes","setPrototypeOf","constructor","csm_Bump","#define IS_VERTEX;\n","RawShaderMaterial","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","MeshPhysicalMaterial","Derived constructors may only return object or undefined","csm_Position","toString","indexOf","326264OvHFTN","set","onBeforeCompile","lastIndexOf","bind","log","bump","_getMaterialDefine","csm_Normal","material.clearcoatRoughness = ","#define IS_UNKNOWN;\n","\n    vec3 totalEmissiveRadiance = ","();\n            // #_CSM_#\n          ","counter","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","needsUpdate","normal","slice","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","value","done","is not a constructor",";\n  ","substring","\n    vec4 csm_internal_positionUnprojected = ","gger","void main() {","customProgramCacheKey","update","CSM: ",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","csm_Emissive","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","MeshStandardMaterial","Cannot call a class as a function","construct","_generateMaterial","key","from","Arguments","csm_DepthAlpha","// #_CSM_#","replace","enumerable","void ","writable","csm_Metalness","toUpperCase","emissive","input","string","MeshLambertMaterial","undefined","defineProperties","getOwnPropertyDescriptor","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","warn",'CSM: Property "',"csm_main_","length","__proto__","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","instanceID","3NmPZGu","MeshMatcapMaterial","\n    vec3 objectNormal = ","Set","ShaderChunk","while (true) {}","cacheKey","_getPatchMapForMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Map","uniforms","object","@@iterator","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","next","silent","567348HnOCIx","iterator","defineProperty","function","lights_physical_fragment","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","MathUtils","Object","generateUUID","vertexShader","metalness","@@toPrimitive must return a primitive value.","this hasn't been initialised - super() hasn't been called","701576PgTBAw","isAlreadyExtended"," is not available in ","clearcoat","symbol","isArray","10kbjAgU","MeshPhongMaterial","default","\n    varying mat4 csm_internal_vModelViewMatrix;\n","_getCacheHash","1092352iJQUEi","\n    gl_PointSize = ","csm_DiffuseColor"];return(sr=function(){return n})()}function ur(n,t){return function(n){if(Array[dr(276)](n))return n}(n)||function(n,t){var e=dr,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(259)]]||n[e(254)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(360)](n))[e(256)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(360)](r))[e(199)])&&(s[e(349)](o[e(198)]),s[e(238)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(366)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=dr;if(n){if(typeof n===e(229))return cr(n,t);var r=Object.prototype[e(377)].call(n)[e(196)](8,-1);return r===e(265)&&n.constructor&&(r=n[e(369)].name),r===e(251)||r===e(245)?Array[e(217)](n):r===e(218)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(326)](r)?cr(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(n,t){for(var e=dr,r=0;r<t[e(238)];r++){var o=t[r];o[e(222)]=o[e(222)]||!1,o[e(339)]=!0,"value"in o&&(o[e(224)]=!0),Object[e(260)](n,er(o[e(216)]),o)}}function fr(n){if(void 0===n)throw new ReferenceError(dr(270));return n}function pr(n,t){var e=dr;return(pr=Object[e(368)]?Object[e(368)][e(383)]():function(n,t){return n[e(239)]=t,n})(n,t)}function dr(n,t){var e=sr();return(dr=function(n,t){return e[n-=196]})(n,t)}function hr(n){var t=dr;return(hr=Object[t(368)]?Object.getPrototypeOf[t(383)]():function(n){var e=t;return n.__proto__||Object[e(331)](n)})(n)}function vr(n){var t=function(){var n=dr;if(typeof Reflect===n(231)||!Reflect[n(214)])return!1;if(Reflect[n(214)][n(321)])return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype[n(294)][n(360)](Reflect[n(214)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=dr,o=hr(n);if(t){var i=hr(this)[r(369)];e=Reflect[r(214)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(dr(375));return fr(n)}(this,e)}}tr(void 0,(function(){for(var n=dr,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(327)]=t[n(327)]||{},r=[n(384),n(235),"info",n(336),n(317),n(346),n(319)],o=0;o<r.length;o++){var i=tr[n(369)].prototype[n(383)](tr),a=r[o],c=e[a]||i;i[n(239)]=tr[n(383)](tr),i[n(377)]=c.toString.bind(c),e[a]=i}}))();var mr,gr,_r,yr={diffuse:Qe(284),normal:Qe(387),roughness:"csm_Roughness",metalness:Qe(225),emissive:Qe(210),ao:Qe(329),bump:Qe(370),clearcoat:Qe(300),clearcoatRoughness:Qe(335),clearcoatNormal:"csm_ClearcoatNormal",pointSize:"csm_PointSize",fragColor:"csm_FragColor",depthAlpha:Qe(219),position:Qe(376),positionRaw:Qe(292)},xr=(rr(mr={},""[Qe(289)](yr[Qe(311)]),"*"),rr(mr,"".concat(yr.positionRaw),"*"),rr(mr,""[Qe(289)](yr[Qe(395)]),"*"),rr(mr,"".concat(yr.pointSize),[Qe(330)]),rr(mr,""[Qe(289)](yr[Qe(287)]),"*"),rr(mr,""[Qe(289)](yr[Qe(309)]),"*"),rr(mr,""[Qe(289)](yr[Qe(227)]),[Qe(212),Qe(374)]),rr(mr,""[Qe(289)](yr[Qe(325)]),["MeshStandardMaterial",Qe(374)]),rr(mr,""[Qe(289)](yr[Qe(268)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),rr(mr,""[Qe(289)](yr.ao),["MeshStandardMaterial",Qe(374),"MeshBasicMaterial",Qe(230),"MeshPhongMaterial","MeshToonMaterial"]),rr(mr,""[Qe(289)](yr[Qe(385)]),[Qe(230),Qe(243),Qe(350),Qe(278),Qe(374),Qe(212),Qe(340),"ShadowMaterial"]),rr(mr,""[Qe(289)](yr.depthAlpha),[Qe(310)]),rr(mr,""[Qe(289)](yr[Qe(274)]),[Qe(374)]),rr(mr,"".concat(yr[Qe(365)]),[Qe(374)]),rr(mr,""[Qe(289)](yr.clearcoatNormal),[Qe(374)]),mr),Ir={"#include <lights_physical_fragment>":z[Qe(246)][Qe(262)]},br=(rr(gr={},""[Qe(289)](yr.normal),{"#include <beginnormal_vertex>":Qe(244).concat(yr[Qe(395)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),rr(gr,"".concat(yr[Qe(311)]),{"#include <begin_vertex>":"\n    vec3 transformed = ".concat(yr[Qe(311)],Qe(201))}),rr(gr,""[Qe(289)](yr[Qe(307)]),{"#include <begin_vertex>":Qe(203)[Qe(289)](yr[Qe(307)],Qe(209))}),rr(gr,""[Qe(289)](yr.pointSize),{"gl_PointSize = size;":Qe(283)[Qe(289)](yr[Qe(338)],Qe(332))}),rr(gr,""[Qe(289)](yr[Qe(287)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[Qe(289)](yr[Qe(287)],";\n  ")}),rr(gr,""[Qe(289)](yr.fragColor),{"#include <dithering_fragment>":Qe(299)[Qe(289)](yr[Qe(309)],Qe(201))}),rr(gr,""[Qe(289)](yr[Qe(227)]),{"vec3 totalEmissiveRadiance = emissive;":Qe(390).concat(yr[Qe(227)],Qe(332))}),rr(gr,"".concat(yr.roughness),{"#include <roughnessmap_fragment>":Qe(320).concat(yr[Qe(325)],Qe(332))}),rr(gr,""[Qe(289)](yr.metalness),{"#include <metalnessmap_fragment>":Qe(263)[Qe(289)](yr.metalness,Qe(332))}),rr(gr,""[Qe(289)](yr.ao),{"#include <aomap_fragment>":Qe(393)[Qe(289)](yr.ao,";\n    ")}),rr(gr,""[Qe(289)](yr[Qe(385)]),{"#include <normal_fragment_maps>":Qe(211)[Qe(289)](yr[Qe(385)]," - (dot(").concat(yr.bump,Qe(291))}),rr(gr,""[Qe(289)](yr[Qe(342)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Qe(373).concat(yr[Qe(342)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Qe(255)[Qe(289)](yr[Qe(342)],Qe(332))}),rr(gr,""[Qe(289)](yr[Qe(274)]),{"material.clearcoat = clearcoat;":"material.clearcoat = ".concat(yr[Qe(274)],";")}),rr(gr,"".concat(yr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":Qe(388)[Qe(289)](yr[Qe(365)],";")}),rr(gr,""[Qe(289)](yr[Qe(333)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),gr),Sr=(rr(_r={},""[Qe(289)](yr[Qe(311)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Qe(354)[Qe(289)](yr.position,Qe(313))}),rr(_r,""[Qe(289)](yr[Qe(307)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Qe(312).concat(yr[Qe(311)],Qe(201))}),rr(_r,""[Qe(289)](yr[Qe(287)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Qe(363).concat(yr[Qe(287)],Qe(201))}),rr(_r,""[Qe(289)](yr[Qe(309)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Qe(363)[Qe(289)](yr.fragColor,Qe(201))}),_r),wr={clearcoat:[yr[Qe(274)],yr[Qe(333)],yr[Qe(365)]]},Mr=Qe(328),Er=Qe(280),Rr=Qe(240),Ar=Qe(280),Dr=["baseMaterial",Qe(353),Qe(267),"uniforms","patchMap","cacheKey",Qe(257)],zr=function(n,t,e){var r=Qe;return n[r(361)](t)[r(314)](e)},Tr=function(n,t){var e,r=Qe;return new RegExp("\\b".concat((e=t,e[Qe(221)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b"))[r(326)](n)};function Pr(n){return n?n[Qe(221)](/\s/g,""):void 0}function Or(n){return n[Qe(221)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Cr=function(n){var t=Qe;!function(n,t){var e=dr;if(typeof t!==e(261)&&null!==t)throw new TypeError(e(344));n[e(347)]=Object[e(351)](t&&t[e(347)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(260)](n,e(347),{writable:!1}),t&&pr(n,t)}(c,$);var e,r,o,i,a=vr(c);function c(n){var t,e,r,o,i,s=dr,u=n[s(303)],l=n[s(353)],f=n.vertexShader,p=n[s(252)],d=n.patchMap,h=n[s(248)],v=n[s(257)],m=ar(n,Dr);if(function(n,t){if(!(n instanceof t))throw new TypeError(dr(213))}(this,c),!function(n){var t=Qe;try{new n}catch(e){if(e[t(355)][t(378)](t(200))>=0)return!1}return!0}(u)?(e=u,Object[s(298)](e,m)):e=new u(m),e[s(302)]===s(372))throw new Error(s(308));(function(n,t){var e=Qe;e(238),Object[e(298)](n,t);var r=Object.getPrototypeOf(t);Object[e(288)](Object.getOwnPropertyDescriptors(r))[e(337)]((function(n){var t=e,r=typeof n[1][t(324)]===t(261),o=typeof n[1][t(380)]===t(261),i=typeof n[1][t(198)]===t(261),a=n[0]===t(369);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(261)&&Object[r(260)](n,t[0],t[1])}))})(fr(t=a[s(360)](this)),e),t[s(352)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:z[s(264)][s(266)](),type:e.type,isAlreadyExtended:(r=e[s(381)],o=Qe,i=r.toString().trim(),!(0===i.substring(i[o(378)]("{")+1,i.lastIndexOf("}"))[o(362)]()[o(238)])),cacheHash:"",silent:v},t[s(252)]=ir(ir({},t.uniforms||{}),p||{});var g=t[s(352)],_=g[s(353)],y=g[s(267)],x=t[s(252)];return t[s(352)][s(345)]=t[s(281)](),t[s(215)](_,y,x),t}return e=c,r=[{key:t(207),value:function(){var n=t,e=arguments[n(238)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(252)]=e[n(252)]||this[n(252)],Object[n(298)](this[n(352)],e);var r=this[n(352)],o=r[n(353)],i=r.vertexShader,a=this[n(252)],c=this[n(281)]();this[n(352)][n(345)]=c,this[n(215)](o,i,a)}},{key:t(334),value:function(){var n=t,e={baseMaterial:this.__csm[n(303)],fragmentShader:this[n(352)][n(353)],vertexShader:this[n(352)][n(267)],uniforms:this[n(252)],silent:this[n(352)].silent,patchMap:this[n(352)][n(290)],cacheKey:this.__csm[n(248)]},r=new(this[n(369)])(e);return Object[n(298)](this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(352)],r=e.fragmentShader,o=e[n(267)],i=this[n(252)],a=[Pr(r),Pr(o),i][n(337)]((function(n){return void 0!==n}));return a.length>0?An(a,{excludeValues:!0}):this[n(206)]()}},{key:t(215),value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(206)]=function(){var n=o;return i[n(352)][n(345)]};var a=function(t){var r=o;try{var a=i[r(386)]();if(n){var c=i[r(357)](Or(n),t.fragmentShader,!0);t[r(353)]=a+c}if(e){var s=i[r(357)](Or(e),t[r(267)]);t[r(267)]=r(371)+s,t[r(267)]=a+t.vertexShader}t[r(252)]=ir(ir({},t[r(252)]),i[r(252)]),i.uniforms=t[r(252)]}catch(u){console[r(336)](u)}};if(this[o(352)].isAlreadyExtended){var c=this[o(381)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(394)]=!0}},{key:t(357),value:function(n,e,r){var o=t,i=this,a=e,c=ir(ir({},this[o(249)]()),this.__csm[o(290)]);Object[o(288)](wr).forEach((function(t){var e=o,r=ur(t,2),a=r[0],c=r[1][e(301)]((function(t){return Tr(n,t)}));if(c&&!i[a])throw new Error(e(236).concat(a,e(286)).concat(c,e(316)))})),Object.entries(Ir).forEach((function(n){var t=ur(n,2),e=t[0],r=t[1];a=zr(a,e,r)})),Object[o(358)](c)[o(285)]((function(t){var e=o;Object[e(358)](c[t])[e(285)]((function(r){var o=e,s=xr[t],u=i[o(352)][o(302)];if("*"===t||Tr(n,t)){if(!(!s||Array[o(276)](s)&&s[o(367)](u)||"*"===s))throw new Error(o(208)[o(289)](t,o(273))[o(289)](u,o(359)));a=zr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(237)+this[o(352)][o(241)][o(221)](/-/g,"_"),h=n[o(221)](/void\s+main\s*\(\s*\)/g,o(223)[o(289)](d,"()")),v=n.includes(o(356)),m=a[o(367)](o(220));return v&&(m&&this[o(352)][o(272)]?(a=a[o(221)](o(205),"\n            "[o(289)](h,o(364))),s=a,u=o(220),l=o(348)[o(289)](d,o(391)),p=s[(f=Qe)(382)](u),a=-1===p?s:s[f(202)](0,p)+l+s[f(202)](p+u[f(238)])):a=a[o(221)](o(205),o(197)[o(289)](r?Ar:Er,o(341)).concat(Mr,"\n    \n            ").concat(h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ").concat("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(234))[o(289)](r?"\n    \n":Rr,o(343))[o(289)](d,"();\n              // #_CSM_#\n          "))),a}},{key:t(386),value:function(){var n=t,e=this.__csm.type;return e?"#define IS_"[n(289)](e[n(226)](),";\n"):n(389)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this[n(352)][n(302)]===n(304)?Sr:br}}],i=dr,r&&lr(e.prototype,r),o&&lr(e,o),Object[i(260)](e,i(347),{writable:!1}),c}();function Fr(n){function t(n){var e=dr;if("string"==typeof n)return function(n){}[e(369)](e(247)).apply(e(392));1!==(""+n/n)[e(238)]||n%20==0?function(){return!0}[e(369)](e(293)+e(204))[e(360)]("action"):function(){return!1}[e(369)](e(293)+"gger")[e(318)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Br=Ur;!function(n,t){const e=Ur,r=Nr();for(;;)try{if(492292===parseInt(e(172))/1+parseInt(e(158))/2+-parseInt(e(150))/3*(parseInt(e(163))/4)+-parseInt(e(162))/5+parseInt(e(167))/6+-parseInt(e(142))/7+parseInt(e(136))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ur(170)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jr(this,(function(){const n=Ur,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Zr("init");t.test(r+"chain")&&e[n(160)](r+n(148))?Zr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ur(170)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nr(){const n=["\n      ","object","table","274744YSQIWM","roughness","test","info","2646860jiuWFH","63564UJTPTM","#ff00fc","return (function() ","length","5043654GDHAwg","counter","bind","apply","gger","337907mGStbj","trace","color","warn","debu",'{}.constructor("return this")( )',"3972480dNEvwY","stateObject","call","error","index","constructor","5090540yITyNp","toString","exception","metalness","primitive","clearcoatRoughness","input","clearcoat","12ZKeGJL","setStyle","console","while (true) {}","MeshPhysicalMaterial"];return(Nr=function(){return n})()}function Ur(n,t){const e=Nr();return(Ur=function(n,t){return e[n-=136]})(n,t)}kr(void 0,(function(){const n=Ur,t=function(){const n=Ur;let t;try{t=Function(n(165)+n(177)+");")()}catch(e){t=window}return t}(),e=t[n(152)]=t.console||{},r=["log",n(175),n(161),n(139),n(144),n(157),n(173)];for(let o=0;o<r[n(166)];o++){const t=kr[n(141)].prototype[n(169)](kr),i=r[o],a=e[i]||t;t.__proto__=kr[n(169)](kr),t[n(143)]=a[n(143)][n(169)](a),e[i]=t}}))();const Lr=[Br(156)],Hr=rn({__name:Br(140),props:{color:{default:Br(164)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Br,e=n,r={baseMaterial:z[t(154)],metalness:e.metalness,roughness:e[t(159)],clearcoat:e.clearcoat,clearcoatRoughness:e.clearcoatRoughness,color:e.color,vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(155)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Cr(r);return dn((()=>{const n=t;o[n(174)][n(151)](e[n(174)]),o[n(145)]=e[n(145)],o.roughness=e[n(159)],o[n(149)]=e[n(149)],o[n(147)]=e[n(147)]})),(n,e)=>{const r=t;return sn(),un(r(146),{object:en(o)},null,8,Lr)}}});function Zr(n){function t(n){const e=Ur;if("string"==typeof n)return function(n){}[e(141)](e(153)).apply(e(168));1!==(""+n/n)[e(166)]||n%20==0?function(){return!0}[e(141)](e(176)+e(171))[e(138)]("action"):function(){return!1}[e(141)](e(176)+e(171))[e(170)](e(137)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=$r,r=Vr();;)try{if(579132===parseInt(e(369))/1+-parseInt(e(400))/2*(parseInt(e(373))/3)+parseInt(e(378))/4*(parseInt(e(380))/5)+parseInt(e(402))/6*(-parseInt(e(386))/7)+parseInt(e(375))/8*(parseInt(e(387))/9)+-parseInt(e(388))/10*(parseInt(e(392))/11)+parseInt(e(391))/12*(parseInt(e(404))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gr(this,(function(){var n=$r,t=new RegExp(n(382)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=qr(n(405));t.test(r+n(398))&&e.test(r+n(393))?qr():r("0")}))()}();var Wr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[$r(379)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vr(){var n=["table","1267hhYDsg","1125KsiZPC","945910tRsLaM","toString","prototype","127884Nvbzjb","77oWChbE","input","action","constructor","call","while (true) {}","chain","warn","4xbpECd","trace","36108XvPzKT","console","1196NAtzLD","init","debu","996548mvgJph","bind","error",'{}.constructor("return this")( )',"518163DbToJZ","exception","29000WJhVpZ","length","counter","8xujKJL","apply","614630yBVEiR","log","function *\\( *\\)","info","gger"];return(Vr=function(){return n})()}function $r(n,t){var e=Vr();return($r=function(n,t){return e[n-=369]})(n,t)}function qr(n){function t(n){var e=$r;if("string"==typeof n)return function(n){}[e(395)](e(397))[e(379)](e(377));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(406)+e(384))[e(396)](e(394)):function(){return!1}[e(395)](e(406)+e(384))[e(379)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Wr(void 0,(function(){var n,t=$r;try{n=Function("return (function() "+t(372)+");")()}catch(s){n=window}for(var e=n.console=n[t(403)]||{},r=[t(381),t(399),t(383),t(371),t(374),t(385),t(401)],o=0;o<r[t(376)];o++){var i=Wr[t(395)][t(390)][t(370)](Wr),a=r[o],c=e[a]||i;i.__proto__=Wr.bind(Wr),i[t(389)]=c.toString[t(370)](c),e[a]=i}}))();export{Je as C,Hr as _,et as a,dt as b,Rt as c,Ct as d,Zt as e,te as f,We as g,Pe as h,_t as u};

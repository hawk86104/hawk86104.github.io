import{_ as t}from"./three.8tDGqmLF1741309500666.js";import{m as e}from"./@tresjs.yaBKiR-I1741309500666.js";import{d as n,P as o}from"./@pmndrs.RQWNONeU1741309500666.js";import{d as a,b as r,w as s,a2 as i,o as c,H as u,N as l,aj as f,ak as p}from"./@vue.NRI7TcgI1741309500666.js";const h=d;function d(t,e){const n=M();return(d=function(t,e){return n[t-=136]})(t,e)}!function(t,e){const n=d,o=M();for(;;)try{if(239909===-parseInt(n(147))/1*(-parseInt(n(202))/2)+-parseInt(n(210))/3+parseInt(n(136))/4+parseInt(n(191))/5+parseInt(n(183))/6+parseInt(n(196))/7*(-parseInt(n(176))/8)+-parseInt(n(175))/9*(-parseInt(n(219))/10))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const m=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[d(179)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){m(this,(function(){const t=d,e=new RegExp(t(145)),n=new RegExp(t(197),"i"),o=y(t(161));e[t(166)](o+t(186))&&n[t(166)](o+t(213))?y():o("0")}))()}();const w=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[d(179)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();w(void 0,(function(){const t=d;let e;try{e=Function(t(177)+t(199)+");")()}catch(a){e=window}const n=e[t(190)]=e.console||{},o=[t(137),t(170),t(143),t(169),"exception","table",t(203)];for(let r=0;r<o.length;r++){const e=w[t(206)][t(155)][t(212)](w),a=o[r],s=n[a]||e;e[t(214)]=w.bind(w),e[t(189)]=s[t(189)][t(212)](s),n[a]=e}}))();const g=["rotate-x"],b=a({__name:h(192),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:h(187)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(a){const d=h,m=a;let w=r();const{extend:b,scene:M,renderer:y,camera:S}=e();b({SoftShadowMaterial:n});const I={position:(new(t[d(205)]))[d(215)](m.lightPosition.x,m[d(153)].y,m[d(153)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},z=new o(y[d(158)],M.value,I[d(157)]),x={map:z.progressiveLightMap2[d(151)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:m[d(162)],alphaTest:m[d(150)],opacity:m[d(144)],color:m[d(148)]},P=new(t[d(194)]);for(let e=0;e<I[d(220)];e++){const e=new(t[d(209)])(16777215,I[d(152)]/I[d(220)]);e[d(141)]=!0,e[d(207)][d(138)]=I[d(138)],e[d(207)][d(188)][d(181)]=I[d(181)],e.shadow.camera.far=I.far,e[d(207)][d(188)][d(198)]=I[d(204)]/2,e[d(207)][d(188)][d(142)]=-I.size/2,e[d(207)][d(188)][d(208)]=I[d(204)]/2,e.shadow[d(188)][d(201)]=-I.size/2,e[d(207)].mapSize[d(185)]=I.mapSize,e[d(207)].mapSize.height=I[d(157)],P[d(156)](e)}const _=()=>{const e=d,n=I[e(139)].length();for(let o=0;o<P[e(165)].length;o++){const a=P[e(165)][o];if(Math[e(217)]()>m[e(193)])a[e(139)][e(215)](I.position.x+t[e(178)][e(140)](I[e(146)]),I[e(139)].y+t[e(178)][e(140)](I[e(146)]),I[e(139)].z+t[e(178)][e(140)](I.radius));else{let t=Math.acos(2*Math[e(217)]()-1)-Math.PI/2,o=2*Math.PI*Math[e(217)]();a[e(139)].set(Math[e(159)](t)*Math[e(159)](o)*n,Math.abs(Math[e(159)](t)*Math.sin(o)*n),Math[e(160)](t)*n)}}},T=(t=1)=>{const e=d;M[e(158)].add(P),z[e(163)]();for(let n=0;n<t;n++)_(),z[e(218)](S[e(158)],m[e(195)]),console[e(137)]("shadows plm update",n);M[e(158)][e(216)](P),z[e(154)]()};s((()=>w[d(158)]),(t=>{const e=d;t&&(z[e(200)](t),z.clear(),console[e(137)](e(172)),T(m[e(184)]),console[e(137)]("shadows render end"))}));const j=()=>{z[d(182)](),T(m.frames)};return i((()=>{const t=d;w[t(158)]&&(m[t(144)]&&(w[t(158)][t(180)][t(144)]=m[t(144)]),m.alphaTest&&(w[t(158)].material[t(150)]=m[t(150)]),m[t(148)]&&w[t(158)][t(180)][t(148)][t(215)](m[t(148)]),m.blend&&(w[t(158)].material[t(162)]=m[t(162)]))})),s((()=>m[d(153)]),(t=>{const e=d;t&&(console.log(m[e(153)]),I[e(139)].set(t.x,t.y,t.z),j())}),{deep:!0}),s((()=>[m[d(184)],m[d(195)],m[d(193)]]),(()=>{j()})),(t,e)=>{const n=d;return c(),u(n(164),{"receive-shadow":"",ref_key:"gPlane",ref:w,scale:10,"rotate-x":-Math.PI/2},[e[0]||(e[0]=l("TresPlaneGeometry",{args:[1,1]},null,-1)),l(n(173),f(p(x)),null,16)],8,g)}}});function M(){const t=["gger","18HXCGgS","148664NNFSfp","return (function() ","MathUtils","apply","material","near","clear","121668lbaIjT","frames","width","chain","#000000","camera","toString","console","799480hHgrfS","accumulativeShadowsCom","ambient","Group","blendWindow","77qdHQJJ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","right",'{}.constructor("return this")( )',"configure","bottom","30PktweQ","trace","size","Vector3","constructor","shadow","top","DirectionalLight","336234LAtNhC","action","bind","input","__proto__","set","remove","random","update","39230nIYkSo","amount","1031260EoieNW","log","bias","position","randFloatSpread","castShadow","left","info","opacity","function *\\( *\\)","radius","7371oiWrOT","color","counter","alphaTest","texture","intensity","lightPosition","finish","prototype","add","mapSize","value","cos","sin","init","blend","prepare","TresMesh","children","test","call","stateObject","error","warn","debu","shadows render start","TresSoftShadowMaterial"];return(M=function(){return t})()}function y(t){function e(t){const n=d;if("string"==typeof t)return function(t){}[n(206)]("while (true) {}")[n(179)](n(149));1!==(""+t/t).length||t%20==0?function(){return!0}[n(206)]("debu"+n(174))[n(167)](n(211)):function(){return!1}.constructor(n(171)+n(174))[n(179)](n(168)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{b as _};

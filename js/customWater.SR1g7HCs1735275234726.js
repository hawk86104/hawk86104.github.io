import{_ as t}from"./three.jpi2UCEx1735275234726.js";import{e,W as n,U as r,c as o}from"./@tresjs.fCqPNEAw1735275234726.js";import{a}from"./index.Ny6GIji_1735275234726.js";import"./index.2plr18kG1735275234726.js";import{z as s}from"./three-custom-shader-material.6yZB66Qf1735275234726.js";import{p as i}from"./gl-noise.BrVtymbx1735275234726.js";import{d as l,b as u,a3 as c,w as p,o as f,D as g,J as h,j as m,u as v,r as d,f as _,g as b,aj as w,ak as y,m as M,al as j}from"./@vue.u2cBPEWn1735275234726.js";import{P as x}from"./tweakpane.yHWGBmom1735275234726.js";import{_ as z}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.adUXZGnZ1735275234726.js";import"./@vueuse.8jEBPPFT1735275234726.js";import"./three-stdlib.FRPXc4iL1735275234726.js";import"./@pmndrs.fIuOSuk41735275234726.js";import"./object-hash.czWCx2-t1735275234726.js";import"./@amap.Ndko9EDY1735275234726.js";import"./jszip._AevLh8r1735275234726.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.38aVQBA21735275234726.js";import"./all.three.XuJc20cT1735275234726.js";import"./oimophysics.x0jH7fze1735275234726.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.mi6rugTA1735275234726.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.IFtbzmOp1735275234726.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.1YTtfnJA1735275234726.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.qCeR04a31735275234726.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.WMr7J9n71735275234726.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.nvVGBSZJ1735275234726.js";const T=W;!function(t,e){const n=W,r=G();for(;;)try{if(847095===parseInt(n(251))/1+parseInt(n(247))/2*(parseInt(n(245))/3)+parseInt(n(249))/4+-parseInt(n(212))/5+parseInt(n(205))/6+-parseInt(n(202))/7+-parseInt(n(248))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const C=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[W(201)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){C(this,(function(){const t=W,e=new RegExp(t(207)),n=new RegExp(t(209),"i"),r=H(t(200));e[t(239)](r+t(232))&&n[t(239)](r+"input")?H():r("0")}))()}();const S=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();S(void 0,(function(){const t=W,e=function(){const t=W;let e;try{e=Function(t(215)+t(235)+");")()}catch(n){e=window}return e}(),n=e[t(227)]=e[t(227)]||{},r=["log",t(218),t(219),t(206),t(196),"table",t(208)];for(let o=0;o<r[t(198)];o++){const e=S[t(194)][t(222)][t(243)](S),a=r[o],s=n[a]||e;e[t(240)]=S[t(243)](S),e[t(199)]=s[t(199)][t(243)](s),n[a]=e}}))();const I=[T(236)],B=[T(234)];function G(){const t=["apply","1168944olIaWF","DoubleSide","call","9374976VXwrdL","error","function *\\( *\\)","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","side","waterHighlight","6903935RPSZpt","vertex","fragment","return (function() ","brightness","counter","warn","info","debu","baseMaterial","prototype","#b3ffff","convertLinearToSRGB","vertexShader","Flatshading","console","Color","TresMesh","flatShading","height","chain","material","args",'{}.constructor("return this")( )',"rotation-x","gger","stateObject","test","__proto__","action","#52a7f7","bind","MeshPhysicalMaterial","3TzCbWk","waterColor","2335398rtMNNC","20306296WmMhss","3975164cpLXun","uHeight","1209175AiRHTG","dispose","value","constructor","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","exception","fragmentShader","length","toString","init"];return(G=function(){return t})()}function W(t,e){const n=G();return(W=function(t,e){return n[t-=194]})(t,e)}const F=l({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:T(242)},waterHighlight:{default:T(223)},brightness:{default:1},baseMaterial:{default:t[T(244)]}},setup(r){const o=T,a=r,l=u(null),d={vertex:o(195),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},_={uTime:{value:0},waterColor:{value:new(t[o(228)])(a[o(246)]).convertLinearToSRGB()},waterHighlight:{value:new(t[o(228)])(a.waterHighlight)[o(224)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:a.brightness},uHeight:{value:a.height}},{onLoop:b}=e();return b((({elapsed:t})=>{const e=o;_.uTime[e(253)]=-t/5})),c((()=>{const e=o;a[e(231)]&&(_[e(250)][e(253)]=a[e(231)]),a[e(246)]&&(_[e(246)][e(253)]=new(t[e(228)])(a[e(246)])[e(224)]()),a[e(211)]&&(_[e(211)][e(253)]=new(t[e(228)])(a[e(211)]).convertLinearToSRGB()),a.brightness&&(_[e(216)][e(253)]=a[e(216)])})),p((()=>a[o(226)]),(t=>{const e=o;l[e(253)][e(233)].needsUpdate=!0})),p((()=>a.baseMaterial),(e=>{const n=o,r=new s({baseMaterial:t[e],vertexShader:i(d[n(213)]),fragmentShader:d[n(214)],uniforms:_,flatShading:a[n(226)],side:t[n(203)],roughness:.2,metalness:.1,silent:!0});l[n(253)][n(233)][n(252)](),l.value[n(233)]=r})),(e,r)=>{const a=o;return f(),g(a(229),{ref_key:"tmRef",ref:l,"rotation-x":-Math.PI/2},[h("TresBoxGeometry",{args:[5,5,e.height,64,64,1]},null,8,B),m(v(n),{baseMaterial:t[a(244)],vertexShader:v(i)(d[a(213)]),fragmentShader:d[a(214)],uniforms:_,side:t[a(203)],roughness:.2,metalness:.1,flatShading:e[a(226)],silent:""},null,8,[a(221),a(225),a(197),a(210),a(230)])],8,I)}}});function H(t){function e(t){const n=W;if("string"==typeof t)return function(t){}[n(194)]("while (true) {}").apply(n(217));1!==(""+t/t)[n(198)]||t%20==0?function(){return!0}.constructor(n(220)+n(237))[n(204)](n(241)):function(){return!1}[n(194)](n(220)+n(237))[n(201)](n(238)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=D,r=R();for(;;)try{if(925492===parseInt(n(220))/1+-parseInt(n(210))/2*(-parseInt(n(208))/3)+parseInt(n(197))/4+-parseInt(n(235))/5+parseInt(n(226))/6+parseInt(n(196))/7*(-parseInt(n(185))/8)+parseInt(n(221))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const O=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){O(this,(function(){const t=D,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(222),"i"),r=k("init");e[t(228)](r+"chain")&&n.test(r+t(215))?k():r("0")}))()}();const P=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[D(192)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function R(){const t=["MeshPhongMaterial","MeshPhysicalMaterial","Flatshading","counter","brightness","9oFBAFR","TresDirectionalLight","276214dYcXhP","MeshStandardMaterial","neg-y.jpg","addBinding","trace","input","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","while (true) {}","pos-y.jpg","debu","1798598sQBhYb","702342vEBEdh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","log","__proto__","2437842FZYSJQ","MeshDepthMaterial","test","TresPerspectiveCamera","call","string","MeshBasicMaterial","length","MeshToonMaterial","8981645IYFxIE","toString","return (function() ","exception","height","value","gger","baseMaterial","TresAmbientLight","ACESFilmicToneMapping","console","MeshNormalMaterial","195824Lxghsc","table","#b3ffff","#627179","constructor","prototype","waterHighlight","apply","neg-x.jpg","bind","waterColor","455NJywev","6462508zMTOeh","warn","change","#3a78a2","MeshLambertMaterial","error"];return(R=function(){return t})()}function D(t,e){const n=R();return(D=function(t,e){return n[t-=174]})(t,e)}P(void 0,(function(){const t=D,e=function(){const t=D;let e;try{e=Function(t(175)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(183)]=e[t(183)]||{},r=[t(224),t(198),t(223),t(202),t(176),t(186),t(214)];for(let o=0;o<r[t(233)];o++){const e=P[t(189)][t(190)][t(194)](P),a=r[o],s=n[a]||e;e[t(225)]=P[t(194)](P),e[t(174)]=s.toString[t(194)](s),n[a]=e}}))();const L=l({__name:"customWater",setup(e){const n=D,s=d({alpha:!0,toneMapping:t[n(182)],windowSize:!0,clearColor:10066329}),i=d({enableDamping:!0,autoRotate:!1}),l=d({cellSize:.6,cellThickness:1.1,cellColor:n(188),sectionColor:n(200),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=d({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(187),brightness:1,baseMaterial:n(204)}),c=new x;return c[n(213)](u,n(177),{label:"高度",min:.1,max:5,step:.1}),c[n(213)](u,n(195),{label:"水体颜色"}),c[n(213)](u,n(191),{label:"浪头颜色"}),c[n(213)](u,n(207),{label:"亮度",min:0,max:1,step:.01}),c[n(213)](u,n(205),{label:"Flatshading"}),c.addBlade({view:"list",label:"材质",options:[{text:n(204),value:n(204)},{text:n(232),value:"MeshBasicMaterial"},{text:n(184),value:n(184)},{text:n(211),value:n(211)},{text:n(203),value:n(203)},{text:n(234),value:n(234)},{text:n(201),value:"MeshLambertMaterial"},{text:n(227),value:n(227)}],value:u.baseMaterial}),c.on(n(199),(t=>{const e=n;"材质"===t.target.label&&(u[e(180)]=t[e(178)])})),(t,e)=>{const c=n;return f(),_(v(o),M(s,{"window-size":""}),{default:b((()=>[e[0]||(e[0]=h(c(229),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),m(v(r),w(y(i)),null,16),e[1]||(e[1]=h(c(181),{intensity:.5},null,-1)),e[2]||(e[2]=h(c(209),{position:[15,15,15],intensity:1},null,-1)),m(F,w(y(u)),null,16),m(v(z),M({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(f(),_(j,null,{default:b((()=>[m(v(a),{files:["pos-x.jpg",c(193),c(218),c(212),"pos-z.jpg","neg-z.jpg"],path:c(216)})])),_:1}))])),_:1},16)}}});function k(t){function e(t){const n=D;if(typeof t===n(231))return function(t){}.constructor(n(217))[n(192)](n(206));1!==(""+t/t)[n(233)]||t%20==0?function(){return!0}[n(189)]("debu"+n(179))[n(230)]("action"):function(){return!1}.constructor(n(219)+n(179))[n(192)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{L as default};

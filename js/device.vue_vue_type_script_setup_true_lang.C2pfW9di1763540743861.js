import{x as e,c$ as a,be as r,bL as t,b1 as s,d0 as n,d1 as o,f as l,d2 as i,d7 as d,q as u,dm as c,l as m}from"./three.rXKzP9fQ1763540743861.js";import{F as h,_ as v}from"./@tresjs.BCHtwiaC1763540743861.js";import{u as p}from"./index.Crdf3MNx1763540743861.js";import{d as f,a8 as b,a6 as w,H as x,o as g,a9 as _,u as P}from"./@vue.Co_gxueH1763540743861.js";let y=new m("#0fb1fb");const T=new e({color:y,transparent:!0,opacity:.3}),j=new s({color:new m(y),depthTest:!0,transparent:!0}),S=0,M=.972,k=.21,C=["object"],D=f({__name:"device",props:{threshold:{default:0},strength:{default:.972},radius:{default:.21}},async setup(s){let f,y;const D=s,{nodes:U}=([f,y]=b(()=>p("https://opensource.cdn.icegl.cn/model/industry4/modelDraco.glb")),f=await f,y(),f),R=(e=>{const s=[];e.traverse(e=>{e.isMesh&&(s.push(e.geometry),e.material=T)});const n=a(s),o=new r(n,6.137*Math.PI),l=new t(o);return j.opacity=1,l.material=j,l})(U.Sketchfab_model),{camera:B,renderer:F,scene:H,sizes:L}=h();let N=null,q=null,z=null;const G=new e({color:"black"});w(()=>{if(B.value){F.setPixelRatio(window.devicePixelRatio),H.value.add(R);const{finalComposer:e,effectComposer:a,bloomPass:r}=((e,a,r,t,s)=>{const m=new n(e,a),h=new o(new l(t,s),M,k,S),v=new i(r);v.renderToScreen=!1,v.addPass(m),v.addPass(h);const p=new d(new u({uniforms:{baseTexture:{value:null},bloomTexture:{value:v.renderTarget2.texture}},vertexShader:"varying vec2 vUv;\nvoid main(){\n\tvUv=uv;\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform sampler2D baseTexture;\nuniform sampler2D bloomTexture;\nvarying vec2 vUv;\nvoid main(){\n\tgl_FragColor=(texture2D(baseTexture,vUv)+vec4(1.)*texture2D(bloomTexture,vUv));\n}",defines:{}}),"baseTexture");p.needsSwap=!0;const f=new c,b=new i(r);return b.addPass(m),b.addPass(p),b.addPass(f),{finalComposer:b,effectComposer:v,renderScene:m,bloomPass:h}})(H.value,B.value,F,L.width.value,L.height.value);N=e,q=a,z=r,z.threshold=D.threshold,z.strength=D.strength,z.radius=D.radius}D.threshold&&(z.threshold=D.threshold),D.strength&&(z.strength=D.strength),D.radius&&(z.radius=D.radius)});const I={},{onBeforeRender:O}=v();let V=U.Sketchfab_model.getObjectByName("canister_turbine_011_Nickel-Light-PBR_0"),$=V.material.clone(),A=new e({color:new m("red"),transparent:!0,opacity:1});return O(({elapsed:e})=>{U.hull_turbine&&(U.hull_turbine.rotation.x+=.03,U.blades_turbine_003.rotation.x+=.03),Math.floor(e)%2?V.material=$:V.material=A},-1),O(({elapsed:e})=>{q&&(H.value.traverse(e=>{var a;((a=e).isMesh||"GridHelper"===a.type||"reflectorShaderMesh"===a.name)&&(I[a.uuid]=a.material,a.material=G)}),q.render(e)),N&&(H.value.traverse(e=>{var a;I[(a=e).uuid]&&(a.material=I[a.uuid],delete I[a.uuid])}),N.render(e))},1),(e,a)=>(g(),x("primitive",{object:_(P(U).Sketchfab_model)},null,8,C))}});export{D as _};

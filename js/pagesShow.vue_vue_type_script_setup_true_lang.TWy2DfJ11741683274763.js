import{_ as t,a0 as n,cn as e,co as o,cp as r,cq as i,C as s,l as c,c1 as u,ak as a,am as l}from"./three.3wvNjL8W1741683274763.js";import{P as f,e as p,o as d}from"./@tresjs.tqalU7S21741683274763.js";import{z as h}from"./three-custom-shader-material.ikmMqXfn1741683274763.js";import{b as g,a as y}from"./buildingsCustomShaderMaterial.hq-IAd4G1741683274763.js";import{d as m,b as w,a2 as b,w as I,o as _,H as v,u as x,r as C,a3 as S,e as R,f as A,g as B,N as j,j as L,aj as O,ak as k,F as z,M as T,J as M,m as E}from"./@vue.NRI7TcgI1741683274763.js";!function(t,n){const e=J,o=D();for(;;)try{if(587378===-parseInt(e(316))/1*(parseInt(e(334))/2)+-parseInt(e(335))/3*(-parseInt(e(310))/4)+parseInt(e(313))/5*(parseInt(e(321))/6)+parseInt(e(307))/7+-parseInt(e(315))/8+parseInt(e(306))/9+-parseInt(e(337))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const F=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){F(this,(function(){const t=J,n=new RegExp(t(338)),e=new RegExp(t(333),"i"),o=H("init");n.test(o+t(342))&&e[t(305)](o+t(329))?H():o("0")}))()}();const G=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(314)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function J(t,n){const e=D();return(J=function(t,n){return e[t-=304]})(t,n)}G(void 0,(function(){const t=J;let n;try{n=Function(t(331)+t(339)+");")()}catch(r){n=window}const e=n[t(328)]=n[t(328)]||{},o=[t(309),t(320),t(318),t(311),t(326),t(319),t(340)];for(let i=0;i<o.length;i++){const n=G.constructor[t(312)].bind(G),r=o[i],s=e[r]||n;n[t(343)]=G.bind(G),n[t(324)]=s[t(324)].bind(s),e[r]=n}}))();const Z=async()=>{const t=await f("./plugins/digitalCity/model/shanghai.FBX");let n=null,e=null,o=null;return t.traverse((t=>{const r=J;t[r(308)]===r(317)&&(n=t),"LANDMASS"===t[r(308)]&&(e=t),t[r(308)]===r(327)&&(o=t)})),{model:t,city:n,land:e,roads:o}};function H(t){function n(t){const e=J;if(typeof t===e(323))return function(t){}.constructor(e(325))[e(314)](e(322));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(341)+e(336))[e(304)](e(332)):function(){return!1}.constructor(e(341)+e(336))[e(314)](e(330)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function D(){const t=["7264BqllRH","error","prototype","325445JxYSFb","apply","5890384qetBAo","357369dLzfFQ","CITY_UNTRIANGULATED","info","table","warn","102hUolYR","counter","string","toString","while (true) {}","exception","ROADS","console","input","stateObject","return (function() ","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4cggtPV","738tyqVXK","gger","269130CYpRGh","function *\\( *\\)",'{}.constructor("return this")( )',"trace","debu","chain","__proto__","call","test","1428183vUdfVH","2473737EuvRjB","name","log"];return(D=function(){return t})()}const Y=P;function $(){const t=["uOpacity","1355780BxOOMk","side","setStyle","8LYjDBQ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","2358970CAwLMJ","counter","dispose","gger","renderOrder","isArray","length","__proto__","model","init","uColor","call","function *\\( *\\)","stateObject","value","error","opacity","table","toString","uGradient",'{}.constructor("return this")( )',"__csm","debu","3394510AnnRxS","exception","#ffff00","prototype","Color","computeBoundingBox","uniforms","22chpYdd","#e523ff","2308464gzJLsG","info","bulidingsColor","console","apply","primitive","land","landColor","return (function() ","15qbLoSO","424529dLXJmn","boundingBox","forEach","trace","warn","15jwlPQl","DoubleSide","city","string","material","test","bind","buildingsModelCustomShader","chain","814902ATKPzG","constructor","topColor","243734twZOIc","gradient","object"];return($=function(){return t})()}!function(t,n){const e=P,o=$();for(;;)try{if(412760===-parseInt(e(198))/1+-parseInt(e(146))/2*(parseInt(e(197))/3)+parseInt(e(150))/4+-parseInt(e(203))/5*(-parseInt(e(143))/6)+parseInt(e(179))/7+parseInt(e(153))/8*(-parseInt(e(188))/9)+-parseInt(e(156))/10*(-parseInt(e(186))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[P(192)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){q(this,(function(){const t=P,n=new RegExp(t(168)),e=new RegExp(t(154),"i"),o=U(t(165));n[t(139)](o+t(142))&&e[t(139)](o+"input")?U():o("0")}))()}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[P(192)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function P(t,n){const e=$();return(P=function(t,n){return e[t-=137]})(t,n)}W(void 0,(function(){const t=P;let n;try{n=Function(t(196)+t(176)+");")()}catch(r){n=window}const e=n[t(191)]=n.console||{},o=["log",t(202),t(189),t(171),t(180),t(173),t(201)];for(let i=0;i<o[t(162)];i++){const n=W[t(144)][t(182)][t(140)](W),r=o[i],s=e[r]||n;n[t(163)]=W[t(140)](W),n.toString=s[t(174)].bind(s),e[r]=n}}))();const Q=[Y(148)],X=m({__name:Y(141),props:{model:{},bulidingsColor:{default:Y(187)},landColor:{default:"#112233"},topColor:{default:Y(181)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=Y,r=e,i=w(0),s=r.model[o(205)];s[o(160)]=1001;const c=r[o(164)][o(194)];(()=>{const e=o,{geometry:c}=s;c[e(184)](),c.computeBoundingSphere();const{max:u,min:a}=c[e(199)];if(s.material[e(177)])return;const l=new h({baseMaterial:s[e(138)],vertexShader:g,fragmentShader:y,silent:!0,uniforms:{uMax:{value:u},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[e(183)])(r[e(190)])},uOpacity:{value:r[e(172)]},uLightColor:{value:new(t[e(183)])("#ffffff")},uTopColor:{value:new(t[e(183)])(r[e(145)])},uTime:i,uGradient:{value:r[e(147)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:n});s.material[e(158)](),s[e(138)]=l})();const{onLoop:u}=p();u((({delta:t})=>{i[o(170)]+=t})),b((()=>{const n=o;r[n(190)]&&s.material[n(185)][n(166)][n(170)][n(152)](r.bulidingsColor),r[n(195)]&&((n,e)=>{const i=o;let s;"cu"===n||n===i(194)&&(s=Array[i(161)](c[i(138)])?c[i(138)]:[c[i(138)]],s[i(200)]((n=>{const o=i;n[e][o(152)](r.landColor),n[o(151)]=t[o(204)]})))})(n(194),"color"),r[n(172)]&&(s[n(138)][n(185)][n(149)][n(170)]=r[n(172)])})),I(r,((t,n)=>{const e=o;s[e(138)][e(185)][e(175)][e(170)]=t[e(147)]}));const a=r.model[o(164)].clone();return(t,n)=>{const e=o;return _(),v(e(193),{object:x(a)},null,8,Q)}}});function U(t){function n(t){const e=P;if(typeof t===e(137))return function(t){}[e(144)]("while (true) {}").apply(e(157));1!==(""+t/t).length||t%20==0?function(){return!0}[e(144)](e(178)+e(159))[e(167)](e(155)):function(){return!1}[e(144)](e(178)+e(159))[e(192)](e(169)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function V(t,n){const e=ot();return(V=function(t,n){return e[t-=388]})(t,n)}const N=V;!function(t,n){const e=V,o=ot();for(;;)try{if(170206===parseInt(e(442))/1*(parseInt(e(394))/2)+-parseInt(e(433))/3+-parseInt(e(391))/4+-parseInt(e(397))/5+-parseInt(e(432))/6*(-parseInt(e(413))/7)+parseInt(e(439))/8*(parseInt(e(388))/9)+parseInt(e(389))/10*(parseInt(e(429))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){K(this,(function(){const t=V,n=new RegExp(t(399)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=rt(t(435));n[t(423)](o+"chain")&&e.test(o+"input")?rt():o("0")}))()}();const tt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(396)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();tt(void 0,(function(){const t=V,n=function(){const t=V;let n;try{n=Function(t(436)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(422)]=n[t(422)]||{},o=["log",t(392),t(437),t(434),"exception","table","trace"];for(let r=0;r<o[t(421)];r++){const n=tt[t(415)][t(424)].bind(tt),i=o[r],s=e[i]||n;n[t(441)]=tt[t(409)](tt),n[t(430)]=s[t(430)].bind(s),e[i]=n}}))();const nt=["object"],et=m({__name:N(408),props:{builds:{},width:{default:1},color:{default:N(414)},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const n=N,u=t;let a=null,l=null;if(u.style===n(418)){const t=new e(u.builds[n(398)]);let s=(new o)[n(431)](t),c=new r({color:u[n(411)],linewidth:u[n(412)],opacity:u.opacity,transparent:!0,depthWrite:!0,depthTest:!0});c[n(420)][n(428)](window[n(425)],window.innerHeight),a=new i(s,c),a[n(406)](u[n(401)][n(404)][n(405)]())}else{l={transparent:!0,uniforms:{uColor:{value:new s(u[n(411)])},uOpacity:{value:u[n(417)]}},vertexShader:"\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:" \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "};const t=new e(u.builds[n(398)]),o=new c(l);a=new LineSegments(t,o),a.applyMatrix4(u[n(401)].matrix[n(405)]()),a[n(440)][n(402)]=u[n(412)],a.renderOrder=1e3}return b((()=>{const t=n;u[t(410)]===t(407)&&(u.color&&(l.uniforms[t(403)].value=new s(u.color)),u[t(417)]&&(l[t(438)][t(443)][t(416)]=u[t(417)])),"Wireframe"===u[t(410)]&&(u[t(411)]&&(a.material[t(411)]=new s(u[t(411)])),u[t(417)]&&(a[t(440)].opacity=u[t(417)])),u.width&&(a[t(440)].linewidth=u[t(412)])})),(t,e)=>{const o=n;return _(),v(o(426),{object:x(a)},null,8,nt)}}});function ot(){const t=["counter","builds","linewidth","uColor","matrix","clone","applyMatrix4","Shader","buildingsLines","bind","style","color","width","21NpgLJV","#FFF","constructor","value","opacity","Wireframe","string","resolution","length","console","test","prototype","innerWidth","primitive","call","set","55YmIkIV","toString","fromEdgesGeometry","508962iKkBGD","532071JKBxSa","error","init","return (function() ","info","uniforms","24CzJOfR","material","__proto__","493hfBeXh","uOpacity","521973bueuQC","667630DChZYS","debu","575964JXzptq","warn","while (true) {}","268aQJUsn","gger","apply","1683975RMohTh","geometry","function *\\( *\\)"];return(ot=function(){return t})()}function rt(t){function n(t){const e=V;if(typeof t===e(419))return function(t){}[e(415)](e(393)).apply(e(400));1!==(""+t/t)[e(421)]||t%20==0?function(){return!0}[e(415)](e(390)+e(395))[e(427)]("action"):function(){return!1}[e(415)](e(390)+e(395))[e(396)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const it=lt;!function(t,n){const e=lt,o=dt();for(;;)try{if(753779===-parseInt(e(252))/1*(parseInt(e(233))/2)+-parseInt(e(253))/3*(-parseInt(e(236))/4)+-parseInt(e(274))/5*(parseInt(e(275))/6)+parseInt(e(232))/7+parseInt(e(270))/8+parseInt(e(262))/9+-parseInt(e(238))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(254)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){st(this,(function(){const t=lt,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=pt("init");n[t(248)](o+t(272))&&e[t(248)](o+t(278))?pt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(254)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();ct(void 0,(function(){const t=lt;let n;try{n=Function(t(260)+t(263)+");")()}catch(r){n=window}const e=n[t(240)]=n[t(240)]||{},o=[t(257),"warn",t(261),t(237),"exception",t(245),t(250)];for(let i=0;i<o[t(234)];i++){const n=ct[t(246)][t(279)].bind(ct),r=o[i],s=e[r]||n;n.__proto__=ct[t(267)](ct),n[t(277)]=s.toString[t(267)](s),e[r]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]};function lt(t,n){const e=dt();return(lt=function(t,n){return e[t-=232]})(t,n)}const ft=m({__name:it(273),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let e,o;const r=t,i=C({clearColor:n(264),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:a,toneMapping:l,disableRender:r[n(243)]}),s=C({autoRotate:r[n(266)],enableDamping:!0});let c=null;r[n(282)]&&([e,o]=S((()=>Z())),e=await e,o(),c=e);const f=w(),p=w();return(t,e)=>{const o=n,u=R(o(244));return _(),A(u,E({ref_key:o(255),ref:p},i,{"window-size":""}),{default:B((()=>[j(o(269),{ref_key:o(259),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),L(x(d),O(k(s)),null,16),e[0]||(e[0]=j("TresAmbientLight",{color:o(258)},null,-1)),e[1]||(e[1]=j("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:o(258)},null,-1)),r[o(282)]&&x(c)?(_(),v(z,{key:0},[L(X,{model:x(c)},null,8,["model"]),L(et,{builds:x(c)[o(268)],color:o(280)},null,8,["builds"])],64)):T("",!0),M(t[o(256)],o(265)),r[o(241)]?(_(),v(o(247),ut)):T("",!0),r[o(251)]?(_(),v(o(239),at)):T("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=lt;if(typeof t===e(235))return function(t){}[e(246)](e(281))[e(254)]("counter");1!==(""+t/t)[e(234)]||t%20==0?function(){return!0}[e(246)](e(242)+e(249))[e(271)]("action"):function(){return!1}[e(246)](e(242)+e(249))[e(254)](e(276)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function dt(){const t=["showAxesHelper","debu","disableRender","TresCanvas","table","constructor","TresAxesHelper","test","gger","trace","showGridHelper","83164xcsWBL","423lPqUor","apply","tcRef","$slots","log","#ffffff","perspectiveCameraRef","return (function() ","info","4154787ExILQd",'{}.constructor("return this")( )',"#000000","ability","autoRotate","bind","city","TresPerspectiveCamera","7914688ikkAoa","call","chain","pagesShow","1800oIznwc","180GqLvXz","stateObject","toString","input","prototype","#000","while (true) {}","showBuildings","8795164JavtjE","2GpkYsQ","length","string","24756ZjzJXC","error","27323370txSOFi","TresGridHelper","console"];return(dt=function(){return t})()}export{X as _,et as a,ft as b,Z as l};

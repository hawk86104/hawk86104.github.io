import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.kLvS667-1731379053498.js";import{B as i,V as s,cs as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.bXjbKLxC1731379053498.js";import{e as l,f as p,F as d}from"./@tresjs.bLKO3xyw1731379053498.js";import{c as m}from"./simplex-noise.Yx8GBgKo1731379053498.js";import{d as f,a3 as g,o as y,D as b,u as v,r as S,j as x,g as _,m as w,F as I}from"./@vue.-THQH3GC1731379053498.js";import"./index.Ucf_-sb61731379053498.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.UAy2RrDQ1731379053498.js";import"./three-custom-shader-material.DZEAYEp81731379053498.js";import"./@vueuse.DWZrQ1Sl1731379053498.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.o2GIoNt01731379053498.js";import"./all.three.B15lSSyE1731379053498.js";import"./oimophysics.x0jH7fze1731379053498.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.ReP7gSZv1731379053498.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.ZMwPhBba1731379053498.js";import"./index.Xkk8JFHs1731379053498.js";import"./three-stdlib.yR_asc1t1731379053498.js";import"./@pmndrs.WRC-eauj1731379053498.js";import"./object-hash.ODhiDasX1731379053498.js";import"./@amap.mFH-iVTk1731379053498.js";import"./jszip.Gy4zFode1731379053498.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.ell-9NYR1731379053498.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.tUlFQVQ01731379053498.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.SGt_M3hD1731379053498.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Q8MdI5wY1731379053498.js";const M=T;function T(t,i){const s=R();return(T=function(t,i){return s[t-=328]})(t,i)}function R(){const t=["random","createTriangleVerticesWithUVs","position","up0","RAY_EXTINGUISHED","randomGenerator","bind","createSegment","push","simplexX","input","RAY_UNBORN","counter","newPos","length","trace","subrays","recursion","linPos0","rayParameters","subVectors","index","radius1","uvs","vertices","multiplyScalar","createDefaultSubrayCreationCallbacks","beginVanishingTime","currentSegmentCallback","generateUVs","vanishingTimeFactor","isStatic","radius1Factor","isInitialSegment","floor","subrayProbability","destOffset","currentSegmentIndex","18wTABFC","minRadius","currentCreateTriangleVertices","fractalRayRecursive","4512830viWaYT","prototype","update","fraction0","array","48nNHfDU","straightness","iteration","getNewSegment","gger","endPropagationTime","cos","ceil","maxIterations","pow","currentSeed","currentIndex","copyParameters","pos1","pos0","while (true) {}","positionAttribute","info","63854fOrgig","currentSubray","onDecideSubrayCreation","roughness","cross1","propagationTimeFactor","currentVertex","sub","return (function() ","indices","simplexY","54CtcAPB","middlePos","copy","action","sin","middleLinPos","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","subrayDutyCycle","10226800ueLkSI","normalize","lerp","RAY_STEADY","ramification","side","fraction1","log","deathTime","birthTime","drawRange","673705KzvMXe","set","toString","__proto__","clone","maxRaySegments","RAY_INITIALIZED","maxSubrayRecursion","subrayPeriod","max","init","lerpVectors","currentCoordinate","warn","apply","createTriangleVerticesWithoutUVs","onSubrayCreation","add","raySegments","chain","noiseSeed","state","maxSubrays","55287CYZxil","visible","createRandomGenerator","getSeed","function *\\( *\\)","vPos","recursionProbability","createPrism","sourceOffset","RAY_VANISHING","positionVariationFactor","setSeed","isEternal","fillMesh","seedGenerator","uvsAttribute","up1","901088ZrvSgL","createMesh","test","console","needsUpdate","RAY_PROPAGATING","type","usage","constructor","subrayConePosition","stateObject","createSubray","table","SIN30DEG","radius0","COS30DEG","timeFraction","radius0Factor","crossVectors","simplexZ","isLightningStrike","timeScale","setIndex","min","addNewSubray","seed","createPrismFaces","time","4991792YafTYM","linPos1","currentUVCoordinate","down","forwards","subrayCylinderPosition","forwardsFill","numSubrays"];return(R=function(){return t})()}!function(t,i){const s=T,n=R();for(;;)try{if(627705===parseInt(s(417))/1+-parseInt(s(487))/2+parseInt(s(470))/3*(parseInt(s(399))/4)+parseInt(s(447))/5*(parseInt(s(428))/6)+-parseInt(s(394))/7+-parseInt(s(344))/8*(-parseInt(s(390))/9)+-parseInt(s(436))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(461)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){A(this,(function(){const t=T,i=new RegExp(t(474)),s=new RegExp(t(434),"i"),n=F(t(457));i.test(n+t(466))&&s[t(489)](n+t(362))?F():n("0")}))()}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(461)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();C(void 0,(function(){const t=T;let i;try{i=Function(t(425)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(490)]=i[t(490)]||{},n=[t(443),t(460),t(416),"error","exception",t(328),t(367)];for(let r=0;r<n[t(366)];r++){const i=C[t(495)][t(395)][t(358)](C),e=n[r],o=s[e]||i;i[t(450)]=C.bind(C),i[t(449)]=o[t(449)][t(358)](o),s[e]=i}}))();class V extends i{constructor(t={}){const i=T;super(),this[i(336)]=!0,this[i(493)]="LightningStrike",this[i(457)](V[i(411)](t,t)),this.createMesh()}static[M(472)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(360)](Math[t(352)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(409)]];return n[e(409)]=(n[e(409)]+1)%i,r},getSeed:function(){return n[t(409)]/i},setSeed:function(s){n[t(409)]=Math.floor(s*i)%i}};return n}static[M(411)](t={},i={}){const n=M,e=function(s){return i===t?s:s.clone()};return t[n(478)]=void 0!==i[n(478)]?e(i.sourceOffset):new s(0,100,0),t.destOffset=void 0!==i[n(388)]?e(i[n(388)]):new s(0,0,0),t[n(337)]=void 0!==i.timeScale?i[n(337)]:1,t.roughness=void 0!==i[n(420)]?i[n(420)]:.9,t[n(400)]=void 0!==i[n(400)]?i[n(400)]:.7,t[n(355)]=void 0!==i[n(355)]?e(i[n(355)]):new s(0,0,1),t.up1=void 0!==i.up1?e(i[n(486)]):new s(0,0,1),t[n(330)]=void 0!==i.radius0?i[n(330)]:1,t[n(374)]=void 0!==i[n(374)]?i.radius1:1,t.radius0Factor=void 0!==i[n(333)]?i[n(333)]:.5,t.radius1Factor=void 0!==i.radius1Factor?i[n(384)]:.2,t.minRadius=void 0!==i[n(391)]?i[n(391)]:.2,t[n(482)]=void 0!==i.isEternal?i[n(482)]:void 0===i[n(445)]||void 0===i[n(444)],t[n(445)]=i[n(445)],t[n(444)]=i[n(444)],t.propagationTimeFactor=void 0!==i.propagationTimeFactor?i.propagationTimeFactor:.1,t[n(382)]=void 0!==i[n(382)]?i[n(382)]:.9,t[n(455)]=void 0!==i[n(455)]?i[n(455)]:4,t.subrayDutyCycle=void 0!==i[n(435)]?i[n(435)]:.6,t[n(407)]=void 0!==i[n(407)]?i[n(407)]:9,t[n(383)]=void 0!==i[n(383)]&&i.isStatic,t[n(440)]=void 0!==i[n(440)]?i[n(440)]:5,t[n(454)]=void 0!==i[n(454)]?i.maxSubrayRecursion:3,t.recursionProbability=void 0!==i[n(476)]?i[n(476)]:.6,t[n(381)]=void 0!==i[n(381)]&&i[n(381)],t[n(357)]=i.randomGenerator,t.noiseSeed=i[n(467)],t[n(419)]=i[n(419)],t.onSubrayCreation=i[n(463)],t}[M(396)](t){const i=M;this.isStatic||(this[i(371)].isEternal||this[i(371)][i(445)]<=t&&t<=this[i(371)].deathTime?(this.updateMesh(t),t<this[i(368)][0].endPropagationTime?this.state=V[i(492)]:t>this[i(368)][0][i(379)]?this.state=V[i(479)]:this[i(468)]=V.RAY_STEADY,this.visible=!0):(this[i(471)]=!1,t<this.rayParameters[i(445)]?this[i(468)]=V[i(363)]:this.state=V[i(356)]))}init(t){const i=M;this[i(371)]=t,this[i(407)]=void 0!==t[i(407)]?Math[i(386)](t.maxIterations):9,t.maxIterations=this[i(407)],this[i(383)]=void 0!==t.isStatic&&t[i(383)],t.isStatic=this.isStatic,this[i(440)]=void 0!==t[i(440)]?Math[i(386)](t[i(440)]):5,t[i(440)]=this[i(440)],this[i(454)]=void 0!==t.maxSubrayRecursion?Math[i(386)](t[i(454)]):3,t.maxSubrayRecursion=this.maxSubrayRecursion,this[i(476)]=void 0!==t[i(476)]?t.recursionProbability:.6,t.recursionProbability=this[i(476)],this[i(381)]=void 0!==t[i(381)]&&t[i(381)],t[i(381)]=this[i(381)],void 0!==t[i(357)]?(this[i(357)]=t[i(357)],this[i(484)]=t[i(357)],void 0!==t[i(467)]&&this[i(484)][i(481)](t[i(467)])):(this.randomGenerator=V.createRandomGenerator(),this[i(484)]=Math),void 0!==t[i(419)]?this[i(419)]=t[i(419)]:(this[i(378)](),void 0!==t.onSubrayCreation&&(this[i(463)]=t[i(463)])),this[i(468)]=V.RAY_INITIALIZED,this.maxSubrays=Math[i(406)](1+Math.pow(this.ramification,Math[i(456)](0,this[i(454)]-1))),t[i(469)]=this[i(469)],this[i(452)]=2*(1<<this[i(407)]),this[i(368)]=[];for(let s=0;s<this.maxSubrays;s++)this[i(368)].push(this.createSubray());this[i(465)]=[];for(let s=0;s<this[i(452)];s++)this[i(465)][i(360)](this[i(359)]());this[i(343)]=0,this[i(332)]=0,this[i(380)]=null,this[i(392)]=this[i(381)]?this[i(353)]:this[i(462)],this[i(351)]=0,this[i(418)]=null,this[i(389)]=0,this[i(385)]=!1,this[i(387)]=0,this[i(423)]=0,this.currentIndex=0,this[i(459)]=0,this.currentUVCoordinate=0,this.vertices=null,this[i(375)]=null,this[i(426)]=null,this[i(415)]=null,this[i(485)]=null,this[i(361)]=m(this.seedGenerator.random),this[i(427)]=m(this.seedGenerator[i(352)]),this[i(335)]=m(this.seedGenerator.random),this[i(348)]=new s,this[i(350)]=new s,this[i(441)]=new s,this.down=new s,this.middlePos=new s,this[i(433)]=new s,this[i(365)]=new s,this[i(475)]=new s,this[i(421)]=new s}[M(488)](){const t=M,i=1<<this[t(407)],s=3*(i+1)*this[t(469)],o=18*i*this[t(469)];this.vertices=new Float32Array(3*s),this[t(426)]=new Uint32Array(o),this.generateUVs&&(this[t(375)]=new Float32Array(2*s)),this[t(483)](0),this[t(338)](new n(this.indices,1)),this.positionAttribute=new e(this[t(376)],3),this.setAttribute(t(354),this[t(415)]),this[t(381)]&&(this[t(485)]=new e(new Float32Array(this[t(375)]),2),this.setAttribute("uv",this[t(485)])),!this[t(383)]&&(this.index.usage=r,this[t(415)][t(494)]=r,this.generateUVs&&(this[t(485)][t(494)]=r)),this.vertices=this.positionAttribute.array,this.indices=this[t(373)].array,this[t(381)]&&(this[t(375)]=this[t(485)][t(398)])}updateMesh(t){const i=M;this[i(483)](t),this[i(446)].count=this[i(410)],this[i(373)][i(491)]=!0,this[i(415)].needsUpdate=!0,this[i(381)]&&(this[i(485)][i(491)]=!0)}[M(483)](t){const i=M,s=this;this[i(423)]=0,this[i(410)]=0,this[i(459)]=0,this[i(346)]=0,this.fractalRay(t,(function(n){const e=i,r=s[e(418)];t<r[e(445)]||(this[e(371)][e(482)]&&0==s[e(418)][e(369)]?(s[e(477)](n),s[e(419)](n,s)):t<r[e(404)]?s.timeFraction>=n[e(397)]*r[e(422)]&&(s[e(477)](n),s[e(419)](n,s)):t<r[e(379)]?(s[e(477)](n),s[e(419)](n,s)):(s[e(332)]<=r[e(382)]+n.fraction1*(1-r[e(382)])&&s[e(477)](n),s[e(419)](n,s)))}))}[M(340)](){const t=M;return this[t(368)][this[t(351)]++]}initSubray(t,i){const s=M;t[s(413)][s(430)](i[s(478)]),t[s(412)][s(430)](i[s(388)]),t[s(355)].copy(i[s(355)]),t[s(486)][s(430)](i[s(486)]),t[s(330)]=i[s(330)],t[s(374)]=i[s(374)],t.birthTime=i[s(445)],t[s(444)]=i[s(444)],t[s(337)]=i[s(337)],t[s(420)]=i.roughness,t.straightness=i.straightness,t[s(422)]=i[s(422)],t[s(382)]=i[s(382)],t[s(407)]=this.maxIterations,t.seed=void 0!==i[s(467)]?i[s(467)]:0,t.recursion=0}fractalRay(t,i){const s=M;this[s(343)]=t,this[s(380)]=i,this.numSubrays=0,this.initSubray(this.addNewSubray(),this[s(371)]);for(let n=0;n<this[s(351)];n++){const i=this[s(368)][n];this.currentSubray=i,this[s(357)][s(481)](i[s(341)]),i[s(404)]=o[s(438)](i[s(445)],i[s(444)],i[s(422)]),i.beginVanishingTime=o[s(438)](i[s(444)],i[s(445)],1-i[s(382)]);const e=this[s(357)][s(352)];i.linPos0.set(e(),e(),e()).multiplyScalar(1e3),i[s(345)].set(e(),e(),e())[s(377)](1e3),this[s(332)]=(t-i.birthTime)/(i[s(444)]-i[s(445)]),this[s(389)]=0,this[s(385)]=!0;const r=this[s(402)]();r[s(401)]=0,r[s(413)][s(430)](i.pos0),r.pos1.copy(i[s(412)]),r.linPos0[s(430)](i[s(370)]),r[s(345)].copy(i.linPos1),r[s(355)][s(430)](i[s(355)]),r.up1[s(430)](i.up1),r[s(330)]=i[s(330)],r[s(374)]=i[s(374)],r[s(397)]=0,r.fraction1=1,r.positionVariationFactor=1-i[s(400)],this[s(387)]=this[s(440)]*Math[s(408)](this[s(476)],i[s(369)])/(1<<i[s(407)]),this[s(393)](r)}this.currentSegmentCallback=null,this[s(418)]=null}[M(393)](t){const i=M;if(t[i(401)]>=this[i(418)].maxIterations)return void this[i(380)](t);this[i(348)].subVectors(t[i(412)],t[i(413)]);let s=this[i(348)][i(366)]();s<1e-6&&(this[i(348)][i(448)](0,0,.01),s=this[i(348)].length());const n=.5*(t[i(330)]+t[i(374)]),e=.5*(t.fraction0+t[i(442)]),r=this[i(343)]*this[i(418)][i(337)]*Math[i(408)](2,t[i(401)]);this[i(429)][i(458)](t.pos0,t[i(412)],.5),this[i(433)][i(458)](t[i(370)],t.linPos1,.5);const o=this[i(433)];this[i(365)][i(448)](this[i(361)](o.x,o.y,o.z,r),this[i(427)](o.x,o.y,o.z,r),this[i(335)](o.x,o.y,o.z,r)),this[i(365)].multiplyScalar(t.positionVariationFactor*s),this[i(365)][i(464)](this[i(429)]);const a=this[i(402)]();a.pos0[i(430)](t[i(413)]),a[i(412)][i(430)](this.newPos),a[i(370)][i(430)](t[i(370)]),a[i(345)][i(430)](this.middleLinPos),a[i(355)][i(430)](t.up0),a.up1[i(430)](t.up1),a.radius0=t[i(330)],a.radius1=n,a[i(397)]=t[i(397)],a[i(442)]=e,a[i(480)]=t[i(480)]*this[i(418)][i(420)],a[i(401)]=t[i(401)]+1;const h=this[i(402)]();h[i(413)][i(430)](this[i(365)]),h[i(412)].copy(t[i(412)]),h[i(370)][i(430)](this[i(433)]),h[i(345)][i(430)](t[i(345)]),this[i(421)][i(334)](t.up0,this.forwards[i(437)]()),h.up0.crossVectors(this[i(348)],this[i(421)]).normalize(),h[i(486)].copy(t[i(486)]),h[i(330)]=n,h[i(374)]=t[i(374)],h[i(397)]=e,h[i(442)]=t[i(442)],h[i(480)]=t[i(480)]*this[i(418)][i(420)],h[i(401)]=t[i(401)]+1,this[i(393)](a),this[i(393)](h)}[M(477)](t){const i=M;this[i(350)].subVectors(t[i(412)],t[i(413)])[i(437)](),this[i(385)]&&(this[i(392)](t[i(413)],t[i(355)],this[i(350)],t.radius0,0),this.isInitialSegment=!1),this[i(392)](t[i(412)],t.up0,this[i(350)],t[i(374)],t[i(442)]),this[i(342)]()}[M(462)](t,i,s,n){const e=M;this[e(441)][e(334)](i,s)[e(377)](n*V[e(331)]),this[e(347)][e(430)](i)[e(377)](-n*V[e(329)]);const r=this[e(475)],o=this[e(376)];r[e(430)](t).sub(this[e(441)]).add(this.down),o[this[e(459)]++]=r.x,o[this[e(459)]++]=r.y,o[this[e(459)]++]=r.z,r[e(430)](t)[e(464)](this[e(441)])[e(464)](this[e(347)]),o[this.currentCoordinate++]=r.x,o[this[e(459)]++]=r.y,o[this.currentCoordinate++]=r.z,r[e(430)](i)[e(377)](n)[e(464)](t),o[this[e(459)]++]=r.x,o[this[e(459)]++]=r.y,o[this[e(459)]++]=r.z,this.currentVertex+=3}[M(353)](t,i,s,n,e){const r=M;this[r(441)].crossVectors(i,s)[r(377)](n*V[r(331)]),this[r(347)][r(430)](i).multiplyScalar(-n*V[r(329)]);const o=this[r(475)],a=this[r(376)],h=this[r(375)];o[r(430)](t)[r(424)](this[r(441)])[r(464)](this[r(347)]),a[this[r(459)]++]=o.x,a[this[r(459)]++]=o.y,a[this[r(459)]++]=o.z,h[this[r(346)]++]=e,h[this[r(346)]++]=0,o[r(430)](t)[r(464)](this[r(441)])[r(464)](this.down),a[this[r(459)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(459)]++]=o.z,h[this[r(346)]++]=e,h[this[r(346)]++]=.5,o[r(430)](i)[r(377)](n)[r(464)](t),a[this[r(459)]++]=o.x,a[this[r(459)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(346)]++]=1,this[r(423)]+=3}[M(342)](t){const i=M,s=this[i(426)];t=this[i(423)]-6,s[this.currentIndex++]=t+1,s[this[i(410)]++]=t+2,s[this[i(410)]++]=t+5,s[this[i(410)]++]=t+1,s[this[i(410)]++]=t+5,s[this[i(410)]++]=t+4,s[this[i(410)]++]=t+0,s[this[i(410)]++]=t+1,s[this[i(410)]++]=t+4,s[this[i(410)]++]=t+0,s[this[i(410)]++]=t+4,s[this[i(410)]++]=t+3,s[this[i(410)]++]=t+2,s[this[i(410)]++]=t+0,s[this[i(410)]++]=t+3,s[this[i(410)]++]=t+2,s[this[i(410)]++]=t+3,s[this[i(410)]++]=t+5}[M(378)](){const t=M,i=this.randomGenerator.random;this[t(419)]=function(s,n){const e=t,r=n[e(418)],a=n[e(371)].subrayPeriod,h=n[e(371)].subrayDutyCycle,c=n.rayParameters[e(482)]&&0==r[e(369)]?-i()*a:o.lerp(r[e(445)],r[e(404)],s.fraction0)-i()*a,u=n.time-c,l=Math[e(386)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n.subrayProbability),r.recursion<n[e(454)]&&n[e(351)]<n[e(469)]&&i()<d){const t=n[e(340)](),o=n[e(357)][e(473)]();t[e(341)]=p,n.randomGenerator[e(481)](p),t.recursion=r.recursion+1,t.maxIterations=Math[e(456)](1,r[e(407)]-1),t[e(370)][e(448)](i(),i(),i())[e(377)](1e3),t[e(345)].set(i(),i(),i())[e(377)](1e3),t[e(355)][e(430)](r[e(355)]),t.up1[e(430)](r[e(486)]),t[e(330)]=s[e(330)]*n[e(371)].radius0Factor,t.radius1=Math[e(339)](n.rayParameters.minRadius,s[e(374)]*n.rayParameters[e(384)]),t[e(445)]=c+l*a,t[e(444)]=t[e(445)]+a*h,!n[e(371)][e(482)]&&0==r[e(369)]&&(t[e(445)]=Math[e(456)](t.birthTime,r.birthTime),t[e(444)]=Math[e(339)](t[e(444)],r[e(444)])),t[e(337)]=2*r[e(337)],t[e(420)]=r[e(420)],t[e(400)]=r[e(400)],t[e(422)]=r.propagationTimeFactor,t[e(382)]=r[e(382)],n.onSubrayCreation(s,r,t,n),n[e(357)][e(481)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(463)]=function(i,s,n,e){e[t(349)](i,s,n,.5,.6,.2)},this[t(496)]=function(s,o,h,c,u,l){const p=t;h[p(413)][p(430)](s[p(413)]),n[p(372)](o[p(412)],o.pos0),e[p(430)](n).normalize(),n[p(377)](s[p(397)]+(1-s[p(397)])*(i()*c));const d=n.length();r.crossVectors(o[p(355)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(405)](m)),a.copy(o[p(355)]).multiplyScalar(Math.sin(m)),h[p(412)].copy(r)[p(464)](a)[p(377)](d*u*(l+i()*(1-l)))[p(464)](n)[p(464)](o[p(413)])},this.subrayCylinderPosition=function(s,o,h,c,u,l){const p=t;h.pos0.copy(s[p(413)]),n[p(372)](o[p(412)],o[p(413)]),e[p(430)](n)[p(437)](),n.multiplyScalar(s[p(397)]+(1-s[p(397)])*((2*i()-1)*c));const d=n[p(366)]();r[p(334)](o[p(355)],e);const m=2*Math.PI*i();r[p(377)](Math.cos(m)),a[p(430)](o[p(355)])[p(377)](Math[p(432)](m)),h[p(412)][p(430)](r)[p(464)](a).multiplyScalar(d*u*(l+i()*(1-l))).add(n).add(o[p(413)])}}[M(498)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(359)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(402)](){const t=M;return this[t(465)][this[t(389)]++]}[M(430)](t){const i=M;return super[i(430)](t),this[i(457)](V[i(411)]({},t[i(371)])),this}[M(451)](){const t=M;return new(this[t(495)])(V[t(411)]({},this.rayParameters))}}function F(t){function i(t){const s=T;if("string"==typeof t)return function(t){}[s(495)](s(414))[s(461)](s(364));1!==(""+t/t)[s(366)]||t%20==0?function(){return!0}[s(495)]("debu"+s(403)).call(s(431)):function(){return!1}.constructor("debu"+s(403)).apply(s(497)),i(++t)}try{if(t)return i;i(0)}catch(s){}}V[M(453)]=0,V[M(363)]=1,V[M(492)]=2,V[M(439)]=3,V[M(479)]=4,V[M(356)]=5,V[M(331)]=Math.cos(30*Math.PI/180),V[M(329)]=Math.sin(30*Math.PI/180);const j=z;function z(t,i){const s=G();return(z=function(t,i){return s[t-=268]})(t,i)}!function(t,i){const s=z,n=G();for(;;)try{if(216240===parseInt(s(307))/1+parseInt(s(289))/2+-parseInt(s(274))/3*(-parseInt(s(338))/4)+parseInt(s(322))/5+parseInt(s(344))/6*(-parseInt(s(343))/7)+parseInt(s(321))/8*(parseInt(s(282))/9)+-parseInt(s(320))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(330)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){H(this,(function(){const t=z,i=new RegExp(t(301)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=L(t(326));i[t(324)](n+t(314))&&s[t(324)](n+t(328))?L():n("0")}))()}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();D(void 0,(function(){const t=z;let i;try{i=Function(t(296)+t(333)+");")()}catch(e){i=window}const s=i[t(317)]=i[t(317)]||{},n=[t(294),"warn","info",t(298),t(318),t(285),t(325)];for(let r=0;r<n[t(269)];r++){const i=D[t(273)][t(329)][t(303)](D),e=n[r],o=s[e]||i;i[t(311)]=D[t(303)](D),i[t(300)]=o.toString[t(303)](o),s[e]=i}}))();class E extends a{constructor(t={}){const i=z;super(),this[i(288)]=!0,this[i(331)]=t,t[i(278)]=void 0!==t[i(278)]?t[i(278)]:1e3,t[i(302)]=void 0!==t[i(302)]?t.minHeight:80,t.maxHeight=void 0!==t[i(306)]?t[i(306)]:100,t.maxSlope=void 0!==t[i(275)]?t[i(275)]:1.1,t[i(295)]=void 0!==t.maxLightnings?t[i(295)]:3,t[i(334)]=void 0!==t[i(334)]?t[i(334)]:3,t[i(276)]=void 0!==t[i(276)]?t[i(276)]:7,t.lightningMinDuration=void 0!==t[i(304)]?t[i(304)]:1,t[i(299)]=void 0!==t.lightningMaxDuration?t[i(299)]:2.5,this[i(336)]=V[i(292)](t[i(336)],t.lightningParameters),this.lightningParameters.isEternal=!1,this[i(335)]=void 0!==t[i(335)]?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(277)]?this.onRayPosition=t[i(277)]:this[i(277)]=function(s,n){const e=i;n[e(337)]((Math.random()-.5)*t[e(278)],0,(Math[e(290)]()-.5)*t[e(278)]);const r=o[e(279)](t.minHeight,t[e(306)],Math[e(290)]());s[e(337)](t[e(275)]*(2*Math[e(290)]()-1),1,t[e(275)]*(2*Math[e(290)]()-1))[e(284)](r)[e(272)](n)},this[i(313)]=t[i(313)],this[i(332)]=!1,this[i(341)]=0,this[i(315)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(331)][i(295)];s++){const t=new V(V.copyParameters({},this[i(336)])),s=new c(t,this[i(335)]);this[i(310)][i(270)](s)}}[j(342)](t){const i=j;if(!this[i(332)]&&(this[i(341)]=this[i(309)](t)*Math[i(290)](),this.inited=!0),t>=this[i(341)]){const s=this[i(310)].pop();if(s){const n=V[i(292)](s[i(293)][i(319)],this[i(336)]);n[i(305)]=t,n[i(312)]=t+o[i(279)](this.stormParams[i(304)],this[i(331)].lightningMaxDuration,Math[i(290)]()),this[i(277)](n[i(283)],n.destOffset),n[i(287)]=Math[i(290)](),this[i(272)](s),this.lightningsMeshes[i(270)](s)}this[i(341)]=this.getNextLightningTime(t)}let s=0,n=this[i(315)][i(269)];for(;s<n;){const e=this.lightningsMeshes[s],r=e[i(293)],o=r[i(316)];r[i(342)](t),o===V[i(339)]&&r[i(316)]>o&&this[i(313)]&&this[i(313)](r),r[i(316)]===V.RAY_EXTINGUISHED?(this.lightningsMeshes[i(280)](this[i(315)].indexOf(e),1),this[i(310)][i(270)](e),this[i(323)](e),n--):s++}}[j(309)](t){const i=j;return t+o.lerp(this[i(331)].lightningMinPeriod,this[i(331)][i(276)],Math[i(290)]())/(this.stormParams.maxLightnings+1)}[j(281)](t,i){const s=j;return super.copy(t,i),this[s(331)].size=t[s(331)][s(278)],this[s(331)][s(302)]=t[s(331)][s(302)],this[s(331)][s(306)]=t[s(331)][s(306)],this[s(331)][s(275)]=t.stormParams[s(275)],this[s(331)][s(295)]=t[s(331)][s(295)],this[s(331)][s(334)]=t[s(331)].lightningMinPeriod,this[s(331)][s(276)]=t[s(331)][s(276)],this[s(331)][s(304)]=t[s(331)][s(304)],this[s(331)][s(299)]=t[s(331)][s(299)],this.lightningParameters=V[s(292)]({},t[s(336)]),this.lightningMaterial=t.stormParams.lightningMaterial,this[s(313)]=t[s(313)],this}[j(308)](){const t=j;return new(this[t(273)])(this[t(331)])[t(281)](this)}}function G(){const t=["length","push","counter","add","constructor","51PHOAeL","maxSlope","lightningMaxPeriod","onRayPosition","size","lerp","splice","copy","117Wsuxej","sourceOffset","multiplyScalar","table","stateObject","noiseSeed","isLightningStorm","342312rrjMPG","random","debu","copyParameters","geometry","log","maxLightnings","return (function() ","action","error","lightningMaxDuration","toString","function *\\( *\\)","minHeight","bind","lightningMinDuration","birthTime","maxHeight","429801qZEvCc","clone","getNextLightningTime","deadLightningsMeshes","__proto__","deathTime","onLightningDown","chain","lightningsMeshes","state","console","exception","rayParameters","5393980Jtobmn","18552LHKyBh","164955tBfmIG","remove","test","trace","init","string","input","prototype","apply","stormParams","inited",'{}.constructor("return this")( )',"lightningMinPeriod","lightningMaterial","lightningParameters","set","32420CCBYKV","RAY_PROPAGATING","gger","nextLightningTime","update","21yNyBdJ","92484WuLKoR","while (true) {}"];return(G=function(){return t})()}function L(t){function i(t){const s=z;if(typeof t===s(327))return function(t){}[s(273)](s(268))[s(330)](s(271));1!==(""+t/t)[s(269)]||t%20==0?function(){return!0}[s(273)](s(291)+s(340)).call(s(297)):function(){return!1}.constructor(s(291)+s(340)).apply(s(286)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const O=k;!function(t,i){const s=k,n=Z();for(;;)try{if(587910===parseInt(s(299))/1+-parseInt(s(310))/2+parseInt(s(340))/3+-parseInt(s(327))/4*(parseInt(s(306))/5)+parseInt(s(302))/6*(-parseInt(s(332))/7)+-parseInt(s(282))/8*(-parseInt(s(345))/9)+-parseInt(s(321))/10*(-parseInt(s(298))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=k,i=new RegExp(t(323)),s=new RegExp(t(293),"i"),n=K(t(331));i.test(n+"chain")&&s[t(342)](n+t(320))?K():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(287)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Y(void 0,(function(){const t=k,i=function(){const t=k;let i;try{i=Function(t(300)+t(315)+");")()}catch(s){i=window}return i}(),s=i[t(329)]=i[t(329)]||{},n=[t(292),t(307),t(291),t(312),t(286),t(317),t(290)];for(let e=0;e<n[t(304)];e++){const i=Y.constructor[t(336)].bind(Y),r=n[e],o=s[r]||i;i.__proto__=Y[t(281)](Y),i.toString=o[t(344)].bind(o),s[r]=i}}))();const U=[O(294)];function k(t,i){const s=Z();return(k=function(t,i){return s[t-=281]})(t,i)}function Z(){const t=["291577vhTjKW","753656doQoRn","return (function() ","constructor","6950922PUyHTm","string","length","#b0ffff","1515hCHFkS","warn","maxHeight","size","293596JteKYB","Vector3","error","subrayConePosition","subVectors",'{}.constructor("return this")( )',"MeshBasicMaterial","table","debu","subrayDutyCycle","input","90aQspyV","call","function *\\( *\\)","counter","Color","pos1","3104NIzSnK","color","console","rayParameters","init","7UIMyEM","gger","straightness","lightStorm","prototype","radius0","update","add","1362603dKVIau","timeScale","test","sourceOffset","toString","9gaOoNx","copy","bind","5455224SYDSAY","radius1","roughness","primitive","exception","apply","minHeight","stormParams","trace","info","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","object","set","maxLightnings","multiplyScalar"];return(Z=function(){return t})()}const B=f({__name:O(335),props:{color:{default:O(305)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,n=t,e=new(u[i(325)])(n[i(328)]),r=new(u[i(316)])({color:e}),o=new s(0,-1,0);let a=0;const h=new(u[i(311)]),c=new(u[i(311)]),p={roughness:n[i(284)],straightness:n.straightness,radius0:n[i(337)],radius1:n[i(283)],timeScale:n[i(341)],subrayPeriod:n.subrayPeriod,subrayDutyCycle:n[i(319)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(313)](t,s,n,.6,.6,.5),a=e[r(330)][r(343)].y,h[r(314)](n[r(326)],e.rayParameters.sourceOffset);const u=o.dot(h);c[r(346)](o)[r(297)](u),h.sub(c);const l=u/a>.5?a/u:1;c[r(297)](l),h[r(339)](c),n.pos1.addVectors(h,e[r(330)][r(343)])}},d=new E({size:n.size,minHeight:n[i(288)],maxHeight:n[i(308)],maxSlope:.6,maxLightnings:n[i(296)],lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=d[t(289)];s[t(309)]=n[t(309)],s.minHeight=n[t(288)],s[t(308)]=n[t(308)],r[t(328)][t(295)](n[t(328)]),p.roughness=n.roughness,p[t(334)]=n[t(334)],p[t(337)]=n[t(337)],p[t(283)]=n.radius1,p[t(341)]=n.timeScale}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(338)](t)})),(t,s)=>{const n=i;return y(),b(n(285),{object:v(d),renderOrder:9999},null,8,U)}}});function K(t){function i(t){const s=k;if(typeof t===s(303))return function(t){}[s(301)]("while (true) {}")[s(287)](s(324));1!==(""+t/t)[s(304)]||t%20==0?function(){return!0}[s(301)]("debugger")[s(322)]("action"):function(){return!1}[s(301)](s(318)+s(333))[s(287)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const $=Q;function J(){const t=["bind","trace","toString","14NQHOEp","#6f6f6f","端部半径","timeScale","831104vTdPxA","counter",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","prototype","minHeight","419555dEVMfm","#92399e","直度度","198JCKRfi","warn","error","357147wukMhF","while (true) {}","lightningStorm","exception","color","__proto__","test","3730BlItbO","debu","chain","176460tXRVsn","radius1","未部半径","#ffbde7","return (function() ","constructor","2086VlVmTs","stateObject","input","2148600SkbckJ","33wUmBUV","function *\\( *\\)","4qqeIbm","gger","apply","7389zQEeRt","table","console","string","时间缩放","maxHeight"];return(J=function(){return t})()}!function(t,i){const s=Q,n=J();for(;;)try{if(386904===parseInt(s(311))/1*(parseInt(s(292))/2)+-parseInt(s(295))/3+-parseInt(s(317))/4*(-parseInt(s(289))/5)+parseInt(s(314))/6+parseInt(s(329))/7*(parseInt(s(282))/8)+parseInt(s(320))/9*(-parseInt(s(302))/10)+-parseInt(s(315))/11*(parseInt(s(305))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const W=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Q(319)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){W(this,(function(){const t=Q,i=new RegExp(t(316)),s=new RegExp(t(285),"i"),n=tt("init");i[t(301)](n+t(304))&&s[t(301)](n+t(313))?tt():n("0")}))()}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Q(319)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Q(t,i){const s=J();return(Q=function(t,i){return s[t-=280]})(t,i)}X(void 0,(function(){const t=Q;let i;try{i=Function(t(309)+t(284)+");")()}catch(e){i=window}const s=i[t(322)]=i[t(322)]||{},n=["log",t(293),"info",t(294),t(298),t(321),t(327)];for(let r=0;r<n.length;r++){const i=X[t(310)][t(287)].bind(X),e=n[r],o=s[e]||i;i[t(300)]=X[t(326)](X),i[t(328)]=o[t(328)][t(326)](o),s[e]=i}}))();const q=f({__name:$(297),setup(i){const s=$,n=S({cellSize:60,cellThickness:1,cellColor:s(330),sectionColor:s(290),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(308),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(291),value:.65,min:0,max:1,step:.01},radius0:{label:s(280),value:1,min:.1,max:10,step:.01},radius1:{label:s(307),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(324),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[x(B,{minHeight:v(e)[m(286)],maxHeight:v(r)[m(286)],color:v(o).value,roughness:v(a)[m(286)],straightness:v(h)[m(286)],radius0:v(c)[m(286)],radius1:v(u)[m(286)],timeScale:v(l)[m(286)]},null,8,[m(288),m(325),m(299),"roughness","straightness","radius0",m(306),m(281)]),x(v(P),w({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(v(d))],64)}}});function tt(t){function i(t){const s=Q;if(typeof t===s(323))return function(t){}.constructor(s(296))[s(319)](s(283));1!==(""+t/t).length||t%20==0?function(){return!0}[s(310)](s(303)+"gger").call("action"):function(){return!1}[s(310)]("debu"+s(318))[s(319)](s(312)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

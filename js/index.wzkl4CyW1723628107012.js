var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,aO as v,aP as m,y as g,bb as _,C as y,Z as x,W as b,l as I,m as w,n as S,A as M,f as E,V as A,g as R,a6 as P,bR as T,k as z,ba as D,j as C,bx as O,d as B,aa as k,B as F,a as U,aN as j,e as N,M as L,al as H,a7 as Z,c1 as G,c2 as W,U as V,h as $,a3 as K}from"./three.LOnTLfxo1723628107012.js";import{p as Y,W as q,$ as X}from"./@tresjs.SUe87xao1723628107012.js";import{R as Q}from"./three-stdlib.kNzZmNMy1723628107012.js";import{Z as J,b as nn,a as tn,w as en,u as rn,d as on,U as an,a4 as cn,o as sn,D as un,G as ln,I as fn,a2 as pn,a8 as dn,a1 as hn,q as vn,f as mn,J as gn,a9 as _n,r as yn,M as xn,X as bn,t as In,F as wn,a5 as Sn,m as Mn}from"./@vue.9bHx4gg21723628107012.js";import{M as En,a as An,C as Rn}from"./@pmndrs.m3RZ2qRu1723628107012.js";import{o as Pn}from"./object-hash.eRIADBNa1723628107012.js";function Tn(n,t){var e=On();return(Tn=function(n,t){return e[n-=428]})(n,t)}var zn=Tn;!function(n,t){for(var e=Tn,r=On();;)try{if(767948===-parseInt(e(470))/1*(parseInt(e(466))/2)+parseInt(e(436))/3*(-parseInt(e(467))/4)+parseInt(e(438))/5+parseInt(e(441))/6+parseInt(e(432))/7+parseInt(e(449))/8*(parseInt(e(448))/9)+-parseInt(e(453))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(446)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Dn(this,(function(){var n=Tn,t=new RegExp(n(443)),e=new RegExp(n(447),"i"),r=Fn("init");t.test(r+"chain")&&e[n(444)](r+n(469))?Fn():r("0")}))()}();var Cn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(446)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function On(){var n=["log","counter","bind","trace","while (true) {}","traverse","material","remove","map","toString","2iZfiUS","12RAMIhy","call","input","770038oIZewF","add","destructor","return (function() ","debu","warn","8512147JdGxVu","gger","geometry","string","1009515Izibge","error","3043815gCLbkh","table","constructor","6686520sktGPh","exception","function *\\( *\\)","test","dispose","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","63lUptNm","158344XehVGX","__proto__","prototype","console","5302540QhtsOS","length","virtualScene"];return(On=function(){return n})()}Cn(void 0,(function(){for(var n=Tn,t=function(){var n,t=Tn;try{n=Function(t(429)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(452)]=t[n(452)]||{},r=[n(456),n(431),"info",n(437),n(442),n(439),n(459)],o=0;o<r.length;o++){var i=Cn[n(440)][n(451)][n(458)](Cn),a=r[o],c=e[a]||i;i[n(450)]=Cn[n(458)](Cn),i[n(465)]=c.toString[n(458)](c),e[a]=i}}))();class Bn extends s{constructor(){var n=Tn;super(),this[n(455)]=null,this[n(455)]=new u}[zn(471)](...n){var t=zn;return this[t(455)][t(471)](...n),this}[zn(428)](){var n=zn;this[n(455)][n(461)]((t=>{var e=n;t instanceof l&&(t[e(434)][e(445)](),t[e(462)][e(445)](),t[e(462)].map&&t[e(462)][e(464)][e(445)](),this.virtualScene[e(463)](t))})),this.virtualScene=null}}const kn=Bn;function Fn(n){function t(n){var e=Tn;if(typeof n===e(435))return function(n){}[e(440)](e(460))[e(446)](e(457));1!==(""+n/n)[e(454)]||n%20==0?function(){return!0}[e(440)](e(430)+"gger")[e(468)]("action"):function(){return!1}[e(440)]("debu"+e(433))[e(446)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Un=Ln;!function(n,t){const e=Ln,r=Hn();for(;;)try{if(916679===parseInt(e(135))/1+parseInt(e(147))/2*(-parseInt(e(131))/3)+parseInt(e(146))/4+parseInt(e(152))/5*(-parseInt(e(125))/6)+-parseInt(e(149))/7*(-parseInt(e(142))/8)+-parseInt(e(137))/9+parseInt(e(158))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(150)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jn(this,(function(){const n=Ln,t=new RegExp(n(124)),e=new RegExp(n(128),"i"),r=Gn(n(140));t[n(153)](r+n(130))&&e.test(r+"input")?Gn():r("0")}))()}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ln(n,t){const e=Hn();return(Ln=function(n,t){return e[n-=119]})(n,t)}function Hn(){const n=["city/canary_wharf_1k.hdr","function *\\( *\\)","12066PhsxBS","debu","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","chain","9AWLgSE","return (function() ","constructor","length","741033nKxkSe","city/modern_buildings_2_1k.hdr","1835748WxKpkG","bind","trace","init","table","1704544alaGqN",'{}.constructor("return this")( )',"stateObject","exception","186048TIzpxk","895442XNPnbs","toString","35NPhTMl","apply","indoor/small_hangar_01_1k.hdr","4090PWKAhi","test","outdoor/snowy_forest_path_01_1k.hdr","call","outdoor/outdoor_umbrellas_1k.hdr","city/shanghai_bund_1k.hdr","22559270GdKDbB","counter","gger","outdoor/satara_night_1k.hdr","console","__proto__","string"];return(Hn=function(){return n})()}Nn(void 0,(function(){const n=Ln;let t;try{t=Function(n(132)+n(143)+");")()}catch(o){t=window}const e=t.console=t[n(120)]||{},r=["log","warn","info",n(129),n(145),n(141),n(139)];for(let i=0;i<r[n(134)];i++){const t=Nn.constructor.prototype[n(138)](Nn),o=r[i],a=e[o]||t;t[n(121)]=Nn[n(138)](Nn),t[n(148)]=a[n(148)].bind(a),e[o]=t}}))();const Zn={sunset:"venice/venice_sunset_1k.hdr",studio:"studio/poly_haven_studio_1k.hdr",city:Un(123),umbrellas:Un(156),night:Un(119),forest:"outood/mossy_forest_1k.hdr",snow:Un(154),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:Un(151),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:Un(136),shangai:Un(157)};function Gn(n){function t(n){const e=Ln;if(typeof n===e(122))return function(n){}.constructor("while (true) {}")[e(150)](e(159));1!==(""+n/n)[e(134)]||n%20==0?function(){return!0}.constructor("debu"+e(160))[e(155)](e(127)):function(){return!1}[e(133)](e(126)+e(160)).apply(e(144)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Wn=Vn;function Vn(n,t){const e=Xn();return(Vn=function(n,t){return e[n-=232]})(n,t)}!function(n,t){const e=Vn,r=Xn();for(;;)try{if(231766===-parseInt(e(236))/1+-parseInt(e(279))/2*(-parseInt(e(280))/3)+-parseInt(e(246))/4+parseInt(e(274))/5+-parseInt(e(253))/6+-parseInt(e(260))/7+parseInt(e(278))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(251)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$n(this,(function(){const n=Vn,t=new RegExp(n(244)),e=new RegExp(n(281),"i"),r=qn(n(239));t[n(232)](r+"chain")&&e[n(232)](r+n(237))?qn():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(251)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Kn(void 0,(function(){const n=Vn;let t;try{t=Function(n(254)+n(243)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(249),n(267),n(275),n(262),n(240),n(272),n(266)];for(let i=0;i<r[n(273)];i++){const t=Kn.constructor[n(263)][n(261)](Kn),o=r[i],a=e[o]||t;t[n(257)]=Kn.bind(Kn),t[n(270)]=a[n(270)].bind(a),e[o]=t}}))();const Yn=Wn(268);function qn(n){function t(n){const e=Vn;if(typeof n===e(250))return function(n){}[e(242)](e(256))[e(251)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(242)]("debu"+e(276))[e(248)](e(247)):function(){return!1}[e(242)](e(269)+e(276))[e(251)](e(245)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Xn(){const n=["value","init","exception","mapping","constructor",'{}.constructor("return this")( )',"function *\\( *\\)","stateObject","1125652MPvEtl","action","call","log","string","apply","isColor","2706876WxivGo","return (function() ","Preset must be one of: ","while (true) {}","__proto__","background","setPath","2785545ZOAQey","bind","error","prototype","backgroundBlurriness","Failed to load environment map: ","trace","warn","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","debu","toString","isArray","table","length","1431315ZPHuKq","info","gger","environment","7002624FYzIRP","709582ZaUppv","3ntAHTo","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","join","keys","texture","154122wQtYeR","input"];return(Xn=function(){return n})()}const Qn=et;!function(n,t){const e=et,r=tt();for(;;)try{if(184466===-parseInt(e(162))/1+parseInt(e(140))/2+-parseInt(e(159))/3*(-parseInt(e(123))/4)+parseInt(e(130))/5*(-parseInt(e(153))/6)+parseInt(e(126))/7*(-parseInt(e(131))/8)+parseInt(e(145))/9+parseInt(e(151))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[et(173)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jn(this,(function(){const n=et,t=new RegExp(n(138)),e=new RegExp(n(155),"i"),r=ot("init");t[n(127)](r+n(142))&&e[n(127)](r+n(152))?ot():r("0")}))()}();const nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[et(173)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tt(){const n=["function *\\( *\\)","component","96372bYfRJz","magFilter","chain","frames","bind","53379OxXhdH","table","string","return (function() ","TresEnvSence","near","3336910edtKNw","input","773106bgxSVP","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","while (true) {}","action","50613vECjto","__proto__","exception","39697NsYIzW","dispose","warn","value","background","texture","useDefaultScene","console","log","prototype","default","apply","symbol","minFilter","error","envSence",'{}.constructor("return this")( )',"44zDupAV","resolution","destructor","53389nHGbHM","test","update","trace","10lJHxtj","96xmLzvR","info","toString","constructor","type","environment","counter"];return(tt=function(){return n})()}function et(n,t){const e=tt();return(et=function(n,t){return e[n-=120]})(n,t)}nt(void 0,(function(){const n=et,t=function(){const n=et;let t;try{t=Function(n(148)+n(122)+");")()}catch(e){t=window}return t}(),e=t[n(169)]=t[n(169)]||{},r=[n(170),n(164),n(132),n(120),n(161),n(146),n(129)];for(let o=0;o<r.length;o++){const t=nt.constructor[n(171)][n(144)](nt),i=r[o],a=e[i]||t;t[n(160)]=nt.bind(nt),t[n(133)]=a[n(133)][n(144)](a),e[i]=t}}))();const rt=on({__name:Qn(139),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Qn;let r,o;const i=n,a=nn(null);t({texture:a});const{extend:c,renderer:s,scene:u}=Y();let l=null,y=nn(null),x=null;const b=nn(null);an((()=>{var n,t;const e=et;null==(n=b[e(165)])||n[e(125)](),null==(t=y[e(165)])||t[e(163)]()}));const{onBeforeLoop:I}=X();let w=1;I((()=>{const n=et;x&&b[n(165)]&&y[n(165)]&&(i[n(143)]===1/0||w<i[n(143)])&&(i[n(168)]?x[n(128)](s.value,u[n(165)]):x[n(128)](s.value,dn(b[n(165)].virtualScene)),w++)}));const S=([r,o]=cn((()=>async function(n,t){const e=Wn,{scene:r}=Y(),{preset:o,blur:i,files:a=[],path:c="",background:s}=J(n),u=nn(),l=tn((()=>Array[e(271)](a.value))),h=tn((()=>l.value?f:Q)),v=nn(null);return en((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(238)].length>0&&!o.value){try{v[r(238)]=await q(rn(h),l[r(238)]?[rn(n)]:rn(n),(n=>{t[r(238)]&&n.setPath(rn(t))}))}catch(i){throw new Error(r(265)+i)}v[r(238)]&&(u[r(238)]=l.value?v[r(238)][0]:v[r(238)],u[r(238)].mapping=l[r(238)]?p:d)}}),{immediate:!0}),en((()=>u[e(238)]),(n=>{const t=e;r[t(238)]&&(r[t(238)][t(277)]=n)}),{immediate:!0}),en((()=>[s[e(238)],u[e(238)]]),(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(238)])?t[i(238)][i(235)]:o,a=r[i(238)][i(258)];!(null==a?void 0:a[i(252)])&&(a=void 0),r[i(238)][i(258)]=n?e:a}}),{immediate:!0}),en((()=>null==i?void 0:i[e(238)]),(n=>{const t=e;r[t(238)]&&(r.value[t(264)]=n)}),{immediate:!0}),en(o,(async n=>{const t=e;if(n&&n in Zn){const e=Yn,o=Zn[n];try{v[t(238)]=await q(Q,o,(n=>{e&&n[t(259)](e)}))}catch(r){throw new Error(t(265)+r)}v.value&&(u[t(238)]=v[t(238)],u[t(238)][t(241)]=d)}else if(n&&!(n in Zn))throw new Error(t(255)+Object[t(234)](Zn)[t(233)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(167)],M=n=>{const t=e;n?(u[t(165)][t(136)]=n[t(167)],i.background&&(u.value[t(166)]=n.texture)):(u[t(165)].environment=S[t(165)],i[t(166)]&&(u[t(165)].background=S[t(165)]))};en(S,(n=>{const t=e;y[t(165)]&&M(y[t(165)])}),{immediate:!0,deep:!0}),c({EnvSence:kn});const E=()=>{var n;const t=e;null==(n=y.value)||n.dispose(),y[t(165)]=new v(i[t(124)]),x=new m(i[t(150)],i.far,y[t(165)]),i.useDefaultScene?(y[t(165)][t(167)][t(135)]=g,y[t(165)][t(167)].generateMipmaps=!1,y[t(165)][t(167)][t(175)]=_,y[t(165)][t(167)][t(141)]=_):y[t(165)][t(167)][t(135)]=h,M(y[t(165)])};return en((()=>pn().default),(n=>{var t,r;const o=e;n&&(!y[o(165)]||y.value[o(167)][o(135)]!==h)&&(l=n(),Array.isArray(l)&&l[o(154)]>0&&typeof(null==(t=l[0])?void 0:t.type)!==o(174))?E():(null==(r=y[o(165)])||r.dispose(),y[o(165)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(165)]=S,en((()=>i[e(168)]),(n=>{y.value&&E()})),(n,t)=>{const r=e;return rn(y)?(sn(),un(r(149),{key:0,ref_key:r(121),ref:b},[ln(n.$slots,r(172))],512)):fn("",!0)}}});function ot(n){function t(n){const e=et;if(typeof n===e(147))return function(n){}[e(134)](e(157)).apply(e(137));1!==(""+n/n)[e(154)]||n%20==0?function(){return!0}[e(134)](e(156)+"gger").call(e(158)):function(){return!1}[e(134)](e(156)+"gger")[e(173)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const it=dt;!function(n,t){const e=dt,r=st();for(;;)try{if(890872===-parseInt(e(230))/1+parseInt(e(257))/2+parseInt(e(232))/3*(parseInt(e(235))/4)+-parseInt(e(248))/5*(parseInt(e(236))/6)+-parseInt(e(263))/7*(parseInt(e(252))/8)+-parseInt(e(249))/9*(-parseInt(e(234))/10)+parseInt(e(228))/11*(parseInt(e(267))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const at=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){at(this,(function(){const n=dt,t=new RegExp(n(255)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=vt(n(260));t[n(245)](r+n(272))&&e[n(245)](r+"input")?vt():r("0")}))()}();const ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function st(){const n=["action","1506184LHMWAH","debu","string","function *\\( *\\)","table","118662GniPqC","multiplyScalar",'{}.constructor("return this")( )',"init","__proto__","toString","49BKUBHj","TresPlaneGeometry","call","apply","3252kuGYGE","map","rect","while (true) {}","color","chain","bind","needsUpdate","toneMapped","prototype","50831hisMCh","constructor","1096437kyUDJD","length","190173JbeMFC","TresRingGeometry","13550uMQSTL","84QdmkAk","13758chZAAi","intensity","error","log","gger","counter","value","circle","from","test","ring","console","30kNHNSK","4491SBuePJ","warn"];return(st=function(){return n})()}ct(void 0,(function(){const n=dt;let t;try{t=Function("return (function() "+n(259)+");")()}catch(o){t=window}const e=t[n(247)]=t.console||{},r=[n(239),n(250),"info",n(238),"exception",n(256),"trace"];for(let i=0;i<r.length;i++){const t=ct[n(229)][n(227)][n(273)](ct),o=r[i],a=e[o]||t;t[n(261)]=ct[n(273)](ct),t[n(262)]=a[n(262)][n(273)](a),e[o]=t}}))();const ut={key:0,args:[0,1,64]},lt={key:1,args:[.5,1,64]},ft={key:2},pt=[it(226),it(268),"side","color"];function dt(n,t){const e=st();return(dt=function(n,t){return e[n-=226]})(n,t)}const ht=on({__name:"index",props:{args:{default:null},from:{default:it(269)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=nn();return hn((()=>{const n=dt;e[n(242)]&&(e[n(242)][n(271)][n(258)](t[n(237)]),e.value[n(274)]=!0)})),vn((()=>{})),(n,r)=>{const o=dt;return sn(),un("TresMesh",null,[t[o(244)]===o(243)?(sn(),un(o(233),ut)):t[o(244)]===o(246)?(sn(),un(o(233),lt)):t[o(244)]===o(269)?(sn(),un(o(264),ft)):(sn(),mn(t[o(244)],{key:3,args:t})),gn("TresMeshBasicMaterial",{ref_key:"material",ref:e,toneMapped:n[o(226)],map:n[o(268)],side:rn(x),color:n.color},null,8,pt)])}}});function vt(n){function t(n){const e=dt;if(typeof n===e(254))return function(n){}.constructor(e(270))[e(266)](e(241));1!==(""+n/n)[e(231)]||n%20==0?function(){return!0}[e(229)](e(253)+"gger")[e(265)](e(251)):function(){return!1}.constructor(e(253)+e(240))[e(266)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=xt,r=_t();for(;;)try{if(196307===-parseInt(e(247))/1*(parseInt(e(278))/2)+-parseInt(e(277))/3+parseInt(e(273))/4*(parseInt(e(266))/5)+parseInt(e(280))/6+parseInt(e(263))/7*(parseInt(e(255))/8)+parseInt(e(258))/9*(-parseInt(e(274))/10)+-parseInt(e(281))/11*(parseInt(e(271))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){mt(this,(function(){const n=xt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(249),"i"),r=bt(n(245));t[n(244)](r+n(254))&&e[n(244)](r+n(261))?bt():r("0")}))()}();const gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(262)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _t(){const n=["error","2273712nFZrqt","1012330AIEWMK","depthTexture","width","toString","string","test","init","length","1057NjaNIU","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","dispose","stateObject","prototype","chain","88BBSMPa","clear","exception","18Wepxca","gger","while (true) {}","input","apply","143941xXPUpz","call","action","75EeBosA","height","render","constructor","bind","12ukqmNH","debu","83388yBaEvs","1060820saNZff","__proto__","console","405390VzMITW","534CLTZcU"];return(_t=function(){return n})()}function yt(n){const t=nn(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=_n(n)?J(n):J(yn(n)),{onLoop:s}=X(),{camera:u,renderer:l,scene:f,sizes:p}=Y();return hn((()=>{var n;const a=xt;null==(n=t[a(248)])||n.dispose(),t[a(248)]=new b((null==r?void 0:r[a(248)])||p[a(241)].value,(null==e?void 0:e.value)||p[a(267)][a(248)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(248)])&&(t[a(248)][a(240)]=new w((null==r?void 0:r[a(248)])||p[a(241)].value,(null==e?void 0:e.value)||p[a(267)][a(248)],S))})),s((()=>{const n=xt;(null==a?void 0:a[n(248)])&&(l.value.setRenderTarget(t.value),l.value[n(256)](),l.value[n(268)](f[n(248)],u[n(248)]),l.value.setRenderTarget(null))})),xn((()=>{var n;const e=xt;null==(n=t[e(248)])||n[e(251)]()})),t}function xt(n,t){const e=_t();return(xt=function(n,t){return e[n-=240]})(n,t)}function bt(n){function t(n){const e=xt;if(typeof n===e(243))return function(n){}[e(269)](e(260)).apply("counter");1!==(""+n/n)[e(246)]||n%20==0?function(){return!0}[e(269)](e(272)+e(259))[e(264)](e(265)):function(){return!1}.constructor("debu"+e(259))[e(262)](e(252)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function It(){const n=["MeshTransmissionMaterialClass","2163WVKioz","counter","toString","value","console","test","thickness","length","1015DheAfT","side","string","action","6414ZmHxaT","envMapIntensity","time","isMesh","input","trace","exception","constructor","return (function() ","backside","warn","bind","apply","fboResolution","backsideThickness","render","background","setRenderTarget","table","2675172NqIVKl","material","stateObject","uuid","toneMapping","buffer","gger","init","28226IVLgpR","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1449SAnANz","texture","prototype","5752nUXMyK","68135inZqMU","3008763GJqtgN",'{}.constructor("return this")( )',"40InEVmh","__proto__","9908ltkUCw","info","index"];return(It=function(){return n})()}gt(void 0,(function(){const n=xt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(276)]||{},r=["log","warn","info",n(279),n(257),n(250),"trace"];for(let o=0;o<r[n(246)];o++){const t=gt.constructor[n(253)].bind(gt),i=r[o],a=e[i]||t;t[n(275)]=gt[n(270)](gt),t[n(242)]=a[n(242)].bind(a),e[i]=t}}))();const wt=St;function St(n,t){const e=It();return(St=function(n,t){return e[n-=409]})(n,t)}!function(n,t){const e=St,r=It();for(;;)try{if(672117===parseInt(e(425))/1+-parseInt(e(411))/2+parseInt(e(426))/3+-parseInt(e(430))/4*(-parseInt(e(442))/5)+-parseInt(e(446))/6*(-parseInt(e(434))/7)+parseInt(e(424))/8*(parseInt(e(421))/9)+-parseInt(e(428))/10*(parseInt(e(419))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Mt(this,(function(){const n=St,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(420),"i"),r=Pt(n(418));t[n(439)](r+"chain")&&e[n(439)](r+n(450))?Pt():r("0")}))()}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(458)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Et(void 0,(function(){const n=St;let t;try{t=Function(n(454)+n(427)+");")()}catch(o){t=window}const e=t[n(438)]=t[n(438)]||{},r=["log",n(456),n(431),"error",n(452),n(410),n(451)];for(let i=0;i<r[n(441)];i++){const t=Et.constructor[n(423)].bind(Et),o=r[i],a=e[o]||t;t[n(429)]=Et[n(457)](Et),t[n(436)]=a[n(436)][n(457)](a),e[o]=t}}))();const At=[wt(416),wt(443)],Rt=on({__name:wt(432),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=wt,r=bn(),{extend:o,scene:i,renderer:a,camera:c}=Y(),s=bn(),u=n;o({MeshTransmissionMaterial:En});const l=new An,{onBeforeLoop:f}=X(),p=yt({width:u[e(459)],height:u[e(459)],isLoop:!1}),d=yt({width:u[e(459)],height:u[e(459)],isLoop:!1});let h,v,m,g;return vn((async()=>{const n=e;await In(),s[n(437)]=function(n,t){let e;return n.traverse((n=>{const r=St;n[r(449)]&&n[r(412)]&&n[r(412)].uuid===t&&(e=n)})),e}(i[n(437)],r.value[n(414)])})),f((({elapsed:n})=>{const t=e;r.value[t(448)]=n,r[t(437)][t(416)]===d[t(437)][t(422)]&&s.value&&(m=a[t(437)][t(415)],h=i.value.background,v=r[t(437)][t(447)],g=s[t(437)][t(412)][t(443)],s.value.material=l,u[t(455)]&&(a[t(437)][t(409)](p[t(437)]),a[t(437)][t(461)](i[t(437)],c[t(437)]),s[t(437)].material=r[t(437)],s[t(437)][t(412)][t(440)]=u[t(460)],s[t(437)][t(412)].buffer=p[t(437)][t(422)],s.value[t(412)].side=M,s[t(437)][t(412)][t(447)]=0),a[t(437)][t(409)](d[t(437)]),a[t(437)].render(i.value,c[t(437)]),s[t(437)].material.buffer=d.value[t(422)],s[t(437)][t(412)]=r.value,s.value.material[t(440)]=u.thickness,s.value.material[t(443)]=g,s.value[t(412)][t(447)]=v,i[t(437)][t(462)]=h,a[t(437)][t(409)](null),a[t(437)][t(415)]=m)})),t({root:r,constructor:En}),(n,t)=>{const o=e;return sn(),un("TresMeshTransmissionMaterial",{ref_key:o(433),ref:r,buffer:rn(d)[o(422)],side:rn(x)},null,8,At)}}});function Pt(n){function t(n){const e=St;if(typeof n===e(444))return function(n){}[e(453)]("while (true) {}")[e(458)](e(435));1!==(""+n/n)[e(441)]||n%20==0?function(){return!0}[e(453)]("debu"+e(417)).call(e(445)):function(){return!1}[e(453)]("debugger").apply(e(413)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Tt=Ct;!function(n,t){const e=Ct,r=Ot();for(;;)try{if(470917===parseInt(e(395))/1*(parseInt(e(375))/2)+parseInt(e(392))/3*(-parseInt(e(414))/4)+parseInt(e(378))/5+parseInt(e(428))/6+-parseInt(e(399))/7*(parseInt(e(381))/8)+parseInt(e(424))/9+parseInt(e(377))/10*(-parseInt(e(398))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ct(390)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zt(this,(function(){const n=Ct,t=new RegExp(n(389)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=kt(n(410));t.test(r+"chain")&&e[n(385)](r+n(427))?kt():r("0")}))()}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ct(390)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ct(n,t){const e=Ot();return(Ct=function(n,t){return e[n-=374]})(n,t)}function Ot(){const n=["5151180FurFlG","action","warn","top","log","321182YKotVi","string","60CyjDPQ","2769785AeHEuu","max","disableZ","8wtQkuT","identity","error","TresGroup","test","outer","min","set","function *\\( *\\)","apply","setFromObject","189vPvsEV","call","length","3pdwtxV","back","return (function() ","1467169pzhutL","5779732BmxvZy","toString","table","disableX","__proto__","right","left","while (true) {}","prototype","exception","console","init","debu","value","gger","17932HzfEhV","disable","getBoundingSphere","bottom","constructor","inner","gref","stateObject","disableY","bind","4365324mbFagf","index","getCenter","input"];return(Ot=function(){return n})()}Dt(void 0,(function(){const n=Ct,t=function(){const n=Ct;let t;try{t=Function(n(397)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(409)]=t[n(409)]||{},r=[n(374),n(430),"info",n(383),n(408),n(401),"trace"];for(let o=0;o<r[n(394)];o++){const t=Dt.constructor[n(407)][n(423)](Dt),i=r[o],a=e[i]||t;t[n(403)]=Dt[n(423)](Dt),t[n(400)]=a[n(400)][n(423)](a),e[i]=t}}))();const Bt=on({__name:Tt(425),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=nn(null),r=nn(null),o=nn(null);return vn((()=>{const n=Ct;if(!r[n(412)])return;if(!o[n(412)])return;r.value.matrixWorld[n(382)]();const e=(new E)[n(391)](o[n(412)],t.precise),i=new A,a=new R,c=e[n(379)].x-e.min.x,s=e[n(379)].y-e[n(387)].y,u=e[n(379)].z-e[n(387)].z;e[n(426)](i),e[n(416)](a);const l=t[n(431)]?s/2:t[n(417)]?-s/2:0,f=t[n(405)]?-c/2:t[n(404)]?c/2:0,p=t.front?u/2:t[n(396)]?-u/2:0;r.value.position[n(388)](t[n(415)]||t[n(402)]?0:-i.x+f,t[n(415)]||t[n(422)]?0:-i.y+l,t[n(415)]||t[n(380)]?0:-i.z+p)})),(n,t)=>{const i=Ct;return sn(),un(i(384),{ref_key:i(420),ref:e},[gn(i(384),{ref_key:i(386),ref:r},[gn(i(384),{ref_key:i(419),ref:o},[ln(n.$slots,"default")],512)],512)],512)}}});function kt(n){function t(n){const e=Ct;if(typeof n===e(376))return function(n){}[e(418)](e(406))[e(390)]("counter");1!==(""+n/n)[e(394)]||n%20==0?function(){return!0}.constructor("debu"+e(413))[e(393)](e(429)):function(){return!1}[e(418)](e(411)+"gger").apply(e(421)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ft=Lt;!function(n,t){const e=Lt,r=jt();for(;;)try{if(392288===-parseInt(e(365))/1+parseInt(e(396))/2+-parseInt(e(359))/3*(parseInt(e(381))/4)+parseInt(e(408))/5+-parseInt(e(371))/6*(parseInt(e(407))/7)+parseInt(e(404))/8+parseInt(e(394))/9*(parseInt(e(395))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ut=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jt(){const n=["console","counter","162RvKKBO","941600FuXSQS","614790NGinNZ","constructor","color","index","resolution","prototype","worldRadius","add","1154096xDbSiQ","group","error","70fkncHT","691490wrDRdT","return (function() ","log",'{}.constructor("return this")( )',"set","TresGroup","gger","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","374754WPNqel","lightSource","scene","far","value","params","744105ksUzWr","stateObject","ior","backside","warn","backsideIOR","389262nfVsJW","length","chain","default","intensity","input","primitive","#ffffff","test","call","16jDkonC","__proto__","debu","object","string","action","causticsOnly","function *\\( *\\)","Vector3","bind","while (true) {}"];return(jt=function(){return n})()}!function(){Ut(this,(function(){const n=Lt,t=new RegExp(n(388)),e=new RegExp(n(358),"i"),r=Wt("init");t[n(379)](r+n(373))&&e[n(379)](r+n(376))?Wt():r("0")}))()}();const Nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lt(n,t){const e=jt();return(Lt=function(n,t){return e[n-=355]})(n,t)}Nt(void 0,(function(){const n=Lt;let t;try{t=Function(n(409)+n(411)+");")()}catch(o){t=window}const e=t[n(392)]=t[n(392)]||{},r=[n(410),n(369),"info",n(406),"exception","table","trace"];for(let i=0;i<r[n(372)];i++){const t=Nt[n(397)][n(401)][n(390)](Nt),o=r[i],a=e[o]||t;t[n(382)]=Nt[n(390)](Nt),t[n(357)]=a.toString[n(390)](a),e[o]=t}}))();const Ht=[Ft(384)],Zt=["object"],Gt=on({__name:Ft(399),props:{color:{default:Ft(378)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ft,e=n,{renderer:r}=Y(),o=Rn(r[t(363)],{frames:1/0,resolution:e[t(400)],worldRadius:e[t(402)]});o[t(364)][t(368)]=!0;const i=bn(null);en(i,(n=>{const e=t;n&&o[e(361)][e(403)](n)}));const{onBeforeLoop:a}=X();return a((({elapsed:n})=>{o.update()})),hn((()=>{const n=t;e.color&&o.params[n(398)][n(412)](e.color),e[n(367)]&&(o[n(364)][n(367)]=e[n(367)]),e[n(370)]&&(o[n(364)].backsideIOR=e[n(370)]),e[n(362)]&&(o[n(364)][n(362)]=e.far),e[n(402)]&&(o[n(364)].worldRadius=e.worldRadius),e[n(375)]&&(o[n(364)][n(375)]=e[n(375)])})),en((()=>e.causticsOnly),(n=>{const e=t;o[e(364)][e(387)]=n})),en((()=>e[t(360)]),(n=>{const e=t;n&&o[e(364)][e(360)]instanceof P[e(389)]&&o.params.lightSource[e(412)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return sn(),un(wn,null,[gn(r(355),{ref_key:r(405),ref:i},[ln(n.$slots,r(374))],512),gn(r(377),{object:rn(o).group,position:[0,.003,0]},null,8,Ht),gn("primitive",{object:rn(o).helper,visible:!1},null,8,Zt)],64)}}});function Wt(n){function t(n){const e=Lt;if(typeof n===e(385))return function(n){}[e(397)](e(391)).apply(e(393));1!==(""+n/n)[e(372)]||n%20==0?function(){return!0}.constructor(e(383)+"gger")[e(380)](e(386)):function(){return!1}.constructor(e(383)+e(356)).apply(e(366)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=$t,r=qt();for(;;)try{if(959914===parseInt(e(466))/1*(parseInt(e(452))/2)+parseInt(e(441))/3*(-parseInt(e(432))/4)+parseInt(e(458))/5+parseInt(e(479))/6*(-parseInt(e(449))/7)+parseInt(e(439))/8*(-parseInt(e(434))/9)+-parseInt(e(463))/10+-parseInt(e(445))/11*(-parseInt(e(453))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(470)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $t(n,t){const e=qt();return($t=function(n,t){return e[n-=431]})(n,t)}!function(){Vt(this,(function(){const n=$t,t=new RegExp(n(444)),e=new RegExp(n(475),"i"),r=Xt("init");t.test(r+n(476))&&e[n(471)](r+n(474))?Xt():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(470)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Kt(void 0,(function(){const n=$t;let t;try{t=Function(n(481)+n(480)+");")()}catch(o){t=window}const e=t[n(437)]=t[n(437)]||{},r=[n(450),n(454),"info",n(436),"exception",n(487),n(461)];for(let i=0;i<r[n(485)];i++){const t=Kt[n(431)][n(484)].bind(Kt),o=r[i],a=e[o]||t;t[n(455)]=Kt[n(457)](Kt),t[n(456)]=a[n(456)][n(457)](a),e[o]=t}}))();const Yt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=$t,o=P[r(440)][r(443)];return P[r(440)][r(443)]=T[r(443)][r(462)](r(469),r(464)+t+r(459)+n+r(438)+e+r(451)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(433)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(462)](r(448),r(468)),(n,t,e)=>{const i=r;P[i(440)][i(443)]=o,function(n,t,e){const r=$t;t.traverse((t=>{const e=$t;t.material&&(Array[e(435)](t[e(472)])?t[e(472)].forEach((t=>{const r=e;n[r(478)][r(482)](t),t[r(473)]()})):(n.properties[e(482)](t[e(472)]),t[e(472)][e(473)]()))})),n[r(467)][r(460)][r(485)]=0,n[r(447)](t,e)}(n,t,e)}};function qt(){const n=["toString","bind","4189320gnxqgb",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","programs","trace","replace","14818840jZzsxV","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","gger","1DhEoaA","info","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","#ifdef USE_SHADOWMAP","apply","test","material","dispose","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","while (true) {}","properties","12pcUvEQ",'{}.constructor("return this")( )',"return (function() ","remove","action","prototype","length","string","table","constructor","32XfKKyg","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","637866gJRnzd","isArray","error","console",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","40sjSRIQ","ShaderChunk","674637vmdCEC","stateObject","shadowmap_pars_fragment","function *\\( *\\)","11QvReGm","debu","compile","#if defined( SHADOWMAP_TYPE_PCF )","1062565XCUQue","log","; i ++) {\n        offset = (vogelDiskSample(j, ","3573818qAHcBj","27288204TTEWwi","warn","__proto__"];return(qt=function(){return n})()}function Xt(n){function t(n){const e=$t;if(typeof n===e(486))return function(n){}[e(431)](e(477))[e(470)]("counter");1!==(""+n/n)[e(485)]||n%20==0?function(){return!0}[e(431)](e(446)+e(465)).call(e(483)):function(){return!1}[e(431)]("debu"+e(465))[e(470)](e(442)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ne,r=re();for(;;)try{if(198749===parseInt(e(130))/1+parseInt(e(144))/2*(-parseInt(e(136))/3)+-parseInt(e(127))/4+-parseInt(e(149))/5+parseInt(e(137))/6+-parseInt(e(132))/7+parseInt(e(160))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(143)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qt(this,(function(){const n=ne,t=new RegExp(n(142)),e=new RegExp(n(157),"i"),r=ee(n(154));t[n(147)](r+"chain")&&e[n(147)](r+n(141))?ee():r("0")}))()}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(143)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ne(n,t){const e=re();return(ne=function(n,t){return e[n-=126]})(n,t)}Jt(void 0,(function(){const n=ne,t=function(){const n=ne;let t;try{t=Function(n(153)+n(148)+");")()}catch(e){t=window}return t}(),e=t[n(152)]=t[n(152)]||{},r=["log",n(162),n(126),"error",n(133),n(131),"trace"];for(let o=0;o<r[n(135)];o++){const t=Jt.constructor[n(150)][n(128)](Jt),i=r[o],a=e[i]||t;t.__proto__=Jt[n(128)](Jt),t[n(146)]=a[n(146)][n(128)](a),e[i]=t}}))();const te=on({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=Y();let i=null;const a=n=>{const t=ne,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(138)],o.value,e.value),i=null),a&&(i=Yt({focus:s,size:c,samples:u}),o[t(138)][t(161)]((n=>{const e=t;n instanceof l&&n[e(158)][e(159)]()})))};return a(t),en(t,(()=>{a(t)})),(n,t)=>null}});function ee(n){function t(n){const e=ne;if(typeof n===e(155))return function(n){}[e(134)](e(145))[e(143)](e(139));1!==(""+n/n)[e(135)]||n%20==0?function(){return!0}[e(134)](e(156)+"gger").call(e(129)):function(){return!1}[e(134)](e(156)+e(151))[e(143)](e(140)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function re(){const n=["while (true) {}","toString","test",'{}.constructor("return this")( )',"1158090QxBdni","prototype","gger","console","return (function() ","init","string","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","material","dispose","7010072KduFfG","traverse","warn","info","774616GKFpyn","bind","action","99853NatfIg","table","1822261onGPJF","exception","constructor","length","9FOxbLZ","1368174CYcTbE","value","counter","stateObject","input","function *\\( *\\)","apply","213198gDfQiO"];return(re=function(){return n})()}const oe=ae;!function(n,t){const e=ae,r=ue();for(;;)try{if(635879===-parseInt(e(243))/1*(-parseInt(e(208))/2)+-parseInt(e(248))/3*(-parseInt(e(236))/4)+-parseInt(e(207))/5*(parseInt(e(249))/6)+-parseInt(e(234))/7+parseInt(e(239))/8+parseInt(e(232))/9+parseInt(e(245))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ae(209)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ae(n,t){const e=ue();return(ae=function(n,t){return e[n-=204]})(n,t)}!function(){ie(this,(function(){const n=ae,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=fe(n(217));t.test(r+n(216))&&e[n(224)](r+n(220))?fe():r("0")}))()}();const ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ae(209)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ce(void 0,(function(){const n=ae;let t;try{t=Function(n(229)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(218)]=t[n(218)]||{},r=[n(205),n(210),"info","error",n(240),n(238),n(235)];for(let i=0;i<r[n(213)];i++){const t=ce[n(228)][n(227)][n(246)](ce),o=r[i],a=e[o]||t;t.__proto__=ce.bind(ce),t[n(242)]=a[n(242)][n(246)](a),e[o]=t}}))();const se=parseInt(B[oe(250)](/\D+/g,""));function ue(){const n=["apply","warn","colorspace_fragment","debu","length","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","chain","init","console","value","input","action","gger","encodings_fragment","test","multiplyScalar",">\n        }","prototype","constructor","return (function() ","string","setTexelSize","4088925LMlXfh","call","8206933hOqAAH","trace","4PRNAgr","resolution","table","908136Tqtred","exception","uniforms","toString","931167mAHipw","kernel","3977920QtPBad","bind","while (true) {}","2370639PYgCPn","12bLoxnu","replace","counter","log","setResolution","2196790dYWwKe","2oglwgU"];return(ue=function(){return n})()}class le extends z{constructor(n=new C){const t=oe;super({uniforms:{inputBuffer:new D(null),depthBuffer:new D(null),resolution:new D(new C),texelSize:new D(new C),halfTexelSize:new D(new C),kernel:new D(0),scale:new D(1),cameraNear:new D(0),cameraFar:new D(1),minDepthThreshold:new D(0),maxDepthThreshold:new D(1),depthScale:new D(0),depthToBlurRatioBias:new D(.25)},fragmentShader:t(214)+t(se>=154?211:223)+t(226),vertexShader:t(215),blending:O,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(231)](n.x,n.y),this[t(244)]=new Float32Array([0,1,2,2,3])}[oe(231)](n,t){const e=oe;this.uniforms.texelSize[e(219)].set(n,t),this.uniforms.halfTexelSize[e(219)].set(n,t)[e(225)](.5)}[oe(206)](n){const t=oe;this[t(241)][t(237)][t(219)].copy(n)}}function fe(n){function t(n){const e=ae;if(typeof n===e(230))return function(n){}.constructor(e(247))[e(209)](e(204));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(212)+e(222))[e(233)](e(221)):function(){return!1}.constructor(e(212)+e(222))[e(209)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const pe=de;function de(n,t){const e=me();return(de=function(n,t){return e[n-=183]})(n,t)}!function(n,t){const e=de,r=me();for(;;)try{if(559189===-parseInt(e(227))/1+-parseInt(e(186))/2*(parseInt(e(229))/3)+-parseInt(e(223))/4*(-parseInt(e(190))/5)+-parseInt(e(201))/6*(-parseInt(e(239))/7)+-parseInt(e(195))/8*(parseInt(e(215))/9)+-parseInt(e(198))/10+parseInt(e(188))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const he=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[de(222)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){he(this,(function(){const n=de,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(242),"i"),r=_e(n(204));t[n(189)](r+"chain")&&e[n(189)](r+"input")?_e():r("0")}))()}();const ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[de(222)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function me(){const n=["test","528865UBgSUd","trace","setAttribute","camera","texture","748048ciwyEN","counter","renderToScreen","10472720uGMaVg","debu","setRenderTarget","78vMIqvE","maxDepthThreshold","render","init","depthToBlurRatioBias","renderTargetA","value","toString","position","while (true) {}","screen",'{}.constructor("return this")( )',"scene","return (function() ","9uXyjEu","frustumCulled","clone","depthBuffer","error","USE_DEPTH","length","apply","8KeHbnU","minDepthThreshold","uniforms","__proto__","98840EruUeR","table","81BoptAS","log","bind","kernel","warn","prototype","renderTargetB","stateObject","gger","constructor","223069IbHuYK","inputBuffer","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","convolutionMaterial","defines","depthTexture","77974BYCddC","string","24482029mkujOP"];return(me=function(){return n})()}ve(void 0,(function(){const n=de,t=function(){const n=de;let t;try{t=Function(n(214)+n(212)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(230),n(233),"info",n(219),"exception",n(228),n(191)];for(let o=0;o<r.length;o++){const t=ve[n(238)][n(234)][n(231)](ve),i=r[o],a=e[i]||t;t[n(226)]=ve.bind(ve),t[n(208)]=a[n(208)].bind(a),e[i]=t}}))();class ge{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=de;this.renderToScreen=!1,this.renderTargetA=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(235)]=this[c(206)][c(217)](),this[c(183)]=new le,this[c(183)].setTexelSize(1/t,1/e),this[c(183)].setResolution(new C(t,e)),this[c(213)]=new u,this[c(193)]=new k,this[c(183)][c(225)][c(224)][c(207)]=r,this.convolutionMaterial[c(225)][c(202)].value=o,this[c(183)].uniforms.depthScale[c(207)]=i,this.convolutionMaterial[c(225)][c(205)][c(207)]=a,this[c(183)][c(184)][c(220)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new F;p[c(192)](c(209),new U(s,3)),p.setAttribute("uv",new U(f,2)),this.screen=new l(p,this[c(183)]),this[c(211)][c(216)]=!1,this[c(213)].add(this[c(211)])}[pe(203)](n,t,e){const r=pe,o=this[r(213)],i=this[r(193)],a=this.renderTargetA,c=this.renderTargetB,s=this[r(183)],u=s[r(225)];u[r(218)][r(207)]=t[r(185)];const l=s[r(232)];let f,p,d,h=t;for(p=0,d=l[r(221)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(232)][r(207)]=l[p],u.inputBuffer[r(207)]=h[r(194)],n[r(200)](f),n[r(203)](o,i),h=f;u[r(232)][r(207)]=l[p],u[r(240)].value=h[r(194)],n[r(200)](this[r(197)]?null:e),n[r(203)](o,i)}}function _e(n){function t(n){const e=de;if(typeof n===e(187))return function(n){}[e(238)](e(210)).apply(e(196));1!==(""+n/n)[e(221)]||n%20==0?function(){return!0}[e(238)](e(199)+e(237))[e(241)]("action"):function(){return!1}.constructor(e(199)+"gger")[e(222)](e(236)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ye(){var n=["200Wdcawv","808392QmgaNH","trace","prototype","tDiffuse","_hasBlur","maxDepthThreshold","_mirror","1737lYHmzh","14072542vAoVYQ","mixBlur","action","hasBlur","gger","debu","defines","mirror","17090EkjiFr","91JHLeem","while (true) {}","depthScale","_minDepthThreshold","counter","chain","input","test","init","table","13236YBOFFc","873030taOtXM","value","fragmentShader","_mixContrast","textureMatrix","#include <emissivemap_fragment>","_distortionMap","#include <project_vertex>","minDepthThreshold","_maxDepthThreshold","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","call","stateObject","depthToBlurRatioBias","apply","_depthToBlurRatioBias","USE_UV","replace","setValues","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_distortion","distortionMap","toString","tDepth","onBeforeCompile","_textureMatrix","_depthScale","uniforms","_mixBlur","console","_tDiffuse","mixContrast","208cngprA","bind","_tDepth","369096bdotWp","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","_blurStrength","constructor","distortion","vertexShader","3891QXWqXx","_tDiffuseBlur","mixStrength","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ",'{}.constructor("return this")( )',"tDiffuseBlur"];return(ye=function(){return n})()}var xe=Se;!function(n,t){for(var e=Se,r=ye();;)try{if(871441===parseInt(e(244))/1+parseInt(e(305))/2*(parseInt(e(237))/3)+-parseInt(e(271))/4*(-parseInt(e(243))/5)+parseInt(e(272))/6+-parseInt(e(261))/7*(-parseInt(e(308))/8)+-parseInt(e(251))/9*(-parseInt(e(260))/10)+-parseInt(e(252))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var be=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Se(286)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){be(this,(function(){var n=Se,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(292),"i"),r=Me(n(269));t.test(r+n(266))&&e[n(268)](r+n(267))?Me():r("0")}))()}();var Ie=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Se(286)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ie(void 0,(function(){var n,t=Se;try{n=Function("return (function() "+t(241)+");")()}catch(s){n=window}for(var e=n[t(302)]=n[t(302)]||{},r=[t(291),"warn","info","error","exception",t(270),t(245)],o=0;o<r.length;o++){var i=Ie.constructor[t(246)][t(306)](Ie),a=r[o],c=e[a]||i;i.__proto__=Ie[t(306)](Ie),i[t(295)]=c[t(295)].bind(c),e[a]=i}}))();class we extends j{constructor(n={}){var t=Se;super(n),this[t(307)]={value:null},this[t(278)]={value:null},this._tDiffuse={value:null},this[t(238)]={value:null},this[t(298)]={value:null},this[t(248)]={value:!1},this[t(250)]={value:0},this[t(301)]={value:0},this[t(310)]={value:.5},this._minDepthThreshold={value:.9},this[t(281)]={value:1},this[t(299)]={value:0},this[t(287)]={value:.25},this[t(293)]={value:1},this[t(275)]={value:1},this[t(290)](n)}[xe(297)](n){var t,e=xe;!(null==(t=n[e(258)])?void 0:t.USE_UV)&&(n.defines[e(288)]=""),n.uniforms.hasBlur=this[e(248)],n[e(300)][e(247)]=this[e(303)],n[e(300)][e(296)]=this[e(307)],n.uniforms.distortionMap=this._distortionMap,n[e(300)][e(242)]=this[e(238)],n[e(300)].textureMatrix=this._textureMatrix,n[e(300)].mirror=this[e(250)],n[e(300)][e(253)]=this._mixBlur,n.uniforms[e(239)]=this[e(310)],n[e(300)][e(280)]=this[e(264)],n.uniforms[e(249)]=this[e(281)],n[e(300)][e(263)]=this[e(299)],n[e(300)][e(285)]=this[e(287)],n.uniforms[e(312)]=this._distortion,n[e(300)].mixContrast=this._mixContrast,n[e(313)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(313)],n[e(313)]=n[e(313)][e(289)](e(279),e(309)),n[e(274)]=e(282)+n[e(274)],n[e(274)]=n[e(274)][e(289)](e(277),e(240))}get[xe(247)](){var n=xe;return this[n(303)][n(273)]}set[xe(247)](n){var t=xe;this[t(303)][t(273)]=n}get[xe(296)](){var n=xe;return this[n(307)][n(273)]}set[xe(296)](n){var t=xe;this._tDepth[t(273)]=n}get[xe(294)](){var n=xe;return this._distortionMap[n(273)]}set distortionMap(n){this[xe(278)].value=n}get[xe(242)](){return this[xe(238)].value}set[xe(242)](n){var t=xe;this[t(238)][t(273)]=n}get[xe(276)](){var n=xe;return this[n(298)][n(273)]}set[xe(276)](n){var t=xe;this[t(298)][t(273)]=n}get[xe(255)](){var n=xe;return this._hasBlur[n(273)]}set[xe(255)](n){var t=xe;this._hasBlur[t(273)]=n}get[xe(259)](){var n=xe;return this[n(250)][n(273)]}set mirror(n){var t=xe;this[t(250)][t(273)]=n}get mixBlur(){var n=xe;return this._mixBlur[n(273)]}set[xe(253)](n){var t=xe;this[t(301)][t(273)]=n}get[xe(239)](){return this[xe(310)].value}set[xe(239)](n){var t=xe;this._blurStrength[t(273)]=n}get[xe(280)](){var n=xe;return this[n(264)][n(273)]}set[xe(280)](n){var t=xe;this[t(264)][t(273)]=n}get[xe(249)](){var n=xe;return this[n(281)][n(273)]}set[xe(249)](n){var t=xe;this[t(281)][t(273)]=n}get[xe(263)](){var n=xe;return this._depthScale[n(273)]}set[xe(263)](n){var t=xe;this[t(299)][t(273)]=n}get[xe(285)](){var n=xe;return this._depthToBlurRatioBias[n(273)]}set[xe(285)](n){var t=xe;this[t(287)][t(273)]=n}get[xe(312)](){return this[xe(293)].value}set distortion(n){var t=xe;this[t(293)][t(273)]=n}get[xe(304)](){var n=xe;return this._mixContrast[n(273)]}set[xe(304)](n){var t=xe;this[t(275)][t(273)]=n}}function Se(n,t){var e=ye();return(Se=function(n,t){return e[n-=237]})(n,t)}function Me(n){function t(n){var e=Se;if("string"==typeof n)return function(n){}.constructor(e(262))[e(286)](e(265));1!==(""+n/n).length||n%20==0?function(){return!0}[e(311)]("debu"+e(256))[e(283)](e(254)):function(){return!1}[e(311)](e(257)+e(256))[e(286)](e(284)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ee(n,t){const e=Re();return(Ee=function(n,t){return e[n-=413]})(n,t)}const Ae=Ee;function Re(){const n=["view","projectionMatrix","defines-USE_DISTORTION","t-depth","index","texture-matrix","546arxSTu","TresMeshReflectorMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","far","bind","warn","function *\\( *\\)","reflectorOffset","clipPlane","13559CxPfeE","1243200nPnAYU","max-depth-threshold","setRenderTarget","exception","value","textureMatrix","924722EFUZpw","distortion","length","t-diffuse-blur","shadowMap","enabled","error","mix-strength","string","matrixWorldInverse","reflectorPlane","lookAt","toString","multiply","isMesh","constant","depth-scale","visible","defines-USE_DEPTH","info","611091HWsHft","cameraWorldPosition","matrixWorld","sign","depthTexture","applyMatrix4","gger","multiplyScalar","558XnlvzP","dot","autoClear","while (true) {}","rotationMatrix","setFromMatrixPosition","chain","clear","virtualCamera","reflect","set","return (function() ","negate","render","reflectorWorldPosition","test","mix-contrast","distortionMap","lookAtPosition","dispose","autoUpdate","elements","apply","prototype",'{}.constructor("return this")( )',"normal","add","addScaledVector","defines-USE_BLUR","extractRotation","subVectors","t-diffuse","key","__proto__","counter","materialRef","152930iUuSgL","table","input","uuid","3100736hHJLzg","assign","2105445LItuzw","target","copy","6VNkCWC","texture"];return(Re=function(){return n})()}!function(n,t){const e=Ee,r=Re();for(;;)try{if(741233===-parseInt(e(488))/1+-parseInt(e(468))/2*(-parseInt(e(443))/3)+-parseInt(e(462))/4+-parseInt(e(440))/5+parseInt(e(451))/6*(-parseInt(e(461))/7)+parseInt(e(438))/8+-parseInt(e(496))/9*(-parseInt(e(434))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(420)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pe(this,(function(){const n=Ee,t=new RegExp(n(458)),e=new RegExp(n(453),"i"),r=Ce("init");t[n(413)](r+n(502))&&e.test(r+n(436))?Ce():r("0")}))()}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(420)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Te(void 0,(function(){const n=Ee,t=function(){const n=Ee;let t;try{t=Function(n(507)+n(422)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=["log",n(457),n(487),n(474),n(465),n(435),"trace"];for(let o=0;o<r[n(470)];o++){const t=Te[n(454)][n(421)][n(456)](Te),i=r[o],a=e[i]||t;t[n(431)]=Te[n(456)](Te),t[n(480)]=a[n(480)][n(456)](a),e[i]=t}}))();const ze=[Ae(450),"mirror",Ae(429),Ae(448),Ae(471),"has-blur",Ae(475),"min-depth-threshold",Ae(463),Ae(484),"depth-to-blur-ratio-bias",Ae(469),Ae(415),Ae(414),Ae(426),Ae(486),Ae(447)],De=on({__name:Ae(449),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=n;const{resolution:o,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,blur:l,mirror:f,mixBlur:p,mixStrength:d,distortion:v,distortionMap:m,mixContrast:g}=J(r),{camera:_,scene:y,renderer:x,extend:S}=Y();S({MeshReflectorMaterial:we});const M=bn(),E=bn(),R=bn(),P=bn(),T=tn((()=>"number"==typeof l[Ee(466)]?[l.value,l.value]:l.value)),z=tn((()=>T.value[0]>0||T.value[1]>0)),D={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};hn((()=>{var n;const r=Ee;null==(n=M[r(466)])||n.texture[r(417)]();const l={minFilter:I,magFilter:I,type:h};var _,y;M[r(466)]=new b(o[r(466)],o[r(466)],(_=c({},l),y={depthBuffer:!0,depthTexture:new w(o[r(466)],o.value,G,W)},t(_,e(y)))),E[r(466)]=new b(o[r(466)],o[r(466)],l),R.value=new ge({resolution:o[r(466)],width:T[r(466)][0],height:T.value[1],minDepthThreshold:i[r(466)],maxDepthThreshold:a[r(466)],depthScale:s[r(466)],depthToBlurRatioBias:u[r(466)]}),P.value={mirror:f,textureMatrix:D[r(467)],mixBlur:p,tDiffuse:M.value[r(444)],tDepth:M[r(466)].depthTexture,tDiffuseBlur:M.value[r(444)],hasBlur:z,mixStrength:d,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,distortion:v,distortionMap:m.value,mixContrast:g,"defines-USE_BLUR":z[r(466)]?"":void 0,"defines-USE_DEPTH":s[r(466)]>0?"":void 0,"defines-USE_DISTORTION":m[r(466)]?"":void 0}}));const C=bn(),{onLoop:O}=X();O((()=>{var n;const t=Ee;if(!(C[t(466)]&&x.value&&M[t(466)]&&_[t(466)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Ee;n[r(482)]&&n.material&&n.material[r(437)]===t&&(e=n)})),e}(y[t(466)],C[t(466)][t(437)]);if(!e)return;e.visible=!1;const o=x[t(466)].xr.enabled,i=x[t(466)][t(472)][t(418)];(function(n){var t,e;const o=Ee;if(D[o(510)][o(501)](n[o(490)]),D[o(489)][o(501)](null==(t=_[o(466)])?void 0:t[o(490)]),D.rotationMatrix[o(427)](n[o(490)]),D[o(423)][o(506)](0,0,1),D[o(423)][o(493)](D[o(500)]),D[o(510)][o(425)](D[o(423)],r[o(459)]),D[o(445)][o(428)](D.reflectorWorldPosition,D[o(489)]),D.view[o(497)](D[o(423)])>0)return;D.view[o(505)](D[o(423)])[o(508)](),D.view[o(424)](D.reflectorWorldPosition),D[o(500)][o(427)](null==(e=_[o(466)])?void 0:e[o(490)]),D[o(416)][o(506)](0,0,-1),D[o(416)][o(493)](D.rotationMatrix),D[o(416)][o(424)](D[o(489)]),D.target[o(428)](D.reflectorWorldPosition,D[o(416)]),D.target[o(505)](D[o(423)]).negate(),D[o(441)][o(424)](D[o(510)]),D.virtualCamera.position[o(442)](D[o(445)]),D.virtualCamera.up[o(506)](0,1,0),D[o(504)].up[o(493)](D[o(500)]),D[o(504)].up.reflect(D[o(423)]),D.virtualCamera[o(479)](D[o(441)]),D[o(504)][o(455)]=(null==_?void 0:_[o(466)])[o(455)],D.virtualCamera.updateMatrixWorld(),D.virtualCamera.projectionMatrix[o(442)]((null==_?void 0:_[o(466)])[o(446)]),D[o(467)][o(506)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),D[o(467)][o(481)](D[o(504)][o(446)]),D[o(467)][o(481)](D[o(504)].matrixWorldInverse),D[o(467)][o(481)](n.matrixWorld),D.reflectorPlane.setFromNormalAndCoplanarPoint(D.normal,D.reflectorWorldPosition),D[o(478)].applyMatrix4(D[o(504)][o(477)]),D.clipPlane.set(D[o(478)][o(423)].x,D[o(478)][o(423)].y,D.reflectorPlane[o(423)].z,D.reflectorPlane[o(483)]);const i=D[o(504)][o(446)];D.q.x=(Math[o(491)](D[o(460)].x)+i[o(419)][8])/i[o(419)][0],D.q.y=(Math[o(491)](D[o(460)].y)+i[o(419)][9])/i[o(419)][5],D.q.z=-1,D.q.w=(1+i[o(419)][10])/i.elements[14],D.clipPlane[o(495)](2/D[o(460)].dot(D.q)),i[o(419)][2]=D[o(460)].x,i[o(419)][6]=D.clipPlane.y,i[o(419)][10]=D[o(460)].z+1,i[o(419)][14]=D[o(460)].w})(e),x[t(466)][t(472)].autoUpdate=!1,x.value[t(464)](M[t(466)]),x[t(466)][t(498)]||x[t(466)][t(503)](),x[t(466)][t(509)](y.value,D[t(504)]),null==(n=null==R?void 0:R[t(466)])||n[t(509)](x.value,M[t(466)],E[t(466)]),x[t(466)].xr[t(473)]=o,x.value[t(472)][t(418)]=i,e[t(485)]=!0,x[t(466)].setRenderTarget(null)}));const B=Sn(),k=tn((()=>{const n=Ee,t={};return Object[n(439)](t,r),Object[n(439)](t,B[n(466)]),t}));return xn((()=>{var n,t;const e=Ee;null==(n=null==M?void 0:M[e(466)])||n[e(417)](),null==(t=null==E?void 0:E[e(466)])||t[e(417)]()})),(n,t)=>{var e,r,o;const c=Ee;return sn(),un(c(452),Mn({key:c(430)+P[c(466)]["defines-USE_BLUR"]+P[c(466)][c(486)]+P.value[c(447)],ref_key:c(433),ref:C},k[c(466)],{"texture-matrix":D.textureMatrix,mirror:rn(f),"t-diffuse":null==(e=M.value)?void 0:e[c(444)],"t-depth":null==(r=M[c(466)])?void 0:r[c(492)],"t-diffuse-blur":null==(o=E[c(466)])?void 0:o[c(444)],"has-blur":z.value,"mix-strength":rn(d),"min-depth-threshold":rn(i),"max-depth-threshold":rn(a),"depth-scale":rn(s),"depth-to-blur-ratio-bias":rn(u),distortion:rn(v),distortionMap:rn(m),"mix-contrast":rn(g),"defines-USE_BLUR":z[c(466)]?"":void 0,"defines-USE_DEPTH":rn(s)>0?"":void 0,"defines-USE_DISTORTION":rn(m)?"":void 0}),null,16,ze)}}});function Ce(n){function t(n){const e=Ee;if(typeof n===e(476))return function(n){}[e(454)](e(499))[e(420)](e(432));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(494)).call("action"):function(){return!1}.constructor("debu"+e(494))[e(420)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Fe,r=ke();for(;;)try{if(882561===parseInt(e(209))/1+-parseInt(e(189))/2*(-parseInt(e(185))/3)+-parseInt(e(218))/4+-parseInt(e(196))/5+parseInt(e(208))/6*(parseInt(e(203))/7)+-parseInt(e(188))/8+parseInt(e(217))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(205)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Oe(this,(function(){const n=Fe,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ue(n(199));t.test(r+n(222))&&e.test(r+n(219))?Ue():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(205)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ke(){const n=["constructor","console","trace","background","info","warn","16805250OKHPpl","3709288vorUUB","input","update","while (true) {}","chain","stateObject","debu","__proto__","82041ZwtxlO","fog","action","5240304VkgGOf","112UezqYB","dispose","type","gger","return (function() ","prototype","length","8425765eDBMkR","toString","CubeCamera","init","string","call","log","7TOWnVI","table","apply","value","bind","1135914unCQwP","562073tpJPeh","error"];return(ke=function(){return n})()}function Fe(n,t){const e=ke();return(Fe=function(n,t){return e[n-=183]})(n,t)}function Ue(n){function t(n){const e=Fe;if(typeof n===e(200))return function(n){}[e(211)](e(221))[e(205)]("counter");1!==(""+n/n)[e(195)]||n%20==0?function(){return!0}.constructor("debu"+e(192))[e(201)](e(187)):function(){return!1}[e(211)](e(183)+"gger")[e(205)](e(223)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Be(void 0,(function(){const n=Fe,t=function(){const n=Fe;let t;try{t=Function(n(193)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(212)]=t.console||{},r=[n(202),n(216),n(215),n(210),"exception",n(204),n(213)];for(let o=0;o<r[n(195)];o++){const t=Be[n(211)][n(194)][n(207)](Be),i=r[o],a=e[i]||t;t[n(184)]=Be[n(207)](Be),t[n(197)]=a[n(197)].bind(a),e[i]=t}}))();const je=He;!function(n,t){const e=He,r=Ge();for(;;)try{if(973717===parseInt(e(211))/1+-parseInt(e(231))/2*(parseInt(e(189))/3)+parseInt(e(191))/4+-parseInt(e(233))/5*(parseInt(e(212))/6)+-parseInt(e(220))/7*(-parseInt(e(230))/8)+parseInt(e(194))/9*(parseInt(e(193))/10)+-parseInt(e(192))/11*(-parseInt(e(206))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ne(this,(function(){const n=He,t=new RegExp(n(188)),e=new RegExp(n(203),"i"),r=Ve(n(186));t[n(209)](r+n(232))&&e.test(r+"input")?Ve():r("0")}))()}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function He(n,t){const e=Ge();return(He=function(n,t){return e[n-=182]})(n,t)}Le(void 0,(function(){const n=He,t=function(){const n=He;let t;try{t=Function(n(195)+n(219)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(199)]||{},r=[n(223),n(213),"info",n(202),n(215),n(228),n(226)];for(let o=0;o<r[n(200)];o++){const t=Le[n(187)].prototype[n(182)](Le),i=r[o],a=e[i]||t;t.__proto__=Le[n(182)](Le),t[n(229)]=a[n(229)][n(182)](a),e[i]=t}}))();const Ze=[je(225)];function Ge(){const n=["return (function() ","action","string","stateObject","console","length","index","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","rgRef","debu","23739504EKZNia","texture","envMap","test","visible","678119KKxthP","12vSLLbv","warn","far","exception","resolution","fog","call",'{}.constructor("return this")( )',"680617XriCvO","frames","value","log","while (true) {}","object","trace","default","table","toString","8jhNABX","4SUzyqF","chain","3732470kOBmpk","primitive","bind","gger","near","apply","init","constructor","function *\\( *\\)","973317cSlVdh","TresGroup","1248636aUTTKL","11RpsqLR","60veRBME","74673YHAuDi"];return(Ge=function(){return n})()}const We=on({__name:je(201),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=je,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=Y(),c=nn(null),s=nn(n),u=nn(t),l=nn(e),f=nn(null);let p,d;return en((()=>s),(n=>{var t;const e=Fe;null==(t=c.value)||t[e(190)](),c.value=new v(n.value),c[e(206)].texture[e(191)]=h}),{immediate:!0}),en([u,l,c],(([n,t,e])=>{const r=Fe;e&&(f[r(206)]=new(P[r(198)])(n,t,e))}),{immediate:!0}),xn((()=>{var n;const t=Fe;null==(n=c[t(206)])||n[t(190)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Fe;p=a.value[t(186)],d=a.value.background,a[t(206)][t(214)]=r||d,a[t(206)][t(186)]=o||p,null==(n=f[t(206)])||n[t(220)](i.value,a[t(206)]),a[t(206)][t(186)]=p,a[t(206)].background=d}}}({resolution:o[r(216)],near:o[r(184)],far:o[r(214)],envMap:o[r(208)],fog:o[r(217)]}),{onBeforeLoop:s}=X();let u=0;const l=nn(null);return s((()=>{const n=r;l[n(222)]&&(o[n(221)]===1/0||u<o[n(221)])&&(l[n(222)][n(210)]=!1,c(),l[n(222)][n(210)]=!0,u++)})),t({texture:null==(e=i[r(222)])?void 0:e[r(207)]}),(n,t)=>{const e=r;return sn(),un(e(190),null,[gn(e(234),{object:rn(a)},null,8,Ze),gn(e(190),{ref_key:e(204),ref:l},[ln(n.$slots,e(227))],512)])}}});function Ve(n){function t(n){const e=He;if(typeof n===e(197))return function(n){}.constructor(e(224))[e(185)]("counter");1!==(""+n/n)[e(200)]||n%20==0?function(){return!0}[e(187)](e(205)+e(183))[e(218)](e(196)):function(){return!1}[e(187)]("debu"+e(183))[e(185)](e(198)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function $e(n,t){const e=qe();return($e=function(n,t){return e[n-=111]})(n,t)}!function(n,t){const e=$e,r=qe();for(;;)try{if(972902===-parseInt(e(140))/1+parseInt(e(146))/2+-parseInt(e(150))/3+parseInt(e(112))/4+parseInt(e(120))/5+parseInt(e(129))/6*(-parseInt(e(127))/7)+-parseInt(e(114))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$e(136)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ke(this,(function(){const n=$e,t=new RegExp(n(137)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Qe(n(118));t[n(133)](r+n(130))&&e[n(133)](r+n(121))?Qe():r("0")}))()}();const Ye=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$e(136)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qe(){const n=["warn","gger","stateObject","uniforms","bind","1794002fYCVVE","debu","30lLvtjD","chain","trace","table","test","string","while (true) {}","apply","function *\\( *\\)","error","action","29322qiHhpI","__proto__","return (function() ","clone","generateUUID","value","2284136HxZNWB","reduce","toString","key","1811925hnHGsx","console","MathUtils","entries","assign","4638636mADLbj","constructor","1628624NZzXSl","forEach","call",'{}.constructor("return this")( )',"init","length","3947400mPDeDm","input"];return(qe=function(){return n})()}function Xe(n,t,e,r){const o=$e,i=class extends z{constructor(o={}){const i=$e,a=Object[i(153)](n);super({uniforms:a[i(147)](((n,[t,e])=>{const r=V[i(143)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this.key="",a[i(115)]((([n])=>Object.defineProperty(this,n,{get:()=>this[i(125)][n][i(145)],set:t=>this[i(125)][n].value=t}))),Object[i(111)](this,o),r&&r(this)}};return i[o(149)]=P[o(152)][o(144)](),i}function Qe(n){function t(n){const e=$e;if(typeof n===e(134))return function(n){}[e(113)](e(135))[e(136)]("counter");1!==(""+n/n)[e(119)]||n%20==0?function(){return!0}[e(113)](e(128)+e(123))[e(116)](e(139)):function(){return!1}.constructor(e(128)+e(123))[e(136)](e(124)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ye(void 0,(function(){const n=$e;let t;try{t=Function(n(142)+n(117)+");")()}catch(o){t=window}const e=t[n(151)]=t[n(151)]||{},r=["log",n(122),"info",n(138),"exception",n(132),n(131)];for(let i=0;i<r[n(119)];i++){const t=Ye[n(113)].prototype[n(126)](Ye),o=r[i],a=e[o]||t;t[n(141)]=Ye[n(126)](Ye),t[n(148)]=a[n(148)][n(126)](a),e[o]=t}}))();var Je=sr;!function(n,t){for(var e=sr,r=Dr();;)try{if(638011===parseInt(e(454))/1*(-parseInt(e(421))/2)+parseInt(e(325))/3+parseInt(e(445))/4*(-parseInt(e(457))/5)+parseInt(e(369))/6*(parseInt(e(451))/7)+parseInt(e(380))/8*(-parseInt(e(496))/9)+-parseInt(e(391))/10+-parseInt(e(384))/11*(-parseInt(e(441))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[sr(330)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){nr(this,(function(){var n=sr,t=new RegExp(n(412)),e=new RegExp(n(331),"i"),r=kr("init");t[n(343)](r+"chain")&&e.test(r+n(396))?kr():r("0")}))()}();var tr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[sr(330)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function er(n){var t=sr,e=function(n,t){var e=sr;if(typeof n!==e(332)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r[e(389)](n,t||e(311));if(typeof o!==e(332))return o;throw new TypeError(e(434))}return(t===e(429)?String:Number)(n)}(n,"string");return typeof e===t(426)?e:String(e)}function rr(n,t,e){var r=sr;return(t=er(t))in n?Object[r(352)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function or(n,t){var e=sr,r=Object[e(472)](n);if(Object[e(327)]){var o=Object[e(327)](n);t&&(o=o[e(456)]((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r[e(439)][e(330)](r,o)}return r}function ir(n){for(var t=sr,e=1;e<arguments[t(318)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0).forEach((function(t){rr(n,t,r[t])})):Object[t(368)]?Object[t(491)](n,Object[t(368)](r)):or(Object(r))[t(444)]((function(e){var o=t;Object.defineProperty(n,e,Object[o(393)](r,e))}))}return n}function ar(n,t){var e=sr;if(null==n)return{};var r,o,i=function(n,t){var e=sr;if(null==n)return{};var r,o,i={},a=Object[e(472)](n);for(o=0;o<a[e(318)];o++)r=a[o],t[e(432)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(327)]){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a.length;o++)r=a[o],t[e(432)](r)>=0||Object[e(382)][e(308)][e(389)](n,r)&&(i[r]=n[r])}return i}function cr(n,t){(null==t||t>n[sr(318)])&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function sr(n,t){var e=Dr();return(sr=function(n,t){return e[n-=305]})(n,t)}function ur(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=sr,r=null==n?null:e(442)!=typeof Symbol&&n[Symbol[e(486)]]||n[e(492)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(389)](r)).done)&&(s[e(439)](o[e(356)]),s[e(318)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(440)]&&(c=r[e(440)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=sr;if(n){if(typeof n===e(429))return cr(n,t);var r=Object[e(382)][e(449)][e(389)](n)[e(355)](8,-1);return r===e(317)&&n.constructor&&(r=n[e(458)][e(481)]),r===e(409)||r===e(306)?Array.from(n):r===e(473)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cr(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(n,t){for(var e=sr,r=0;r<t[e(318)];r++){var o=t[r];o[e(425)]=o[e(425)]||!1,o[e(446)]=!0,e(356)in o&&(o[e(411)]=!0),Object.defineProperty(n,er(o[e(377)]),o)}}function fr(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pr(n,t){var e=sr;return(pr=Object[e(453)]?Object[e(453)][e(371)]():function(n,t){return n[e(305)]=t,n})(n,t)}function dr(n){var t=sr;return(dr=Object[t(453)]?Object.getPrototypeOf.bind():function(n){var e=t;return n[e(305)]||Object[e(402)](n)})(n)}function hr(n){var t=function(){var n=sr;if(typeof Reflect===n(442)||!Reflect[n(324)])return!1;if(Reflect[n(324)][n(438)])return!1;if(typeof Proxy===n(354))return!0;try{return Boolean[n(382)][n(372)][n(389)](Reflect[n(324)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=sr,o=dr(n);if(t){var i=dr(this)[r(458)];e=Reflect[r(324)](o,arguments,i)}else e=o[r(330)](this,arguments);return function(n,t){var e=sr;if(t&&(typeof t===e(332)||typeof t===e(354)))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fr(n)}(this,e)}}tr(void 0,(function(){var n,t=sr;try{n=Function(t(340)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n.console=n.console||{},r=["log",t(363),"info",t(431),"exception","table",t(329)],o=0;o<r[t(318)];o++){var i=tr[t(458)][t(382)][t(371)](tr),a=r[o],c=e[a]||i;i.__proto__=tr[t(371)](tr),i[t(449)]=c[t(449)][t(371)](c),e[a]=i}}))();var vr,mr,gr,_r={diffuse:Je(307),normal:"csm_Normal",roughness:Je(417),metalness:Je(478),emissive:Je(400),ao:Je(335),bump:"csm_Bump",clearcoat:"csm_Clearcoat",clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:"csm_ClearcoatNormal",pointSize:Je(427),fragColor:Je(334),depthAlpha:Je(413),position:"csm_Position",positionRaw:Je(342)},yr=(rr(vr={},""[Je(475)](_r[Je(392)]),"*"),rr(vr,""[Je(475)](_r[Je(482)]),"*"),rr(vr,""[Je(475)](_r.normal),"*"),rr(vr,""[Je(475)](_r.pointSize),["PointsMaterial"]),rr(vr,""[Je(475)](_r[Je(378)]),"*"),rr(vr,""[Je(475)](_r[Je(437)]),"*"),rr(vr,"".concat(_r[Je(375)]),[Je(483),Je(312)]),rr(vr,""[Je(475)](_r[Je(357)]),[Je(483),Je(312)]),rr(vr,""[Je(475)](_r[Je(488)]),[Je(483),Je(312)]),rr(vr,""[Je(475)](_r.ao),[Je(483),Je(312),Je(345),"MeshLambertMaterial",Je(348),"MeshToonMaterial"]),rr(vr,""[Je(475)](_r[Je(344)]),[Je(401),Je(362),Je(463),Je(348),Je(312),Je(483),"MeshToonMaterial",Je(316)]),rr(vr,"".concat(_r[Je(346)]),[Je(408)]),rr(vr,""[Je(475)](_r[Je(399)]),["MeshPhysicalMaterial"]),rr(vr,"".concat(_r[Je(364)]),[Je(312)]),rr(vr,""[Je(475)](_r[Je(397)]),[Je(312)]),vr),xr={"#include <lights_physical_fragment>":P[Je(460)][Je(414)]},br=(rr(mr={},"".concat(_r[Je(469)]),{"#include <beginnormal_vertex>":Je(470)[Je(475)](_r.normal,Je(489))}),rr(mr,""[Je(475)](_r[Je(392)]),{"#include <begin_vertex>":Je(433).concat(_r[Je(392)],Je(497))}),rr(mr,"".concat(_r[Je(482)]),{"#include <begin_vertex>":Je(337)[Je(475)](_r[Je(482)],Je(376))}),rr(mr,""[Je(475)](_r[Je(379)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Je(475)](_r[Je(379)],";\n    ")}),rr(mr,""[Je(475)](_r[Je(378)]),{"#include <color_fragment>":Je(487)[Je(475)](_r[Je(378)],Je(497))}),rr(mr,"".concat(_r[Je(437)]),{"#include <dithering_fragment>":Je(383)[Je(475)](_r[Je(437)],Je(497))}),rr(mr,""[Je(475)](_r[Je(375)]),{"vec3 totalEmissiveRadiance = emissive;":Je(403)[Je(475)](_r[Je(375)],Je(428))}),rr(mr,""[Je(475)](_r[Je(357)]),{"#include <roughnessmap_fragment>":Je(415)[Je(475)](_r[Je(357)],";\n    ")}),rr(mr,""[Je(475)](_r.metalness),{"#include <metalnessmap_fragment>":Je(484).concat(_r[Je(488)],";\n    ")}),rr(mr,""[Je(475)](_r.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ".concat(_r.ao,Je(428))}),rr(mr,""[Je(475)](_r[Je(344)]),{"#include <normal_fragment_maps>":Je(477)[Je(475)](_r[Je(344)],Je(351)).concat(_r[Je(344)],Je(474))}),rr(mr,""[Je(475)](_r[Je(346)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Je(462)[Je(475)](_r[Je(346)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Je(310)[Je(475)](_r[Je(346)],";\n    ")}),rr(mr,"".concat(_r.clearcoat),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Je(475)](_r.clearcoat,";")}),rr(mr,"".concat(_r[Je(364)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[Je(475)](_r[Je(364)],";")}),rr(mr,""[Je(475)](_r[Je(397)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),mr),Ir=(rr(gr={},""[Je(475)](_r[Je(392)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ".concat(_r[Je(392)],Je(350))}),rr(gr,""[Je(475)](_r.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(464)[Je(475)](_r[Je(392)],Je(497))}),rr(gr,"".concat(_r[Je(378)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Je(475)](_r[Je(378)],Je(497))}),rr(gr,"".concat(_r[Je(437)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Je(471)[Je(475)](_r.fragColor,";\n  ")}),gr),wr={clearcoat:[_r.clearcoat,_r[Je(397)],_r[Je(364)]]},Sr=Je(447),Mr=Je(313),Er=Je(319),Ar=Je(476),Rr=Je(495),Pr=[Je(479),Je(353),Je(387),Je(338),Je(485),"cacheKey",Je(404)],Tr=function(n,t,e){var r=Je;return n[r(323)](t)[r(455)](e)},zr=function(n,t){var e,r=Je;return new RegExp("\\b"[r(475)]((e=t,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b"))[r(343)](n)};function Dr(){var n=["\n    vec3 transformed = ","@@toPrimitive must return a primitive value.","();\n              // #_CSM_#\n          ","csm_main_","fragColor","sham","push","return","16668xmpsef","undefined","entries","forEach","1623760xdxBQa","configurable","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","cacheKey","toString","isArray","35wNcGNj","instanceID","setPrototypeOf","2XFKphQ","join","filter","10bdXCOU","constructor","void main() {","ShaderChunk","trim","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","MeshNormalMaterial","\n    gl_Position = ","assign","\n            \n            void main() {\n          ","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","RawShaderMaterial","normal","\n    vec3 objectNormal = ","\n    gl_FragColor = ","keys","Arguments",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","concat","\n    varying mat4 csm_internal_vModelViewMatrix;\n","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","csm_Metalness","baseMaterial","includes","name","positionRaw","MeshStandardMaterial","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","patchMap","iterator","\n    #include <color_fragment>\n    diffuseColor = ","metalness",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","defineProperties","@@iterator","#define IS_","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","\n    \n","88434MHwmyu",";\n  ","__proto__","Set","csm_DiffuseColor","propertyIsEnumerable","debu","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","default","MeshPhysicalMaterial","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","_getPatchMapForMaterial",'". Shader cannot compile.',"ShadowMaterial","Object","length","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","stateObject",'CSM: Property "',"Material","split","construct","3138744uCsLOz","lastIndexOf","getOwnPropertySymbols"," is not available in ","trace","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","object","#define IS_VERTEX;\n","csm_FragColor","csm_AO","onBeforeCompile","\n    vec4 csm_internal_positionUnprojected = ","uniforms","#define IS_UNKNOWN;\n","return (function() ","get","csm_PositionRaw","test","bump","MeshBasicMaterial","depthAlpha","\n            ","MeshPhongMaterial","\n    \n            ",", 1.0 );\n  "," - (dot(","defineProperty","fragmentShader","function","slice","value","roughness","// #_CSM_#","_generateMaterial","_patchShader","message","MeshMatcapMaterial","warn","clearcoatRoughness","update","while (true) {}","_getCacheHash","getOwnPropertyDescriptors","206130vVaiwK","clone","bind","valueOf","isAlreadyExtended","substring","emissive",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","key","diffuse","pointSize","488QRYDhu","CustomShaderMaterial does not support RawShaderMaterial","prototype","\n    #include <dithering_fragment>\n    gl_FragColor  = ","15917YCziET","__csm","gger","vertexShader","Cannot call a class as a function","call","counter","3829630bnNpxz","position","getOwnPropertyDescriptor","customProgramCacheKey","is not a constructor","input","clearcoatNormal","Super expression must either be null or a function","clearcoat","csm_Emissive","MeshLambertMaterial","getPrototypeOf","\n    vec3 totalEmissiveRadiance = ","silent","CSM: ",". Shader cannot compile.","type","MeshDepthMaterial","Map","cacheHash","writable","function *\\( *\\)","csm_DepthAlpha","lights_physical_fragment","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","set","csm_Roughness","toUpperCase","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","void ","795666cMEjFT",'" is required to use output "',"replace","_getMaterialDefine","enumerable","symbol","csm_PointSize",";\n    ","string","ShaderMaterial","error","indexOf"];return(Dr=function(){return n})()}function Cr(n){return n?n[Je(423)](/\s/g,""):void 0}function Or(n){return n[Je(423)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Br=function(n){var t=Je;!function(n,t){var e=sr;if(typeof t!==e(354)&&null!==t)throw new TypeError(e(398));n[e(382)]=Object.create(t&&t[e(382)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(382),{writable:!1}),t&&pr(n,t)}(c,n);var e,r,o,i,a=hr(c);function c(n){var t,e,r,o,i,s=sr,u=n[s(479)],l=n[s(353)],f=n[s(387)],p=n[s(338)],d=n[s(485)],h=n[s(448)],v=n[s(404)],m=ar(n,Pr);if(function(n,t){if(!(n instanceof t))throw new TypeError(sr(388))}(this,c),!function(n){var t=Je;try{new n}catch(e){if(e[t(361)][t(432)](t(395))>=0)return!1}return!0}(u)?(e=u,Object[s(465)](e,m)):e=new u(m),e[s(407)]===s(468))throw new Error(s(381));(function(n,t){var e=Je;e(318),Object[e(465)](n,t);var r=Object[e(402)](t);Object[e(443)](Object.getOwnPropertyDescriptors(r))[e(456)]((function(n){var t=e,r=typeof n[1][t(341)]===t(354),o="function"==typeof n[1][t(416)],i=typeof n[1][t(356)]===t(354),a=n[0]===t(458);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(354)&&Object[r(352)](n,t[0],t[1])}))})(fr(t=a[s(389)](this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:$.generateUUID(),type:e.type,isAlreadyExtended:(r=e[s(336)],o=Je,i=r[o(449)]().trim(),!(0===i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))[o(461)]()[o(318)])),cacheHash:"",silent:v},t[s(338)]=ir(ir({},t.uniforms||{}),p||{});var g=t[s(385)],_=g[s(353)],y=g[s(387)],x=t[s(338)];return t[s(385)][s(410)]=t[s(367)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(365),value:function(){var n=t,e=arguments[n(318)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(338)]=e.uniforms||this[n(338)],Object[n(465)](this[n(385)],e);var r=this.__csm,o=r[n(353)],i=r[n(387)],a=this[n(338)],c=this[n(367)]();this.__csm.cacheHash=c,this[n(359)](o,i,a)}},{key:t(370),value:function(){var n=t,e={baseMaterial:this.__csm[n(479)],fragmentShader:this.__csm[n(353)],vertexShader:this.__csm[n(387)],uniforms:this.uniforms,silent:this[n(385)][n(404)],patchMap:this[n(385)][n(485)],cacheKey:this[n(385)][n(448)]},r=new(this[n(458)])(e);return Object[n(465)](this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(385)],r=e[n(353)],o=e[n(387)],i=this[n(338)],a=[Cr(r),Cr(o),i][n(456)]((function(n){return void 0!==n}));return a.length>0?Pn(a,{excludeValues:!0}):this[n(394)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(338)]=r||{},this.customProgramCacheKey=function(){var n=o;return i.__csm[n(410)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i._patchShader(Or(n),t[r(353)],!0);t[r(353)]=a+c}if(e){var s=i[r(360)](Or(e),t.vertexShader);t.vertexShader=r(333)+s,t[r(387)]=a+t[r(387)]}t[r(338)]=ir(ir({},t[r(338)]),i[r(338)]),i[r(338)]=t[r(338)]}catch(u){console.error(u)}};if(this.__csm[o(373)]){var c=this.onBeforeCompile;this[o(336)]=function(n,t){c(n,t),a(n)}}else this[o(336)]=a;this.needsUpdate=!0}},{key:t(360),value:function(n,e,r){var o=t,i=this,a=e,c=ir(ir({},this[o(314)]()),this[o(385)][o(485)]);Object[o(443)](wr).forEach((function(t){var e=o,r=ur(t,2),a=r[0],c=r[1].find((function(t){return zr(n,t)}));if(c&&!i[a])throw new Error(e(321)[e(475)](a,e(422))[e(475)](c,e(315)))})),Object.entries(xr).forEach((function(n){var t=ur(n,2),e=t[0],r=t[1];a=Tr(a,e,r)})),Object[o(472)](c).forEach((function(t){var e=o;Object[e(472)](c[t]).forEach((function(r){var o=e,s=yr[t],u=i[o(385)][o(407)];if("*"===t||zr(n,t)){if(!(!s||Array[o(450)](s)&&s.includes(u)||"*"===s))throw new Error(o(405).concat(t,o(328))[o(475)](u,o(406)));a=Tr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(436)+this[o(385)][o(452)][o(423)](/-/g,"_"),h=n[o(423)](/void\s+main\s*\(\s*\)/g,o(420)[o(475)](d,"()")),v=n.includes("void main()"),m=a[o(480)](o(358));return v&&(m&&this[o(385)][o(373)]?(a=a[o(423)](o(459),o(347)[o(475)](h,o(466))),s=a,u=o(358),l="\n            "[o(475)](d,"();\n            // #_CSM_#\n          "),p=s[(f=Je)(326)](u),a=-1===p?s:s[f(374)](0,p)+l+s[f(374)](p+u[f(318)])):a=a[o(423)]("void main() {",o(419)[o(475)](r?Ar:"\n    varying mat4 csm_internal_vModelViewMatrix;\n",o(490))[o(475)](Sr,o(349))[o(475)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(475)](Mr,o(494))[o(475)](r?Rr:Er,o(467)).concat(d,o(435)))),a}},{key:t(424),value:function(){var n=t,e=this[n(385)][n(407)];return e?n(493).concat(e[n(418)](),";\n"):n(339)}},{key:t(314),value:function(){var n=t;return this.__csm[n(407)]===n(430)?Ir:br}}],i=sr,r&&lr(e[i(382)],r),o&&lr(e,o),Object[i(352)](e,i(382),{writable:!1}),c}(P[Je(322)]);function kr(n){function t(n){var e=sr;if(typeof n===e(429))return function(n){}.constructor(e(366))[e(330)](e(390));1!==(""+n/n)[e(318)]||n%20==0?function(){return!0}.constructor("debu"+e(386)).call("action"):function(){return!1}[e(458)](e(309)+"gger")[e(330)](e(320)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fr=Zr;!function(n,t){const e=Zr,r=Nr();for(;;)try{if(669622===parseInt(e(405))/1+-parseInt(e(413))/2+-parseInt(e(426))/3*(-parseInt(e(420))/4)+parseInt(e(400))/5*(parseInt(e(414))/6)+-parseInt(e(404))/7*(parseInt(e(431))/8)+parseInt(e(403))/9+-parseInt(e(421))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ur=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zr(428)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ur(this,(function(){const n=Zr,t=new RegExp(n(423)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Gr(n(417));t[n(410)](r+n(412))&&e[n(410)](r+n(416))?Gr():r("0")}))()}();const jr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zr(428)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nr(){const n=["index","error","object","constructor","action","metalness","bind","1672245LaNQPE","clearcoat","toString","11494548LsRera","9051847RhjcAh","941334CCWbIU","primitive","warn","length","counter","test","debu","chain","1908706GeJBkS","6XKhUSB","console","input","init","table","\n      ","1208zpKEbt","1278170dSsaqK","__proto__","function *\\( *\\)","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","#ff00fc","4887BOAOIC","trace","apply","setStyle","gger","8kaPNzM","roughness","\n\t\t\t","color","return (function() ","clearcoatRoughness"];return(Nr=function(){return n})()}jr(void 0,(function(){const n=Zr,t=function(){const n=Zr;let t;try{t=Function(n(435)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(415)]||{},r=["log",n(407),"info",n(438),"exception",n(418),n(427)];for(let o=0;o<r[n(408)];o++){const t=jr[n(440)].prototype[n(399)](jr),i=r[o],a=e[i]||t;t[n(422)]=jr[n(399)](jr),t[n(402)]=a[n(402)][n(399)](a),e[i]=t}}))();const Lr=[Fr(439)],Hr=on({__name:Fr(437),props:{color:{default:Fr(425)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Fr,e=n,r={baseMaterial:K,metalness:e[t(442)],roughness:e.roughness,clearcoat:e[t(401)],clearcoatRoughness:e[t(436)],color:e.color,vertexShader:t(424),fragmentShader:t(433)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(419)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Br(r);return hn((()=>{const n=t;o[n(434)][n(429)](e[n(434)]),o[n(442)]=e.metalness,o[n(432)]=e.roughness,o[n(401)]=e[n(401)],o[n(436)]=e[n(436)]})),(n,e)=>{const r=t;return sn(),un(r(406),{object:rn(o)},null,8,Lr)}}});function Zr(n,t){const e=Nr();return(Zr=function(n,t){return e[n-=399]})(n,t)}function Gr(n){function t(n){const e=Zr;if("string"==typeof n)return function(n){}[e(440)]("while (true) {}")[e(428)](e(409));1!==(""+n/n)[e(408)]||n%20==0?function(){return!0}[e(440)](e(411)+e(430)).call(e(441)):function(){return!1}[e(440)]("debu"+e(430))[e(428)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=$r,r=Kr();;)try{if(989939===-parseInt(e(479))/1*(-parseInt(e(482))/2)+parseInt(e(502))/3*(-parseInt(e(486))/4)+parseInt(e(495))/5*(parseInt(e(476))/6)+-parseInt(e(475))/7+parseInt(e(489))/8*(parseInt(e(488))/9)+-parseInt(e(504))/10*(-parseInt(e(478))/11)+parseInt(e(496))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Wr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[$r(481)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wr(this,(function(){var n=$r,t=new RegExp(n(484)),e=new RegExp(n(492),"i"),r=Yr(n(471));t[n(480)](r+n(501))&&e[n(480)](r+n(498))?Yr():r("0")}))()}();var Vr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[$r(481)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $r(n,t){var e=Kr();return($r=function(n,t){return e[n-=471]})(n,t)}function Kr(){var n=["constructor","input","return (function() ","trace","chain","18567ivabsp","gger","652390LsHIOZ","log","string","init","bind",'{}.constructor("return this")( )',"while (true) {}","12078724taajUu","101736kOwLlJ","action","132zGfUhR","712924ZsPbHB","test","apply","2XQvYow","debu","function *\\( *\\)","warn","132DeBKkE","console","4420557Swkzpt","8YFzQCV","exception","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","stateObject","120fYMhje","6309588oYLfWZ"];return(Kr=function(){return n})()}function Yr(n){function t(n){var e=$r;if(typeof n===e(506))return function(n){}.constructor(e(474))[e(481)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(497)](e(483)+e(503)).call(e(477)):function(){return!1}[e(497)](e(483)+e(503))[e(481)](e(494)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Vr(void 0,(function(){for(var n=$r,t=function(){var n,t=$r;try{n=Function(t(499)+t(473)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(487)]||{},r=[n(505),n(485),n(493),"error",n(490),"table",n(500)],o=0;o<r.length;o++){var i=Vr.constructor.prototype[n(472)](Vr),a=r[o],c=e[a]||i;i[n(491)]=Vr[n(472)](Vr),i.toString=c.toString[n(472)](c),e[a]=i}}))();export{Xe as C,Hr as _,rt as a,ht as b,Rt as c,Bt as d,Gt as e,te as f,We as g,De as h,yt as u};

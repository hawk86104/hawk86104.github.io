import{importShared as e}from"./3d-tiles-renderer.DFcJBJdg1769412424343.js";import{Precipitation_default as a}from"./index.B2-FHinZ1769412424343.js";const{withAsyncContext:t,defineComponent:i}=await e("vue"),{unref:n,openBlock:o,createBlock:r}=await e("vue"),{watch:p}=await e("vue"),s=await e("three"),l=i({__name:"precipitation",props:{speed:{default:12},randomness:{default:0},count:{default:6e3},size:{default:7},areaX:{default:1500},areaY:{default:1e3},areaZ:{default:1500},type:{default:"snow"},color:{default:"#fff"}},async setup(e){let i,l;const d=e,c={snow:"./plugins/digitalCity/image/snow.png",rain:"./plugins/digitalCity/image/rain.png",point:"./plugins/digitalCity/image/cilcle.png"},u={};[i,l]=t(()=>(async()=>{const e=new s.TextureLoader,a=Object.entries(c).map(([a,t])=>new Promise((i,n)=>{e.load(t,e=>{e.wrapS=e.wrapT=s.ClampToEdgeWrapping,e.needsUpdate=!0,u[a]=e,i()},void 0,n)}));await Promise.all(a),console.log("✅ 所有图片预加载完成:",Object.keys(u))})()),await i,l();let m=null;return p(()=>d.type,(e,a)=>{e!==a&&(m=u[e])},{immediate:!0}),(e,t)=>(o(),r(n(a),{ref:"precipitationRef",position:[0,d.areaY/2,0],speed:d.speed,color:d.color,alphaTest:.5,area:[d.areaX,d.areaY,d.areaZ],count:d.count,depthWrite:!0,randomness:d.randomness,size:d.size,opacity:1,map:n(m),alphaMap:n(m)},null,8,["position","speed","color","area","count","randomness","size","map","alphaMap"]))}});export{l as _sfc_main};

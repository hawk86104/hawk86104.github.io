import{m as e,e as o,a}from"./@tresjs.CywMBpUh1758259351508.js";import{_ as s,l as t}from"./three-tile.CCm53Qdv1758259351508.js";import{T as n}from"./@tweenjs.Dhzs71lh1758259351508.js";import{d as r,b as l,w as i,G as p,o as m,F as u,I as c,j as f,u as v,r as g,h as j,f as d,a7 as y,a8 as h,m as _}from"./@vue.pEDXJ_3Z1758259351508.js";import{c as T,a as w,i as b}from"./informationDiv.Dtk7ySWp1758259351508.js";import{V as D}from"./three.CtgP63ME1758259351508.js";import"./postprocessing.DJgHFhS91758259351508.js";import"./@vueuse.C5HLo59K1758259351508.js";/* empty css                                                                                    */import"./@fesjs.uDzWZsaX1758259351508.js";import"./vue-router.BT0ZZbwZ1758259351508.js";import"./lodash-es.C7pWAXPe1758259351508.js";import"./pinia.C_K98KJs1758259351508.js";import"./@qlin.q6OWdsQV1758259351508.js";import"./@babel.BPq7uOAK1758259351508.js";import"./@floating-ui.BFjFSAYt1758259351508.js";import"./@juggle.CcBCnTIR1758259351508.js";const x=r({__name:"flyTo",props:{map:{}},setup(a,{expose:s}){const t=a,{camera:r,controls:l}=e();let i=[];const{onBeforeLoop:p}=o();return p((()=>{i&&i[0]?.update()})),s({flyToGeo:(e,o)=>{const a=e=>t.map.localToWorld(t.map.geo2pos(e));((e,o)=>{l.value&&l.value.target.copy(o);const a=r.value.position;i[0]=new n(a).to(e).start()})(a(e),a(o))},goToGeo:(e,o)=>{const a=t.map.localToWorld(t.map.geo2pos(o)),s=t.map.localToWorld(t.map.geo2pos(e));r.value.position.copy(s),l.value.target.copy(a),l.value.dispatchEvent({type:"change"})}}),(e,o)=>null}}),S=["object"],G=r({__name:"mapBoxShow",setup(o){const a=new s({imgSource:[new t.GDSource({style:"6"}),new t.GDSource({style:"8"})],lon0:90,minLevel:2,maxLevel:20});a.rotateX(-Math.PI/2);const n=new D(110,30,0),r=new D(110,0,1e4),g=a.localToWorld(a.geo2pos(n)),j=a.localToWorld(a.geo2pos(r)),d=l(),{camera:y,controls:h,scene:_,renderer:b}=e();y.value&&y.value.position.copy(j),i((()=>h.value),(e=>{e&&(e.target.copy(g),T(e,y.value,_.value))})),i((()=>d.value),(e=>{e&&e.target.position.copy(g)}));const G=l();return i((()=>G.value),(e=>{if(e){const o=new D(118.724693,32.00741,9.655599),a=new D(118.724419,32.010354,0);setTimeout((()=>{e.flyToGeo(o,a)}),500)}})),w(y.value,b.value.domElement,a),(e,o)=>(m(),p(u,null,[c("TresDirectionalLight",{ref_key:"tdLight",ref:d,position:[0,2e3,1e3],intensity:1},null,512),c("primitive",{object:v(a)},null,8,S),f(x,{map:v(a),ref_key:"flyToRef",ref:G},null,8,["map"])],64))}}),L=r({__name:"threeTileEx",setup(e){const o=g({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),s=g({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,minDistance:.1,maxDistance:3e4,maxPolarAngle:1.2,dampingFactor:.035,keyPanSpeed:5});return(e,t)=>{const n=j("TresCanvas");return m(),p(u,null,[f(n,_(o,{"window-size":""}),{default:d((()=>[t[0]||(t[0]=c("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),f(v(a),y(h(s)),null,16),t[1]||(t[1]=c("TresAmbientLight",{intensity:1},null,-1)),f(G)])),_:1},16),f(b)],64)}}});export{L as default};

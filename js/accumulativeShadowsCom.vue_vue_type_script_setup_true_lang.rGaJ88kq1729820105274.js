import{V as t,c as n,_ as e}from"./three.0W5n8UBO1729820105274.js";import{p as o}from"./@tresjs.S6PXiQcG1729820105274.js";import{d as a,P as r}from"./@pmndrs.4OReEEqc1729820105274.js";import{d as s,b as i,w as c,a3 as u,o as l,E as p,L as f,aj as d,ak as h}from"./@vue.bvMz0l_u1729820105274.js";const m=w;function w(t,n){const e=b();return(w=function(t,n){return e[t-=271]})(t,n)}function b(){const t=["14hOSMpT","table","random","right","length","ambient","width","224874aUpVPu","test","info","MathUtils","toString","acos","shadows plm update","bind","update","set","13276CCNCwn",'{}.constructor("return this")( )',"far","TresSoftShadowMaterial","blendWindow","string","remove","error","opacity","chain","color","log","824190RxybJA","blend","position","radius","top","stateObject","input","60bTfBzr","amount","texture","clear","lightPosition","trace","warn","init","left","counter","32ZphJYj","progressiveLightMap2","accumulativeShadowsCom","frames","rotate-x","debu","while (true) {}","abs","exception","DirectionalLight","console","prepare","sin","gger","camera","near","action","size","call","apply","bias","material","TresMesh","1558102ViCNUa","intensity","355310nhlxfk","gPlane","add","110NPBNOt","TresPlaneGeometry","mapSize","children","14173VoIZxs","constructor","randFloatSpread","cos","configure","alphaTest","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","shadow","412038GGiAcI"];return(b=function(){return t})()}!function(t,n){const e=w,o=b();for(;;)try{if(123062===-parseInt(e(302))/1*(parseInt(e(312))/2)+-parseInt(e(319))/3+parseInt(e(329))/4*(parseInt(e(348))/5)+-parseInt(e(341))/6+parseInt(e(293))/7+-parseInt(e(358))/8*(parseInt(e(311))/9)+-parseInt(e(295))/10*(-parseInt(e(298))/11))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[w(289)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){g(this,(function(){const t=w,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(309),"i"),o=z(t(355));n[t(320)](o+t(338))&&e[t(320)](o+t(347))?z():o("0")}))()}();const M=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[w(289)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();M(void 0,(function(){const t=w,n=function(){const t=w;let n;try{n=Function("return (function() "+t(330)+");")()}catch(e){n=window}return n}(),e=n[t(280)]=n[t(280)]||{},o=[t(340),t(354),t(321),t(336),t(278),t(313),t(353)];for(let a=0;a<o.length;a++){const n=M.constructor.prototype[t(326)](M),r=o[a],s=e[r]||n;n.__proto__=M.bind(M),n[t(323)]=s[t(323)][t(326)](s),e[r]=n}}))();const y=[m(274)],I=f(m(299),{args:[1,1]},null,-1),x=s({__name:m(272),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:"#000000"},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const w=m,b=s;let g=i();const{extend:M,scene:x,renderer:z,camera:P}=o();M({SoftShadowMaterial:a});const S={position:(new t)[w(328)](b.lightPosition.x,b[w(352)].y,b[w(352)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},_=new r(z[w(308)],x[w(308)],S[w(300)]),j={map:_[w(271)][w(350)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:b[w(342)],alphaTest:b[w(307)],opacity:b[w(337)],color:b.color},v=new n;for(let t=0;t<S[w(349)];t++){const t=new(e[w(279)])(16777215,S[w(294)]/S[w(349)]);t.castShadow=!0,t.shadow[w(290)]=S[w(290)],t.shadow[w(284)][w(285)]=S[w(285)],t.shadow.camera[w(331)]=S[w(331)],t.shadow[w(284)][w(315)]=S[w(287)]/2,t[w(310)][w(284)][w(356)]=-S[w(287)]/2,t[w(310)][w(284)][w(345)]=S[w(287)]/2,t[w(310)].camera.bottom=-S[w(287)]/2,t[w(310)][w(300)][w(318)]=S.mapSize,t.shadow[w(300)].height=S[w(300)],v.add(t)}const T=()=>{const t=w,n=S[t(343)][t(316)]();for(let o=0;o<v[t(301)][t(316)];o++){const a=v[t(301)][o];if(Math.random()>b.ambient)a.position[t(328)](S[t(343)].x+e[t(322)][t(304)](S[t(344)]),S.position.y+e[t(322)][t(304)](S.radius),S[t(343)].z+e[t(322)][t(304)](S[t(344)]));else{let e=Math[t(324)](2*Math[t(314)]()-1)-Math.PI/2,o=2*Math.PI*Math[t(314)]();a[t(343)].set(Math[t(305)](e)*Math[t(305)](o)*n,Math[t(277)](Math[t(305)](e)*Math[t(282)](o)*n),Math[t(282)](e)*n)}}},C=(t=1)=>{const n=w;x[n(308)][n(297)](v),_[n(281)]();for(let e=0;e<t;e++)T(),_[n(327)](P[n(308)],b.blendWindow),console[n(340)](n(325),e);x[n(308)][n(335)](v),_.finish()};c((()=>g.value),(t=>{const n=w;t&&(_[n(306)](t),_[n(351)](),console.log("shadows render start"),C(b.frames),console[n(340)]("shadows render end"))}));const k=()=>{_[w(351)](),C(b.frames)};return u((()=>{const t=w;g[t(308)]&&(b[t(337)]&&(g.value[t(291)][t(337)]=b.opacity),b[t(307)]&&(g[t(308)][t(291)][t(307)]=b[t(307)]),b[t(339)]&&g[t(308)][t(291)].color[t(328)](b.color),b[t(342)]&&(g[t(308)][t(291)].blend=b[t(342)]))})),c((()=>b[w(352)]),(t=>{const n=w;t&&(console.log(b[n(352)]),S[n(343)][n(328)](t.x,t.y,t.z),k())}),{deep:!0}),c((()=>[b[w(273)],b[w(333)],b[w(317)]]),(()=>{k()})),(t,n)=>{const e=w;return l(),p(e(292),{"receive-shadow":"",ref_key:e(296),ref:g,scale:10,"rotate-x":-Math.PI/2},[I,f(e(332),d(h(j)),null,16)],8,y)}}});function z(t){function n(t){const e=w;if(typeof t===e(334))return function(t){}[e(303)](e(276)).apply(e(357));1!==(""+t/t)[e(316)]||t%20==0?function(){return!0}.constructor("debu"+e(283))[e(288)](e(286)):function(){return!1}[e(303)](e(275)+e(283))[e(289)](e(346)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{x as _};

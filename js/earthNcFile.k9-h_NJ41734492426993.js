import"./index.nGXUoSIg1734492426993.js";import{_ as n,p as t,bg as e,V as r}from"./three.-W-Avfc61734492426993.js";import{m as o,j as a}from"./@tresjs.WiFlZbqU1734492426993.js";import{d as i,v as s,w as c,b as u,U as l,u as p,o as f,D as m,I as d,a6 as y,a as g,J as v,aj as h,ak as x,j as b,f as I,g as w,al as _,F as j,r as z,e as T,m as S}from"./@vue.-THQH3GC1734492426993.js";import{M as E}from"./three-stdlib.JXmeYOx_1734492426993.js";import{_ as D,c as P,n as A}from"./three-tile.aZFEED7i1734492426993.js";import{N as k}from"./netcdfjs.PQe978Pg1734492426993.js";import{u as F,a as M,_ as R}from"./colorList.CvFhRH5O1734492426993.js";import{P as L}from"./tweakpane.yHWGBmom1734492426993.js";import{c as B,s as C}from"./informationDiv.vue_vue_type_style_index_0_scoped_d511bb21_lang.D_G10Gv21734492426993.js";import{a as Z}from"./mapBoxShow.vue_vue_type_script_setup_true_lang.B5rLmOv01734492426993.js";import{i as O}from"./informationDiv.4YxlzEz81734492426993.js";import"./three-custom-shader-material.5sc6Ku_Y1734492426993.js";import"./3d-tiles-renderer.wj_P34Ug1734492426993.js";import"./index.0WBnzwIe1734492426993.js";import"./@mapbox.guWP4S6P1734492426993.js";import"./@amap.VVwFehhA1734492426993.js";import"./three-mesh-bvh.Ibne3Tc81734492426993.js";import"./utils.1t2rDdLI1734492426993.js";import"./@tweenjs.J1BAvmPw1734492426993.js";import"./utils.eLz0ibWs1734492426993.js";import"./@fesjs.-ojmPQ0_1734492426993.js";import"./vue-router.XKFr-7ni1734492426993.js";import"./lodash-es.kYt-_xTG1734492426993.js";import"./@qlin.yHhFDldE1734492426993.js";import"./pinia.21wZrGqi1734492426993.js";import"./vue-demi.C4xddsk91734492426993.js";import"./@floating-ui.BPbuo5Gx1734492426993.js";import"./@juggle.7yjBMqoW1734492426993.js";import"./http.zRszre7j1734492426993.js";import"./axios.Ng308AU61734492426993.js";import"./color.5veG4KAl1734492426993.js";import"./color-string.kNtZATKp1734492426993.js";import"./color-name.yUbCVIrO1734492426993.js";import"./simple-swizzle.YNACuzOA1734492426993.js";import"./is-arrayish.TFDaLWVC1734492426993.js";import"./color-convert.DUZWshbr1734492426993.js";import"./lodash.gMlLK6RO1734492426993.js";import"./d3-geo.R-zrVcqK1734492426993.js";import"./d3-array.E5C1cfJ61734492426993.js";import"./@vueuse.HnQgsJ961734492426993.js";import"./iobuffer.X3Ykb-iF1734492426993.js";const N=G;!function(n,t){const e=G,r=W();for(;;)try{if(716283===-parseInt(e(351))/1+parseInt(e(356))/2*(parseInt(e(343))/3)+-parseInt(e(386))/4+-parseInt(e(346))/5+parseInt(e(370))/6*(parseInt(e(375))/7)+parseInt(e(364))/8*(parseInt(e(381))/9)+parseInt(e(366))/10*(parseInt(e(367))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const U=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[G(348)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function G(n,t){const e=W();return(G=function(n,t){return e[n-=342]})(n,t)}!function(){U(this,(function(){const n=G,t=new RegExp(n(352)),e=new RegExp(n(374),"i"),r=H("init");t.test(r+n(358))&&e[n(349)](r+n(369))?H():r("0")}))()}();const V=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[G(348)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function W(){const n=["CubeTextureLoader","bind","neg-x.png","17421toONZG","__proto__","length","4038665IhUsjP","neg-y.png","apply","test","trace","150240jCxJFh","function *\\( *\\)","skyBoxMesh","call","pos-x.png","354MfOMPG","toString","chain","constructor","value","pos-y.png","pos-z.png","string","8jKSXIf","load","73330xEQeAW","935LMAbUV","while (true) {}","input","24lzqmsL","setPath","console","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","146006nJaZkb","counter","action","stateObject","environment","info","4305465LfwRwb","neg-z.png","prototype","debu","background","2154820sEkLRn","log"];return(W=function(){return n})()}V(void 0,(function(){const n=G,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(372)]=t[n(372)]||{},r=[n(387),"warn",n(380),"error","exception","table",n(350)];for(let o=0;o<r[n(345)];o++){const t=V.constructor[n(383)][n(389)](V),a=r[o],i=e[a]||t;t[n(344)]=V[n(389)](V),t[n(357)]=i[n(357)][n(389)](i),e[a]=t}}))();const $=i({__name:N(353),props:{texture:{}},setup(t){const e=N,r=t,{scene:a}=o(),i=(new(n[e(388)]))[e(371)](r.texture)[e(365)]([e(355),e(342),e(361),e(347),e(362),e(382)]);return a[e(360)][e(379)]=i,a.value[e(385)]=i,(n,t)=>null}});function H(n){function t(n){const e=G;if(typeof n===e(363))return function(n){}[e(359)](e(368))[e(348)](e(376));1!==(""+n/n)[e(345)]||n%20==0?function(){return!0}.constructor(e(384)+e(373))[e(354)](e(377)):function(){return!1}[e(359)](e(384)+e(373))[e(348)](e(378)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const J=K;!function(n,t){const e=K,r=X();for(;;)try{if(382778===parseInt(e(473))/1*(parseInt(e(492))/2)+parseInt(e(459))/3*(-parseInt(e(470))/4)+parseInt(e(464))/5+parseInt(e(455))/6+parseInt(e(496))/7+-parseInt(e(479))/8+parseInt(e(478))/9*(parseInt(e(472))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Y=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[K(514)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Y(this,(function(){const n=K,t=new RegExp(n(485)),e=new RegExp(n(469),"i"),r=tn(n(500));t.test(r+n(466))&&e.test(r+"input")?tn():r("0")}))()}();const Q=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[K(514)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Q(void 0,(function(){const n=K,t=function(){const n=K;let t;try{t=Function(n(495)+n(471)+");")()}catch(e){t=window}return t}(),e=t[n(461)]=t[n(461)]||{},r=[n(476),n(498),n(509),"error",n(477),n(474),n(503)];for(let o=0;o<r[n(506)];o++){const t=Q[n(486)][n(484)].bind(Q),a=r[o],i=e[a]||t;t[n(460)]=Q[n(465)](Q),t.toString=i[n(513)][n(465)](i),e[a]=t}}))();const q=[J(456),J(515),J(505),J(489),"damping-factor",J(483),J(502),J(480),J(475),"min-azimuth-angle","max-polar-angle","min-polar-angle","min-distance","max-distance",J(508),J(504),"enable-zoom",J(453),J(482),"rotate-speed"];function K(n,t){const e=X();return(K=function(n,t){return e[n-=453]})(n,t)}function X(){const n=["enable-pan","prototype","function *\\( *\\)","constructor","debu","stateObject","enable-damping","change","TresMapControls","67794ghyrdo","action","end","return (function() ","4345103jBEUrM","dispose","warn","update","init","counter","key-pan-speed","trace","max-zoom","auto-rotate-speed","length","call","min-zoom","info","camera","MapControls","domElement","toString","apply","auto-rotate","gger","zoom-speed","POSITIVE_INFINITY","707628eLyvfk","args","value","string","2092548EVigmu","__proto__","console","controlsRef","while (true) {}","1004970nZaQWB","bind","chain","makeDefault","NEGATIVE_INFINITY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4gpgpTu",'{}.constructor("return this")( )',"428170zDskvu","1nkZelv","table","max-azimuth-angle","log","exception","171jOPjHT","5654296pwbHkD","keys","start","enable-rotate"];return(X=function(){return n})()}const nn=i({__name:J(511),props:{makeDefault:{type:Boolean,default:!1},camera:{},domElement:{},target:{},enableDamping:{type:Boolean,default:!0},dampingFactor:{default:.05},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{default:2},enablePan:{type:Boolean,default:!0},keyPanSpeed:{default:7},keys:{},maxAzimuthAngle:{default:Number[J(454)]},minAzimuthAngle:{default:Number[J(468)]},maxPolarAngle:{default:Math.PI},minPolarAngle:{default:0},minDistance:{default:0},maxDistance:{default:Number.POSITIVE_INFINITY},minZoom:{default:0},maxZoom:{default:Number.POSITIVE_INFINITY},touches:{},enableZoom:{type:Boolean,default:!0},zoomSpeed:{default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{default:1}},emits:[J(490),J(481),J(494)],setup(n,{expose:t,emit:e}){const r=n,{autoRotate:i,autoRotateSpeed:y,enableDamping:g,dampingFactor:v,enablePan:h,keyPanSpeed:x,maxAzimuthAngle:b,minAzimuthAngle:I,maxPolarAngle:w,minPolarAngle:_,minDistance:j,maxDistance:z,minZoom:T,maxZoom:S,enableZoom:D,zoomSpeed:P,enableRotate:A,rotateSpeed:k}=s(r),{camera:F,renderer:M,extend:R,controls:L,invalidate:B}=o();c(r,(()=>{B()}));const C=u(null);R({MapControls:E}),c(C,(n=>{const t=K;n&&r[t(467)]?L[t(457)]=n:L[t(457)]=null}));const{onBeforeRender:Z}=a();return Z((({invalidate:n})=>{const t=K;C[t(457)]&&(g[t(457)]||i[t(457)])&&(C[t(457)][t(499)](),n())})),l((()=>{const n=K;C[n(457)]&&C[n(457)][n(497)]()})),t({instance:C}),(n,t)=>{const e=K;return(n[e(510)]||p(F))&&(n[e(512)]||p(M))?(f(),m(e(491),{key:0,ref_key:e(462),ref:C,args:[n[e(510)]||p(F),n[e(512)]||p(M)[e(512)]],"auto-rotate":p(i),"auto-rotate-speed":p(y),"enable-damping":p(g),"damping-factor":p(v),"enable-pan":p(h),"key-pan-speed":p(x),keys:n[e(480)],"max-azimuth-angle":p(b),"min-azimuth-angle":p(I),"max-polar-angle":p(w),"min-polar-angle":p(_),"min-distance":p(j),"max-distance":p(z),"min-zoom":p(T),"max-zoom":p(S),"enable-zoom":p(D),"zoom-speed":p(P),"enable-rotate":p(A),"rotate-speed":p(k)},null,8,q)):d("",!0)}}});function tn(n){function t(n){const e=K;if(typeof n===e(458))return function(n){}[e(486)](e(463))[e(514)](e(501));1!==(""+n/n)[e(506)]||n%20==0?function(){return!0}[e(486)](e(487)+"gger")[e(507)](e(493)):function(){return!1}[e(486)](e(487)+e(516))[e(514)](e(488)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=on,r=un();for(;;)try{if(742035===-parseInt(e(451))/1*(-parseInt(e(487))/2)+parseInt(e(455))/3*(parseInt(e(453))/4)+parseInt(e(458))/5*(-parseInt(e(485))/6)+-parseInt(e(482))/7+-parseInt(e(527))/8+-parseInt(e(488))/9*(parseInt(e(525))/10)+parseInt(e(481))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const en=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[on(473)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){en(this,(function(){const n=on,t=new RegExp(n(511)),e=new RegExp(n(433),"i"),r=ln(n(432));t[n(495)](r+n(516))&&e[n(495)](r+"input")?ln():r("0")}))()}();const rn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[on(473)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();rn(void 0,(function(){const n=on,t=function(){const n=on;let t;try{t=Function("return (function() "+n(431)+");")()}catch(e){t=window}return t}(),e=t[n(466)]=t[n(466)]||{},r=["log",n(434),n(508),n(524),n(444),n(490),n(517)];for(let o=0;o<r[n(492)];o++){const t=rn[n(491)][n(498)].bind(rn),a=r[o],i=e[a]||t;t[n(460)]=rn[n(436)](rn),t.toString=i[n(465)].bind(i),e[a]=t}}))();function on(n,t){const e=un();return(on=function(n,t){return e[n-=431]})(n,t)}function an(n,t,e=0){const r=on,o=function(n,t,e){const r=on;switch(e){case"byte":return e=>n[r(501)](t+e,!1);case r(476):return e=>n[r(454)](t+2*e,!1);case r(507):return e=>n.getInt32(t+4*e,!1);case r(478):return e=>n[r(457)](t+4*e,!1);case"double":return e=>n[r(499)](t+8*e,!1);default:return console[r(524)](r(448),e),()=>0}}(new DataView(n),e,t.type);t.data=function(n){const t=on;switch(n[t(523)]){case t(449):return new Uint8Array(n[t(438)]);case t(476):case t(507):return new Float32Array(n.size);case"float":return new Float32Array(n[t(438)]);case t(526):return new Float32Array(n.size);default:return console[t(524)](t(448),n[t(523)]),()=>0}}(t),t[r(464)]=1/0,t.max=-1/0,t[r(463)]&&console[r(434)](r(496),t[r(463)]);for(let a=0;a<t.size;a++){const n=o(a);t.data[a]=n,t[r(464)]>n&&(t[r(464)]=n),t.max<n&&(t.max=n)}return t}function sn(n,t,e){const r=on;if(e>=t.dimensions[r(492)])return 1;const o=t.dimensions[e],a=n[r(486)];return o===a.id?a[r(492)]:n[r(514)][o][r(438)]}function cn(e){const r=on;if(function(e){const r=on;switch(e){case r(449):return n[r(520)];case r(476):return n[r(503)];case r(507):return t;case"float":case r(526):return n[r(503)];default:return void console[r(524)](r(448),e)}}(e[r(523)])!==n[r(503)])return e;for(let n=0;n<e[r(438)];n++)e[r(489)][n]=Math.min(1,Math.max(0,(e.data[n]-e[r(464)])/(e[r(441)]-e[r(464)])));return e}function un(){const n=["short","RedFormat","float","bytesReceived","find","37938428ZWYcpV","3346182bgANnB","name","Data3DTexture","306cfSxDM","recordDimension","130564THQdWL","16866LlEfIj","data","table","constructor","length","headers","body","test","decoding of record data is not fully supported yet","netcdf header头文件不合法!","prototype","getFloat64","HTTP error! status: ","getInt8","cancel","FloatType","get","needsUpdate","bytes=","int","info","acceptRanges","GET","function *\\( *\\)","bytesTotal","bytes","dimensions","value","chain","trace","string","variable","UnsignedByteType","debu","byteLength","type","error","230jJFrDB","double","11440304ahIgLt","offset",'{}.constructor("return this")( )',"init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","log","bind","arrayBuffer","size","buffer","reader","max","format","read","exception","gger","zLength","getReader","unsupported type : ","byte","yLength","1LxAyPP","unpackAlignment","92wftOks","getInt16","18948txFAih","url","getFloat32","94735fpcIkj","then","__proto__","magFilter","resolve","record","min","toString","console","minFilter","counter","action","status","variables","set","apply","LinearFilter","xLength"];return(un=function(){return n})()}function ln(n){function t(n){const e=on;if(typeof n===e(518))return function(n){}.constructor("while (true) {}").apply(e(468));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(445)).call(e(469)):function(){return!1}.constructor(e(521)+e(445))[e(473)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const pn=hn;!function(n,t){const e=hn,r=mn();for(;;)try{if(724651===-parseInt(e(463))/1*(-parseInt(e(403))/2)+-parseInt(e(415))/3*(parseInt(e(449))/4)+parseInt(e(393))/5*(-parseInt(e(438))/6)+-parseInt(e(444))/7+-parseInt(e(451))/8*(-parseInt(e(384))/9)+-parseInt(e(437))/10+parseInt(e(402))/11*(parseInt(e(388))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[hn(474)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mn(){const n=["9715486ojUftv","2056794YxpUPv","__proto__","显示边框","thresholding","chain","list","气象要素","Vector2","yLength",'{}.constructor("return this")( )',"TresMesh","name","71871WVAsXo","RedFormat","init","zLength","debu","u_clim","LinearFilter","uniforms","magFilter","Vector3","toString","addBinding","visible","prototype","TresGroup","ClampToEdgeWrapping","value","colorTexture","Data3DTexture","info","emissionAbsorption","体积采样率","3252990SHGpOr","4066614WZIpkn","setArrayBuffer","counter","透明度","THT","updateTransferFunction","3631012IfEsdF","EdgesGeometry","zExtent","wrapT","clim1","208outqaS","clim2","8jUWIFX","dimensions","maximumIntensity","alphaScale","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","byteArray","string","constructor","input","matrix","length","wrapR","1LMIQfy","position","bind","BackSide","setDataTypeFromJSdata","TresBoxGeometry","LineSegments","invertColor","xExtent","action","while (true) {}","apply","trace","stateObject","geo2pos","yExtent","addBlade","wrapS","change","scale","log","primitive","minFilter","data","LineBasicMaterial","4427037gLVWQU","map","function *\\( *\\)","volumeMesh","36mFaKyk","TresShaderMaterial","samplingRate","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/ncFile/2003.nc","applyMatrix4","10JjnEyC","体绘制的阈值","type","object","call","xLength","gger","BoxGeometry","dataTexture"];return(mn=function(){return n})()}!function(){fn(this,(function(){const n=hn,t=new RegExp(n(386)),e=new RegExp(n(455),"i"),r=bn(n(417));t.test(r+n(407))&&e.test(r+n(459))?bn():r("0")}))()}();const dn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[hn(474)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();dn(void 0,(function(){const n=hn;let t;try{t=Function("return (function() "+n(412)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(483),"warn",n(434),"error","exception","table",n(475)];for(let a=0;a<r[n(461)];a++){const t=dn.constructor[n(428)][n(465)](dn),o=r[a],i=e[o]||t;t[n(404)]=dn[n(465)](dn),t.toString=i[n(425)][n(465)](i),e[o]=t}}))();const yn=[pn(464),"rotation"],gn=[pn(482),pn(427)],vn=[pn(396)];function hn(n,t){const e=mn();return(hn=function(n,t){return e[n-=384]})(n,t)}const xn=i({__name:pn(387),props:{map:{}},async setup(t){const r=pn;let o,a;const i=t,s=i[r(385)][r(477)](new(n[r(424)])(118.724419,32.010354,200.8));s[r(392)](i[r(385)][r(460)]);const l=u(1),b=u(1),I=u(1),w=F(),_=new(n[r(469)])(new(n[r(445)])(new(n[r(400)])(1,1,1)),new(n[r(487)])({color:10066329})),j=([o,a]=y((()=>(async n=>{const t=on,e=await fetch(n,{method:t(510)});if(!e.ok)throw new Error(t(500)+e[t(470)]);const r=e[t(494)][t(447)]();let o=0,a=null;return await r[t(443)]()[t(459)]((function n(i){const s=t,c=o+i[s(515)].length;if(a){const n=a.subarray(0,o);a=new Uint8Array(c),a[s(472)](n,0,o),a[s(472)](i.value,o)}else a=i.value;o=c;try{const n=new k(a);return n[s(456)]=e[s(456)],n.reader=r,n[s(512)]=e[s(493)][s(504)]("Content-Length"),n.acceptRanges=e[s(493)][s(504)]("Accept-Ranges")===s(513),n[s(479)]=o,n}catch(u){return i.done?void console[s(435)](s(497)):r[s(443)]()[s(459)](n)}}))})(r(391)))),o=await o,a(),o),z=j.variables.filter((n=>3==n[r(452)].length)),T=u(r(442)),S=M(),E=async()=>{const n=r,t=cn(await function(n,t,e=!1){const r=on;void 0===n[r(479)]&&(n[r(479)]=n[r(439)][r(522)]);const o=e||n[r(509)],a=n[r(471)][r(480)]((n=>n[r(483)]===t)),i={variable:t,xLength:sn(n,a,0),yLength:sn(n,a,1),zLength:sn(n,a,2),type:a[r(523)]};a[r(463)]&&(i[r(463)]=n[r(486)]),i.size=i.xLength*i[r(450)]*i[r(446)];const s=a[r(528)],c=s+a[r(438)]-1;if(!o&&c>=n.bytesReceived)return fetch(n.url)[r(459)]((n=>n.arrayBuffer()))[r(459)]((n=>an(n,i,s)));if(n[r(440)]&&(n[r(440)][r(502)](),n[r(440)]=void 0),c<n[r(479)])return Promise[r(462)](an(n.buffer[r(439)],i,s));const u=new Headers({Range:r(506)+s+"-"+c});return fetch(n.url,{headers:u})[r(459)]((n=>n[r(437)]()))[r(459)]((n=>an(n,i)))}(j,T.value));console[n(483)](t),S[n(467)](t.data),S[n(471)]=t[n(398)],S[n(478)]=t[n(411)],S.zExtent=t[n(418)],S[n(439)](t[n(486)]),l[n(431)]=400,b[n(431)]=S.yExtent/S[n(471)]*400,I[n(431)]=S[n(446)]/S.xExtent*400};[o,a]=y((()=>E())),await o,a();const D=g((()=>{const n=r;return!(l[n(431)]<=.01&&l.value>=-.01)&&(!(b.value<=.01&&b[n(431)]>=-.01)&&!(I[n(431)]<=.01&&I.value>=-.01))})),P=()=>{const t=r,o=new(n[t(433)])(S[t(456)],S[t(471)],S.yExtent,S.zExtent);return o.format=n[t(416)],o[t(395)]=S.getThreeType(),o[t(485)]=n[t(421)],o[t(423)]=n[t(421)],o[t(480)]=n[t(430)],o[t(447)]=n[t(430)],o[t(462)]=e,o.needsUpdate=!0,o},A={uniforms:{dataTexture:{value:P()},colorTexture:{value:w[r(443)]()},samplingRate:{value:4},threshold:{value:.5},alphaScale:{value:1},invertColor:{value:!1},composeType:{value:1},u_clim:{value:new(n[r(410)])(.093,-.001)}},vertexShader:"out vec3 vOrigin; \nout vec3 vDirection;  \nvarying vec3 vPosition;\n\nvoid main() {\n  vPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  \n  \n  vOrigin = vec3(inverse(modelMatrix) * vec4(cameraPosition, 1.0)).xyz;\n  \n  vDirection = position - vOrigin;\n\n  \n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"precision highp sampler3D; \nprecision highp float;     \n\nuniform sampler3D dataTexture;  \nuniform sampler2D colorTexture; \nuniform float samplingRate;     \nuniform float threshold;  \nuniform float alphaScale; \nuniform bool invertColor; \nuniform float composeType;\n\nin vec3 vOrigin;    \nin vec3 vDirection; \n\nuniform vec4 clipPlanesArray[3]; \nvarying vec3 vPosition;\nuniform vec2 u_clim;\n\nfloat sampleData(vec3 texcoords) {\n\t\treturn (texture(dataTexture, texcoords.xyz).r - u_clim[0]) / (u_clim[1] - u_clim[0]);\n}\n\nvec4 sampleColor(float value) {\n  \n  \n  float x = invertColor ? 1. - value : value;\n  return texture(colorTexture, vec2(x, .5));\n}\n\nvec2 intersectAABB(vec3 rayOrigin, vec3 rayDir, vec3 boxMin, vec3 boxMax) {\n  vec3 tMin = (boxMin - rayOrigin) / rayDir;\n  vec3 tMax = (boxMax - rayOrigin) / rayDir;\n  vec3 t1 = min(tMin, tMax);\n  vec3 t2 = max(tMin, tMax);\n  float tNear = max(max(t1.x, t1.y), t1.z);\n  float tFar = min(min(t2.x, t2.y), t2.z);\n\n  return vec2(tNear, tFar);\n}\n\nvec4 compose_maximumIntensity(vec4 color, vec3 entryPoint, vec3 rayDir,\n                              float samples, float tStart, float tEnd,\n                              float tIncr) {\n  \n  \n  float density = 0.;\n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n\n    \n    if (value > density) {\n      \n      density = value;\n    }\n\n    \n    \n    if (density >= 1. || t > tEnd) {\n      break;\n    }\n  }\n\n  \n  color.rgb = sampleColor(density).rgb;\n  \n  color.a = alphaScale * (invertColor ? 1. - density : density);\n\n  \n  return color;\n}\n\nvec4 compose_thresholding(vec4 color, vec3 entryPoint, vec3 rayDir,\n                          float samples, float tStart, float tEnd,\n                          float tIncr) {\n  \n  \n\n  \n  \n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n\n    \n    if (value >= threshold || t > tEnd) {\n      \n      color.rgb = sampleColor(value).rgb;\n      \n      color.a = alphaScale;\n      break;\n    }\n  }\n\n  \n  return color;\n}\nvec4 compose_emissionAbsorption(vec4 color, vec3 entryPoint, vec3 rayDir,\n                                float samples, float tStart, float tEnd,\n                                float tIncr) {\n  \n\n  \n  \n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n    \n    vec4 valueColor = sampleColor(value);\n\n    \n    valueColor.a *= value * alphaScale;\n    valueColor.rgb *= valueColor.a;\n\n    color.rgb += (1. - color.a) * valueColor.rgb;\n    color.a += (1. - color.a) * valueColor.a;\n\n    \n    \n    if (color.a >= .99 || t > tEnd) {\n      break;\n    }\n  }\n\n  \n  return color;\n}\nvec4 compose(vec4 color, vec3 entryPoint, vec3 rayDir, float samples,\n             float tStart, float tEnd, float tIncr) {\n  if (composeType == 1.) {\n    return compose_maximumIntensity(color, entryPoint, rayDir, samples, tStart,\n                                    tEnd, tIncr);\n  }\n  if (composeType == 2.) {\n    return compose_thresholding(color, entryPoint, rayDir, samples, tStart,\n                                tEnd, tIncr);\n  }\n  if (composeType == 3.) {\n    return compose_emissionAbsorption(color, entryPoint, rayDir, samples,\n                                      tStart, tEnd, tIncr);\n  }\n}\n\nvoid main() {\n  \n  vec3 rayDir = normalize(vDirection);\n  vec3 aabbmin = vec3(-.5);\n  vec3 aabbmax = vec3(.5);\n  vec2 intersection = intersectAABB(vOrigin, rayDir, aabbmin, aabbmax);\n\n  \n  vec4 color = vec4(0.);\n\n  \n  \n  if (intersection.x <= intersection.y) {\n    \n    \n    intersection.x = max(intersection.x, 0.);\n    \n    vec3 entryPoint = vOrigin + rayDir * intersection.x;\n    vec3 exitPoint = vOrigin + rayDir * intersection.y;\n\n    \n    \n    \n    vec3 dimensions = vec3(textureSize(dataTexture, 0));\n    vec3 entryToExit = exitPoint - entryPoint;\n    float samples =\n        ceil(samplingRate * length(entryToExit * (dimensions - vec3(1.))));\n    float tEnd = length(entryToExit);\n    float tIncr = tEnd / samples;\n    float tStart = .5 * tIncr;\n\n    \n    vec3 texEntry = (entryPoint - aabbmin) / (aabbmax - aabbmin);\n\n    \n    color = compose(color, texEntry, rayDir, samples, tStart, tEnd, tIncr);\n  }\n\n  \n  vec4 eeee = vec4(.0, .0, .0, 1.0);\n  eeee.x = dot(vPosition, clipPlanesArray[0].xyz)+clipPlanesArray[0].w;\n  if (eeee.x < 0.0)\n      discard; \n  eeee.y = dot(vPosition, clipPlanesArray[1].xyz)+clipPlanesArray[1].w;\n  if (eeee.y < 0.0)\n      discard; \n  eeee.z = dot(vPosition, clipPlanesArray[2].xyz)+clipPlanesArray[2].w;\n  if (eeee.z < 0.0)\n      discard; \n  \n  gl_FragColor = color;\n}",side:n[r(466)],transparent:!0},R=u(!0),B=new L;return B[r(479)]({view:"list",label:r(409),options:z[r(385)]((n=>({text:n[r(414)],value:n.name}))),value:T[r(431)]}).on(r(481),(async n=>{const t=r;T[t(431)]=n[t(431)],await E(),A[t(422)][t(401)][t(431)]=P()})),B[r(426)](A.uniforms[r(420)][r(431)],"x",{label:r(448),min:.01,max:.6,step:.001}),B[r(426)](A[r(422)][r(420)][r(431)],"y",{label:r(450),min:-.1,max:.03,step:.001}),B[r(479)]({view:r(408),label:"模式",options:[{text:r(453),value:1},{text:r(406),value:2},{text:r(435),value:3}],value:A[r(422)].composeType[r(431)]}).on(r(481),(n=>{const t=r;A[t(422)].composeType[t(431)]=n.value})),B[r(426)](A.uniforms[r(390)],r(431),{label:r(436),min:0,max:5,step:.01}),B[r(426)](A[r(422)].threshold,"value",{label:r(394),min:0,max:1,step:.01}),B.addBinding(A[r(422)][r(454)],r(431),{label:r(441),min:0,max:1,step:.01}),B[r(426)](A.uniforms[r(470)],r(431),{label:"是否反色"}),B.addBinding(R,"value",{label:r(405)}),c((()=>w.colorsStops),(()=>{const n=r;A[n(422)][n(432)][n(431)]=w[n(443)]()}),{deep:!0,immediate:!0}),(n,t)=>{const e=r;return f(),m(e(429),{position:[...p(s)],rotation:[-Math.PI/2,0,0]},[v(e(413),{scale:[l[e(431)],b[e(431)],I[e(431)]],visible:D[e(431)],renderOrder:99990},[t[0]||(t[0]=v(e(468),{args:[1,1,1]},null,-1)),v(e(389),h(x(A)),null,16),R[e(431)]?(f(),m(e(484),{key:0,object:p(_)},null,8,vn)):d("",!0)],8,gn)],8,yn)}}});function bn(n){function t(n){const e=hn;if(typeof n===e(457))return function(n){}[e(458)](e(473))[e(474)](e(440));1!==(""+n/n)[e(461)]||n%20==0?function(){return!0}[e(458)](e(419)+e(399))[e(397)](e(472)):function(){return!1}[e(458)](e(419)+"gger").apply(e(476)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const In=Sn;!function(n,t){const e=Sn,r=zn();for(;;)try{if(496562===-parseInt(e(328))/1*(-parseInt(e(293))/2)+-parseInt(e(300))/3+parseInt(e(318))/4*(-parseInt(e(322))/5)+-parseInt(e(307))/6+-parseInt(e(344))/7*(-parseInt(e(296))/8)+-parseInt(e(289))/9+parseInt(e(332))/10*(parseInt(e(291))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Sn(292)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){wn(this,(function(){const n=Sn,t=new RegExp(n(313)),e=new RegExp(n(321),"i"),r=Dn(n(306));t[n(339)](r+n(299))&&e.test(r+"input")?Dn():r("0")}))()}();const _n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Sn(292)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();_n(void 0,(function(){const n=Sn;let t;try{t=Function(n(305)+n(336)+");")()}catch(o){t=window}const e=t[n(315)]=t[n(315)]||{},r=[n(294),n(341),n(295),n(301),"exception","table",n(308)];for(let a=0;a<r.length;a++){const t=_n[n(338)].prototype.bind(_n),o=r[a],i=e[o]||t;t[n(310)]=_n[n(323)](_n),t[n(324)]=i[n(324)][n(323)](i),e[o]=t}}))();const jn=[In(290)];function zn(){const n=["primitive","length","position",'{}.constructor("return this")( )',"terrain-rgb","constructor","test","MapBoxSource","warn","flyToRef","copy","24262biSkuW","6651783awyBsP","object","292611ZyDMUe","apply","538oHkUCI","log","info","1408zoTbVT","plugin","while (true) {}","chain","1071231RFhWGi","error","flyToGeo","pk.eyJ1IjoiaGF3azg2MTA0IiwiYSI6ImNrbTQ3cWtyeTAxejEzMHBtcW42bmc0N28ifQ.bvS9U_yWdHDh41jzaDS1dw","call","return (function() ","init","2903448qyUgGb","trace","TresDirectionalLight","__proto__","map","stateObject","function *\\( *\\)","mapbox.terrain-rgb","console","debu","counter","12kDUwsN","geo2pos","rotateX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","171155DurLoe","bind","toString","Vector3","gger","target","1285syPGzN","localToWorld","value","string","460dhPJyn"];return(zn=function(){return n})()}const Tn=In(303);function Sn(n,t){const e=zn();return(Sn=function(n,t){return e[n-=289]})(n,t)}const En=i({__name:In(311),setup(t){const e=In,a=new(D[e(297)][e(340)])({token:Tn,dataType:e(337),style:e(314),maxLevel:15}),i=new P({imgSource:[new(D[e(297)].GDSource)({style:"6"}),new A.GDSource({style:"8"})],demSource:a,lon0:90,minLevel:2,maxLevel:20});i[e(320)](-Math.PI/2);const s=new(n[e(325)])(110,30,0),l=new r(110,0,1e4),d=i.localToWorld(i[e(319)](s)),y=i[e(329)](i[e(319)](l)),g=u(),{camera:h,controls:x,scene:z,renderer:T}=o();h[e(330)]&&h[e(330)][e(335)][e(343)](y),c((()=>x[e(330)]),(n=>{const t=e;n&&(n[t(327)].copy(d),B(n,h.value,z[t(330)]))})),c((()=>g[e(330)]),(n=>{const t=e;n&&n.target[t(335)][t(343)](d)}));const S=u();return c((()=>S[e(330)]),(t=>{const r=e;if(t){const e=new(n[r(325)])(108.724419,30.510354,200),o=new(n[r(325)])(118.724419,32.010354,0);setTimeout((()=>{t[r(302)](e,o)}),500)}})),C(h[e(330)],T[e(330)].domElement,i),(n,t)=>{const r=e;return f(),m(j,null,[v(r(309),{ref_key:"tdLight",ref:g,position:[0,2e3,1e3],intensity:1},null,512),v(r(333),{object:p(i)},null,8,jn),b(p(Z),{map:p(i),ref_key:r(342),ref:S},null,8,["map"]),(f(),I(_,null,{default:w((()=>[b(xn,{map:p(i)},null,8,[r(311)])])),_:1}))],64)}}});function Dn(n){function t(n){const e=Sn;if(typeof n===e(331))return function(n){}.constructor(e(298))[e(292)](e(317));1!==(""+n/n)[e(334)]||n%20==0?function(){return!0}[e(338)]("debu"+e(326))[e(304)]("action"):function(){return!1}[e(338)](e(316)+e(326))[e(292)](e(312)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Fn,r=An();for(;;)try{if(536761===parseInt(e(416))/1*(parseInt(e(448))/2)+-parseInt(e(450))/3+-parseInt(e(453))/4+-parseInt(e(452))/5*(parseInt(e(415))/6)+-parseInt(e(436))/7*(parseInt(e(432))/8)+parseInt(e(434))/9+parseInt(e(442))/10*(parseInt(e(438))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(433)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function An(){const n=["apply","2507265xMrMOu","chain","811531zVouwb","constructor","2093762HKXjbE","call","rgba(0, 130, 250, 1)",'{}.constructor("return this")( )',"100OxSUeN","TresCanvas","string","prototype","rgba(255, 220, 0, 1)","function *\\( *\\)","110ulxcCY","length","2627925RnrQtk","bind","10EhZZeL","839000mqKdau","rgba(106, 204, 0, 1)","counter","debu","2580222aKEXtS","16004GYhftZ","gger","rgba(0, 204, 146, 1)","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","init","test","TresPerspectiveCamera","while (true) {}","return (function() ","table","TresAmbientLight","info","stateObject","log","40CGzbaw"];return(An=function(){return n})()}!function(){Pn(this,(function(){const n=Fn,t=new RegExp(n(447)),e=new RegExp(n(420),"i"),r=Rn(n(422));t.test(r+n(435))&&e[n(423)](r+n(419))?Rn():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(433)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fn(n,t){const e=An();return(Fn=function(n,t){return e[n-=412]})(n,t)}kn(void 0,(function(){const n=Fn,t=function(){const n=Fn;let t;try{t=Function(n(426)+n(441)+");")()}catch(e){t=window}return t}(),e=t[n(421)]=t[n(421)]||{},r=[n(431),"warn",n(429),"error","exception",n(427),"trace"];for(let o=0;o<r.length;o++){const t=kn.constructor[n(445)].bind(kn),a=r[o],i=e[a]||t;t.__proto__=kn[n(451)](kn),t.toString=i.toString.bind(i),e[a]=t}}))();const Mn=i({__name:"earthNcFile",setup(n){const t=z({alpha:!0,precision:"highp"});return(n,e)=>{const r=Fn,o=T(r(443));return f(),m(j,null,[b(R,{showSetup:!0,curColorList:[[r(440),.6228070175438597],[r(418),.7105263157894737],[r(412),.8114035087719298],[r(446),.8947368421052632],["rgba(242, 0, 0, 1)",1]]}),b(o,S(t,{"window-size":""}),{default:w((()=>[e[0]||(e[0]=v(r(424),{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),b(nn,{makeDefault:""}),e[1]||(e[1]=v(r(428),{intensity:1},null,-1)),b(En),(f(),I(_,null,{default:w((()=>[b($,{texture:"./plugins/tvtVolumeRendering/images/skybox/"})])),_:1}))])),_:1},16),b(p(O))],64)}}});function Rn(n){function t(n){const e=Fn;if(typeof n===e(444))return function(n){}[e(437)](e(425))[e(433)](e(413));1!==(""+n/n)[e(449)]||n%20==0?function(){return!0}.constructor(e(414)+e(417))[e(439)]("action"):function(){return!1}[e(437)](e(414)+e(417))[e(433)](e(430)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{Mn as default};

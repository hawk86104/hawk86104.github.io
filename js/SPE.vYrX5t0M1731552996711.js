import{_ as t,ck as e,X as i,bI as n,k as s,V as r,C as o,Y as a,aB as h}from"./three.KG0QRRig1731552996711.js";const c=p;!function(t,e){const i=p,n=u();for(;;)try{if(764031===parseInt(i(457))/1+-parseInt(i(669))/2+parseInt(i(332))/3+parseInt(i(252))/4*(parseInt(i(677))/5)+parseInt(i(383))/6+parseInt(i(674))/7+parseInt(i(381))/8*(-parseInt(i(609))/9))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(){const t=["particles, can support only","color","Emitter already exists in this group. Will not add again.","group","      vec3 center = rotationCenter;","rotation","onParticleSpawn","ensureArrayTypedArg","multiplyScalar","clone","       float c = cos( -vAngle );","BufferGeometry","   vec3 c = vec3( 0.0 );","lerp","min","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","        float perspective = scale / length( mvPosition.xyz );","activationIndex","           positionInTime,","amd","fog_vertex","depthTest","Vector3","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","_incrementParticleCount","_updateUniforms","ensureInstanceOf","    gl_Position = projectionMatrix * mvPosition;","elements","gger","_ensureTypedArray","emitterIDs","wiggle","attribute vec4 size;","    vec3 pos = vec3( position );","_radius","addPool","distribution","getPool","colorOverLifetime","alphaTest","static","runTime","table","angleSpread","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","duration","chain","attribute vec4 acceleration;","    #ifdef HAS_PERSPECTIVE","    float pointSizePerspective = pointSize * perspective;","drag","radiusScale","    return value;","float getMaxAge() {","indexOf","float when_le(float x, float y) {","ShaderMaterial","getPackedRotationAxis","    vec3 vel = getVelocity( age );","replace","#endif","logdepthbuf_vertex","cos","generateUUID","frames","setColor","common","        float row = floor( (frameNumber - column) / framesX );","    vec3 value = vec3( 0.0 );","position","resetUpdateRange","_updateAttributeUpdateRange","ShaderAttribute","_assignForceValue","       float s = sin(angle);","attributeOffset","floor","acceleration","branchAvoidanceFunctions","_distributionClamp","      if( rotation.y == 0.0 ) {","randomVector3OnLine","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","set","value","while (true) {}","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","getLength","       );","attribute vec3 velocity;","vec3 getAcceleration( in float age ) {","Vector2","_radiusScale","age","attribute vec4 color;","velocity","        vSpriteSheet.y = 1.0 / framesY;","attribute vec3 rotationCenter;","setVec2Components","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","object","rotationCenter","randomDirectionVector3OnDisc","   c.r = r / PACKED_COLOR_DIVISOR;","_assignParamsValue","TypedArrayConstructor","attribute vec4 params;","_assignAbsLifetimeValue","randomise","arrayType","    highp float positionInTime = (age / maxAge);","randomDirectionVector3OnSphere","_rotationCenter","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","prototype","type","offset","                   0.0,                                0.0,                                0.0,                                1.0);","indexOffset","hasPerspective","spread","   return c;","_assignColorValue","maxAge","Will not resize.","Group","distributions","debu","    return max(sign(x - y), 0.0);","LINE","DynamicDrawUsage","           unpackColor( color.w )","9MLVFvM","string","geometry","    highp float value = 0.0;","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","_assignRotationValue","updateFlags","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","resetDynamic","floatOverLifetime","vec4 getPosition( in float age ) {","params","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","setVec2","    }","error","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","paramFetchingFunctions","_value","   c -= vec3( 1.0 );","        float rowNorm = vSpriteSheet.w;","dispose","constructor","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","maxParticleCount","  return 1.0 - when_gt(x, y);","uniform float scale;","  return 1.0 - when_lt(x, y);","       float c = cos(angle);","Emitter already belongs to another group. Will not add to requested group.","setUpdateRange","        float framesY = textureAnimation.y;","Color","_createNewWhenPoolEmpty","        pos.y += wiggleCos;","    vColor = vec4( c, o );","    return a * b;","copy","bind","typeSizeMap","__proto__","angle","return (function() ","Points","       vec3 c = vec3(1.0);","warn","   return modelViewMatrix * vec4( position, 1.0 );","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","setAttribute","Emitter does not exist in this group. Will not remove.","        vSpriteSheet.x = 1.0 / framesX;","           unpackColor( color.z ),","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","_center","   }","setSize","_pool","opacity","    highp float alive = getAlive();","OBJECT","864042pJKIoz","setVec3Components","Argument is not instanceof SPE.Emitter:","SHOULD_ROTATE_TEXTURE","   c.g = g / PACKED_COLOR_DIVISOR;","8430317MNMURw","boolean","ensureArrayInstanceOf","440Khlvae","isStatic","SHOULD_CALCULATE_SPRITE","`emitter` argument must be instance of SPE.Emitter. Was provided with:","resetFlags","    return 1.0 - abs( sign( x - y ) );","_poolCreationSettings","join","remove","ensureValueOverLifetimeCompliance","unshift","ceil","random","uuid","float or(float a, float b) {","Emitter does not belong to a group, cannot remove.","float when_lt(float x, float y) {","       if ( vColor.w < float(ALPHATEST) ) discard;","    vec4 rotatedTexture = texture2D( tex, vUv );","deltaTime","        float columnNorm = vSpriteSheet.z;","        float framesX = vSpriteSheet.x;","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","forceFetchingFunctions","   c.b = b / PACKED_COLOR_DIVISOR;","        float columnNorm = column / framesX;","_resetParticle","_distribution","    force += vel;","normalize","_activateParticles","void main() {","particlesPerSecond","length","undefined","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","sin","splice","add","    #ifdef SHOULD_WIGGLE_PARTICLES","updateMin","alive","23156QnErvQ","log","depthWrite","    float shouldApplyValue = 0.0;","sqrt","valueOverLifetimeLength","        float column = floor(mod( frameNumber, framesX ));","info","SHOULD_WIGGLE_PARTICLES","BufferAttribute","_resetBufferRanges","       float x = gl_PointCoord.x - 0.5;","randomVector3OnDisc","        float perspective = 1.0;","    vec3 force = vec3( 0.0 );","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","    #ifdef COLORIZE","_randomise","abs","_assignValue","_decrementParticleCount","uniforms","float getAlive() {","Invalid argument types, or argument types do not match:","interpolateArray","    varying vec4 vSpriteSheet;","spe","_spreadClamp","utils","varyings","disable","bufferUpdateCount","SPE.Group: maxParticleCount exceeded. Requesting","exception","updateMax","material","trace","bufferUpdateRanges","counter","TypedArrayHelper","           return pos;","setMat4","arrayValuesAreEqual","   return params.x;","_axisSpread","stateObject","spreadClamp","    float fIndex = 0.0;","logdepthbuf_pars_vertex","    ","      float angle = 0.0;","hasOwnProperty","rotationFunctions","colorize","      rotationMatrix = getRotationMatrix( axis, angle );","    force += accel * age;","roundToNearestMultiple","    highp float age = getAge();","vec3 getVelocity( in float age ) {","activeMultiplier","   return params.y;","texture","setVec4Components","NUMBER","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","setMat3","ensureTypedArg","count","particleCount","_assignPositionValue","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","paramsArray","activationEnd","_triggerSingleEmitter","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","float when_eq( float x, float y ) {","        vSpriteSheet.z = columnNorm;","fog_fragment","_updateDefines","fog","4420464NbqiJJ","updateCounts","   return acceleration.xyz * age;","vec3 unpackRotationAxis( in float hex ) {","releaseIntoPool","componentSize","call","activeParticleCount","size","        float loopCount = textureAnimation.w;","    force *= drag;","types","       vec3 c = isAlive * getColorOverLifetime(","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","exports","center","removeEmitter","max","#ifdef SHOULD_ROTATE_TEXTURE","subarray","BOOLEAN","toString","        pos.x += wiggleSin;","_createGetterSetters","apply","vec3 unpackColor( in float hex ) {","shaders","_createBufferAttribute","_axis","mesh","    varying float vAngle;","setFromArray","getFromPool","logdepthbuf_pars_fragment","    highp float isAlive = when_gt( alive, 0.0 );","        float wiggleAmount = positionInTime * getWiggle();","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","Vector4","number","reset","StaticDrawUsage","dynamicBuffer","defines","float getAge() {","attributes","REVISION","logdepthbuf_fragment","input","isArray","22358624GSshBT","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","3419946rTSvuG","float and(float a, float b) {","Emitter","push","updateMap","_attributesNeedRefresh","attributeCount","BOX","addEmitter","    #ifdef SHOULD_ROTATE_TEXTURE","function","_attributesNeedDynamicReset","float when_ge(float x, float y) {","grow","fixedTimeStep","   float b = mod( hex, PACKED_COLOR_SIZE );","triggerPoolEmitter","scale","randomVector3","MathUtils","        float wiggleCos = isAlive * cos( wiggleAmount );","array","_static","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","needsUpdate","    #endif","direction","enable","flagUpdate","tick","setRGB","blending","updateRange","_setBufferUpdateRanges","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","randomFloat","_angle","ShaderChunk","keys","_spread","        pos.z += wiggleSin;","attribute vec4 rotation;","    #ifdef SHOULD_CALCULATE_SPRITE","defineProperty","radius","    gl_PointSize = pointSizePerspective;","    #else","attributeKeys","DISC","setVec4","emitters","#define PACKED_COLOR_DIVISOR 255.0","_calculatePPSValue","SPHERE","uniform sampler2D tex;","float getWiggle() {","        float framesX = textureAnimation.x;","typedArray","round","uniform vec4 textureAnimation;","_updateBuffers","shaderChunks","bufferAttribute","transparent","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","_onRemove","   return params.w;","test","TypedArray is already of size:","randomColorAsHex","unpackColor","_checkParticleAges","getValueAtIndex","       axis = normalize(axis);","233638MaxLBv","shrink","_applyAttributesToGeometry","_setAttributeOffset","fog_pars_vertex","randomVector3OnSphere","console","setNumber","loop","       float y = 1.0 - gl_PointCoord.y - 0.5;","rotateTexture","textureFrames","_assignAngleValue","clamp","        float wiggleSin = isAlive * sin( wiggleAmount );","    vec3 outgoingLight = vColor.xyz;","SHOULD_ROTATE_PARTICLES","usage","#define PACKED_COLOR_SIZE 256.0"];return(u=function(){return t})()}!function(){l(this,(function(){const t=p,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(322),"i"),n=g("init");e.test(n+t(523))&&i[t(450)](n+t(379))?g():n("0")}))()}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function p(t,e){const i=u();return(p=function(t,e){return i[t-=236]})(t,e)}f(void 0,(function(){const t=p;let e;try{e=Function(t(651)+'{}.constructor("return this")( ));')()}catch(s){e=window}const i=e[t(463)]=e.console||{},n=[t(253),t(654),t(259),t(624),t(285),t(519),t(288)];for(let r=0;r<n[t(243)];r++){const e=f[t(631)][t(591)][t(647)](f),s=n[r],o=i[s]||e;e[t(649)]=f[t(647)](f),e.toString=o[t(353)][t(647)](o),i[s]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===c(393)&&define[c(495)]?define(c(278),d):typeof exports!==c(244)&&typeof module!==c(244)&&(module[c(346)]=d),d[c(291)]=function(t,e,i,n){const s=c;this[s(337)]=i||1,this[s(340)]=e||1,this[s(582)]=t||Float32Array,this[s(404)]=new t(e*this[s(337)]),this.indexOffset=n||0},d[c(291)].constructor=d[c(291)],d[c(291)].prototype.setSize=function(t,e){const i=c,n=this.array.length;return!e&&(t*=this.componentSize),t<n?this[i(458)](t):t>n?this[i(396)](t):void console[i(259)](i(451),t+".",i(601))},d[c(291)][c(591)].shrink=function(t){const e=c;return this[e(404)]=this.array[e(351)](0,t),this[e(340)]=t,this},d.TypedArrayHelper[c(591)][c(396)]=function(t){const e=c,i=this[e(404)],n=new(this[e(582)])(t);return n[e(560)](i),this.array=n,this[e(340)]=t,this},d.TypedArrayHelper[c(591)].splice=function(t,e){const i=c;t*=this[i(337)],e*=this[i(337)];const n=[],s=this[i(404)],r=s[i(243)];for(let o=0;o<r;++o)(o<t||o>=e)&&n[i(386)](s[o]);return this[i(363)](0,n),this},d[c(291)].prototype[c(363)]=function(t,e){const i=c,n=t+e[i(243)];return n>this[i(404)][i(243)]?this.grow(n):n<this[i(404)].length&&this.shrink(n),this[i(404)][i(560)](e,this[i(595)]+t),this},d.TypedArrayHelper[c(591)][c(622)]=function(t,e){return this[c(575)](t,e.x,e.y)},d[c(291)][c(591)].setVec2Components=function(t,e,i){const n=c,s=this.array,r=this.indexOffset+t*this[n(337)];return s[r]=e,s[r+1]=i,this},d[c(291)].prototype.setVec3=function(t,e){return this[c(670)](t,e.x,e.y,e.z)},d[c(291)][c(591)][c(670)]=function(t,e,i,n){const s=c,r=this[s(404)],o=this[s(595)]+t*this[s(337)];return r[o]=e,r[o+1]=i,r[o+2]=n,this},d[c(291)].prototype[c(432)]=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},d.TypedArrayHelper[c(591)].setVec4Components=function(t,e,i,n,s){const r=c,o=this[r(404)],a=this.indexOffset+t*this[r(337)];return o[a]=e,o[a+1]=i,o[a+2]=n,o[a+3]=s,this},d[c(291)][c(591)][c(317)]=function(t,e){const i=c;return this[i(363)](this[i(595)]+t*this[i(337)],e.elements)},d[c(291)][c(591)][c(293)]=function(t,e){const i=c;return this[i(363)](this.indexOffset+t*this[i(337)],e[i(504)])},d[c(291)].prototype[c(542)]=function(t,e){return this[c(670)](t,e.r,e.g,e.b)},d.TypedArrayHelper.prototype[c(464)]=function(t,e){const i=c;return this[i(404)][this[i(595)]+t*this.componentSize]=e,this},d[c(291)][c(591)][c(455)]=function(t){return this[c(404)][this.indexOffset+t]},d[c(291)][c(591)].getComponentValueAtIndex=function(t){const e=c;return this.array[e(351)](this.indexOffset+t*this[e(337)])},d[c(549)]=function(t,e,i){const n=c,s=d.ShaderAttribute[n(648)];this.type=typeof t===n(610)&&s[n(303)](t)?t:"f",this[n(337)]=s[this[n(592)]],this.arrayType=i||Float32Array,this[n(440)]=null,this[n(445)]=null,this[n(373)]=!!e,this.updateMin=0,this[n(286)]=0},d[c(549)][c(631)]=d.ShaderAttribute,d.ShaderAttribute.typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d[c(549)].prototype[c(639)]=function(t,e){const i=c;this.updateMin=Math[i(490)](t*this[i(337)],this[i(250)]*this[i(337)]),this[i(286)]=Math.max(e*this[i(337)],this[i(286)]*this[i(337)])},d[c(549)][c(591)][c(411)]=function(){const t=c,e=this[t(445)];!e[t(415)]&&(e[t(415)]={});const i=e[t(415)];i[t(593)]=this[t(250)],i[t(319)]=Math.min(this.updateMax-this[t(250)]+this[t(337)],this[t(440)][t(404)][t(243)]),e[t(407)]=!0},d[c(549)][c(591)][c(547)]=function(){const t=c;this[t(250)]=0,this[t(286)]=0},d.ShaderAttribute[c(591)].resetDynamic=function(){const i=c;this[i(445)].usage=this[i(373)]?t[i(607)]:e},d.ShaderAttribute[c(591)][c(247)]=function(t,e){const i=c;this[i(440)][i(247)](t,e),this.forceUpdateAll()},d[c(549)][c(591)].forceUpdateAll=function(){const t=c;this.bufferAttribute.array=this[t(440)].array,this[t(445)][t(415)][t(593)]=0,this[t(445)].updateRange[t(319)]=-1,this[t(445)][t(474)]=e,this[t(445)].needsUpdate=!0},d[c(549)][c(591)][c(506)]=function(t){const e=c;null!==this[e(440)]&&this[e(440)][e(340)]===t*this.componentSize||(null!==this[e(440)]&&this[e(440)][e(340)]!==t?this[e(440)][e(664)](t):null===this[e(440)]&&(this.typedArray=new(d[e(291)])(this[e(586)],t,this[e(337)])))},d[c(549)][c(591)][c(359)]=function(e){const n=c;if(this._ensureTypedArray(e),null!==this[n(445)])return this[n(445)][n(404)]=this[n(440)].array,parseFloat(t[n(377)])>=81&&(this.bufferAttribute[n(319)]=this.bufferAttribute[n(404)].length/this[n(445)].itemSize),void(this[n(445)][n(407)]=!0);this.bufferAttribute=new(t[n(261)])(this[n(440)].array,this[n(337)]),this[n(445)][n(474)]=this[n(373)]?i:t[n(372)]},d[c(549)][c(591)][c(564)]=function(){const t=c;return null===this[t(440)]?0:this[t(440)][t(404)][t(243)]},d[c(444)]={defines:[c(475),c(434)][c(684)]("\n"),uniforms:["uniform float deltaTime;","uniform float runTime;",c(437),c(442),c(635)][c(684)]("\n"),attributes:[c(524),c(566),c(424),c(574),c(583),c(509),"attribute vec4 angle;",c(571),"attribute vec4 opacity;"].join("\n"),varyings:["varying vec4 vColor;",c(350),c(362),c(537),"#ifdef SHOULD_CALCULATE_SPRITE",c(277),c(537)][c(684)]("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {",c(605),"}",c(693),c(447),"}",c(327),c(682),"}",c(395),c(636),"}",c(532),c(634),"}",c(384),c(645),"}",c(691),"    return min(a + b, 1.0);","}"][c(684)]("\n"),unpackColor:[c(357),c(488),c(616),c(661),c(398),c(580),c(673),c(701),"   return c;","}"][c(684)]("\n"),unpackRotationAxis:[c(335),c(488),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",c(661),"   float b = mod( hex, PACKED_COLOR_SIZE );",c(580),"   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;","   c *= vec3( 2.0 );",c(628),c(598),"}"][c(684)]("\n"),floatOverLifetime:[c(632),c(612),c(559),c(299),c(255),c(417),"",c(621),"       fIndex = float( i );","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );",c(623),"",c(529),"}"][c(684)]("\n"),colorOverLifetime:[c(563),c(545),"    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );",c(699),c(316),c(529),"}"][c(684)]("\n"),paramFetchingFunctions:[c(274),c(295),"}",c(375),c(312),"}",c(530),"   return params.z;","}",c(438),c(449),"}"][c(684)]("\n"),forceFetchingFunctions:[c(619),c(655),"}",c(310),"   return velocity * age;","}",c(567),c(334),"}"][c(684)]("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES",c(499),c(456),c(551),c(637),"       float oc = 1.0 - c;","","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,",c(382),c(491),c(594),c(663),"","   vec3 getRotation( in vec3 pos, in float positionInTime ) {",c(557),c(292),"      }","","      vec3 axis = unpackRotationAxis( rotation.x );",c(480),"      vec3 translated;","      mat4 rotationMatrix;",c(302),"      angle += when_eq( rotation.z, 0.0 ) * rotation.y;",c(368),"      translated = rotationCenter - pos;",c(306),c(326),c(663),c(537)].join("\n"),rotateTexture:[c(267),"","    #ifdef SHOULD_ROTATE_TEXTURE",c(263),c(466),c(486),"       float s = sin( -vAngle );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","    #endif","",c(425),c(698),"        float framesY = vSpriteSheet.y;",c(697),c(629),c(656),c(245),c(408),"",c(695)][c(684)]("\n")},d[c(358)]={vertex:[d[c(444)].defines,d[c(444)].uniforms,d[c(444)][c(376)],d[c(444)][c(281)],t[c(420)][c(543)],t[c(420)][c(300)],n[c(461)],d[c(444)][c(555)],d.shaderChunks[c(453)],d[c(444)].unpackRotationAxis,d.shaderChunks[c(618)],d[c(444)][c(515)],d[c(444)][c(626)],d[c(444)][c(700)],d[c(444)][c(304)],c(241),c(309),c(667),"    highp float maxAge = getMaxAge();",c(587),c(366),c(249),c(367),c(471),c(403),c(408),c(535),"    vec3 accel = getAcceleration( age );",c(266),c(510),c(613),c(238),c(342),c(307),"    pos += force;",c(249),c(354),c(643),c(423),c(408),"    #ifdef SHOULD_ROTATE_PARTICLES","        pos = getRotation( pos, positionInTime );",c(408),"    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );",c(576),c(525),c(492),c(429),c(265),"    #endif",c(526),c(268),c(344),c(494),"           unpackColor( color.x ),","           unpackColor( color.y ),",c(660),c(608),c(565),c(429),c(653),c(408),c(345),c(644),c(392),c(625),c(408),c(425),c(439),c(640),c(341),"        float totalFrames = textureAnimation.z;","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );",c(258),c(544),c(702),"        float rowNorm = row / framesY;",c(659),c(573),c(328),"        vSpriteSheet.w = rowNorm;",c(408),c(428),c(503),t[c(420)][c(538)],t[c(420)][c(496)],"}"][c(684)]("\n"),fragment:[d[c(444)][c(273)],t[c(420)][c(543)],t[c(420)].fog_pars_fragment,t[c(420)][c(365)],d[c(444)][c(281)],d.shaderChunks[c(555)],"void main() {",c(472),c(301),"    #ifdef ALPHATEST",c(694),c(408),d[c(444)][c(467)],t[c(420)][c(378)],c(406),c(521),t[c(420)][c(329)],"}"][c(684)]("\n")},d[c(280)]={types:{BOOLEAN:c(675),STRING:c(610),NUMBER:c(370),OBJECT:c(577)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=c;if(Array.isArray(t)){for(let s=t[n(243)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=c;if(Array.isArray(t)){for(let n=t.length-1;n>=0;--n)if(void 0!==e&&t[n]instanceof e==!1)return i;return t}return this[n(502)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=c;e=e||3,i=i||3,!1===Array[n(380)](t[n(627)])&&(t[n(627)]=[t._value]),!1===Array[n(380)](t[n(422)])&&(t[n(422)]=[t[n(422)]]);const s=this[n(470)](t[n(627)][n(243)],e,i),r=this[n(470)](t._spread[n(243)],e,i),o=Math[n(349)](s,r);t._value[n(243)]!==o&&(t[n(627)]=this[n(276)](t[n(627)],o)),t[n(422)].length!==o&&(t[n(422)]=this[n(276)](t[n(422)],o))},interpolateArray(t,e){const i=c,n=t.length,s=["function"==typeof t[0][i(485)]?t[0][i(485)]():t[0]],r=(n-1)/(e-1);for(let o=1;o<e-1;++o){const e=o*r,n=Math[i(553)](e),a=Math[i(688)](e),h=e-n;s[o]=this.lerpTypeAgnostic(t[n],t[a],h)}return s.push("function"==typeof t[n-1].clone?t[n-1][i(485)]():t[n-1]),s},clamp(t,e,i){const n=c;return Math.max(e,Math[n(490)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[c(689)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const a=c;let h,l=this.types;return typeof e===l[a(315)]&&typeof i===l.NUMBER?e+(i-e)*n:e instanceof s&&i instanceof t[a(568)]?(h=e[a(485)](),h.x=this.lerp(e.x,i.x,n),h.y=this[a(489)](e.y,i.y,n),h):e instanceof r&&i instanceof t[a(498)]?(h=e[a(485)](),h.x=this[a(489)](e.x,i.x,n),h.y=this[a(489)](e.y,i.y,n),h.z=this[a(489)](e.z,i.z,n),h):e instanceof t[a(369)]&&i instanceof t[a(369)]?(h=e.clone(),h.x=this[a(489)](e.x,i.x,n),h.y=this.lerp(e.y,i.y,n),h.z=this[a(489)](e.z,i.z,n),h.w=this.lerp(e.w,i.w,n),h):e instanceof o&&i instanceof t[a(641)]?(h=e[a(485)](),h.r=this[a(489)](e.r,i.r,n),h.g=this[a(489)](e.g,i.g,n),h.b=this[a(489)](e.b,i.b,n),h):void console[a(654)](a(275),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math[c(270)](t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){for(let e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[c(689)]()-.5),randomVector3(t,e,i,n,s){const r=c;let o=i.x+(Math[r(689)]()*n.x-.5*n.x),a=i.y+(Math.random()*n.y-.5*n.y),h=i.z+(Math[r(689)]()*n.z-.5*n.z);s&&(o=.5*-s.x+this[r(308)](o,s.x),a=.5*-s.y+this[r(308)](a,s.y),h=.5*-s.z+this.roundToNearestMultiple(h,s.z)),t[r(440)][r(670)](e,o,a,h)},randomColor(t,e,i,n){const s=c;let r=i.r+Math[s(689)]()*n.x,o=i.g+Math[s(689)]()*n.y,a=i.b+Math.random()*n.z;r=this[s(470)](r,0,1),o=this[s(470)](o,0,1),a=this[s(470)](a,0,1),t.typedArray[s(670)](e,r,o,a)},randomColorAsHex:function(){const t=new o;return function(e,i,n,s){const r=p,o=n[r(243)],a=[];for(let h=0;h<o;++h){const e=s[h];t[r(646)](n[h]),t.r+=Math.random()*e.x-.5*e.x,t.g+=Math[r(689)]()*e.y-.5*e.y,t.b+=Math[r(689)]()*e.z-.5*e.z,t.r=this.clamp(t.r,0,1),t.g=this.clamp(t.g,0,1),t.b=this.clamp(t.b,0,1),a.push(t.getHex())}e[r(440)][r(314)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const s=c,r=i.clone();r[s(489)](n,Math.random()),t[s(440)].setVec3Components(e,r.x,r.y,r.z)},randomVector3OnSphere(t,e,i,n,s,r,o,a){const h=c;let l=2*Math[h(689)]()-1,u=6.2832*Math[h(689)](),f=Math[h(256)](1-l*l),p=this[h(418)](n,s),d=0,m=0,g=0;o&&(p=Math[h(441)](p/o)*o),d=f*Math[h(539)](u)*p,m=f*Math[h(246)](u)*p,g=l*p,d*=r.x,m*=r.y,g*=r.z,d+=i.x,m+=i.y,g+=i.z,t.typedArray.setVec3Components(e,d,m,g)},seededRandom(t){const e=1e4*Math[c(246)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,r,o){const a=c;let h=6.2832*Math[a(689)](),l=Math[a(270)](this.randomFloat(n,s)),u=0,f=0,p=0;o&&(l=Math[a(441)](l/o)*o),u=Math[a(539)](h)*l,f=Math[a(246)](h)*l,u*=r.x,f*=r.y,u+=i.x,f+=i.y,p+=i.z,t[a(440)].setVec3Components(e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=c,i=new(t[e(498)]);return function(t,n,s,r,o,a,h,c){const l=e;i[l(646)](a),i.x-=s,i.y-=r,i.z-=o,i[l(239)]()[l(484)](-this[l(418)](h,c)),t[l(440)].setVec3Components(n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=c,i=new(t[e(498)]);return function(t,n,s,r,o,a,h,c){const l=e;i[l(646)](a),i.x-=s,i.y-=r,i.z-=o,i[l(239)]()[l(484)](-this[l(418)](h,c)),t.typedArray[l(670)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=c,i=new(t[e(498)]),n=new(t[e(498)]),s=new(t[e(641)]),r=new(t[e(498)])(1,1,1);return function(t,o){const a=e;return i[a(646)](t)[a(239)](),n[a(646)](o)[a(239)](),i.x+=.5*-o.x+Math[a(689)]()*o.x,i.y+=.5*-o.y+Math[a(689)]()*o.y,i.z+=.5*-o.z+Math[a(689)]()*o.z,i[a(239)]()[a(248)](r).multiplyScalar(.5),s[a(413)](i.x,i.y,i.z),s.getHex()}}()},d[c(602)]=function(e){const i=c,n=d[i(280)],r=n[i(343)];(e=n[i(318)](e,r[i(668)],{}))[i(313)]=n.ensureTypedArg(e[i(313)],r[i(668)],{}),this.uuid=t[i(402)][i(540)](),this.fixedTimeStep=n[i(318)](e.fixedTimeStep,r.NUMBER,.016),this[i(313)]=n[i(502)](e[i(313)].value,a,null),this[i(468)]=n[i(502)](e[i(313)][i(541)],s,new s(1,1)),this.textureFrameCount=n[i(318)](e[i(313)].frameCount,r[i(315)],this.textureFrames.x*this[i(468)].y),this.textureLoop=n.ensureTypedArg(e[i(313)][i(465)],r.NUMBER,1),this.textureFrames[i(349)](new(t[i(568)])(1,1)),this[i(596)]=n[i(318)](e[i(596)],r[i(352)],!0),this[i(305)]=n[i(318)](e[i(305)],r.BOOLEAN,!0),this[i(633)]=n[i(318)](e[i(633)],r[i(315)],null),this[i(414)]=n.ensureTypedArg(e[i(414)],r.NUMBER,h),this[i(446)]=n[i(318)](e[i(446)],r[i(352)],!0),this.alphaTest=parseFloat(n[i(318)](e[i(516)],r.NUMBER,0)),this[i(254)]=n[i(318)](e[i(254)],r[i(352)],!1),this.depthTest=n.ensureTypedArg(e[i(497)],r[i(352)],!0),this[i(331)]=n.ensureTypedArg(e[i(331)],r.BOOLEAN,!0),this[i(400)]=n[i(318)](e[i(400)],r[i(315)],300),this.emitters=[],this[i(507)]=[],this[i(665)]=[],this[i(683)]=null,this[i(642)]=0,this[i(388)]=!1,this[i(394)]=!1,this[i(320)]=0,this[i(273)]={tex:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new(t[i(369)])(this[i(468)].x,this[i(468)].y,this.textureFrameCount,Math.max(Math.abs(this.textureLoop),1))},fogColor:{type:"c",value:this[i(331)]?new(t[i(641)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(400)]}},this[i(374)]={HAS_PERSPECTIVE:this[i(596)],COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:d[i(257)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(468)].x>1||this[i(468)].y>1},this[i(376)]={position:new(d[i(549)])("v3",!0),acceleration:new(d[i(549)])("v4",!0),velocity:new d.ShaderAttribute("v3",!0),rotation:new(d[i(549)])("v4",!0),rotationCenter:new d.ShaderAttribute("v3",!0),params:new(d[i(549)])("v4",!0),size:new(d[i(549)])("v4",!0),angle:new(d[i(549)])("v4",!0),color:new(d[i(549)])("v4",!0),opacity:new d.ShaderAttribute("v4",!0)},this[i(430)]=Object[i(421)](this[i(376)]),this[i(389)]=this[i(430)][i(243)],this[i(287)]=new(t[i(533)])({uniforms:this[i(273)],vertexShader:d[i(358)].vertex,fragmentShader:d.shaders.fragment,blending:this.blending,transparent:this.transparent,alphaTest:this[i(516)],depthWrite:this[i(254)],depthTest:this[i(497)],defines:this[i(374)],fog:this[i(331)]}),this[i(611)]=new(t[i(487)]),this[i(361)]=new(t[i(652)])(this.geometry,this[i(287)]),null===this[i(633)]&&console.warn(i(590))},d[c(602)][c(631)]=d[c(602)],d.Group.prototype[c(330)]=function(){const t=c;let e,i=this.emitters,n=i[t(243)]-1,s=this[t(374)];for(;n>=0;--n)e=i[n],!s[t(679)]&&(s[t(672)]=s[t(672)]||!!Math[t(349)](Math[t(349)][t(356)](null,e[t(650)][t(561)]),Math[t(349)][t(356)](null,e[t(650)][t(597)]))),s[t(473)]=s[t(473)]||!!Math[t(349)](e.rotation[t(650)],e[t(481)][t(520)]),s.SHOULD_WIGGLE_PARTICLES=s[t(260)]||!!Math[t(349)](e[t(508)].value,e[t(508)].spread);this[t(287)][t(407)]=!0},d[c(602)].prototype[c(459)]=function(){const t=c;let e,i,n=this.attributes,s=this[t(611)],r=s.attributes;for(const o in n)n.hasOwnProperty(o)&&(e=n[o],i=r[o],i?i[t(404)]=e[t(440)][t(404)]:s[t(657)](o,e[t(445)]),e.bufferAttribute[t(407)]=!0);this[t(611)].setDrawRange(0,this[t(320)])},d.Group[c(591)].addEmitter=function(t){const e=c;if(t instanceof d[e(385)]==!1)return void console[e(624)](e(680),t);if(this[e(507)].indexOf(t.uuid)>-1)return void console.error(e(478));if(null!==t[e(479)])return void console.error(e(638));const i=this[e(376)],n=this[e(320)],s=n+t.particleCount;this[e(320)]=s,null!==this[e(633)]&&this[e(320)]>this[e(633)]&&console[e(654)](e(284),this[e(320)],e(476),this[e(633)]),t[e(435)](t[e(600)][e(627)]+t.maxAge._spread),t[e(416)](this[e(430)]),t._setAttributeOffset(n),t[e(479)]=this,t[e(376)]=this[e(376)];for(const r in i)i[e(303)](r)&&i[r]._createBufferAttribute(null!==this.maxParticleCount?this[e(633)]:this[e(320)]);for(let r=n;r<s;++r)t[e(321)](r),t[e(550)](r,e(572)),t._assignForceValue(r,e(554)),t[e(584)](r,e(666)),t[e(584)](r,e(340)),t[e(469)](r),t._assignRotationValue(r),t[e(581)](r),t._assignColorValue(r);return this[e(459)](),this.emitters[e(386)](t),this.emitterIDs[e(386)](t[e(690)]),this[e(330)](t),this[e(287)][e(407)]=!0,this[e(611)][e(407)]=!0,this._attributesNeedRefresh=!0,this},d[c(602)][c(591)][c(348)]=function(t){const e=c,i=this.emitterIDs[e(531)](t.uuid);if(t instanceof d[e(385)]==!1)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(-1===i)return void console[e(624)](e(658));const n=t[e(552)],s=n+t[e(320)],r=this[e(376)].params[e(440)];for(let o=n;o<s;++o)r.array[4*o]=0,r[e(404)][4*o+1]=0;this[e(433)][e(247)](i,1),this[e(507)][e(247)](i,1);for(const o in this[e(376)])this[e(376)].hasOwnProperty(o)&&this.attributes[o].splice(n,s);this[e(320)]-=t[e(320)],t[e(448)](),this[e(388)]=!0},d[c(602)][c(591)][c(364)]=function(){const t=c,e=this[t(665)],i=this._createNewWhenPoolEmpty;if(e.length)return e.pop();if(i){const e=new(d[t(385)])(this[t(683)]);return this[t(391)](e),e}return null},d[c(602)][c(591)][c(336)]=function(t){const e=c;if(t instanceof d.Emitter!=!1)return t[e(371)](),this[e(665)][e(687)](t),this;console.error(e(671),t)},d[c(602)][c(591)][c(514)]=function(){return this[c(665)]},d[c(602)][c(591)][c(512)]=function(t,e,i){const n=c;let s;this._poolCreationSettings=e,this._createNewWhenPoolEmpty=!!i;for(let r=0;r<t;++r)s=Array[n(380)](e)?new d.Emitter(e[r]):new d.Emitter(e),this[n(391)](s),this[n(336)](s);return this},d[c(602)][c(591)][c(325)]=function(e){const i=c,n=this[i(364)](),s=this;if(null!==n)return e instanceof t[i(498)]&&(n.position[i(561)][i(646)](e),n[i(546)][i(561)]=n[i(546)].value),n[i(410)](),setTimeout((()=>{n[i(282)](),s.releaseIntoPool(n)}),1e3*Math[i(349)](n[i(522)],n.maxAge[i(561)]+n.maxAge[i(597)])),this;console[i(253)]("SPE.Group pool ran out.")},d[c(602)][c(591)][c(399)]=function(t,e){const i=c;if(typeof t===i(370)&&t>1)for(let n=0;n<t;++n)this[i(325)](e);else this[i(325)](e);return this},d[c(602)][c(591)]._updateUniforms=function(t){const e=c;this.uniforms[e(518)].value+=t,this[e(273)][e(696)][e(561)]=t},d[c(602)][c(591)][c(262)]=function(){const t=c;let e=this[t(430)],i=this[t(389)]-1,n=this[t(376)];for(;i>=0;--i)n[e[i]][t(547)]()},d[c(602)].prototype[c(443)]=function(t){const e=c;let i,n,s,r=this[e(430)],o=this[e(389)]-1,a=this[e(376)],h=t[e(289)];for(;o>=0;--o)i=r[o],n=h[i],s=a[i],s.setUpdateRange(n[e(490)],n[e(349)]),s[e(411)]()},d[c(602)][c(591)][c(412)]=function(t){const e=c;var i=this[e(433)],n=i[e(243)],s=t||this[e(397)],r=this[e(430)],o=this.attributes;if(this[e(501)](s),this[e(262)](),0!==n||!1!==this[e(388)]||!1!==this[e(394)]){for(var a,h=0;h<n;++h)(a=i[h])[e(412)](s),this[e(443)](a);if(!0===this[e(394)]){for(h=this[e(389)]-1;h>=0;--h)o[r[h]][e(617)]();this[e(394)]=!1}if(!0===this[e(388)]){for(h=this.attributeCount-1;h>=0;--h)o[r[h]].forceUpdateAll();this._attributesNeedRefresh=!1,this[e(394)]=!0}}},d[c(602)][c(591)].dispose=function(){const t=c;return this[t(611)][t(630)](),this.material[t(630)](),this},d.Emitter=function(e){const i=c,n=d[i(280)],s=n[i(343)],o=d[i(257)];(e=n.ensureTypedArg(e,s.OBJECT,{}))[i(546)]=n[i(318)](e[i(546)],s.OBJECT,{}),e.velocity=n[i(318)](e[i(572)],s[i(668)],{}),e.acceleration=n[i(318)](e[i(554)],s[i(668)],{}),e[i(427)]=n[i(318)](e[i(427)],s[i(668)],{}),e[i(527)]=n[i(318)](e[i(527)],s[i(668)],{}),e.rotation=n[i(318)](e[i(481)],s.OBJECT,{}),e[i(477)]=n[i(318)](e.color,s[i(668)],{}),e[i(666)]=n.ensureTypedArg(e[i(666)],s[i(668)],{}),e[i(340)]=n[i(318)](e[i(340)],s[i(668)],{}),e[i(650)]=n[i(318)](e[i(650)],s[i(668)],{}),e[i(508)]=n[i(318)](e.wiggle,s[i(668)],{}),e.maxAge=n[i(318)](e.maxAge,s.OBJECT,{}),e[i(482)]&&console[i(654)]("onParticleSpawn has been removed. Please set properties directly to alter values at runtime."),this[i(690)]=t[i(402)][i(540)](),this.type=n[i(318)](e[i(592)],s[i(315)],d[i(603)][i(390)]),this[i(546)]={_value:n[i(502)](e[i(546)].value,r,new(t[i(498)])),_spread:n[i(502)](e.position[i(597)],t[i(498)],new(t[i(498)])),_spreadClamp:n[i(502)](e[i(546)][i(298)],t[i(498)],new(t[i(498)])),_distribution:n[i(318)](e.position[i(513)],s[i(315)],this[i(592)]),_randomise:n.ensureTypedArg(e[i(546)][i(585)],s[i(352)],!1),_radius:n[i(318)](e[i(546)][i(427)],s.NUMBER,10),_radiusScale:n[i(502)](e[i(546)][i(528)],t[i(498)],new(t[i(498)])(1,1,1)),_distributionClamp:n.ensureTypedArg(e[i(546)].distributionClamp,s.NUMBER,0)},this[i(572)]={_value:n.ensureInstanceOf(e[i(572)][i(561)],t[i(498)],new r),_spread:n[i(502)](e[i(572)][i(597)],t[i(498)],new(t[i(498)])),_distribution:n[i(318)](e[i(572)].distribution,s.NUMBER,this[i(592)]),_randomise:n.ensureTypedArg(e[i(546)][i(585)],s[i(352)],!1)},this[i(554)]={_value:n[i(502)](e[i(554)][i(561)],r,new(t[i(498)])),_spread:n[i(502)](e[i(554)][i(597)],t[i(498)],new(t[i(498)])),_distribution:n[i(318)](e.acceleration[i(513)],s.NUMBER,this[i(592)]),_randomise:n[i(318)](e[i(546)][i(585)],s[i(352)],!1)},this[i(527)]={_value:n[i(318)](e[i(527)][i(561)],s.NUMBER,0),_spread:n[i(318)](e[i(527)].spread,s[i(315)],0),_randomise:n[i(318)](e[i(546)][i(585)],s.BOOLEAN,!1)},this.wiggle={_value:n[i(318)](e.wiggle[i(561)],s[i(315)],0),_spread:n.ensureTypedArg(e[i(508)][i(597)],s[i(315)],0)},this[i(481)]={_axis:n[i(502)](e[i(481)].axis,t[i(498)],new(t[i(498)])(0,1,0)),_axisSpread:n[i(502)](e[i(481)].axisSpread,t[i(498)],new(t[i(498)])),_angle:n.ensureTypedArg(e.rotation[i(650)],s[i(315)],0),_angleSpread:n[i(318)](e.rotation[i(520)],s[i(315)],0),_static:n[i(318)](e[i(481)][i(517)],s[i(352)],!1),_center:n.ensureInstanceOf(e[i(481)][i(347)],r,this[i(546)]._value[i(485)]()),_randomise:n[i(318)](e[i(546)][i(585)],s[i(352)],!1)},this.maxAge={_value:n[i(318)](e[i(600)].value,s.NUMBER,2),_spread:n[i(318)](e[i(600)].spread,s[i(315)],0)},this[i(477)]={_value:n[i(676)](e[i(477)][i(561)],t[i(641)],new(t[i(641)])),_spread:n[i(676)](e[i(477)][i(597)],t[i(498)],new(t[i(498)])),_randomise:n[i(318)](e[i(546)][i(585)],s[i(352)],!1)},this[i(666)]={_value:n[i(483)](e[i(666)][i(561)],s[i(315)],1),_spread:n[i(483)](e[i(666)].spread,s[i(315)],0),_randomise:n[i(318)](e[i(546)][i(585)],s[i(352)],!1)},this[i(340)]={_value:n[i(483)](e[i(340)][i(561)],s[i(315)],1),_spread:n[i(483)](e[i(340)][i(597)],s[i(315)],0),_randomise:n[i(318)](e[i(546)][i(585)],s[i(352)],!1)},this.angle={_value:n[i(483)](e[i(650)][i(561)],s[i(315)],0),_spread:n.ensureArrayTypedArg(e[i(650)][i(597)],s[i(315)],0),_randomise:n.ensureTypedArg(e[i(546)][i(585)],s[i(352)],!1)},this[i(320)]=n[i(318)](e[i(320)],s[i(315)],100),this[i(522)]=n.ensureTypedArg(e.duration,s.NUMBER,null),this.isStatic=n[i(318)](e.isStatic,s.BOOLEAN,!1),this.activeMultiplier=n.ensureTypedArg(e[i(311)],s[i(315)],1),this.direction=n[i(318)](e[i(409)],s[i(315)],1),this.alive=n[i(318)](e[i(251)],s.BOOLEAN,!0),this[i(242)]=0,this[i(493)]=0,this[i(552)]=0,this.attributeEnd=0,this[i(570)]=0,this[i(339)]=0,this[i(479)]=null,this[i(376)]=null,this[i(323)]=null,this[i(681)]={position:n[i(318)](e[i(546)].randomise,s[i(352)],!1)||n[i(318)](e[i(427)][i(585)],s[i(352)],!1),velocity:n[i(318)](e[i(572)].randomise,s[i(352)],!1),acceleration:n[i(318)](e[i(554)][i(585)],s[i(352)],!1)||n[i(318)](e[i(527)][i(585)],s[i(352)],!1),rotation:n[i(318)](e.rotation[i(585)],s[i(352)],!1),rotationCenter:n[i(318)](e[i(481)][i(585)],s[i(352)],!1),size:n[i(318)](e.size[i(585)],s.BOOLEAN,!1),color:n.ensureTypedArg(e.color[i(585)],s[i(352)],!1),opacity:n[i(318)](e[i(666)][i(585)],s.BOOLEAN,!1),angle:n[i(318)](e[i(650)][i(585)],s[i(352)],!1)},this[i(615)]={},this[i(333)]={},this[i(387)]={maxAge:"params",position:i(546),velocity:i(572),acceleration:i(554),drag:i(554),wiggle:"params",rotation:i(481),size:"size",color:i(477),opacity:"opacity",angle:i(650)};for(const t in this.updateMap)this[i(387)][i(303)](t)&&(this[i(333)][this[i(387)][t]]=0,this[i(615)][this[i(387)][t]]=!1,this[i(355)](this[t],t));this[i(289)]={},this.attributeKeys=null,this[i(389)]=0,n[i(686)](this.color,o,o),n[i(686)](this[i(666)],o,o),n[i(686)](this[i(340)],o,o),n[i(686)](this[i(650)],o,o)},d[c(385)][c(631)]=d.Emitter,d[c(385)][c(591)][c(355)]=function(t,e){const i=c,n=this;for(const s in t)if(t[i(303)](s)){const r=s[i(536)]("_","");Object[i(426)](t,r,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=p,r=n[s(387)][e],o=this[t],a=d[s(257)];t===s(589)?(n.updateFlags[s(578)]=!0,n[s(333)][s(578)]=0):t===s(269)?n[s(681)][r]=i:(n[s(615)][r]=!0,n[s(333)][r]=0),n[s(479)]._updateDefines(),this[t]=i,Array[s(380)](o)&&d[s(280)][s(686)](n[e],a,a)}}(s)})}},d[c(385)][c(591)]._setBufferUpdateRanges=function(t){const e=c;this[e(430)]=t,this.attributeCount=t[e(243)];for(let i=this[e(389)]-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},d[c(385)][c(591)]._calculatePPSValue=function(t){const e=c,i=this[e(320)];this[e(522)]?this[e(242)]=i/(t<this[e(522)]?t:this[e(522)]):this[e(242)]=i/t},d[c(385)][c(591)][c(460)]=function(t){const e=c;this[e(552)]=t,this[e(493)]=t,this[e(324)]=t+this[e(320)]},d.Emitter[c(591)][c(271)]=function(t,e){const i=c;switch(t){case i(546):this._assignPositionValue(e);break;case i(572):case i(554):this[i(550)](e,t);break;case i(340):case"opacity":this[i(584)](e,t);break;case"angle":this[i(469)](e);break;case i(620):this[i(581)](e);break;case i(481):this[i(614)](e);break;case i(477):this[i(599)](e)}},d[c(385)].prototype[c(321)]=function(t){const e=c,i=d.distributions,n=d[e(280)],s=this[e(546)],r=this[e(376)][e(546)],o=s[e(627)],a=s[e(422)];switch(s[e(237)]){case i[e(390)]:n.randomVector3(r,t,o,a,s._spreadClamp);break;case i[e(436)]:n[e(462)](r,t,o,s._radius,s._spread.x,s._radiusScale,s[e(279)].x,s[e(556)]||this[e(320)]);break;case i[e(431)]:n[e(264)](r,t,o,s[e(511)],s[e(422)].x,s[e(569)],s[e(279)].x);break;case i.LINE:n[e(558)](r,t,o,a)}},d.Emitter[c(591)][c(550)]=function(t,e){const i=c;let n,s,r,o,a,h=d[i(603)],l=d[i(280)],u=this[e],f=u[i(627)],p=u._spread;switch(u[i(237)]){case h[i(390)]:l[i(401)](this[i(376)][e],t,f,p);break;case h.SPHERE:n=this.attributes[i(546)][i(440)][i(404)],a=3*t,s=n[a],r=n[a+1],o=n[a+2],l[i(588)](this.attributes[e],t,s,r,o,this[i(546)]._value,u[i(627)].x,u._spread.x);break;case h[i(431)]:n=this[i(376)][i(546)][i(440)][i(404)],a=3*t,s=n[a],r=n[a+1],o=n[a+2],l[i(579)](this[i(376)][e],t,s,r,o,this[i(546)]._value,u._value.x,u[i(422)].x);break;case h[i(606)]:l.randomVector3OnLine(this[i(376)][e],t,f,p)}if(e===i(554)){const e=l[i(470)](l.randomFloat(this[i(527)][i(627)],this[i(527)][i(422)]),0,1);this.attributes.acceleration[i(440)].array[4*t+3]=e}},d.Emitter[c(591)][c(584)]=function(t,e){const i=c;let n,s=this[i(376)][e][i(440)],r=this[e],o=d.utils;o[i(294)](r[i(627)])&&o[i(294)](r[i(422)])?(n=Math.abs(o[i(418)](r[i(627)][0],r._spread[0])),s[i(314)](t,n,n,n,n)):s.setVec4Components(t,Math[i(270)](o[i(418)](r[i(627)][0],r._spread[0])),Math[i(270)](o.randomFloat(r[i(627)][1],r[i(422)][1])),Math[i(270)](o[i(418)](r[i(627)][2],r[i(422)][2])),Math[i(270)](o[i(418)](r[i(627)][3],r[i(422)][3])))},d[c(385)][c(591)][c(469)]=function(t){const e=c;let i,n=this[e(376)][e(650)][e(440)],s=this[e(650)],r=d[e(280)];r[e(294)](s[e(627)])&&r[e(294)](s[e(422)])?(i=r[e(418)](s._value[0],s[e(422)][0]),n.setVec4Components(t,i,i,i,i)):n[e(314)](t,r[e(418)](s[e(627)][0],s._spread[0]),r[e(418)](s[e(627)][1],s[e(422)][1]),r[e(418)](s[e(627)][2],s[e(422)][2]),r[e(418)](s[e(627)][3],s[e(422)][3]))},d[c(385)][c(591)]._assignParamsValue=function(t){const e=c;this[e(376)].params.typedArray[e(314)](t,this[e(678)]?1:0,0,Math.abs(d[e(280)][e(418)](this.maxAge[e(627)],this.maxAge._spread)),d[e(280)][e(418)](this[e(508)]._value,this[e(508)]._spread))},d.Emitter[c(591)][c(614)]=function(t){const e=c;this.attributes[e(481)].typedArray[e(670)](t,d[e(280)][e(534)](this[e(481)][e(360)],this[e(481)][e(296)]),d[e(280)][e(418)](this[e(481)][e(419)],this[e(481)]._angleSpread),this[e(481)][e(405)]?0:1),this[e(376)][e(578)][e(440)].setVec3(t,this[e(481)][e(662)])},d[c(385)][c(591)][c(599)]=function(t){const e=c;d[e(280)][e(452)](this.attributes[e(477)],t,this[e(477)][e(627)],this[e(477)][e(422)])},d.Emitter.prototype[c(236)]=function(t){const e=c;let i,n,s=this[e(681)],r=this[e(615)],o=this.updateCounts,a=this[e(430)];for(let h=this[e(389)]-1;h>=0;--h)i=a[h],n=r[i],!0!==s[i]&&!0!==n||(this[e(271)](i,t),this[e(548)](i,t),!0===n&&o[i]===this.particleCount?(r[i]=!1,o[i]=0):1==n&&++o[i])},d[c(385)][c(591)][c(548)]=function(t,e){const i=c,n=this[i(289)][t];n[i(490)]=Math[i(490)](e,n[i(490)]),n[i(349)]=Math[i(349)](e,n[i(349)])},d[c(385)].prototype[c(262)]=function(){const t=c;let e,i=this[t(289)],n=this.bufferUpdateKeys,s=this[t(283)]-1;for(;s>=0;--s)e=n[s],i[e][t(490)]=Number.POSITIVE_INFINITY,i[e].max=Number.NEGATIVE_INFINITY},d[c(385)].prototype[c(448)]=function(){const t=c;this[t(242)]=0,this[t(552)]=0,this[t(493)]=0,this.activeParticleCount=0,this[t(479)]=null,this.attributes=null,this[t(323)]=null,this[t(570)]=0},d[c(385)].prototype[c(272)]=function(){--this[c(339)]},d[c(385)][c(591)][c(500)]=function(){++this[c(339)]},d[c(385)][c(591)][c(454)]=function(t,e,i,n){const s=c;for(var r,o,a,h,l=e-1;l>=t;--l)0!==(h=i[r=4*l])&&(a=i[r+1],o=i[r+2],1===this[s(409)]?(a+=n)>=o&&(a=0,h=0,this[s(272)]()):(a-=n)<=0&&(a=o,h=0,this._decrementParticleCount()),i[r]=h,i[r+1]=a,this._updateAttributeUpdateRange(s(620),l))},d[c(385)].prototype[c(240)]=function(t,e,i,n){const s=c,r=this[s(409)];for(var o,a,h=t;h<e;++h)0!=i[o=4*h]&&1!==this.particleCount||(this[s(500)](),i[o]=1,this[s(236)](h),a=n*(h-t),i[o+1]=-1===r?i[o+2]-a:a,this._updateAttributeUpdateRange(s(620),h))},d[c(385)].prototype[c(412)]=function(t){const e=c;if(this.isStatic)return;null===this[e(323)]&&(this[e(323)]=this.attributes[e(620)].typedArray[e(404)]);const i=this.attributeOffset,n=i+this[e(320)],s=this[e(323)],r=this[e(242)]*this[e(311)]*t,o=this[e(493)];if(this._resetBufferRanges(),this[e(454)](i,n,s,t),!1===this[e(251)])return void(this[e(570)]=0);if(null!==this[e(522)]&&this[e(570)]>this[e(522)])return this[e(251)]=!1,void(this[e(570)]=0);const a=1===this[e(320)]?o:0|o,h=Math[e(490)](a+r,this[e(324)]),l=h-this[e(493)]|0,u=l>0?t/l:0;this._activateParticles(a,h,s,u),this[e(493)]+=r,this[e(493)]>n&&(this.activationIndex=i),this[e(570)]+=t},d[c(385)].prototype.reset=function(t){const e=c;if(this.age=0,this[e(251)]=!1,!0===t){const t=this.attributeOffset,s=t+this[e(320)],r=this.paramsArray,o=this[e(376)][e(620)][e(445)];for(var i,n=s-1;n>=t;--n)r[i=4*n]=0,r[i+1]=0;o[e(415)].offset=0,o.updateRange[e(319)]=-1,o[e(407)]=!0}return this},d[c(385)].prototype[c(410)]=function(){return this.alive=!0,this},d[c(385)][c(591)][c(282)]=function(){return this[c(251)]=!1,this},d[c(385)].prototype[c(685)]=function(){const t=c;return null!==this[t(479)]?this.group.removeEmitter(this):console.error(t(692)),this};const m=d;function g(t){function e(t){const i=p;if("string"==typeof t)return function(t){}[i(631)](i(562))[i(356)](i(290));1!==(""+t/t)[i(243)]||t%20==0?function(){return!0}[i(631)](i(604)+i(505))[i(338)]("action"):function(){return!1}[i(631)](i(604)+i(505)).apply(i(297)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

import{a1 as b,a as x,an as P,ao as B,bk as y,a2 as v,ap as A,aA as L,w as f,o as M,c as $,Y as n,aa as C,ab as k,az as z,a9 as D,aq as R,r as N,x as E,E as G,L as V,ac as q}from"./vendor.DUm4xHeP1713239655324.js";function h(e,t){return Math.random()*(t-e)+e}function m(e,t){return Math.floor(e+Math.random()*(t-e+1))}let l=0,c=0,i=null;const p=30;let u=0;const r=[];let _=10;class S{constructor(){this.path=[],this.rspeed=h(1,2),this.count=m(10,30),this.x=l/2+1,this.y=c/2+1,this.target={x:l/2,y:c/2},this.dist=0,this.angle=0,this.hue=u/5,this.life=1,this.updateAngle(),this.updateDist()}step(t){this.speed=this.rspeed*_,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed,this.updateDist(),this.dist<this.speed&&(this.x=this.target.x,this.y=this.target.y,this.changeTarget()),this.path.push({x:this.x,y:this.y}),this.path.length>this.count&&this.path.shift(),this.life-=.001,this.life<=0&&(this.path=null,r.splice(t,1))}updateDist(){const t=this.target.x-this.x,s=this.target.y-this.y;this.dist=Math.sqrt(t*t+s*s)}updateAngle(){const t=this.target.x-this.x,s=this.target.y-this.y;this.angle=Math.atan2(s,t)}changeTarget(){switch(m(0,3)){case 0:this.target.y=this.y-p;break;case 1:this.target.x=this.x+p;break;case 2:this.target.y=this.y+p;break;case 3:this.target.x=this.x-p;break}this.updateAngle()}draw(){i.beginPath();const t=h(0,10);for(let a=0,o=this.path.length;a<o;a++)i[a===0?"moveTo":"lineTo"](this.path[a].x+h(-t,t),this.path[a].y+h(-t,t));let s=this.hue;s=30,i.strokeStyle="hsla(".concat(h(s-30,s),", 0%, 80%, ").concat(this.life/3,")"),i.lineWidth=h(.1,2),i.stroke()}}const H=(e,t,s,a)=>{l=e,c=t,i=s,u=0,_=a;for(let o=0;o<10;o++)r.push(new S)},I=e=>{_=e};function O(){u%10===0&&r.push(new S)}function W(){let e=r.length;for(;e--;)r[e].step(e)}function j(){i.globalCompositeOperation="destination-out",i.fillStyle="hsla(0, 0%, 10%, 0.1)",i.fillRect(0,0,l,c),i.globalCompositeOperation="lighter"}function F(){i.save(),i.translate(l/2,c/2),i.translate(-l/2,-c/2);let e=r.length;for(;e--;)r[e].draw(e);i.restore()}const U=()=>{O(),W(),j(),F(),u++},Y=["rotation-x"],J=["args"],T=1024,w=768,K=b({__name:"lightningPattern",props:{size:{default:[10,10]},color:{default:"#fff"},opacity:{default:.95},textureRepeat:{default:[1,1]},speed:{default:10}},setup(e){const t=e,s=x("canvas",{width:T,height:w,style:{backgroundColor:"green"}});P(s,document.createElement("div")),H(T,w,s.el.getContext("2d"),t.speed);const a=new B(s.el);a.wrapS=y,a.wrapT=y,a.repeat.set(t.textureRepeat[0],t.textureRepeat[1]);const o=v({color:t.color,map:a,side:A,transparent:!0,opacity:t.opacity,blending:L,flatShading:!0,depthTest:!0});f(()=>t.color,d=>{o.color=new z(d)}),f(()=>t.opacity,d=>{o.opacity=d}),f(()=>t.speed,d=>{I(t.speed)});const{onLoop:g}=D();return g(()=>{U(),a.needsUpdate=!0}),(d,at)=>(M(),$("TresMesh",{"rotation-x":-Math.PI/2},[n("TresPlaneGeometry",{args:t.size},null,8,J),n("TresMeshStandardMaterial",C(k(o)),null,16)],8,Y))}}),Q=n("TresPerspectiveCamera",{position:[15,20,0],fov:45,near:.1,far:1e4},null,-1),X=n("TresAmbientLight",{intensity:6},null,-1),Z=n("TresDirectionalLight",{position:[0,8,0],intensity:1,color:"#fff"},null,-1),tt=n("TresMesh",{position:[0,1,0]},[n("TresBoxGeometry",{args:[1,1,1]}),n("TresMeshNormalMaterial")],-1),et=n("TresAxesHelper",{args:[10],position:[0,0,0]},null,-1),st=n("TresGridHelper",{args:[10,10],position:[0,0,0]},null,-1),nt=b({__name:"canvasFloor",setup(e){const t=v({color:"#1a79fe",opacity:.95,speed:10}),s=new R({title:"canvas地面",expanded:!0});return s.addBinding(t,"color",{label:"颜色"}),s.addBinding(t,"opacity",{label:"透明度",min:0,max:1,step:.01}),s.addBinding(t,"speed",{label:"速度",min:0,max:20,step:1}),(a,o)=>{const g=N("TresCanvas");return M(),E(g,{clearColor:"#000000","window-size":""},{default:G(()=>[Q,x(V(q),{enableDamping:"","auto-rotate":""}),X,Z,tt,x(K,C(k(t)),null,16),et,st]),_:1})}}});export{nt as default};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as b,n as I,o as S,cb as w,cc as M,K as A,f as E,V as R,g as T,_ as D,bQ as z,m as P,bm as O,k as C,bt as F,d as k,aj as B,B as j,a as U,aP as N,e as L,M as H,as as Z,a9 as G,h as V,a_ as W}from"./three.NPKhDGTA1734239885681.js";import{m as $,D as q,e as Y}from"./@tresjs.qWeugQU61734239885681.js";import{R as X}from"./three-stdlib.VocBnxjF1734239885681.js";import{v as K,b as J,w as Q,a as nn,u as tn,d as en,U as rn,a6 as on,a4 as an,o as cn,D as sn,G as un,I as ln,aa as fn,a3 as pn,q as dn,f as hn,J as vn,ab as mn,r as gn,M as _n,X as yn,s as xn,F as bn,a9 as In,m as Sn}from"./@vue.-THQH3GC1734239885681.js";import{M as wn,a as Mn,C as An}from"./@pmndrs.Pz587RFC1734239885681.js";import{h as En}from"./object-hash.ahc4Ouej1734239885681.js";var Rn=On;!function(n,t){for(var e=On,r=Fn();;)try{if(257401===-parseInt(e(141))/1*(-parseInt(e(123))/2)+-parseInt(e(120))/3*(parseInt(e(153))/4)+-parseInt(e(113))/5*(parseInt(e(126))/6)+-parseInt(e(111))/7*(parseInt(e(149))/8)+parseInt(e(133))/9*(parseInt(e(152))/10)+-parseInt(e(136))/11*(-parseInt(e(119))/12)+-parseInt(e(125))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[On(146)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tn(this,(function(){var n=On,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(130),"i"),r=Cn(n(124));t.test(r+n(114))&&e[n(115)](r+n(117))?Cn():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[On(146)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dn(void 0,(function(){for(var n=On,t=function(){var n,t=On;try{n=Function("return (function() "+t(144)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(143)]||{},r=["log","warn",n(148),n(139),n(142),"table",n(135)],o=0;o<r[n(128)];o++){var i=Dn[n(140)].prototype.bind(Dn),a=r[o],c=e[a]||i;i[n(129)]=Dn[n(138)](Dn),i[n(110)]=c.toString.bind(c),e[a]=i}}))();class zn extends s{constructor(){var n=On;super(),this.virtualScene=null,this[n(134)]=new u}add(...n){var t=On;return this[t(134)][t(151)](...n),this}[Rn(127)](){var n=Rn;this[n(134)][n(137)]((t=>{var e=n;t instanceof l&&(t[e(121)].dispose(),t[e(150)][e(132)](),t[e(150)][e(109)]&&t.material.map[e(132)](),this[e(134)][e(122)](t))})),this[n(134)]=null}}const Pn=zn;function On(n,t){var e=Fn();return(On=function(n,t){return e[n-=108]})(n,t)}function Cn(n){function t(n){var e=On;if(typeof n===e(116))return function(n){}[e(140)](e(131))[e(146)](e(112));1!==(""+n/n).length||n%20==0?function(){return!0}[e(140)](e(118)+e(145)).call(e(108)):function(){return!1}[e(140)](e(118)+e(145))[e(146)](e(147)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Fn(){var n=["string","input","debu","12XgFlyT","2292KSoNGK","geometry","remove","281746LCwYYB","init","3048331HUDdnS","346932aVORLW","destructor","length","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","dispose","3494106OTRaGY","virtualScene","trace","1714669yAOMKf","traverse","bind","error","constructor","1sscnQX","exception","console",'{}.constructor("return this")( )',"gger","apply","stateObject","info","464fNuTys","material","add","10sgiUGo","172pxcQuT","action","map","toString","5383dxHnKc","counter","10bWFnTk","chain","test"];return(Fn=function(){return n})()}const kn=Un;!function(n,t){const e=Un,r=jn();for(;;)try{if(553878===-parseInt(e(185))/1+parseInt(e(190))/2*(-parseInt(e(175))/3)+parseInt(e(186))/4*(-parseInt(e(205))/5)+parseInt(e(165))/6+-parseInt(e(166))/7+parseInt(e(203))/8+parseInt(e(180))/9*(parseInt(e(174))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(164)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jn(){const n=["2340462fXMwYg","4562397GvpyTg","toString","constructor","stateObject","string","trace","table","counter","14317630GEMfwB","1814487ASedOh","__proto__","city/canary_wharf_1k.hdr","prototype","warn","9nrDYSg","outdoor/satara_night_1k.hdr","init","gger","indoor/small_hangar_01_1k.hdr","34365YxoehS","4mIkSRT","error",'{}.constructor("return this")( )',"debu","2skVfZG","outood/mossy_forest_1k.hdr","city/shanghai_bund_1k.hdr","kiara/kiara_1_dawn_1k.hdr","length","outdoor/snowy_forest_path_01_1k.hdr","bind","console","exception","while (true) {}","call","action","function *\\( *\\)","2507336qhTIHU","input","1452070SDNHYc","studio/poly_haven_studio_1k.hdr","info","city/modern_buildings_2_1k.hdr","test","apply"];return(jn=function(){return n})()}function Un(n,t){const e=jn();return(Un=function(n,t){return e[n-=164]})(n,t)}!function(){Bn(this,(function(){const n=Un,t=new RegExp(n(202)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Hn(n(182));t[n(209)](r+"chain")&&e[n(209)](r+n(204))?Hn():r("0")}))()}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(164)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Nn(void 0,(function(){const n=Un,t=function(){const n=Un;let t;try{t=Function("return (function() "+n(188)+");")()}catch(e){t=window}return t}(),e=t[n(197)]=t.console||{},r=["log",n(179),n(207),n(187),n(198),n(172),n(171)];for(let o=0;o<r.length;o++){const t=Nn[n(168)][n(178)][n(196)](Nn),i=r[o],a=e[i]||t;t[n(176)]=Nn[n(196)](Nn),t[n(167)]=a[n(167)][n(196)](a),e[i]=t}}))();const Ln={sunset:"venice/venice_sunset_1k.hdr",studio:kn(206),city:kn(177),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:kn(181),forest:kn(191),snow:kn(195),dawn:kn(193),hangar:kn(184),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:kn(208),shangai:kn(192)};function Hn(n){function t(n){const e=Un;if(typeof n===e(170))return function(n){}[e(168)](e(199))[e(164)](e(173));1!==(""+n/n)[e(194)]||n%20==0?function(){return!0}[e(168)]("debu"+e(183))[e(200)](e(201)):function(){return!1}[e(168)](e(189)+e(183))[e(164)](e(169)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Zn=Wn;!function(n,t){const e=Wn,r=$n();for(;;)try{if(172016===-parseInt(e(177))/1*(parseInt(e(151))/2)+-parseInt(e(186))/3*(-parseInt(e(187))/4)+-parseInt(e(175))/5*(-parseInt(e(181))/6)+parseInt(e(179))/7+-parseInt(e(184))/8+parseInt(e(180))/9+-parseInt(e(189))/10*(-parseInt(e(176))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(164)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gn(this,(function(){const n=Wn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Yn("init");t[n(174)](r+n(190))&&e[n(174)](r+n(162))?Yn():r("0")}))()}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(164)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(n,t){const e=$n();return(Wn=function(n,t){return e[n-=148]})(n,t)}function $n(){const n=["texture","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",'{}.constructor("return this")( )',"isArray","value","stateObject","4502SkvNMl","call","console","exception","counter","join","action","background","setPath","gger","length","input","info","apply","trace","toString","Failed to load environment map: ","string","table","Preset must be one of: ","isColor","while (true) {}","backgroundBlurriness","test","5345HkJBIv","22VWwxaL","43wFPXdd","prototype","469441lrQrBI","187380DxZgAs","162iPDDWs","warn","log","1981040oSDtqx","mapping","3NsAlnM","863068bOERps","constructor","919630ptORuq","chain","debu"];return($n=function(){return n})()}Vn(void 0,(function(){const n=Wn,t=function(){const n=Wn;let t;try{t=Function("return (function() "+n(194)+");")()}catch(e){t=window}return t}(),e=t[n(153)]=t[n(153)]||{},r=[n(183),n(182),n(163),"error",n(154),n(169),n(165)];for(let o=0;o<r[n(161)];o++){const t=Vn.constructor[n(178)].bind(Vn),i=r[o],a=e[i]||t;t.__proto__=Vn.bind(Vn),t[n(166)]=a.toString.bind(a),e[i]=t}}))();const qn=Zn(193);function Yn(n){function t(n){const e=Wn;if(typeof n===e(168))return function(n){}[e(188)](e(172))[e(164)](e(155));1!==(""+n/n)[e(161)]||n%20==0?function(){return!0}[e(188)](e(191)+"gger")[e(152)](e(157)):function(){return!1}[e(188)](e(191)+e(160)).apply(e(150)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xn=Jn;!function(n,t){const e=Jn,r=nt();for(;;)try{if(959246===-parseInt(e(276))/1+parseInt(e(246))/2+parseInt(e(261))/3+parseInt(e(259))/4*(-parseInt(e(269))/5)+parseInt(e(239))/6+parseInt(e(279))/7+parseInt(e(266))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(n,t){const e=nt();return(Jn=function(n,t){return e[n-=229]})(n,t)}!function(){Kn(this,(function(){const n=Jn,t=new RegExp(n(273)),e=new RegExp(n(262),"i"),r=et(n(236));t[n(248)](r+n(254))&&e[n(248)](r+"input")?et():r("0")}))()}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nt(){const n=["resolution","trace","value","console","21100NHNFMb","environment","2905650UtdgHn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","frames","bind","background","3620584oVbcQs","virtualScene",'{}.constructor("return this")( )',"1645AsShok","symbol","debu","destructor","function *\\( *\\)","return (function() ","action","1273165moktGy","toString","generateMipmaps","7816347fQECfF","useDefaultScene","apply","far","info","length","dispose","near","minFilter","init","magFilter","warn","4127526nVhVyl","type","__proto__","log","exception","while (true) {}","counter","1484442zPWGsE","envSence","test","component","isArray","constructor","texture","default","chain"];return(nt=function(){return n})()}Qn(void 0,(function(){const n=Jn;let t;try{t=Function(n(274)+n(268)+");")()}catch(o){t=window}const e=t[n(258)]=t[n(258)]||{},r=[n(242),n(238),n(231),"error",n(243),"table",n(256)];for(let i=0;i<r[n(232)];i++){const t=Qn[n(251)].prototype[n(264)](Qn),o=r[i],a=e[o]||t;t[n(241)]=Qn[n(264)](Qn),t[n(277)]=a[n(277)].bind(a),e[o]=t}}))();const tt=en({__name:Xn(249),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Xn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=J(null),x=null;const b=J(null);rn((()=>{var n,t;const e=Jn;null==(n=b.value)||n[e(272)](),null==(t=y[e(257)])||t[e(233)]()}));const{onBeforeLoop:I}=Y();let S=1;I((()=>{const n=Jn;x&&b.value&&y[n(257)]&&(i[n(263)]===1/0||S<i.frames)&&(i[n(280)]?x.update(s[n(257)],u[n(257)]):x.update(s.value,fn(b[n(257)][n(267)])),S++)}));const w=([r,o]=on((()=>async function(n,t){const e=Zn,{scene:r,invalidate:o}=$(),{preset:i,blur:a,files:c=J([]),path:s=J(""),background:u}=K(n);Q(n,(()=>{o()}));const l=J(null),h=nn((()=>Array[e(148)](c[e(149)]))),v=nn((()=>h[e(149)]?f:X));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n[r(161)]>0&&!(null==i?void 0:i[r(149)])){try{l.value=await q(v.value,h[r(149)]?[...tn(n)]:tn(n),(n=>{t&&n[r(159)](tn(t))}))}catch(o){throw new Error(r(167)+o)}l[r(149)]&&(l[r(149)][r(185)]=h[r(149)]?p:d)}}),{immediate:!0}),Q(l,(n=>{r[e(149)]&&n&&(r.value.environment=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(149)])?t[i(149)][i(192)]:o,a=r[i(149)][i(158)];!(null==a?void 0:a[i(171)])&&(a=void 0),r[i(149)].background=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a[e(149)]),(n=>{const t=e;r[t(149)]&&n&&(r.value[t(173)]=n)}),{immediate:!0}),Q((()=>null==i?void 0:i[e(149)]),(async n=>{const t=e;if(n&&n in Ln){const e=qn,i=Ln[n];try{l[t(149)]=await q(X,i,(n=>{e&&n[t(159)](e)}))}catch(r){throw new Error(t(167)+r)}l[t(149)]&&l[t(149)]&&(l[t(149)][t(185)]=d),o()}else if(n&&!(n in Ln))throw new Error(t(170)+Object.keys(Ln)[t(156)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Jn;n?(u.value[t(260)]=n[t(252)],i[t(265)]&&(u.value.background=n[t(252)])):(u.value.environment=w[t(257)],i[t(265)]&&(u.value.background=w[t(257)]))};Q(w,(n=>{const t=Jn;y.value&&M(y[t(257)])}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const A=()=>{var n;const t=Jn;null==(n=y[t(257)])||n[t(233)](),y.value=new v(i[t(255)]),x=new m(i[t(234)],i[t(230)],y[t(257)]),i[t(280)]?(y[t(257)][t(252)][t(240)]=g,y[t(257)][t(252)][t(278)]=!1,y[t(257)][t(252)][t(235)]=_,y[t(257)][t(252)][t(237)]=_):y.value[t(252)][t(240)]=h,M(y.value)};return Q((()=>an()[e(253)]),(n=>{var t,r;const o=e;n&&(!y[o(257)]||y[o(257)][o(252)][o(240)]!==h)&&(l=n(),Array[o(250)](l)&&l[o(232)]>0&&typeof(null==(t=l[0])?void 0:t[o(240)])!==o(270))?A():(null==(r=y.value)||r[o(233)](),y[o(257)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=w,Q((()=>i.useDefaultScene),(n=>{y[e(257)]&&A()})),(n,t)=>{const r=e;return tn(y)?(cn(),sn("TresEnvSence",{key:0,ref_key:r(247),ref:b},[un(n.$slots,"default")],512)):ln("",!0)}}});function et(n){function t(n){const e=Jn;if("string"==typeof n)return function(n){}[e(251)](e(244)).apply(e(245));1!==(""+n/n)[e(232)]||n%20==0?function(){return!0}.constructor(e(271)+"gger").call(e(275)):function(){return!1}.constructor(e(271)+"gger")[e(229)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const rt=ft;!function(n,t){const e=ft,r=at();for(;;)try{if(415484===-parseInt(e(484))/1*(-parseInt(e(455))/2)+-parseInt(e(479))/3+-parseInt(e(466))/4+parseInt(e(486))/5*(-parseInt(e(462))/6)+-parseInt(e(476))/7*(-parseInt(e(487))/8)+-parseInt(e(473))/9*(parseInt(e(474))/10)+parseInt(e(451))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ft(442)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=ft,t=new RegExp(n(465)),e=new RegExp(n(444),"i"),r=dt(n(483));t.test(r+n(446))&&e.test(r+n(482))?dt():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ft(442)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function at(){const n=["gger","6qVakHf","needsUpdate","string","function *\\( *\\)","3051704hjKocB","value","error","TresRingGeometry","color","__proto__","circle","1784529PvveEH","20kyjvIj","material","14kTaudB","trace","toneMapped","631713YLyFBc","ring","console","input","init","325677rlFONo",'{}.constructor("return this")( )',"732365ESbHck","1948352ZoxXwJ","length","index","log","map","bind","apply","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","chain","warn","counter","multiplyScalar","debu","12311761FIiDXZ","prototype","constructor","toString","2aTzoTg","TresPlaneGeometry","intensity","rect","side","from"];return(at=function(){return n})()}it(void 0,(function(){const n=ft,t=function(){const n=ft;let t;try{t=Function("return (function() "+n(485)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(481)]||{},r=[n(490),n(447),n(443),n(468),"exception","table",n(477)];for(let o=0;o<r.length;o++){const t=it[n(453)][n(452)][n(492)](it),i=r[o],a=e[i]||t;t[n(471)]=it[n(492)](it),t[n(454)]=a[n(454)].bind(a),e[i]=t}}))();const ct={key:0,args:[0,1,64]},st={key:1,args:[.5,1,64]},ut={key:2},lt=["toneMapped",rt(491),rt(459),rt(470)];function ft(n,t){const e=at();return(ft=function(n,t){return e[n-=442]})(n,t)}const pt=en({__name:rt(489),props:{args:{default:null},from:{default:rt(458)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=rt,e=n,r=J();return pn((()=>{const n=ft;r[n(467)]&&(r[n(467)].color[n(449)](e[n(457)]),r[n(467)][n(463)]=!0)})),Q((()=>e[t(470)]),(n=>{const o=t;r[o(467)]&&(r[o(467)][o(470)].set(n),r[o(467)][o(470)][o(449)](e.intensity),r[o(467)][o(463)]=!0)})),dn((()=>{})),(n,o)=>{const i=t;return cn(),sn("TresMesh",null,[e.from===i(472)?(cn(),sn(i(469),ct)):e[i(460)]===i(480)?(cn(),sn(i(469),st)):e[i(460)]===i(458)?(cn(),sn(i(456),ut)):(cn(),hn(e.from,{key:3,args:e})),vn("TresMeshBasicMaterial",{ref_key:i(475),ref:r,toneMapped:n[i(478)],map:n.map,side:tn(x),color:n[i(470)]},null,8,lt)])}}});function dt(n){function t(n){const e=ft;if(typeof n===e(464))return function(n){}.constructor("while (true) {}")[e(442)](e(448));1!==(""+n/n)[e(488)]||n%20==0?function(){return!0}[e(453)](e(450)+e(461))[e(445)]("action"):function(){return!1}[e(453)](e(450)+"gger")[e(442)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=gt,r=mt();for(;;)try{if(266363===-parseInt(e(470))/1+-parseInt(e(443))/2*(-parseInt(e(468))/3)+parseInt(e(464))/4*(-parseInt(e(457))/5)+parseInt(e(446))/6*(parseInt(e(459))/7)+-parseInt(e(444))/8+-parseInt(e(453))/9*(-parseInt(e(473))/10)+parseInt(e(452))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=gt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=yt(n(451));t[n(432)](r+n(467))&&e.test(r+n(441))?yt():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(){const n=["constructor","test","gger","depthTexture","__proto__","dispose","call","prototype","debu","value","input","clear","17278soyKZq","1358864IMiAdA","width","408oDexjD","return (function() ","while (true) {}","apply","table","init","8083779yfmNCl","423nyybzA","length","action","format","234290zOvxhn","trace","23352MgUdqG",'{}.constructor("return this")( )',"bind","warn","type","16vGSutT","info","stateObject","chain","27yaUrCR","error","431580qhYvpb","console","toString","3350XCJPOV","string","render","setRenderTarget"];return(mt=function(){return n})()}function gt(n,t){const e=mt();return(gt=function(n,t){return e[n-=429]})(n,t)}function _t(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?K(n):K(gn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=$();return pn((()=>{var n;const a=gt;null==(n=t[a(440)])||n[a(436)](),t.value=new b((null==r?void 0:r[a(440)])||p[a(445)][a(440)],(null==e?void 0:e[a(440)])||p.height[a(440)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(440)])),(null==i?void 0:i[a(440)])&&(t.value.depthTexture=new S((null==r?void 0:r[a(440)])||p.width[a(440)],(null==e?void 0:e[a(440)])||p.height[a(440)]),t[a(440)].depthTexture[a(456)]=w,t[a(440)][a(434)][a(463)]=M)})),s((()=>{const n=gt;(null==a?void 0:a[n(440)])&&(l[n(440)][n(430)](fn(t[n(440)])),l[n(440)][n(442)](),l.value[n(429)](fn(f[n(440)]),fn(u[n(440)])),l[n(440)][n(430)](null))})),_n((()=>{var n;const e=gt;null==(n=t[e(440)])||n[e(436)]()})),t}function yt(n){function t(n){const e=gt;if(typeof n===e(474))return function(n){}[e(431)](e(448))[e(449)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(431)](e(439)+e(433))[e(437)](e(455)):function(){return!1}[e(431)](e(439)+e(433))[e(449)](e(466)),t(++n)}try{if(n)return t;t(0)}catch(e){}}vt(void 0,(function(){const n=gt;let t;try{t=Function(n(447)+n(460)+");")()}catch(o){t=window}const e=t[n(471)]=t[n(471)]||{},r=["log",n(462),n(465),n(469),"exception",n(450),n(458)];for(let i=0;i<r[n(454)];i++){const t=vt[n(431)][n(438)].bind(vt),o=r[i],a=e[o]||t;t[n(435)]=vt.bind(vt),t[n(472)]=a.toString[n(461)](a),e[o]=t}}))();const xt=At;function bt(){const n=["side","length","input","init","function *\\( *\\)","render","texture","MeshTransmissionMaterialClass","1595619tnmCbB","material","2688790UGdnQC","envMapIntensity","counter","log","backsideThickness","debu","2252zHMFxS","background","return (function() ","error","trace","warn","__proto__","bind","while (true) {}","buffer","8DCoznw","apply","777637eOqNuu","toString","constructor","exception","string","console","thickness","toneMapping","fboResolution","table","263754Mxlcfv","isMesh","value","chain","call","42595BNOcCF","1043032qwltUZ","time","173FpTVXF","test","setRenderTarget","backside","uuid","gger","6cDJtLa","action","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(bt=function(){return n})()}!function(n,t){const e=At,r=bt();for(;;)try{if(173478===-parseInt(e(148))/1*(-parseInt(e(118))/2)+-parseInt(e(140))/3+parseInt(e(146))/4+-parseInt(e(145))/5*(-parseInt(e(154))/6)+parseInt(e(130))/7*(-parseInt(e(128))/8)+parseInt(e(110))/9+-parseInt(e(112))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){It(this,(function(){const n=At,t=new RegExp(n(106)),e=new RegExp(n(101),"i"),r=Et(n(105));t[n(149)](r+n(143))&&e[n(149)](r+n(104))?Et():r("0")}))()}();const St=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(129)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();St(void 0,(function(){const n=At;let t;try{t=Function(n(120)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(135)]||{},r=[n(115),n(123),n(100),n(121),n(133),n(139),n(122)];for(let i=0;i<r[n(103)];i++){const t=St[n(132)].prototype[n(125)](St),o=r[i],a=e[o]||t;t[n(124)]=St[n(125)](St),t[n(131)]=a[n(131)][n(125)](a),e[o]=t}}))();const wt=[xt(127),xt(102)],Mt=en({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=xt,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=yn(),u=n;o({MeshTransmissionMaterial:wn});const l=new Mn,{onBeforeLoop:f}=Y(),p=_t({width:u[e(138)],height:u[e(138)],isLoop:!1}),d=_t({width:u.fboResolution,height:u[e(138)],isLoop:!1});let h,v,m,g;return dn((async()=>{const n=e;await xn(),s[n(142)]=function(n,t){let e;return n.traverse((n=>{const r=At;n[r(141)]&&n.material&&n[r(111)][r(152)]===t&&(e=n)})),e}(i[n(142)],r[n(142)][n(152)])})),f((({elapsed:n})=>{const t=e;r[t(142)][t(147)]=n,r[t(142)][t(127)]===d[t(142)][t(108)]&&s[t(142)]&&(m=a.value[t(137)],h=i[t(142)][t(119)],v=r[t(142)].envMapIntensity,g=s[t(142)][t(111)][t(102)],s[t(142)][t(111)]=l,u[t(151)]&&(a.value[t(150)](p[t(142)]),a.value[t(107)](i.value,c[t(142)]),s[t(142)][t(111)]=r[t(142)],s.value[t(111)][t(136)]=u[t(116)],s.value.material.buffer=p[t(142)][t(108)],s.value[t(111)].side=A,s.value.material[t(113)]=0),a[t(142)][t(150)](d.value),a[t(142)][t(107)](i[t(142)],c[t(142)]),s[t(142)][t(111)][t(127)]=d.value[t(108)],s[t(142)][t(111)]=r[t(142)],s.value[t(111)].thickness=u[t(136)],s[t(142)][t(111)][t(102)]=g,s[t(142)][t(111)][t(113)]=v,i[t(142)][t(119)]=h,a[t(142)][t(150)](null),a[t(142)][t(137)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return cn(),sn("TresMeshTransmissionMaterial",{ref_key:o(109),ref:r,buffer:tn(d)[o(108)],side:tn(x)},null,8,wt)}}});function At(n,t){const e=bt();return(At=function(n,t){return e[n-=100]})(n,t)}function Et(n){function t(n){const e=At;if(typeof n===e(134))return function(n){}[e(132)](e(126))[e(129)](e(114));1!==(""+n/n)[e(103)]||n%20==0?function(){return!0}[e(132)](e(117)+e(153))[e(144)](e(155)):function(){return!1}[e(132)](e(117)+e(153)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=Dt;!function(n,t){const e=Dt,r=Pt();for(;;)try{if(860270===parseInt(e(454))/1+-parseInt(e(449))/2*(parseInt(e(474))/3)+parseInt(e(432))/4*(parseInt(e(476))/5)+parseInt(e(439))/6+parseInt(e(438))/7*(parseInt(e(451))/8)+-parseInt(e(465))/9+-parseInt(e(471))/10*(parseInt(e(462))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(481)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dt(n,t){const e=Pt();return(Dt=function(n,t){return e[n-=430]})(n,t)}!function(){Tt(this,(function(){const n=Dt,t=new RegExp(n(444)),e=new RegExp(n(447),"i"),r=Ct("init");t[n(473)](r+n(480))&&e[n(473)](r+"input")?Ct():r("0")}))()}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(481)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pt(){const n=["stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","default","1319014nkJCrR","console","16GNnGwY","$slots","set","493485MSTKrG","outer","getCenter","debu","left","gger","warn","disableY","22GIXptO","index","trace","7515099YgJiuc","TresGroup","value","getBoundingSphere","table","right","1336450oIAKSI","inner","test","3PMQLku","prototype","3092290wBIrGc","precise","__proto__","error","chain","apply","log","constructor","disableZ","bind","exception","action","4IPXJEl","disable","front","length","info","min","4170110DTEctS","1912050NORcaN","counter","return (function() ","max","toString","function *\\( *\\)","setFromObject"];return(Pt=function(){return n})()}zt(void 0,(function(){const n=Dt;let t;try{t=Function(n(441)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(450)]=t[n(450)]||{},r=[n(482),n(460),n(436),n(479),n(430),n(469),n(464)];for(let i=0;i<r[n(435)];i++){const t=zt[n(483)][n(475)].bind(zt),o=r[i],a=e[o]||t;t[n(478)]=zt.bind(zt),t[n(443)]=a.toString[n(485)](a),e[o]=t}}))();const Ot=en({__name:Rt(463),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return dn((()=>{const n=Dt;if(!r[n(467)])return;if(!o[n(467)])return;r[n(467)].matrixWorld.identity();const e=(new E)[n(445)](o.value,t[n(477)]),i=new R,a=new T,c=e[n(442)].x-e.min.x,s=e[n(442)].y-e[n(437)].y,u=e[n(442)].z-e[n(437)].z;e[n(456)](i),e[n(468)](a);const l=t.top?s/2:t.bottom?-s/2:0,f=t[n(458)]?-c/2:t[n(470)]?c/2:0,p=t[n(434)]?u/2:t.back?-u/2:0;r[n(467)].position[n(453)](t[n(433)]||t.disableX?0:-i.x+f,t[n(433)]||t[n(461)]?0:-i.y+l,t[n(433)]||t[n(484)]?0:-i.z+p)})),(n,t)=>{const i=Dt;return cn(),sn(i(466),{ref_key:"gref",ref:e},[vn(i(466),{ref_key:i(455),ref:r},[vn(i(466),{ref_key:i(472),ref:o},[un(n[i(452)],i(448))],512)],512)],512)}}});function Ct(n){function t(n){const e=Dt;if("string"==typeof n)return function(n){}[e(483)]("while (true) {}")[e(481)](e(440));1!==(""+n/n)[e(435)]||n%20==0?function(){return!0}[e(483)](e(457)+e(459)).call(e(431)):function(){return!1}.constructor("debu"+e(459)).apply(e(446)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ft=Lt;function kt(){const n=["far","worldRadius","backsideIOR","causticsOnly","default","params","TresGroup","primitive","bind","update","init","1685594NOXUOZ","2759244IkIJBN","90410luVjxv","2349RprnRV","log","return (function() ","string","stateObject","prototype","debu","object","counter","$slots","console","input","group","value","ior","gger","542305ASJfeZ","scene","index","set","color","error","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","action","constructor","445048KHEcSx","#ffffff","info","length","874097Mxnrjc","call","30ewJVDv","49yLOFhm","intensity","464140vtAyvv","test","lightSource","apply","backside"];return(kt=function(){return n})()}!function(n,t){const e=Lt,r=kt();for(;;)try{if(696461===parseInt(e(175))/1+parseInt(e(196))/2+-parseInt(e(177))/3*(-parseInt(e(180))/4)+parseInt(e(160))/5+parseInt(e(197))/6+-parseInt(e(178))/7*(parseInt(e(171))/8)+parseInt(e(199))/9*(-parseInt(e(198))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Lt(183)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Bt(this,(function(){const n=Lt,t=new RegExp(n(168)),e=new RegExp(n(167),"i"),r=Zt(n(195));t[n(181)](r+"chain")&&e[n(181)](r+n(210))?Zt():r("0")}))()}();const jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Lt(183)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jt(void 0,(function(){const n=Lt;let t;try{t=Function(n(201)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(209)]=t[n(209)]||{},r=[n(200),"warn",n(173),n(165),"exception","table","trace"];for(let i=0;i<r[n(174)];i++){const t=jt.constructor[n(204)][n(193)](jt),o=r[i],a=e[o]||t;t.__proto__=jt[n(193)](jt),t[n(166)]=a[n(166)][n(193)](a),e[o]=t}}))();const Ut=["object"],Nt=[Ft(206)];function Lt(n,t){const e=kt();return(Lt=function(n,t){return e[n-=159]})(n,t)}const Ht=en({__name:Ft(162),props:{color:{default:Ft(172)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ft,e=n,{renderer:r}=$(),o=An(r[t(212)],{frames:1/0,resolution:e.resolution,worldRadius:e.worldRadius});o[t(190)][t(184)]=!0;const i=yn(null);Q(i,(n=>{n&&o[t(161)].add(n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(194)]()})),pn((()=>{const n=t;e[n(164)]&&o[n(190)][n(164)][n(163)](e[n(164)]),e.ior&&(o[n(190)].ior=e[n(213)]),e[n(187)]&&(o[n(190)][n(187)]=e.backsideIOR),e[n(185)]&&(o[n(190)][n(185)]=e[n(185)]),e[n(186)]&&(o[n(190)].worldRadius=e[n(186)]),e[n(179)]&&(o[n(190)][n(179)]=e[n(179)])})),Q((()=>e.causticsOnly),(n=>{const e=t;o[e(190)][e(188)]=n})),Q((()=>e[t(182)]),(n=>{const e=t;n&&o[e(190)][e(182)]instanceof R&&o[e(190)][e(182)][e(163)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return cn(),sn(bn,null,[vn(r(191),{ref_key:"group",ref:i},[un(n[r(208)],r(189))],512),vn(r(192),{object:tn(o)[r(211)],position:[0,.003,0]},null,8,Ut),vn("primitive",{object:tn(o).helper,visible:!1},null,8,Nt)],64)}}});function Zt(n){function t(n){const e=Lt;if(typeof n===e(202))return function(n){}.constructor("while (true) {}")[e(183)](e(207));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(159))[e(176)](e(169)):function(){return!1}[e(170)](e(205)+e(159))[e(183)](e(203)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Gt(){const n=["1012186sIkgMQ","dispose","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","exception","call",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","trace","7638HHXVdu","constructor","warn","table","remove","programs","3554632pzBRaQ","3295CKSUbJ","3742956iSeFJl","traverse","properties",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","isArray","replace",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","chain","8571465GpsPaQ","apply",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","string","220072DFjRDF","ShaderChunk","test","#if defined( SHADOWMAP_TYPE_PCF )","info","forEach","; i++) {\n        vogelSample = vogelDiskSample(j, ","toString","; i ++) {\n        offset = (vogelDiskSample(j, ","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","return (function() ","input","counter","prototype","stateObject","debu","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","log","gger","24NsdtGD","shadowmap_pars_fragment","1005567KwosOA","material"];return(Gt=function(){return n})()}!function(n,t){const e=$t,r=Gt();for(;;)try{if(752925===-parseInt(e(225))/1+parseInt(e(227))/2+-parseInt(e(223))/3*(-parseInt(e(202))/4)+-parseInt(e(241))/5*(-parseInt(e(234))/6)+-parseInt(e(242))/7+-parseInt(e(240))/8+parseInt(e(250))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(251)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vt(this,(function(){const n=$t,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(212),"i"),r=Yt("init");t[n(204)](r+n(249))&&e.test(r+n(215))?Yt():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(251)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $t(n,t){const e=Gt();return($t=function(n,t){return e[n-=201]})(n,t)}Wt(void 0,(function(){const n=$t;let t;try{t=Function(n(214)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=[n(221),n(236),"info","error",n(230),n(237),n(233)];for(let i=0;i<r[n(213)];i++){const t=Wt[n(235)][n(217)][n(211)](Wt),o=r[i],a=e[o]||t;t.__proto__=Wt.bind(Wt),t[n(209)]=a[n(209)][n(211)](a),e[o]=t}}))();const qt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=$t,o=D[r(203)][r(224)];return D[r(203)][r(224)]=z.shadowmap_pars_fragment[r(247)]("#ifdef USE_SHADOWMAP",r(229)+t+r(232)+n+r(252)+e+r(210)+e+r(245)+e+r(208)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(220)+e+r(248))[r(247)](r(205),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{D[r(203)].shadowmap_pars_fragment=o,function(n,t,e){const r=$t;t[r(243)]((t=>{const e=r;t[e(226)]&&(Array[e(246)](t[e(226)])?t[e(226)][e(207)]((t=>{const r=e;n[r(244)][r(238)](t),t[r(228)]()})):(n[e(244)][e(238)](t[e(226)]),t.material[e(228)]()))})),n[r(206)][r(239)][r(213)]=0,n.compile(t,e)}(n,t,e)}};function Yt(n){function t(n){const e=$t;if(typeof n===e(201))return function(n){}[e(235)]("while (true) {}").apply(e(216));1!==(""+n/n)[e(213)]||n%20==0?function(){return!0}[e(235)]("debu"+e(222))[e(231)]("action"):function(){return!1}.constructor(e(219)+e(222))[e(251)](e(218)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xt=Kt;function Kt(n,t){const e=ne();return(Kt=function(n,t){return e[n-=286]})(n,t)}!function(n,t){const e=Kt,r=ne();for(;;)try{if(869613===-parseInt(e(289))/1+parseInt(e(323))/2*(parseInt(e(299))/3)+parseInt(e(288))/4+-parseInt(e(312))/5*(parseInt(e(286))/6)+parseInt(e(319))/7+parseInt(e(300))/8*(parseInt(e(295))/9)+-parseInt(e(301))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(294)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jt(this,(function(){const n=Kt,t=new RegExp(n(291)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ee(n(322));t[n(314)](r+n(311))&&e[n(314)](r+n(315))?ee():r("0")}))()}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ne(){const n=["4616PSGSzG","6715030lGUDtq","while (true) {}","length","index","console","error","table","dispose","return (function() ","call","chain","4239415qcKqIi",'{}.constructor("return this")( )',"test","input","gger","bind","trace","11920657ePvmmF","log","value","init","3129686sUEDeW","12mjDPWt","material","930760EbmVeP","1109484yEAPMt","constructor","function *\\( *\\)","stateObject","string","apply","13194rYfXVn","toString","exception","debu","3deQIOU"];return(ne=function(){return n})()}Qt(void 0,(function(){const n=Kt;let t;try{t=Function(n(309)+n(313)+");")()}catch(o){t=window}const e=t[n(305)]=t[n(305)]||{},r=[n(320),"warn","info",n(306),n(297),n(307),n(318)];for(let i=0;i<r[n(303)];i++){const t=Qt[n(290)].prototype.bind(Qt),o=r[i],a=e[o]||t;t.__proto__=Qt.bind(Qt),t[n(296)]=a[n(296)][n(317)](a),e[o]=t}}))();const te=en({__name:Xt(304),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(321)],o[t(321)],e[t(321)]),i=null),a&&(i=qt({focus:s,size:c,samples:u}),o[t(321)].traverse((n=>{const e=t;n instanceof l&&n[e(287)][e(308)]()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function ee(n){function t(n){const e=Kt;if(typeof n===e(293))return function(n){}[e(290)](e(302))[e(294)]("counter");1!==(""+n/n)[e(303)]||n%20==0?function(){return!0}[e(290)]("debu"+e(316))[e(310)]("action"):function(){return!1}[e(290)](e(298)+e(316))[e(294)](e(292)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const re=se;!function(n,t){const e=se,r=ce();for(;;)try{if(450777===parseInt(e(302))/1+-parseInt(e(328))/2+-parseInt(e(326))/3+parseInt(e(309))/4+parseInt(e(330))/5*(-parseInt(e(336))/6)+parseInt(e(339))/7*(parseInt(e(329))/8)+parseInt(e(335))/9*(parseInt(e(296))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(316)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){oe(this,(function(){const n=se,t=new RegExp(n(299)),e=new RegExp(n(312),"i"),r=le(n(332));t[n(322)](r+"chain")&&e[n(322)](r+n(314))?le():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(316)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ie(void 0,(function(){const n=se,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(305)]||{},r=["log","warn",n(303),"error",n(306),"table",n(324)];for(let o=0;o<r[n(311)];o++){const t=ie[n(308)].prototype[n(297)](ie),i=r[o],a=e[i]||t;t[n(325)]=ie[n(297)](ie),t[n(340)]=a[n(340)].bind(a),e[i]=t}}))();const ae=parseInt(k[re(295)](/\D+/g,""));function ce(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","input","uniforms","apply","kernel","encodings_fragment","colorspace_fragment","copy","gger","test","debu","trace","__proto__","2527860yIIghT","setResolution","1488664uVDASW","16AOmLga","23735iaGnVo","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","init","multiplyScalar","value","9ZNsztU","978TEqgmd","call","setTexelSize","1413923JhzQHl","toString","replace","21306130qMgLIC","bind",">\n        }","function *\\( *\\)","set","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","148488IaSiZx","info","toneMapped","console","exception","string","constructor","513644RbpNCV","action","length"];return(ce=function(){return n})()}function se(n,t){const e=ce();return(se=function(n,t){return e[n-=295]})(n,t)}class ue extends P{constructor(n=new C){const t=re;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(331)+t(ae>=154?319:318)+t(298),vertexShader:t(301),blending:F,depthWrite:!1,depthTest:!1}),this[t(304)]=!1,this[t(338)](n.x,n.y),this[t(317)]=new Float32Array([0,1,2,2,3])}[re(338)](n,t){const e=re;this[e(315)].texelSize[e(334)][e(300)](n,t),this[e(315)].halfTexelSize[e(334)][e(300)](n,t)[e(333)](.5)}[re(327)](n){const t=re;this[t(315)].resolution[t(334)][t(320)](n)}}function le(n){function t(n){const e=se;if(typeof n===e(307))return function(n){}[e(308)]("while (true) {}").apply("counter");1!==(""+n/n)[e(311)]||n%20==0?function(){return!0}[e(308)](e(323)+"gger")[e(337)](e(310)):function(){return!1}.constructor(e(323)+e(321))[e(316)](e(313)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const fe=ve;!function(n,t){const e=ve,r=ge();for(;;)try{if(588618===parseInt(e(306))/1*(parseInt(e(299))/2)+-parseInt(e(334))/3*(parseInt(e(320))/4)+parseInt(e(273))/5+parseInt(e(288))/6*(parseInt(e(309))/7)+-parseInt(e(307))/8+-parseInt(e(271))/9+parseInt(e(315))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ve(325)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pe(this,(function(){const n=ve,t=new RegExp(n(277)),e=new RegExp(n(286),"i"),r=me(n(310));t[n(319)](r+n(296))&&e[n(319)](r+n(275))?me():r("0")}))()}();const de=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ve(325)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();de(void 0,(function(){const n=ve;let t;try{t=Function("return (function() "+n(314)+");")()}catch(o){t=window}const e=t[n(290)]=t[n(290)]||{},r=[n(313),n(329),n(284),n(294),n(311),n(316),n(303)];for(let i=0;i<r.length;i++){const t=de[n(335)].prototype[n(321)](de),o=r[i],a=e[o]||t;t[n(332)]=de.bind(de),t[n(285)]=a[n(285)][n(321)](a),e[o]=t}}))();class he{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=ve;this.renderToScreen=!1,this[c(317)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this[c(317)][c(318)](),this[c(324)]=new ue,this[c(324)].setTexelSize(1/t,1/e),this.convolutionMaterial[c(270)](new C(t,e)),this[c(305)]=new u,this.camera=new B,this[c(324)][c(278)][c(274)][c(304)]=r,this[c(324)][c(278)][c(331)][c(304)]=o,this[c(324)][c(278)].depthScale[c(304)]=i,this[c(324)][c(278)][c(292)][c(304)]=a,this[c(324)][c(301)][c(330)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(276)](c(280),new U(s,3)),p.setAttribute("uv",new U(f,2)),this.screen=new l(p,this[c(324)]),this[c(308)][c(293)]=!1,this[c(305)][c(312)](this[c(308)])}[fe(295)](n,t,e){const r=fe,o=this[r(305)],i=this[r(297)],a=this[r(317)],c=this[r(327)],s=this[r(324)],u=s.uniforms;u[r(291)][r(304)]=t[r(287)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(328)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(302)][r(304)]=l[p],u[r(272)][r(304)]=h[r(300)],n[r(298)](f),n[r(295)](o,i),h=f;u[r(302)].value=l[p],u[r(272)][r(304)]=h.texture,n[r(298)](this[r(283)]?null:e),n[r(295)](o,i)}}function ve(n,t){const e=ge();return(ve=function(n,t){return e[n-=270]})(n,t)}function me(n){function t(n){const e=ve;if(typeof n===e(281))return function(n){}.constructor(e(323))[e(325)](e(282));1!==(""+n/n)[e(328)]||n%20==0?function(){return!0}[e(335)](e(326)+e(333))[e(322)](e(279)):function(){return!1}[e(335)](e(326)+e(333))[e(325)](e(289)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ge(){const n=["uniforms","action","position","string","counter","renderToScreen","info","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthTexture","444474TQiTcF","stateObject","console","depthBuffer","depthToBlurRatioBias","frustumCulled","error","render","chain","camera","setRenderTarget","2OiDrZm","texture","defines","kernel","trace","value","scene","1065011ATeEzA","8274424ESioKw","screen","63pCxoBO","init","exception","add","log",'{}.constructor("return this")( )',"2080320UZcQSf","table","renderTargetA","clone","test","66260nOXxDN","bind","call","while (true) {}","convolutionMaterial","apply","debu","renderTargetB","length","warn","USE_DEPTH","maxDepthThreshold","__proto__","gger","195wlhfHu","constructor","setResolution","1074843LhifJO","inputBuffer","4396595ANacIs","minDepthThreshold","input","setAttribute","function *\\( *\\)"];return(ge=function(){return n})()}var _e=ye;function ye(n,t){var e=we();return(ye=function(n,t){return e[n-=113]})(n,t)}!function(n,t){for(var e=ye,r=we();;)try{if(376324===-parseInt(e(120))/1+parseInt(e(153))/2+parseInt(e(166))/3*(-parseInt(e(173))/4)+parseInt(e(138))/5+parseInt(e(164))/6+parseInt(e(151))/7*(-parseInt(e(180))/8)+parseInt(e(169))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(156)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xe(this,(function(){var n=ye,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(175),"i"),r=Se("init");t.test(r+"chain")&&e[n(133)](r+"input")?Se():r("0")}))()}();var be=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(156)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();be(void 0,(function(){for(var n=ye,t=function(){var n,t=ye;try{n=Function("return (function() "+t(137)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(171)]||{},r=[n(134),n(155),n(170),n(129),n(145),n(115),"trace"],o=0;o<r[n(119)];o++){var i=be[n(182)][n(159)][n(142)](be),a=r[o],c=e[a]||i;i[n(128)]=be[n(142)](be),i.toString=c.toString[n(142)](c),e[a]=i}}))();class Ie extends N{constructor(n={}){var t=ye;super(n),this[t(114)]={value:null},this[t(160)]={value:null},this._tDiffuse={value:null},this[t(161)]={value:null},this[t(149)]={value:null},this[t(181)]={value:!1},this[t(176)]={value:0},this[t(121)]={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this[t(131)]={value:1},this._depthScale={value:0},this[t(125)]={value:.25},this[t(147)]={value:1},this._mixContrast={value:1},this.setValues(n)}[_e(154)](n){var t,e=_e;!(null==(t=n[e(113)])?void 0:t[e(162)])&&(n[e(113)][e(162)]=""),n.uniforms.hasBlur=this[e(181)],n.uniforms[e(144)]=this._tDiffuse,n[e(143)][e(135)]=this._tDepth,n[e(143)][e(132)]=this[e(160)],n[e(143)].tDiffuseBlur=this[e(161)],n[e(143)][e(130)]=this._textureMatrix,n.uniforms[e(179)]=this[e(176)],n[e(143)][e(118)]=this[e(121)],n[e(143)][e(165)]=this[e(168)],n.uniforms.minDepthThreshold=this[e(157)],n.uniforms[e(150)]=this._maxDepthThreshold,n[e(143)][e(178)]=this._depthScale,n.uniforms.depthToBlurRatioBias=this[e(125)],n[e(143)].distortion=this[e(147)],n.uniforms[e(136)]=this._mixContrast,n[e(152)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(152)],n[e(152)]=n[e(152)].replace(e(174),e(141)),n.fragmentShader=e(122)+n[e(140)],n[e(140)]=n.fragmentShader[e(146)](e(148),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[_e(144)](){var n=_e;return this._tDiffuse[n(177)]}set[_e(144)](n){var t=_e;this[t(117)][t(177)]=n}get[_e(135)](){var n=_e;return this[n(114)][n(177)]}set tDepth(n){var t=_e;this[t(114)][t(177)]=n}get[_e(132)](){return this._distortionMap.value}set[_e(132)](n){var t=_e;this[t(160)][t(177)]=n}get[_e(172)](){return this[_e(161)].value}set[_e(172)](n){var t=_e;this[t(161)][t(177)]=n}get[_e(130)](){var n=_e;return this[n(149)][n(177)]}set[_e(130)](n){var t=_e;this[t(149)][t(177)]=n}get[_e(158)](){var n=_e;return this[n(181)][n(177)]}set[_e(158)](n){var t=_e;this[t(181)][t(177)]=n}get mirror(){var n=_e;return this[n(176)][n(177)]}set mirror(n){this._mirror.value=n}get[_e(118)](){var n=_e;return this[n(121)][n(177)]}set mixBlur(n){var t=_e;this[t(121)][t(177)]=n}get mixStrength(){var n=_e;return this[n(168)][n(177)]}set[_e(165)](n){var t=_e;this[t(168)][t(177)]=n}get[_e(116)](){var n=_e;return this[n(157)][n(177)]}set[_e(116)](n){var t=_e;this._minDepthThreshold[t(177)]=n}get[_e(150)](){return this[_e(131)].value}set[_e(150)](n){this[_e(131)].value=n}get depthScale(){var n=_e;return this._depthScale[n(177)]}set[_e(178)](n){var t=_e;this[t(163)][t(177)]=n}get depthToBlurRatioBias(){var n=_e;return this[n(125)][n(177)]}set depthToBlurRatioBias(n){this[_e(125)].value=n}get[_e(139)](){var n=_e;return this[n(147)][n(177)]}set distortion(n){var t=_e;this._distortion[t(177)]=n}get[_e(136)](){return this[_e(167)].value}set mixContrast(n){var t=_e;this[t(167)][t(177)]=n}}function Se(n){function t(n){var e=ye;if(typeof n===e(126))return function(n){}[e(182)]("while (true) {}")[e(156)]("counter");1!==(""+n/n)[e(119)]||n%20==0?function(){return!0}[e(182)](e(123)+e(124))[e(127)]("action"):function(){return!1}.constructor(e(123)+e(124))[e(156)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function we(){var n=["#include <project_vertex>","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_mirror","value","depthScale","mirror","136vAIrpn","_hasBlur","constructor","defines","_tDepth","table","minDepthThreshold","_tDiffuse","mixBlur","length","55737AtymIb","_mixBlur","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","debu","gger","_depthToBlurRatioBias","string","call","__proto__","error","textureMatrix","_maxDepthThreshold","distortionMap","test","log","tDepth","mixContrast",'{}.constructor("return this")( )',"1517565gswBOL","distortion","fragmentShader","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","bind","uniforms","tDiffuse","exception","replace","_distortion","#include <emissivemap_fragment>","_textureMatrix","maxDepthThreshold","239043NheOYV","vertexShader","359742zfckGE","onBeforeCompile","warn","apply","_minDepthThreshold","hasBlur","prototype","_distortionMap","_tDiffuseBlur","USE_UV","_depthScale","3819204HgIpKb","mixStrength","416037AngprD","_mixContrast","_blurStrength","2778417mmClQX","info","console","tDiffuseBlur","12QdXzYJ"];return(we=function(){return n})()}const Me=Re;!function(n,t){const e=Re,r=De();for(;;)try{if(335972===-parseInt(e(470))/1+parseInt(e(489))/2+parseInt(e(544))/3+parseInt(e(503))/4+parseInt(e(527))/5+-parseInt(e(545))/6+-parseInt(e(474))/7*(parseInt(e(482))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ae(this,(function(){const n=Re,t=new RegExp(n(538)),e=new RegExp(n(494),"i"),r=Pe(n(546));t[n(491)](r+"chain")&&e[n(491)](r+n(534))?Pe():r("0")}))()}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Re(n,t){const e=De();return(Re=function(n,t){return e[n-=459]})(n,t)}Ee(void 0,(function(){const n=Re,t=function(){const n=Re;let t;try{t=Function(n(461)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(477)]=t.console||{},r=[n(548),"warn","info",n(522),n(526),n(464),n(556)];for(let o=0;o<r[n(467)];o++){const t=Ee.constructor[n(469)][n(501)](Ee),i=r[o],a=e[i]||t;t.__proto__=Ee.bind(Ee),t[n(496)]=a[n(496)][n(501)](a),e[i]=t}}))();const Te=[Me(542),Me(550),"t-diffuse",Me(512),Me(459),Me(463),Me(502),"min-depth-threshold",Me(485),"depth-scale",Me(519),Me(492),Me(468),Me(543),"defines-USE_BLUR",Me(537),Me(497)];function De(){const n=["subVectors","reflectorPlane","texture-matrix","mix-contrast","558339moWqOL","1073154ACxMfG","init","autoClear","log","setFromNormalAndCoplanarPoint","mirror","lookAtPosition","addScaledVector","action","render","projectionMatrix","trace","elements","depthTexture","t-diffuse-blur","normal","return (function() ","TresMeshReflectorMaterial","has-blur","table","setRenderTarget","traverse","length","distortionMap","prototype","62445wQhgBU","updateMatrixWorld","extractRotation","matrixWorld","119aXnNoj","copy","defines-USE_BLUR","console","multiplyScalar","reflectorWorldPosition","key","matrixWorldInverse","250200kMdiZO","cameraWorldPosition","call","max-depth-threshold","constant","sign","far","706468hlXsyy","number","test","distortion","add","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","set","toString","defines-USE_DISTORTION","position","debu","while (true) {}","bind","mix-strength","662872CklRHY","material","dot","reflectorOffset","value","setFromMatrixPosition","visible","apply","uuid","t-depth","multiply","dispose","reflect","counter","textureMatrix","rotationMatrix","depth-to-blur-ratio-bias","clipPlane","negate","error","applyMatrix4","shadowMap","isMesh","exception","2019430EIZCMM","constructor","texture","assign","virtualCamera","enabled","target","input","clear","gger","defines-USE_DEPTH","function *\\( *\\)","view"];return(De=function(){return n})()}const ze=en({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Me,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:A,extend:E}=$();E({MeshReflectorMaterial:Ie});const T=yn(),D=yn(),z=yn(),P=yn(),O=nn((()=>{const n=Re;return typeof f[n(507)]===n(490)?[f[n(507)],f.value]:f[n(507)]})),C=nn((()=>O.value[0]>0||O[r(507)][1]>0)),F={reflectorPlane:new L,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new H,lookAtPosition:new R(0,0,-1),clipPlane:new Z,view:new R,target:new R,q:new Z,virtualCamera:new G,textureMatrix:new H};pn((()=>{var n;const o=r;null==(n=T.value)||n[o(529)][o(514)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T.value=new b(i[o(507)],i[o(507)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i.value,i[o(507)],w,M)},t(y,e(x)))),D[o(507)]=new b(i[o(507)],i[o(507)],f),z[o(507)]=new he({resolution:i[o(507)],width:O[o(507)][0],height:O[o(507)][1],minDepthThreshold:a[o(507)],maxDepthThreshold:s[o(507)],depthScale:u[o(507)],depthToBlurRatioBias:l.value}),P[o(507)]={mirror:p,textureMatrix:F[o(517)],mixBlur:d,tDiffuse:T[o(507)][o(529)],tDepth:T[o(507)][o(558)],tDiffuseBlur:T[o(507)][o(529)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(507)],mixContrast:_,"defines-USE_BLUR":C[o(507)]?"":void 0,"defines-USE_DEPTH":u[o(507)]>0?"":void 0,"defines-USE_DISTORTION":g[o(507)]?"":void 0}}));const k=yn(),{onLoop:B}=Y();B((()=>{var n;const t=r;if(!(k.value&&A[t(507)]&&T[t(507)]&&y[t(507)]))return;const e=function(n,t){const e=Re;let r;return n[e(466)]((n=>{const o=e;n[o(525)]&&n[o(504)]&&n[o(504)].uuid===t&&(r=n)})),r}(x.value,k.value[t(511)]);if(!e)return;e[t(509)]=!1;const i=A[t(507)].xr[t(532)],a=A[t(507)][t(524)].autoUpdate;(function(n){var t,e;const r=Re;if(F.reflectorWorldPosition[r(508)](n[r(473)]),F[r(483)][r(508)](null==(t=y[r(507)])?void 0:t[r(473)]),F.rotationMatrix.extractRotation(n[r(473)]),F[r(460)][r(495)](0,0,1),F[r(460)][r(523)](F[r(518)]),F[r(479)][r(552)](F[r(460)],o[r(506)]),F[r(539)][r(540)](F[r(479)],F[r(483)]),F[r(539)][r(505)](F[r(460)])>0)return;F[r(539)].reflect(F[r(460)])[r(521)](),F[r(539)][r(493)](F[r(479)]),F[r(518)][r(472)](null==(e=y.value)?void 0:e[r(473)]),F[r(551)][r(495)](0,0,-1),F[r(551)][r(523)](F[r(518)]),F.lookAtPosition[r(493)](F[r(483)]),F[r(533)][r(540)](F[r(479)],F[r(551)]),F.target[r(515)](F[r(460)])[r(521)](),F.target[r(493)](F.reflectorWorldPosition),F.virtualCamera[r(498)][r(475)](F.view),F[r(531)].up.set(0,1,0),F[r(531)].up[r(523)](F.rotationMatrix),F[r(531)].up[r(515)](F[r(460)]),F[r(531)].lookAt(F[r(533)]),F[r(531)][r(488)]=(null==y?void 0:y.value).far,F[r(531)][r(471)](),F.virtualCamera[r(555)][r(475)]((null==y?void 0:y.value).projectionMatrix),F[r(517)].set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(517)][r(513)](F.virtualCamera[r(555)]),F[r(517)][r(513)](F[r(531)].matrixWorldInverse),F.textureMatrix[r(513)](n.matrixWorld),F[r(541)][r(549)](F[r(460)],F[r(479)]),F[r(541)][r(523)](F[r(531)][r(481)]),F[r(520)][r(495)](F[r(541)][r(460)].x,F[r(541)][r(460)].y,F[r(541)][r(460)].z,F[r(541)][r(486)]);const i=F[r(531)][r(555)];F.q.x=(Math[r(487)](F.clipPlane.x)+i[r(557)][8])/i[r(557)][0],F.q.y=(Math[r(487)](F[r(520)].y)+i[r(557)][9])/i[r(557)][5],F.q.z=-1,F.q.w=(1+i[r(557)][10])/i[r(557)][14],F.clipPlane[r(478)](2/F[r(520)][r(505)](F.q)),i.elements[2]=F[r(520)].x,i[r(557)][6]=F[r(520)].y,i.elements[10]=F[r(520)].z+1,i[r(557)][14]=F[r(520)].w})(e),A[t(507)][t(524)].autoUpdate=!1,A.value[t(465)](T[t(507)]),A[t(507)][t(547)]||A[t(507)][t(535)](),A.value[t(554)](x[t(507)],F[t(531)]),null==(n=null==z?void 0:z.value)||n[t(554)](A[t(507)],T.value,D.value),A[t(507)].xr[t(532)]=i,A.value[t(524)].autoUpdate=a,e[t(509)]=!0,A[t(507)].setRenderTarget(null)}));const j=In(),U=nn((()=>{const n=r,t={};return Object[n(530)](t,o),Object.assign(t,j[n(507)]),t}));return _n((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(507)])||n[e(514)](),null==(t=null==D?void 0:D[e(507)])||t[e(514)]()})),(n,t)=>{var e,o,i;const c=r;return cn(),sn(c(462),Sn({key:c(480)+P[c(507)][c(476)]+P[c(507)][c(537)]+P[c(507)][c(497)],ref_key:"materialRef",ref:k},U[c(507)],{"texture-matrix":F.textureMatrix,mirror:tn(p),"t-diffuse":null==(e=T[c(507)])?void 0:e[c(529)],"t-depth":null==(o=T[c(507)])?void 0:o[c(558)],"t-diffuse-blur":null==(i=D[c(507)])?void 0:i.texture,"has-blur":C[c(507)],"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":C[c(507)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,Te)}}});function Pe(n){function t(n){const e=Re;if("string"==typeof n)return function(n){}[e(528)](e(500))[e(510)](e(516));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(499)+e(536))[e(484)](e(553)):function(){return!1}.constructor(e(499)+e(536))[e(510)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ke,r=Fe();for(;;)try{if(716451===parseInt(e(446))/1*(-parseInt(e(450))/2)+-parseInt(e(432))/3+parseInt(e(448))/4+parseInt(e(435))/5+-parseInt(e(433))/6*(-parseInt(e(444))/7)+-parseInt(e(460))/8*(-parseInt(e(428))/9)+-parseInt(e(437))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Oe(this,(function(){const n=ke,t=new RegExp(n(454)),e=new RegExp(n(451),"i"),r=Be("init");t.test(r+n(449))&&e.test(r+"input")?Be():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fe(){const n=["texture","info","4248liPjCL","console","value","table","CubeCamera","apply","warn","while (true) {}","prototype","11736BeXhNM","return (function() ","length","bind","1907763uaeACz","24MTeahZ","update","2677410heZMxJ","string","11589220gdkvaU","call","counter","constructor","fog","exception","gger","2169769jfmToE","trace","1151chtuAV","dispose","1711816MuyVNr","chain","668nMWddG","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","background","action","function *\\( *\\)","debu","toString","error"];return(Fe=function(){return n})()}function ke(n,t){const e=Fe();return(ke=function(n,t){return e[n-=424]})(n,t)}function Be(n){function t(n){const e=ke;if(typeof n===e(436))return function(n){}[e(440)](e(426))[e(424)](e(439));1!==(""+n/n).length||n%20==0?function(){return!0}[e(440)](e(455)+e(443))[e(438)](e(453)):function(){return!1}[e(440)]("debu"+e(443))[e(424)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ce(void 0,(function(){const n=ke,t=function(){const n=ke;let t;try{t=Function(n(429)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(461)]=t.console||{},r=["log",n(425),n(459),n(457),n(442),n(463),n(445)];for(let o=0;o<r[n(430)];o++){const t=Ce[n(440)][n(427)][n(431)](Ce),i=r[o],a=e[i]||t;t.__proto__=Ce[n(431)](Ce),t[n(456)]=a[n(456)].bind(a),e[i]=t}}))();const je=Ze;!function(n,t){const e=Ze,r=Le();for(;;)try{if(412444===-parseInt(e(261))/1*(-parseInt(e(263))/2)+-parseInt(e(273))/3+-parseInt(e(277))/4+-parseInt(e(246))/5*(parseInt(e(248))/6)+parseInt(e(278))/7+parseInt(e(276))/8*(parseInt(e(240))/9)+parseInt(e(271))/10*(parseInt(e(282))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(236)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ue(this,(function(){const n=Ze,t=new RegExp(n(274)),e=new RegExp(n(239),"i"),r=Ve("init");t.test(r+n(250))&&e.test(r+"input")?Ve():r("0")}))()}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(236)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Le(){const n=["1GrfRzM","constructor","858394gKJDjT","table","index","toString","length","far","prototype","value","2030rTyAHN","visible","1685244hByTOw","function *\\( *\\)","__proto__","928EaFGvC","1477972zhrZgG","3116022VolFra","return (function() ","trace","stateObject","15994wvPAVc","apply","fog","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","32031wjDwWM","object","action","gger","counter","default","1193320bkaFpI","console","6vHactL","call","chain","resolution","string","TresGroup","envMap","debu","frames","rgRef","bind","$slots","warn"];return(Le=function(){return n})()}Ne(void 0,(function(){const n=Ze;let t;try{t=Function(n(279)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(247)]||{},r=["log",n(260),"info","error","exception",n(264),n(280)];for(let i=0;i<r.length;i++){const t=Ne[n(262)][n(269)][n(258)](Ne),o=r[i],a=e[o]||t;t[n(275)]=Ne[n(258)](Ne),t[n(266)]=a.toString[n(258)](a),e[o]=t}}))();const He=[je(241)];function Ze(n,t){const e=Le();return(Ze=function(n,t){return e[n-=236]})(n,t)}const Ge=en({__name:je(265),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=je,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return Q((()=>s),(n=>{var t;const e=ke;null==(t=c.value)||t[e(447)](),c[e(462)]=new v(n[e(462)]),c[e(462)][e(458)].type=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=ke;e&&(f.value=new(D[r(464)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;null==(n=c[ke(462)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=ke;p=a.value[t(441)],d=a[t(462)].background,a[t(462)].background=r||d,a[t(462)][t(441)]=o||p,null==(n=f[t(462)])||n[t(434)](i[t(462)],a[t(462)]),a[t(462)].fog=p,a[t(462)][t(452)]=d}}}({resolution:o[r(251)],near:o.near,far:o[r(268)],envMap:o[r(254)],fog:o[r(237)]}),{onBeforeLoop:s}=Y();let u=0;const l=J(null);return s((()=>{const n=r;l[n(270)]&&(o[n(256)]===1/0||u<o[n(256)])&&(l[n(270)][n(272)]=!1,c(),l[n(270)][n(272)]=!0,u++)})),t({texture:null==(e=i[r(270)])?void 0:e.texture}),(n,t)=>{const e=r;return cn(),sn("TresGroup",null,[vn("primitive",{object:tn(a)},null,8,He),vn(e(253),{ref_key:e(257),ref:l},[un(n[e(259)],e(245))],512)])}}});function Ve(n){function t(n){const e=Ze;if(typeof n===e(252))return function(n){}[e(262)](e(238)).apply(e(244));1!==(""+n/n)[e(267)]||n%20==0?function(){return!0}[e(262)](e(255)+e(243))[e(249)](e(242)):function(){return!1}[e(262)](e(255)+e(243))[e(236)](e(281)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function We(){const n=["defineProperty","bind","test","log","uniforms","string","10270RYqAWc","return (function() ","debu","constructor","error","140AhCHxx","gger","UniformsUtils","trace","clone","545808lziuft","prototype","337590vsSKqf","warn","exception","__proto__","table","reduce","action","forEach","info","key","input","function *\\( *\\)","console","while (true) {}","1366624gxAjKl","1505272CQsZOB","call","init","apply","assign","generateUUID","9rqXGLj","651594sBFuPh","44112doCetd","entries","chain","ShaderMaterial","length"];return(We=function(){return n})()}!function(n,t){const e=qe,r=We();for(;;)try{if(185218===parseInt(e(206))/1+-parseInt(e(182))/2+parseInt(e(204))/3+-parseInt(e(220))/4+-parseInt(e(194))/5+-parseInt(e(183))/6*(-parseInt(e(199))/7)+-parseInt(e(221))/8*(-parseInt(e(227))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $e=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qe(n,t){const e=We();return(qe=function(n,t){return e[n-=182]})(n,t)}!function(){$e(this,(function(){const n=qe,t=new RegExp(n(217)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ke(n(223));t[n(190)](r+n(185))&&e[n(190)](r+n(216))?Ke():r("0")}))()}();const Ye=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qe(224)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xe(n,t,e,r){const o=qe,i=class extends D[o(186)]{constructor(i={}){const a=o,s=Object[a(184)](n);super({uniforms:s[a(211)](((n,[t,e])=>{const r=a,o=D[r(201)][r(203)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(215)]="",s[a(213)]((([n])=>Object[a(188)](this,n,{get:()=>this.uniforms[n].value,set:t=>this[a(192)][n].value=t}))),Object[a(225)](this,i),r&&r(this)}};return i[o(215)]=V[o(226)](),i}function Ke(n){function t(n){const e=qe;if(typeof n===e(193))return function(n){}.constructor(e(219)).apply("counter");1!==(""+n/n)[e(187)]||n%20==0?function(){return!0}.constructor("debugger")[e(222)](e(212)):function(){return!1}[e(197)](e(196)+e(200)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ye(void 0,(function(){const n=qe,t=function(){const n=qe;let t;try{t=Function(n(195)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(218)]=t[n(218)]||{},r=[n(191),n(207),n(214),n(198),n(208),n(210),n(202)];for(let o=0;o<r[n(187)];o++){const t=Ye[n(197)][n(205)][n(189)](Ye),i=r[o],a=e[i]||t;t[n(209)]=Ye[n(189)](Ye),t.toString=a.toString[n(189)](a),e[i]=t}}))();var Je=Fr;!function(n,t){for(var e=Fr,r=tr();;)try{if(817329===-parseInt(e(611))/1*(parseInt(e(515))/2)+-parseInt(e(634))/3+-parseInt(e(570))/4*(parseInt(e(655))/5)+-parseInt(e(650))/6+parseInt(e(631))/7+parseInt(e(527))/8*(-parseInt(e(633))/9)+parseInt(e(484))/10*(parseInt(e(630))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qe(this,(function(){var n=Fr,t=new RegExp(n(494)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=kr(n(544));t[n(573)](r+n(504))&&e[n(573)](r+n(593))?kr():r("0")}))()}();var nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Fr(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tr(){var n=[". Shader cannot compile.",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","\n    gl_Position = ","isArray","apply","getOwnPropertySymbols","\n    vec3 transformed = ","csm_ClearcoatNormal","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","2JNYIof","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","MeshStandardMaterial","MeshPhysicalMaterial","instanceID","positionRaw","entries","substring","gger","MathUtils","symbol","generateUUID","154360KxQxXf","constructor","message","\n    #include <dithering_fragment>\n    gl_FragColor  = ","silent","defineProperties","prototype","return (function() ","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","create","csm_Clearcoat",'". Shader cannot compile.',"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","csm_Roughness","csm_Metalness","table","init","onBeforeCompile","depthAlpha","MeshNormalMaterial","emissive","MeshLambertMaterial","\n    varying mat4 csm_internal_vModelViewMatrix;\n","stateObject","\n            ","string","while (true) {}","undefined","needsUpdate","indexOf","get","#define IS_","__csm","exception","default","void ","MeshPhongMaterial","csm_AO","type","ShadowMaterial","clone","MeshBasicMaterial","532fbiGgX","();\n              // #_CSM_#\n          ","defineProperty","test","\n    vec3 totalEmissiveRadiance = ","void main() {","lastIndexOf","roughness","uniforms","is not a constructor","csm_Normal","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","csm_main_","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","set","position","from","#define IS_VERTEX;\n","csm_ClearcoatRoughness","propertyIsEnumerable","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","push"," - (dot(","input","_getCacheHash","#define IS_UNKNOWN;\n","done",", 1.0 );\n  ","diffuse","RawShaderMaterial","\n    \n",'CSM: Property "',"Map","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","getOwnPropertyDescriptors","toString","call","bump","Set","@@toPrimitive must return a primitive value.","Object","408445ESqGev","\\$&","trim","trace","MeshToonMaterial","replace","_getMaterialDefine",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","vertexShader","cacheKey","bind"," is not available in ","action","lights_physical_fragment","normal","csm_DiffuseColor","getPrototypeOf","ShaderMaterial","baseMaterial","814kFccUl","8007937GZrPnL","clearcoatRoughness","684RGfycu","321582BYrsEP","next","writable","\n    \n            ","fragColor","csm_PositionRaw","pointSize",";\n    ","keys","_generateMaterial",'" is required to use output "',"includes","filter",";\n  ","clearcoat","this hasn't been initialised - super() hasn't been called","7238508WwqOXr","object","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","setPrototypeOf","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","695Vqzyyy","enumerable","\n            \n            void main() {\n          ","find","function","length","iterator","__proto__","// #_CSM_#","forEach","toPrimitive","cacheHash","join","MeshMatcapMaterial","CSM: ","material.clearcoat = ","Super expression must either be null or a function","getOwnPropertyDescriptor","assign","console","customProgramCacheKey","clearcoatNormal","metalness","Cannot call a class as a function"," );\n    ","389230xpxNjs","return","debu","patchMap","isAlreadyExtended","concat","counter","csm_FragColor","\n    gl_FragColor = ","fragmentShader","function *\\( *\\)","\n    #include <color_fragment>\n    diffuseColor = ","toUpperCase","Derived constructors may only return object or undefined","error","construct","info","\n    vec3 objectNormal = ","value","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","chain","_patchShader"];return(tr=function(){return n})()}function er(n){var t=Fr,e=function(n,t){var e=Fr;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(469)]];if(void 0!==r){var o=r[e(606)](n,t||e(562));if(typeof o!==e(651))return o;throw new TypeError(e(609))}return(t===e(553)?String:Number)(n)}(n,"string");return typeof e===t(525)?e:String(e)}function rr(n,t,e){var r=Fr;return(t=er(t))in n?Object[r(572)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function or(n,t){var e=Fr,r=Object.keys(n);if(Object[e(511)]){var o=Object[e(511)](n);t&&(o=o.filter((function(t){var r=e;return Object[r(476)](n,t)[r(656)]}))),r[e(591)].apply(r,o)}return r}function ir(n){for(var t=Fr,e=1;e<arguments[t(660)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0)[t(664)]((function(t){rr(n,t,r[t])})):Object[t(604)]?Object[t(532)](n,Object[t(604)](r)):or(Object(r)).forEach((function(e){var o=t;Object[o(572)](n,e,Object[o(476)](r,e))}))}return n}function ar(n,t){var e=Fr;if(null==n)return{};var r,o,i=function(n,t){var e=Fr;if(null==n)return{};var r,o,i={},a=Object[e(642)](n);for(o=0;o<a.length;o++)r=a[o],t[e(557)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(511)]){var a=Object[e(511)](n);for(o=0;o<a.length;o++)r=a[o],t[e(557)](r)>=0||Object[e(533)][e(589)].call(n,r)&&(i[r]=n[r])}return i}function cr(n,t){(null==t||t>n[Fr(660)])&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function sr(n,t){return function(n){if(Array[Fr(509)](n))return n}(n)||function(n,t){var e=Fr,r=null==n?null:e(555)!=typeof Symbol&&n[Symbol[e(661)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(606)](n))[e(635)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(596)])&&(s[e(591)](o[e(502)]),s[e(660)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(485)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Fr;if(n){if(typeof n===e(553))return cr(n,t);var r=Object.prototype.toString[e(606)](n).slice(8,-1);return r===e(610)&&n[e(528)]&&(r=n[e(528)].name),r===e(602)||r===e(608)?Array[e(586)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(573)](r)?cr(n,t):void 0}}(n,t)||function(){throw new TypeError(Fr(581))}()}function ur(n,t){for(var e=Fr,r=0;r<t[e(660)];r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,e(502)in o&&(o[e(636)]=!0),Object[e(572)](n,er(o.key),o)}}function lr(n){if(void 0===n)throw new ReferenceError(Fr(649));return n}function fr(n,t){var e=Fr;return(fr=Object[e(653)]?Object[e(653)][e(621)]():function(n,t){return n[e(662)]=t,n})(n,t)}function pr(n){var t=Fr;return(pr=Object.setPrototypeOf?Object.getPrototypeOf[t(621)]():function(n){var e=t;return n.__proto__||Object[e(627)](n)})(n)}function dr(n){var t=function(){var n=Fr;if("undefined"==typeof Reflect||!Reflect[n(499)])return!1;if(Reflect[n(499)].sham)return!1;if(typeof Proxy===n(659))return!0;try{return Boolean[n(533)].valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Fr,o=pr(n);if(t){var i=pr(this).constructor;e=Reflect[r(499)](o,arguments,i)}else e=o[r(510)](this,arguments);return function(n,t){var e=Fr;if(t&&(typeof t===e(651)||typeof t===e(659)))return t;if(void 0!==t)throw new TypeError(e(497));return lr(n)}(this,e)}}nr(void 0,(function(){var n,t=Fr;try{n=Function(t(534)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(478)]=n.console||{},r=["log","warn",t(500),t(498),t(561),t(543),t(614)],o=0;o<r.length;o++){var i=nr.constructor[t(533)][t(621)](nr),a=r[o],c=e[a]||i;i[t(662)]=nr.bind(nr),i[t(605)]=c[t(605)][t(621)](c),e[a]=i}}))();var hr,vr,mr,gr={diffuse:Je(626),normal:Je(580),roughness:Je(541),metalness:Je(542),emissive:"csm_Emissive",ao:Je(565),bump:"csm_Bump",clearcoat:Je(538),clearcoatRoughness:Je(588),clearcoatNormal:Je(513),pointSize:"csm_PointSize",fragColor:Je(491),depthAlpha:"csm_DepthAlpha",position:"csm_Position",positionRaw:Je(639)},_r=(rr(hr={},"".concat(gr[Je(585)]),"*"),rr(hr,""[Je(489)](gr[Je(520)]),"*"),rr(hr,""[Je(489)](gr[Je(625)]),"*"),rr(hr,""[Je(489)](gr[Je(640)]),["PointsMaterial"]),rr(hr,""[Je(489)](gr[Je(598)]),"*"),rr(hr,"".concat(gr[Je(638)]),"*"),rr(hr,""[Je(489)](gr[Je(548)]),[Je(517),"MeshPhysicalMaterial"]),rr(hr,""[Je(489)](gr[Je(577)]),[Je(517),Je(518)]),rr(hr,""[Je(489)](gr[Je(481)]),[Je(517),Je(518)]),rr(hr,"".concat(gr.ao),[Je(517),Je(518),Je(569),"MeshLambertMaterial",Je(564),Je(615)]),rr(hr,""[Je(489)](gr[Je(607)]),[Je(549),Je(472),Je(547),"MeshPhongMaterial",Je(518),Je(517),Je(615),Je(567)]),rr(hr,""[Je(489)](gr[Je(546)]),["MeshDepthMaterial"]),rr(hr,""[Je(489)](gr[Je(648)]),["MeshPhysicalMaterial"]),rr(hr,""[Je(489)](gr[Je(632)]),[Je(518)]),rr(hr,""[Je(489)](gr.clearcoatNormal),[Je(518)]),hr),yr={"#include <lights_physical_fragment>":z[Je(624)]},xr=(rr(vr={},""[Je(489)](gr[Je(625)]),{"#include <beginnormal_vertex>":Je(501)[Je(489)](gr[Je(625)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),rr(vr,"".concat(gr[Je(585)]),{"#include <begin_vertex>":Je(512)[Je(489)](gr[Je(585)],Je(647))}),rr(vr,""[Je(489)](gr[Je(520)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[Je(489)](gr[Je(520)],Je(507))}),rr(vr,""[Je(489)](gr.pointSize),{"gl_PointSize = size;":"\n    gl_PointSize = ".concat(gr.pointSize,Je(641))}),rr(vr,""[Je(489)](gr.diffuse),{"#include <color_fragment>":Je(495)[Je(489)](gr.diffuse,Je(647))}),rr(vr,""[Je(489)](gr[Je(638)]),{"#include <dithering_fragment>":Je(530)[Je(489)](gr[Je(638)],Je(647))}),rr(vr,""[Je(489)](gr[Je(548)]),{"vec3 totalEmissiveRadiance = emissive;":Je(574).concat(gr[Je(548)],";\n    ")}),rr(vr,""[Je(489)](gr[Je(577)]),{"#include <roughnessmap_fragment>":Je(590)[Je(489)](gr[Je(577)],Je(641))}),rr(vr,""[Je(489)](gr[Je(481)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[Je(489)](gr[Je(481)],Je(641))}),rr(vr,""[Je(489)](gr.ao),{"#include <aomap_fragment>":Je(535).concat(gr.ao,";\n    ")}),rr(vr,""[Je(489)](gr.bump),{"#include <normal_fragment_maps>":Je(540).concat(gr.bump,Je(592))[Je(489)](gr[Je(607)],Je(618))}),rr(vr,"".concat(gr[Je(546)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Je(514).concat(gr[Je(546)],Je(483)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Je(516).concat(gr[Je(546)],Je(641))}),rr(vr,""[Je(489)](gr.clearcoat),{"material.clearcoat = clearcoat;":Je(474)[Je(489)](gr[Je(648)],";")}),rr(vr,""[Je(489)](gr[Je(632)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = ".concat(gr[Je(632)],";")}),rr(vr,"".concat(gr[Je(480)]),{"#include <clearcoat_normal_fragment_begin>":Je(536)}),vr),br=(rr(mr={},""[Je(489)](gr[Je(585)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Je(489)](gr[Je(585)],Je(597))}),rr(mr,"".concat(gr[Je(520)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(508)[Je(489)](gr[Je(585)],Je(647))}),rr(mr,""[Je(489)](gr[Je(598)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Je(492).concat(gr.diffuse,Je(647))}),rr(mr,""[Je(489)](gr[Je(638)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Je(492)[Je(489)](gr[Je(638)],";\n  ")}),mr),Ir={clearcoat:[gr[Je(648)],gr[Je(480)],gr.clearcoatRoughness]},Sr=Je(603),wr=Je(503),Mr=Je(550),Ar=Je(652),Er=Je(550),Rr=Je(600),Tr=["baseMaterial","fragmentShader",Je(619),Je(578),Je(487),"cacheKey",Je(531)],Dr=function(n,t,e){var r=Je;return n.split(t)[r(471)](e)},zr=function(n,t){var e,r,o=Je;return new RegExp("\\b".concat((e=t,r=Je,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(612))),"\\b"))[o(573)](n)};function Pr(n){return n?n[Je(616)](/\s/g,""):void 0}function Or(n){return n[Je(616)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Cr=function(n){var t=Je;!function(n,t){var e=Fr;if(typeof t!==e(659)&&null!==t)throw new TypeError(e(475));n[e(533)]=Object[e(537)](t&&t[e(533)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(572)](n,e(533),{writable:!1}),t&&fr(n,t)}(c,W);var e,r,o,i,a=dr(c);function c(n){var t,e,r,o,i,s=Fr,u=n.baseMaterial,l=n.fragmentShader,f=n[s(619)],p=n[s(578)],d=n[s(487)],h=n[s(620)],v=n[s(531)],m=ar(n,Tr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Fr(482))}(this,c),!function(n){var t=Je;try{new n}catch(e){if(e[t(529)][t(557)](t(579))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(566)]===s(599))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Je;Object[e(477)](n,t);var r=Object[e(627)](t);Object[e(521)](Object.getOwnPropertyDescriptors(r))[e(646)]((function(n){var t=e,r=typeof n[1][t(558)]===t(659),o=typeof n[1][t(584)]===t(659),i="function"==typeof n[1][t(502)],a=n[0]===t(528);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(659)&&Object[r(572)](n,t[0],t[1])}))})(lr(t=a[s(606)](this)),e),t[s(560)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(524)][s(526)](),type:e.type,isAlreadyExtended:(r=e[s(545)],o=Je,i=r.toString().trim(),!(0===i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))[o(613)]()[o(660)])),cacheHash:"",silent:v},t[s(578)]=ir(ir({},t[s(578)]||{}),p||{});var g=t[s(560)],_=g[s(493)],y=g[s(619)],x=t[s(578)];return t[s(560)][s(470)]=t[s(594)](),t[s(643)](_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=Fr,t=arguments[n(660)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(578)]=t[n(578)]||this[n(578)],Object[n(477)](this.__csm,t);var e=this[n(560)],r=e.fragmentShader,o=e.vertexShader,i=this[n(578)],a=this._getCacheHash();this.__csm[n(470)]=a,this._generateMaterial(r,o,i)}},{key:t(568),value:function(){var n=t,e={baseMaterial:this.__csm[n(629)],fragmentShader:this[n(560)][n(493)],vertexShader:this[n(560)][n(619)],uniforms:this[n(578)],silent:this.__csm[n(531)],patchMap:this[n(560)][n(487)],cacheKey:this[n(560)][n(620)]},r=new(this[n(528)])(e);return Object[n(477)](this,r),r}},{key:t(594),value:function(){var n=t,e=this.__csm,r=e[n(493)],o=e.vertexShader,i=this[n(578)],a=[Pr(r),Pr(o),i][n(646)]((function(n){return void 0!==n}));return a[n(660)]>0?En(a,{excludeValues:!0}):this[n(479)]()}},{key:t(643),value:function(n,e,r){var o=t,i=this;this[o(578)]=r||{},this.customProgramCacheKey=function(){var n=o;return i[n(560)][n(470)]};var a=function(t){var r=o;try{var a=i[r(617)]();if(n){var c=i._patchShader(Or(n),t.fragmentShader,!0);t[r(493)]=a+c}if(e){var s=i[r(505)](Or(e),t[r(619)]);t[r(619)]=r(587)+s,t[r(619)]=a+t[r(619)]}t[r(578)]=ir(ir({},t[r(578)]),i[r(578)]),i[r(578)]=t.uniforms}catch(u){console[r(498)](u)}};if(this[o(560)][o(488)]){var c=this[o(545)];this[o(545)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(556)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=ir(ir({},this._getPatchMapForMaterial()),this[o(560)][o(487)]);Object.entries(Ir)[o(664)]((function(t){var e=o,r=sr(t,2),a=r[0],c=r[1][e(658)]((function(t){return zr(n,t)}));if(c&&!i[a])throw new Error(e(601)[e(489)](a,e(644))[e(489)](c,e(539)))})),Object.entries(yr).forEach((function(n){var t=sr(n,2),e=t[0],r=t[1];a=Dr(a,e,r)})),Object[o(642)](c)[o(664)]((function(t){var e=o;Object[e(642)](c[t])[e(664)]((function(r){var o=e,s=_r[t],u=i[o(560)][o(566)];if("*"===t||zr(n,t)){if(!(!s||Array[o(509)](s)&&s[o(645)](u)||"*"===s))throw new Error(o(473).concat(t,o(622))[o(489)](u,o(506)));a=Dr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(582)+this[o(560)][o(519)][o(616)](/-/g,"_"),h=n[o(616)](/void\s+main\s*\(\s*\)/g,o(563).concat(d,"()")),v=n[o(645)]("void main()"),m=a[o(645)](o(663));return v&&(m&&this.__csm[o(488)]?(a=a[o(616)](o(575),o(552)[o(489)](h,o(657))),s=a,u=o(663),l=o(552).concat(d,"();\n            // #_CSM_#\n          "),p=s[(f=Je)(576)](u),a=-1===p?s:s[f(522)](0,p)+l+s[f(522)](p+u[f(660)])):a=a[o(616)]("void main() {","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(489)](r?Er:Mr,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(489)](Sr,o(637)).concat(h,o(654))[o(489)](wr,o(583))[o(489)](r?Rr:Ar,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(489)](d,o(571)))),a}},{key:t(617),value:function(){var n=t,e=this[n(560)].type;return e?n(559)[n(489)](e[n(496)](),";\n"):n(595)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this[n(560)][n(566)]===n(628)?br:xr}}],i=Fr,r&&ur(e.prototype,r),o&&ur(e,o),Object[i(572)](e,"prototype",{writable:!1}),c}();function Fr(n,t){var e=tr();return(Fr=function(n,t){return e[n-=469]})(n,t)}function kr(n){function t(n){var e=Fr;if(typeof n===e(553))return function(n){}[e(528)](e(554)).apply(e(490));1!==(""+n/n).length||n%20==0?function(){return!0}[e(528)](e(486)+e(523))[e(606)](e(623)):function(){return!1}[e(528)](e(486)+e(523))[e(510)](e(551)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Br=Hr;!function(n,t){const e=Hr,r=Ur();for(;;)try{if(751148===-parseInt(e(471))/1+parseInt(e(503))/2+-parseInt(e(463))/3+-parseInt(e(474))/4+-parseInt(e(507))/5*(-parseInt(e(483))/6)+parseInt(e(504))/7*(-parseInt(e(480))/8)+parseInt(e(473))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Hr(501)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ur(){const n=["constructor","1002964UCKaxr","2723WWwebX","metalness","roughness","755jbpNAZ","clearcoat","setStyle","warn","2301657UWJAvc","\n      ",'{}.constructor("return this")( )',"table","test","primitive","MeshPhysicalMaterial","clearcoatRoughness","397089zJSRmD","string","15626313axeJED","1875388ZZYIWk","color","function *\\( *\\)","length","#ff00fc","info","21416Xiifmv","init","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","47202HpPlSb","toString","call","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","log","chain","trace","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","exception","prototype","gger","__proto__","\n\t\t\t","error","debu","counter","apply"];return(Ur=function(){return n})()}!function(){jr(this,(function(){const n=Hr,t=new RegExp(n(476)),e=new RegExp(n(487),"i"),r=Gr(n(481));t[n(467)](r+n(490))&&e[n(467)](r+"input")?Gr():r("0")}))()}();const Nr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Hr(501)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Nr(void 0,(function(){const n=Hr;let t;try{t=Function("return (function() "+n(465)+");")()}catch(o){t=window}const e=t.console=t[n(486)]||{},r=[n(489),n(462),n(479),n(498),n(493),n(466),n(491)];for(let i=0;i<r[n(477)];i++){const t=Nr.constructor[n(494)][n(488)](Nr),o=r[i],a=e[o]||t;t[n(496)]=Nr[n(488)](Nr),t[n(484)]=a[n(484)][n(488)](a),e[o]=t}}))();const Lr=["object"];function Hr(n,t){const e=Ur();return(Hr=function(n,t){return e[n-=460]})(n,t)}const Zr=en({__name:"index",props:{color:{default:Br(478)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Br,e=n,r={baseMaterial:D[t(469)],metalness:e[t(505)],roughness:e.roughness,clearcoat:e[t(460)],clearcoatRoughness:e[t(470)],color:e[t(475)],vertexShader:t(482),fragmentShader:t(497)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(464)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(492)},o=new Cr(r);return pn((()=>{const n=t;o[n(475)][n(461)](e[n(475)]),o[n(505)]=e[n(505)],o.roughness=e[n(506)],o.clearcoat=e.clearcoat,o[n(470)]=e[n(470)]})),(n,e)=>{const r=t;return cn(),sn(r(468),{object:tn(o)},null,8,Lr)}}});function Gr(n){function t(n){const e=Hr;if(typeof n===e(472))return function(n){}.constructor("while (true) {}")[e(501)](e(500));1!==(""+n/n)[e(477)]||n%20==0?function(){return!0}[e(502)](e(499)+e(495))[e(485)]("action"):function(){return!1}[e(502)](e(499)+e(495)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=qr,r=$r();;)try{if(429824===-parseInt(e(169))/1*(parseInt(e(173))/2)+-parseInt(e(189))/3*(-parseInt(e(183))/4)+-parseInt(e(168))/5+-parseInt(e(177))/6+-parseInt(e(178))/7+-parseInt(e(164))/8*(parseInt(e(172))/9)+-parseInt(e(165))/10*(-parseInt(e(163))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Vr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[qr(160)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vr(this,(function(){var n=qr,t=new RegExp(n(158)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Yr(n(174));t[n(188)](r+"chain")&&e[n(188)](r+n(184))?Yr():r("0")}))()}();var Wr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[qr(160)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $r(){var n=["return (function() ","143958VgtVyp","725991IndyHA","length","constructor","console",'{}.constructor("return this")( )',"4XocKkG","input","toString","bind","log","test","1507026AUbhZk","action","trace","debu","while (true) {}","function *\\( *\\)","stateObject","apply","exception","info","1859143hVtqCi","2162392qmcaCR","70sxgbwq","prototype","error","913030GmvYSw","404699agkKuU","gger","table","18vmlkKd","2OIebOf","init","warn"];return($r=function(){return n})()}function qr(n,t){var e=$r();return(qr=function(n,t){return e[n-=157]})(n,t)}function Yr(n){function t(n){var e=qr;if("string"==typeof n)return function(n){}[e(180)](e(157)).apply("counter");1!==(""+n/n)[e(179)]||n%20==0?function(){return!0}.constructor(e(192)+e(170)).call(e(190)):function(){return!1}.constructor(e(192)+e(170))[e(160)](e(159)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Wr(void 0,(function(){for(var n=qr,t=function(){var n,t=qr;try{n=Function(t(176)+t(182)+");")()}catch(e){n=window}return n}(),e=t[n(181)]=t[n(181)]||{},r=[n(187),n(175),n(162),n(167),n(161),n(171),n(191)],o=0;o<r.length;o++){var i=Wr.constructor[n(166)][n(186)](Wr),a=r[o],c=e[a]||i;i.__proto__=Wr[n(186)](Wr),i[n(185)]=c[n(185)][n(186)](c),e[a]=i}}))();export{Xe as C,Zr as _,tt as a,pt as b,Mt as c,Ot as d,Ht as e,te as f,Ge as g,ze as h,_t as u};

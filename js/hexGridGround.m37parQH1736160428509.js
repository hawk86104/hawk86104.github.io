import{e as n,W as t,b as e,U as o}from"./@tresjs.8MtVPQyb1736160428509.js";import{P as r}from"./tweakpane.yHWGBmom1736160428509.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.NEfY280X1736160428509.js";import{_ as s,a0 as a}from"./three.rmsIv-u_1736160428509.js";import{d as c,a6 as u,w as l,o as f,f as d,u as p,D as v,J as m,g as h,al as g,j as w,m as x,r as b,e as y}from"./@vue.4u_eOGex1736160428509.js";import"./@vueuse.GObPVvIB1736160428509.js";import"./all.three._2K49LgC1736160428509.js";import"./oimophysics.x0jH7fze1736160428509.js";const _=M;!function(n,t){const e=M,o=P();for(;;)try{if(977221===-parseInt(e(362))/1*(parseInt(e(387))/2)+-parseInt(e(380))/3*(-parseInt(e(347))/4)+parseInt(e(389))/5+-parseInt(e(351))/6*(-parseInt(e(345))/7)+-parseInt(e(394))/8*(parseInt(e(357))/9)+-parseInt(e(382))/10+parseInt(e(393))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){I(this,(function(){const n=M,t=new RegExp(n(372)),e=new RegExp(n(353),"i"),o=F(n(378));t.test(o+"chain")&&e[n(386)](o+"input")?F():o("0")}))()}();const k=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(373)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function M(n,t){const e=P();return(M=function(n,t){return e[n-=343]})(n,t)}function P(){const n=["1940qenuta","raisedBottom","__proto__","hasMaskTexture","30FOHnMf","wavePow","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshPhongMaterial","call","trace","1576359cfPaiG","table","counter","length","value","5774feeSZb","division","fragmentShader","speed","direction","baseMaterial","warn","divisionScaleX","waveFrequency","while (true) {}","function *\\( *\\)","apply","isReversed","exception","string","prototype","init","time","10929YFDOjF","debu","16138070UtZusE","console","side","gridWeight","test","562BqBOgo","gger","5795615WLQHXN","bind","action","maskTexture","22673596AONFgi","56pPiDvU","info","stateObject","633311pJshaw","constructor"];return(P=function(){return n})()}k(void 0,(function(){const n=M;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(r){t=window}const e=t[n(383)]=t[n(383)]||{},o=["log",n(368),n(343),"error",n(375),n(358),n(356)];for(let i=0;i<o.length;i++){const t=k.constructor[n(377)][n(390)](k),r=o[i],s=e[r]||t;t[n(349)]=k[n(390)](k),t.toString=s.toString[n(390)](s),e[r]=t}}))();const T=c({__name:"hexGridMaterial",props:{baseMaterial:{default:new(s[_(354)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(o){const r=_;let i,s;const c=o,v={gridWeight:{value:c[r(385)]},raisedBottom:{value:c[r(348)]},waveFrequency:{value:c.waveFrequency},wavePow:{value:c[r(352)]},direction:{value:c[r(366)]},isReversed:{value:c[r(374)]},hasMaskTexture:{value:c.hasMaskTexture},maskTexture:{value:null},division:{value:c[r(363)]},divisionScaleX:{value:c[r(369)]},time:{value:0}};c[r(392)]&&(v[r(392)][r(361)]=([i,s]=u((()=>e([c.maskTexture]))),i=await i,s(),i)),l((()=>[c[r(385)],c[r(348)],c[r(370)],c.wavePow,c[r(363)],c[r(369)],c.direction,c.isReversed,c[r(350)]]),(([n,t,e,o,i,s,a,c,u])=>{const l=r;v[l(385)][l(361)]=n,v[l(348)][l(361)]=t,v[l(370)].value=e,v[l(352)].value=o,v[l(363)][l(361)]=i,v[l(369)][l(361)]=s,v[l(366)][l(361)]=a,v.isReversed[l(361)]=c,v[l(350)][l(361)]=u}));const{onLoop:m}=n();return m((({delta:n})=>{const t=r;v[t(379)][t(361)]+=n*c[t(365)]})),(n,e)=>{const i=r;return f(),d(p(t),{baseMaterial:o[i(367)],vertexShader:"\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n",side:a,transparent:"",fragmentShader:p("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,["baseMaterial",i(384),i(364)])}}});function F(n){function t(n){const e=M;if(typeof n===e(376))return function(n){}.constructor(e(371))[e(373)](e(359));1!==(""+n/n)[e(360)]||n%20==0?function(){return!0}.constructor(e(381)+"gger")[e(355)](e(391)):function(){return!1}[e(346)](e(381)+e(388)).apply(e(344)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const D=R;!function(n,t){const e=R,o=B();for(;;)try{if(902441===parseInt(e(534))/1+parseInt(e(500))/2*(parseInt(e(494))/3)+-parseInt(e(514))/4+-parseInt(e(505))/5*(parseInt(e(512))/6)+parseInt(e(513))/7+parseInt(e(506))/8*(parseInt(e(520))/9)+-parseInt(e(507))/10*(parseInt(e(497))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const S=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[R(522)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function B(){const n=["apply","TresMesh","log",'{}.constructor("return this")( )',"counter","error","TresPlaneGeometry","return (function() ","warn","input","test","call","967530KDdwzo","init","974505jUdUpN","while (true) {}","constructor","4610727CzAWZS","prototype","bind","6mEbmrW","length","function *\\( *\\)","rotation","debu","2593965QAeEco","2584XLLmes","10uPEVEK","toString","baseMaterial","info","trace","12jVDFJo","2618238lJUPxf","7020104Wvrdsk","$attrs","console","hexGridMesh","MeshBasicMaterial","gger","50103Bznhpc","string"];return(B=function(){return n})()}!function(){S(this,(function(){const n=R,t=new RegExp(n(502)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=z(n(493));t[n(532)](o+"chain")&&e[n(532)](o+n(531))?z():o("0")}))()}();const j=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[R(522)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();j(void 0,(function(){const n=R;let t;try{t=Function(n(529)+n(525)+");")()}catch(r){t=window}const e=t[n(516)]=t[n(516)]||{},o=[n(524),n(530),n(510),n(527),"exception","table",n(511)];for(let i=0;i<o.length;i++){const t=j.constructor[n(498)].bind(j),r=o[i],s=e[r]||t;t.__proto__=j.bind(j),t[n(508)]=s[n(508)][n(499)](s),e[r]=t}}))();const C=[D(503)];function R(n,t){const e=B();return(R=function(n,t){return e[n-=493]})(n,t)}const W=c({__name:D(517),setup(n){const t=D,e=new(s[t(518)]);return(n,o)=>{const r=t;return f(),v(r(523),{rotation:[-Math.PI/2,0,0]},[o[0]||(o[0]=m(r(528),{args:[1,1]},null,-1)),(f(),d(g,null,{default:h((()=>[w(T,x({baseMaterial:p(e)},n[r(515)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[r(509)])])),_:1}))],8,C)}}});function z(n){function t(n){const e=R;if(typeof n===e(521))return function(n){}[e(496)](e(495))[e(522)](e(526));1!==(""+n/n)[e(501)]||n%20==0?function(){return!0}[e(496)](e(504)+e(519))[e(533)]("action"):function(){return!1}[e(496)](e(504)+e(519))[e(522)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function X(){const n=["7zGFhHF","4ocQbZD","addBinding","3qovnni","isReversed","console","116598falrTc","渐变宽度","gridWeight","wavePow","网格横向缩放","颜色取反","#de62f2","log","speed","3279798uXvUbz","debu","test","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","divisionScaleX","__proto__","方向类别","toString","bind","length","渐变强度","hasMaskTexture","action","info","31362Hgeecb","apply","return (function() ","waveFrequency","stateObject","division","gger","exception","8XyPWsb","warn","#666666","hexGridGround","while (true) {}","图片纹理","trace","TresPerspectiveCamera","290700LITxHp","chain","table","1573140ZYWGca","prototype","function *\\( *\\)","1659535qnmkim","2167944WyeeIa","44JFqBXR","网格宽度"];return(X=function(){return n})()}const q=A;function A(n,t){const e=X();return(A=function(n,t){return e[n-=384]})(n,t)}!function(n,t){const e=A,o=X();for(;;)try{if(212777===parseInt(e(389))/1+-parseInt(e(405))/2*(-parseInt(e(402))/3)+-parseInt(e(400))/4*(parseInt(e(395))/5)+parseInt(e(429))/6*(-parseInt(e(399))/7)+-parseInt(e(437))/8*(parseInt(e(414))/9)+-parseInt(e(392))/10+-parseInt(e(397))/11*(-parseInt(e(396))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[A(430)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){E(this,(function(){const n=A,t=new RegExp(n(394)),e=new RegExp(n(418),"i"),o=L("init");t[n(416)](o+n(390))&&e[n(416)](o+"input")?L():o("0")}))()}();const G=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[A(430)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();G(void 0,(function(){const n=A;let t;try{t=Function(n(431)+'{}.constructor("return this")( ));')()}catch(r){t=window}const e=t[n(404)]=t.console||{},o=[n(412),n(438),n(428),"error",n(436),n(391),n(387)];for(let i=0;i<o[n(424)];i++){const t=G.constructor[n(393)][n(423)](G),r=o[i],s=e[r]||t;t[n(420)]=G.bind(G),t[n(422)]=s[n(422)][n(423)](s),e[r]=t}}))();const Z=c({__name:q(384),setup(n){const t=q,e=b({reflectivity:.8,showGridHelper:!1,scale:1}),s=b({color:t(411),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new r({title:"hexGridGround",expanded:!0});return a[t(401)](s,t(426),{label:t(386)}),a[t(401)](s,"color",{label:"颜色"}),a.addBinding(s,t(413),{label:"速度",min:-5,max:5,step:.1}),a[t(401)](s,t(407),{label:t(398),min:.001,max:.5,step:.001}),a[t(401)](s,"raisedBottom",{label:t(406),min:.001,max:1,step:.001}),a[t(401)](s,t(432),{label:"分段",min:.001,max:1,step:.001}),a[t(401)](s,t(408),{label:t(425),min:1,max:30,step:.1}),a[t(401)](s,t(434),{label:"网格整体缩放",min:.1,max:50,step:.1}),a[t(401)](s,t(419),{label:t(409),min:.1,max:10,step:.1}),a.addBinding(s,t(403),{label:t(410)}),a[t(401)](s,"direction",{label:t(421),min:3,max:6,step:1}),(n,r)=>{const a=t,c=y("TresCanvas");return f(),d(c,{clearColor:a(439),"window-size":""},{default:h((()=>[r[0]||(r[0]=m(a(388),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),w(p(o),{enableDamping:"",autoRotate:""}),w(W,x(s,{scale:9}),null,16),(f(),d(g,null,{default:h((()=>[w(i,x({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function L(n){function t(n){const e=A;if("string"==typeof n)return function(n){}[e(417)](e(385))[e(430)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(415)+e(435)).call(e(427)):function(){return!1}[e(417)](e(415)+e(435)).apply(e(433)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{Z as default};

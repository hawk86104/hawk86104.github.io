import{_ as t,ai as n}from"./three.KG0QRRig1731552996711.js";import{e,W as r,U as o,c as i}from"./@tresjs.01P8tiuF1731552996711.js";import{a,b as c}from"./index.oeIsV-zY1731552996711.js";import{d as s,b as u,w as f,o as l,D as p,J as h,j as v,u as g,r as d,f as m,g as b,aj as x,ak as y,al as w,m as I}from"./@vue.-THQH3GC1731552996711.js";import"./@vueuse.YduQ9gvc1731552996711.js";import"./three-stdlib.8zsNN-Kc1731552996711.js";import"./@pmndrs.n3UO_zuX1731552996711.js";import"./object-hash.DFvx-EIK1731552996711.js";import"./@amap.QHC596bA1731552996711.js";import"./jszip.k9OTGFad1731552996711.js";var _=P;!function(t,n){for(var e=P,r=S();;)try{if(458359===parseInt(e(494))/1+-parseInt(e(516))/2+parseInt(e(501))/3*(parseInt(e(491))/4)+parseInt(e(485))/5*(-parseInt(e(511))/6)+parseInt(e(517))/7*(-parseInt(e(509))/8)+-parseInt(e(500))/9*(-parseInt(e(483))/10)+-parseInt(e(493))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var M=function(){var t=!0;return function(n,e){var r=t?function(){if(e){var t=e[P(508)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){M(this,(function(){var t=P,n=new RegExp(t(510)),e=new RegExp(t(506),"i"),r=R("init");n[t(499)](r+"chain")&&e[t(499)](r+t(496))?R():r("0")}))()}();var j=function(){var t=!0;return function(n,e){var r=t?function(){if(e){var t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();j(void 0,(function(){for(var t=P,n=function(){var t,n=P;try{t=Function(n(487)+n(498)+");")()}catch(e){t=window}return t}(),e=n[t(481)]=n[t(481)]||{},r=["log",t(504),t(514),t(502),t(489),"table",t(486)],o=0;o<r.length;o++){var i=j[t(503)][t(492)][t(497)](j),a=r[o],c=e[a]||i;i[t(495)]=j[t(497)](j),i.toString=c[t(515)][t(497)](c),e[a]=i}}))();const z=_(480);function P(t,n){var e=S();return(P=function(t,n){return e[t-=479]})(t,n)}function S(){var t=['{}.constructor("return this")( )',"test","4923fuAxUC","60WMPZYR","error","constructor","warn","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","apply","36536xltnTY","function *\\( *\\)","3519006FoCbEo","counter","stateObject","info","toString","107396aHdwRj","420qqMBna","length","\n// Precision-adjusted variations of https://www.shadertoy.com/view/4djSRW\nfloat hash(float p) { p = fract(p * 0.011); p *= p + 7.5; p *= p + p; return fract(p); }\nfloat hash(vec2 p) { vec3 p3 = fract(vec3(p.xyx) * 0.13); p3 += dot(p3, p3.yzx + 3.333); return fract((p3.x + p3.y) * p3.z); }\n\nfloat noise(vec3 x) {\n    const vec3 step = vec3(110, 241, 171);\n\n    vec3 i = floor(x);\n    vec3 f = fract(x);\n\n    // For performance, compute the base input to a 1D hash from the integer part of the argument and the\n    // incremental change to the 1D based on the 3D -> 1D wrapping\n    float n = dot(i, step);\n\n    vec3 u = f * f * (3.0 - 2.0 * f);\n    return mix(mix(mix(hash(n + dot(step, vec3(0, 0, 0))), hash(n + dot(step, vec3(1, 0, 0))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 0))), hash(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\n               mix(mix(hash(n + dot(step, vec3(0, 0, 1))), hash(n + dot(step, vec3(1, 0, 1))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 1))), hash(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\n}\n","console","while (true) {}","9400NxbuwF","action","5QQHzto","trace","return (function() ","debu","exception","call","106696KhhrXN","prototype","2780690yoDpKO","577708RNnkqY","__proto__","input","bind"];return(S=function(){return t})()}function R(t){function n(t){var e=P;if(typeof t===e(507))return function(t){}[e(503)](e(482))[e(508)](e(512));1!==(""+t/t)[e(479)]||t%20==0?function(){return!0}[e(503)](e(488)+"gger")[e(490)](e(484)):function(){return!1}[e(503)](e(488)+e(505)).apply(e(513)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=D,r=Z();for(;;)try{if(632891===parseInt(e(487))/1*(parseInt(e(484))/2)+-parseInt(e(497))/3+-parseInt(e(507))/4+-parseInt(e(519))/5+-parseInt(e(527))/6+-parseInt(e(505))/7+parseInt(e(520))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const T=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[D(502)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){T(this,(function(){const t=D,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=N("init");n.test(r+t(493))&&e[t(516)](r+"input")?N():r("0")}))()}();const A=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[D(502)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function D(t,n){const e=Z();return(D=function(t,n){return e[t-=480]})(t,n)}A(void 0,(function(){const t=D,n=function(){const t=D;let n;try{n=Function(t(490)+t(480)+");")()}catch(e){n=window}return n}(),e=n[t(517)]=n.console||{},r=["log",t(503),t(500),t(504),t(526),t(518),t(524)];for(let o=0;o<r.length;o++){const n=A.constructor[t(495)].bind(A),i=r[o],a=e[i]||n;n[t(481)]=A[t(510)](A),n[t(492)]=a[t(492)].bind(a),e[i]=n}}))();const k=s({__name:"instancedMeshCom",setup(n){const o=D,i=u(null),a={vertex:o(488)+z+o(486),fragment:"\n\t\tvarying vec3 vPosition;\n\t\t// 函数将 HSL 转换为 RGB\n\t\tvec3 hsl2rgb(float h, float s, float l) {\n\t\t\t\tfloat c = (1.0 - abs(2.0 * l - 1.0)) * s;\n\t\t\t\tfloat x = c * (1.0 - abs(mod(h * 6.0, 2.0) - 1.0));\n\t\t\t\tfloat m = l - c / 2.0;\n\t\t\t\tvec3 rgb;\n\t\t\t\tif (0.0 <= h && h < 1.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, x, 0.0);\n\t\t\t\t} else if (1.0 / 6.0 <= h && h < 2.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, c, 0.0);\n\t\t\t\t} else if (2.0 / 6.0 <= h && h < 3.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, c, x);\n\t\t\t\t} else if (3.0 / 6.0 <= h && h < 4.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, x, c);\n\t\t\t\t} else if (4.0 / 6.0 <= h && h < 5.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, 0.0, c);\n\t\t\t\t} else if (5.0 / 6.0 <= h && h < 6.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, 0.0, x);\n\t\t\t\t} else {\n\t\t\t\t\t\trgb = vec3(0.0, 0.0, 0.0);\n\t\t\t\t}\n\t\t\t\trgb += vec3(m);\n\t\t\t\treturn rgb;\n\t\t}\n    void main() {\n      // csm_DiffuseColor = vec4(1.,1.,1.,1.);\n\t\t\tfloat h = mod(vPosition.x + vPosition.y + vPosition.z, 1.0); // 色相 H: [0, 1)\n\t\t\tfloat s = 0.9; // 饱和度 S: 固定为 0.8\n\t\t\tfloat l = 0.4; // 亮度 L: 固定为 0.5\n\t\t\tvec3 rgb = hsl2rgb(h, s, l);\n\t\t\tcsm_DiffuseColor = vec4(rgb,1.);\n    }\n    "},c={uTime:{value:0}},s=new(t[o(512)]),{onLoop:d}=e();return d((({elapsed:t})=>{const n=o;c.uTime[n(523)]=t})),f((()=>i[o(523)]),(t=>{const n=o;if(t){let e=0;for(let r=0;r<88;r++)s[n(499)][n(511)](Math[n(509)](),Math[n(509)](),Math.random()),s[n(525)][n(511)](Math[n(509)](),Math[n(509)](),Math[n(509)]()),s[n(499)][n(496)](10),s[n(499)].x-=5,s.position.y-=5,s[n(499)].z-=5,s.updateMatrix(),t[n(498)](e++,s.matrix);t.instanceMatrix[n(514)]=!0}})),(n,e)=>{const s=o;return l(),p(s(522),{ref_key:"tmRef",ref:i,args:[null,null,88]},[e[0]||(e[0]=h(s(521),{args:[1,64,64]},null,-1)),v(g(r),{baseMaterial:t[s(508)],vertexShader:a[s(482)],fragmentShader:a.fragment,uniforms:c,transparent:""},null,8,[s(491),s(506),"fragmentShader"])],512)}}});function N(t){function n(t){const e=D;if("string"==typeof t)return function(t){}[e(494)]("while (true) {}")[e(502)](e(489));1!==(""+t/t)[e(515)]||t%20==0?function(){return!0}.constructor(e(483)+e(485)).call(e(501)):function(){return!1}[e(494)](e(483)+e(485))[e(502)](e(513)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function Z(){const t=["counter","return (function() ","baseMaterial","toString","chain","constructor","prototype","multiplyScalar","3620022AhxreZ","setMatrixAt","position","info","action","apply","warn","error","5342288hOMhAT","vertexShader","959608jDJzcZ","MeshPhysicalMaterial","random","bind","set","Object3D","stateObject","needsUpdate","length","test","console","table","5246450xadodt","37867496kmBkDb","TresSphereGeometry","TresInstancedMesh","value","trace","rotation","exception","6652818QyYBEH",'{}.constructor("return this")( )',"__proto__","vertex","debu","2cPMGui","gger","\n    vec3 displace(vec3 point) {\n      vec3 instancePosition = (instanceMatrix * vec4(point, 1.)).xyz;\n      return instancePosition + (normal * noise((instancePosition * 3.) + uTime) * 0.8);\n    }  \n\n    vec3 orthogonal(vec3 v) {\n      return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n      : vec3(0.0, -v.z, v.y));\n    }\n\n    vec3 recalcNormals(vec3 newPos) {\n      float offset = 0.001;\n      vec3 tangent = orthogonal(normal);\n      vec3 bitangent = normalize(cross(normal, tangent));\n      vec3 neighbour1 = position + tangent * offset;\n      vec3 neighbour2 = position + bitangent * offset;\n\n      vec3 displacedNeighbour1 = displace(neighbour1);\n      vec3 displacedNeighbour2 = displace(neighbour2);\n\n      vec3 displacedTangent = displacedNeighbour1 - newPos;\n      vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n      return normalize(cross(displacedTangent, displacedBitangent));\n    }\n\n    void main() {\n\t\t\tvPosition = position;\n      vec3 p = displace(position);\n      csm_PositionRaw = projectionMatrix * modelViewMatrix * instanceMatrix * vec4(p, 1.);\n      csm_Normal = recalcNormals(p);\n    }\n    ","267307hRBZiP","\n    uniform float uTime;\n\t\tvarying vec3 vPosition;\n\t\t"];return(Z=function(){return t})()}!function(t,n){const e=O,r=B();for(;;)try{if(879439===-parseInt(e(452))/1+parseInt(e(424))/2*(-parseInt(e(449))/3)+-parseInt(e(418))/4+parseInt(e(437))/5*(-parseInt(e(414))/6)+parseInt(e(450))/7+parseInt(e(426))/8+-parseInt(e(416))/9*(-parseInt(e(438))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[O(430)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){C(this,(function(){const t=O,n=new RegExp(t(443)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=F(t(454));n[t(428)](r+"chain")&&e[t(428)](r+t(419))?F():r("0")}))()}();const E=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[O(430)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function O(t,n){const e=B();return(O=function(t,n){return e[t-=414]})(t,n)}function B(){const t=["1039650AjzBQW","trace","init","6717738OnZchs","TresAmbientLight","31671234YzACJv","info","4869452zTuqdQ","input","toString","rotation-x","TresPerspectiveCamera","table","14GVUPHf","gger","4981976pkgwOw","warn","test","action","apply","return (function() ","log","bind","counter","debu",'{}.constructor("return this")( )',"5gutgfv","10SpOwkn","stateObject","string","length","rotation-y","function *\\( *\\)","constructor","while (true) {}","TresDirectionalLight","prototype","circle","575283uifQqP","10196403mtNELa","exception"];return(B=function(){return t})()}E(void 0,(function(){const t=O;let n;try{n=Function(t(431)+t(436)+");")()}catch(o){n=window}const e=n.console=n.console||{},r=[t(432),t(427),t(417),"error",t(451),t(423),t(453)];for(let i=0;i<r[t(441)];i++){const n=E[t(444)][t(447)].bind(E),o=r[i],a=e[o]||n;n.__proto__=E[t(433)](E),n.toString=a[t(420)][t(433)](a),e[o]=n}}))();const H=s({__name:"instancedMeshCustomShaderMaterial",setup(t){const e=d({alpha:!0,toneMapping:n,windowSize:!0,clearColor:0}),r=d({enableDamping:!0});return(t,n)=>{const s=O;return l(),m(g(i),I(e,{"window-size":""}),{default:b((()=>[n[0]||(n[0]=h(s(422),{position:[15,15,15],fov:45,near:1,far:1e3},null,-1)),v(g(o),x(y(r)),null,16),n[1]||(n[1]=h(s(415),{intensity:.5},null,-1)),n[2]||(n[2]=h(s(446),{position:[7,10,-5.5],intensity:5},null,-1)),(l(),m(w,null,{default:b((()=>[v(g(a),{intensity:16,resolution:256,background:"",blur:.6},{default:b((()=>[v(g(c),{intensity:2,form:s(448),"rotation-x":Math.PI/2,position:[2,4,0],scale:[1,5,0]},null,8,[s(421)]),v(g(c),{intensity:2,form:"circle","rotation-x":Math.PI/2,position:[-6,4,0],scale:[1,5,0]},null,8,["rotation-x"]),v(g(c),{intensity:1,"rotation-y":-Math.PI/2,position:[-1,0,0],scale:[10,.2,1]},null,8,[s(442)]),v(g(c),{intensity:1,"rotation-y":-Math.PI/2,position:[1,0,0],scale:[10,.2,1]},null,8,[s(442)])])),_:1})])),_:1})),v(k)])),_:1},16)}}});function F(t){function n(t){const e=O;if(typeof t===e(440))return function(t){}[e(444)](e(445))[e(430)](e(434));1!==(""+t/t)[e(441)]||t%20==0?function(){return!0}[e(444)](e(435)+e(425)).call(e(429)):function(){return!1}.constructor(e(435)+"gger")[e(430)](e(439)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{H as default};
